(function t(n,a){'object'==typeof exports&&'object'==typeof module?module.exports=a(require('fetch'),require('window'),require('crypto'),require('TextEncoder')):'function'==typeof define&&define.amd?define(['fetch','window','crypto','TextEncoder'],a):'object'==typeof exports?exports.Mashlib=a(require('fetch'),require('window'),require('crypto'),require('TextEncoder')):n.Mashlib=a(n.fetch,n.window,n.crypto,n.TextEncoder)})('undefined'==typeof self?this:self,function(__WEBPACK_EXTERNAL_MODULE_39__,__WEBPACK_EXTERNAL_MODULE_51__,__WEBPACK_EXTERNAL_MODULE_89__,__WEBPACK_EXTERNAL_MODULE_330__){var _MathLN=Math.LN2,_Mathlog=Math.log,_Mathabs=Math.abs,_Mathround=Math.round,_Mathsin=Math.sin,_Mathcos=Math.cos,_MathPI=Math.PI,_Mathimul=Math.imul,_Mathclz=Math.clz32,_Mathmax=Math.max,_Mathceil=Math.ceil,_Mathfloor=Math.floor,_Mathpow=Math.pow,_StringfromCharCode=String.fromCharCode,_Mathmin=Math.min;return function(t){function n(r){if(a[r])return a[r].exports;var i=a[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}var a={};return n.m=t,n.c=a,n.d=function(t,a,r){n.o(t,a)||Object.defineProperty(t,a,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var a=t&&t.__esModule?function n(){return t['default']}:function n(){return t};return n.d(a,'a',a),a},n.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},n.p='/dist/',n(n.s=253)}([function(t,n){t.exports='function'==typeof Object.create?function t(n,a){n.super_=a,n.prototype=Object.create(a.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}})}:function t(n,a){n.super_=a;var r=function(){};r.prototype=a.prototype,n.prototype=new r,n.prototype.constructor=n}},function(t,n,a){'use strict';var r=a(4),i=a(15),o={ns:i,rdf:r,acl:a(246),aclControl:a(457),authn:a(248),create:a(462),icons:a(29),log:a(25),matrix:a(463),messageArea:a(464),pad:a(465),store:a(22),table:a(466),tabs:a(467),utils:a(31),widgets:a(30)};t.exports=o},function(t,n,a){'use strict';(function(t){function r(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&'function'==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}function i(){return s.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(t,n){if(i()<n)throw new RangeError('Invalid typed array length');return s.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(n),t.__proto__=s.prototype):(null===t&&(t=new s(n)),t.length=n),t}function s(t,n,a){if(!s.TYPED_ARRAY_SUPPORT&&!(this instanceof s))return new s(t,n,a);if('number'==typeof t){if('string'==typeof n)throw new Error('If encoding is specified then the first argument must be a string');return u(this,t)}return d(this,t,n,a)}function d(t,n,a,r){if('number'==typeof n)throw new TypeError('"value" argument must not be a number');return'undefined'!=typeof ArrayBuffer&&n instanceof ArrayBuffer?h(t,n,a,r):'string'==typeof n?f(t,n,a):g(t,n)}function l(t){if('number'!=typeof t)throw new TypeError('"size" argument must be a number');else if(0>t)throw new RangeError('"size" argument must not be negative')}function c(t,n,a,r){return l(n),0>=n?o(t,n):void 0===a?o(t,n):'string'==typeof r?o(t,n).fill(a,r):o(t,n).fill(a)}function u(t,n){if(l(n),t=o(t,0>n?0:0|b(n)),!s.TYPED_ARRAY_SUPPORT)for(var a=0;a<n;++a)t[a]=0;return t}function f(t,n,a){if(('string'!=typeof a||''===a)&&(a='utf8'),!s.isEncoding(a))throw new TypeError('"encoding" must be a valid string encoding');var r=0|w(n,a);t=o(t,r);var i=t.write(n,a);return i!==r&&(t=t.slice(0,i)),t}function m(t,n){var a=0>n.length?0:0|b(n.length);t=o(t,a);for(var r=0;r<a;r+=1)t[r]=255&n[r];return t}function h(t,n,a,r){if(n.byteLength,0>a||n.byteLength<a)throw new RangeError('\'offset\' is out of bounds');if(n.byteLength<a+(r||0))throw new RangeError('\'length\' is out of bounds');return n=void 0===a&&void 0===r?new Uint8Array(n):void 0===r?new Uint8Array(n,a):new Uint8Array(n,a,r),s.TYPED_ARRAY_SUPPORT?(t=n,t.__proto__=s.prototype):t=m(t,n),t}function g(t,n){if(s.isBuffer(n)){var a=0|b(n.length);return(t=o(t,a),0===t.length)?t:(n.copy(t,0,0,a),t)}if(n){if('undefined'!=typeof ArrayBuffer&&n.buffer instanceof ArrayBuffer||'length'in n)return'number'!=typeof n.length||Q(n.length)?o(t,0):m(t,n);if('Buffer'===n.type&&ne(n.data))return m(t,n.data)}throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')}function b(t){if(t>=i())throw new RangeError('Attempt to allocate Buffer larger than maximum size: 0x'+i().toString(16)+' bytes');return 0|t}function y(t){return+t!=t&&(t=0),s.alloc(+t)}function w(t,n){if(s.isBuffer(t))return t.length;if('undefined'!=typeof ArrayBuffer&&'function'==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;'string'!=typeof t&&(t=''+t);var a=t.length;if(0===a)return 0;for(var r=!1;;)switch(n){case'ascii':case'latin1':case'binary':return a;case'utf8':case'utf-8':case void 0:return J(t).length;case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return 2*a;case'hex':return a>>>1;case'base64':return Y(t).length;default:if(r)return J(t).length;n=(''+n).toLowerCase(),r=!0;}}function v(t,n,a){var r=!1;if((void 0===n||0>n)&&(n=0),n>this.length)return'';if((void 0===a||a>this.length)&&(a=this.length),0>=a)return'';if(a>>>=0,n>>>=0,a<=n)return'';for(t||(t='utf8');!0;)switch(t){case'hex':return D(this,n,a);case'utf8':case'utf-8':return j(this,n,a);case'ascii':return R(this,n,a);case'latin1':case'binary':return M(this,n,a);case'base64':return N(this,n,a);case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return P(this,n,a);default:if(r)throw new TypeError('Unknown encoding: '+t);t=(t+'').toLowerCase(),r=!0;}}function x(t,a,n){var r=t[a];t[a]=t[n],t[n]=r}function _(t,n,a,r,i){if(0===t.length)return-1;if('string'==typeof a?(r=a,a=0):2147483647<a?a=2147483647:-2147483648>a&&(a=-2147483648),a=+a,isNaN(a)&&(a=i?0:t.length-1),0>a&&(a=t.length+a),a>=t.length){if(i)return-1;a=t.length-1}else if(0>a)if(i)a=0;else return-1;if('string'==typeof n&&(n=s.from(n,r)),s.isBuffer(n))return 0===n.length?-1:k(t,n,a,r,i);if('number'==typeof n)return n&=255,s.TYPED_ARRAY_SUPPORT&&'function'==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,n,a):Uint8Array.prototype.lastIndexOf.call(t,n,a):k(t,[n],a,r,i);throw new TypeError('val must be string, number or Buffer')}function k(t,n,a,r,o){function s(t,n){return 1==d?t[n]:t.readUInt16BE(n*d)}var d=1,l=t.length,c=n.length;if(void 0!==r&&(r=(r+'').toLowerCase(),'ucs2'===r||'ucs-2'===r||'utf16le'===r||'utf-16le'===r)){if(2>t.length||2>n.length)return-1;d=2,l/=2,c/=2,a/=2}var u;if(o){var i=-1;for(u=a;u<l;u++)if(s(t,u)!==s(n,-1==i?0:u-i))-1!=i&&(u-=u-i),i=-1;else if(-1==i&&(i=u),u-i+1===c)return i*d}else for(a+c>l&&(a=l-c),u=a;0<=u;u--){for(var f=!0,m=0;m<c;m++)if(s(t,u+m)!==s(n,m)){f=!1;break}if(f)return u}return-1}function C(t,n,a,r){a=+a||0;var o=t.length-a;r?(r=+r,r>o&&(r=o)):r=o;var s=n.length;if(0!=s%2)throw new TypeError('Invalid hex string');r>s/2&&(r=s/2);for(var d=0,i;d<r;++d){if(i=parseInt(n.substr(2*d,2),16),isNaN(i))return d;t[a+d]=i}return d}function E(t,n,a,r){return Z(J(n,t.length-a),t,a,r)}function T(t,n,a,r){return Z(K(n),t,a,r)}function A(t,n,a,r){return T(t,n,a,r)}function S(t,n,a,r){return Z(Y(n),t,a,r)}function I(t,n,a,r){return Z(X(n,t.length-a),t,a,r)}function N(t,n,a){return 0===n&&a===t.length?ee.fromByteArray(t):ee.fromByteArray(t.slice(n,a))}function j(t,n,a){a=_Mathmin(t.length,a);for(var r=[],o=n;o<a;){var i=t[o],s=null,d=239<i?4:223<i?3:191<i?2:1;if(o+d<=a){var l,c,u,f;1==d?128>i&&(s=i):2==d?(l=t[o+1],128==(192&l)&&(f=(31&i)<<6|63&l,127<f&&(s=f))):3==d?(l=t[o+1],c=t[o+2],128==(192&l)&&128==(192&c)&&(f=(15&i)<<12|(63&l)<<6|63&c,2047<f&&(55296>f||57343<f)&&(s=f))):4==d?(l=t[o+1],c=t[o+2],u=t[o+3],128==(192&l)&&128==(192&c)&&128==(192&u)&&(f=(15&i)<<18|(63&l)<<12|(63&c)<<6|63&u,65535<f&&1114112>f&&(s=f))):void 0}null===s?(s=65533,d=1):65535<s&&(s-=65536,r.push(55296|1023&s>>>10),s=56320|1023&s),r.push(s),o+=d}return L(r)}function L(t){var n=t.length;if(n<=ae)return _StringfromCharCode.apply(String,t);for(var a='',r=0;r<n;)a+=_StringfromCharCode.apply(String,t.slice(r,r+=ae));return a}function R(t,n,a){var r='';a=_Mathmin(t.length,a);for(var o=n;o<a;++o)r+=_StringfromCharCode(127&t[o]);return r}function M(t,n,a){var r='';a=_Mathmin(t.length,a);for(var o=n;o<a;++o)r+=_StringfromCharCode(t[o]);return r}function D(t,n,a){var r=t.length;(!n||0>n)&&(n=0),(!a||0>a||a>r)&&(a=r);for(var o='',s=n;s<a;++s)o+=G(t[s]);return o}function P(t,n,a){for(var r=t.slice(n,a),o='',s=0;s<r.length;s+=2)o+=_StringfromCharCode(r[s]+256*r[s+1]);return o}function O(t,n,a){if(0!=t%1||0>t)throw new RangeError('offset is not uint');if(t+n>a)throw new RangeError('Trying to access beyond buffer length')}function B(t,n,a,r,i,o){if(!s.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(n>i||n<o)throw new RangeError('"value" argument is out of bounds');if(a+r>t.length)throw new RangeError('Index out of range')}function U(t,n,a,r){0>n&&(n=65535+n+1);for(var o=0,i=_Mathmin(t.length-a,2);o<i;++o)t[a+o]=(n&255<<8*(r?o:1-o))>>>8*(r?o:1-o)}function F(t,n,a,r){0>n&&(n=4294967295+n+1);for(var o=0,i=_Mathmin(t.length-a,4);o<i;++o)t[a+o]=255&n>>>8*(r?o:3-o)}function q(t,n,a,r,i,o){if(a+r>t.length)throw new RangeError('Index out of range');if(0>a)throw new RangeError('Index out of range')}function z(t,n,a,r,i){return i||q(t,n,a,4,3.4028234663852886e38,-3.4028234663852886e38),te.write(t,n,a,r,23,4),a+4}function H(t,n,a,r,i){return i||q(t,n,a,8,1.7976931348623157e308,-1.7976931348623157e308),te.write(t,n,a,r,52,8),a+8}function W(t){if(t=V(t).replace(re,''),2>t.length)return'';for(;0!=t.length%4;)t+='=';return t}function V(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,'')}function G(t){return 16>t?'0'+t.toString(16):t.toString(16)}function J(t,n){n=n||Infinity;for(var a=t.length,r=null,o=[],s=0,i;s<a;++s){if(i=t.charCodeAt(s),55295<i&&57344>i){if(!r){if(56319<i){-1<(n-=3)&&o.push(239,191,189);continue}else if(s+1===a){-1<(n-=3)&&o.push(239,191,189);continue}r=i;continue}if(56320>i){-1<(n-=3)&&o.push(239,191,189),r=i;continue}i=(r-55296<<10|i-56320)+65536}else r&&-1<(n-=3)&&o.push(239,191,189);if(r=null,128>i){if(0>(n-=1))break;o.push(i)}else if(2048>i){if(0>(n-=2))break;o.push(192|i>>6,128|63&i)}else if(65536>i){if(0>(n-=3))break;o.push(224|i>>12,128|63&i>>6,128|63&i)}else if(1114112>i){if(0>(n-=4))break;o.push(240|i>>18,128|63&i>>12,128|63&i>>6,128|63&i)}else throw new Error('Invalid code point')}return o}function K(t){for(var n=[],a=0;a<t.length;++a)n.push(255&t.charCodeAt(a));return n}function X(t,n){for(var a=[],r=0,i,o,s;r<t.length&&!(0>(n-=2));++r)i=t.charCodeAt(r),o=i>>8,s=i%256,a.push(s),a.push(o);return a}function Y(t){return ee.toByteArray(W(t))}function Z(t,n,a,r){for(var o=0;o<r&&!(o+a>=n.length||o>=t.length);++o)n[o+a]=t[o];return o}function Q(t){return t!==t}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */var ee=a(260),te=a(261),ne=a(155);n.Buffer=s,n.SlowBuffer=y,n.INSPECT_MAX_BYTES=50,s.TYPED_ARRAY_SUPPORT=t.TYPED_ARRAY_SUPPORT===void 0?r():t.TYPED_ARRAY_SUPPORT,n.kMaxLength=i(),s.poolSize=8192,s._augment=function(t){return t.__proto__=s.prototype,t},s.from=function(t,n,a){return d(null,t,n,a)},s.TYPED_ARRAY_SUPPORT&&(s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array,'undefined'!=typeof Symbol&&Symbol.species&&s[Symbol.species]===s&&Object.defineProperty(s,Symbol.species,{value:null,configurable:!0})),s.alloc=function(t,n,a){return c(null,t,n,a)},s.allocUnsafe=function(t){return u(null,t)},s.allocUnsafeSlow=function(t){return u(null,t)},s.isBuffer=function t(n){return!!(null!=n&&n._isBuffer)},s.compare=function t(n,a){if(!s.isBuffer(n)||!s.isBuffer(a))throw new TypeError('Arguments must be Buffers');if(n===a)return 0;for(var r=n.length,o=a.length,d=0,i=_Mathmin(r,o);d<i;++d)if(n[d]!==a[d]){r=n[d],o=a[d];break}return r<o?-1:o<r?1:0},s.isEncoding=function t(n){switch((n+'').toLowerCase()){case'hex':case'utf8':case'utf-8':case'ascii':case'latin1':case'binary':case'base64':case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return!0;default:return!1;}},s.concat=function t(n,a){if(!ne(n))throw new TypeError('"list" argument must be an Array of Buffers');if(0===n.length)return s.alloc(0);var r;if(a===void 0)for(a=0,r=0;r<n.length;++r)a+=n[r].length;var i=s.allocUnsafe(a),o=0;for(r=0;r<n.length;++r){var d=n[r];if(!s.isBuffer(d))throw new TypeError('"list" argument must be an Array of Buffers');d.copy(i,o),o+=d.length}return i},s.byteLength=w,s.prototype._isBuffer=!0,s.prototype.swap16=function t(){var n=this.length;if(0!=n%2)throw new RangeError('Buffer size must be a multiple of 16-bits');for(var a=0;a<n;a+=2)x(this,a,a+1);return this},s.prototype.swap32=function t(){var n=this.length;if(0!=n%4)throw new RangeError('Buffer size must be a multiple of 32-bits');for(var a=0;a<n;a+=4)x(this,a,a+3),x(this,a+1,a+2);return this},s.prototype.swap64=function t(){var n=this.length;if(0!=n%8)throw new RangeError('Buffer size must be a multiple of 64-bits');for(var a=0;a<n;a+=8)x(this,a,a+7),x(this,a+1,a+6),x(this,a+2,a+5),x(this,a+3,a+4);return this},s.prototype.toString=function t(){var n=0|this.length;return 0==n?'':0===arguments.length?j(this,0,n):v.apply(this,arguments)},s.prototype.equals=function t(n){if(!s.isBuffer(n))throw new TypeError('Argument must be a Buffer');return this===n||0===s.compare(this,n)},s.prototype.inspect=function t(){var a='',r=n.INSPECT_MAX_BYTES;return 0<this.length&&(a=this.toString('hex',0,r).match(/.{2}/g).join(' '),this.length>r&&(a+=' ... ')),'<Buffer '+a+'>'},s.prototype.compare=function t(n,a,r,o,d){if(!s.isBuffer(n))throw new TypeError('Argument must be a Buffer');if(void 0===a&&(a=0),void 0===r&&(r=n?n.length:0),void 0===o&&(o=0),void 0===d&&(d=this.length),0>a||r>n.length||0>o||d>this.length)throw new RangeError('out of range index');if(o>=d&&a>=r)return 0;if(o>=d)return-1;if(a>=r)return 1;if(a>>>=0,r>>>=0,o>>>=0,d>>>=0,this===n)return 0;for(var l=d-o,c=r-a,u=_Mathmin(l,c),f=this.slice(o,d),m=n.slice(a,r),h=0;h<u;++h)if(f[h]!==m[h]){l=f[h],c=m[h];break}return l<c?-1:c<l?1:0},s.prototype.includes=function t(n,a,r){return-1!==this.indexOf(n,a,r)},s.prototype.indexOf=function t(n,a,r){return _(this,n,a,r,!0)},s.prototype.lastIndexOf=function t(n,a,r){return _(this,n,a,r,!1)},s.prototype.write=function t(n,a,r,i){if(void 0===a)i='utf8',r=this.length,a=0;else if(void 0===r&&'string'==typeof a)i=a,r=this.length,a=0;else if(isFinite(a))a|=0,isFinite(r)?(r|=0,void 0===i&&(i='utf8')):(i=r,r=void 0);else throw new Error('Buffer.write(string, encoding, offset[, length]) is no longer supported');var o=this.length-a;if((void 0===r||r>o)&&(r=o),0<n.length&&(0>r||0>a)||a>this.length)throw new RangeError('Attempt to write outside buffer bounds');i||(i='utf8');for(var s=!1;;)switch(i){case'hex':return C(this,n,a,r);case'utf8':case'utf-8':return E(this,n,a,r);case'ascii':return T(this,n,a,r);case'latin1':case'binary':return A(this,n,a,r);case'base64':return S(this,n,a,r);case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return I(this,n,a,r);default:if(s)throw new TypeError('Unknown encoding: '+i);i=(''+i).toLowerCase(),s=!0;}},s.prototype.toJSON=function t(){return{type:'Buffer',data:Array.prototype.slice.call(this._arr||this,0)}};var ae=4096;s.prototype.slice=function t(n,a){var r=this.length;n=~~n,a=a===void 0?r:~~a,0>n?(n+=r,0>n&&(n=0)):n>r&&(n=r),0>a?(a+=r,0>a&&(a=0)):a>r&&(a=r),a<n&&(a=n);var o;if(s.TYPED_ARRAY_SUPPORT)o=this.subarray(n,a),o.__proto__=s.prototype;else{var d=a-n;o=new s(d,void 0);for(var l=0;l<d;++l)o[l]=this[l+n]}return o},s.prototype.readUIntLE=function t(n,a,r){n|=0,a|=0,r||O(n,a,this.length);for(var o=this[n],s=1,d=0;++d<a&&(s*=256);)o+=this[n+d]*s;return o},s.prototype.readUIntBE=function t(n,a,r){n|=0,a|=0,r||O(n,a,this.length);for(var i=this[n+--a],o=1;0<a&&(o*=256);)i+=this[n+--a]*o;return i},s.prototype.readUInt8=function t(n,a){return a||O(n,1,this.length),this[n]},s.prototype.readUInt16LE=function t(n,a){return a||O(n,2,this.length),this[n]|this[n+1]<<8},s.prototype.readUInt16BE=function t(n,a){return a||O(n,2,this.length),this[n]<<8|this[n+1]},s.prototype.readUInt32LE=function t(n,a){return a||O(n,4,this.length),(this[n]|this[n+1]<<8|this[n+2]<<16)+16777216*this[n+3]},s.prototype.readUInt32BE=function t(n,a){return a||O(n,4,this.length),16777216*this[n]+(this[n+1]<<16|this[n+2]<<8|this[n+3])},s.prototype.readIntLE=function t(n,a,r){n|=0,a|=0,r||O(n,a,this.length);for(var o=this[n],s=1,d=0;++d<a&&(s*=256);)o+=this[n+d]*s;return s*=128,o>=s&&(o-=_Mathpow(2,8*a)),o},s.prototype.readIntBE=function t(n,a,r){n|=0,a|=0,r||O(n,a,this.length);for(var o=a,i=1,s=this[n+--o];0<o&&(i*=256);)s+=this[n+--o]*i;return i*=128,s>=i&&(s-=_Mathpow(2,8*a)),s},s.prototype.readInt8=function t(n,a){return a||O(n,1,this.length),128&this[n]?-1*(255-this[n]+1):this[n]},s.prototype.readInt16LE=function t(n,a){a||O(n,2,this.length);var r=this[n]|this[n+1]<<8;return 32768&r?4294901760|r:r},s.prototype.readInt16BE=function t(n,a){a||O(n,2,this.length);var r=this[n+1]|this[n]<<8;return 32768&r?4294901760|r:r},s.prototype.readInt32LE=function t(n,a){return a||O(n,4,this.length),this[n]|this[n+1]<<8|this[n+2]<<16|this[n+3]<<24},s.prototype.readInt32BE=function t(n,a){return a||O(n,4,this.length),this[n]<<24|this[n+1]<<16|this[n+2]<<8|this[n+3]},s.prototype.readFloatLE=function t(n,a){return a||O(n,4,this.length),te.read(this,n,!0,23,4)},s.prototype.readFloatBE=function t(n,a){return a||O(n,4,this.length),te.read(this,n,!1,23,4)},s.prototype.readDoubleLE=function t(n,a){return a||O(n,8,this.length),te.read(this,n,!0,52,8)},s.prototype.readDoubleBE=function t(n,a){return a||O(n,8,this.length),te.read(this,n,!1,52,8)},s.prototype.writeUIntLE=function t(n,a,r,o){if(n=+n,a|=0,r|=0,!o){var s=_Mathpow(2,8*r)-1;B(this,n,a,r,s,0)}var d=1,l=0;for(this[a]=255&n;++l<r&&(d*=256);)this[a+l]=255&n/d;return a+r},s.prototype.writeUIntBE=function t(n,a,r,o){if(n=+n,a|=0,r|=0,!o){var s=_Mathpow(2,8*r)-1;B(this,n,a,r,s,0)}var d=r-1,i=1;for(this[a+d]=255&n;0<=--d&&(i*=256);)this[a+d]=255&n/i;return a+r},s.prototype.writeUInt8=function t(n,a,r){return n=+n,a|=0,r||B(this,n,a,1,255,0),s.TYPED_ARRAY_SUPPORT||(n=_Mathfloor(n)),this[a]=255&n,a+1},s.prototype.writeUInt16LE=function t(n,a,r){return n=+n,a|=0,r||B(this,n,a,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[a]=255&n,this[a+1]=n>>>8):U(this,n,a,!0),a+2},s.prototype.writeUInt16BE=function t(n,a,r){return n=+n,a|=0,r||B(this,n,a,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[a]=n>>>8,this[a+1]=255&n):U(this,n,a,!1),a+2},s.prototype.writeUInt32LE=function t(n,a,r){return n=+n,a|=0,r||B(this,n,a,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[a+3]=n>>>24,this[a+2]=n>>>16,this[a+1]=n>>>8,this[a]=255&n):F(this,n,a,!0),a+4},s.prototype.writeUInt32BE=function t(n,a,r){return n=+n,a|=0,r||B(this,n,a,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[a]=n>>>24,this[a+1]=n>>>16,this[a+2]=n>>>8,this[a+3]=255&n):F(this,n,a,!1),a+4},s.prototype.writeIntLE=function t(n,a,r,o){if(n=+n,a|=0,!o){var s=_Mathpow(2,8*r-1);B(this,n,a,r,s-1,-s)}var d=0,i=1,l=0;for(this[a]=255&n;++d<r&&(i*=256);)0>n&&0==l&&0!==this[a+d-1]&&(l=1),this[a+d]=255&(n/i>>0)-l;return a+r},s.prototype.writeIntBE=function t(n,a,r,o){if(n=+n,a|=0,!o){var s=_Mathpow(2,8*r-1);B(this,n,a,r,s-1,-s)}var d=r-1,i=1,l=0;for(this[a+d]=255&n;0<=--d&&(i*=256);)0>n&&0==l&&0!==this[a+d+1]&&(l=1),this[a+d]=255&(n/i>>0)-l;return a+r},s.prototype.writeInt8=function t(n,a,r){return n=+n,a|=0,r||B(this,n,a,1,127,-128),s.TYPED_ARRAY_SUPPORT||(n=_Mathfloor(n)),0>n&&(n=255+n+1),this[a]=255&n,a+1},s.prototype.writeInt16LE=function t(n,a,r){return n=+n,a|=0,r||B(this,n,a,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[a]=255&n,this[a+1]=n>>>8):U(this,n,a,!0),a+2},s.prototype.writeInt16BE=function t(n,a,r){return n=+n,a|=0,r||B(this,n,a,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[a]=n>>>8,this[a+1]=255&n):U(this,n,a,!1),a+2},s.prototype.writeInt32LE=function t(n,a,r){return n=+n,a|=0,r||B(this,n,a,4,2147483647,-2147483648),s.TYPED_ARRAY_SUPPORT?(this[a]=255&n,this[a+1]=n>>>8,this[a+2]=n>>>16,this[a+3]=n>>>24):F(this,n,a,!0),a+4},s.prototype.writeInt32BE=function t(n,a,r){return n=+n,a|=0,r||B(this,n,a,4,2147483647,-2147483648),0>n&&(n=4294967295+n+1),s.TYPED_ARRAY_SUPPORT?(this[a]=n>>>24,this[a+1]=n>>>16,this[a+2]=n>>>8,this[a+3]=255&n):F(this,n,a,!1),a+4},s.prototype.writeFloatLE=function t(n,a,r){return z(this,n,a,!0,r)},s.prototype.writeFloatBE=function t(n,a,r){return z(this,n,a,!1,r)},s.prototype.writeDoubleLE=function t(n,a,r){return H(this,n,a,!0,r)},s.prototype.writeDoubleBE=function t(n,a,r){return H(this,n,a,!1,r)},s.prototype.copy=function t(n,a,r,o){if(r||(r=0),o||0===o||(o=this.length),a>=n.length&&(a=n.length),a||(a=0),0<o&&o<r&&(o=r),o===r)return 0;if(0===n.length||0===this.length)return 0;if(0>a)throw new RangeError('targetStart out of bounds');if(0>r||r>=this.length)throw new RangeError('sourceStart out of bounds');if(0>o)throw new RangeError('sourceEnd out of bounds');o>this.length&&(o=this.length),n.length-a<o-r&&(o=n.length-a+r);var d=o-r,l;if(this===n&&r<a&&a<o)for(l=d-1;0<=l;--l)n[l+a]=this[l+r];else if(1e3>d||!s.TYPED_ARRAY_SUPPORT)for(l=0;l<d;++l)n[l+a]=this[l+r];else Uint8Array.prototype.set.call(n,this.subarray(r,r+d),a);return d},s.prototype.fill=function t(n,a,r,o){if('string'==typeof n){if('string'==typeof a?(o=a,a=0,r=this.length):'string'==typeof r&&(o=r,r=this.length),1===n.length){var d=n.charCodeAt(0);256>d&&(n=d)}if(void 0!==o&&'string'!=typeof o)throw new TypeError('encoding must be a string');if('string'==typeof o&&!s.isEncoding(o))throw new TypeError('Unknown encoding: '+o)}else'number'==typeof n&&(n&=255);if(0>a||this.length<a||this.length<r)throw new RangeError('Out of range index');if(r<=a)return this;a>>>=0,r=r===void 0?this.length:r>>>0,n||(n=0);var l;if('number'==typeof n)for(l=a;l<r;++l)this[l]=n;else{var i=s.isBuffer(n)?n:J(new s(n,o).toString()),c=i.length;for(l=0;l<r-a;++l)this[l+a]=i[l%c]}return this};var re=/[^+\/0-9A-Za-z-_]/g}).call(n,a(5))},function(t,n,a){function r(t,n){for(var a in t)n[a]=t[a]}function i(t,n,a){return s(t,n,a)}var o=a(2),s=o.Buffer;s.from&&s.alloc&&s.allocUnsafe&&s.allocUnsafeSlow?t.exports=o:(r(o,n),n.Buffer=i),r(s,i),i.from=function(t,n,a){if('number'==typeof t)throw new TypeError('Argument must not be a number');return s(t,n,a)},i.alloc=function(t,n,a){if('number'!=typeof t)throw new TypeError('Argument must be a number');var r=s(t);return void 0===n?r.fill(0):'string'==typeof a?r.fill(n,a):r.fill(n),r},i.allocUnsafe=function(t){if('number'!=typeof t)throw new TypeError('Argument must be a number');return s(t)},i.allocUnsafeSlow=function(t){if('number'!=typeof t)throw new TypeError('Argument must be a number');return o.SlowBuffer(t)}},function(t,n,a){'use strict';function r(t){return t&&t.__esModule?t:{default:t}}var i=a(72),o=r(i),s={BlankNode:a(41),Collection:a(73),convert:a(148),DataFactory:a(78),Empty:a(347),Fetcher:a(111),Formula:a(147),IndexedFormula:o.default,jsonParser:a(348),Literal:a(50),log:a(42),N3Parser:a(79),NamedNode:a(10),Namespace:a(59),Node:a(17),parse:a(160),Query:a(77).Query,queryToSPARQL:a(349),RDFaProcessor:a(112),RDFParser:a(113),serialize:a(100),Serializer:a(110),SPARQLToQuery:a(350),sparqlUpdateParser:a(161),Statement:a(75),term:a(17).fromValue,UpdateManager:a(351),UpdatesSocket:a(209).UpdatesSocket,UpdatesVia:a(209).UpdatesVia,uri:a(16),Util:a(32),Variable:a(76)};s.NextId=s.BlankNode.nextId,s.fromNT=s.Formula.prototype.fromNT,s.fetcher=s.DataFactory.fetcher,s.graph=s.DataFactory.graph,s.lit=s.DataFactory.lit,s.st=s.DataFactory.st,s.sym=s.DataFactory.namedNode,s.variable=s.DataFactory.variable,s.blankNode=s.DataFactory.blankNode,s.defaultGraph=s.DataFactory.defaultGraph,s.literal=s.DataFactory.literal,s.namedNode=s.DataFactory.namedNode,s.quad=s.DataFactory.quad,s.triple=s.DataFactory.triple,t.exports=s},function(t,n){var a;a=function(){return this}();try{a=a||Function('return this')()||(1,eval)('this')}catch(t){'object'==typeof window&&(a=window)}t.exports=a},function(t,n,a){t.exports=a(281)},function(t,n,a){'use strict';function r(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0;var i=a(47),o=r(i);n.default=function(t){return function(){var n=t.apply(this,arguments);return new o.default(function(t,a){function r(i,s){try{var d=n[i](s),l=d.value}catch(t){return void a(t)}return d.done?void t(l):o.default.resolve(l).then(function(t){r('next',t)},function(t){r('throw',t)})}return r('next')})}}},function(t,n,a){'use strict';var r=n;r.version=a(393).version,r.utils=a(394),r.rand=a(229),r.curve=a(93),r.curves=a(400),r.ec=a(408),r.eddsa=a(412)},function(t,n){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],!t.children&&(t.children=[]),Object.defineProperty(t,'loaded',{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,'id',{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,n,a){'use strict';function r(t,n){if(!(t instanceof n))throw new TypeError('Cannot call a class as a function')}function i(t,n){if(!t)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return n&&('object'==typeof n||'function'==typeof n)?n:t}function o(t,n){if('function'!=typeof n&&null!==n)throw new TypeError('Super expression must either be null or a function, not '+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}var s=function(){function t(t,n){for(var a=0,r;a<n.length;a++)r=n[a],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}return function(n,a,r){return a&&t(n.prototype,a),r&&t(n,r),n}}(),d=a(49),l=a(17),c=function(t){function n(t){r(this,n);var a=i(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));if(a.termType=n.termType,t&&t.termType===n.termType&&(t=t.value),!t)throw new Error('Missing IRI for NamedNode');if(!t.includes(':'))throw new Error('NamedNode IRI "'+t+'" must be absolute.');if(t.includes(' ')){var o='Error: NamedNode IRI "'+t+'" must not contain unencoded spaces.';throw new Error(o)}return a.value=t,a}return o(n,t),s(n,[{key:'dir',value:function t(){var a=this.uri.split('#')[0],r=a.slice(0,-1).lastIndexOf('/'),i=a.indexOf('//');return 0<=i&&r<i+2||0>r?null:new n(a.slice(0,r+1))}},{key:'site',value:function t(){var a=this.uri.split('#')[0],r=a.indexOf('//');if(0>r)throw new Error('This URI does not have a web site part (origin)');var i=a.indexOf('/',r+2);if(0>i)throw new Error('This URI does not have a web site part. (origin)');return new n(a.slice(0,i+1))}},{key:'doc',value:function t(){return 0>this.uri.indexOf('#')?this:new n(this.uri.split('#')[0])}},{key:'toString',value:function t(){return'<'+this.uri+'>'}},{key:'uri',get:function t(){return this.value},set:function t(n){this.value=n}}],[{key:'fromValue',value:function t(a){if('undefined'==typeof a||null===a)return a;var r=a&&a.termType;return r?a:new n(a)}}]),n}(l);c.termType='NamedNode',c.prototype.classOrder=d.NamedNode,c.prototype.isVar=0,t.exports=c},function(t,n){function a(){throw new Error('setTimeout has not been defined')}function r(){throw new Error('clearTimeout has not been defined')}function o(t){if(f===setTimeout)return setTimeout(t,0);if((f===a||!f)&&setTimeout)return f=setTimeout,setTimeout(t,0);try{return f(t,0)}catch(n){try{return f.call(null,t,0)}catch(n){return f.call(this,t,0)}}}function i(t){if(m===clearTimeout)return clearTimeout(t);if((m===r||!m)&&clearTimeout)return m=clearTimeout,clearTimeout(t);try{return m(t)}catch(n){try{return m.call(null,t)}catch(n){return m.call(this,t)}}}function s(){g&&y&&(g=!1,y.length?h=y.concat(h):b=-1,h.length&&d())}function d(){if(!g){var t=o(s);g=!0;for(var n=h.length;n;){for(y=h,h=[];++b<n;)y&&y[b].run();b=-1,n=h.length}y=null,g=!1,i(t)}}function l(t,n){this.fun=t,this.array=n}function c(){}var u=t.exports={},f,m;(function(){try{f='function'==typeof setTimeout?setTimeout:a}catch(t){f=a}try{m='function'==typeof clearTimeout?clearTimeout:r}catch(t){m=r}})();var h=[],g=!1,b=-1,y;u.nextTick=function(t){var n=Array(arguments.length-1);if(1<arguments.length)for(var a=1;a<arguments.length;a++)n[a-1]=arguments[a];h.push(new l(t,n)),1!==h.length||g||o(d)},l.prototype.run=function(){this.fun.apply(null,this.array)},u.title='browser',u.browser=!0,u.env={},u.argv=[],u.version='',u.versions={},u.on=c,u.addListener=c,u.once=c,u.off=c,u.removeListener=c,u.removeAllListeners=c,u.emit=c,u.prependListener=c,u.prependOnceListener=c,u.listeners=function(t){return[]},u.binding=function(t){throw new Error('process.binding is not supported')},u.cwd=function(){return'/'},u.chdir=function(t){throw new Error('process.chdir is not supported')},u.umask=function(){return 0}},function(t,n){var a=t.exports='undefined'!=typeof window&&window.Math==Math?window:'undefined'!=typeof self&&self.Math==Math?self:Function('return this')();'number'==typeof __g&&(__g=a)},function(t,n,a){var r=a(120)('wks'),i=a(82),o=a(12).Symbol,s='function'==typeof o,d=t.exports=function(t){return r[t]||(r[t]=s&&o[t]||(s?o:i)('Symbol.'+t))};d.store=r},function(t,n,a){'use strict';var r={};t.exports=r;var i=a(4);r.expand=function(t){var n=t.split(':');if(0===n.length)throw new Error('Prefixed name has no colon: '+t);if(!(n[0]in r))throw new Error('Unregistered namespace prefix in: '+t);return r[n[0]](n[1])},r.auth=i.Namespace('http://www.w3.org/ns/auth/acl#'),r.acl=i.Namespace('http://www.w3.org/ns/auth/acl#'),r.arg=i.Namespace('http://www.w3.org/ns/pim/arg#'),r.cal=i.Namespace('http://www.w3.org/2002/12/cal/ical#'),r.contact=i.Namespace('http://www.w3.org/2000/10/swap/pim/contact#'),r.dc=i.Namespace('http://purl.org/dc/elements/1.1/'),r.dct=i.Namespace('http://purl.org/dc/terms/'),r.doap=i.Namespace('http://usefulinc.com/ns/doap#'),r.foaf=i.Namespace('http://xmlns.com/foaf/0.1/'),r.http=i.Namespace('http://www.w3.org/2007/ont/http#'),r.httph=i.Namespace('http://www.w3.org/2007/ont/httph#'),r.icalTZ=i.Namespace('http://www.w3.org/2002/12/cal/icaltzd#'),r.ldp=i.Namespace('http://www.w3.org/ns/ldp#'),r.link=r.tab=r.tabont=i.Namespace('http://www.w3.org/2007/ont/link#'),r.log=i.Namespace('http://www.w3.org/2000/10/swap/log#'),r.meeting=i.Namespace('http://www.w3.org/ns/pim/meeting#'),r.mo=i.Namespace('http://purl.org/ontology/mo/'),r.owl=i.Namespace('http://www.w3.org/2002/07/owl#'),r.pad=i.Namespace('http://www.w3.org/ns/pim/pad#'),r.patch=i.Namespace('http://www.w3.org/ns/pim/patch#'),r.qu=i.Namespace('http://www.w3.org/2000/10/swap/pim/qif#'),r.trip=i.Namespace('http://www.w3.org/ns/pim/trip#'),r.rdf=i.Namespace('http://www.w3.org/1999/02/22-rdf-syntax-ns#'),r.rdfs=i.Namespace('http://www.w3.org/2000/01/rdf-schema#'),r.rss=i.Namespace('http://purl.org/rss/1.0/'),r.sched=i.Namespace('http://www.w3.org/ns/pim/schedule#'),r.schema=i.Namespace('http:/schema.org/'),r.sioc=i.Namespace('http://rdfs.org/sioc/ns#'),r.solid=i.Namespace('http://www.w3.org/ns/solid/terms#'),r.space=i.Namespace('http://www.w3.org/ns/pim/space#'),r.stat=i.Namespace('http://www.w3.org/ns/posix/stat#'),r.ui=i.Namespace('http://www.w3.org/ns/ui#'),r.vcard=i.Namespace('http://www.w3.org/2006/vcard/ns#'),r.wf=i.Namespace('http://www.w3.org/2005/01/wf/flow#'),r.xsd=i.Namespace('http://www.w3.org/2001/XMLSchema#')},function(t,n,a){'use strict';var r={};t.exports=r;var i=a(4);r.expand=function(t){var n=t.split(':');if(0===n.length)throw new Error('Prefixed name has no colon: '+t);if(!(n[0]in r))throw new Error('Unregistered namespace prefix in: '+t);return r[n[0]](n[1])},r.auth=i.Namespace('http://www.w3.org/ns/auth/acl#'),r.acl=i.Namespace('http://www.w3.org/ns/auth/acl#'),r.arg=i.Namespace('http://www.w3.org/ns/pim/arg#'),r.cal=i.Namespace('http://www.w3.org/2002/12/cal/ical#'),r.contact=i.Namespace('http://www.w3.org/2000/10/swap/pim/contact#'),r.dc=i.Namespace('http://purl.org/dc/elements/1.1/'),r.dct=i.Namespace('http://purl.org/dc/terms/'),r.doap=i.Namespace('http://usefulinc.com/ns/doap#'),r.foaf=i.Namespace('http://xmlns.com/foaf/0.1/'),r.http=i.Namespace('http://www.w3.org/2007/ont/http#'),r.httph=i.Namespace('http://www.w3.org/2007/ont/httph#'),r.ical=i.Namespace('http://www.w3.org/2002/12/cal/icaltzd#'),r.ldp=i.Namespace('http://www.w3.org/ns/ldp#'),r.link=r.tab=r.tabont=i.Namespace('http://www.w3.org/2007/ont/link#'),r.log=i.Namespace('http://www.w3.org/2000/10/swap/log#'),r.meeting=i.Namespace('http://www.w3.org/ns/pim/meeting#'),r.mo=i.Namespace('http://purl.org/ontology/mo/'),r.owl=i.Namespace('http://www.w3.org/2002/07/owl#'),r.pad=i.Namespace('http://www.w3.org/ns/pim/pad#'),r.patch=i.Namespace('http://www.w3.org/ns/pim/patch#'),r.qu=i.Namespace('http://www.w3.org/2000/10/swap/pim/qif#'),r.trip=i.Namespace('http://www.w3.org/ns/pim/trip#'),r.rdf=i.Namespace('http://www.w3.org/1999/02/22-rdf-syntax-ns#'),r.rdfs=i.Namespace('http://www.w3.org/2000/01/rdf-schema#'),r.rss=i.Namespace('http://purl.org/rss/1.0/'),r.sched=i.Namespace('http://www.w3.org/ns/pim/schedule#'),r.schema=i.Namespace('http:/schema.org/'),r.sioc=i.Namespace('http://rdfs.org/sioc/ns#'),r.solid=i.Namespace('http://www.w3.org/ns/solid/terms#'),r.space=i.Namespace('http://www.w3.org/ns/pim/space#'),r.stat=i.Namespace('http://www.w3.org/ns/posix/stat#'),r.ui=i.Namespace('http://www.w3.org/ns/ui#'),r.vcard=i.Namespace('http://www.w3.org/2006/vcard/ns#'),r.wf=i.Namespace('http://www.w3.org/2005/01/wf/flow#'),r.xsd=i.Namespace('http://www.w3.org/2001/XMLSchema#')},function(t,n,a){'use strict';function r(t){var n;return n=t.indexOf('#'),0>n?t:t.slice(0,n)}function i(t){return new u(r(t.uri))}function o(t){var n=/[^\/]*\/\/([^\/]*)\//.exec(t);return n?n[1]:''}function s(t,n){var a=n.indexOf('#'),r,i,o,s,d,l;if(0<a&&(n=n.slice(0,a)),0===t.length)return n;if(0===t.indexOf('#'))return n+t;if(s=t.indexOf(':'),0<=s)return t;if(r=n.indexOf(':'),0===n.length)return t;if(0>r)return c('Invalid base: '+n+' in join with given: '+t),t;if(i=n.slice(0,+r+1||9e9),0===t.indexOf('//'))return i+t;if(n.indexOf('//',r)===r+1){if(o=n.indexOf('/',r+3),0>o)return 0<n.length-r-3?n+'/'+t:i+t;}else if(o=n.indexOf('/',r+1),0>o)return 0<n.length-r-1?n+'/'+t:i+t;if(0===t.indexOf('/'))return n.slice(0,o)+t;if(l=n.slice(o),d=l.lastIndexOf('/'),0>d)return i+t;for(0<=d&&d<l.length-1&&(l=l.slice(0,+d+1||9e9)),l+=t;l.match(/[^\/]*\/\.\.\//);)l=l.replace(/[^\/]*\/\.\.\//,'');return l=l.replace(/\.\//g,''),l=l.replace(/\/\.$/,'/'),n.slice(0,o)+l}function d(t){var n;return n=t.indexOf(':'),0>n?null:t.slice(0,n)}function l(t,a){var r=/^[-_a-zA-Z0-9.]+:(\/\/[^\/]*)?\/[^\/]*$/,d,c,i,u,l,f,m,n,o,h,g,b,y;if(!t)return a;if(t===a)return'';for(c=n=0,l=a.length;n<l&&(d=a[c],d===t[c]);c=++n);if(t.slice(0,c).match(r)&&(i=a.indexOf('//'),0>i&&(i=-2),u=a.indexOf('/',i+2),'/'!==a[u+1]&&'/'!==t[u+1]&&a.slice(0,u)===t.slice(0,u)))return a.slice(u);if('#'===a[c]&&t.length===c)return a.slice(c);for(;0<c&&'/'!==a[c-1];)c--;if(3>c)return a;if(0<t.indexOf('//',c-2)||0<a.indexOf('//',c-2))return a;if(0<t.indexOf(':',c))return a;for(m=0,g=t.slice(c),(o=0,f=g.length);o<f;o++)d=g[o],'/'===d&&m++;if(0===m&&c<a.length&&'#'===a[c])return'./'+a.slice(c);if(0===m&&c===a.length)return'./';if(y='',0<m)for(h=1,b=m;1<=b?h<=b:h>=b;1<=b?++h:--h)y+='../';return y+a.slice(c)}var c=c||console.log;t.exports.docpart=r,t.exports.document=i,t.exports.hostpart=o,t.exports.join=s,t.exports.protocol=d,t.exports.refTo=l;var u=a(10)},function(t,n,a){'use strict';function r(t,n){if(!(t instanceof n))throw new TypeError('Cannot call a class as a function')}var i=function(){function t(t,n){for(var a=0,r;a<n.length;a++)r=n[a],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}return function(n,a,r){return a&&t(n.prototype,a),r&&t(n,r),n}}(),o=function(){function t(){r(this,t)}return i(t,[{key:'substitute',value:function t(n){return console.log('@@@ node substitute'+this),this}},{key:'compareTerm',value:function t(n){return this.classOrder<n.classOrder?-1:this.classOrder>n.classOrder?1:this.value<n.value?-1:this.value>n.value?1:0}},{key:'equals',value:function t(n){return!!n&&this.termType===n.termType&&this.value===n.value}},{key:'hashString',value:function t(){return this.toCanonical()}},{key:'sameTerm',value:function t(n){return this.equals(n)}},{key:'toCanonical',value:function t(){return this.toNT()}},{key:'toNT',value:function t(){return this.toString()}},{key:'toString',value:function t(){throw new Error('Node.toString() is abstract - see the subclasses instead')}}]),t}();t.exports=o,o.fromValue=function t(n){var r=a(73),i=a(50),o=a(10);if('undefined'==typeof n||null===n)return n;var s=n&&n.termType;return s?n:Array.isArray(n)?new r(n):i.fromValue(n)}},function(t,n){var a=t.exports={version:'2.5.3'};'number'==typeof __e&&(__e=a)},function(t,n,a){'use strict';t.exports={Formats:a(189),Initializer:a(190),JSONDocument:a(322),JSONMapping:a(323),JSONPatch:a(191),JSONPointer:a(131),JSONSchema:a(324),Validator:a(192)}},function(t,n,a){'use strict';var r=a(4),i=t.exports=r.graph();r.fetcher(i),i.updater=new r.UpdateManager(i),console.log('Unique quadstore initialized.')},function(t,n){function a(t,n){if(!t)throw new Error(n||'Assertion failed')}t.exports=a,a.equal=function t(n,a,r){if(n!=a)throw new Error(r||'Assertion failed: '+n+' != '+a)}},function(t,n,a){'use strict';var r=a(4),i=t.exports=r.graph(),o=r.fetcher(i),s=new r.UpdateManager(i);console.log('Unique quadstore initialized.')},function(t,n,a){'use strict';(function(t){if(t.scriptURI)t.exports.iconBase=''+t.scriptURI.slice(0,t.scriptURI.lastIndexOf('/'))+'/icons/',t.exports.originalIconBase=''+t.scriptURI.slice(0,t.scriptURI.lastIndexOf('/'))+'/originalIcons/';else{var n='https://linkeddata.github.io/solid-ui/src';'undefined'!=typeof $SolidTestEnvironment&&$SolidTestEnvironment.iconBase?(t.exports.iconBase=$SolidTestEnvironment.iconBase,t.exports.originalIconBase=$SolidTestEnvironment.originalIconBase):(t.exports.iconBase=n+'/icons/',t.exports.originalIconBase=n+'/originalIcons/')}console.log('   Icon base is: '+t.exports.iconBase)}).call(n,a(9)(t))},function(t,n,a){'use strict';var r=function t(){var n={},a=1,r=2,i=4,o=8,s=16,d=32,c=63;return n.level=a+r+i,n.ascending=!1,n.msg=function(t,a,r){if(a||(a=i,r='mesg'),!!(n.level&a))if('undefined'!=typeof document){var o=document.getElementById('status');if(!o)return;var s=function t(n){return n.replace(/&/g,'&amp;').replace(/</g,'&lt;')},d=document.createElement('span');d.setAttribute('class',r);var l=new Date;d.innerHTML=l.getHours()+':'+l.getMinutes()+':'+l.getSeconds()+' ['+r+'] '+s(t)+'<br/>',n.ascending?o.insertBefore(d,o.firstChild):o.appendChild(d)}else'undefined'!=typeof console&&console.log(t)},n.warn=function(t){n.msg(t,r,'warn')},n.debug=function(t){n.msg(t,d,'dbug')},n.info=function(t){n.msg(t,s,'info')},n.error=function(t){n.msg(t,a,'eror')},n.success=function(t){n.msg(t,o,'good')},n.alert='undefined'==typeof alert?n.warn:alert,n.clear=function(){var t=document.getElementById('status');t&&(t.innerHTML='')},n.setLevel=function(t){n.level=c,n.debug('Log level is now '+t),n.level=t},n.dumpHTML=function(){var t=n.level;n.level=c,n.debug(document.innerHTML),n.level=t},n};t.exports=r()},function(t,n,a){'use strict';var r=function t(){var n={},a=0,r=1,i=2,o=4,s=8,d=16,l=32,c=63;return n.level=r+i+o,n.ascending=!1,n.msg=function(t,a,r){if(a||(a=o,r='mesg'),!!(n.level&a))if('undefined'!=typeof document){var i=document.getElementById('status');if(!i)return;var s=function t(n){return n.replace(/&/g,'&amp;').replace(/</g,'&lt;')},d=document.createElement('span');d.setAttribute('class',r);var l=new Date;d.innerHTML=l.getHours()+':'+l.getMinutes()+':'+l.getSeconds()+' ['+r+'] '+s(t)+'<br/>',n.ascending?i.insertBefore(d,i.firstChild):i.appendChild(d)}else if('undefined'!=typeof console)console.log(t);else{var c=dump;if(!c)throw new Error('log: No way to output message: '+t);c('Log: '+t+'\n')}},n.warn=function(t){n.msg(t,i,'warn')},n.debug=function(t){n.msg(t,l,'dbug')},n.info=function(t){n.msg(t,d,'info')},n.error=function(t){n.msg(t,r,'eror')},n.success=function(t){n.msg(t,s,'good')},n.alert='undefined'==typeof alert?n.warn:alert,n.clear=function(){var t=document.getElementById('status');t&&(t.innerHTML='')},n.setLevel=function(t){n.level=c,n.debug('Log level is now '+t),n.level=t},n.dumpHTML=function(){var t=n.level;n.level=c,n.debug(document.innerHTML),n.level=t},n};t.exports=r()},function(t,n,a){'use strict';function r(t){var n=t.statusArea||t.div||null;if(n)return n;var a=t.dom;if(t.dom){var r=a.getElementsByTagName('body')[0];return n=a.createEvent('div'),r.insertBefore(n,r.firstElementChild),t.statusArea=n,n}return null}function i(t,n){var a=t.statusArea||t.div||r(t);console.log('Complaint: '+n),a&&a.appendChild(l.errorMessageBlock(t.dom,n))}function o(t,n,a,r,i,o,s){var l=t.createElement('div'),c=t.createTextNode(a),u=d.store.updater.editable(s.uri);c.style='colour: black; font-size: 100%; padding-left: 0.5 em; padding-right: 0.5 em;',l.appendChild(c);var f=t.createElement('input');l.appendChild(f),f.setAttribute('type','checkbox'),f.setAttribute('style','margin: 0.7em'),i&&i.object&&!i.why&&(i.why=s),r&&r.object&&!r.why&&(r.why=s);var m=n.holds(i);if(r){var h=n.holds(r);if(m&&h)return l.appendChild(d.widgets.errorMessageBlock(t,'Inconsistent data in store!\n'+i+' and\n'+r)),l;m||h||(m=!!n.any(o,d.ns.ui('default')))}if(f.checked=m,!u)return l;var g=function n(a){c.style='color: #bbb;';var o,s;this.checked?(o=i,s=r&&h?r:[],d.store.updater.update(s,o,function(n,a,r){a?(c.style='color: #black;',m=!0,h=!1):(c.style='color: #black; background-color: #fee;',l.appendChild(d.widgets.errorMessageBlock(t,'Error updating store (setting boolean, checked) :\n\n'+r)),f.checked=!1)})):(o=r,s=i,d.store.updater.update(s,o,function(n,a,i){c.className='question',a?(c.style='color: #black;',m=!1,h=!!r):(c.style='color: #black; background-color: #fee;',l.appendChild(d.widgets.errorMessageBlock(t,'Error updating store (unchecked):\n\n'+i)),f.checked=!0)}))};return f.addEventListener('click',g,!1),l}var s=t.exports=Object.assign({},a(352),a(243),a(95),{buildCheckboxForm:o,complain:i}),d={icons:a(23),log:a(24),ns:a(14),store:a(20),style:a(71),widgets:s},l=a(95),u=a(28),c=d.icons.iconBase+'noun_1180156.svg',f=d.icons.iconBase+'noun_1180158.svg';d.widgets.field={},d.widgets.clearElement=function(t){for(;t.firstChild;)t.removeChild(t.firstChild);return t},d.widgets.refreshTree=function(t){if(t.refresh)return void t.refresh();for(var n=0;n<t.children.length;n++)d.widgets.refreshTree(t.children[n])},d.widgets.extractLogURI=function(t){var n=t.search(/logFile=/),a=t.search(/&rulesFile=/);return t.substring(n+8,a)},d.widgets.shortDate=function(t){if(!t)return'???';var n=['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];try{var a=new Date,r=$rdf.term(a).value;return t.slice(0,10)===r.slice(0,10)?t.slice(11,16):t.slice(0,4)===r.slice(0,4)?n[parseInt(t.slice(5,7),10)-1]+' '+parseInt(t.slice(8,10),10):t.slice(0,10)}catch(t){return'shortdate:'+t}},d.widgets.formatDateTime=function(t,n){return n.split('{').map(function(n){var a=n.split('}')[0],r={Milliseconds:3,FullYear:4},i={Month:1};return n?('000'+(t['get'+a]()+(i[a]||0))).slice(-(r[a]||2))+n.split('}')[1]:''}).join('')},d.widgets.timestamp=function(){return d.widgets.formatDateTime(new Date,'{FullYear}-{Month}-{Date}T{Hours}:{Minutes}:{Seconds}.{Milliseconds}')},d.widgets.shortTime=function(){return d.widgets.formatDateTime(new Date,'{Hours}:{Minutes}:{Seconds}.{Milliseconds}')},d.widgets.newThing=function(t){var n=new Date;return $rdf.sym(t.uri+'#id'+(''+n.getTime()))},d.widgets.setName=function(t,n){var a=d.store,r=d.ns,i=function t(n){var i=a.any(n,r.vcard('fn'))||a.any(n,r.foaf('name'))||a.any(n,r.vcard('organization-name'));return i?i.value:null},o=n.sameTerm(r.foaf('Agent'))?'Everyone':i(n);t.textContent=o||u.label(n),!o&&n.uri&&a.fetcher.nowOrWhenFetched(n.doc(),void 0,function(a){t.textContent=i(n)||u.label(n)})},d.widgets.imagesOf=function(t,n){var a=d.ns;return n.each(t,a.sioc('avatar')).concat(n.each(t,a.foaf('img'))).concat(n.each(t,a.vcard('logo'))).concat(n.each(t,a.vcard('photo'))).concat(n.each(t,a.foaf('depiction')))},d.widgets.setImage=function(t,n){var a=d.store,r=d.ns,i=d.icons.iconBase,o=function t(n){if(n.sameTerm(r.foaf('Agent'))||n.sameTerm(r.rdf('Resource')))return i+'noun_98053.svg';var o=a.any(n,r.sioc('avatar'))||a.any(n,r.foaf('img'))||a.any(n,r.vcard('logo'))||a.any(n,r.vcard('hasPhoto'))||a.any(n,r.vcard('photo'))||a.any(n,r.foaf('depiction'));return o?o.uri:null},s=function t(n){var o=a.findTypeURIs(n);if(r.solid('AppProvider').uri in o)return i+'noun_15177.svg';if(n.uri){if(4===n.uri.split('/').length&&!n.uri.split('/')[1]&&!n.uri.split('/')[3])return i+'noun_15177.svg';if(n.uri.startsWith('message:')||n.uri.startsWith('mid:'))return i+'noun_480183.svg';if(n.uri.startsWith('mailto:'))return i+'noun_567486.svg';if(n.uri.startsWith('https:')&&0>n.uri.indexOf('#'))return n.site().uri+'favicon.ico'}return r.solid('AppProviderClass').uri in o?i+'noun_144.svg':r.vcard('Group').uri in o||r.rdfs('Class').uri in o?i+'noun_339237.svg':r.vcard('Organization').uri in o||r.rdfs('Class').uri in o?i+'noun_143899.svg':r.vcard('Individual').uri in o||r.foaf('Person').uri in o?i+'noun_15059.svg':r.vcard('AddressBook').uri in o?i+'noun_15695.svg':'http://www.w3.org/ns/pim/trip#Trip'in o?i+'noun_581629.svg':r.meeting('Meeting').uri in o?i+'noun_66617.svg':i+'noun_10636_grey.svg'},l=o(n);t.setAttribute('src',l||s(n)),!l&&n.uri&&a.fetcher.nowOrWhenFetched(n.doc(),void 0,function(a){t.setAttribute('src',o(n)||s(n))})};var m=function t(n,a){var r=n.createElement('img'),i=function t(n){if(!n.uri)return!1;var a=n.uri.split('/');return 3===a.length||4===a.length&&''===a[3]};if(r.setAttribute('src',d.icons.iconBase+(i(a)?'noun_15177.svg':'noun_681601.svg')),a.uri&&a.uri.startsWith('https:')&&0>a.uri.indexOf('#')){var o=n.createElement('object');return o.setAttribute('data',a.site().uri+'favicon.ico'),o.setAttribute('type','image/x-icon'),o.appendChild(r),o}return d.widgets.setImage(r,a),r};d.widgets.deleteButtonWithCheck=function(t,n,a,r){var i=d.icons.iconBase+'noun_2188_red.svg',o=t.createElement('img');o.setAttribute('src',i),o.setAttribute('style','margin: 0.2em; width: 1em; height:1em'),o.title='Remove this '+a;var s=o;return n.appendChild(s),n.setAttribute('class','hoverControl'),s.setAttribute('class','hoverControlHide'),s.addEventListener('click',function(i){n.removeChild(s);var o=t.createElement('button');o.setAttribute('style',d.style.buttonStyle);var l=o.appendChild(t.createElement('img'));l.setAttribute('src',c),n.appendChild(o).addEventListener('click',function(t){n.removeChild(u),n.removeChild(o),n.appendChild(s)},!1);var u=t.createElement('button');u.textContent='Delete '+a,u.setAttribute('style',d.style.buttonStyle),n.appendChild(u).addEventListener('click',function(t){n.removeChild(u),n.removeChild(o),r()},!1)},!1),s},d.widgets.button=function(t,n,a){var r=t.createElement('button');r.setAttribute('type','button'),r.setAttribute('style',d.style.buttonStyle);var i=r.appendChild(t.createElement('img'));return i.setAttribute('src',n),i.setAttribute('style','width: 2em; height: 2em;'),r},d.widgets.cancelButton=function(t){return d.widgets.button(t,c,'Cancel')},d.widgets.continueButton=function(t){return d.widgets.button(t,f,'Continue')},d.widgets.askName=function(t,n,a,r,i,o){return new Promise(function(n,s){var l=t.createElement('div');r=r||d.ns.foaf('name'),o=o||(i?u.label(i):'  ');var c=o+' '+u.label(r)+': ';l.appendChild(t.createElement('p')).textContent=c;var f=t.createElement('input');f.setAttribute('type','text'),f.setAttribute('size','100'),f.setAttribute('maxLength','2048'),f.setAttribute('style',d.style.textInputStyle),f.select(),l.appendChild(f),a.appendChild(l);var m=function t(){l.parentNode.removeChild(l),n(f.value)};f.addEventListener('keyup',function(t){13===t.keyCode&&m()},!1),l.appendChild(t.createElement('br'));var h=l.appendChild(d.widgets.cancelButton(t));h.addEventListener('click',function(t){l.parentNode.removeChild(l),n(null)},!1);var g=l.appendChild(d.widgets.continueButton(t));g.addEventListener('click',function(t){m()},!1)})},d.widgets.linkIcon=function(t,n,a){var r=t.createElement('a');r.setAttribute('href',n.uri),n.uri.startsWith('http')&&r.setAttribute('target','_blank');var i=r.appendChild(t.createElement('img'));return i.setAttribute('src',a||d.icons.originalIconBase+'go-to-this.png'),i.setAttribute('style','margin: 0.3em;'),r},d.widgets.personTR=function(t,n,a,r){var i=t.createElement('tr');r=r||{};var o=i.appendChild(t.createElement('td')),s=i.appendChild(t.createElement('td')),l=i.appendChild(t.createElement('td')),c=m(t,a);if(o.setAttribute('style','vertical-align: middle; width:2.5em; padding:0.5em; height: 2.5em;'),s.setAttribute('style','vertical-align: middle; text-align:left;'),l.setAttribute('style','vertical-align: middle; width:2em; padding:0.5em; height: 4em;'),c.setAttribute('style','width: 3em; height: 3em; margin: 0.1em; border-radius: 1em;'),o.appendChild(c),d.widgets.setName(s,a),r.deleteFunction&&d.widgets.deleteButtonWithCheck(t,l,r.noun||'one',r.deleteFunction),a.uri){if(!1!==r.link){var u=l.appendChild(d.widgets.linkIcon(t,a));u.classList.add('HoverControlHide'),l.appendChild(t.createElement('br'))}!1!==r.draggable&&(c.setAttribute('draggable','false'),d.widgets.makeDraggable(i,a))}return i},d.widgets.refreshTree=function t(n){if(n.refresh)return void n.refresh();for(var a=0;a<n.children.length;a++)t(n.children[a])},d.widgets.attachmentList=function(t,n,a,r){r=r||{};var o=r.doc||n.doc();r.modify===void 0&&(r.modify=!0);var s=r.modify,l=r.promptIcon||d.icons.iconBase+'noun_748003.svg',c=r.predicate||d.ns.wf('attachment'),f=r.noun||'attachment',m=d.store,h=a.appendChild(t.createElement('table'));h.setAttribute('style','margin-top: 1em; margin-bottom: 1em;');var g=h.appendChild(t.createElement('tr')),b=g.appendChild(t.createElement('td')),y=g.appendChild(t.createElement('td')),w=y.appendChild(t.createElement('table'));w.appendChild(t.createElement('tr'));var v=function t(a){m.updater.update($rdf.st(n,c,a,o),[],function(t,n,a,r){n?_():i('Error deleting one: '+a)})},x=function n(a){var r=a,i={noun:f};return s&&(i.deleteFunction=function(){v(r)}),d.widgets.personTR(t,c,a,i)},_=w.refresh=function(){var t=m.each(n,c);t.sort(),u.syncTableToArray(w,t,x)};h.refresh=_,_();var k=function t(a){var r=[];a.map(function(t){var a=$rdf.sym(t);console.log('Dropped on attachemnt '+t),r.push($rdf.st(n,c,a,o))}),m.updater.update([],r,function(t,n,a,r){n?_():i('Error adding one: '+a)})};if(s){var C=b.appendChild(t.createElement('img'));C.setAttribute('src',l),C.setAttribute('style','width; 2em; height: 2em; margin: 0.5em;'),C.setAttribute('draggable','false'),d.widgets.makeDropTarget(b,k)}return h},d.widgets.field[d.ns.ui('Form').uri]=d.widgets.field[d.ns.ui('Group').uri]=function(n,a,r,o,s,l,c){var u=d.store,f=n.createElement('div');f.setAttribute('style','padding-left: 2em; border: 0.05em solid brown;');var m=d.ns.ui;a.appendChild(f);var h=o.toNT()+'|'+s.toNT();if(r[h]){f.appendChild(n.createTextNode('Group: see above '+h));var g=[$rdf.st(o,d.ns.owl('sameAs'),o)];return d.outline.appendPropertyTRs(f,g),f}var b={};for(var y in r)b[y]=1;b[h]=1;var w=u.any(s,m('parts')),v;if(w?v=w.elements:(w=u.each(s,m('part')),v=d.widgets.sortBySequence(w)),!w)return f.appendChild(d.widgets.errorMessageBlock(n,'No parts to form! ')),n;for(var x=[],_=[],k=0;k<v.length;k++){var i=v[k],C=d.widgets.bottomURI(i);if(C===m('Options').uri){var t=u.any(i,m('dependingOn'));t&&u.any(o,t)&&(_[k]=u.any(o,t).toNT())}var E=d.widgets.fieldFunction(n,i),T=function a(i,s){if(i)for(var h=0;h<v.length;h++){var g=v[h],b=d.widgets.bottomURI(g);if(b===m('Options').uri){var t=u.any(g,m('dependingOn')),y=E(n,f,r,o,g,l,c);f.removeChild(y),f.insertBefore(y,x[h]),f.removeChild(x[h]),_[h]=u.any(o,t).toNT(),x[h]=y}}c(i,s)};x.push(E(n,f,b,o,i,l,T))}return f},d.widgets.field[d.ns.ui('Options').uri]=function(t,n,a,r,o,s,l){var u=d.store,f=t.createElement('div'),m=d.ns.ui;n.appendChild(f);var h=u.any(o,m('dependingOn'));h||(h=d.ns.rdf('type'));var g=u.each(o,m('case'));g||f.appendChild(d.widgets.errorMessageBlock(t,'No cases to Options form. '));var b;if(h.sameTerm(d.ns.rdf('type')))b=u.findTypeURIs(r);else{var y=u.any(r,h);y===void 0?f.appendChild(d.widgets.errorMessageBlock(t,'Can\'t select subform as no value of: '+h)):(b={},b[y.uri]=!0)}for(var w=0;w<g.length;w++)for(var i=g[w],c=u.each(i,m('for')),v=0;v<c.length;v++)if(b[c[v].uri]){var x=u.the(i,m('use'));if(!x)return f.appendChild(d.widgets.errorMessageBlock(t,'No "use" part for case in form '+o)),f;d.widgets.appendForm(t,f,a,r,x,s,l);break}return f},d.widgets.field[d.ns.ui('Multiple').uri]=function(t,n,a,r,i,o,s){var l=d.icons.iconBase+'noun_19460_green.svg',c=d.store;c.updater=c.updater||new $rdf.UpdateManager(c);var f=t.createElement('table'),m=d.ns.ui;n.appendChild(f);var h=c.any(i,m('property'));if(!h)return f.appendChild(d.widgets.errorMessageBlock(t,'No property to multiple: '+i)),f;var g=c.any(i,m('min'));g=g?g.value:0;var b=c.any(i,m('part'));if(!b)return f.appendChild(d.widgets.errorMessageBlock(t,'No part to multiple: '+i)),f;var y=f.appendChild(t.createElement('tr')),w=f.appendChild(t.createElement('tr')),v=w.appendChild(t.createElement('img'));v.setAttribute('src',l),v.setAttribute('style','margin: 0.2em; width: 1em; height:1em'),v.title='Click to add one or more '+u.label(h);var x=w.appendChild(t.createElement('span')),_=function n(i,l){d.log.debug('Multiple add: '+l),l||(l=d.widgets.newThing(o));var m=f.insertBefore(t.createElement('tr'),w),g=function n(a,i,u){if(!i)m.appendChild(d.widgets.errorMessageBlock(t,'Multiple: item failed: '+y)),s(i,u);else if(!c.holds(r,h,l)){var f=[$rdf.st(r,h,l,o)];c.updater.update([],f,v)}},v=function t(n,a,r){return s(a,r)},x=d.widgets.fieldFunction(t,b),_=x(t,y,a,l,b,o,g),k=function n(){if(c.holds(r,h,l)){var a=[$rdf.st(r,h,l,o)];c.updater.update(a,[],function(n,a,r){a?y.removeChild(_):y.appendChild(d.widgets.errorMessageBlock(t,'Multiple: delete failed: '+r))})}};d.widgets.deleteButtonWithCheck(t,_,u.label(h),k)},k=c.each(r,h);x.textContent=(0===k.length?'Add one or more ':'Add more ')+u.label(h),k.map(function(t){_(null,t)});for(var C=g-k.length,E=0;E<C;E++)console.log('Adding extra: min '+g),_();return w.addEventListener('click',_,!0),f},d.widgets.fieldParams={},d.widgets.fieldParams[d.ns.ui('ColorField').uri]={size:9,type:'color',dt:'color'},d.widgets.fieldParams[d.ns.ui('ColorField').uri].pattern=/^\s*#[0-9a-f][0-9a-f][0-9a-f][0-9a-f][0-9a-f][0-9a-f]([0-9a-f][0-9a-f])?\s*$/,d.widgets.fieldParams[d.ns.ui('DateField').uri]={size:20,type:'date',dt:'date'},d.widgets.fieldParams[d.ns.ui('DateField').uri].pattern=/^\s*[0-9][0-9][0-9][0-9](-[0-1]?[0-9]-[0-3]?[0-9])?Z?\s*$/,d.widgets.fieldParams[d.ns.ui('DateTimeField').uri]={size:20,type:'date',dt:'dateTime'},d.widgets.fieldParams[d.ns.ui('DateTimeField').uri].pattern=/^\s*[0-9][0-9][0-9][0-9](-[0-1]?[0-9]-[0-3]?[0-9])?(T[0-2][0-9]:[0-5][0-9](:[0-5][0-9])?)?Z?\s*$/,d.widgets.fieldParams[d.ns.ui('TimeField').uri]={size:10,type:'time',dt:'time'},d.widgets.fieldParams[d.ns.ui('TimeField').uri].pattern=/^\s*([0-2]?[0-9]:[0-5][0-9](:[0-5][0-9])?)\s*$/,d.widgets.fieldParams[d.ns.ui('IntegerField').uri]={size:12,style:'text-align: right',dt:'integer'},d.widgets.fieldParams[d.ns.ui('IntegerField').uri].pattern=/^\s*-?[0-9]+\s*$/,d.widgets.fieldParams[d.ns.ui('DecimalField').uri]={size:12,style:'text-align: right',dt:'decimal'},d.widgets.fieldParams[d.ns.ui('DecimalField').uri].pattern=/^\s*-?[0-9]*(\.[0-9]*)?\s*$/,d.widgets.fieldParams[d.ns.ui('FloatField').uri]={size:12,style:'text-align: right',dt:'float'},d.widgets.fieldParams[d.ns.ui('FloatField').uri].pattern=/^\s*-?[0-9]*(\.[0-9]*)?((e|E)-?[0-9]*)?\s*$/,d.widgets.fieldParams[d.ns.ui('SingleLineTextField').uri]={},d.widgets.fieldParams[d.ns.ui('NamedNodeURIField').uri]={namedNode:!0},d.widgets.fieldParams[d.ns.ui('TextField').uri]={},d.widgets.fieldParams[d.ns.ui('PhoneField').uri]={size:20,uriPrefix:'tel:'},d.widgets.fieldParams[d.ns.ui('PhoneField').uri].pattern=/^\s*\+?[ 0-9-]+[0-9]\s*$/,d.widgets.fieldParams[d.ns.ui('EmailField').uri]={size:30,uriPrefix:'mailto:'},d.widgets.fieldParams[d.ns.ui('EmailField').uri].pattern=/^\s*.*@.*\..*\s*$/,d.widgets.field[d.ns.ui('PhoneField').uri]=d.widgets.field[d.ns.ui('EmailField').uri]=d.widgets.field[d.ns.ui('ColorField').uri]=d.widgets.field[d.ns.ui('DateField').uri]=d.widgets.field[d.ns.ui('DateTimeField').uri]=d.widgets.field[d.ns.ui('TimeField').uri]=d.widgets.field[d.ns.ui('NumericField').uri]=d.widgets.field[d.ns.ui('IntegerField').uri]=d.widgets.field[d.ns.ui('DecimalField').uri]=d.widgets.field[d.ns.ui('FloatField').uri]=d.widgets.field[d.ns.ui('TextField').uri]=d.widgets.field[d.ns.ui('SingleLineTextField').uri]=d.widgets.field[d.ns.ui('NamedNodeURIField').uri]=function(t,n,a,r,i,o,s){var l=d.ns.ui,c=d.store,u=t.createElement('tr');n.appendChild(u);var f=t.createElement('td');f.setAttribute('class','formFieldName'),f.setAttribute('style','  vertical-align: middle;'),u.appendChild(f);var m=t.createElement('td');m.setAttribute('class','formFieldValue'),u.appendChild(m);var h=c.any(i,l('property'));if(!h)return u.appendChild(t.createTextNode('Error: No property given for text field: '+i)),u;f.appendChild(d.widgets.fieldLabel(t,h,i));var g=d.widgets.bottomURI(i),b=d.widgets.fieldParams[g];void 0===b&&(b={});var y=b.style||'font-size: 100%; margin: 0.1em; padding: 0.1em;',w=t.createElement('input');m.appendChild(w),w.setAttribute('type',b.type?b.type:'text');var v=c.any(i,l('size'));w.setAttribute('size',v?''+v:b.size?''+b.size:'20');var x=c.any(i,l('maxLength'));w.setAttribute('maxLength',x?''+x:'4096'),o=o||d.widgets.fieldStore(r,h,o);var _=c.any(r,h,void 0,o);return _||(_=c.any(i,l('default')),_&&c.add(r,h,_,o)),_&&_.uri&&b.uriPrefix?w.value=decodeURIComponent(_.uri.replace(b.uriPrefix,'')).replace(/ /g,''):_&&(w.value=_.value||_.uri),w.setAttribute('style',y),w.addEventListener('keyup',function(t){b.pattern&&w.setAttribute('style',y+(w.value.match(b.pattern)?'color: green;':'color: red;'))},!0),w.addEventListener('change',function(n){if(!b.pattern||w.value.match(b.pattern)){w.disabled=!0,w.setAttribute('style',y+'color: gray;');var a=c.statementsMatching(r,h),i;b.namedNode?i=c.sym(w.value):b.uriPrefix?(i=encodeURIComponent(w.value.replace(/ /g,'')),i=c.sym(b.uriPrefix+w.value)):b.dt?i=new $rdf.Literal(w.value.trim(),void 0,d.ns.xsd(b.dt)):i=new $rdf.Literal(w.value);var l=$rdf.st(r,h,i,o);c.updater.update(a,l,function(n,a,r){a?(w.disabled=!1,w.setAttribute('style',y)):u.appendChild(d.widgets.errorMessageBlock(t,r)),s(a,r)})}},!0),u},d.widgets.field[d.ns.ui('MultiLineTextField').uri]=function(t,n,a,r,i,o,s){var l=d.ns.ui,c=d.store,u=c.any(i,l('property'));if(!u)return d.widgets.errorMessageBlock(t,'No property to text field: '+i);n.appendChild(d.widgets.fieldLabel(t,u,i)),o=d.widgets.fieldStore(r,u,o);var f=d.widgets.makeDescription(t,c,r,u,o,s);return n.appendChild(f),f},d.widgets.field[d.ns.ui('BooleanField').uri]=function(t,n,a,r,i,s,l){var c=d.ns.ui,f=d.store,m=f.any(i,c('property'));if(!m)return n.appendChild(d.widgets.errorMessageBlock(t,'No property to boolean field: '+i));var h=f.any(i,c('label'));h||(h=u.label(m,!0)),s=d.widgets.fieldStore(r,m,s);var g=f.any(r,m);void 0===g&&(g=!1);var b=$rdf.st(r,m,!0,s),y=$rdf.st(r,m,!1,s),w=o(t,f,h,y,b,i,s);return n.appendChild(w),w},d.widgets.field[d.ns.ui('Classifier').uri]=function(t,n,a,r,i,o,s){var l=d.store,c=d.ns.ui,u=l.any(i,c('category'));if(!u)return d.widgets.errorMessageBlock(t,'No category for classifier: '+i);d.log.debug('Classifier: store='+o);var f=function t(n,a){return n?s(n,a):s(n,a)},m=d.widgets.makeSelectForNestedCategory(t,l,r,u,o,f);return n.appendChild(m),m},d.widgets.field[d.ns.ui('Choice').uri]=function(t,n,a,r,i,o,s){function l(n,i){x=m.any(r,v),d.widgets.fieldFunction(t,k)(t,w,a,x,k,o,s)}var c=d.ns.ui,f=d.ns,m=d.store,h=!1,g=t.createElement('tr'),b;n.appendChild(g);var y=t.createElement('td');g.appendChild(y);var w=t.createElement('td');g.appendChild(w);var v=m.any(i,c('property'));if(!v)return d.widgets.errorMessageBlock(t,'No property for Choice: '+i);y.appendChild(d.widgets.fieldLabel(t,v,i));var _=m.any(i,c('from'));if(!_)return d.widgets.errorMessageBlock(t,'No \'from\' for Choice: '+i);var k=m.any(i,c('use')),C=[],E='--'+u.label(v)+'-?',T={multiple:h,nullLabel:E,disambiguate:!1},A;for(var S in C=m.each(void 0,f.rdf('type'),_),m.findMembersNT(_))C.push(m.fromNT(S));if(_.sameTerm(f.rdfs('Class')))for(b in d.widgets.allClassURIs())C.push(m.sym(b));else if(_.sameTerm(f.rdf('Property'))){for(b in A=d.widgets.propertyTriage(),A.op)C.push(m.fromNT(b));for(b in A.dp)C.push(m.fromNT(b));T.disambiguate=!0}else if(_.sameTerm(f.owl('ObjectProperty'))){for(b in A=d.widgets.propertyTriage(),A.op)C.push(m.fromNT(b));T.disambiguate=!0}else if(_.sameTerm(f.owl('DatatypeProperty'))){for(b in A=d.widgets.propertyTriage(),A.dp)C.push(m.fromNT(b));T.disambiguate=!0}var x=m.any(r,v),I=d.widgets.sortByLabel(C);m.any(i,c('canMintNew'))&&(T.mint='* New *',T.subForm=k);var N=d.widgets.makeSelectForOptions(t,m,r,v,I,T,o,s);return w.appendChild(N),x&&k&&l(!0,''),g},d.widgets.fieldParams[d.ns.ui('Comment').uri]={element:'p',style:'padding: 0.1em 1.5em; color: brown; white-space: pre-wrap;'},d.widgets.fieldParams[d.ns.ui('Heading').uri]={element:'h3',style:'font-size: 110%; color: brown;'},d.widgets.field[d.ns.ui('Comment').uri]=d.widgets.field[d.ns.ui('Heading').uri]=function(t,n,a,r,i,o,s){var l=d.ns.ui,c=d.store,u=c.any(i,l('contents'));u||(u='Error: No contents in comment field.');var f=d.widgets.bottomURI(i),m=d.widgets.fieldParams[f];void 0===m&&(m={});;var h=t.createElement('div');n.appendChild(h);var g=h.appendChild(t.createElement(m.element));g.textContent=u;var b=c.any(i,l('style'));return void 0===b&&(b=m.style?m.style:''),b&&g.setAttribute('style',b),h},d.widgets.openHrefInOutlineMode=function(t){t.preventDefault(),t.stopPropagation();var n=u.getTarget(t),a=n.getAttribute('href');a||console.log('No href found \n'),d.outline?d.outline.GotoSubject(d.store.sym(a),!0,void 0,!0,void 0):window&&window.UI&&window.UI.outline?window.UI.outline.GotoSubject(d.store.sym(a),!0,void 0,!0,void 0):console.log('ERROR: Can\'t access outline manager in this config')},d.widgets.defaultAnnotationStore=function(t){if(void 0!==t.uri){var n=t.uri;if('http://'===n.slice(0,7)){n=n.slice(7);var a=n.indexOf('#');if(0<=a)n=n.slice(0,a);else{var r=n.lastIndexOf('/');if(0>r)return;n=n.slice(0,r)}return d.store.sym('http://tabulator.org/wiki/annnotation/'+n)}}},d.widgets.fieldStore=function(t,n,a){var r=d.store.statementsMatching(t,n);return 0===r.length?a:0<r.length&&r[0].why.uri&&d.store.updater.editable(r[0].why.uri,d.store)?d.store.sym(r[0].why.uri):null},d.widgets.allClassURIs=function(){var t={};return d.store.statementsMatching(void 0,d.ns.rdf('type'),void 0).map(function(n){n.object.uri&&(t[n.object.uri]=!0)}),d.store.statementsMatching(void 0,d.ns.rdfs('subClassOf'),void 0).map(function(n){n.object.uri&&(t[n.object.uri]=!0),n.subject.uri&&(t[n.subject.uri]=!0)}),d.store.each(void 0,d.ns.rdf('type'),d.ns.rdfs('Class')).map(function(n){n.uri&&(t[n.uri]=!0)}),t},d.widgets.propertyTriage=function(){var t={},n=d.store,a={},r={},o=0,s=0,l=0,c=n.predicateIndex;for(var u in c){var f=c[u][0].object;'Literal'===f.termType?(a[u]=!0,s++):(r[u]=!0,o++)}for(var m=n.each(void 0,d.ns.rdf('type'),d.ns.rdf('Property')),h=0;h<m.length;h++)u=m[h].toNT(),d.log.debug('propertyTriage: unknown: '+u),r[u]||a[u]||(a[u]=!0,r[u]=!0,l++);return t.op=r,t.dp=a,d.log.info('propertyTriage: '+o+' non-lit, '+s+' literal. '+l+' unknown.'),t},d.widgets.fieldLabel=function(t,n,a){var r=d.store.any(a,d.ns.ui('label'));if(r||(r=u.label(n,!0)),void 0===n)return t.createTextNode('@@Internal error: undefined property');var i=t.createElement('a');return n.uri&&i.setAttribute('href',n.uri),i.setAttribute('style','color: #3B5998; text-decoration: none;'),i.textContent=r,i},d.widgets.bottomURI=function(t){var n=d.store,a=n.findTypeURIs(t),r=n.bottomTypeURIs(a),i=[];for(var o in r)i.push(o);return i[0]},d.widgets.fieldFunction=function(t,n){var a=d.widgets.bottomURI(n),r=d.widgets.field[a];return d.log.debug('paneUtils: Going to implement field '+n+' of type '+a),r?r:function(){return d.widgets.errorMessageBlock(t,'No handler for field '+n+' of type '+a)}},d.widgets.editFormButton=function(t,n,a,r,i){var o=t.createElement('button');return o.setAttribute('type','button'),o.innerHTML='Edit '+u.label(d.ns.ui('Form')),o.addEventListener('click',function(s){var l=d.widgets.appendForm(t,n,{},a,d.ns.ui('FormForm'),r,i);l.setAttribute('style',d.ns.ui('FormForm').sameTerm(a)?'background-color: #fee;':'background-color: #ffffe7;'),n.removeChild(o)},!0),o},d.widgets.linkButton=function(t,n){var a=t.createElement('button');return a.setAttribute('type','button'),a.textContent='Goto '+u.label(n),a.addEventListener('click',function(t){d.outline.GotoSubject(n,!0,void 0,!0,void 0)},!0),a},d.widgets.removeButton=function(t,n){var a=t.createElement('button');return a.setAttribute('type','button'),a.textContent='\u2715',a.addEventListener('click',function(t){n.parentNode.removeChild(n)},!0),a},d.widgets.appendForm=function(t,n,a,r,i,o,s){return d.widgets.fieldFunction(t,i)(t,n,a,r,i,o,s)},d.widgets.propertiesForClass=function(t,n){var a=d.ns,r=t.each(void 0,a.rdf('range'),n);[a.rdfs('comment'),a.dc('title'),a.foaf('name'),a.foaf('homepage')].map(function(t){r.push(t)});var o=t.each(void 0,a.rdf('type'),n);60<o.length&&(o=o.slice(0,60));for(var s={},l=0;l<(60<o.length?60:o.length);l++)t.statementsMatching(o[l],void 0,void 0).map(function(t){s[t.predicate.uri]=!0});r.map(function(t){s[t.uri]=!0});var i=[];for(var c in s)i.push(t.sym(c));return i},d.widgets.findClosest=function t(n,a,r){for(var o=[n.sym(a)];0<o.length;){var s=o.shift(),l=n.each(s,r);if(d.log.debug('Lists for '+s+', '+r+': '+l.length),0!==l.length)return l;for(var c=n.each(s,d.ns.rdfs('subClassOf')),u=0;u<c.length;u++)o.push(c[u]),d.log.debug('findClosest: add super: '+c[u])}return[]},d.widgets.formsFor=function(n){var a=d.ns,r=d.store;d.log.debug('formsFor: subject='+n);var i=r.findTypeURIs(n),t;for(t in i)d.log.debug('   type: '+t);var o=r.bottomTypeURIs(i),s=[];for(var l in o)d.log.debug('formsFor: trying bottom type ='+l),s=s.concat(d.widgets.findClosest(r,l,a.ui('creationForm'))),s=s.concat(d.widgets.findClosest(r,l,a.ui('annotationForm')));return d.log.debug('formsFor: subject='+n+', forms='),s},d.widgets.sortBySequence=function(t){var n=t.map(function(t){var n=d.store.any(t,d.ns.ui('sequence'));return[n||9999,t]});return n.sort(function(t,n){return t[0]-n[0]}),n.map(function(t){return t[1]})},d.widgets.sortByLabel=function(t){var n=t.map(function(t){return[u.label(t).toLowerCase(),t]});return n.sort(),n.map(function(t){return t[1]})},d.widgets.newButton=function(t,n,a,r,i,o,s,l){var c=t.createElement('button');return c.setAttribute('type','button'),c.innerHTML='New '+u.label(i),c.addEventListener('click',function(u){c.parentNode.appendChild(d.widgets.promptForNew(t,n,a,r,i,o,s,l))},!1),c},d.widgets.promptForNew=function(t,n,a,r,i,o,s,l){var c=d.ns,m=t.createElement('form');if(!o){var h=d.widgets.findClosest(n,i.uri,c.ui('creationForm'));if(0===h.length){var g=m.appendChild(t.createElement('p'));g.textContent='I am sorry, you need to provide information about a '+u.label(i)+' but I don\'t know enough information about those to ask you.';var y=m.appendChild(t.createElement('button'));return y.setAttribute('type','button'),y.setAttribute('style','float: right;'),y.innerHTML='Goto '+u.label(i),y.addEventListener('click',function(t){d.outline.GotoSubject(i,!0,void 0,!0,void 0)},!1),m}d.log.debug('lists[0] is '+h[0]),o=h[0]}d.log.debug('form is '+o),m.setAttribute('style','border: 0.05em solid brown; color: brown'),m.innerHTML='<h3>New '+u.label(i)+'</h3>';var b=d.widgets.fieldFunction(t,o),w=d.widgets.newThing(s),v=!1,x=function o(u,f){if(!u)return l(u,f);var h=[];a&&!n.holds(a,r,w,s)&&h.push($rdf.st(a,r,w,s)),a&&!n.holds(w,c.rdf('type'),i,s)&&h.push($rdf.st(w,c.rdf('type'),i,s)),h.length?d.store.updater.update([],h,_):l(!0,f),v||(v=m.appendChild(d.widgets.linkButton(t,w)))},_=function t(n,a,r){return l(a,r)};d.log.info('paneUtils Object is '+w);var k=b(t,m,{},w,o,s,x),f=d.widgets.removeButton(t,k);return f.setAttribute('style','float: right;'),m.AJAR_subject=w,m},d.widgets.makeDescription=function(t,n,a,r,i,o){var s=t.createElement('div'),l=n.statementsMatching(a,r,void 0);if(1<l.length)return d.widgets.errorMessageBlock(t,'Should not be '+l.length+' i.e. >1 '+r+' of '+a);var c=l.length?l[0].object.value:void 0,f=t.createElement('textarea');s.appendChild(f),f.rows=c?c.split('\n').length+2:2,f.cols=80;var m='font-size:100%; white-space: pre-wrap; background-color: white; border: 0.07em solid gray; padding: 1em 0.5em; margin: 1em 1em;';f.setAttribute('style',m),l.length?f.value=c:f.select(),s.refresh=function(){var t=n.any(a,r);t&&t.value!==f.value&&(f.value=t.value)};var h=t.createElement('br');s.appendChild(h);var g=t.createElement('input');g.setAttribute('type','submit'),g.disabled=!0,g.setAttribute('style','visibility: hidden; float: right;'),g.value='Save '+u.label(r),s.appendChild(g);var b=function l(c){g.disabled=!0,g.setAttribute('style','visibility: hidden; float: right;'),f.disabled=!0,f.setAttribute('style',m+'color: gray;');var u=n.statementsMatching(a,r),h=$rdf.st(a,r,f.value,i);d.store.updater.update(u,h,function(n,a,r){a?(f.setAttribute('style',m+'color: black;'),f.disabled=!1):s.appendChild(d.widgets.errorMessageBlock(t,'Error (while saving change to '+i.uri+'): '+r)),o&&o(a,r)})};return f.addEventListener('keyup',function(t){f.setAttribute('style',m+'color: green;'),g&&(g.disabled=!1,g.setAttribute('style','float: right;'))},!0),f.addEventListener('change',b,!0),g.addEventListener('click',b,!1),s},d.widgets.makeSelectForOptions=function(t,a,r,o,s,l,f,m){d.log.debug('Select list length now '+s.length);for(var h=0,n={},g=0,i;g<s.length;g++)i=s[g],i.uri in n||(n[i.uri]=!0,h++);if(0==h&&!l.mint)return d.widgets.errorMessageBlock(t,'Can\'t do selector with no options, subject= '+r+' property = '+o+'.');d.log.debug('makeSelectForOptions: store='+f);var b=function t(){return y={},o.sameTerm(d.ns.rdf('type'))?y=a.findTypeURIs(r):a.each(r,o).map(function(t){y[t.uri]=!0}),y},y=b(),w=function n(s){function c(t,n){m(t,n)}v.disabled=!0;for(var u=[],h=[],g=function n(i){a.holds(r,o,i,f)&&u.push($rdf.st(r,o,i,f))},w=0,i;w<v.options.length;w++){if(i=v.options[w],i.selected&&i.AJAR_mint){var x;if(l.mintClass){var _=d.widgets.promptForNew(t,a,r,o,l.mintClass,null,f,function(t,n){t||m(t,n)});v.parentNode.appendChild(_),x=_.AJAR_subject}else x=d.widgets.newThing(f);h.push($rdf.st(r,o,x,f)),l.mintStatementsFun&&(h=h.concat(l.mintStatementsFun(x)))}i.AJAR_uri&&(i.selected&&!(i.AJAR_uri in y)&&h.push($rdf.st(r,o,a.sym(i.AJAR_uri),f)),!i.selected&&i.AJAR_uri in y&&g(a.sym(i.AJAR_uri)),i.selected&&(v.currentURI=i.AJAR_uri))}for(var k=v.subSelect;k&&k.currentURI;)g(a.sym(k.currentURI)),k=k.subSelect;for(k=v.superSelect;k&&k.currentURI;)g(a.sym(k.currentURI)),k=k.superSelect;d.log.info('selectForOptions: stote = '+f),d.store.updater.update(u,h,function(n,a,r){if(y=b(),a&&(v.disabled=!1,x)){var i=d.widgets.fieldFunction(t,l.subForm);i(t,v.parentNode,{},x,l.subForm,f,c)}m&&m(a,r)})},v=t.createElement('select');for(var x in v.setAttribute('style','margin: 0.6em 1.5em;'),l.multiple&&v.setAttribute('multiple','true'),v.currentURI=null,v.refresh=function(){y=b();for(var t=0,n;t<v.children.length;t++)n=v.children[t],n.AJAR_uri&&(n.selected=n.AJAR_uri in y);v.disabled=!1},n){var _=a.sym(x),c=t.createElement('option');l.disambiguate?c.appendChild(t.createTextNode(u.labelWithOntology(_,!0))):c.appendChild(t.createTextNode(u.label(_,!0)));var k=a.any(_,a.sym('http://www.w3.org/ns/ui#backgroundColor'));k&&c.setAttribute('style','background-color: '+k.value+'; '),c.AJAR_uri=x,x in y&&(c.setAttribute('selected','true'),v.currentURI=x),v.appendChild(c)}if(l.mint){var C=t.createElement('option');C.appendChild(t.createTextNode(l.mint)),C.AJAR_mint=!0,v.insertBefore(C,v.firstChild)}if(null==v.currentURI&&!l.multiple){var E=t.createElement('option');E.appendChild(t.createTextNode(l.nullLabel)),v.insertBefore(E,v.firstChild),E.selected=!0}return v.addEventListener('change',w,!1),v},d.widgets.makeSelectForCategory=function(t,n,a,r,i,o){var s=d.log,l=n.any(r,d.ns.owl('disjointUnionOf')),c=!1,u;return l?u=l.elements:(u=n.each(void 0,d.ns.rdfs('subClassOf'),r),c=!0),s.debug('Select list length '+u.length),0===u.length?d.widgets.errorMessageBlock(t,'Can\'t do '+(c?'multiple ':'')+'selector with no subclasses of category: '+r):1===u.length?d.widgets.errorMessageBlock(t,'Can\'t do '+(c?'multiple ':'')+'selector with only 1 subclass of category: '+r+':'+u[1]):d.widgets.makeSelectForOptions(t,n,a,d.ns.rdf('type'),u,{multiple:c,nullPrompt:'--classify--'},i,o)},d.widgets.makeSelectForNestedCategory=function(t,n,a,r,i,o){var s=t.createElement('span'),l=null,c=function t(n,a){n&&f(),o(n,a)},u;u=d.widgets.makeSelectForCategory(t,n,a,r,i,c),s.appendChild(u);var f=function r(){l&&(s.removeChild(l),l=null),u.currentURI&&n.any(n.sym(u.currentURI),d.ns.owl('disjointUnionOf'))&&(l=d.widgets.makeSelectForNestedCategory(t,n,a,n.sym(u.currentURI),i,o),u.subSelect=l.firstChild,u.subSelect.superSelect=u,s.appendChild(l))};return f(),s},d.widgets.selectorPanel=function(t,n,a,r,i,o,s,l,c){return d.widgets.selectorPanelRefresh(t.createElement('div'),t,n,a,r,i,o,s,l,c)},d.widgets.selectorPanelRefresh=function(t,n,a,r,o,s,l,c,u,f){var m='border: 0.1em solid #ddd; border-bottom: none; width: 95%; height: 2em; padding: 0.5em;',h=null;t.innerHTML='';for(var g=function t(i,l){var g=function t(){var n=s?a.each(void 0,o,l):a.each(l,o);_.setAttribute('class',0===n.length?'hideTillHover':''),w.setAttribute('src',c.connectIcon||d.icons.iconBase+'noun_25830.svg'),w.setAttribute('title',n.length?n.length:'attach')},b=d.widgets.index.twoLine.widgetForClass(r),y,w;y=b(n,l),y.setAttribute('style',m);var v=n.createElement('div');v.setAttribute('class','hideTillHover'),v.setAttribute('style','float:right; width:10%');var x=n.createElement('a');x.setAttribute('href',l.uri),x.setAttribute('style','float:right'),v.appendChild(x).textContent='>',i.appendChild(v);var _=n.createElement('div');return _.setAttribute('style',(s?'float:left;':'float:right;')+' width:30px;'),w=n.createElement('img'),g(),_.appendChild(w),i.appendChild(_),y.addEventListener('click',function(t){h===y?(y.setAttribute('style',m),h=null):(h&&h.setAttribute('style',m),y.setAttribute('style',m+'background-color: #ccc; color:black;'),h=y),u(l,t,h===y),g()},!1),w.addEventListener('click',function(t){f(l,t,s,g)},!1),i.appendChild(y),i},b=0,i;b<l.length;b++)i=n.createElement('div'),t.appendChild(i),g(i,l[b]);return t},d.widgets.index={},d.widgets.index.line={},d.widgets.index.twoLine={},d.widgets.index.twoLine['']=function(t,n){var a=t.createElement('div');return a.textContent=u.label(n),a},d.widgets.index.twoLine.widgetForClass=function(t){var n=d.widgets.index.twoLine[t.uri],a=d.store;if(n)return n;var r=a.findSuperClassesNT(t);for(var i in r)if(n=d.widgets.index.twoLine[a.fromNT(i).uri],n)return n;return d.widgets.index.twoLine['']},d.widgets.index.twoLine['http://www.w3.org/2000/10/swap/pim/qif#Transaction']=function(t,n){var a='',r=function t(r){var i=d.store.any(n,d.ns.qu(r));return i||(a+='@@ No value for '+r+'! '),i?u.escapeForXML(i.value):'?'},i=t.createElement('table');return i.innerHTML='<tr><td colspan="2">'+r('payee')+'</td></tr>\n<tr><td><td>'+r('date').slice(0,10)+'</td><td style="text-align: right;">'+r('amount')+'</td></tr>',a&&(i.innerHTML='<tr><td><a href="'+u.escapeForXML(n.uri)+'">'+u.escapeForXML(a)+'</a></td></tr>'),i},d.widgets.index.twoLine['http://www.w3.org/ns/pim/trip#Trip']=function(t,n){var a=function t(a){var r=d.store.any(n,a);return r?u.escapeForXML(r.value):'?'},r=t.createElement('table');return r.innerHTML='<tr><td colspan="2">'+a(d.ns.dc('title'))+'</td></tr>\n<tr style="color: #777"><td><td>'+a(d.ns.cal('dtstart'))+'</td><td>'+a(d.ns.cal('dtend'))+'</td></tr>',r},d.widgets.addStyleSheet=function(t,n){for(var a=t.querySelectorAll('link'),r=0;r<a.length;r++)if('stylesheet'===(a[r].getAttribute('rel')||'')&&(a[r].getAttribute('href')||'')===n)return;var i=t.createElement('link');i.setAttribute('rel','stylesheet'),i.setAttribute('type','text/css'),i.setAttribute('href',n),t.getElementsByTagName('head')[0].appendChild(i)},d.widgets.isAudio=function(t){return d.widgets.isImage(t,'audio')},d.widgets.isVideo=function(t){return d.widgets.isImage(t,'video')},d.widgets.isImage=function(n,a){var r={audio:'http://purl.org/dc/dcmitype/Sound',image:'http://purl.org/dc/dcmitype/Image',video:'http://purl.org/dc/dcmitype/MovingImage'},i=a||'image',o=d.store.findTypeURIs(n),s=$rdf.Util.mediaTypeClass(i+'/*').uri.split('*')[0];for(var l in o)if(l.startsWith(s))return!0;return!!(r[i]in o)}},function(t,n,a){'use strict';function r(t,n){if(Array.isArray(t))return t.slice();if(!t)return[];var a=[];if(!('string'==typeof t))for(r=0;r<t.length;r++)a[r]=0|t[r];else if(!n)for(var r=0;r<t.length;r++){var i=t.charCodeAt(r),o=i>>8,s=255&i;o?a.push(o,s):a.push(s)}else if('hex'===n)for(t=t.replace(/[^a-z0-9]+/ig,''),0!=t.length%2&&(t='0'+t),r=0;r<t.length;r+=2)a.push(parseInt(t[r]+t[r+1],16));return a}function i(t){for(var n='',a=0;a<t.length;a++)n+=d(t[a].toString(16));return n}function o(t){var n=t>>>24|65280&t>>>8|16711680&t<<8|(255&t)<<24;return n>>>0}function s(t,n){for(var a='',r=0,i;r<t.length;r++)i=t[r],'little'===n&&(i=o(i)),a+=l(i.toString(16));return a}function d(t){return 1===t.length?'0'+t:t}function l(t){return 7===t.length?'0'+t:6===t.length?'00'+t:5===t.length?'000'+t:4===t.length?'0000'+t:3===t.length?'00000'+t:2===t.length?'000000'+t:1===t.length?'0000000'+t:t}function c(t,n,a,r){var o=a-n;N(0==o%4);for(var s=Array(o/4),d=0,i=n;d<s.length;d++,i+=4){var l;l='big'===r?t[i]<<24|t[i+1]<<16|t[i+2]<<8|t[i+3]:t[i+3]<<24|t[i+2]<<16|t[i+1]<<8|t[i],s[d]=l>>>0}return s}function u(t,n){for(var a=Array(4*t.length),r=0,i=0,o;r<t.length;r++,i+=4)o=t[r],'big'===n?(a[i]=o>>>24,a[i+1]=255&o>>>16,a[i+2]=255&o>>>8,a[i+3]=255&o):(a[i+3]=o>>>24,a[i+2]=255&o>>>16,a[i+1]=255&o>>>8,a[i]=255&o);return a}function f(t,n){return t>>>n|t<<32-n}function m(t,n){return t<<n|t>>>32-n}function h(t,n){return t+n>>>0}function g(t,n,a){return t+n+a>>>0}function b(t,n,a,r){return t+n+a+r>>>0}function y(t,n,a,r,i){return t+n+a+r+i>>>0}function w(t,n,a,r){var i=t[n],o=t[n+1],s=r+o>>>0,d=(s<r?1:0)+a+i;t[n]=d>>>0,t[n+1]=s}function v(t,n,a,r){var i=n+r>>>0,o=(i<n?1:0)+t+a;return o>>>0}function x(t,n,a,r){var i=n+r;return i>>>0}function _(t,n,a,r,i,o,s,d){var l=0,c=n;c=c+r>>>0,l+=c<n?1:0,c=c+o>>>0,l+=c<o?1:0,c=c+d>>>0,l+=c<d?1:0;var u=t+a+i+s+l;return u>>>0}function k(t,n,a,r,i,o,s,d){var l=n+r+o+d;return l>>>0}function C(t,n,a,r,i,o,s,d,l,c){var u=0,f=n;f=f+r>>>0,u+=f<n?1:0,f=f+o>>>0,u+=f<o?1:0,f=f+d>>>0,u+=f<d?1:0,f=f+c>>>0,u+=f<c?1:0;var m=t+a+i+s+l+u;return m>>>0}function E(t,n,a,r,i,o,s,d,l,c){var u=n+r+o+d+c;return u>>>0}function T(t,n,a){var i=n<<32-a|t>>>a;return i>>>0}function A(t,n,a){var i=t<<32-a|n>>>a;return i>>>0}function S(t,n,a){return t>>>a}function I(t,n,a){var i=t<<32-a|n>>>a;return i>>>0}var N=a(21),j=a(0);n.inherits=j,n.toArray=r,n.toHex=i,n.htonl=o,n.toHex32=s,n.zero2=d,n.zero8=l,n.join32=c,n.split32=u,n.rotr32=f,n.rotl32=m,n.sum32=h,n.sum32_3=g,n.sum32_4=b,n.sum32_5=y,n.sum64=w,n.sum64_hi=v,n.sum64_lo=x,n.sum64_4_hi=_,n.sum64_4_lo=k,n.sum64_5_hi=C,n.sum64_5_lo=E,n.rotr64_hi=T,n.rotr64_lo=A,n.shr64_hi=S,n.shr64_lo=I},function(t,n,a){'use strict';function r(){return'v'+R++}function i(){R=0}function o(){if(M){var t=M,n=new t;return function(t,a,r,i){t=+(t||0.3),r=r||'sine','function'!=typeof i&&(i=function t(){});var o=n.createOscillator();o.type=r,o.frequency.value=a||256,o.connect(n.destination),o.start(0),o.stop(t)}}}function s(t){t=t.uri||t;var n=function t(n){return n.split('').reduce(function(t,n){return t=(t<<5)-t+n.charCodeAt(0),t&t},0)};return'#'+(12632256|16777215&n(t)).toString(16)}function d(){return'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g,function(t){var n=0|16*Math.random(),a='x'===t?n:8|3&n;return a.toString(16)})}function l(t,n,a){var r,o,s;for(s=0;s<t.children.length;s++)o=t.children[s],o.trashMe=!0;for(var i=0,d;i<n.length;i++){for(d=n[i],r=!1,s=0;s<t.children.length;s++)if(o=t.children[s],o.subject&&o.subject.sameTerm(d)){o.trashMe=!1,r=!0;break}if(!r){var l=a(d);if(i>=t.children.length)t.appendChild(l);else{var c=t.children[i];t.insertBefore(l,c)}l.subject=d}}for(s=0;s<t.children.length;s++)o=t.children[s],o.trashMe&&t.removeChild(o)}function c(t){var n=''+t+'\n',a;if(!t.stack)return n+'No stack available.\n';var r=t.stack.toString().split('\n'),i=[];for(a=0;a<r.length;a++){var o=r[a];if(-1<o.indexOf('ecmaunit.js'))break;'('===o.charAt(0)&&(o='function'+o);var s=o.split('@');i.push(s)}for(a=0;a<i.length;a++)n+='  '+i[a][1]+'\n    '+i[a][0];return n}function u(t){var n=t.childNodes,a=n.length,r;for(r=a-1;0<=r;r--)t.removeChild(n[r]);return t}function f(t){var n;return t=t||window.event,t.target?n=t.target:t.srcElement&&(n=t.srcElement),3===n.nodeType&&(n=n.parentNode),n}function m(t,n){var a;for(a=t;a;a=a.parentNode)try{if(a.tagName===n)return a}catch(t){return}}function h(t,n){var a,r;for(a=n;a&&1===a.nodeType;a=a.parentNode)if(r=a.getAttribute('about'),r)return t.fromNT(r);L.log.debug('getAbout: No about found')}function g(t){var n=t.parentNode,a=n?n.AJAR_statement:void 0,r=a?t.className:'';return'pred'===r||'pred selected'===r?a.predicate:'obj'===r||'obj selected'===r?n.AJAR_inverse?a.subject:a.object:''===r||'selected'===r?h(L.store,t):'undetermined selected'===r?t.nextSibling?a.predicate:n.AJAR_inverse?a.subject:a.object:void 0}function b(t,n){var a=t.createElement('script');return a.setAttribute('type','text/javascript'),a.setAttribute('src',n),a}function y(t){var n=window.onload;window.onload='function'==typeof window.onload?function(){n(),t()}:t}function w(t){var n=t.ownerDocument,a=n.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return[r.left-a.left,r.top-a.top]}function v(t,n,a,r){function i(){r.scrollBy(0,s/10),l++,10==l&&r.clearInterval(d)}r||(r=window);var o=w(t)[1],s=o-52-r.scrollY;if(n)return a?void r.scrollBy(0,o+t.clientHeight-(r.scrollY+r.innerHeight)):void r.scrollBy(0,s);var d=r.setInterval(i,50),l=0}function x(t,n,a,r){r||(r=document);var i=r.createElement('img');return i.setAttribute('src',t),i.addEventListener('copy',function(t){t.clipboardData.setData('text/plain',''),t.clipboardData.setData('text/html',''),t.preventDefault()}),'undefined'!=typeof a&&i.setAttribute('title',a),i}function _(t){var n=t;0<='#/'.indexOf(n[n.length-1])&&(n=n.slice(0,-1));var a=[];for(var r in this.prefixes)a[this.prefixes[r]]=r;var o=function t(n){return'ns'!==n&&(d=n,!0)},s=n.lastIndexOf('#'),d,l;for(0<=s&&(n=n.slice(s-1));;){var i=n.lastIndexOf('/');for(0<=i&&(n=n.slice(i+1)),l=0;l<n.length&&this.prefixchars.indexOf(n[l]);)l++;if(n=n.slice(0,l),6>n.length&&o(n))return d;if(o(n.slice(0,3)))return d;if(o(n.slice(0,2)))return d;if(o(n.slice(0,4)))return d;if(o(n.slice(0,1)))return d;if(o(n.slice(0,5)))return d;for(l=0;;l++)if(o(n.slice(0,3)+l))return d}}function k(t){if(t.uri===void 0)return'??';var n=t.uri,a=[],r=n.lastIndexOf('#'),i;if(0<=r)n=n.slice(0,r+1);else if(r=n.lastIndexOf('/'),0<=r)n=n.slice(0,r+1);else return t.uri+'?!';for(var o in L.ns)a[L.ns[o]]=o;try{return a[n]}catch(t){}for(n=n.slice(0,-1);n;){if(r=n.lastIndexOf('/'),!(0<=r))return t.uri+'!?';if(i=n.slice(r+1),n=n.slice(0,r),'ns'!==i&&0>'0123456789'.indexOf(i[0]))return i}}function C(n,a){var r=L.store.findTypeURIs(n);return r[L.ns.rdf('Predicate').uri]||r[L.ns.rdfs('Class').uri]?E(n,a)+' ('+k(n)+')':E(n,a)}function E(t,n){function a(t){return n?t.slice(0,1).toUpperCase()+t.slice(1):t}function r(t){var n='';'/'===t.slice(-1)&&(t=t.slice(0,-1));for(var r=0;r<t.length;r++){if('_'===t[r]||'-'===t[r]){n+=' ';continue}n+=t[r],r+1<t.length&&t[r].toUpperCase()!==t[r]&&t[r+1].toLowerCase()!==t[r+1]&&(n+=' ')}return'has '===n.slice(0,4)&&(n=n.slice(4)),a(n)}var o;if('undefined'!=typeof tabulator&&tabulator.lb&&(o=tabulator.lb.label(t),o))return a(o.value);var d=L.store,l=d.any(t,L.ns.link('message'))||d.any(t,L.ns.vcard('fn'))||d.any(t,L.ns.foaf('name'))||d.any(t,L.ns.dct('title'))||d.any(t,L.ns.dc('title'))||d.any(t,L.ns.rss('title'))||d.any(t,L.ns.contact('fullName'))||d.any(t,d.sym('http://www.w3.org/2001/04/roadmap/org#name'))||d.any(t,L.ns.cal('summary'))||d.any(t,L.ns.foaf('nick'))||d.any(t,L.ns.rdfs('label'));if(l)return a(l.value);if('BlankNode'===t.termType)return'...';if('Collection'===t.termType)return'('+t.elements.length+')';var c=t.uri;if('undefined'==typeof c)return t.toString();try{c=c.split('/').map(decodeURIComponent).join('/')}catch(t){for(var u=c.length-3,i;0<u;u--)for(i='0123456789abcefABCDEF';'%'===c[u]&&0<=i.indexOf(c[u+1])&&0<=i.indexOf(c[u+2]);)c=c.slice(0,u)+_StringfromCharCode(parseInt(c.slice(u+1,u+3),16))+c.slice(u+3)}'#this'===c.slice(-5)?c=c.slice(0,-5):'#me'===c.slice(-3)&&(c=c.slice(0,-3));var f=c.indexOf('#');if(0<=f)return r(c.slice(f+1));'/foaf.rdf'===c.slice(-9)?c=c.slice(0,-9):'/foaf'===c.slice(-5)&&(c=c.slice(0,-5));var m=c.lastIndexOf('/',c.length-2);return 0<=m&&m<t.uri.length?r(c.slice(m+1)):a(decodeURIComponent(t.uri))}function T(t){return t.replace(/&/g,'&amp;').replace(/</g,'&lt;')}function A(t){return T(E(t))}function S(t,n){var a;if(n){var r=L.store.any(t,L.ns.owl('inverseOf'));if(r||(r=L.store.any(void 0,L.ns.owl('inverseOf'),t)),r)return A(r)}return a=A(t),n?'type'===a?'...':'is '+a+' of':a}function I(t,n){var a=t.predicate.compareTerm(n.predicate);return 0===a?t.object.compareTerm(n.object):a}function N(t,n){var a=t.predicate.compareTerm(n.predicate);return 0===a?t.subject.compareTerm(n.subject):a}function j(t){for(var a=t;!0;){if(a.getAttribute('predTR'))return a;if(a.previousSibling&&'TR'===a.previousSibling.nodeName)a=a.previousSibling;else return L.log.error('Could not find predParent'),t}}t.exports={addLoadEvent:y,AJARImage:x,ancestor:m,beep:o,clearVariableNames:i,emptyNode:u,escapeForXML:T,findPos:w,genUuid:d,getAbout:h,getEyeFocus:v,getTarget:f,getTerm:g,hashColor:s,include:b,label:E,labelForXML:A,labelWithOntology:C,newVariableName:r,ontologyLabel:k,predicateLabelForXML:S,predParentOf:j,RDFComparePredicateObject:I,RDFComparePredicateSubject:N,shortName:_,stackString:c,syncTableToArray:l};var L={log:a(24),ns:a(14),rdf:a(4),store:a(20)},R=0,M;'undefined'==typeof AudioContext?'undefined'!=typeof window&&(M=window.AudioContext||window.webkitAudioContext):M=AudioContext},function(t,n,a){'use strict';(function(t){if(t.scriptURI)t.exports.iconBase=''+t.scriptURI.slice(0,t.scriptURI.lastIndexOf('/'))+'/icons/',t.exports.originalIconBase=''+t.scriptURI.slice(0,t.scriptURI.lastIndexOf('/'))+'/originalIcons/';else{var n='https://linkeddata.github.io/solid-ui/src';'undefined'!=typeof $SolidTestEnvironment&&$SolidTestEnvironment.iconBase?(t.exports.iconBase=$SolidTestEnvironment.iconBase,t.exports.originalIconBase=$SolidTestEnvironment.originalIconBase):(t.exports.iconBase=n+'/icons/',t.exports.originalIconBase=n+'/originalIcons/')}console.log('   Icon base is: '+t.exports.iconBase)}).call(n,a(9)(t))},function(t,n,a){'use strict';function r(t,n){var a=t.statusArea||t.div;return console.log('Complaint: '+n),a.appendChild(s.errorMessageBlock(t.dom,n))}function i(t,n,a,r,i,o,s){var l=t.createElement('div'),c=t.createTextNode(a),u=d.store.updater.editable(s.uri);c.style='colour: black; font-size: 100%; padding-left: 0.5 em; padding-right: 0.5 em;',l.appendChild(c);var f=t.createElement('input');l.appendChild(f),f.setAttribute('type','checkbox'),f.setAttribute('style','margin: 0.7em'),i&&i.object&&!i.why&&(i.why=s),r&&r.object&&!r.why&&(r.why=s);var m=n.holds(i);if(r){var h=n.holds(r);if(m&&h)return l.appendChild(d.widgets.errorMessageBlock(t,'Inconsistent data in store!\n'+i+' and\n'+r)),l;m||h||(m=!!n.any(o,d.ns.ui('default')))}if(f.checked=m,!u)return l;var g=function n(a){c.style='color: #bbb;';var o,s;this.checked?(o=i,s=r&&h?r:[],d.store.updater.update(s,o,function(n,a,r){return a?void(c.style='color: #black;',m=!0,h=!1):(c.style='color: #black; background-color: #fee;',l.appendChild(d.widgets.errorMessageBlock(t,'Error updating store (setting boolean, checked) :\n\n'+r)),void(f.checked=!1))})):(o=r,s=i,d.store.updater.update(s,o,function(n,a,i){return c.className='question',a?void(c.style='color: #black;',m=!1,h=!!r):(c.style='color: #black; background-color: #fee;',l.appendChild(d.widgets.errorMessageBlock(t,'Error updating store (unchecked):\n\n'+i)),void(f.checked=!0))}))};return f.addEventListener('click',g,!1),l}var o=t.exports=Object.assign({},a(455),a(247),a(97),{buildCheckboxForm:i,complain:r}),d={icons:a(29),log:a(25),ns:a(15),store:a(22),widgets:o},s=a(97),l=a(31);d.widgets.field={},d.widgets.clearElement=function(t){for(;t.firstChild;)t.removeChild(t.firstChild);return t},d.widgets.refreshTree=function(t){if(t.refresh)return void t.refresh();for(var n=0;n<t.children.length;n++)d.widgets.refreshTree(t.children[n])},d.widgets.extractLogURI=function(t){var n=t.search(/logFile=/),a=t.search(/&rulesFile=/);return t.substring(n+8,a)},d.widgets.shortDate=function(t){if(!t)return'???';var n=['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];try{var a=new Date,r=$rdf.term(a).value;return t.slice(0,10)===r.slice(0,10)?t.slice(11,16):t.slice(0,4)===r.slice(0,4)?n[parseInt(t.slice(5,7),10)-1]+' '+parseInt(t.slice(8,10),10):t.slice(0,10)}catch(t){return'shortdate:'+t}},d.widgets.formatDateTime=function(t,n){return n.split('{').map(function(n){var a=n.split('}')[0],r={Milliseconds:3,FullYear:4},i={Month:1};return n?('000'+(t['get'+a]()+(i[a]||0))).slice(-(r[a]||2))+n.split('}')[1]:''}).join('')},d.widgets.timestamp=function(){return d.widgets.formatDateTime(new Date,'{FullYear}-{Month}-{Date}T{Hours}:{Minutes}:{Seconds}.{Milliseconds}')},d.widgets.shortTime=function(){return d.widgets.formatDateTime(new Date,'{Hours}:{Minutes}:{Seconds}.{Milliseconds}')},d.widgets.newThing=function(t){var n=new Date;return $rdf.sym(t.uri+'#id'+(''+n.getTime()))},d.widgets.setName=function(t,n){var a=d.store,r=d.ns,i=function t(n){var i=a.any(n,r.vcard('fn'))||a.any(n,r.foaf('name'))||a.any(n,r.vcard('organization-name'));return i?i.value:null},o=n.sameTerm(r.foaf('Agent'))?'Everyone':i(n);t.textContent=o||l.label(n),!o&&n.uri&&a.fetcher.nowOrWhenFetched(n.doc(),void 0,function(a){t.textContent=i(n)||l.label(n)})},d.widgets.imagesOf=function(t,n){var a=d.ns;return n.each(t,a.sioc('avatar')).concat(n.each(t,a.foaf('img'))).concat(n.each(t,a.vcard('logo'))).concat(n.each(t,a.vcard('photo'))).concat(n.each(t,a.foaf('depiction')))},d.widgets.setImage=function(t,n){var a=d.store,r=d.ns,i=d.icons.iconBase,o=function t(n){if(n.sameTerm(r.foaf('Agent'))||n.sameTerm(r.rdf('Resource')))return i+'noun_98053.svg';var o=a.any(n,r.sioc('avatar'))||a.any(n,r.foaf('img'))||a.any(n,r.vcard('logo'))||a.any(n,r.vcard('hasPhoto'))||a.any(n,r.vcard('photo'))||a.any(n,r.foaf('depiction'));return o?o.uri:null},s=function t(n){var o=a.findTypeURIs(n);if(r.solid('AppProvider').uri in o)return i+'noun_15177.svg';if(n.uri){if(4===n.uri.split('/').length&&!n.uri.split('/')[1]&&!n.uri.split('/')[3])return i+'noun_15177.svg';if(n.uri.startsWith('message:')||n.uri.startsWith('mid:'))return i+'noun_480183.svg';if(n.uri.startsWith('mailto:'))return i+'noun_567486.svg';if(n.uri.startsWith('https:')&&0>n.uri.indexOf('#'))return n.site().uri+'favicon.ico'}return r.solid('AppProviderClass').uri in o?i+'noun_144.svg':r.vcard('Group').uri in o||r.rdfs('Class').uri in o?i+'noun_339237.svg':r.vcard('Organization').uri in o||r.rdfs('Class').uri in o?i+'noun_143899.svg':r.vcard('Individual').uri in o||r.foaf('Person').uri in o?i+'noun_15059.svg':r.vcard('AddressBook').uri in o?i+'noun_15695.svg':'http://www.w3.org/ns/pim/trip#Trip'in o?i+'noun_581629.svg':r.meeting('Meeting').uri in o?i+'noun_66617.svg':i+'noun_10636_grey.svg'},l=o(n);t.setAttribute('src',l||s(n)),!l&&n.uri&&a.fetcher.nowOrWhenFetched(n.doc(),void 0,function(a){t.setAttribute('src',o(n)||s(n))})};var c=function t(n,a){var r=n.createElement('img'),i=function t(n){if(!n.uri)return!1;var a=n.uri.split('/');return 3===a.length||4===a.length&&''===a[3]};if(r.setAttribute('src',d.icons.iconBase+(i(a)?'noun_15177.svg':'noun_681601.svg')),a.uri&&a.uri.startsWith('https:')&&0>a.uri.indexOf('#')){var o=n.createElement('object');return o.setAttribute('data',a.site().uri+'favicon.ico'),o.setAttribute('type','image/x-icon'),o.appendChild(r),o}return d.widgets.setImage(r,a),r};d.widgets.deleteButtonWithCheck=function(t,n,a,r){var i=d.icons.iconBase+'noun_2188_red.svg',o=t.createElement('img');o.setAttribute('src',i),o.setAttribute('style','margin: 0.2em; width: 1em; height:1em'),o.title='Remove this '+a;var s=o;return n.appendChild(s),n.setAttribute('class','hoverControl'),s.setAttribute('class','hoverControlHide'),s.addEventListener('click',function(i){n.removeChild(s);var o=t.createElement('button');o.textContent='cancel',n.appendChild(o).addEventListener('click',function(t){n.removeChild(d),n.removeChild(o),n.appendChild(s)},!1);var d=t.createElement('button');d.textContent='Delete '+a,n.appendChild(d).addEventListener('click',function(t){n.removeChild(d),n.removeChild(o),r()},!1)},!1),s},d.widgets.askName=function(t,n,a,r,i){return new Promise(function(n,o){var s=t.createElement('div');r=r||d.ns.foaf('name');var c=i?l.label(i)+'  ':'';c+=l.label(r)+': ',s.appendChild(t.createElement('p')).textContent=c;var u=t.createElement('input');u.setAttribute('type','text'),u.setAttribute('size','100'),u.setAttribute('maxLength','2048'),u.select(),s.appendChild(u),a.appendChild(s);var f=function t(){s.parentNode.removeChild(s),n(u.value)};u.addEventListener('keyup',function(t){13==t.keyCode&&f()},!1);var m=s.appendChild(t.createElement('br')),h=s.appendChild(t.createElement('button'));h.setAttribute('type','button'),h.innerHTML='Cancel',h.addEventListener('click',function(t){s.parentNode.removeChild(s),n(null)},!1);var g=s.appendChild(t.createElement('button'));g.setAttribute('type','button'),g.innerHTML='Continue',g.addEventListener('click',function(t){f()},!1)})},d.widgets.linkIcon=function(t,n,a){var r=t.createElement('a');r.setAttribute('href',n.uri),n.uri.startsWith('http')&&r.setAttribute('target','_blank');var i=r.appendChild(t.createElement('img'));return i.setAttribute('src',a||d.icons.originalIconBase+'go-to-this.png'),i.setAttribute('style','margin: 0.3em;'),r},d.widgets.personTR=function(t,n,a,r){var i=t.createElement('tr');r=r||{};var o=i.appendChild(t.createElement('td')),s=i.appendChild(t.createElement('td')),l=i.appendChild(t.createElement('td')),u=c(t,a);if(o.setAttribute('style','vertical-align: middle; width:2.5em; padding:0.5em; height: 2.5em;'),s.setAttribute('style','vertical-align: middle; text-align:left;'),l.setAttribute('style','vertical-align: middle; width:2em; padding:0.5em; height: 4em;'),u.setAttribute('style','width: 3em; height: 3em; margin: 0.1em; border-radius: 1em;'),o.appendChild(u),d.widgets.setName(s,a),r.deleteFunction&&d.widgets.deleteButtonWithCheck(t,l,r.noun||'one',r.deleteFunction),a.uri){if(!1!==r.link){var f=l.appendChild(d.widgets.linkIcon(t,a));f.classList.add('HoverControlHide'),l.appendChild(t.createElement('br'))}!1!==r.draggable&&(u.setAttribute('draggable','false'),d.widgets.makeDraggable(i,a))}return i},d.widgets.refreshTree=function t(n){if(n.refresh)return void n.refresh();for(var a=0;a<n.children.length;a++)t(n.children[a])},d.widgets.attachmentList=function(t,n,a,i){i=i||{};var o=i.doc||n.doc();i.modify===void 0&&(i.modify=!0);var s=i.modify,c=i.promptIcon||d.icons.iconBase+'noun_748003.svg',f=i.predicate||d.ns.wf('attachment'),u=i.noun||'attachment',m=d.store,h=d.ns,g=a.appendChild(t.createElement('table'));g.setAttribute('style','margin-top: 1em; margin-bottom: 1em;');var b=g.appendChild(t.createElement('tr')),y=b.appendChild(t.createElement('td')),w=b.appendChild(t.createElement('td')),v=w.appendChild(t.createElement('table')),x=v.appendChild(t.createElement('tr')),_=function t(a){m.updater.update($rdf.st(n,f,a,o),[],function(t,n,a,i){n?C():r('Error deleting one: '+a)})},k=function n(a){var r=a,i={noun:u};return s&&(i.deleteFunction=function(){_(r)}),d.widgets.personTR(t,f,a,i)},C=v.refresh=function(){var t=m.each(n,f);t.sort(),l.syncTableToArray(v,t,k)};g.refresh=C,C();var E=function t(a){var i=[];a.map(function(t){var a=$rdf.sym(t);console.log('Dropped on attachemnt '+t),i.push($rdf.st(n,f,a,o))}),m.updater.update([],i,function(t,n,a,i){n?C():r('Error adding one: '+a)})};if(s){var T=y.appendChild(t.createElement('img'));T.setAttribute('src',c),T.setAttribute('style','width; 2em; height: 2em; margin: 0.5em;'),T.setAttribute('draggable','false'),d.widgets.makeDropTarget(y,E)}return g},d.widgets.field[d.ns.ui('Form').uri]=d.widgets.field[d.ns.ui('Group').uri]=function(n,a,r,o,s,l,c){var u=d.store,f=n.createElement('div');f.setAttribute('style','padding-left: 2em; border: 0.05em solid brown;');var m=d.ns.ui;a.appendChild(f);var h=o.toNT()+'|'+s.toNT();if(r[h]){f.appendChild(n.createTextNode('Group: see above '+h));var g=[$rdf.st(o,d.ns.owl('sameAs'),o)];return d.outline.appendPropertyTRs(f,g),f}var b={};for(var y in r)b[y]=1;b[h]=1;var w=u.any(s,m('parts')),v;if(w)v=w.elements;else{var w=u.each(s,m('part'));v=d.widgets.sortBySequence(w)}if(!w)return f.appendChild(d.widgets.errorMessageBlock(n,'No parts to form! ')),n;for(var x=[],_=[],k=0;k<v.length;k++){var i=v[k],C=d.widgets.bottomURI(i);if(C===m('Options').uri){var t=u.any(i,m('dependingOn'));t&&u.any(o,t)&&(_[k]=u.any(o,t).toNT())}var E=d.widgets.fieldFunction(n,i),T=function a(i,s){if(i)for(var h=0;h<v.length;h++){var g=v[h],b=d.widgets.bottomURI(g);if(b===m('Options').uri){var t=u.any(g,m('dependingOn'));if(1){var y=E(n,f,r,o,g,l,c);f.removeChild(y),f.insertBefore(y,x[h]),f.removeChild(x[h]),_[h]=u.any(o,t).toNT(),x[h]=y}}}c(i,s)};x.push(E(n,f,b,o,i,l,T))}return f},d.widgets.field[d.ns.ui('Options').uri]=function(t,n,a,r,o,s,l){var u=d.store,f=t.createElement('div'),m=d.ns.ui;n.appendChild(f);var h=u.any(o,m('dependingOn'));h||(h=d.ns.rdf('type'));var g=u.each(o,m('case'));g||f.appendChild(d.widgets.errorMessageBlock(t,'No cases to Options form. '));var b;if(h.sameTerm(d.ns.rdf('type')))b=u.findTypeURIs(r);else{var y=u.any(r,h);y===void 0?f.appendChild(d.widgets.errorMessageBlock(t,'Can\'t select subform as no value of: '+h)):(b={},b[y.uri]=!0)}for(var w=0;w<g.length;w++)for(var i=g[w],c=u.each(i,m('for')),v=0;v<c.length;v++)if(b[c[v].uri]){var x=u.the(i,m('use'));if(!x)return f.appendChild(d.widgets.errorMessageBlock(t,'No "use" part for case in form '+o)),f;d.widgets.appendForm(t,f,a,r,x,s,l);break}return f},d.widgets.field[d.ns.ui('Multiple').uri]=function(t,n,a,r,o,s,c){var u=d.icons.iconBase+'noun_19460_green.svg',f=d.store;f.updater=f.updater||new $rdf.UpdateManager(f);var m=t.createElement('table'),h=d.ns.ui,g;n.appendChild(m);var i=f.any(o,h('property'));if(!i)return m.appendChild(d.widgets.errorMessageBlock(t,'No property to multiple: '+o)),m;var b=f.any(o,h('min'));b=b?b.value:0;var y=f.any(o,h('max'));y=y?y.value:99999999;var w=f.any(o,h('part'));if(!w)return m.appendChild(d.widgets.errorMessageBlock(t,'No part to multiple: '+o)),m;var v=0,x=m.appendChild(t.createElement('tr')),_=m.appendChild(t.createElement('tr')),k=_.appendChild(t.createElement('img'));k.setAttribute('src',u),k.setAttribute('style','margin: 0.2em; width: 1em; height:1em'),k.title='Click to add one or more '+l.label(i);var C=_.appendChild(t.createElement('span')),E=function n(o,u){d.log.debug('Multiple add: '+u),++v,u||(u=d.widgets.newThing(s));var h=m.insertBefore(t.createElement('tr'),_),g=function n(a,o,l){if(!o)h.appendChild(d.widgets.errorMessageBlock(t,'Multiple: item failed: '+x)),c(o,l);else if(!f.holds(r,i,u)){var m=[$rdf.st(r,i,u,s)];f.updater.update([],m,b)}},b=function t(n,a,r){return c(a,r)},y=d.widgets.fieldFunction(t,w),k=y(t,x,a,u,w,s,g),C=function n(){if(f.holds(r,i,u)){var a=[$rdf.st(r,i,u,s)];f.updater.update(a,[],function(n,a,r){a?x.removeChild(k):x.appendChild(d.widgets.errorMessageBlock(t,'Multiple: delete failed: '+r))})}};d.widgets.deleteButtonWithCheck(t,k,l.label(i),C)},T=f.each(r,i);C.textContent=(0===T.length?'Add one or more ':'Add more ')+l.label(i),T.map(function(t){E(null,t)});for(var A=b-T.length,S=0;S<A;S++)console.log('Adding extra: min '+b),E();return _.addEventListener('click',E,!0),m},d.widgets.fieldParams={},d.widgets.fieldParams[d.ns.ui('ColorField').uri]={size:9,type:'color',dt:'color'},d.widgets.fieldParams[d.ns.ui('ColorField').uri].pattern=/^\s*#[0-9a-f][0-9a-f][0-9a-f][0-9a-f][0-9a-f][0-9a-f]([0-9a-f][0-9a-f])?\s*$/,d.widgets.fieldParams[d.ns.ui('DateField').uri]={size:20,type:'date',dt:'date'},d.widgets.fieldParams[d.ns.ui('DateField').uri].pattern=/^\s*[0-9][0-9][0-9][0-9](-[0-1]?[0-9]-[0-3]?[0-9])?Z?\s*$/,d.widgets.fieldParams[d.ns.ui('DateTimeField').uri]={size:20,type:'date',dt:'dateTime'},d.widgets.fieldParams[d.ns.ui('DateTimeField').uri].pattern=/^\s*[0-9][0-9][0-9][0-9](-[0-1]?[0-9]-[0-3]?[0-9])?(T[0-2][0-9]:[0-5][0-9](:[0-5][0-9])?)?Z?\s*$/,d.widgets.fieldParams[d.ns.ui('TimeField').uri]={size:10,type:'time',dt:'time'},d.widgets.fieldParams[d.ns.ui('TimeField').uri].pattern=/^\s*([0-2]?[0-9]:[0-5][0-9](:[0-5][0-9])?)\s*$/,d.widgets.fieldParams[d.ns.ui('IntegerField').uri]={size:12,style:'text-align: right',dt:'integer'},d.widgets.fieldParams[d.ns.ui('IntegerField').uri].pattern=/^\s*-?[0-9]+\s*$/,d.widgets.fieldParams[d.ns.ui('DecimalField').uri]={size:12,style:'text-align: right',dt:'decimal'},d.widgets.fieldParams[d.ns.ui('DecimalField').uri].pattern=/^\s*-?[0-9]*(\.[0-9]*)?\s*$/,d.widgets.fieldParams[d.ns.ui('FloatField').uri]={size:12,style:'text-align: right',dt:'float'},d.widgets.fieldParams[d.ns.ui('FloatField').uri].pattern=/^\s*-?[0-9]*(\.[0-9]*)?((e|E)-?[0-9]*)?\s*$/,d.widgets.fieldParams[d.ns.ui('SingleLineTextField').uri]={},d.widgets.fieldParams[d.ns.ui('NamedNodeURIField').uri]={namedNode:!0},d.widgets.fieldParams[d.ns.ui('TextField').uri]={},d.widgets.fieldParams[d.ns.ui('PhoneField').uri]={size:20,uriPrefix:'tel:'},d.widgets.fieldParams[d.ns.ui('PhoneField').uri].pattern=/^\s*\+?[ 0-9-]+[0-9]\s*$/,d.widgets.fieldParams[d.ns.ui('EmailField').uri]={size:30,uriPrefix:'mailto:'},d.widgets.fieldParams[d.ns.ui('EmailField').uri].pattern=/^\s*.*@.*\..*\s*$/,d.widgets.field[d.ns.ui('PhoneField').uri]=d.widgets.field[d.ns.ui('EmailField').uri]=d.widgets.field[d.ns.ui('ColorField').uri]=d.widgets.field[d.ns.ui('DateField').uri]=d.widgets.field[d.ns.ui('DateTimeField').uri]=d.widgets.field[d.ns.ui('TimeField').uri]=d.widgets.field[d.ns.ui('NumericField').uri]=d.widgets.field[d.ns.ui('IntegerField').uri]=d.widgets.field[d.ns.ui('DecimalField').uri]=d.widgets.field[d.ns.ui('FloatField').uri]=d.widgets.field[d.ns.ui('TextField').uri]=d.widgets.field[d.ns.ui('SingleLineTextField').uri]=d.widgets.field[d.ns.ui('NamedNodeURIField').uri]=function(t,n,a,r,i,o,s){var l=d.ns.ui,c=d.store,u=t.createElement('tr');n.appendChild(u);var f=t.createElement('td');f.setAttribute('class','formFieldName'),f.setAttribute('style','  vertical-align: middle;'),u.appendChild(f);var m=t.createElement('td');m.setAttribute('class','formFieldValue'),u.appendChild(m);var h=c.any(i,l('property'));if(!h)return u.appendChild(t.createTextNode('Error: No property given for text field: '+i)),u;f.appendChild(d.widgets.fieldLabel(t,h,i));var g=d.widgets.bottomURI(i),b=d.widgets.fieldParams[g];void 0===b&&(b={});var y=b.style||'font-size: 100%; margin: 0.1em; padding: 0.1em;',w=t.createElement('input');m.appendChild(w),w.setAttribute('type',b.type?b.type:'text');var v=c.any(i,l('size'));w.setAttribute('size',v?''+v:b.size?''+b.size:'20');var x=c.any(i,l('maxLength'));w.setAttribute('maxLength',x?''+x:'4096'),o=o||d.widgets.fieldStore(r,h,o);var _=c.any(r,h,void 0,o);return _||(_=c.any(i,l('default')),_&&c.add(r,h,_,o)),_&&_.uri&&b.uriPrefix?w.value=decodeURIComponent(_.uri.replace(b.uriPrefix,'')).replace(/ /g,''):_&&(w.value=_.value||_.uri),w.setAttribute('style',y),w.addEventListener('keyup',function(t){b.pattern&&w.setAttribute('style',y+(w.value.match(b.pattern)?'color: green;':'color: red;'))},!0),w.addEventListener('change',function(n){if(!b.pattern||w.value.match(b.pattern)){w.disabled=!0,w.setAttribute('style',y+'color: gray;');var a=c.statementsMatching(r,h),i;b.namedNode?i=c.sym(w.value):b.uriPrefix?(i=encodeURIComponent(w.value.replace(/ /g,'')),i=c.sym(b.uriPrefix+w.value)):b.dt?i=new $rdf.Literal(w.value.trim(),void 0,d.ns.xsd(b.dt)):i=new $rdf.Literal(w.value);var l=$rdf.st(r,h,i,o);c.updater.update(a,l,function(n,a,r){a?(w.disabled=!1,w.setAttribute('style',y)):u.appendChild(d.widgets.errorMessageBlock(t,r)),s(a,r)})}},!0),u},d.widgets.field[d.ns.ui('MultiLineTextField').uri]=function(t,n,a,r,i,o,s){var l=d.ns.ui,c=d.store,u=c.any(i,l('property'));if(!u)return d.widgets.errorMessageBlock(t,'No property to text field: '+i);n.appendChild(d.widgets.fieldLabel(t,u,i)),o=d.widgets.fieldStore(r,u,o);var f=d.widgets.makeDescription(t,c,r,u,o,s);return n.appendChild(f),f},d.widgets.field[d.ns.ui('BooleanField').uri]=function(t,n,a,r,o,s,c){var u=d.ns.ui,f=d.store,m=f.any(o,u('property'));if(!m)return n.appendChild(d.widgets.errorMessageBlock(t,'No property to boolean field: '+o));var h=f.any(o,u('label'));h||(h=l.label(m,!0)),s=d.widgets.fieldStore(r,m,s);var g=f.any(r,m);void 0===g&&(g=!1);var b=$rdf.st(r,m,!0,s),y=$rdf.st(r,m,!1,s),w=i(t,f,h,y,b,o,s);return n.appendChild(w),w},d.widgets.field[d.ns.ui('Classifier').uri]=function(t,n,a,r,i,o,s){var l=d.store,c=d.ns.ui,u=l.any(i,c('category'));if(!u)return d.widgets.errorMessageBlock(t,'No category for classifier: '+i);d.log.debug('Classifier: store='+o);var f=function t(n,a){return n?s(n,a):s(n,a)},m=d.widgets.makeSelectForNestedCategory(t,l,r,u,o,f);return n.appendChild(m),m},d.widgets.field[d.ns.ui('Choice').uri]=function(t,n,a,r,i,o,s){function c(n,i){x=m.any(r,w),d.widgets.fieldFunction(t,_)(t,y,a,x,_,o,s)}var u=d.ns.ui,f=d.ns,m=d.store,h=t.createElement('tr'),g;n.appendChild(h);var b=t.createElement('td');h.appendChild(b);var y=t.createElement('td');h.appendChild(y);var w=m.any(i,u('property'));if(!w)return d.widgets.errorMessageBlock(t,'No property for Choice: '+i);b.appendChild(d.widgets.fieldLabel(t,w,i));var v=m.any(i,u('from'));if(!v)return d.widgets.errorMessageBlock(t,'No \'from\' for Choice: '+i);var _=m.any(i,u('use')),k=[],C={multiple:A,nullLabel:I,disambiguate:!1},E;for(var T in k=m.each(void 0,f.rdf('type'),v),m.findMembersNT(v))k.push(m.fromNT(T));if(v.sameTerm(f.rdfs('Class')))for(g in d.widgets.allClassURIs())k.push(m.sym(g));else if(v.sameTerm(f.rdf('Property'))){for(g in E=d.widgets.propertyTriage(),E.op)k.push(m.fromNT(g));for(g in E.dp)k.push(m.fromNT(g));C.disambiguate=!0}else if(v.sameTerm(f.owl('ObjectProperty'))){for(g in E=d.widgets.propertyTriage(),E.op)k.push(m.fromNT(g));C.disambiguate=!0}else if(v.sameTerm(f.owl('DatatypeProperty'))){for(g in E=d.widgets.propertyTriage(),E.dp)k.push(m.fromNT(g));C.disambiguate=!0}var x=m.any(r,w),A=!1,S=d.widgets.sortByLabel(k),I='--'+l.label(w)+'-?';m.any(i,u('canMintNew'))&&(C.mint='* New *',C.subForm=_);var N=d.widgets.makeSelectForOptions(t,m,r,w,S,C,o,s);return y.appendChild(N),x&&_&&c(!0,''),h},d.widgets.fieldParams[d.ns.ui('Comment').uri]={element:'p',style:'padding: 0.1em 1.5em; color: brown; white-space: pre-wrap;'},d.widgets.fieldParams[d.ns.ui('Heading').uri]={element:'h3',style:'font-size: 110%; color: brown;'},d.widgets.field[d.ns.ui('Comment').uri]=d.widgets.field[d.ns.ui('Heading').uri]=function(t,n,a,r,i,o,s){var l=d.ns.ui,c=d.store,u=c.any(i,l('contents'));u||(u='Error: No contents in comment field.');var f=d.widgets.bottomURI(i),m=d.widgets.fieldParams[f];void 0===m&&(m={});;var h=t.createElement('div');n.appendChild(h);var g=h.appendChild(t.createElement(m.element));g.textContent=u;var b=c.any(i,l('style'));return void 0===b&&(b=m.style?m.style:''),b&&g.setAttribute('style',b),h},d.widgets.openHrefInOutlineMode=function(t){t.preventDefault(),t.stopPropagation();var n=l.getTarget(t),a=n.getAttribute('href');a||console.log('No href found \n'),d.outline?d.outline.GotoSubject(d.store.sym(a),!0,void 0,!0,void 0):window&&window.UI&&window.UI.outline?window.UI.outline.GotoSubject(d.store.sym(a),!0,void 0,!0,void 0):console.log('ERROR: Can\'t access outline manager in this config')},d.widgets.defaultAnnotationStore=function(t){if(void 0!==t.uri){var n=t.uri;if('http://'===n.slice(0,7)){n=n.slice(7);var a=n.indexOf('#');if(0<=a)n=n.slice(0,a);else{var r=n.lastIndexOf('/');if(0>r)return;n=n.slice(0,r)}return d.store.sym('http://tabulator.org/wiki/annnotation/'+n)}}},d.widgets.fieldStore=function(t,n,a){var r=d.store.statementsMatching(t,n);return 0===r.length?a:0<r.length&&r[0].why.uri&&d.store.updater.editable(r[0].why.uri,d.store)?d.store.sym(r[0].why.uri):null},d.widgets.allClassURIs=function(){var t={};return d.store.statementsMatching(void 0,d.ns.rdf('type'),void 0).map(function(n){n.object.uri&&(t[n.object.uri]=!0)}),d.store.statementsMatching(void 0,d.ns.rdfs('subClassOf'),void 0).map(function(n){n.object.uri&&(t[n.object.uri]=!0),n.subject.uri&&(t[n.subject.uri]=!0)}),d.store.each(void 0,d.ns.rdf('type'),d.ns.rdfs('Class')).map(function(n){n.uri&&(t[n.uri]=!0)}),t},d.widgets.propertyTriage=function(){var t={},n=d.store,a={},r={},o=0,s=0,l=0,c=n.predicateIndex;for(var u in c){var f=c[u][0].object;'Literal'===f.termType?(a[u]=!0,s++):(r[u]=!0,o++)}for(var m=n.each(void 0,d.ns.rdf('type'),d.ns.rdf('Property')),h=0;h<m.length;h++)u=m[h].toNT(),d.log.debug('propertyTriage: unknown: '+u),r[u]||a[u]||(a[u]=!0,r[u]=!0,l++);return t.op=r,t.dp=a,d.log.info('propertyTriage: '+o+' non-lit, '+s+' literal. '+l+' unknown.'),t},d.widgets.fieldLabel=function(t,n,a){var r=d.store.any(a,d.ns.ui('label'));if(r||(r=l.label(n,!0)),void 0===n)return t.createTextNode('@@Internal error: undefined property');var i=t.createElement('a');return n.uri&&i.setAttribute('href',n.uri),i.setAttribute('style','color: #3B5998; text-decoration: none;'),i.textContent=r,i},d.widgets.bottomURI=function(t){var n=d.store,a=n.findTypeURIs(t),r=n.bottomTypeURIs(a),i=[];for(var o in r)i.push(o);return i[0]},d.widgets.fieldFunction=function(t,n){var a=d.widgets.bottomURI(n),r=d.widgets.field[a];return d.log.debug('paneUtils: Going to implement field '+n+' of type '+a),r?r:function(){return d.widgets.errorMessageBlock(t,'No handler for field '+n+' of type '+a)}},d.widgets.editFormButton=function(t,n,a,r,i){var o=t.createElement('button');return o.setAttribute('type','button'),o.innerHTML='Edit '+l.label(d.ns.ui('Form')),o.addEventListener('click',function(s){var l=d.widgets.appendForm(t,n,{},a,d.ns.ui('FormForm'),r,i);l.setAttribute('style',d.ns.ui('FormForm').sameTerm(a)?'background-color: #fee;':'background-color: #ffffe7;'),n.removeChild(o)},!0),o},d.widgets.linkButton=function(t,n){var a=t.createElement('button');return a.setAttribute('type','button'),a.textContent='Goto '+l.label(n),a.addEventListener('click',function(t){d.outline.GotoSubject(n,!0,void 0,!0,void 0)},!0),a},d.widgets.removeButton=function(t,n){var a=t.createElement('button');return a.setAttribute('type','button'),a.textContent='\u2715',a.addEventListener('click',function(t){n.parentNode.removeChild(n)},!0),a},d.widgets.appendForm=function(t,n,a,r,i,o,s){return d.widgets.fieldFunction(t,i)(t,n,a,r,i,o,s)},d.widgets.propertiesForClass=function(t,n){var a=d.ns,r=t.each(void 0,a.rdf('range'),n);[a.rdfs('comment'),a.dc('title'),a.foaf('name'),a.foaf('homepage')].map(function(t){r.push(t)});var o=t.each(void 0,a.rdf('type'),n);60<o.length&&(o=o.slice(0,60));for(var s={},l=0;l<(60<o.length?60:o.length);l++)t.statementsMatching(o[l],void 0,void 0).map(function(t){s[t.predicate.uri]=!0});r.map(function(t){s[t.uri]=!0});var i=[];for(var c in s)i.push(t.sym(c));return i},d.widgets.findClosest=function t(n,a,r){for(var o=[n.sym(a)];0<o.length;){var s=o.shift(),l=n.each(s,r);if(d.log.debug('Lists for '+s+', '+r+': '+l.length),0!==l.length)return l;for(var c=n.each(s,d.ns.rdfs('subClassOf')),u=0;u<c.length;u++)o.push(c[u]),d.log.debug('findClosest: add super: '+c[u])}return[]},d.widgets.formsFor=function(n){var a=d.ns,r=d.store;d.log.debug('formsFor: subject='+n);var i=r.findTypeURIs(n),t;for(t in i)d.log.debug('   type: '+t);var o=r.bottomTypeURIs(i),s=[];for(var l in o)d.log.debug('formsFor: trying bottom type ='+l),s=s.concat(d.widgets.findClosest(r,l,a.ui('creationForm'))),s=s.concat(d.widgets.findClosest(r,l,a.ui('annotationForm')));return d.log.debug('formsFor: subject='+n+', forms='),s},d.widgets.sortBySequence=function(t){var n=t.map(function(t){var n=d.store.any(t,d.ns.ui('sequence'));return[n||9999,t]});return n.sort(function(t,n){return t[0]-n[0]}),n.map(function(t){return t[1]})},d.widgets.sortByLabel=function(t){var n=t.map(function(t){return[l.label(t).toLowerCase(),t]});return n.sort(),n.map(function(t){return t[1]})},d.widgets.newButton=function(t,n,a,r,i,o,s,c){var u=t.createElement('button');return u.setAttribute('type','button'),u.innerHTML='New '+l.label(i),u.addEventListener('click',function(l){u.parentNode.appendChild(d.widgets.promptForNew(t,n,a,r,i,o,s,c))},!1),u},d.widgets.promptForNew=function(t,n,a,r,i,o,s,c){var u=d.ns,m=t.createElement('form');if(!o){var h=d.widgets.findClosest(n,i.uri,u.ui('creationForm'));if(0===h.length){var g=m.appendChild(t.createElement('p'));g.textContent='I am sorry, you need to provide information about a '+l.label(i)+' but I don\'t know enough information about those to ask you.';var y=m.appendChild(t.createElement('button'));return y.setAttribute('type','button'),y.setAttribute('style','float: right;'),y.innerHTML='Goto '+l.label(i),y.addEventListener('click',function(t){d.outline.GotoSubject(i,!0,void 0,!0,void 0)},!1),m}d.log.debug('lists[0] is '+h[0]),o=h[0]}d.log.debug('form is '+o),m.setAttribute('style','border: 0.05em solid brown; color: brown'),m.innerHTML='<h3>New '+l.label(i)+'</h3>';var b=d.widgets.fieldFunction(t,o),w=d.widgets.newThing(s),v=!1,x=function o(l,f){if(!l)return c(l,f);var h=[];a&&!n.holds(a,r,w,s)&&h.push($rdf.st(a,r,w,s)),a&&!n.holds(w,u.rdf('type'),i,s)&&h.push($rdf.st(w,u.rdf('type'),i,s)),h.length?d.store.updater.update([],h,_):c(!0,f),v||(v=m.appendChild(d.widgets.linkButton(t,w)))},_=function t(n,a,r){return c(a,r)};d.log.info('paneUtils Object is '+w);var k=b(t,m,{},w,o,s,x),f=d.widgets.removeButton(t,k);return f.setAttribute('style','float: right;'),m.AJAR_subject=w,m},d.widgets.makeDescription=function(t,n,a,r,i,o){var s=t.createElement('div'),c=n.statementsMatching(a,r,void 0);if(1<c.length)return d.widgets.errorMessageBlock(t,'Should not be '+c.length+' i.e. >1 '+r+' of '+a);var u=c.length?c[0].object.value:void 0,f=t.createElement('textarea');s.appendChild(f),f.rows=u?u.split('\n').length+2:2,f.cols=80;var m='font-size:100%; white-space: pre-wrap; background-color: white; border: 0.07em solid gray; padding: 1em 0.5em; margin: 1em 1em;';f.setAttribute('style',m),c.length?f.value=u:f.select(),s.refresh=function(){var t=n.any(a,r);t&&t.value!==f.value&&(f.value=t.value)};var h=t.createElement('br');s.appendChild(h);var g=t.createElement('input');g.setAttribute('type','submit'),g.disabled=!0,g.setAttribute('style','visibility: hidden; float: right;'),g.value='Save '+l.label(r),s.appendChild(g);var b=function l(c){g.disabled=!0,g.setAttribute('style','visibility: hidden; float: right;'),f.disabled=!0,f.setAttribute('style',m+'color: gray;');var u=n.statementsMatching(a,r),h=$rdf.st(a,r,f.value,i);d.store.updater.update(u,h,function(n,a,r){a?(f.setAttribute('style',m+'color: black;'),f.disabled=!1):s.appendChild(d.widgets.errorMessageBlock(t,'Error (while saving change to '+i.uri+'): '+r)),o&&o(a,r)})};return f.addEventListener('keyup',function(t){f.setAttribute('style',m+'color: green;'),g&&(g.disabled=!1,g.setAttribute('style','float: right;'))},!0),f.addEventListener('change',b,!0),g.addEventListener('click',b,!1),s},d.widgets.makeSelectForOptions=function(t,a,r,o,s,u,f,m){d.log.debug('Select list length now '+s.length);for(var h=0,n={},g=0,i;g<s.length;g++)i=s[g],i.uri in n||(n[i.uri]=!0,h++);if(0==h&&!u.mint)return d.widgets.errorMessageBlock(t,'Can\'t do selector with no options, subject= '+r+' property = '+o+'.');d.log.debug('makeSelectForOptions: store='+f);var b=function t(){return y={},o.sameTerm(d.ns.rdf('type'))?y=a.findTypeURIs(r):a.each(r,o).map(function(t){y[t.uri]=!0}),y},y=b(),w=function n(s){function l(t,n){m(t,n)}v.disabled=!0;for(var c=[],h=[],g=function n(i){a.holds(r,o,i,f)&&c.push($rdf.st(r,o,i,f))},w=0,i;w<v.options.length;w++){if(i=v.options[w],i.selected&&i.AJAR_mint){var x;if(u.mintClass){var _=d.widgets.promptForNew(t,a,r,o,u.mintClass,null,f,function(t,n){t||m(t,n)});v.parentNode.appendChild(_),x=_.AJAR_subject}else x=d.widgets.newThing(f);h.push($rdf.st(r,o,x,f)),u.mintStatementsFun&&(h=h.concat(u.mintStatementsFun(x)))}i.AJAR_uri&&(i.selected&&!(i.AJAR_uri in y)&&h.push($rdf.st(r,o,a.sym(i.AJAR_uri),f)),!i.selected&&i.AJAR_uri in y&&g(a.sym(i.AJAR_uri)),i.selected&&(v.currentURI=i.AJAR_uri))}for(var k=v.subSelect;k&&k.currentURI;)g(a.sym(k.currentURI)),k=k.subSelect;for(k=v.superSelect;k&&k.currentURI;)g(a.sym(k.currentURI)),k=k.superSelect;d.log.info('selectForOptions: stote = '+f),d.store.updater.update(c,h,function(n,a,r){if(y=b(),a&&(v.disabled=!1,x)){var i=d.widgets.fieldFunction(t,u.subForm);i(t,v.parentNode,{},x,u.subForm,f,l)}m&&m(a,r)})},v=t.createElement('select');for(var x in v.setAttribute('style','margin: 0.6em 1.5em;'),u.multiple&&v.setAttribute('multiple','true'),v.currentURI=null,v.refresh=function(){y=b();for(var t=0,n;t<v.children.length;t++)n=v.children[t],n.AJAR_uri&&(n.selected=n.AJAR_uri in y);v.disabled=!1},n){var _=a.sym(x),c=t.createElement('option');u.disambiguate?c.appendChild(t.createTextNode(l.labelWithOntology(_,!0))):c.appendChild(t.createTextNode(l.label(_,!0)));var k=a.any(_,a.sym('http://www.w3.org/ns/ui#backgroundColor'));k&&c.setAttribute('style','background-color: '+k.value+'; '),c.AJAR_uri=x,x in y&&(c.setAttribute('selected','true'),v.currentURI=x),v.appendChild(c)}if(u.mint){var C=t.createElement('option');C.appendChild(t.createTextNode(u.mint)),C.AJAR_mint=!0,v.insertBefore(C,v.firstChild)}if(null==v.currentURI&&!u.multiple){var E=t.createElement('option');E.appendChild(t.createTextNode(u.nullLabel)),v.insertBefore(E,v.firstChild),E.selected=!0}return v.addEventListener('change',w,!1),v},d.widgets.makeSelectForCategory=function(t,n,a,r,i,o){var s=d.log,l=n.any(r,d.ns.owl('disjointUnionOf')),c=!1,u;return l?u=l.elements:(u=n.each(void 0,d.ns.rdfs('subClassOf'),r),c=!0),s.debug('Select list length '+u.length),0===u.length?d.widgets.errorMessageBlock(t,'Can\'t do '+(c?'multiple ':'')+'selector with no subclasses of category: '+r):1===u.length?d.widgets.errorMessageBlock(t,'Can\'t do '+(c?'multiple ':'')+'selector with only 1 subclass of category: '+r+':'+u[1]):d.widgets.makeSelectForOptions(t,n,a,d.ns.rdf('type'),u,{multiple:c,nullPrompt:'--classify--'},i,o)},d.widgets.makeSelectForNestedCategory=function(t,n,a,r,i,o){var s=t.createElement('span'),l=null,c=function t(n,a){n&&f(),o(n,a)},u;u=d.widgets.makeSelectForCategory(t,n,a,r,i,c),s.appendChild(u);var f=function r(){l&&(s.removeChild(l),l=null),u.currentURI&&n.any(n.sym(u.currentURI),d.ns.owl('disjointUnionOf'))&&(l=d.widgets.makeSelectForNestedCategory(t,n,a,n.sym(u.currentURI),i,o),u.subSelect=l.firstChild,u.subSelect.superSelect=u,s.appendChild(l))};return f(),s},d.widgets.selectorPanel=function(t,n,a,r,i,o,s,l,c){return d.widgets.selectorPanelRefresh(t.createElement('div'),t,n,a,r,i,o,s,l,c)},d.widgets.selectorPanelRefresh=function(t,n,a,r,o,s,l,c,u,f){var m='border: 0.1em solid #ddd; border-bottom: none; width: 95%; height: 2em; padding: 0.5em;',h=null;t.innerHTML='';for(var g=function t(i,l){var g=function t(){var n=s?a.each(void 0,o,l):a.each(l,o);_.setAttribute('class',0===n.length?'hideTillHover':''),w.setAttribute('src',c.connectIcon||d.icons.iconBase+'noun_25830.svg'),w.setAttribute('title',n.length?n.length:'attach')},b=d.widgets.index.twoLine.widgetForClass(r),y,w;y=b(n,l),y.setAttribute('style',m);var v=n.createElement('div');v.setAttribute('class','hideTillHover'),v.setAttribute('style','float:right; width:10%');var x=n.createElement('a');x.setAttribute('href',l.uri),x.setAttribute('style','float:right'),v.appendChild(x).textContent='>',i.appendChild(v);var _=n.createElement('div');return _.setAttribute('style',(s?'float:left;':'float:right;')+' width:30px;'),w=n.createElement('img'),g(),_.appendChild(w),i.appendChild(_),y.addEventListener('click',function(t){h===y?(y.setAttribute('style',m),h=null):(h&&h.setAttribute('style',m),y.setAttribute('style',m+'background-color: #ccc; color:black;'),h=y),u(l,t,h===y),g()},!1),w.addEventListener('click',function(t){f(l,t,s,g)},!1),i.appendChild(y),i},b=0,i;b<l.length;b++)i=n.createElement('div'),t.appendChild(i),g(i,l[b]);return t},d.widgets.index={},d.widgets.index.line={},d.widgets.index.twoLine={},d.widgets.index.twoLine['']=function(t,n){var a=t.createElement('div');return a.textContent=l.label(n),a},d.widgets.index.twoLine.widgetForClass=function(t){var n=d.widgets.index.twoLine[t.uri],a=d.store;if(n)return n;var r=a.findSuperClassesNT(t);for(var i in r)if(n=d.widgets.index.twoLine[a.fromNT(i).uri],n)return n;return d.widgets.index.twoLine['']},d.widgets.index.twoLine['http://www.w3.org/2000/10/swap/pim/qif#Transaction']=function(t,n){var a='',r=function t(r){var i=d.store.any(n,d.ns.qu(r));return i||(a+='@@ No value for '+r+'! '),i?l.escapeForXML(i.value):'?'},i=t.createElement('table');return i.innerHTML='<tr><td colspan="2">'+r('payee')+'</td></tr>\n<tr><td><td>'+r('date').slice(0,10)+'</td><td style="text-align: right;">'+r('amount')+'</td></tr>',a&&(i.innerHTML='<tr><td><a href="'+l.escapeForXML(n.uri)+'">'+l.escapeForXML(a)+'</a></td></tr>'),i},d.widgets.index.twoLine['http://www.w3.org/ns/pim/trip#Trip']=function(t,n){var a=function t(a){var r=d.store.any(n,a);return r?l.escapeForXML(r.value):'?'},r=t.createElement('table');return r.innerHTML='<tr><td colspan="2">'+a(d.ns.dc('title'))+'</td></tr>\n<tr style="color: #777"><td><td>'+a(d.ns.cal('dtstart'))+'</td><td>'+a(d.ns.cal('dtend'))+'</td></tr>',r},d.widgets.addStyleSheet=function(t,n){for(var a=t.querySelectorAll('link'),r=0;r<a.length;r++)if('stylesheet'===(a[r].getAttribute('rel')||'')&&(a[r].getAttribute('href')||'')===n)return;var i=t.createElement('link');i.setAttribute('rel','stylesheet'),i.setAttribute('type','text/css'),i.setAttribute('href',n),t.getElementsByTagName('head')[0].appendChild(i)},d.widgets.isAudio=function(t){return d.widgets.isImage(t,'audio')},d.widgets.isVideo=function(t){return d.widgets.isImage(t,'video')},d.widgets.isImage=function(n,a){var r={audio:'http://purl.org/dc/dcmitype/Sound',image:'http://purl.org/dc/dcmitype/Image',video:'http://purl.org/dc/dcmitype/MovingImage'},i=a||'image',o=d.store.findTypeURIs(n),s=$rdf.Util.mediaTypeClass(i+'/*').uri.split('*')[0];for(var l in o)if(l.startsWith(s))return!0;return!!(r[i]in o)}},function(t,n,a){'use strict';function r(){return'v'+M++}function i(){M=0}function o(){if(D){var t=D,n=new t;return function(t,a,r,i){t=+(t||0.3),r=r||'sine','function'!=typeof i&&(i=function t(){});var o=n.createOscillator();o.type=r,o.frequency.value=a||256,o.connect(n.destination),o.start(0),o.stop(t)}}}function s(t){t=t.uri||t;var n=function t(n){return n.split('').reduce(function(t,n){return t=(t<<5)-t+n.charCodeAt(0),t&t},0)};return'#'+(12632256|16777215&n(t)).toString(16)}function d(){return'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g,function(t){var n=0|16*Math.random(),a='x'===t?n:8|3&n;return a.toString(16)})}function l(t,n,a){var r,o,s;for(s=0;s<t.children.length;s++)o=t.children[s],o.trashMe=!0;for(var i=0,d;i<n.length;i++){for(d=n[i],r=!1,s=0;s<t.children.length;s++)if(o=t.children[s],o.subject&&o.subject.sameTerm(d)){o.trashMe=!1,r=!0;break}if(!r){var l=a(d);if(i>=n.length)t.appendChild(l);else{var c=t.children[i];t.insertBefore(l,c)}l.subject=d}}for(s=0;s<t.children.length;s++)o=t.children[s],o.trashMe&&t.removeChild(o)}function c(t){var n=''+t+'\n',a;if(!t.stack)return n+'No stack available.\n';var r=t.stack.toString().split('\n'),i=[];for(a=0;a<r.length;a++){var o=r[a];if(-1<o.indexOf('ecmaunit.js'))break;'('===o.charAt(0)&&(o='function'+o);var s=o.split('@');i.push(s)}for(a=0;a<i.length;a++)n+='  '+i[a][1]+'\n    '+i[a][0];return n}function u(t){var n=t.childNodes,a=n.length,r;for(r=a-1;0<=r;r--)t.removeChild(n[r]);return t}function f(t){var n;return t=t||window.event,t.target?n=t.target:t.srcElement&&(n=t.srcElement),3===n.nodeType&&(n=n.parentNode),n}function m(t,n){var a;for(a=t;a;a=a.parentNode)try{if(a.tagName===n)return a}catch(t){return}}function h(t,n){var a,r;for(a=n;a&&1===a.nodeType;a=a.parentNode)if(r=a.getAttribute('about'),r)return t.fromNT(r);R.log.debug('getAbout: No about found')}function g(t){var n=t.parentNode,a=n?n.AJAR_statement:void 0,r=a?t.className:'';return'pred'===r||'pred selected'===r?a.predicate:'obj'===r||'obj selected'===r?n.AJAR_inverse?a.subject:a.object:''===r||'selected'===r?h(R.store,t):'undetermined selected'===r?t.nextSibling?a.predicate:n.AJAR_inverse?a.subject:a.object:void 0}function b(t,n){var a=t.createElement('script');return a.setAttribute('type','text/javascript'),a.setAttribute('src',n),a}function y(t){var n=window.onload;window.onload='function'==typeof window.onload?function(){n(),t()}:t}function w(t){var n=t.ownerDocument,a=n.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return[r.left-a.left,r.top-a.top]}function v(t,n,a,r){function i(){r.scrollBy(0,s/10),l++,10==l&&r.clearInterval(d)}r||(r=window);var o=w(t)[1],s=o-52-r.scrollY;if(n)return a?void r.scrollBy(0,o+t.clientHeight-(r.scrollY+r.innerHeight)):void r.scrollBy(0,s);var d=r.setInterval(i,50),l=0}function x(t,n,a,r){r||(r=document);var i=r.createElement('img');return i.setAttribute('src',t),i.addEventListener('copy',function(t){t.clipboardData.setData('text/plain',''),t.clipboardData.setData('text/html',''),t.preventDefault()}),'undefined'!=typeof a&&i.setAttribute('title',a),i}function _(t){var n=t;0<='#/'.indexOf(n[n.length-1])&&(n=n.slice(0,-1));var a=[];for(var r in this.prefixes)a[this.prefixes[r]]=r;var o=function t(n){return'ns'!==n&&(d=n,!0)},s=n.lastIndexOf('#'),d,l;for(0<=s&&(n=n.slice(s-1));;){var i=n.lastIndexOf('/');for(0<=i&&(n=n.slice(i+1)),l=0;l<n.length&&this.prefixchars.indexOf(n[l]);)l++;if(n=n.slice(0,l),6>n.length&&o(n))return d;if(o(n.slice(0,3)))return d;if(o(n.slice(0,2)))return d;if(o(n.slice(0,4)))return d;if(o(n.slice(0,1)))return d;if(o(n.slice(0,5)))return d;for(l=0;;l++)if(o(n.slice(0,3)+l))return d}}function k(t){if(t.uri===void 0)return'??';var n=t.uri,a=[],r=n.lastIndexOf('#'),i;if(0<=r)n=n.slice(0,r+1);else if(r=n.lastIndexOf('/'),0<=r)n=n.slice(0,r+1);else return t.uri+'?!';for(var o in R.ns)a[R.ns[o]]=o;try{return a[n]}catch(t){}for(n=n.slice(0,-1);n;){if(r=n.lastIndexOf('/'),!(0<=r))return t.uri+'!?';if(i=n.slice(r+1),n=n.slice(0,r),'ns'!==i&&0>'0123456789'.indexOf(i[0]))return i}}function C(n,a){var r=R.store.findTypeURIs(n);return r[R.ns.rdf('Predicate').uri]||r[R.ns.rdfs('Class').uri]?E(n,a)+' ('+k(n)+')':E(n,a)}function E(t,n){function a(t){return n?t.slice(0,1).toUpperCase()+t.slice(1):t}function r(t){var n='';'/'===t.slice(-1)&&(t=t.slice(0,-1));for(var r=0;r<t.length;r++){if('_'===t[r]||'-'===t[r]){n+=' ';continue}n+=t[r],r+1<t.length&&t[r].toUpperCase()!==t[r]&&t[r+1].toLowerCase()!==t[r+1]&&(n+=' ')}return'has '===n.slice(0,4)&&(n=n.slice(4)),a(n)}var o;if('undefined'!=typeof tabulator&&tabulator.lb&&(o=tabulator.lb.label(t),o))return a(o.value);var d=R.store,l=d.any(t,R.ns.link('message'))||d.any(t,R.ns.vcard('fn'))||d.any(t,R.ns.foaf('name'))||d.any(t,R.ns.dct('title'))||d.any(t,R.ns.dc('title'))||d.any(t,R.ns.rss('title'))||d.any(t,R.ns.contact('fullName'))||d.any(t,d.sym('http://www.w3.org/2001/04/roadmap/org#name'))||d.any(t,R.ns.cal('summary'))||d.any(t,R.ns.foaf('nick'))||d.any(t,R.ns.rdfs('label'));if(l)return a(l.value);if('BlankNode'===t.termType)return'...';if('Collection'===t.termType)return'('+t.elements.length+')';var c=t.uri;if('undefined'==typeof c)return t.toString();try{c=c.split('/').map(decodeURIComponent).join('/')}catch(t){for(var u=c.length-3,i;0<u;u--)for(i='0123456789abcefABCDEF';'%'===c[u]&&0<=i.indexOf(c[u+1])&&0<=i.indexOf(c[u+2]);)c=c.slice(0,u)+_StringfromCharCode(parseInt(c.slice(u+1,u+3),16))+c.slice(u+3)}'#this'===c.slice(-5)?c=c.slice(0,-5):'#me'===c.slice(-3)&&(c=c.slice(0,-3));var f=c.indexOf('#');if(0<=f)return r(c.slice(f+1));'/foaf.rdf'===c.slice(-9)?c=c.slice(0,-9):'/foaf'===c.slice(-5)&&(c=c.slice(0,-5));var m=c.lastIndexOf('/',c.length-2);return 0<=m&&m<t.uri.length?r(c.slice(m+1)):a(decodeURIComponent(t.uri))}function T(t){return t.replace(/&/g,'&amp;').replace(/</g,'&lt;')}function A(t){return T(E(t))}function S(t,n){var a;if(n){var r=R.store.any(t,R.ns.owl('inverseOf'));if(r||(r=R.store.any(void 0,R.ns.owl('inverseOf'),t)),r)return A(r)}return a=A(t),n?'type'===a?'...':'is '+a+' of':a}function I(t,n){var a=t.predicate.compareTerm(n.predicate);return 0===a?t.object.compareTerm(n.object):a}function N(t,n){var a=t.predicate.compareTerm(n.predicate);return 0===a?t.subject.compareTerm(n.subject):a}function j(t){for(var a=t;!0;){if(a.getAttribute('predTR'))return a;if(a.previousSibling&&'TR'===a.previousSibling.nodeName)a=a.previousSibling;else return R.log.error('Could not find predParent'),t}}function L(t,n,a){function i(t,n){return d?new R.rdf.Statement(t,v.predicate,n):new R.rdf.Statement(n,v.predicate,t)}function o(t){return this.describe=function(n){return n+' = '+t.toNT()},this.test=function(n){return t.sameTerm(n)},this}var s=R.store,d=n.AJAR_inverse,l=null,c,u,f,m,h;for(m=n.parentNode;m;m=m.parentNode)if('undefined'!=typeof m.AJAR_statement){m.setAttribute('bla',m.AJAR_statement),m.AJAR_variable||L(t,m),f=m.AJAR_variable;var g=j(m);g.getAttribute('optionalSubqueriesIndex')&&(l=g.getAttribute('optionalSubqueriesIndex'),h=P[l]);break}h||(h=t.pat);var b=j(n),y=b.getAttribute('optional');if(y||(l?b.setAttribute('optionalSubqueriesIndex',l):b.removeAttribute('optionalSubqueriesIndex')),y){var w=s.formula();P.push(w),b.setAttribute('optionalSubqueriesIndex',P.length-1),h.optional.push(w),h=w}var v=n.AJAR_statement,x=n.AJAR_inverse?v.subject:v.object,_=!0;return x.isBlank&&a&&window.alert('You cannot constrain a query with a blank node. No constraint will be added.'),f||(_=!1,f=d?v.object:v.subject),u=n.AJAR_variable?n.AJAR_variable:s.variable(r()),t.vars.push(u),u.label=_?f.label:E(f),u.label+=' '+S(v.predicate,d),c=i(u,f),u.label=u.label.slice(0,1).toUpperCase()+u.label.slice(1),a&&(h.constraints[u]=new o(x)),R.log.info('Pattern: '+c),c.tr=n,n.AJAR_pattern=c,n.AJAR_variable=u,R.log.debug('Query pattern: '+c),h.statements.push(c),u}t.exports={addLoadEvent:y,AJARImage:x,ancestor:m,beep:o,clearVariableNames:i,emptyNode:u,escapeForXML:T,findPos:w,genUuid:d,getAbout:h,getEyeFocus:v,getTarget:f,getTerm:g,hashColor:s,include:b,label:E,labelForXML:A,labelWithOntology:C,makeQueryRow:L,newVariableName:r,ontologyLabel:k,predicateLabelForXML:S,predParentOf:j,RDFComparePredicateObject:I,RDFComparePredicateSubject:N,shortName:_,stackString:c,syncTableToArray:l};var R={log:a(25),ns:a(15),rdf:a(4),store:a(22)},M=0,D;'undefined'==typeof AudioContext?'undefined'!=typeof window&&(D=window.AudioContext||window.webkitAudioContext):D=AudioContext;var P=[]},function(t,n,a){'use strict';(function(t){function n(t,n,a){var r=null;if('undefined'!=typeof t.fetcher)r=t.fetcher;else return;if('NamedNode'===n.termType){var i=w(n.uri),o;if(0>n.uri.indexOf('#')){if(g(n.uri,'http://dbpedia.org/resource/Category:'))return;g(n.uri,'http://purl.org/dc/elements/1.1/')||g(n.uri,'http://purl.org/dc/terms/')?o='http://dublincore.org/2005/06/13/dcq':g(n.uri,'http://xmlns.com/wot/0.1/')?o='http://xmlns.com/wot/0.1/index.rdf':g(n.uri,'http://web.resource.org/cc/')&&(o='http://web.resource.org/cc/schema.rdf')}return(o&&(i=o),!(r&&'unrequested'!==r.getState(i)))?(o&&v.warn('Assuming server still broken, faking redirect of <'+n.uri+'> to <'+i+'>'),r.fetch(i,{referringTerm:a})):void 0}}function r(t,n,a){a||(a=0);var r=t.length;for(0>a&&(a=r+a);a<r;a++)if(t[a]===n)return a;return-1}function i(t,n){t.callbacks={};for(var a=n.length-1;0<=a;a--)t.callbacks[n[a]]=[];t.addHook=function(n){t.callbacks[n]||(t.callbacks[n]=[])},t.addCallback=function(n,a){t.callbacks[n].push(a)},t.removeCallback=function(n,a){for(var r=0;r<t.callbacks[n].length;r++)if(t.callbacks[n][r].name===a)return t.callbacks[n].splice(r,1),!0;return!1},t.insertCallback=function(n,a){t.callbacks[n].unshift(a)},t.fireCallbacks=function n(a,r){var i=[],o=[],s=t.callbacks[a].length,d,l;for(d=s-1;0<=d;d--)l=t.callbacks[a][d],l&&l.apply(t,r)&&i.push(l);for(d=i.length-1;0<=d;d--)o.push(i[d]);for(d=s;d<t.callbacks[a].length;d++)o.push(t.callbacks[a][d]);t.callbacks[a]=o}}function o(){return window.DOMParser?new DOMParser:!!window.ActiveXObject&&new ActiveXObject('Microsoft.XMLDOM')}function s(t,n){n=n||{};var a=[];'selfClosing'in n&&n.selfClosing.split(' ').forEach(function(t){a[t]=!0});var r=[];return'skipAttributes'in n&&n.skipAttributes.split(' ').forEach(function(t){r[t]=!0}),d(t,n,a,r)}function d(t,n,a,r){var o='',s=[!1],l;if('undefined'==typeof t.nodeType)return o;if(1===t.nodeType){if(t.hasAttribute('class')&&'classWithChildText'in n&&t.matches(n.classWithChildText.class))o+=t.querySelector(n.classWithChildText.element).textContent;else if(!('skipNodeWithClass'in n&&t.matches('.'+n.skipNodeWithClass))){var i=t.nodeName.toLowerCase();o+='<'+i;var c=[];for(l=t.attributes.length-1;0<=l;l--){var u=t.attributes[l];if(!(0<r.length&&r[u.name])&&!/^\d+$/.test(u.name)){if('class'===u.name&&'replaceClassItemWith'in n&&-1<u.value.split(' ').indexOf(n.replaceClassItemWith.source)){var f=new RegExp(n.replaceClassItemWith.source,'g');u.value=u.value.replace(f,n.replaceClassItemWith.target).trim()}'class'===u.name&&'skipClassWithValue'in n&&n.skipClassWithValue===u.value||c.push(u.name+'=\''+u.value.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/'/g,'&quot;')+'\'')}}if(0<c.length&&('sortAttributes'in n&&n.sortAttributes&&c.sort(function(t,n){return t.toLowerCase().localeCompare(n.toLowerCase())}),o+=' '+c.join(' ')),a[i])o+=' />';else{for(o+='>',o+='html'===i?'\n  ':'',s.push('style'===i||'script'===i),l=0;l<t.childNodes.length;l++)o+=d(t.childNodes[l]);s.pop(),o+='body'===i?'</'+i+'>\n':'</'+i+'>'}}}else if(8===t.nodeType)o+='<!--'+t.nodeValue+'-->';else if(3===t.nodeType||4===t.nodeType){var m=t.nodeValue.replace(/\n+$/,'');o+=s[s.length-1]?m:m.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;')}else console.log('Warning; Cannot handle serialising nodes of type: '+t.nodeType),console.log(t);return o}function l(){var t=new Date,n=t.getYear()+1900,a=t.getMonth()+1,r=t.getDate(),i=t.getUTCHours(),o=t.getUTCMinutes(),s=t.getSeconds();return 10>a&&(a='0'+a),10>r&&(r='0'+r),10>i&&(i='0'+i),10>o&&(o='0'+o),10>s&&(s='0'+s),n+'-'+a+'-'+r+'T'+i+':'+o+':'+s+'Z'}function c(t,n,a,r){var i=function t(n){return'BlankNode'===n.termType?null:n},o=function t(n){var r=a.statementsMatching(n).map(function(t){return''+i(t.subject)+' '+i(t.predicate)+' '+i(t.object)}).concat(a.statementsMatching(void 0,void 0,n).map(function(t){return''+i(t.subject)+' '+i(t.predicate)+' '+i(t.object)}));return r.sort(),r.join('\n')};return'BlankNode'===t.termType&&'BlankNode'===n.termType?0===t.compareTerm(n)?0:o(t)>o(n)?1:o(t)<o(n)?-1:t.compareTerm(n):r&&t.uri&&n.uri?(r[t.uri]||t.uri).localeCompare(r[n.uri]||n.uri):t.compareTerm(n)}function u(t,n,a,r){return c(t.subject,n.subject,a,r)||c(t.predicate,n.predicate,a,r)||c(t.object,n.object,a,r)}function f(t){var n=document.createElement('div');n.textContent=t,document.body.appendChild(n)}function m(n,r){var i;if(r=r||{},'undefined'!=typeof t&&t&&t.exports){var o=a(51).DOMParser,s=new o().parseFromString(n,r.contentType||'application/xhtml+xml');return s}return i='undefined'!=typeof window&&window.DOMParser?new window.DOMParser:new o,i.parseFromString(n,'application/xml')}function h(t,n){for(var a=0;a<t.length;a++)if(t[a].subject.sameTerm(n.subject)&&t[a].predicate.sameTerm(n.predicate)&&t[a].object.sameTerm(n.object)&&t[a].why.sameTerm(n.why))return void t.splice(a,1);throw new Error('RDFArrayRemove: Array did not contain '+n+' '+n.why)}function g(t,n){return t.slice(0,n.length)===n}function b(t,n){for(var a=t.split('%s'),r='',o=0;o<n.length;o++)n[o]+='',r+=a[o]+n[o];return r+a.slice(n.length).join()}function y(t){var n=''+t+'\n';if(!t.stack)return n+'No stack available.\n';for(var a=t.stack.toString().split('\n'),r=[],o=0,i;o<a.length&&(i=a[o],!(-1<i.indexOf('ecmaunit.js')));o++){'('==i.charAt(0)&&(i='function'+i);var s=i.split('@');r.push(s)}for(var o=0;o<r.length;o++)n+='  '+r[o][1]+'\n    '+r[o][0];return n}var w=a(16).docpart,v=a(42),x=a(10);t.exports.AJAR_handleNewTerm=n,t.exports.ArrayIndexOf=r,t.exports.callbackify=i,t.exports.dtstamp=l,t.exports.DOMParserFactory=o,t.exports.domToString=s,t.exports.dumpNode=d,t.exports.heavyCompare=c,t.exports.heavyCompareSPO=u,t.exports.output=f,t.exports.parseXML=m,t.exports.RDFArrayRemove=h,t.exports.stackString=y,t.exports.string_startswith=g,t.exports.string={},t.exports.string.template=b,t.exports.uri=a(16),t.exports.log=v,t.exports.mediaTypeClass=function(t){return t=t.split(';')[0].trim(),new x('http://www.w3.org/ns/iana/media-types/'+t+'#Resource')},t.exports.linkRelationProperty=function(t){return new x('http://www.w3.org/ns/iana/link-relations/relation#'+t.trim())}}).call(n,a(9)(t))},function(t,n,a){var r=a(37),i=a(163),o=a(115),s=Object.defineProperty;n.f=a(38)?Object.defineProperty:function t(n,a,d){if(r(n),a=o(a,!0),r(d),i)try{return s(n,a,d)}catch(t){}if('get'in d||'set'in d)throw TypeError('Accessors not supported!');return'value'in d&&(n[a]=d.value),n}},function(t,n,a){(function(t){(function(t,n){'use strict';function o(t,n){if(!t)throw new Error(n||'Assertion failed')}function r(t,n){t.super_=n;var a=function(){};a.prototype=n.prototype,t.prototype=new a,t.prototype.constructor=t}function d(t,n,a){return d.isBN(t)?t:void(this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&(('le'===n||'be'===n)&&(a=n,n=10),this._init(t||0,n||10,a||'be')))}function s(t,n,a){for(var o=0,r=_Mathmin(t.length,a),s=n,i;s<r;s++)i=t.charCodeAt(s)-48,o<<=4,o|=49<=i&&54>=i?i-49+10:17<=i&&22>=i?i-17+10:15&i;return o}function l(t,n,a,o){for(var s=0,r=_Mathmin(t.length,a),d=n,i;d<r;d++)i=t.charCodeAt(d)-48,s*=o,s+=49<=i?i-49+10:17<=i?i-17+10:i;return s}function c(t){for(var n=Array(t.bitLength()),a=0;a<n.length;a++){var r=0|a/26,i=a%26;n[a]=(t.words[r]&1<<i)>>>i}return n}function i(t,n,o){o.negative=n.negative^t.negative;var s=0|t.length+n.length;o.length=s,s=0|s-1;var d=0|t.words[0],a=0|n.words[0],l=d*a,r=67108863&l,c=0|l/67108864;o.words[0]=r;for(var u=1;u<s;u++){for(var f=c>>>26,m=67108863&c,h=_Mathmin(u,n.length-1),g=_Mathmax(0,u-t.length+1),b;g<=h;g++)b=0|u-g,d=0|t.words[b],a=0|n.words[g],l=d*a+m,f+=0|l/67108864,m=67108863&l;o.words[u]=0|m,c=0|f}return 0==c?o.length--:o.words[u]=0|c,o.strip()}function u(t,n,o){o.negative=n.negative^t.negative,o.length=t.length+n.length;for(var s=0,d=0,l=0,c;l<o.length-1;l++){c=d,d=0;for(var u=67108863&s,f=_Mathmin(l,n.length-1),m=_Mathmax(0,l-t.length+1);m<=f;m++){var h=l-m,i=0|t.words[h],a=0|n.words[m],g=i*a,r=67108863&g;c=0|c+(0|g/67108864),r=0|r+u,u=67108863&r,c=0|c+(r>>>26),d+=c>>>26,c&=67108863}o.words[l]=u,s=c,c=d}return 0==s?o.length--:o.words[l]=s,o.strip()}function f(t,n,a){var r=new m;return r.mulp(t,n,a)}function m(t,n){this.x=t,this.y=n}function h(t,n){this.name=t,this.p=new d(n,16),this.n=this.p.bitLength(),this.k=new d(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function g(){h.call(this,'k256','ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f')}function b(){h.call(this,'p224','ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001')}function y(){h.call(this,'p192','ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff')}function w(){h.call(this,'25519','7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed')}function v(t){if('string'==typeof t){var n=d._prime(t);this.m=n.p,this.prime=n}else o(t.gtn(1),'modulus must be greater than 1'),this.m=t,this.prime=null}function x(t){v.call(this,t),this.shift=this.m.bitLength(),0!=this.shift%26&&(this.shift+=26-this.shift%26),this.r=new d(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}'object'==typeof t?t.exports=d:n.BN=d,d.BN=d,d.wordSize=26;var _;try{_=a(395).Buffer}catch(t){}d.isBN=function t(n){return!!(n instanceof d)||null!==n&&'object'==typeof n&&n.constructor.wordSize===d.wordSize&&Array.isArray(n.words)},d.max=function t(n,a){return 0<n.cmp(a)?n:a},d.min=function t(n,a){return 0>n.cmp(a)?n:a},d.prototype._init=function t(n,a,r){if('number'==typeof n)return this._initNumber(n,a,r);if('object'==typeof n)return this._initArray(n,a,r);'hex'===a&&(a=16),o(a===(0|a)&&2<=a&&36>=a),n=n.toString().replace(/\s+/g,'');var i=0;'-'===n[0]&&i++,16===a?this._parseHex(n,i):this._parseBase(n,a,i),'-'===n[0]&&(this.negative=1),this.strip();'le'!==r||this._initArray(this.toArray(),a,r)},d.prototype._initNumber=function t(n,a,r){0>n&&(this.negative=1,n=-n),67108864>n?(this.words=[67108863&n],this.length=1):4503599627370496>n?(this.words=[67108863&n,67108863&n/67108864],this.length=2):(o(9007199254740992>n),this.words=[67108863&n,67108863&n/67108864,1],this.length=3);'le'!==r||this._initArray(this.toArray(),a,r)},d.prototype._initArray=function t(n,a,r){if(o('number'==typeof n.length),0>=n.length)return this.words=[0],this.length=1,this;this.length=_Mathceil(n.length/3),this.words=Array(this.length);for(var s=0;s<this.length;s++)this.words[s]=0;var i=0,d,l;if('be'===r)for(s=n.length-1,d=0;0<=s;s-=3)l=n[s]|n[s-1]<<8|n[s-2]<<16,this.words[d]|=67108863&l<<i,this.words[d+1]=67108863&l>>>26-i,i+=24,26<=i&&(i-=26,d++);else if('le'===r)for(s=0,d=0;s<n.length;s+=3)l=n[s]|n[s+1]<<8|n[s+2]<<16,this.words[d]|=67108863&l<<i,this.words[d+1]=67108863&l>>>26-i,i+=24,26<=i&&(i-=26,d++);return this.strip()},d.prototype._parseHex=function t(n,a){this.length=_Mathceil((n.length-a)/6),this.words=Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var i=0,o,d;for(r=n.length-6,o=0;r>=a;r-=6)d=s(n,r,r+6),this.words[o]|=67108863&d<<i,this.words[o+1]|=4194303&d>>>26-i,i+=24,26<=i&&(i-=26,o++);r+6!==a&&(d=s(n,a,r+6),this.words[o]|=67108863&d<<i,this.words[o+1]|=4194303&d>>>26-i),this.strip()},d.prototype._parseBase=function t(n,a,r){this.words=[0],this.length=1;for(var o=0,s=1;67108863>=s;s*=a)o++;o--,s=0|s/a;for(var d=n.length-r,c=d%o,u=_Mathmin(d,d-c)+r,f=0,m=r;m<u;m+=o)f=l(n,m,m+o,a),this.imuln(s),67108864>this.words[0]+f?this.words[0]+=f:this._iaddn(f);if(0!=c){var i=1;for(f=l(n,m,n.length,a),m=0;m<c;m++)i*=a;this.imuln(i),67108864>this.words[0]+f?this.words[0]+=f:this._iaddn(f)}},d.prototype.copy=function t(n){n.words=Array(this.length);for(var a=0;a<this.length;a++)n.words[a]=this.words[a];n.length=this.length,n.negative=this.negative,n.red=this.red},d.prototype.clone=function t(){var n=new d(null);return this.copy(n),n},d.prototype._expand=function t(n){for(;this.length<n;)this.words[this.length++]=0;return this},d.prototype.strip=function t(){for(;1<this.length&&0===this.words[this.length-1];)this.length--;return this._normSign()},d.prototype._normSign=function t(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},d.prototype.inspect=function t(){return(this.red?'<BN-R: ':'<BN: ')+this.toString(16)+'>'};var k=['','0','00','000','0000','00000','000000','0000000','00000000','000000000','0000000000','00000000000','000000000000','0000000000000','00000000000000','000000000000000','0000000000000000','00000000000000000','000000000000000000','0000000000000000000','00000000000000000000','000000000000000000000','0000000000000000000000','00000000000000000000000','000000000000000000000000','0000000000000000000000000'],C=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],E=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,10000000,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64000000,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,24300000,28629151,33554432,39135393,45435424,52521875,60466176];d.prototype.toString=function t(n,a){n=n||10,a=0|a||1;var s;if(16===n||'hex'===n){s='';for(var d=0,l=0,u=0;u<this.length;u++){var i=this.words[u],f=(16777215&(i<<d|l)).toString(16);l=16777215&i>>>24-d,s=0!=l||u!==this.length-1?k[6-f.length]+f+s:f+s,d+=2,26<=d&&(d-=26,u--)}for(0!=l&&(s=l.toString(16)+s);0!=s.length%a;)s='0'+s;return 0!==this.negative&&(s='-'+s),s}if(n===(0|n)&&2<=n&&36>=n){var m=C[n],h=E[n];s='';var g=this.clone();for(g.negative=0;!g.isZero();){var c=g.modn(h).toString(n);g=g.idivn(h),s=g.isZero()?c+s:k[m-c.length]+c+s}for(this.isZero()&&(s='0'+s);0!=s.length%a;)s='0'+s;return 0!==this.negative&&(s='-'+s),s}o(!1,'Base should be between 2 and 36')},d.prototype.toNumber=function t(){var n=this.words[0];return 2===this.length?n+=67108864*this.words[1]:3===this.length&&1===this.words[2]?n+=4503599627370496+67108864*this.words[1]:2<this.length&&o(!1,'Number can only safely store up to 53 bits'),0===this.negative?n:-n},d.prototype.toJSON=function t(){return this.toString(16)},d.prototype.toBuffer=function t(n,a){return o('undefined'!=typeof _),this.toArrayLike(_,n,a)},d.prototype.toArray=function t(n,a){return this.toArrayLike(Array,n,a)},d.prototype.toArrayLike=function t(n,a,r){var s=this.byteLength(),d=r||_Mathmax(1,s);o(s<=d,'byte array longer than desired length'),o(0<d,'Requested array length <= 0'),this.strip();var l='le'===a,c=new n(d),u=this.clone(),f,m;if(!l){for(m=0;m<d-s;m++)c[m]=0;for(m=0;!u.isZero();m++)f=u.andln(255),u.iushrn(8),c[d-m-1]=f}else{for(m=0;!u.isZero();m++)f=u.andln(255),u.iushrn(8),c[m]=f;for(;m<d;m++)c[m]=0}return c},d.prototype._countBits=_Mathclz?function t(n){return 32-_Mathclz(n)}:function n(a){var i=a,t=0;return 4096<=i&&(t+=13,i>>>=13),64<=i&&(t+=7,i>>>=7),8<=i&&(t+=4,i>>>=4),2<=i&&(t+=2,i>>>=2),t+i},d.prototype._zeroBits=function n(a){if(0===a)return 26;var i=a,t=0;return 0==(8191&i)&&(t+=13,i>>>=13),0==(127&i)&&(t+=7,i>>>=7),0==(15&i)&&(t+=4,i>>>=4),0==(3&i)&&(t+=2,i>>>=2),0==(1&i)&&t++,t},d.prototype.bitLength=function t(){var n=this.words[this.length-1],a=this._countBits(n);return 26*(this.length-1)+a},d.prototype.zeroBits=function t(){if(this.isZero())return 0;for(var n=0,a=0,r;a<this.length&&(r=this._zeroBits(this.words[a]),n+=r,26===r);a++);return n},d.prototype.byteLength=function t(){return _Mathceil(this.bitLength()/8)},d.prototype.toTwos=function t(n){return 0===this.negative?this.clone():this.abs().inotn(n).iaddn(1)},d.prototype.fromTwos=function t(n){return this.testn(n-1)?this.notn(n).iaddn(1).ineg():this.clone()},d.prototype.isNeg=function t(){return 0!==this.negative},d.prototype.neg=function t(){return this.clone().ineg()},d.prototype.ineg=function t(){return this.isZero()||(this.negative^=1),this},d.prototype.iuor=function t(n){for(;this.length<n.length;)this.words[this.length++]=0;for(var a=0;a<n.length;a++)this.words[a]|=n.words[a];return this.strip()},d.prototype.ior=function t(n){return o(0==(this.negative|n.negative)),this.iuor(n)},d.prototype.or=function t(n){return this.length>n.length?this.clone().ior(n):n.clone().ior(this)},d.prototype.uor=function t(n){return this.length>n.length?this.clone().iuor(n):n.clone().iuor(this)},d.prototype.iuand=function t(n){var a;a=this.length>n.length?n:this;for(var r=0;r<a.length;r++)this.words[r]&=n.words[r];return this.length=a.length,this.strip()},d.prototype.iand=function t(n){return o(0==(this.negative|n.negative)),this.iuand(n)},d.prototype.and=function t(n){return this.length>n.length?this.clone().iand(n):n.clone().iand(this)},d.prototype.uand=function t(n){return this.length>n.length?this.clone().iuand(n):n.clone().iuand(this)},d.prototype.iuxor=function t(n){var r,a;this.length>n.length?(r=this,a=n):(r=n,a=this);for(var o=0;o<a.length;o++)this.words[o]=r.words[o]^a.words[o];if(this!==r)for(;o<r.length;o++)this.words[o]=r.words[o];return this.length=r.length,this.strip()},d.prototype.ixor=function t(n){return o(0==(this.negative|n.negative)),this.iuxor(n)},d.prototype.xor=function t(n){return this.length>n.length?this.clone().ixor(n):n.clone().ixor(this)},d.prototype.uxor=function t(n){return this.length>n.length?this.clone().iuxor(n):n.clone().iuxor(this)},d.prototype.inotn=function t(n){o('number'==typeof n&&0<=n);var a=0|_Mathceil(n/26),r=n%26;this._expand(a),0<r&&a--;for(var s=0;s<a;s++)this.words[s]=67108863&~this.words[s];return 0<r&&(this.words[s]=~this.words[s]&67108863>>26-r),this.strip()},d.prototype.notn=function t(n){return this.clone().inotn(n)},d.prototype.setn=function t(n,a){o('number'==typeof n&&0<=n);var r=0|n/26,i=n%26;return this._expand(r+1),a?this.words[r]|=1<<i:this.words[r]&=~(1<<i),this.strip()},d.prototype.iadd=function t(n){var o;if(0!==this.negative&&0===n.negative)return this.negative=0,o=this.isub(n),this.negative^=1,this._normSign();if(0===this.negative&&0!==n.negative)return n.negative=0,o=this.isub(n),n.negative=1,o._normSign();var r,a;this.length>n.length?(r=this,a=n):(r=n,a=this);for(var s=0,d=0;d<a.length;d++)o=(0|r.words[d])+(0|a.words[d])+s,this.words[d]=67108863&o,s=o>>>26;for(;0!=s&&d<r.length;d++)o=(0|r.words[d])+s,this.words[d]=67108863&o,s=o>>>26;if(this.length=r.length,0!=s)this.words[this.length]=s,this.length++;else if(r!==this)for(;d<r.length;d++)this.words[d]=r.words[d];return this},d.prototype.add=function t(n){var a;return 0!==n.negative&&0===this.negative?(n.negative=0,a=this.sub(n),n.negative^=1,a):0===n.negative&&0!==this.negative?(this.negative=0,a=n.sub(this),this.negative=1,a):this.length>n.length?this.clone().iadd(n):n.clone().iadd(this)},d.prototype.isub=function t(n){if(0!==n.negative){n.negative=0;var o=this.iadd(n);return n.negative=1,o._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(n),this.negative=1,this._normSign();var r=this.cmp(n);if(0===r)return this.negative=0,this.length=1,this.words[0]=0,this;var s,a;0<r?(s=this,a=n):(s=n,a=this);for(var d=0,l=0;l<a.length;l++)o=(0|s.words[l])-(0|a.words[l])+d,d=o>>26,this.words[l]=67108863&o;for(;0!=d&&l<s.length;l++)o=(0|s.words[l])+d,d=o>>26,this.words[l]=67108863&o;if(0==d&&l<s.length&&s!==this)for(;l<s.length;l++)this.words[l]=s.words[l];return this.length=_Mathmax(this.length,l),s!==this&&(this.negative=1),this.strip()},d.prototype.sub=function t(n){return this.clone().isub(n)};var T=function t(n,r,i){var s=n.words,a=r.words,d=i.words,o=0,l=0|s[0],c=8191&l,u=l>>>13,f=0|s[1],m=8191&f,h=f>>>13,g=0|s[2],b=8191&g,y=g>>>13,w=0|s[3],v=8191&w,x=w>>>13,_=0|s[4],k=8191&_,C=_>>>13,E=0|s[5],T=8191&E,A=E>>>13,S=0|s[6],I=8191&S,N=S>>>13,j=0|s[7],L=8191&j,R=j>>>13,M=0|s[8],D=8191&M,P=M>>>13,O=0|s[9],B=8191&O,U=O>>>13,F=0|a[0],q=8191&F,z=F>>>13,H=0|a[1],W=8191&H,V=H>>>13,G=0|a[2],J=8191&G,K=G>>>13,X=0|a[3],Y=8191&X,Z=X>>>13,Q=0|a[4],ee=8191&Q,te=Q>>>13,ne=0|a[5],ae=8191&ne,re=ne>>>13,ie=0|a[6],oe=8191&ie,se=ie>>>13,de=0|a[7],le=8191&de,pe=de>>>13,ce=0|a[8],ue=8191&ce,fe=ce>>>13,he=0|a[9],ge=8191&he,be=he>>>13,ye,we,ve;i.negative=n.negative^r.negative,i.length=19,ye=_Mathimul(c,q),we=_Mathimul(c,z),we=0|we+_Mathimul(u,q),ve=_Mathimul(u,z);var xe=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(xe>>>26),xe&=67108863,ye=_Mathimul(m,q),we=_Mathimul(m,z),we=0|we+_Mathimul(h,q),ve=_Mathimul(h,z),ye=0|ye+_Mathimul(c,W),we=0|we+_Mathimul(c,V),we=0|we+_Mathimul(u,W),ve=0|ve+_Mathimul(u,V);var _e=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(_e>>>26),_e&=67108863,ye=_Mathimul(b,q),we=_Mathimul(b,z),we=0|we+_Mathimul(y,q),ve=_Mathimul(y,z),ye=0|ye+_Mathimul(m,W),we=0|we+_Mathimul(m,V),we=0|we+_Mathimul(h,W),ve=0|ve+_Mathimul(h,V),ye=0|ye+_Mathimul(c,J),we=0|we+_Mathimul(c,K),we=0|we+_Mathimul(u,J),ve=0|ve+_Mathimul(u,K);var ke=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(ke>>>26),ke&=67108863,ye=_Mathimul(v,q),we=_Mathimul(v,z),we=0|we+_Mathimul(x,q),ve=_Mathimul(x,z),ye=0|ye+_Mathimul(b,W),we=0|we+_Mathimul(b,V),we=0|we+_Mathimul(y,W),ve=0|ve+_Mathimul(y,V),ye=0|ye+_Mathimul(m,J),we=0|we+_Mathimul(m,K),we=0|we+_Mathimul(h,J),ve=0|ve+_Mathimul(h,K),ye=0|ye+_Mathimul(c,Y),we=0|we+_Mathimul(c,Z),we=0|we+_Mathimul(u,Y),ve=0|ve+_Mathimul(u,Z);var Ce=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Ce>>>26),Ce&=67108863,ye=_Mathimul(k,q),we=_Mathimul(k,z),we=0|we+_Mathimul(C,q),ve=_Mathimul(C,z),ye=0|ye+_Mathimul(v,W),we=0|we+_Mathimul(v,V),we=0|we+_Mathimul(x,W),ve=0|ve+_Mathimul(x,V),ye=0|ye+_Mathimul(b,J),we=0|we+_Mathimul(b,K),we=0|we+_Mathimul(y,J),ve=0|ve+_Mathimul(y,K),ye=0|ye+_Mathimul(m,Y),we=0|we+_Mathimul(m,Z),we=0|we+_Mathimul(h,Y),ve=0|ve+_Mathimul(h,Z),ye=0|ye+_Mathimul(c,ee),we=0|we+_Mathimul(c,te),we=0|we+_Mathimul(u,ee),ve=0|ve+_Mathimul(u,te);var Ee=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Ee>>>26),Ee&=67108863,ye=_Mathimul(T,q),we=_Mathimul(T,z),we=0|we+_Mathimul(A,q),ve=_Mathimul(A,z),ye=0|ye+_Mathimul(k,W),we=0|we+_Mathimul(k,V),we=0|we+_Mathimul(C,W),ve=0|ve+_Mathimul(C,V),ye=0|ye+_Mathimul(v,J),we=0|we+_Mathimul(v,K),we=0|we+_Mathimul(x,J),ve=0|ve+_Mathimul(x,K),ye=0|ye+_Mathimul(b,Y),we=0|we+_Mathimul(b,Z),we=0|we+_Mathimul(y,Y),ve=0|ve+_Mathimul(y,Z),ye=0|ye+_Mathimul(m,ee),we=0|we+_Mathimul(m,te),we=0|we+_Mathimul(h,ee),ve=0|ve+_Mathimul(h,te),ye=0|ye+_Mathimul(c,ae),we=0|we+_Mathimul(c,re),we=0|we+_Mathimul(u,ae),ve=0|ve+_Mathimul(u,re);var Te=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Te>>>26),Te&=67108863,ye=_Mathimul(I,q),we=_Mathimul(I,z),we=0|we+_Mathimul(N,q),ve=_Mathimul(N,z),ye=0|ye+_Mathimul(T,W),we=0|we+_Mathimul(T,V),we=0|we+_Mathimul(A,W),ve=0|ve+_Mathimul(A,V),ye=0|ye+_Mathimul(k,J),we=0|we+_Mathimul(k,K),we=0|we+_Mathimul(C,J),ve=0|ve+_Mathimul(C,K),ye=0|ye+_Mathimul(v,Y),we=0|we+_Mathimul(v,Z),we=0|we+_Mathimul(x,Y),ve=0|ve+_Mathimul(x,Z),ye=0|ye+_Mathimul(b,ee),we=0|we+_Mathimul(b,te),we=0|we+_Mathimul(y,ee),ve=0|ve+_Mathimul(y,te),ye=0|ye+_Mathimul(m,ae),we=0|we+_Mathimul(m,re),we=0|we+_Mathimul(h,ae),ve=0|ve+_Mathimul(h,re),ye=0|ye+_Mathimul(c,oe),we=0|we+_Mathimul(c,se),we=0|we+_Mathimul(u,oe),ve=0|ve+_Mathimul(u,se);var Ae=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Ae>>>26),Ae&=67108863,ye=_Mathimul(L,q),we=_Mathimul(L,z),we=0|we+_Mathimul(R,q),ve=_Mathimul(R,z),ye=0|ye+_Mathimul(I,W),we=0|we+_Mathimul(I,V),we=0|we+_Mathimul(N,W),ve=0|ve+_Mathimul(N,V),ye=0|ye+_Mathimul(T,J),we=0|we+_Mathimul(T,K),we=0|we+_Mathimul(A,J),ve=0|ve+_Mathimul(A,K),ye=0|ye+_Mathimul(k,Y),we=0|we+_Mathimul(k,Z),we=0|we+_Mathimul(C,Y),ve=0|ve+_Mathimul(C,Z),ye=0|ye+_Mathimul(v,ee),we=0|we+_Mathimul(v,te),we=0|we+_Mathimul(x,ee),ve=0|ve+_Mathimul(x,te),ye=0|ye+_Mathimul(b,ae),we=0|we+_Mathimul(b,re),we=0|we+_Mathimul(y,ae),ve=0|ve+_Mathimul(y,re),ye=0|ye+_Mathimul(m,oe),we=0|we+_Mathimul(m,se),we=0|we+_Mathimul(h,oe),ve=0|ve+_Mathimul(h,se),ye=0|ye+_Mathimul(c,le),we=0|we+_Mathimul(c,pe),we=0|we+_Mathimul(u,le),ve=0|ve+_Mathimul(u,pe);var Se=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Se>>>26),Se&=67108863,ye=_Mathimul(D,q),we=_Mathimul(D,z),we=0|we+_Mathimul(P,q),ve=_Mathimul(P,z),ye=0|ye+_Mathimul(L,W),we=0|we+_Mathimul(L,V),we=0|we+_Mathimul(R,W),ve=0|ve+_Mathimul(R,V),ye=0|ye+_Mathimul(I,J),we=0|we+_Mathimul(I,K),we=0|we+_Mathimul(N,J),ve=0|ve+_Mathimul(N,K),ye=0|ye+_Mathimul(T,Y),we=0|we+_Mathimul(T,Z),we=0|we+_Mathimul(A,Y),ve=0|ve+_Mathimul(A,Z),ye=0|ye+_Mathimul(k,ee),we=0|we+_Mathimul(k,te),we=0|we+_Mathimul(C,ee),ve=0|ve+_Mathimul(C,te),ye=0|ye+_Mathimul(v,ae),we=0|we+_Mathimul(v,re),we=0|we+_Mathimul(x,ae),ve=0|ve+_Mathimul(x,re),ye=0|ye+_Mathimul(b,oe),we=0|we+_Mathimul(b,se),we=0|we+_Mathimul(y,oe),ve=0|ve+_Mathimul(y,se),ye=0|ye+_Mathimul(m,le),we=0|we+_Mathimul(m,pe),we=0|we+_Mathimul(h,le),ve=0|ve+_Mathimul(h,pe),ye=0|ye+_Mathimul(c,ue),we=0|we+_Mathimul(c,fe),we=0|we+_Mathimul(u,ue),ve=0|ve+_Mathimul(u,fe);var Ie=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Ie>>>26),Ie&=67108863,ye=_Mathimul(B,q),we=_Mathimul(B,z),we=0|we+_Mathimul(U,q),ve=_Mathimul(U,z),ye=0|ye+_Mathimul(D,W),we=0|we+_Mathimul(D,V),we=0|we+_Mathimul(P,W),ve=0|ve+_Mathimul(P,V),ye=0|ye+_Mathimul(L,J),we=0|we+_Mathimul(L,K),we=0|we+_Mathimul(R,J),ve=0|ve+_Mathimul(R,K),ye=0|ye+_Mathimul(I,Y),we=0|we+_Mathimul(I,Z),we=0|we+_Mathimul(N,Y),ve=0|ve+_Mathimul(N,Z),ye=0|ye+_Mathimul(T,ee),we=0|we+_Mathimul(T,te),we=0|we+_Mathimul(A,ee),ve=0|ve+_Mathimul(A,te),ye=0|ye+_Mathimul(k,ae),we=0|we+_Mathimul(k,re),we=0|we+_Mathimul(C,ae),ve=0|ve+_Mathimul(C,re),ye=0|ye+_Mathimul(v,oe),we=0|we+_Mathimul(v,se),we=0|we+_Mathimul(x,oe),ve=0|ve+_Mathimul(x,se),ye=0|ye+_Mathimul(b,le),we=0|we+_Mathimul(b,pe),we=0|we+_Mathimul(y,le),ve=0|ve+_Mathimul(y,pe),ye=0|ye+_Mathimul(m,ue),we=0|we+_Mathimul(m,fe),we=0|we+_Mathimul(h,ue),ve=0|ve+_Mathimul(h,fe),ye=0|ye+_Mathimul(c,ge),we=0|we+_Mathimul(c,be),we=0|we+_Mathimul(u,ge),ve=0|ve+_Mathimul(u,be);var Ne=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Ne>>>26),Ne&=67108863,ye=_Mathimul(B,W),we=_Mathimul(B,V),we=0|we+_Mathimul(U,W),ve=_Mathimul(U,V),ye=0|ye+_Mathimul(D,J),we=0|we+_Mathimul(D,K),we=0|we+_Mathimul(P,J),ve=0|ve+_Mathimul(P,K),ye=0|ye+_Mathimul(L,Y),we=0|we+_Mathimul(L,Z),we=0|we+_Mathimul(R,Y),ve=0|ve+_Mathimul(R,Z),ye=0|ye+_Mathimul(I,ee),we=0|we+_Mathimul(I,te),we=0|we+_Mathimul(N,ee),ve=0|ve+_Mathimul(N,te),ye=0|ye+_Mathimul(T,ae),we=0|we+_Mathimul(T,re),we=0|we+_Mathimul(A,ae),ve=0|ve+_Mathimul(A,re),ye=0|ye+_Mathimul(k,oe),we=0|we+_Mathimul(k,se),we=0|we+_Mathimul(C,oe),ve=0|ve+_Mathimul(C,se),ye=0|ye+_Mathimul(v,le),we=0|we+_Mathimul(v,pe),we=0|we+_Mathimul(x,le),ve=0|ve+_Mathimul(x,pe),ye=0|ye+_Mathimul(b,ue),we=0|we+_Mathimul(b,fe),we=0|we+_Mathimul(y,ue),ve=0|ve+_Mathimul(y,fe),ye=0|ye+_Mathimul(m,ge),we=0|we+_Mathimul(m,be),we=0|we+_Mathimul(h,ge),ve=0|ve+_Mathimul(h,be);var je=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(je>>>26),je&=67108863,ye=_Mathimul(B,J),we=_Mathimul(B,K),we=0|we+_Mathimul(U,J),ve=_Mathimul(U,K),ye=0|ye+_Mathimul(D,Y),we=0|we+_Mathimul(D,Z),we=0|we+_Mathimul(P,Y),ve=0|ve+_Mathimul(P,Z),ye=0|ye+_Mathimul(L,ee),we=0|we+_Mathimul(L,te),we=0|we+_Mathimul(R,ee),ve=0|ve+_Mathimul(R,te),ye=0|ye+_Mathimul(I,ae),we=0|we+_Mathimul(I,re),we=0|we+_Mathimul(N,ae),ve=0|ve+_Mathimul(N,re),ye=0|ye+_Mathimul(T,oe),we=0|we+_Mathimul(T,se),we=0|we+_Mathimul(A,oe),ve=0|ve+_Mathimul(A,se),ye=0|ye+_Mathimul(k,le),we=0|we+_Mathimul(k,pe),we=0|we+_Mathimul(C,le),ve=0|ve+_Mathimul(C,pe),ye=0|ye+_Mathimul(v,ue),we=0|we+_Mathimul(v,fe),we=0|we+_Mathimul(x,ue),ve=0|ve+_Mathimul(x,fe),ye=0|ye+_Mathimul(b,ge),we=0|we+_Mathimul(b,be),we=0|we+_Mathimul(y,ge),ve=0|ve+_Mathimul(y,be);var Le=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Le>>>26),Le&=67108863,ye=_Mathimul(B,Y),we=_Mathimul(B,Z),we=0|we+_Mathimul(U,Y),ve=_Mathimul(U,Z),ye=0|ye+_Mathimul(D,ee),we=0|we+_Mathimul(D,te),we=0|we+_Mathimul(P,ee),ve=0|ve+_Mathimul(P,te),ye=0|ye+_Mathimul(L,ae),we=0|we+_Mathimul(L,re),we=0|we+_Mathimul(R,ae),ve=0|ve+_Mathimul(R,re),ye=0|ye+_Mathimul(I,oe),we=0|we+_Mathimul(I,se),we=0|we+_Mathimul(N,oe),ve=0|ve+_Mathimul(N,se),ye=0|ye+_Mathimul(T,le),we=0|we+_Mathimul(T,pe),we=0|we+_Mathimul(A,le),ve=0|ve+_Mathimul(A,pe),ye=0|ye+_Mathimul(k,ue),we=0|we+_Mathimul(k,fe),we=0|we+_Mathimul(C,ue),ve=0|ve+_Mathimul(C,fe),ye=0|ye+_Mathimul(v,ge),we=0|we+_Mathimul(v,be),we=0|we+_Mathimul(x,ge),ve=0|ve+_Mathimul(x,be);var Re=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Re>>>26),Re&=67108863,ye=_Mathimul(B,ee),we=_Mathimul(B,te),we=0|we+_Mathimul(U,ee),ve=_Mathimul(U,te),ye=0|ye+_Mathimul(D,ae),we=0|we+_Mathimul(D,re),we=0|we+_Mathimul(P,ae),ve=0|ve+_Mathimul(P,re),ye=0|ye+_Mathimul(L,oe),we=0|we+_Mathimul(L,se),we=0|we+_Mathimul(R,oe),ve=0|ve+_Mathimul(R,se),ye=0|ye+_Mathimul(I,le),we=0|we+_Mathimul(I,pe),we=0|we+_Mathimul(N,le),ve=0|ve+_Mathimul(N,pe),ye=0|ye+_Mathimul(T,ue),we=0|we+_Mathimul(T,fe),we=0|we+_Mathimul(A,ue),ve=0|ve+_Mathimul(A,fe),ye=0|ye+_Mathimul(k,ge),we=0|we+_Mathimul(k,be),we=0|we+_Mathimul(C,ge),ve=0|ve+_Mathimul(C,be);var Me=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Me>>>26),Me&=67108863,ye=_Mathimul(B,ae),we=_Mathimul(B,re),we=0|we+_Mathimul(U,ae),ve=_Mathimul(U,re),ye=0|ye+_Mathimul(D,oe),we=0|we+_Mathimul(D,se),we=0|we+_Mathimul(P,oe),ve=0|ve+_Mathimul(P,se),ye=0|ye+_Mathimul(L,le),we=0|we+_Mathimul(L,pe),we=0|we+_Mathimul(R,le),ve=0|ve+_Mathimul(R,pe),ye=0|ye+_Mathimul(I,ue),we=0|we+_Mathimul(I,fe),we=0|we+_Mathimul(N,ue),ve=0|ve+_Mathimul(N,fe),ye=0|ye+_Mathimul(T,ge),we=0|we+_Mathimul(T,be),we=0|we+_Mathimul(A,ge),ve=0|ve+_Mathimul(A,be);var De=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(De>>>26),De&=67108863,ye=_Mathimul(B,oe),we=_Mathimul(B,se),we=0|we+_Mathimul(U,oe),ve=_Mathimul(U,se),ye=0|ye+_Mathimul(D,le),we=0|we+_Mathimul(D,pe),we=0|we+_Mathimul(P,le),ve=0|ve+_Mathimul(P,pe),ye=0|ye+_Mathimul(L,ue),we=0|we+_Mathimul(L,fe),we=0|we+_Mathimul(R,ue),ve=0|ve+_Mathimul(R,fe),ye=0|ye+_Mathimul(I,ge),we=0|we+_Mathimul(I,be),we=0|we+_Mathimul(N,ge),ve=0|ve+_Mathimul(N,be);var Pe=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Pe>>>26),Pe&=67108863,ye=_Mathimul(B,le),we=_Mathimul(B,pe),we=0|we+_Mathimul(U,le),ve=_Mathimul(U,pe),ye=0|ye+_Mathimul(D,ue),we=0|we+_Mathimul(D,fe),we=0|we+_Mathimul(P,ue),ve=0|ve+_Mathimul(P,fe),ye=0|ye+_Mathimul(L,ge),we=0|we+_Mathimul(L,be),we=0|we+_Mathimul(R,ge),ve=0|ve+_Mathimul(R,be);var Oe=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Oe>>>26),Oe&=67108863,ye=_Mathimul(B,ue),we=_Mathimul(B,fe),we=0|we+_Mathimul(U,ue),ve=_Mathimul(U,fe),ye=0|ye+_Mathimul(D,ge),we=0|we+_Mathimul(D,be),we=0|we+_Mathimul(P,ge),ve=0|ve+_Mathimul(P,be);var Be=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Be>>>26),Be&=67108863,ye=_Mathimul(B,ge),we=_Mathimul(B,be),we=0|we+_Mathimul(U,ge),ve=_Mathimul(U,be);var Ue=0|(0|o+ye)+((8191&we)<<13);return o=0|(0|ve+(we>>>13))+(Ue>>>26),Ue&=67108863,d[0]=xe,d[1]=_e,d[2]=ke,d[3]=Ce,d[4]=Ee,d[5]=Te,d[6]=Ae,d[7]=Se,d[8]=Ie,d[9]=Ne,d[10]=je,d[11]=Le,d[12]=Re,d[13]=Me,d[14]=De,d[15]=Pe,d[16]=Oe,d[17]=Be,d[18]=Ue,0!=o&&(d[19]=o,i.length++),i};_Mathimul||(T=i),d.prototype.mulTo=function t(n,a){var r=this.length+n.length,o;return o=10===this.length&&10===n.length?T(this,n,a):63>r?i(this,n,a):1024>r?u(this,n,a):f(this,n,a),o},m.prototype.makeRBT=function n(a){for(var r=Array(a),t=d.prototype._countBits(a)-1,o=0;o<a;o++)r[o]=this.revBin(o,t,a);return r},m.prototype.revBin=function t(n,a,r){if(0===n||n===r-1)return n;for(var o=0,s=0;s<a;s++)o|=(1&n)<<a-s-1,n>>=1;return o},m.prototype.permute=function t(n,a,r,o,s,d){for(var l=0;l<d;l++)o[l]=a[n[l]],s[l]=r[n[l]]},m.prototype.transform=function t(n,a,r,i,o,d){this.permute(d,n,a,r,i,o);for(var c=1;c<o;c<<=1)for(var s=c<<1,l=_Mathcos(2*_MathPI/s),u=_Mathsin(2*_MathPI/s),f=0;f<o;f+=s)for(var m=l,h=u,g=0;g<c;g++){var b=r[f+g],y=i[f+g],w=r[f+g+c],v=i[f+g+c],x=m*w-h*v;v=m*v+h*w,w=x,r[f+g]=b+w,i[f+g]=y+v,r[f+g+c]=b-w,i[f+g+c]=y-v,g!==s&&(x=l*m-u*h,h=l*h+u*m,m=x)}},m.prototype.guessLen13b=function t(a,n){var r=1|_Mathmax(n,a),o=1&r,s=0;for(r=0|r/2;r;r>>>=1)s++;return 1<<s+1+o},m.prototype.conjugate=function n(a,r,o){if(!(1>=o))for(var s=0,i;s<o/2;s++)i=a[s],a[s]=a[o-s-1],a[o-s-1]=i,i=r[s],r[s]=-r[o-s-1],r[o-s-1]=-i},m.prototype.normalize13b=function t(n,a){for(var r=0,o=0,i;o<a/2;o++)i=8192*_Mathround(n[2*o+1]/a)+_Mathround(n[2*o]/a)+r,n[o]=67108863&i,r=67108864>i?0:0|i/67108864;return n},m.prototype.convert13b=function t(n,a,r,s){for(var d=0,l=0;l<a;l++)d+=0|n[l],r[2*l]=8191&d,d>>>=13,r[2*l+1]=8191&d,d>>>=13;for(l=2*a;l<s;++l)r[l]=0;o(0==d),o(0==(-8192&d))},m.prototype.stub=function t(n){for(var a=Array(n),r=0;r<n;r++)a[r]=0;return a},m.prototype.mulp=function t(n,a,r){var o=2*this.guessLen13b(n.length,a.length),s=this.makeRBT(o),d=this.stub(o),l=Array(o),c=Array(o),u=Array(o),f=Array(o),m=Array(o),h=Array(o),g=r.words;g.length=o,this.convert13b(n.words,n.length,l,o),this.convert13b(a.words,a.length,f,o),this.transform(l,d,c,u,o,s),this.transform(f,d,m,h,o,s);for(var b=0,i;b<o;b++)i=c[b]*m[b]-u[b]*h[b],u[b]=c[b]*h[b]+u[b]*m[b],c[b]=i;return this.conjugate(c,u,o),this.transform(c,u,g,d,o,s),this.conjugate(g,d,o),this.normalize13b(g,o),r.negative=n.negative^a.negative,r.length=n.length+a.length,r.strip()},d.prototype.mul=function t(n){var a=new d(null);return a.words=Array(this.length+n.length),this.mulTo(n,a)},d.prototype.mulf=function t(n){var a=new d(null);return a.words=Array(this.length+n.length),f(this,n,a)},d.prototype.imul=function t(n){return this.clone().mulTo(n,this)},d.prototype.imuln=function t(n){o('number'==typeof n),o(67108864>n);for(var a=0,r=0;r<this.length;r++){var i=(0|this.words[r])*n,s=(67108863&i)+(67108863&a);a>>=26,a+=0|i/67108864,a+=s>>>26,this.words[r]=67108863&s}return 0!=a&&(this.words[r]=a,this.length++),this},d.prototype.muln=function t(n){return this.clone().imuln(n)},d.prototype.sqr=function t(){return this.mul(this)},d.prototype.isqr=function t(){return this.imul(this.clone())},d.prototype.pow=function t(n){var a=c(n);if(0===a.length)return new d(1);for(var r=this,o=0;o<a.length&&!(0!==a[o]);o++,r=r.sqr());if(++o<a.length)for(var i=r.sqr();o<a.length;o++,i=i.sqr())0!==a[o]&&(r=r.mul(i));return r},d.prototype.iushln=function t(n){o('number'==typeof n&&0<=n);var a=n%26,r=(n-a)/26,s=67108863>>>26-a<<26-a,d;if(0!=a){var i=0;for(d=0;d<this.length;d++){var l=this.words[d]&s,u=(0|this.words[d])-l<<a;this.words[d]=u|i,i=l>>>26-a}i&&(this.words[d]=i,this.length++)}if(0!=r){for(d=this.length-1;0<=d;d--)this.words[d+r]=this.words[d];for(d=0;d<r;d++)this.words[d]=0;this.length+=r}return this.strip()},d.prototype.ishln=function t(n){return o(0===this.negative),this.iushln(n)},d.prototype.iushrn=function t(n,a,d){o('number'==typeof n&&0<=n);var l;l=a?(a-a%26)/26:0;var c=n%26,r=_Mathmin((n-c)/26,this.length),s=67108863^67108863>>>c<<c,u=d;if(l-=r,l=_Mathmax(0,l),u){for(var f=0;f<r;f++)u.words[f]=this.words[f];u.length=r}if(0===r);else if(this.length>r)for(this.length-=r,f=0;f<this.length;f++)this.words[f]=this.words[f+r];else this.words[0]=0,this.length=1;var i=0;for(f=this.length-1;0<=f&&(0!=i||f>=l);f--){var m=0|this.words[f];this.words[f]=i<<26-c|m>>>c,i=m&s}return u&&0!=i&&(u.words[u.length++]=i),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},d.prototype.ishrn=function t(n,a,r){return o(0===this.negative),this.iushrn(n,a,r)},d.prototype.shln=function t(n){return this.clone().ishln(n)},d.prototype.ushln=function t(n){return this.clone().iushln(n)},d.prototype.shrn=function t(n){return this.clone().ishrn(n)},d.prototype.ushrn=function t(n){return this.clone().iushrn(n)},d.prototype.testn=function t(n){o('number'==typeof n&&0<=n);var a=n%26,r=(n-a)/26,i=1<<a;if(this.length<=r)return!1;var s=this.words[r];return!!(s&i)},d.prototype.imaskn=function t(n){o('number'==typeof n&&0<=n);var a=n%26,r=(n-a)/26;if(o(0===this.negative,'imaskn works only with positive numbers'),this.length<=r)return this;if(0!=a&&r++,this.length=_Mathmin(r,this.length),0!=a){var i=67108863^67108863>>>a<<a;this.words[this.length-1]&=i}return this.strip()},d.prototype.maskn=function t(n){return this.clone().imaskn(n)},d.prototype.iaddn=function t(n){return o('number'==typeof n),o(67108864>n),0>n?this.isubn(-n):0===this.negative?this._iaddn(n):1===this.length&&(0|this.words[0])<n?(this.words[0]=n-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(n),this.negative=1,this)},d.prototype._iaddn=function t(n){this.words[0]+=n;for(var a=0;a<this.length&&67108864<=this.words[a];a++)this.words[a]-=67108864,a===this.length-1?this.words[a+1]=1:this.words[a+1]++;return this.length=_Mathmax(this.length,a+1),this},d.prototype.isubn=function t(n){if(o('number'==typeof n),o(67108864>n),0>n)return this.iaddn(-n);if(0!==this.negative)return this.negative=0,this.iaddn(n),this.negative=1,this;if(this.words[0]-=n,1===this.length&&0>this.words[0])this.words[0]=-this.words[0],this.negative=1;else for(var a=0;a<this.length&&0>this.words[a];a++)this.words[a]+=67108864,this.words[a+1]-=1;return this.strip()},d.prototype.addn=function t(n){return this.clone().iaddn(n)},d.prototype.subn=function t(n){return this.clone().isubn(n)},d.prototype.iabs=function t(){return this.negative=0,this},d.prototype.abs=function t(){return this.clone().iabs()},d.prototype._ishlnsubmul=function t(n,a,r){var s=n.length+r,d;this._expand(s);var i=0,l;for(d=0;d<n.length;d++){l=(0|this.words[d+r])+i;var c=(0|n.words[d])*a;l-=67108863&c,i=(l>>26)-(0|c/67108864),this.words[d+r]=67108863&l}for(;d<this.length-r;d++)l=(0|this.words[d+r])+i,i=l>>26,this.words[d+r]=67108863&l;if(0==i)return this.strip();for(o(-1==i),i=0,d=0;d<this.length;d++)l=-(0|this.words[d])+i,i=l>>26,this.words[d]=67108863&l;return this.negative=1,this.strip()},d.prototype._wordDiv=function t(n,r){var o=this.length-n.length,s=this.clone(),l=n,c=0|l.words[l.length-1],u=this._countBits(c);o=26-u,0!=o&&(l=l.ushln(o),s.iushln(o),c=0|l.words[l.length-1]);var f=s.length-l.length,m;if('mod'!==r){m=new d(null),m.length=f+1,m.words=Array(m.length);for(var h=0;h<m.length;h++)m.words[h]=0}var i=s.clone()._ishlnsubmul(l,1,f);0===i.negative&&(s=i,m&&(m.words[f]=1));for(var g=f-1,b;0<=g;g--){for(b=67108864*(0|s.words[l.length+g])+(0|s.words[l.length+g-1]),b=_Mathmin(0|b/c,67108863),s._ishlnsubmul(l,b,g);0!==s.negative;)b--,s.negative=0,s._ishlnsubmul(l,1,g),s.isZero()||(s.negative^=1);m&&(m.words[g]=b)}return m&&m.strip(),s.strip(),'div'!==r&&0!=o&&s.iushrn(o),{div:m||null,mod:s}},d.prototype.divmod=function t(n,a,r){if(o(!n.isZero()),this.isZero())return{div:new d(0),mod:new d(0)};var i,s,l;return 0!==this.negative&&0===n.negative?(l=this.neg().divmod(n,a),'mod'!==a&&(i=l.div.neg()),'div'!==a&&(s=l.mod.neg(),r&&0!==s.negative&&s.iadd(n)),{div:i,mod:s}):0===this.negative&&0!==n.negative?(l=this.divmod(n.neg(),a),'mod'!==a&&(i=l.div.neg()),{div:i,mod:l.mod}):0==(this.negative&n.negative)?n.length>this.length||0>this.cmp(n)?{div:new d(0),mod:this}:1===n.length?'div'===a?{div:this.divn(n.words[0]),mod:null}:'mod'===a?{div:null,mod:new d(this.modn(n.words[0]))}:{div:this.divn(n.words[0]),mod:new d(this.modn(n.words[0]))}:this._wordDiv(n,a):(l=this.neg().divmod(n.neg(),a),'div'!==a&&(s=l.mod.neg(),r&&0!==s.negative&&s.isub(n)),{div:l.div,mod:s})},d.prototype.div=function t(n){return this.divmod(n,'div',!1).div},d.prototype.mod=function t(n){return this.divmod(n,'mod',!1).mod},d.prototype.umod=function t(n){return this.divmod(n,'mod',!0).mod},d.prototype.divRound=function t(n){var a=this.divmod(n);if(a.mod.isZero())return a.div;var r=0===a.div.negative?a.mod:a.mod.isub(n),i=n.ushrn(1),o=n.andln(1),s=r.cmp(i);return 0>s||1===o&&0===s?a.div:0===a.div.negative?a.div.iaddn(1):a.div.isubn(1)},d.prototype.modn=function t(n){o(67108863>=n);for(var a=67108864%n,r=0,s=this.length-1;0<=s;s--)r=(a*r+(0|this.words[s]))%n;return r},d.prototype.idivn=function t(n){o(67108863>=n);for(var a=0,r=this.length-1,i;0<=r;r--)i=(0|this.words[r])+67108864*a,this.words[r]=0|i/n,a=i%n;return this.strip()},d.prototype.divn=function t(n){return this.clone().idivn(n)},d.prototype.egcd=function t(n){o(0===n.negative),o(!n.isZero());var a=this,r=n.clone();a=0===a.negative?a.clone():a.umod(n);for(var s=new d(1),l=new d(0),c=new d(0),u=new d(1),f=0;a.isEven()&&r.isEven();)a.iushrn(1),r.iushrn(1),++f;for(var m=r.clone(),h=a.clone();!a.isZero();){for(var g=0,i=1;0==(a.words[0]&i)&&26>g;++g,i<<=1);if(0<g)for(a.iushrn(g);0<g--;)(s.isOdd()||l.isOdd())&&(s.iadd(m),l.isub(h)),s.iushrn(1),l.iushrn(1);for(var b=0,y=1;0==(r.words[0]&y)&&26>b;++b,y<<=1);if(0<b)for(r.iushrn(b);0<b--;)(c.isOdd()||u.isOdd())&&(c.iadd(m),u.isub(h)),c.iushrn(1),u.iushrn(1);0<=a.cmp(r)?(a.isub(r),s.isub(c),l.isub(u)):(r.isub(a),c.isub(s),u.isub(l))}return{a:c,b:u,gcd:r.iushln(f)}},d.prototype._invmp=function t(n){o(0===n.negative),o(!n.isZero());var r=this,a=n.clone();r=0===r.negative?r.clone():r.umod(n);for(var s=new d(1),l=new d(0),c=a.clone();0<r.cmpn(1)&&0<a.cmpn(1);){for(var u=0,i=1;0==(r.words[0]&i)&&26>u;++u,i<<=1);if(0<u)for(r.iushrn(u);0<u--;)s.isOdd()&&s.iadd(c),s.iushrn(1);for(var f=0,m=1;0==(a.words[0]&m)&&26>f;++f,m<<=1);if(0<f)for(a.iushrn(f);0<f--;)l.isOdd()&&l.iadd(c),l.iushrn(1);0<=r.cmp(a)?(r.isub(a),s.isub(l)):(a.isub(r),l.isub(s))}var h;return h=0===r.cmpn(1)?s:l,0>h.cmpn(0)&&h.iadd(n),h},d.prototype.gcd=function n(i){if(this.isZero())return i.abs();if(i.isZero())return this.abs();var o=this.clone(),a=i.clone();o.negative=0,a.negative=0;for(var s=0;o.isEven()&&a.isEven();s++)o.iushrn(1),a.iushrn(1);do{for(;o.isEven();)o.iushrn(1);for(;a.isEven();)a.iushrn(1);var d=o.cmp(a);if(0>d){var r=o;o=a,a=r}else if(0===d||0===a.cmpn(1))break;o.isub(a)}while(!0);return a.iushln(s)},d.prototype.invm=function t(n){return this.egcd(n).a.umod(n)},d.prototype.isEven=function t(){return 0==(1&this.words[0])},d.prototype.isOdd=function t(){return 1==(1&this.words[0])},d.prototype.andln=function t(n){return this.words[0]&n},d.prototype.bincn=function t(n){o('number'==typeof n);var a=n%26,r=(n-a)/26,s=1<<a;if(this.length<=r)return this._expand(r+1),this.words[r]|=s,this;for(var d=s,l=r,i;0!=d&&l<this.length;l++)i=0|this.words[l],i+=d,d=i>>>26,i&=67108863,this.words[l]=i;return 0!=d&&(this.words[l]=d,this.length++),this},d.prototype.isZero=function t(){return 1===this.length&&0===this.words[0]},d.prototype.cmpn=function t(n){var a=0>n;if(0!==this.negative&&!a)return-1;if(0===this.negative&&a)return 1;this.strip();var r;if(1<this.length)r=1;else{a&&(n=-n),o(67108863>=n,'Number is too big');var i=0|this.words[0];r=i===n?0:i<n?-1:1}return 0===this.negative?r:0|-r},d.prototype.cmp=function t(n){if(0!==this.negative&&0===n.negative)return-1;if(0===this.negative&&0!==n.negative)return 1;var a=this.ucmp(n);return 0===this.negative?a:0|-a},d.prototype.ucmp=function t(n){if(this.length>n.length)return 1;if(this.length<n.length)return-1;for(var r=0,o=this.length-1;0<=o;o--){var i=0|this.words[o],a=0|n.words[o];if(i!=a){i<a?r=-1:i>a&&(r=1);break}}return r},d.prototype.gtn=function t(n){return 1===this.cmpn(n)},d.prototype.gt=function t(n){return 1===this.cmp(n)},d.prototype.gten=function t(n){return 0<=this.cmpn(n)},d.prototype.gte=function t(n){return 0<=this.cmp(n)},d.prototype.ltn=function t(n){return-1===this.cmpn(n)},d.prototype.lt=function t(n){return-1===this.cmp(n)},d.prototype.lten=function t(n){return 0>=this.cmpn(n)},d.prototype.lte=function t(n){return 0>=this.cmp(n)},d.prototype.eqn=function t(n){return 0===this.cmpn(n)},d.prototype.eq=function t(n){return 0===this.cmp(n)},d.red=function t(n){return new v(n)},d.prototype.toRed=function t(n){return o(!this.red,'Already a number in reduction context'),o(0===this.negative,'red works only with positives'),n.convertTo(this)._forceRed(n)},d.prototype.fromRed=function t(){return o(this.red,'fromRed works only with numbers in reduction context'),this.red.convertFrom(this)},d.prototype._forceRed=function t(n){return this.red=n,this},d.prototype.forceRed=function t(n){return o(!this.red,'Already a number in reduction context'),this._forceRed(n)},d.prototype.redAdd=function t(n){return o(this.red,'redAdd works only with red numbers'),this.red.add(this,n)},d.prototype.redIAdd=function t(n){return o(this.red,'redIAdd works only with red numbers'),this.red.iadd(this,n)},d.prototype.redSub=function t(n){return o(this.red,'redSub works only with red numbers'),this.red.sub(this,n)},d.prototype.redISub=function t(n){return o(this.red,'redISub works only with red numbers'),this.red.isub(this,n)},d.prototype.redShl=function t(n){return o(this.red,'redShl works only with red numbers'),this.red.shl(this,n)},d.prototype.redMul=function t(n){return o(this.red,'redMul works only with red numbers'),this.red._verify2(this,n),this.red.mul(this,n)},d.prototype.redIMul=function t(n){return o(this.red,'redMul works only with red numbers'),this.red._verify2(this,n),this.red.imul(this,n)},d.prototype.redSqr=function t(){return o(this.red,'redSqr works only with red numbers'),this.red._verify1(this),this.red.sqr(this)},d.prototype.redISqr=function t(){return o(this.red,'redISqr works only with red numbers'),this.red._verify1(this),this.red.isqr(this)},d.prototype.redSqrt=function t(){return o(this.red,'redSqrt works only with red numbers'),this.red._verify1(this),this.red.sqrt(this)},d.prototype.redInvm=function t(){return o(this.red,'redInvm works only with red numbers'),this.red._verify1(this),this.red.invm(this)},d.prototype.redNeg=function t(){return o(this.red,'redNeg works only with red numbers'),this.red._verify1(this),this.red.neg(this)},d.prototype.redPow=function t(n){return o(this.red&&!n.red,'redPow(normalNum)'),this.red._verify1(this),this.red.pow(this,n)};var A={k256:null,p224:null,p192:null,p25519:null};h.prototype._tmp=function t(){var n=new d(null);return n.words=Array(_Mathceil(this.n/13)),n},h.prototype.ireduce=function t(n){var a=n,r;do this.split(a,this.tmp),a=this.imulK(a),a=a.iadd(this.tmp),r=a.bitLength();while(r>this.n);var i=r<this.n?-1:a.ucmp(this.p);return 0===i?(a.words[0]=0,a.length=1):0<i?a.isub(this.p):a.strip(),a},h.prototype.split=function t(n,a){n.iushrn(this.n,0,a)},h.prototype.imulK=function t(n){return n.imul(this.k)},r(g,h),g.prototype.split=function t(n,a){for(var r=4194303,o=_Mathmin(n.length,9),s=0;s<o;s++)a.words[s]=n.words[s];if(a.length=o,9>=n.length)return n.words[0]=0,void(n.length=1);var i=n.words[9];for(a.words[a.length++]=i&r,s=10;s<n.length;s++){var d=0|n.words[s];n.words[s-10]=(d&r)<<4|i>>>22,i=d}i>>>=22,n.words[s-10]=i,n.length-=0===i&&10<n.length?10:9},g.prototype.imulK=function t(n){n.words[n.length]=0,n.words[n.length+1]=0,n.length+=2;for(var a=0,r=0,i;r<n.length;r++)i=0|n.words[r],a+=977*i,n.words[r]=67108863&a,a=64*i+(0|a/67108864);return 0===n.words[n.length-1]&&(n.length--,0===n.words[n.length-1]&&n.length--),n},r(b,h),r(y,h),r(w,h),w.prototype.imulK=function t(n){for(var a=0,r=0;r<n.length;r++){var i=19*(0|n.words[r])+a,o=67108863&i;i>>>=26,n.words[r]=o,a=i}return 0!=a&&(n.words[n.length++]=a),n},d._prime=function t(n){if(A[n])return A[n];var t;if('k256'===n)t=new g;else if('p224'===n)t=new b;else if('p192'===n)t=new y;else if('p25519'===n)t=new w;else throw new Error('Unknown prime '+n);return A[n]=t,t},v.prototype._verify1=function t(n){o(0===n.negative,'red works only with positives'),o(n.red,'red works only with red numbers')},v.prototype._verify2=function t(n,a){o(0==(n.negative|a.negative),'red works only with positives'),o(n.red&&n.red===a.red,'red works only with red numbers')},v.prototype.imod=function t(n){return this.prime?this.prime.ireduce(n)._forceRed(this):n.umod(this.m)._forceRed(this)},v.prototype.neg=function t(n){return n.isZero()?n.clone():this.m.sub(n)._forceRed(this)},v.prototype.add=function t(n,a){this._verify2(n,a);var r=n.add(a);return 0<=r.cmp(this.m)&&r.isub(this.m),r._forceRed(this)},v.prototype.iadd=function t(n,a){this._verify2(n,a);var r=n.iadd(a);return 0<=r.cmp(this.m)&&r.isub(this.m),r},v.prototype.sub=function t(n,a){this._verify2(n,a);var r=n.sub(a);return 0>r.cmpn(0)&&r.iadd(this.m),r._forceRed(this)},v.prototype.isub=function t(n,a){this._verify2(n,a);var r=n.isub(a);return 0>r.cmpn(0)&&r.iadd(this.m),r},v.prototype.shl=function t(n,a){return this._verify1(n),this.imod(n.ushln(a))},v.prototype.imul=function t(n,a){return this._verify2(n,a),this.imod(n.imul(a))},v.prototype.mul=function t(n,a){return this._verify2(n,a),this.imod(n.mul(a))},v.prototype.isqr=function t(n){return this.imul(n,n.clone())},v.prototype.sqr=function t(n){return this.mul(n,n)},v.prototype.sqrt=function n(l){if(l.isZero())return l.clone();var a=this.m.andln(3);if(o(1==a%2),3===a){var u=this.m.add(new d(1)).iushrn(2);return this.pow(l,u)}for(var f=this.m.subn(1),h=0;!f.isZero()&&0===f.andln(1);)h++,f.iushrn(1);o(!f.isZero());var s=new d(1).toRed(this),g=s.redNeg(),y=this.m.subn(1).iushrn(1),w=this.m.bitLength();for(w=new d(2*w*w).toRed(this);0!==this.pow(w,y).cmp(g);)w.redIAdd(g);for(var v=this.pow(w,f),c=this.pow(l,f.addn(1).iushrn(1)),r=this.pow(l,f),t=h;0!==r.cmp(s);){for(var m=r,x=0;0!==m.cmp(s);x++)m=m.redSqr();o(x<t);var i=this.pow(v,new d(1).iushln(t-x-1));c=c.redMul(i),v=i.redSqr(),r=r.redMul(v),t=x}return c},v.prototype.invm=function t(n){var a=n._invmp(this.m);return 0===a.negative?this.imod(a):(a.negative=0,this.imod(a).redNeg())},v.prototype.pow=function t(n,a){if(a.isZero())return new d(1).toRed(this);if(0===a.cmpn(1))return n.clone();var r=4,o=Array(1<<r);o[0]=new d(1).toRed(this),o[1]=n;for(var s=2;s<o.length;s++)o[s]=this.mul(o[s-1],n);var i=o[0],l=0,c=0,u=a.bitLength()%26;for(0==u&&(u=26),s=a.length-1;0<=s;s--){for(var f=a.words[s],m=u-1,h;0<=m;m--){if(h=1&f>>m,i!==o[0]&&(i=this.sqr(i)),0==h&&0==l){c=0;continue}l<<=1,l|=h,c++,c!=r&&(0!==s||0!==m)||(i=this.mul(i,o[l]),c=0,l=0)}u=26}return i},v.prototype.convertTo=function t(n){var a=n.umod(this.m);return a===n?a.clone():a},v.prototype.convertFrom=function t(n){var a=n.clone();return a.red=null,a},d.mont=function t(n){return new x(n)},r(x,v),x.prototype.convertTo=function t(n){return this.imod(n.ushln(this.shift))},x.prototype.convertFrom=function t(n){var a=this.imod(n.mul(this.rinv));return a.red=null,a},x.prototype.imul=function n(r,a){if(r.isZero()||a.isZero())return r.words[0]=0,r.length=1,r;var i=r.imul(a),t=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=i.isub(t).iushrn(this.shift),s=o;return 0<=o.cmp(this.m)?s=o.isub(this.m):0>o.cmpn(0)&&(s=o.iadd(this.m)),s._forceRed(this)},x.prototype.mul=function n(r,a){if(r.isZero()||a.isZero())return new d(0)._forceRed(this);var i=r.mul(a),t=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=i.isub(t).iushrn(this.shift),s=o;return 0<=o.cmp(this.m)?s=o.isub(this.m):0>o.cmpn(0)&&(s=o.iadd(this.m)),s._forceRed(this)},x.prototype.invm=function t(n){var a=this.imod(n._invmp(this.m).mul(this.r2));return a._forceRed(this)}})('undefined'==typeof t||t,this)}).call(n,a(9)(t))},function(t,n,a){'use strict';function r(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0;var i=a(275),o=r(i);n.default=o.default||function(t){for(var n=1,a;n<arguments.length;n++)for(var r in a=arguments[n],a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r]);return t}},function(t,n,a){var r=a(12),i=a(18),o=a(60),s=a(44),d='prototype',l=function(t,n,a){var c=t&l.F,u=t&l.G,f=t&l.S,m=t&l.P,h=t&l.B,g=t&l.W,b=u?i:i[n]||(i[n]={}),y=b[d],w=u?r:f?r[n]:(r[n]||{})[d],v,x,_;for(v in u&&(a=n),a)x=!c&&w&&void 0!==w[v],x&&v in b||(_=x?w[v]:a[v],b[v]=u&&'function'!=typeof w[v]?a[v]:h&&x?o(_,r):g&&w[v]==_?function(t){var n=function(n,a,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(n);case 2:return new t(n,a);}return new t(n,a,r)}return t.apply(this,arguments)};return n[d]=t[d],n}(_):m&&'function'==typeof _?o(Function.call,_):_,m&&((b.virtual||(b.virtual={}))[v]=_,t&l.R&&y&&!y[v]&&s(y,v,_)))};l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,t.exports=l},function(t,n,a){var r=a(45);t.exports=function(t){if(!r(t))throw TypeError(t+' is not an object!');return t}},function(t,n,a){t.exports=!a(61)(function(){return 7!=Object.defineProperty({},'a',{get:function(){return 7}}).a})},function(t,n){t.exports=__WEBPACK_EXTERNAL_MODULE_39__},function(t,n,a){function r(t){o.call(this),this.hashMode='string'==typeof t,this.hashMode?this[t]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}var i=a(3).Buffer,o=a(53).Transform,s=a(107).StringDecoder,d=a(0);d(r,o),r.prototype.update=function(t,n,a){'string'==typeof t&&(t=i.from(t,n));var r=this._update(t);return this.hashMode?this:(a&&(r=this._toString(r,a)),r)},r.prototype.setAutoPadding=function(){},r.prototype.getAuthTag=function(){throw new Error('trying to get auth tag in unsupported state')},r.prototype.setAuthTag=function(){throw new Error('trying to set auth tag in unsupported state')},r.prototype.setAAD=function(){throw new Error('trying to set aad in unsupported state')},r.prototype._transform=function(t,n,a){var r;try{this.hashMode?this._update(t):this.push(this._update(t))}catch(t){r=t}finally{a(r)}},r.prototype._flush=function(t){var n;try{this.push(this.__final())}catch(t){n=t}t(n)},r.prototype._finalOrDigest=function(t){var n=this.__final()||i.alloc(0);return t&&(n=this._toString(n,t,!0)),n},r.prototype._toString=function(t,n,a){if(this._decoder||(this._decoder=new s(n),this._encoding=n),this._encoding!==n)throw new Error('can\'t switch encodings');var r=this._decoder.write(t);return a&&(r+=this._decoder.end()),r},t.exports=r},function(t,n,a){'use strict';function r(t,n){if(!(t instanceof n))throw new TypeError('Cannot call a class as a function')}function i(t,n){if(!t)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return n&&('object'==typeof n||'function'==typeof n)?n:t}function o(t,n){if('function'!=typeof n&&null!==n)throw new TypeError('Super expression must either be null or a function, not '+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}var s=function(){function t(t,n){for(var a=0,r;a<n.length;a++)r=n[a],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}return function(n,a,r){return a&&t(n.prototype,a),r&&t(n,r),n}}(),d=a(49),l=a(17),c=function(t){function n(t){r(this,n);var a=i(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));if(a.termType=n.termType,t){if('string'!=typeof t)throw console.log('Bad blank id:',t),new Error('Bad id argument to new blank node: '+t);if(t.includes('#')){var o=t.split('#');t=o[o.length-1]}a.id=t}else a.id='n'+n.nextId++;return a.value=a.id,a}return o(n,t),s(n,[{key:'compareTerm',value:function t(n){return this.classOrder<n.classOrder?-1:this.classOrder>n.classOrder?1:this.id<n.id?-1:this.id>n.id?1:0}},{key:'copy',value:function t(a){var r=new n;return a.copyTo(this,r),r}},{key:'toCanonical',value:function t(){return'_:'+this.value}},{key:'toString',value:function t(){return n.NTAnonymousNodePrefix+this.id}}]),n}(l);c.nextId=0,c.termType='BlankNode',c.NTAnonymousNodePrefix='_:',c.prototype.classOrder=d.BlankNode,c.prototype.isBlank=1,c.prototype.isVar=1,t.exports=c},function(t,n,a){'use strict';t.exports={debug:function t(n){},warn:function t(n){},info:function t(n){},error:function t(n){},success:function t(n){},msg:function t(n){}}},function(t,n,a){'use strict';function r(t){return this instanceof r?void(u.call(this,t),f.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once('end',i)):new r(t)}function i(){this.allowHalfOpen||this._writableState.ended||d(o,this)}function o(t){t.end()}function s(t,n){for(var a=0,r=t.length;a<r;a++)n(t[a],a)}var d=a(74).nextTick,l=Object.keys||function(t){var n=[];for(var a in t)n.push(a);return n};t.exports=r;var c=a(58);c.inherits=a(0);var u=a(154),f=a(106);c.inherits(r,u);for(var m=l(f.prototype),h=0,g;h<m.length;h++)g=m[h],r.prototype[g]||(r.prototype[g]=f.prototype[g]);Object.defineProperty(r.prototype,'destroyed',{get:function(){return void 0===this._readableState||void 0===this._writableState?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(t){void 0===this._readableState||void 0===this._writableState||(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),r.prototype._destroy=function(t,n){this.push(null),this.end(),d(n,t)}},function(t,n,a){var r=a(33),i=a(62);t.exports=a(38)?function(t,n,a){return r.f(t,n,i(1,a))}:function(t,n,a){return t[n]=a,t}},function(t,n){t.exports=function(t){return'object'==typeof t?null!==t:'function'==typeof t}},function(t,n){var a={}.hasOwnProperty;t.exports=function(t,n){return a.call(t,n)}},function(t,n,a){t.exports={default:a(283),__esModule:!0}},function(t,n,a){t.exports=a(325).default,t.exports.default=t.exports},function(t,n,a){'use strict';var r={Literal:1,Collection:3,Graph:4,NamedNode:5,BlankNode:6,Variable:7};t.exports=r},function(t,n,a){'use strict';function r(t,n){if(!(t instanceof n))throw new TypeError('Cannot call a class as a function')}function i(t,n){if(!t)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return n&&('object'==typeof n||'function'==typeof n)?n:t}function o(t,n){if('function'!=typeof n&&null!==n)throw new TypeError('Super expression must either be null or a function, not '+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}var s='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&'function'==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?'symbol':typeof t},d=function(){function t(t,n){for(var a=0,r;a<n.length;a++)r=n[a],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}return function(n,a,r){return a&&t(n.prototype,a),r&&t(n,r),n}}(),l=a(49),c=a(10),u=a(17),f=a(146),m=function(t){function n(t,a,o){r(this,n);var s=i(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return s.termType=n.termType,s.value=t,a&&(s.lang=a,o=f.langString),o&&(s.datatype=c.fromValue(o)),s}return o(n,t),d(n,[{key:'copy',value:function t(){return new n(this.value,this.lang,this.datatype)}},{key:'equals',value:function t(n){return!!n&&this.termType===n.termType&&this.value===n.value&&this.language===n.language&&(!this.datatype&&!n.datatype||this.datatype&&this.datatype.equals(n.datatype))}},{key:'toNT',value:function t(){if('number'==typeof this.value)return this.toString();if('string'!=typeof this.value)throw new Error('Value of RDF literal is not string or number: '+this.value);var n=this.value;return n=n.replace(/\\/g,'\\\\'),n=n.replace(/\"/g,'\\"'),n=n.replace(/\n/g,'\\n'),n='"'+n+'"',this.language?n+='@'+this.language:!this.datatype.equals(f.string)&&(n+='^^'+this.datatype.toCanonical()),n}},{key:'toString',value:function t(){return''+this.value}},{key:'language',get:function t(){return this.lang},set:function t(n){this.lang=n||''}}],[{key:'fromBoolean',value:function t(a){var r=a?'1':'0';return new n(r,null,f.boolean)}},{key:'fromDate',value:function t(a){if(!(a instanceof Date))throw new TypeError('Invalid argument to Literal.fromDate()');var r=function t(n){return(''+(100+n)).slice(1,3)},i=''+a.getUTCFullYear()+'-'+r(a.getUTCMonth()+1)+'-'+r(a.getUTCDate())+'T'+r(a.getUTCHours())+':'+r(a.getUTCMinutes())+':'+r(a.getUTCSeconds())+'Z';return new n(i,null,f.dateTime)}},{key:'fromNumber',value:function t(a){if('number'!=typeof a)throw new TypeError('Invalid argument to Literal.fromNumber()');var r=a.toString(),i;return i=0>r.indexOf('e')&&_Mathabs(a)<=Number.MAX_SAFE_INTEGER?Number.isInteger(a)?f.integer:f.decimal:f.double,new n(r,null,i)}},{key:'fromValue',value:function t(a){if('undefined'==typeof a||null===a)return a;if('object'===('undefined'==typeof a?'undefined':s(a))&&a.termType)return a;switch('undefined'==typeof a?'undefined':s(a)){case'object':if(a instanceof Date)return n.fromDate(a);case'boolean':return n.fromBoolean(a);case'number':return n.fromNumber(a);case'string':return new n(a);}throw new Error('Can\'t make literal from '+a+' of type '+('undefined'==typeof a?'undefined':s(a)))}}]),n}(u);m.termType='Literal',m.prototype.classOrder=l.Literal,m.prototype.datatype=f.string,m.prototype.lang='',m.prototype.isVar=0,t.exports=m},function(t,n){t.exports=__WEBPACK_EXTERNAL_MODULE_51__},function(t,n){},function(t,n,a){function r(){i.call(this)}t.exports=r;var i=a(104).EventEmitter,o=a(0);o(r,i),r.Readable=a(105),r.Writable=a(267),r.Duplex=a(268),r.Transform=a(269),r.PassThrough=a(270),r.Stream=r,r.prototype.pipe=function(t,n){function a(n){t.writable&&!1===t.write(n)&&c.pause&&c.pause()}function r(){c.readable&&c.resume&&c.resume()}function o(){u||(u=!0,t.end())}function s(){u||(u=!0,'function'==typeof t.destroy&&t.destroy())}function d(t){if(l(),0===i.listenerCount(this,'error'))throw t}function l(){c.removeListener('data',a),t.removeListener('drain',r),c.removeListener('end',o),c.removeListener('close',s),c.removeListener('error',d),t.removeListener('error',d),c.removeListener('end',l),c.removeListener('close',l),t.removeListener('close',l)}var c=this;c.on('data',a),t.on('drain',r),t._isStdio||n&&!1===n.end||(c.on('end',o),c.on('close',s));var u=!1;return c.on('error',d),t.on('error',d),c.on('end',l),c.on('close',l),t.on('close',l),t.emit('pipe',c),t}},function(t,n,a){var r=a(165),i=a(116);t.exports=function(t){return r(i(t))}},function(t,n,a){'use strict';(function(n,r){function i(){throw new Error('Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11')}function o(t,a){if(65536<t)throw new Error('requested too many random bytes');var i=new n.Uint8Array(t);0<t&&d.getRandomValues(i);var o=s.from(i.buffer);return'function'==typeof a?r.nextTick(function(){a(null,o)}):o}var s=a(3).Buffer,d=n.crypto||n.msCrypto;t.exports=d&&d.getRandomValues?o:i}).call(n,a(5),a(11))},function(t,n,a){function r(t,n){this._block=o.alloc(t),this._finalSize=n,this._blockSize=t,this._len=0}var o=a(3).Buffer;r.prototype.update=function(t,n){'string'==typeof t&&(n=n||'utf8',t=o.from(t,n));for(var a=this._block,r=this._blockSize,s=t.length,d=this._len,l=0;l<s;){for(var c=d%r,u=_Mathmin(s-l,r-c),f=0;f<u;f++)a[c+f]=t[l+f];d+=u,l+=u,0==d%r&&this._update(a)}return this._len+=s,this},r.prototype.digest=function(t){var n=this._len%this._blockSize;this._block[n]=128,this._block.fill(0,n+1),n>=this._finalSize&&(this._update(this._block),this._block.fill(0));var a=8*this._len;if(4294967295>=a)this._block.writeUInt32BE(a,this._blockSize-4);else{var r=(4294967295&a)>>>0,i=(a-r)/4294967296;this._block.writeUInt32BE(i,this._blockSize-8),this._block.writeUInt32BE(r,this._blockSize-4)}this._update(this._block);var o=this._hash();return t?o.toString(t):o},r.prototype._update=function(){throw new Error('_update must be implemented by subclass')},t.exports=r},function(t,n,a){(function(t){function r(t,n){this._id=t,this._clearFn=n}var i=Function.prototype.apply;n.setTimeout=function(){return new r(i.call(setTimeout,window,arguments),clearTimeout)},n.setInterval=function(){return new r(i.call(setInterval,window,arguments),clearInterval)},n.clearTimeout=n.clearInterval=function(t){t&&t.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},n.enroll=function(t,n){clearTimeout(t._idleTimeoutId),t._idleTimeout=n},n.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},n._unrefActive=n.active=function(t){clearTimeout(t._idleTimeoutId);var n=t._idleTimeout;0<=n&&(t._idleTimeoutId=setTimeout(function n(){t._onTimeout&&t._onTimeout()},n))},a(256),n.setImmediate='undefined'!=typeof self&&self.setImmediate||'undefined'!=typeof t&&t.setImmediate||this&&this.setImmediate,n.clearImmediate='undefined'!=typeof self&&self.clearImmediate||'undefined'!=typeof t&&t.clearImmediate||this&&this.clearImmediate}).call(n,a(5))},function(t,n,a){(function(t){function a(t){return Array.isArray?Array.isArray(t):'[object Array]'===y(t)}function r(t){return'boolean'==typeof t}function i(t){return null===t}function o(t){return null==t}function s(t){return'number'==typeof t}function d(t){return'string'==typeof t}function l(t){return'symbol'==typeof t}function c(t){return void 0===t}function u(t){return'[object RegExp]'===y(t)}function f(t){return'object'==typeof t&&null!==t}function m(t){return'[object Date]'===y(t)}function h(t){return'[object Error]'===y(t)||t instanceof Error}function g(t){return'function'==typeof t}function b(t){return null===t||'boolean'==typeof t||'number'==typeof t||'string'==typeof t||'symbol'==typeof t||'undefined'==typeof t}function y(t){return Object.prototype.toString.call(t)}n.isArray=a,n.isBoolean=r,n.isNull=i,n.isNullOrUndefined=o,n.isNumber=s,n.isString=d,n.isSymbol=l,n.isUndefined=c,n.isRegExp=u,n.isObject=f,n.isDate=m,n.isError=h,n.isFunction=g,n.isPrimitive=b,n.isBuffer=t.isBuffer}).call(n,a(2).Buffer)},function(t,n,a){'use strict';function r(t){return function(n){return new i(t+(n||''))}}var i=a(10);t.exports=r},function(t,n,a){var r=a(80);t.exports=function(t,n,a){return(r(t),void 0===n)?t:1===a?function(r){return t.call(n,r)}:2===a?function(r,a){return t.call(n,r,a)}:3===a?function(r,a,i){return t.call(n,r,a,i)}:function(){return t.apply(n,arguments)}}},function(t,n){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,n){t.exports=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}}},function(t,n){var a={}.toString;t.exports=function(t){return a.call(t).slice(8,-1)}},function(t,n){t.exports={}},function(t,n,a){'use strict';var r=a(132),i=a(197),o=a(334),s=a(335),d=a(203),l=a(200),c=a(202),u=a(90),f=a(198),m=a(201),h=a(199);t.exports={JWA:r,JWK:i,JWKSet:o,JWT:s,JWS:d,Base64URLSchema:l,JOSEHeaderSchema:c,JWKSchema:u,JWKSetSchema:f,JWTClaimsSetSchema:m,JWTSchema:h}},function(t,n,a){'use strict';(function(n){function r(t){c.call(this,'digest'),this._hash=t,this.buffers=[]}function i(t){c.call(this,'digest'),this._hash=t}var o=a(0),s=a(134),d=a(135),l=a(136),c=a(40);o(r,c),r.prototype._update=function(t){this.buffers.push(t)},r.prototype._final=function(){var t=n.concat(this.buffers),a=this._hash(t);return this.buffers=null,a},o(i,c),i.prototype._update=function(t){this._hash.update(t)},i.prototype._final=function(){return this._hash.digest()},t.exports=function t(n){return n=n.toLowerCase(),'md5'===n?new r(s):'rmd160'===n||'ripemd160'===n?new i(new d()):new i(l(n))}}).call(n,a(2).Buffer)},function(t,n,a){(function(n){t.exports=function t(r,a){for(var o=_Mathmin(r.length,a.length),s=new n(o),d=0;d<o;++d)s[d]=r[d]^a[d];return s}}).call(n,a(2).Buffer)},function(t,n,a){'use strict';function r(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian='big',this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}var o=a(27),i=a(21);n.BlockHash=r,r.prototype.update=function t(n,a){if(n=o.toArray(n,a),this.pending=this.pending?this.pending.concat(n):n,this.pendingTotal+=n.length,this.pending.length>=this._delta8){n=this.pending;var s=n.length%this._delta8;this.pending=n.slice(n.length-s,n.length),0===this.pending.length&&(this.pending=null),n=o.join32(n,0,n.length-s,this.endian);for(var r=0;r<n.length;r+=this._delta32)this._update(n,r,r+this._delta32)}return this},r.prototype.digest=function t(n){return this.update(this._pad()),i(null===this.pending),this._digest(n)},r.prototype._pad=function n(){var a=this.pendingTotal,r=this._delta8,o=r-(a+this.padLength)%r,s=Array(o+this.padLength);s[0]=128;for(var d=1;d<o;d++)s[d]=0;if(a<<=3,'big'===this.endian){for(var i=8;i<this.padLength;i++)s[d++]=0;s[d++]=0,s[d++]=0,s[d++]=0,s[d++]=0,s[d++]=255&a>>>24,s[d++]=255&a>>>16,s[d++]=255&a>>>8,s[d++]=255&a}else for(s[d++]=255&a,s[d++]=255&a>>>8,s[d++]=255&a>>>16,s[d++]=255&a>>>24,s[d++]=0,s[d++]=0,s[d++]=0,s[d++]=0,i=8;i<this.padLength;i++)s[d++]=0;return s}},function(t,n,a){var r=n;r.bignum=a(417),r.define=a(419).define,r.base=a(70),r.constants=a(236),r.decoders=a(425),r.encoders=a(427)},function(t,n,a){var r=n;r.Reporter=a(422).Reporter,r.DecoderBuffer=a(235).DecoderBuffer,r.EncoderBuffer=a(235).EncoderBuffer,r.Node=a(423)},function(t,n,a){'use strict';t.exports={textInputStyle:'background-color: #eef; padding: 0.5em;  border: .5em solid white; font-size: 100%;',buttonStyle:'background-color: #fff; padding: 0.5em;  border: .5em solid white; font-size: 100%;',pendingeditModifier:'color: #bbb;'}},function(t,n,a){'use strict';function r(t,n){if(!(t instanceof n))throw new TypeError('Cannot call a class as a function')}function i(t,n){if(!t)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return n&&('object'==typeof n||'function'==typeof n)?n:t}function o(t,n){if('function'!=typeof n&&null!==n)throw new TypeError('Super expression must either be null or a function, not '+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}function s(t,n,a,r){var i=t.any(n,a,void 0);return!!i&&(t.equate(i,r),!0)}function d(t,n,a,r){var i=t.any(void 0,a,r);return!!i&&(t.equate(i,n),!0)}function l(t,n,a,r,o){t.typeCallback&&t.typeCallback(t,r,o);var s=t.classActions[r.hashString()],d=!1;if(s)for(var l=0;l<s.length;l++)d=d||s[l](t,n,a,r,o);return d}Object.defineProperty(n,'__esModule',{value:!0});var c=function(){function t(t,n){for(var a=0,r;a<n.length;a++)r=n[a],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}return function(n,a,r){return a&&t(n.prototype,a),r&&t(n,r),n}}(),u=a(32).ArrayIndexOf,f=a(147),m=a(32).RDFArrayRemove,g=a(75),b=a(17),h=a(76),y='http://www.w3.org/2002/07/owl#',w=function(t){function n(t){r(this,n);var a=i(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return a.propertyActions=[],a.classActions=[],a.redirections=[],a.aliases=[],a.HTTPRedirects=[],a.subjectIndex=[],a.predicateIndex=[],a.objectIndex=[],a.whyIndex=[],a.index=[a.subjectIndex,a.predicateIndex,a.objectIndex,a.whyIndex],a.namespaces={},a.features=t||['sameAs','InverseFunctionalProperty','FunctionalProperty'],a.initPropertyActions(a.features),a}return o(n,t),c(n,[{key:'substitute',value:function t(a){var r=this.statements.map(function(t){return t.substitute(a)}),i=new n;return i.add(r),i}},{key:'applyPatch',value:function t(n,r,i){var o=a(77).Query,s=this,d=null,l=function t(a){if(n['delete']){c=n['delete'],d&&(c=c.substitute(d)),c=c.statements;var o=[],l=c.map(function(t){var n=s.statementsMatching(t.subject,t.predicate,t.object,r);return 0===n.length?(o.push(t),null):n[0]});if(o.length)return i('Could not find to delete: '+o.join('\n or '));l.map(function(t){s.remove(t)})}n.insert&&(c=n.insert,d&&(c=c.substitute(d)),c=c.statements,c.map(function(t){t.why=r,s.add(t.subject,t.predicate,t.object,t.why)})),a()},c;if(n.where){var u=new o('patch');u.pat=n.where,u.pat.statements.map(function(t){t.why=r});var f=[];s.query(u,function t(n){f.push(n)},s.fetcher,function t(){return 0===f.length?i('No match found to be patched:'+n.where):1<f.length?i('Patch ambiguous. No patch done.'):void(d=f[0],l(i))})}else l(i)}},{key:'declareExistential',value:function t(n){return this._existentialVariables||(this._existentialVariables=[]),this._existentialVariables.push(n),n}},{key:'initPropertyActions',value:function t(n){this.propertyActions['<http://www.w3.org/1999/02/22-rdf-syntax-ns#type>']=[l],0<=u(n,'sameAs')&&(this.propertyActions['<http://www.w3.org/2002/07/owl#sameAs>']=[function(t,n,a,r,i){return t.equate(n,r),!0}]),0<=u(n,'InverseFunctionalProperty')&&(this.classActions['<'+y+'InverseFunctionalProperty>']=[function(t,n,a,r,i){return t.newPropertyAction(n,d)}]),0<=u(n,'FunctionalProperty')&&(this.classActions['<'+y+'FunctionalProperty>']=[function(t,n,a,r,i){return t.newPropertyAction(n,s)}])}},{key:'add',value:function t(a,r,o,s){var d;if(1===arguments.length){if(a instanceof Array)for(d=0;d<a.length;d++)this.add(a[d]);else a instanceof g?this.add(a.subject,a.predicate,a.object,a.why):a instanceof n&&this.add(a.statements);return this}var i,l;s||(s=this.fetcher?this.fetcher.appNode:this.sym('chrome:theSession')),a=b.fromValue(a),r=b.fromValue(r),o=b.fromValue(o),s=b.fromValue(s),this.predicateCallback&&this.predicateCallback(this,r,s);var c=this.canon(r).hashString();i=this.propertyActions[c];var u=!1;if(i)for(d=0;d<i.length;d++)u=u||i[d](this,a,r,o,s);if(this.holds(a,r,o,s))return null;var f=[this.canon(a).hashString(),c,this.canon(o).hashString(),this.canon(s).hashString()];for(l=new g(a,r,o,s),d=0;4>d;d++){var m=this.index[d],y=f[d];m[y]||(m[y]=[]),m[y].push(l)}return this.statements.push(l),l}},{key:'addAll',value:function t(n){var a=this;n.forEach(function(t){a.add(t.subject,t.predicate,t.object,t.graph)})}},{key:'any',value:function t(n,a,r,i){var o=this.anyStatementMatching(n,a,r,i);if(null!=o)return null==n?o.subject:null==a?o.predicate:null==r?o.object:void 0}},{key:'anyValue',value:function t(n,a,r,i){var o=this.any(n,a,r,i);return o?o.value:void 0}},{key:'anyStatementMatching',value:function t(n,a,r,i){var o=this.statementsMatching(n,a,r,i,!0);return o&&0!==o.length?o[0]:void 0}},{key:'canon',value:function t(n){if(!n)return n;var a=this.redirections[n.hashString()];return a?a:n}},{key:'check',value:function t(){this.checkStatementList(this.statements);for(var n=0,a;4>n;n++)for(var r in a=this.index[n],a)a.hasOwnProperty(r)&&this.checkStatementList(a[r],n)}},{key:'checkStatementList',value:function t(n,a){for(var r=['subject','predicate','object','why'],i=' found in '+r[a]+' index.',o=0,s;o<n.length;o++){s=n[o];for(var d=[s.subject,s.predicate,s.object,s.why],l=function t(n,a){for(var r=0;r<n.length;r++)if(n[r].subject.sameTerm(a.subject)&&n[r].predicate.sameTerm(a.predicate)&&n[r].object.sameTerm(a.object)&&n[r].why.sameTerm(a.why))return!0},u=0;4>u;u++){var f=this.canon(d[u]),c=f.hashString();this.index[u][c]&&l(this.index[u][c],s)}if(!l(this.statements,s))throw new Error('Statement list does not statement '+s+'@'+s.why+i)}}},{key:'close',value:function t(){return this}},{key:'copyTo',value:function t(n,a,r){r||(r=[]);var o=this.statementsMatching(n);-1!==u(r,'two-direction')&&o.concat(this.statementsMatching(void 0,void 0,n));for(var s=0,i;s<o.length;s++){switch(i=o[s],i.object.termType){case'NamedNode':this.add(a,i.predicate,i.object);break;case'Literal':case'BlankNode':case'Collection':this.add(a,i.predicate,i.object.copy(this));}-1!==u(r,'delete')&&this.remove(i)}}},{key:'equate',value:function t(n,a){n=this.canon(n),a=this.canon(a);var r=n.compareTerm(a);return!r||(0>r?this.replaceWith(a,n):this.replaceWith(n,a))}},{key:'formula',value:function t(a){return new n(a)}},{key:'match',value:function t(n,a,r,i){return this.statementsMatching(b.fromValue(n),b.fromValue(a),b.fromValue(r),b.fromValue(i))}},{key:'mentionsURI',value:function t(n){var a='<'+n+'>';return!!this.subjectIndex[a]||!!this.objectIndex[a]||!!this.predicateIndex[a]}},{key:'newExistential',value:function t(n){if(!n)return this.bnode();var a=this.sym(n);return this.declareExistential(a)}},{key:'newPropertyAction',value:function t(n,a){var r=n.hashString();this.propertyActions[r]||(this.propertyActions[r]=[]),this.propertyActions[r].push(a);for(var o=this.statementsMatching(void 0,n,void 0),s=!1,d=0;d<o.length;d++)s=s||a(this,o[d].subject,n,o[d].object);return s}},{key:'newUniversal',value:function t(n){var a=this.sym(n);return this._universalVariables||(this._universalVariables=[]),this._universalVariables.push(a),a}},{key:'variable',value:function t(n){return new h(n)}},{key:'nextSymbol',value:function t(n){for(var a=0,r;;a++)if(r=n.uri+'#n'+a,!this.mentionsURI(r))return this.sym(r)}},{key:'query',value:function t(n,r,i,o){var s=a(77).indexedFormulaQuery;return s.call(this,n,r,i,o)}},{key:'remove',value:function t(a){if(a instanceof Array){for(var r=0;r<a.length;r++)this.remove(a[r]);return this}if(a instanceof n)return this.remove(a.statements);var i=this.statementsMatching(a.subject,a.predicate,a.object,a.why);if(!i.length)throw new Error('Statement to be removed is not on store: '+a);return this.removeStatement(i[0]),this}},{key:'removeDocument',value:function t(n){for(var a=this.statementsMatching(void 0,void 0,void 0,n).slice(),r=0;r<a.length;r++)this.removeStatement(a[r]);return this}},{key:'removeMany',value:function t(n,a,r,o,s){for(var d=this.statementsMatching(n,a,r,o,!1),l=[],c=0;c<d.length;c++)l.push(d[c]);for(s&&(l=l.slice(0,s)),c=0;c<l.length;c++)this.remove(l[c])}},{key:'removeMatches',value:function t(n,a,r,i){return this.removeStatements(this.statementsMatching(n,a,r,i)),this}},{key:'removeStatement',value:function t(n){for(var a=[n.subject,n.predicate,n.object,n.why],r=0;4>r;r++){var i=this.canon(a[r]),o=i.hashString();this.index[r][o]&&m(this.index[r][o],n)}return m(this.statements,n),this}},{key:'removeStatements',value:function t(n){for(var a=0;a<n.length;a++)this.remove(n[a]);return this}},{key:'replaceWith',value:function t(n,a){for(var r=n.hashString(),o=a.hashString(),s=function t(n){var a=n[r];if(a){var i=n[o];n[o]=i?a.concat(i):a,delete n[r]}},d=0;4>d;d++)s(this.index[d]);if(this.redirections[r]=a,n.uri){if(this.aliases[o]||(this.aliases[o]=[]),this.aliases[o].push(n),this.aliases[r])for(d=0;d<this.aliases[r].length;d++)this.redirections[this.aliases[r][d].hashString()]=a,this.aliases[o].push(this.aliases[r][d]);this.add(a,this.sym('http://www.w3.org/2007/ont/link#uri'),n.uri),this.fetcher&&this.fetcher.nowKnownAs(n,a)}return s(this.classActions),s(this.propertyActions),!0}},{key:'allAliases',value:function t(n){var r=this.aliases[this.canon(n).hashString()]||[];return r.push(this.canon(n)),r}},{key:'sameThings',value:function t(n,a){if(n.sameTerm(a))return!0;var r=this.canon(n);if(!r)return!1;var i=this.canon(a);return!!i&&r.uri===i.uri}},{key:'setPrefixForURI',value:function t(n,a){'tab'===n&&this.namespaces.tab||'ns'===n.slice(0,2)||'default'===n.slice(0,7)||(this.namespaces[n]=a)}},{key:'statementsMatching',value:function t(n,a,r,o,s){var d=[n,a,r,o],l=[],c=[],u=[],f=[],m,h;for(m=0;4>m;m++)l[m]=this.canon(b.fromValue(d[m])),l[m]?(f.push(m),c[m]=l[m].hashString()):u.push(m);if(0===f.length)return this.statements;if(1===f.length)return m=f[0],h=this.index[m][c[m]],h&&s&&1<h.length&&(h=h.slice(0,1)),h=h||[],h;var g=1e10,y,w;for(w=0;w<f.length;w++){if(m=f[w],h=this.index[m][c[m]],!h)return[];h.length<g&&(g=h.length,y=w)}for(var i=f[y],v=this.index[i][c[i]],x=f.slice(0,y).concat(f.slice(y+1)),_=[],k=['subject','predicate','object','why'],C=0,E;C<v.length;C++){for(E=v[C],w=0;w<x.length;w++)if(m=x[w],!this.canon(E[k[m]]).sameTerm(l[m])){E=null;break}if(null!=E&&(_.push(E),s))break}return _}},{key:'uris',value:function t(n){var a=this.canon(n),r=this.aliases[a.hashString()];if(!a.uri)return[];var o=[a.uri];if(r)for(var s=0;s<r.length;s++)o.push(r[s].uri);return o}},{key:'length',get:function t(){return this.statements.length}}]),n}(f);n.default=w,w.handleRDFType=l},function(t,n,a){'use strict';function r(t,n){if(!(t instanceof n))throw new TypeError('Cannot call a class as a function')}function i(t,n){if(!t)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return n&&('object'==typeof n||'function'==typeof n)?n:t}function o(t,n){if('function'!=typeof n&&null!==n)throw new TypeError('Super expression must either be null or a function, not '+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}var s=function(){function t(t,n){for(var a=0,r;a<n.length;a++)r=n[a],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}return function(n,a,r){return a&&t(n.prototype,a),r&&t(n,r),n}}(),d=a(41),l=a(49),c=a(17),u=function(t){function n(t){r(this,n);var a=i(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return a.termType=n.termType,a.id=d.nextId++,a.elements=[],a.closed=!1,t&&0<t.length&&t.forEach(function(t){a.elements.push(c.fromValue(t))}),a}return o(n,t),s(n,[{key:'append',value:function t(n){return this.elements.push(n)}},{key:'close',value:function t(){return this.closed=!0,this.closed}},{key:'shift',value:function t(){return this.elements.shift()}},{key:'substitute',value:function t(a){var r=this.elements.map(function(t){t.substitute(a)});return new n(r)}},{key:'toNT',value:function t(){return d.NTAnonymousNodePrefix+this.id}},{key:'toString',value:function t(){return'('+this.elements.join(' ')+')'}},{key:'unshift',value:function t(n){return this.elements.unshift(n)}}]),n}(c);u.termType='Collection',u.prototype.classOrder=l.Collection,u.prototype.compareTerm=d.prototype.compareTerm,u.prototype.isVar=0,t.exports=u},function(t,n,a){'use strict';(function(n){function a(t,a,r,o){if('function'!=typeof t)throw new TypeError('"callback" argument must be a function');var s=arguments.length,d,l;switch(s){case 0:case 1:return n.nextTick(t);case 2:return n.nextTick(function n(){t.call(null,a)});case 3:return n.nextTick(function n(){t.call(null,a,r)});case 4:return n.nextTick(function n(){t.call(null,a,r,o)});default:for(d=Array(s-1),l=0;l<d.length;)d[l++]=arguments[l];return n.nextTick(function n(){t.apply(null,d)});}}t.exports=n.version&&0!==n.version.indexOf('v0.')&&(0!==n.version.indexOf('v1.')||0===n.version.indexOf('v1.8.'))?n:{nextTick:a}}).call(n,a(11))},function(t,n,a){'use strict';function r(t,n){if(!(t instanceof n))throw new TypeError('Cannot call a class as a function')}var i=function(){function t(t,n){for(var a=0,r;a<n.length;a++)r=n[a],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}return function(n,a,r){return a&&t(n.prototype,a),r&&t(n,r),n}}(),o=a(17),s=function(){function t(n,a,i,s){r(this,t),this.subject=o.fromValue(n),this.predicate=o.fromValue(a),this.object=o.fromValue(i),this.why=s}return i(t,[{key:'equals',value:function t(n){return n.subject.equals(this.subject)&&n.predicate.equals(this.predicate)&&n.object.equals(this.object)&&n.graph.equals(this.graph)}},{key:'substitute',value:function n(a){var r=new t(this.subject.substitute(a),this.predicate.substitute(a),this.object.substitute(a),this.why.substitute(a));return console.log('@@@ statement substitute:'+r),r}},{key:'toCanonical',value:function t(){var n=[this.subject.toCanonical(),this.predicate.toCanonical(),this.object.toCanonical()];return this.graph&&'DefaultGraph'!==this.graph.termType&&n.push(this.graph.toCanonical()),n.join(' ')+' .'}},{key:'toNT',value:function t(){return[this.subject.toNT(),this.predicate.toNT(),this.object.toNT()].join(' ')+' .'}},{key:'toString',value:function t(){return this.toNT()}},{key:'graph',get:function t(){return this.why},set:function t(n){this.why=n}}]),t}();t.exports=s},function(t,n,a){'use strict';function r(t,n){if(!(t instanceof n))throw new TypeError('Cannot call a class as a function')}function i(t,n){if(!t)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return n&&('object'==typeof n||'function'==typeof n)?n:t}function o(t,n){if('function'!=typeof n&&null!==n)throw new TypeError('Super expression must either be null or a function, not '+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}var s=function(){function t(t,n){for(var a=0,r;a<n.length;a++)r=n[a],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}return function(n,a,r){return a&&t(n.prototype,a),r&&t(n,r),n}}(),d=a(49),l=a(17),c=a(16),u=function(t){function n(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:'';r(this,n);var a=i(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return a.termType=n.termType,a.value=t,a.base='varid:',a.uri=c.join(t,a.base),a}return o(n,t),s(n,[{key:'equals',value:function t(n){return!!n&&this.termType===n.termType&&this.value===n.value}},{key:'hashString',value:function t(){return this.toString()}},{key:'substitute',value:function t(n){var a;return null==(a=n[this.toNT()])?this:a}},{key:'toString',value:function t(){return this.uri.slice(0,this.base.length)===this.base?'?'+this.uri.slice(this.base.length):'?'+this.uri}}]),n}(l);u.termType='Variable',u.prototype.classOrder=d.Variable,u.prototype.isVar=1,t.exports=u},function(t,n,a){'use strict';function r(t){return t&&t.__esModule?t:{default:t}}function i(t,n){if(!(t instanceof n))throw new TypeError('Cannot call a class as a function')}function o(t,n,a,r){function o(t,n){return t.nvars===n.nvars?t.index.length-n.index.length:t.nvars-n.nvars}var s=function t(n){var a='',r;for(r in n)n.hasOwnProperty(r)&&(a+='    '+r+' -> '+n[r]);return a},i=function t(a){var r='Bindings: ',o=a.length,n;for(n=0;n<o;n++)r+=s(a[n][0])+';\n\t';return r},d=function t(n,a,r,i){var o=r[n];if(void 0===o){if(n.isVar){var s=[];return s[n]=a,[[s,null]]}o=n}if(!o.complexType)return i.redirections[o]&&(o=i.redirections[o]),i.redirections[a]&&(a=i.redirections[a]),o.sameTerm(a)?[[[],null]]:[];if(n instanceof Array)return a instanceof Array?u(n,a,r):[];throw new Error('query.js: oops - code not written yet')},u=function t(a,r,o,s){var l;if(a.length!==r.length)return[];if(!a.length)return[[[],null]];var c=d(a[0],r[0],o,s);if(0===c.length)return c;var u=[],f=c.length,n,i,h,g,m,b,y;for(n=0;n<f;n++){for(m in i=c[n][0],y=[],i)i.hasOwnProperty(m)&&(y[m]=i[m]);for(m in o)o.hasOwnProperty(m)&&(y[m]=o[m]);for(l=t(a.slice(1),r.slice(1),y,s),g=l.length,h=0;h<g;h++){for(m in b=l[h][0],i)i.hasOwnProperty(m)&&(b[m]=i[m]);u.push([b,null])}}return u},m=function t(n,a){var r=a[n];return void 0===r?n:r},h=function t(n,a){var r={},i;for(i in n)n.hasOwnProperty(i)&&(r[i]=n[i]);for(i in a)a.hasOwnProperty(i)&&(r[i]=a[i]);return r},y=function t(n,a){return this.trunkBindings=a,this.originalCallback=n,this.branches=[],this};y.prototype.checkAllDone=function(){var t;for(t=0;t<this.branches.length;t++)if(!this.branches[t].done)return;l.debug('OPTIONAL BIDNINGS ALL DONE:'),this.doCallBacks(this.branches.length-1,this.trunkBindings)},y.prototype.doCallBacks=function(t,n){var a;if(0>t)return this.originalCallback(n);for(a=0;a<this.branches[t].results.length;a++)this.doCallBacks(t-1,h(n,this.branches[t].results[a]))};var g=function t(n,a){return this.count=0,this.success=!1,this.done=!1,this.callback=n,this.onDone=a,this};g.prototype.reportMatch=function(t){this.callback(t),this.success=!0},g.prototype.reportDone=function(){this.done=!0,l.info('Mandatory query branch finished.***'),void 0!==this.onDone&&this.onDone()};var w=function t(n){return this.count=0,this.done=!1,this.results=[],this.junction=n,n.branches.push(this),this};w.prototype.reportMatch=function(t){this.results.push(t)},w.prototype.reportDone=function(){l.debug('Optional branch finished - results.length = '+this.results.length),0===this.results.length&&(this.results.push({}),l.debug('Optional branch FAILED - that\'s OK.')),this.done=!0,this.junction.checkAllDone()};var b=function n(a,r,o){var s,t,d,l,i;for(r.nvars=0,r.index=null,t=[r.subject,r.predicate,r.object],i=[a.subjectIndex,a.predicateIndex,a.objectIndex],l=0;3>l;l++)if(t[l].isVar&&void 0===o[t[l]])r.nvars++;else{if(s=m(t[l],o),a.redirections[s.hashString()]&&(s=a.redirections[s.hashString()]),d=i[l][s.hashString()],!d)return r.index=[],!1;(null===r.index||r.index.length>d.length)&&(r.index=d)}return null===r.index&&(r.index=a.statements),!0},v=0,x=function t(a,r,o,d,u,f,m){l.debug('Match begins, Branch count now: '+m.count+' for '+m.pattern_debug);var h=a.fetcher?a.fetcher:null,g=r.statements;if(0===g.length){if(l.debug('FOUND MATCH WITH BINDINGS:'+s(o)),0===r.optional.length)m.reportMatch(o);else{l.debug('OPTIONAL: '+r.optional);var x=new y(n,o),_=[],C;for(C=0;C<r.optional.length;C++)_[C]=new w(x),_[C].pattern_debug=r.optional[C];for(C=0;C<r.optional.length;C++)++_[C].count,t(a,r.optional[C],o,'',u,n,_[C])}return m.count--,void l.debug('Match ends -- success , Branch count now: '+m.count+' for '+m.pattern_debug)}var b=g.length,E,T;if(h){var i='match'+v++,A=function n(i,s){var l=i.uri.split('#')[0];h.nowOrWhenFetched(l,void 0,function(n,s,l){n||console.log('Error following link to <'+i.uri+'> in query: '+s),t(a,r,o,d,u,f,m)})};for(T=0;T<b;T++){if(E=g[T],void 0!==o[E.subject]&&o[E.subject].uri&&h&&'unrequested'===h.getState(c(o[E.subject].uri)))return void A(o[E.subject],i);if(void 0!==o[E.object]&&o[E.object].uri&&h&&'unrequested'===h.getState(c(o[E.object].uri)))return void A(o[E.object],i)}}k(a,r,o,d,u,f,m)},_=function t(n,a){var r=!0,i,o;for(i in n)n.hasOwnProperty(i)&&a[i]&&(o=a[i].test,o&&!o(n[i])&&(r=!1));return r},k=function t(a,r,d,f,m,h,g){var y=r.statements,w=y.length,n,C,k,E,v,T,A;for(n=0;n<w;n++)A=y[n],l.info('match2: item='+A+', bindingsSoFar='+s(d)),b(a,A,d);y.sort(o),A=y[0];var S=a.formula();S.optional=r.optional,S.constraints=r.constraints,S.statements=y.slice(1),l.debug(f+'match2 searching '+A.index.length+' for '+A+'; bindings so far='+s(d));var I=A.index.length,N=0,j,c,L;for(j=0;j<I;j++)for(L=A.index[j],c=u([A.subject,A.predicate,A.object],[L.subject,L.predicate,L.object],d,a),l.info(f+' From first: '+c.length+': '+i(c)),k=c.length,C=0;C<k;C++)if(v=[],T=c[C][0],!_(T,r.constraints))l.debug('Branch count CS: '+g.count);else{for(E in T)T.hasOwnProperty(E)&&(v[E]=T[E]);for(E in d)d.hasOwnProperty(E)&&(v[E]=d[E]);g.count++,N++,x(a,S,v,f+'  ',m,h,g)}g.count--,0==N&&l.debug('Match2 fails completely on '+A),l.debug('Match2 ends, Branch count: '+g.count+' for '+g.pattern_debug),0===g.count&&(l.debug('Branch finished.'),g.reportDone())},C=this;l.debug('Query on '+this.statements.length);var f=new g(n,r);return f.count++,void setTimeout(function(){x(C,t.pat,t.pat.initBindings,'',a,n,f)},0)}var s=a(72),d=r(s),l=a(42),c=a(16).docpart,u=function t(n,a){i(this,t),this.pat=new d.default,this.vars=[],this.name=n,this.id=a};t.exports.Query=u,t.exports.indexedFormulaQuery=o},function(t,n,a){'use strict';function r(t){return t&&t.__esModule?t:{default:t}}function i(t){return new v(t)}function o(t){return new x(t)}function s(){return new _}function d(t,n){return new k(t,n)}function l(){return new w.default}function c(t,n,a){return new C(''+t,n,a)}function u(t,n){return'string'==typeof n?-1===n.indexOf(':')?new C(t,n):new C(t,null,f(n)):new C(t,null,n)}function f(t){return new E(t)}function m(t,n,a,r){return r=r||new _,new T(t,n,a,r)}function h(t,n,a,r){return new T(t,n,a,r)}function g(t,n,a){return m(t,n,a)}function b(t){return new A(t)}var y=a(72),w=r(y),v=a(41),x=a(73),_=a(273),k=a(111),C=a(50),E=a(10),T=a(75),A=a(76);t.exports.blankNode=i,t.exports.defaultGraph=s,t.exports.graph=l,t.exports.literal=u,t.exports.namedNode=f,t.exports.quad=m,t.exports.triple=g,t.exports.variable=b,t.exports.collection=o,t.exports.fetcher=d,t.exports.lit=c,t.exports.st=h},function(t,n,a){'use strict';var r='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&'function'==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?'symbol':typeof t},i=a(16),o=a(32).ArrayIndexOf,s=function(){function n(t){return encodeURI(t)}function t(t){this.details=t}function a(t,n,a,r,i,o,d,l){return new s(t,n,a,r,i,o,d,l)}function s(t,n,a,r,i,o,s,d){'undefined'==typeof n&&(n=null),'undefined'==typeof a&&(a=''),'undefined'==typeof r&&(r=null),'undefined'==typeof i&&(i=''),'undefined'==typeof o&&(o=null),'undefined'==typeof s&&(s=''),'undefined'==typeof d&&(d=null),this._bindings=new v([]),this._flags=s,''!=a&&(S(0<=a.indexOf(':'),'Document URI not absolute: '+a),this._bindings['']=a+'#'),this._store=t,i&&t.setGenPrefix(i),this._thisDoc=a,this.source=t.sym(a),this.lines=0,this.statementCount=0,this.startOfLine=0,this.previousLine=0,this._genPrefix=i,this.keywords=new _(['a','this','bind','has','is','of','true','false']),this.keywordsSet=0,this._anonymousNodes=new v([]),this._variables=new v([]),this._parentVariables=new v([]),this._reason=d,this._reason2=null,j,this._baseURI=r?r:a?a:null,S(!this._baseURI||0<=this._baseURI.indexOf(':')),this._genPrefix||(this._thisDoc?this._genPrefix=this._thisDoc+'#_g':this._genPrefix=RDFSink_uniqueURI()),this._formula=null==n?this._thisDoc?t.formula(a+'#_formula'):t.formula():n,this._context=this._formula,this._parentContext=null}function d(t,n,a,r,i){return new l(t,n,a,r,i)}function l(t,n,a,r,i){this._str=a.encode('utf-8'),this._str=a,this._i=r,this._why=i,this.lines=n,this._uri=t}function c(t,n,a,r,i){return'Line '+(n+1)+' of <'+t+'>: Bad syntax: '+i+'\nat: "'+C(a,r,r+30)+'"'}function u(t){var n='',a=new E(t);try{for(;!0;){var r=a.next();if('\r'!=r)var n=n+r}}catch(t){if(t!=k)throw t}return n}function f(t){}var m=String.prototype,h={encode:function t(a){a=a.replace(/\r\n/g,'\n');for(var r='',i=0,n;i<a.length;i++)n=a.charCodeAt(i),128>n?r+=_StringfromCharCode(n):127<n&&2048>n?(r+=_StringfromCharCode(192|n>>6),r+=_StringfromCharCode(128|63&n)):(r+=_StringfromCharCode(224|n>>12),r+=_StringfromCharCode(128|63&n>>6),r+=_StringfromCharCode(128|63&n));return r},decode:function t(n){for(var a='',r=0,i;r<n.length;)i=n.charCodeAt(r),128>i?(a+=_StringfromCharCode(i),r++):191<i&&224>i?(a+=_StringfromCharCode((31&i)<<6|63&n.charCodeAt(r+1)),r+=2):(a+=_StringfromCharCode((15&i)<<12|(63&n.charCodeAt(r+1))<<6|63&n.charCodeAt(r+2)),r+=3);return a}},g='http://www.w3.org/2000/10/swap/log#forSome',b='http://www.w3.org/2000/10/swap/log#forAll',y='http://www.w3.org/2000/10/swap/log#',w=function t(n){return n},_=function t(n){return n},v=function t(n){if(0<n.length)throw'missing.js: oops nnonempty dict not imp';return[]},x=function t(n){return n.length},C=function t(n,a,i){if('undefined'==typeof n.slice)throw'@@ mising.js: No .slice function for '+n+' of type '+('undefined'==typeof n?'undefined':r(n));return'undefined'==typeof i||null==i?n.slice(a):n.slice(a,i)},k=Error('dummy error stop iteration'),E=function t(n){return this.last=0,this.li=n,this.next=function(){if(this.last==this.li.length)throw k;return this.li[this.last++]},this},T=function t(n){return n.charCodeAt(0)},A=function t(n,a){return n.indexOf(a)},S=function t(n,a){if(!n){if(a)throw'python Assertion failed: '+a;throw'(python) Assertion failed.'}},I=function t(n){return _StringfromCharCode(n)};m.encode=function(t){if('utf-8'!=t)throw'UTF8_converter: can only do utf-8';return h.encode(this)},m.decode=function(t){if('utf-8'!=t)throw'UTF8_converter: can only do utf-8';return this};var N=function t(n,a){return i.join(a,n)},L=null,j=0,R=0,M=function t(n){},D='http://www.w3.org/1999/02/22-rdf-syntax-ns#type',P='http://www.w3.org/2002/07/owl#sameAs',O='#',B='http://www.w3.org/2000/10/swap/log#implies',U='http://www.w3.org/2001/XMLSchema#integer',F='http://www.w3.org/2001/XMLSchema#double',q='http://www.w3.org/2001/XMLSchema#decimal',z='http://www.w3.org/2001/XMLSchema#date',H='http://www.w3.org/2001/XMLSchema#dateTime',W='http://www.w3.org/2001/XMLSchema#boolean',V=0,G='\t\r\n !"#$%&\'()*.,+/;<=>?@[\\]^`{|}~',J=G+':',K='http://www.w3.org/1999/02/22-rdf-syntax-ns#',X='#',Y=/^[ \t]*(#[^\n]*)?\r?\n/g,Z=/^[ \t]*(#[^\n]*)?$/g,Q=/^[ \t]*/g,ee=/^[-+]?[0-9]+/g,te=/^([-+]?[0-9]+)(\.[0-9]+)?(e[-+]?[0-9]+)?/g,ne=/^[0-9][0-9][0-9][0-9]-[0-9][0-9]-[0-9][0-9](T[0-9][0-9]:[0-9][0-9](:[0-9][0-9](\.[0-9]*)?)?)?Z?/,ae=/^[0-9]+/g,re=/[\\\r\n\"]/g,ie=/^[a-zA-Z0-9]+(-[a-zA-Z0-9]+)*/g;return s.prototype.here=function(t){return this._genPrefix+'_L'+this.lines+'C'+(t-this.startOfLine+1)},s.prototype.formula=function(){return this._formula},s.prototype.loadStream=function(t){return this.loadBuf(t.read())},s.prototype.loadBuf=function(t){return this.startDoc(),this.feed(t),this.endDoc()},s.prototype.feed=function(t){for(var n=t.decode('utf-8'),a=0,r;0<=a;){if(r=this.skipSpace(n,a),0>r)return;var a=this.directiveOrStatement(n,r);if(0>a)throw c(this._thisDoc,this.lines,n,r,'expected directive or statement')}},s.prototype.directiveOrStatement=function(t,n){var a=this.skipSpace(t,n);if(0>a)return a;var r=this.directive(t,a);if(0<=r)return this.checkDot(t,r);var r=this.statement(t,a);return 0<=r?this.checkDot(t,r):r},s.prototype.tok=function(t,n,a){var r='\t\n\x0B\f\r ';if('@'==C(n,a,a+1))var a=a+1;else if(0>o(this.keywords,t))return-1;var i=a+x(t);return C(n,a,i)==t&&0<=G.indexOf(n.charAt(i))?i:-1},s.prototype.directive=function(a,r){var i=this.skipSpace(a,r);if(0>i)return i;var s=new _([]),i=this.tok('bind',a,r);if(0<i)throw c(this._thisDoc,this.lines,a,r,'keyword bind is obsolete: use @prefix');var i=this.tok('keywords',a,r);if(0<i){var r=this.commaSeparatedList(a,i,s,!1);if(0>r)throw c(this._thisDoc,this.lines,a,r,'\'@keywords\' needs comma separated list of words');return this.setKeywords(C(s,null,null)),80<R,r}var i=this.tok('forAll',a,r);if(0<i){var r=this.commaSeparatedList(a,i,s,!0);if(0>r)throw c(this._thisDoc,this.lines,a,r,'Bad variable list after @forAll');var d=new E(s);try{for(;!0;){var l=d.next();(0>o(this._variables,l)||0<=o(this._parentVariables,l))&&(this._variables[l]=this._context.newUniversal(l))}}catch(t){if(t!=k)throw t}return r}var i=this.tok('forSome',a,r);if(0<i){var r=this.commaSeparatedList(a,i,s,this.uri_ref2);if(0>r)throw c(this._thisDoc,this.lines,a,r,'Bad variable list after @forSome');var d=new E(s);try{for(;!0;){var l=d.next();this._context.declareExistential(l)}}catch(t){if(t!=k)throw t}return r}var i=this.tok('prefix',a,r);if(0<=i){var u=new _([]),r=this.qname(a,i,u);if(0>r)throw c(this._thisDoc,this.lines,a,i,'expected qname after @prefix');var i=this.uri_ref2(a,r,u);if(0>i)throw c(this._thisDoc,this.lines,a,r,'expected <uriref> after @prefix _qname_');var t=u[1].uri;if(this._baseURI)var t=N(this._baseURI,t);else S(0<=t.indexOf(':'),'With no base URI, cannot handle relative URI for NS');return S(0<=t.indexOf(':')),this._bindings[u[0][0]]=t,this.bind(u[0][0],n(t)),i}var i=this.tok('base',a,r);if(0<=i){var u=new _([]),r=this.uri_ref2(a,i,u);if(0>r)throw c(this._thisDoc,this.lines,a,i,'expected <uri> after @base ');var t=u[0].uri;if(this._baseURI)var t=N(this._baseURI,t);else throw c(this._thisDoc,this.lines,a,i,'With no previous base URI, cannot use relative URI in @base  <'+t+'>');return S(0<=t.indexOf(':')),this._baseURI=t,r}return-1},s.prototype.bind=function(t,n){''==t||this._store.setPrefixForURI(t,n)},s.prototype.setKeywords=function(t){null==t?this.keywordsSet=0:(this.keywords=t,this.keywordsSet=1)},s.prototype.startDoc=function(){},s.prototype.endDoc=function(){return this._formula},s.prototype.makeStatement=function(t){t[0].add(t[2],t[1],t[3],this.source),this.statementCount+=1},s.prototype.statement=function(t,n){var a=new _([]),n=this.object(t,n,a);if(0>n)return n;var r=this.property_list(t,n,a[0]);if(0>r)throw c(this._thisDoc,this.lines,t,n,'expected propertylist');return r},s.prototype.subject=function(t,n,a){return this.item(t,n,a)},s.prototype.verb=function(t,n,a){var i=this.skipSpace(t,n);if(0>i)return i;var o=new _([]),i=this.tok('has',t,n);if(0<=i){var n=this.prop(t,i,o);if(0>n)throw c(this._thisDoc,this.lines,t,i,'expected property after \'has\'');return a.push(new w(['->',o[0]])),n}var i=this.tok('is',t,n);if(0<=i){var n=this.prop(t,i,o);if(0>n)throw c(this._thisDoc,this.lines,t,i,'expected <property> after \'is\'');var i=this.skipSpace(t,n);if(0>i){throw c(this._thisDoc,this.lines,t,n,'End of file found, expected property after \'is\'');return i}var n=i,i=this.tok('of',t,n);if(0>i)throw c(this._thisDoc,this.lines,t,n,'expected \'of\' after \'is\' <prop>');return a.push(new w(['<-',o[0]])),i}var i=this.tok('a',t,n);if(0<=i)return a.push(new w(['->',this._store.sym(D)])),i;if('<='==C(t,n,n+2))return a.push(new w(['<-',this._store.sym(y+'implies')])),n+2;if('='==C(t,n,n+1))return'>'==C(t,n+1,n+2)?(a.push(new w(['->',this._store.sym(y+'implies')])),n+2):(a.push(new w(['->',this._store.sym(P)])),n+1);if(':='==C(t,n,n+2))return a.push(new w(['->',y+'becomes'])),n+2;var i=this.prop(t,n,o);if(0<=i)return a.push(new w(['->',o[0]])),i;if('>-'==C(t,n,n+2)||'<-'==C(t,n,n+2))throw c(this._thisDoc,this.lines,t,i,'>- ... -> syntax is obsolete.');return-1},s.prototype.prop=function(t,n,a){return this.item(t,n,a)},s.prototype.item=function(t,n,a){return this.path(t,n,a)},s.prototype.blankNode=function(t){return this._context.bnode(t,this._reason2)},s.prototype.path=function(t,n,a){var r=this.nodeOrLiteral(t,n,a);if(0>r)return r;for(;0<='!^.'.indexOf(C(t,r,r+1));){var i=C(t,r,r+1);if('.'==i){var o=C(t,r+1,r+2);if(!o||0<=J.indexOf(o)&&0>':?<[{('.indexOf(o))break}var s=a.pop(),d=this.blankNode(this.here(r)),r=this.node(t,r+1,a);if(0>r)throw c(this._thisDoc,this.lines,t,r,'EOF found in middle of path syntax');var l=a.pop();'^'==i?this.makeStatement(new w([this._context,l,d,s])):this.makeStatement(new w([this._context,l,s,d])),a.push(d)}return r},s.prototype.anonymousNode=function(t){var n=this._anonymousNodes[t];if(n)return n;var n=this._store.bnode(t);return this._anonymousNodes[t]=n,n},s.prototype.node=function(t,n,a,r){'undefined'==typeof r&&(r=null);var i=r,o=this.skipSpace(t,n);if(0>o)return o;var n=o,s=C(t,n,n+1);if('['==s){var d=this.here(n),o=this.skipSpace(t,n+1);if(0>o)throw c(this._thisDoc,this.lines,t,n,'EOF after \'[\'');if('='==C(t,o,o+1)){var n=o+1,l=new _([]),o=this.objectList(t,n,l);if(0<=o){var i=l[0];if(1<x(l)){var u=new E(l);try{for(;!0;){var f=u.next();this.makeStatement(new w([this._context,this._store.sym(P),i,f]))}}catch(t){if(t!=k)throw t}}var o=this.skipSpace(t,o);if(0>o)throw c(this._thisDoc,this.lines,t,n,'EOF when objectList expected after [ = ');if(';'==C(t,o,o+1))var o=o+1}else throw c(this._thisDoc,this.lines,t,n,'objectList expected after [= ')}if(null==i)var i=this.blankNode(d);var n=this.property_list(t,o,i);if(0>n)throw c(this._thisDoc,this.lines,t,o,'property_list expected');var o=this.skipSpace(t,n);if(0>o)throw c(this._thisDoc,this.lines,t,n,'EOF when \']\' expected after [ <propertyList>');if(']'!=C(t,o,o+1))throw c(this._thisDoc,this.lines,t,o,'\']\' expected');return a.push(i),o+1}if('{'==s){var m=C(t,n+1,n+2);if('$'==m){n+=1;for(var o=n+1,h=new _([]),g=!0,n;1;){if(n=this.skipSpace(t,o),0>n)throw c(this._thisDoc,this.lines,t,n,'needed \'$}\', found end.');if('$}'==C(t,n,n+2)){var o=n+2;break}if(!!g)var g=!1;else if(','==C(t,n,n+1))n+=1;else throw c(this._thisDoc,this.lines,t,n,'expected: \',\'');var b=new _([]),o=this.item(t,n,b);if(0>o)throw c(this._thisDoc,this.lines,t,n,'expected item in set or \'$}\'');h.push(b[0])}return a.push(this._store.newSet(h,this._context)),o}var o=n+1,y=this._parentContext;this._parentContext=this._context;var T=this._anonymousNodes,A=this._parentVariables;this._parentVariables=this._variables,this._anonymousNodes=new v([]),this._variables=this._variables.slice();var S=this._reason2;if(this._reason2=L,null==i)var i=this._store.formula();for(this._context=i;1;){var n=this.skipSpace(t,o);if(0>n)throw c(this._thisDoc,this.lines,t,n,'needed \'}\', found end.');if('}'==C(t,n,n+1)){var o=n+1;break}var o=this.directiveOrStatement(t,n);if(0>o)throw c(this._thisDoc,this.lines,t,n,'expected statement or \'}\'')}return this._anonymousNodes=T,this._variables=this._parentVariables,this._parentVariables=A,this._context=this._parentContext,this._reason2=S,this._parentContext=y,a.push(i.close()),o}if('('==s){var I=this._store.list,m=C(t,n+1,n+2);if('$'==m){var I=this._store.newSet;n+=1}for(var o=n+1,h=new _([]),n;1;){if(n=this.skipSpace(t,o),0>n)throw c(this._thisDoc,this.lines,t,n,'needed \')\', found end.');if(')'==C(t,n,n+1)){var o=n+1;break}var b=new _([]),o=this.item(t,n,b);if(0>o)throw c(this._thisDoc,this.lines,t,n,'expected item in list or \')\'');h.push(b[0])}return a.push(I(h,this._context)),o}var o=this.tok('this',t,n);if(0<=o){throw c(this._thisDoc,this.lines,t,n,'Keyword \'this\' was ancient N3. Now use @forSome and @forAll keywords.');return a.push(this._context),o}var o=this.tok('true',t,n);if(0<=o)return a.push(!0),o;var o=this.tok('false',t,n);if(0<=o)return a.push(!1),o;if(null==i){var o=this.uri_ref2(t,n,a);if(0<=o)return o}return-1},s.prototype.property_list=function(t,n,a){for(;1;){var r=this.skipSpace(t,n);if(0>r){throw c(this._thisDoc,this.lines,t,n,'EOF found when expected verb in property list');return r}if(':-'==C(t,r,r+2)){var n=r+2,i=new _([]),r=this.node(t,n,i,a);if(0>r)throw c(this._thisDoc,this.lines,t,n,'bad {} or () or [] node after :- ');var n=r;continue}var n=r,o=new _([]),r=this.verb(t,n,o);if(0>=r)return n;var s=new _([]),n=this.objectList(t,r,s);if(0>n)throw c(this._thisDoc,this.lines,t,r,'objectList expected');var d=new E(s);try{for(;!0;){var l=d.next(),u=o[0],f=u[0],m=u[1];'->'==f?this.makeStatement(new w([this._context,m,a,l])):this.makeStatement(new w([this._context,m,l,a]))}}catch(t){if(t!=k)throw t}var r=this.skipSpace(t,n);if(0>r){throw c(this._thisDoc,this.lines,t,r,'EOF found in list of objects');return r}if(';'!=C(t,n,n+1))return n;var n=n+1}},s.prototype.commaSeparatedList=function(t,n,a,r){var o=this.skipSpace(t,n);if(0>o){throw c(this._thisDoc,this.lines,t,o,'EOF found expecting comma sep list');return o}if('.'==t.charAt(o))return n;if(r)var o=this.uri_ref2(t,o,a);else var o=this.bareWord(t,o,a);if(0>o)return-1;for(;1;){var n=this.skipSpace(t,o);if(0>n)return n;var i=C(t,n,n+1);if(','!=i)return'.'==i?n:-1;if(r)var o=this.uri_ref2(t,n+1,a);else var o=this.bareWord(t,n+1,a);if(0>o){throw c(this._thisDoc,this.lines,t,o,'bad list content');return o}}},s.prototype.objectList=function(t,n,a){var n=this.object(t,n,a);if(0>n)return-1;for(;1;){var r=this.skipSpace(t,n);if(0>r){throw c(this._thisDoc,this.lines,t,r,'EOF found after object');return r}if(','!=C(t,r,r+1))return r;var n=this.object(t,r+1,a);if(0>n)return n}},s.prototype.checkDot=function(t,n){var a=this.skipSpace(t,n);if(0>a)return a;if('.'==C(t,a,a+1))return a+1;if('}'==C(t,a,a+1))return a;if(']'==C(t,a,a+1))return a;throw c(this._thisDoc,this.lines,t,a,'expected \'.\' or \'}\' or \']\' at end of statement');return n},s.prototype.uri_ref2=function(t,n,a){var r=new _([]),i=this.qname(t,n,r);if(0<=i){var s=r[0],d=s[0],l=s[1];if(null==d){S(0,'not used?');var u=this._baseURI+O}else{var u=this._bindings[d];if(!u){if('_'==d)return a.push(this.anonymousNode(l)),i;throw c(this._thisDoc,this.lines,t,n,'Prefix '+d+' not bound.')}}var f=this._store.sym(u+l);return 0<=o(this._variables,f)?a.push(this._variables[f]):a.push(f),i}var n=this.skipSpace(t,n);if(0>n)return-1;if('?'==t.charAt(n)){var m=new _([]),i=this.variable(t,n,m);return 0<i?(a.push(m[0]),i):-1}if('<'==t.charAt(n)){for(var n=n+1,h=n;n<x(t);){if('>'==t.charAt(n)){var g=C(t,h,n);if(this._baseURI)var g=N(this._baseURI,g);else S(0<=g.indexOf(':'),'With no base URI, cannot deal with relative URIs');if('#'==C(t,n-1,n)&&'#'!=C(g,-1,null))var g=g+'#';var f=this._store.sym(g);return 0<=o(this._variables,f)?a.push(this._variables[f]):a.push(f),n+1}var n=n+1}throw c(this._thisDoc,this.lines,t,i,'unterminated URI reference')}else{if(this.keywordsSet){var m=new _([]),i=this.bareWord(t,n,m);if(0>i)return-1;if(0<=o(this.keywords,m[0]))throw c(this._thisDoc,this.lines,t,n,'Keyword "'+m[0]+'" not allowed here.');return a.push(this._store.sym(this._bindings['']+m[0])),i}return-1}},s.prototype.skipSpace=function(t,n){for(var a=' \n\r\t\f\x0B\xA0\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u200B\u2028\u2029\u3000',r=n?n:0,i;r<t.length;r++)if(i=t.charAt(r),!(0>a.indexOf(i)))'\n'===t.charAt(r)&&++this.lines;else if('#'===t.charAt(r)){for(;;r++){if(r===t.length)return-1;if('\n'===t.charAt(r)){++this.lines;break}};}else return r;return-1},s.prototype.variable=function(t,n,a){var r=this.skipSpace(t,n);if(0>r)return-1;if('?'!=C(t,r,r+1))return-1;var r=r+1,n=r;if(0<='0123456789-'.indexOf(t.charAt(r))){throw c(this._thisDoc,this.lines,t,r,'Varible name can\'t start with \''+t.charAt(r)+'s\'');return-1}for(;n<x(t)&&0>J.indexOf(t.charAt(n));)var n=n+1;if(null==this._parentContext)throw c(this._thisDoc,this.lines,t,r,'Can\'t use ?xxx syntax for variable in outermost level: '+C(t,r-1,n));return a.push(this._store.variable(C(t,r,n))),n},s.prototype.bareWord=function(t,n,a){var r=this.skipSpace(t,n);if(0>r)return-1;var i=t.charAt(r);if(0<='0123456789-'.indexOf(i))return-1;if(0<=J.indexOf(i))return-1;for(var n=r,n;n<x(t)&&0>J.indexOf(t.charAt(n));)++n;return a.push(C(t,r,n)),n},s.prototype.qname=function(t,n,a){var n=this.skipSpace(t,n);if(0>n)return-1;var r=t.charAt(n);if(0<='0123456789-+'.indexOf(r))return-1;if(0>J.indexOf(r))for(var i=r,n=n+1,r;n<x(t)&&(r=t.charAt(n),0>J.indexOf(r));)var i=i+r,n=n+1;else var i='';if(n<x(t)&&':'==t.charAt(n)){for(var s=i,n=n+1,i='',r;n<x(t)&&(r=t.charAt(n),0>J.indexOf(r));)var i=i+r,n=n+1;return a.push(new w([s,i])),n}return i&&this.keywordsSet&&0>o(this.keywords,i)?(a.push(new w(['',i])),n):-1},s.prototype.object=function(t,n,a){var r=this.subject(t,n,a);if(0<=r)return r;var r=this.skipSpace(t,n);if(0>r)return-1;var n=r,i=null,o=t.charAt(n);if('"'==o||'\''==o){i=t.slice(n,n+3==o+o)?o+o+o:o;var n=n+x(i),d=this.strconst(t,n,i),r=d[0],l=d[1];return a.push(this._store.literal(l)),M('New string const ',l,r),r}return-1},s.prototype.nodeOrLiteral=function(t,n,a){var r=this.node(t,n,a);if(0<=r)return r;var r=this.skipSpace(t,n);if(0>r)return-1;var n=r,i=t.charAt(n);if(0<='-+0987654321'.indexOf(i)){ne.lastIndex=0;var o=ne.exec(t.slice(n));if(null!=o){var d=o[0];r=n+d.length,0<=d.indexOf('T')?a.push(this._store.literal(d,void 0,this._store.sym(H))):a.push(this._store.literal(d,void 0,this._store.sym(z)))}else{te.lastIndex=0;var o=te.exec(t.slice(n));if(null==o)throw c(this._thisDoc,this.lines,t,n,'Bad number or date syntax');r=n+te.lastIndex;var d=C(t,n,r);0<=d.indexOf('e')?a.push(this._store.literal(parseFloat(d),void 0,this._store.sym(F))):0<=C(t,n,r).indexOf('.')?a.push(this._store.literal(parseFloat(d),void 0,this._store.sym(q))):a.push(this._store.literal(parseInt(d),void 0,this._store.sym(U)))};return r}if('"'==t.charAt(n)){if('"""'==C(t,n,n+3))var l='"""';else var l='"';var n=n+x(l),u=null,f=this.strconst(t,n,l),r=f[0],m=f[1],s=null;if('@'==C(t,r,r+1)){ie.lastIndex=0;var o=ie.exec(t.slice(r+1));if(null==o)throw c(this._thisDoc,startline,t,n,'Bad language code syntax on string literal, after @');var n=ie.lastIndex+r+1,s=C(t,r+1,n),r=n}if('^^'==C(t,r,r+2))var h=new _([]),r=this.uri_ref2(t,r+2,h),u=h[0];return a.push(this._store.literal(m,s,u)),r}return-1},s.prototype.strconst=function(t,n,a){for(var r=n,i='',o=this.lines,n;r<x(t);){if(n=r+x(a),C(t,r,n)==a)return new w([n,i]);if('"'==t.charAt(r)){var i=i+'"',r=r+1;continue}re.lastIndex=0;var s=re.exec(t.slice(r));if(!s)throw c(this._thisDoc,o,t,r,'Closing quote missing in string at ^ in '+C(t,r-20,r)+'^'+C(t,r,r+20));var n=r+re.lastIndex-1,i=i+C(t,r,n),d=t.charAt(n);if('"'==d){var r=n;continue}else if('\r'==d){var r=n+1;continue}else if('\n'==d){if('"'==a)throw c(this._thisDoc,o,t,n,'newline found in string literal');++this.lines;var i=i+d,r=n+1;this.previousLine=this.startOfLine,this.startOfLine=r}else if('\\'==d){var r=n+1,d=C(t,r,r+1);if(!d)throw c(this._thisDoc,o,t,n,'unterminated string literal (2)');var l=A('abfrtvn\\"',d);if(0<=l)var u='a\b\f\r\t\x0B\n\\"'.charAt(l),i=i+u,r=r+1;else if('u'==d)var f=this.uEscape(t,r+1,o),r=f[0],d=f[1],i=i+d;else if('U'==d)var f=this.UEscape(t,r+1,o),r=f[0],d=f[1],i=i+d;else throw c(this._thisDoc,this.lines,t,n,'bad escape')}}throw c(this._thisDoc,this.lines,t,n,'unterminated string literal')},s.prototype.uEscape=function(t,n,a){for(var r=n,i=0,o=0;4>i;){var s=C(t,r,r+1),d=s.toLowerCase(),r=r+1;if(''==d)throw c(this._thisDoc,a,t,n,'unterminated string literal(3)');var l=A('0123456789abcdef',d);if(0>l)throw c(this._thisDoc,a,t,n,'bad string literal hex escape');var o=16*o+l,i=i+1}var u=_StringfromCharCode(o);return new w([r,u])},s.prototype.UEscape=function(t,n,a){for(var r=n,i=0,o='\\U';8>i;){var s=C(t,r,r+1),d=s.toLowerCase(),r=r+1;if(''==d)throw c(this._thisDoc,a,t,n,'unterminated string literal(3)');var l=A('0123456789abcdef',d);if(0>l)throw c(this._thisDoc,a,t,n,'bad string literal hex escape');var o=o+d,i=i+1}var u=I('0x'+C(o,2,10)-0);return new w([r,u])},l.prototype.toString=function(){var t=this._str,n=this._i,a=0;if(60<n)var r='...',a=n-60;else var r='';if(60<x(t)-n)var i='...';else var i='';return'Line %i of <%s>: Bad syntax (%s) at ^ in:\n"%s%s^%s%s"'%new w([this.lines+1,this._uri,this._why,r,C(t,a,n),C(t,n,n+60),i])},a}();t.exports=s},function(t,n){t.exports=function(t){if('function'!=typeof t)throw TypeError(t+' is not a function!');return t}},function(t,n,a){var r=a(164),i=a(121);t.exports=Object.keys||function t(n){return r(n,i)}},function(t,n){var a=0,r=Math.random();t.exports=function(t){return'Symbol('.concat(t===void 0?'':t,')_',(++a+r).toString(36))}},function(t,n){n.f={}.propertyIsEnumerable},function(t,n){t.exports=!0},function(t,n,a){var r=a(33).f,i=a(46),o=a(13)('toStringTag');t.exports=function(t,n,a){t&&!i(t=a?t:t.prototype,o)&&r(t,o,{configurable:!0,value:n})}},function(t,n,a){'use strict';function r(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0;var i=a(302),o=r(i);n.default=function(t,n,a){return n in t?(0,o.default)(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,t}},function(t,n,a){'use strict';function r(t){return t&&t.__esModule?t:{default:t}}function i(t){return{getItem:function n(a){return s.default.resolve(t.getItem(a))},setItem:function n(a,r){return s.default.resolve(t.setItem(a,r))},removeItem:function n(a){return s.default.resolve(t.removeItem(a))}}}Object.defineProperty(n,'__esModule',{value:!0}),n.postMessageStorage=n.memStorage=n.updateStorage=n.getData=n.defaultStorage=n.NAMESPACE=void 0;var o=a(47),s=r(o),d=a(181),l=r(d),c=a(6),u=r(c),f=a(7),m=r(f),h=n.getData=function(){var t=(0,m.default)(u.default.mark(function t(n){var a,r;return u.default.wrap(function t(i){for(;1;)switch(i.prev=i.next){case 0:return a=void 0,r=void 0,i.prev=2,i.next=5,n.getItem(y);case 5:a=i.sent,r=JSON.parse(a||'{}'),i.next=14;break;case 9:i.prev=9,i.t0=i['catch'](2),console.warn('Could not deserialize data:',a),console.error(i.t0),r={};case 14:return i.abrupt('return',r);case 15:case'end':return i.stop();}},t,this,[[2,9]])}));return function n(a){return t.apply(this,arguments)}}(),g=n.updateStorage=function(){var t=(0,m.default)(u.default.mark(function t(n,a){var r,i;return u.default.wrap(function t(o){for(;1;)switch(o.prev=o.next){case 0:return o.next=2,h(n);case 2:return r=o.sent,i=a(r),o.next=6,n.setItem(y,(0,l.default)(i));case 6:return o.abrupt('return',i);case 7:case'end':return o.stop();}},t,this)}));return function n(a,r){return t.apply(this,arguments)}}();n.asyncStorage=i;var b=a(182),y=n.NAMESPACE='solid-auth-client',w=n.defaultStorage=function t(){try{if(window&&window.localStorage)return i(window.localStorage)}catch(t){if(!(t instanceof ReferenceError))throw t}return console.warn('\'window.localStorage\' unavailable.  Creating a (not very useful) in-memory storage object as the default storage interface.'),i(v())},v=n.memStorage=function t(){var n={};return{getItem:function t(a){return'undefined'==typeof n[a]?null:n[a]},setItem:function t(a,r){n[a]=r},removeItem:function t(a){delete n[a]}}},x=n.postMessageStorage=function t(n,a){var r=(0,b.client)(n,a);return{getItem:function(){var t=(0,m.default)(u.default.mark(function t(n){var a;return u.default.wrap(function t(i){for(;1;)switch(i.prev=i.next){case 0:return i.next=2,r({method:'storage/getItem',args:[n]});case 2:if(a=i.sent,'string'==typeof a){i.next=5;break}throw new Error('expected postMessage call for \'storage/getItem\' to return a string, but got value '+a);case 5:return i.abrupt('return',a);case 6:case'end':return i.stop();}},t,void 0)}));return function n(a){return t.apply(this,arguments)}}(),setItem:function t(n,a){return r({method:'storage/setItem',args:[n,a]})},removeItem:function t(n){return r({method:'storage/removeItem',args:[n]})}}}},function(t,n,a){'use strict';function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,'__esModule',{value:!0}),n.parse=n.format=void 0;var i=a(320),o=r(i),s=a(321),d=r(s);n.format=o.default,n.parse=d.default},function(t,n){t.exports=__WEBPACK_EXTERNAL_MODULE_89__},function(t,n,a){'use strict';var r=a(19),i=r.JSONSchema,o=a(333),s=o.BASE64_REGEXP,d=new i({type:'object',properties:{kty:{type:'string',enum:['RSA','EC','oct']},use:{type:'string',enum:['sig','enc']},key_ops:{type:'array',items:{enum:['sign','verify','encrypt','decrypt','wrapKey','unwrapKey','deriveKey','deriveBits']}},alg:{type:'string',enum:['HS256','HS384','HS512','RS256','RS384','RS512','ES256','ES384','ES512','PS256','PS384','PS512','none']},kid:{type:'string'},x5u:{type:'string'},x5c:{type:'array'},x5t:{type:'string'}}});t.exports=d},function(t,n,a){function r(t,n,a,r){if(i.isBuffer(t)||(t=i.from(t,'binary')),n&&(i.isBuffer(n)||(n=i.from(n,'binary')),8!==n.length))throw new RangeError('salt should be Buffer with 8 byte length');for(var s=a/8,d=i.alloc(s),l=i.alloc(r||0),c=i.alloc(0),u;0<s||0<r;){u=new o,u.update(c),u.update(t),n&&u.update(n),c=u.digest();var f=0;if(0<s){var m=d.length-s;f=_Mathmin(s,c.length),c.copy(d,m,0,f),s-=f}if(f<c.length&&0<r){var h=l.length-r,g=_Mathmin(r,c.length-f);c.copy(l,h,f,f+g),r-=g}}return c.fill(0),{key:d,iv:l}}var i=a(3).Buffer,o=a(364);t.exports=r},function(t,n,a){function r(t){d.isBuffer(t)||(t=d.from(t));for(var n=0|t.length/4,a=Array(n),r=0;r<n;r++)a[r]=t.readUInt32BE(4*r);return a}function i(t){for(var n=0;n<t.length;t++)t[n]=0}function o(t,n,a,r,i){for(var o=a[0],s=a[1],d=a[2],l=a[3],c=t[0]^n[0],u=t[1]^n[1],f=t[2]^n[2],m=t[3]^n[3],h=4,g=1,b,y,w,v;g<i;g++)b=o[c>>>24]^s[255&u>>>16]^d[255&f>>>8]^l[255&m]^n[h++],y=o[u>>>24]^s[255&f>>>16]^d[255&m>>>8]^l[255&c]^n[h++],w=o[f>>>24]^s[255&m>>>16]^d[255&c>>>8]^l[255&u]^n[h++],v=o[m>>>24]^s[255&c>>>16]^d[255&u>>>8]^l[255&f]^n[h++],c=b,u=y,f=w,m=v;return b=(r[c>>>24]<<24|r[255&u>>>16]<<16|r[255&f>>>8]<<8|r[255&m])^n[h++],y=(r[u>>>24]<<24|r[255&f>>>16]<<16|r[255&m>>>8]<<8|r[255&c])^n[h++],w=(r[f>>>24]<<24|r[255&m>>>16]<<16|r[255&c>>>8]<<8|r[255&u])^n[h++],v=(r[m>>>24]<<24|r[255&c>>>16]<<16|r[255&u>>>8]<<8|r[255&f])^n[h++],b>>>=0,y>>>=0,w>>>=0,v>>>=0,[b,y,w,v]}function s(t){this._key=r(t),this._reset()}var d=a(3).Buffer,l=[0,1,2,4,8,16,32,64,128,27,54],c=function(){for(var n=Array(256),a=0;256>a;a++)n[a]=128>a?a<<1:283^a<<1;for(var r=[],o=[],s=[[],[],[],[]],d=[[],[],[],[]],l=0,c=0,u=0,i;256>u;++u){i=c^c<<1^c<<2^c<<3^c<<4,i=99^(i>>>8^255&i),r[l]=i,o[i]=l;var f=n[l],m=n[f],h=n[m],g=257*n[i]^16843008*i;s[0][l]=g<<24|g>>>8,s[1][l]=g<<16|g>>>16,s[2][l]=g<<8|g>>>24,s[3][l]=g,g=16843009*h^65537*m^257*f^16843008*l,d[0][i]=g<<24|g>>>8,d[1][i]=g<<16|g>>>16,d[2][i]=g<<8|g>>>24,d[3][i]=g,0==l?l=c=1:(l=f^n[n[n[h^f]]],c^=n[n[c]])}return{SBOX:r,INV_SBOX:o,SUB_MIX:s,INV_SUB_MIX:d}}();s.blockSize=16,s.keySize=32,s.prototype.blockSize=s.blockSize,s.prototype.keySize=s.keySize,s.prototype._reset=function(){for(var n=this._key,a=n.length,r=a+6,i=4*(r+1),o=[],s=0;s<a;s++)o[s]=n[s];for(s=a;s<i;s++){var d=o[s-1];0==s%a?(d=d<<8|d>>>24,d=c.SBOX[d>>>24]<<24|c.SBOX[255&d>>>16]<<16|c.SBOX[255&d>>>8]<<8|c.SBOX[255&d],d^=l[0|s/a]<<24):6<a&&4==s%a&&(d=c.SBOX[d>>>24]<<24|c.SBOX[255&d>>>16]<<16|c.SBOX[255&d>>>8]<<8|c.SBOX[255&d]),o[s]=o[s-a]^d}for(var t=[],u=0;u<i;u++){var f=i-u,m=o[f-(u%4?0:4)];t[u]=4>u||4>=f?m:c.INV_SUB_MIX[0][c.SBOX[m>>>24]]^c.INV_SUB_MIX[1][c.SBOX[255&m>>>16]]^c.INV_SUB_MIX[2][c.SBOX[255&m>>>8]]^c.INV_SUB_MIX[3][c.SBOX[255&m]]}this._nRounds=r,this._keySchedule=o,this._invKeySchedule=t},s.prototype.encryptBlockRaw=function(t){return t=r(t),o(t,this._keySchedule,c.SUB_MIX,c.SBOX,this._nRounds)},s.prototype.encryptBlock=function(t){var n=this.encryptBlockRaw(t),a=d.allocUnsafe(16);return a.writeUInt32BE(n[0],0),a.writeUInt32BE(n[1],4),a.writeUInt32BE(n[2],8),a.writeUInt32BE(n[3],12),a},s.prototype.decryptBlock=function(t){t=r(t);var n=t[1];t[1]=t[3],t[3]=n;var a=o(t,this._invKeySchedule,c.INV_SUB_MIX,c.INV_SBOX,this._nRounds),i=d.allocUnsafe(16);return i.writeUInt32BE(a[0],0),i.writeUInt32BE(a[3],4),i.writeUInt32BE(a[2],8),i.writeUInt32BE(a[1],12),i},s.prototype.scrub=function(){i(this._keySchedule),i(this._invKeySchedule),i(this._key)},t.exports.AES=s},function(t,n,a){'use strict';var r=n;r.base=a(396),r.short=a(397),r.mont=a(398),r.edwards=a(399)},function(t,n,a){(function(n){function r(t){var a;'object'!=typeof t||n.isBuffer(t)||(a=t.passphrase,t=t.key),'string'==typeof t&&(t=new n(t));var r=d(t,a),s=r.tag,l=r.data,c,u;switch(s){case'CERTIFICATE':u=o.certificate.decode(l,'der').tbsCertificate.subjectPublicKeyInfo;case'PUBLIC KEY':switch(u||(u=o.PublicKey.decode(l,'der')),c=u.algorithm.algorithm.join('.'),c){case'1.2.840.113549.1.1.1':return o.RSAPublicKey.decode(u.subjectPublicKey.data,'der');case'1.2.840.10045.2.1':return u.subjectPrivateKey=u.subjectPublicKey,{type:'ec',data:u};case'1.2.840.10040.4.1':return u.algorithm.params.pub_key=o.DSAparam.decode(u.subjectPublicKey.data,'der'),{type:'dsa',data:u.algorithm.params};default:throw new Error('unknown key id '+c);}throw new Error('unknown key type '+s);case'ENCRYPTED PRIVATE KEY':l=o.EncryptedPrivateKey.decode(l,'der'),l=i(l,a);case'PRIVATE KEY':switch(u=o.PrivateKey.decode(l,'der'),c=u.algorithm.algorithm.join('.'),c){case'1.2.840.113549.1.1.1':return o.RSAPrivateKey.decode(u.subjectPrivateKey,'der');case'1.2.840.10045.2.1':return{curve:u.algorithm.curve,privateKey:o.ECPrivateKey.decode(u.subjectPrivateKey,'der').privateKey};case'1.2.840.10040.4.1':return u.algorithm.params.priv_key=o.DSAparam.decode(u.subjectPrivateKey,'der'),{type:'dsa',params:u.algorithm.params};default:throw new Error('unknown key id '+c);}throw new Error('unknown key type '+s);case'RSA PUBLIC KEY':return o.RSAPublicKey.decode(l,'der');case'RSA PRIVATE KEY':return o.RSAPrivateKey.decode(l,'der');case'DSA PRIVATE KEY':return{type:'dsa',params:o.DSAPrivateKey.decode(l,'der')};case'EC PRIVATE KEY':return l=o.ECPrivateKey.decode(l,'der'),{curve:l.parameters.value,privateKey:l.privateKey};default:throw new Error('unknown key type '+s);}}function i(t,a){var r=t.algorithm.decrypt.kde.kdeparams.salt,i=parseInt(t.algorithm.decrypt.kde.kdeparams.iters.toString(),10),o=s[t.algorithm.decrypt.cipher.algo.join('.')],d=t.algorithm.decrypt.cipher.iv,u=t.subjectPrivateKey,f=parseInt(o.split('-')[1],10)/8,m=c.pbkdf2Sync(a,r,i,f),h=l.createDecipheriv(o,m,d),g=[];return g.push(h.update(u)),g.push(h.final()),n.concat(g)}var o=a(416),s=a(430),d=a(431),l=a(137),c=a(217);t.exports=r,r.signature=o.signature}).call(n,a(2).Buffer)},function(t,n,a){'use strict';function r(t,n,a){var r=t.createElement('div');return r.setAttribute('style','margin: 0.1em; padding: 0.5em; border: 0.05em solid gray; background-color: '+(a||'#fee')+'; color:black;'),r.textContent=n,r}t.exports.errorMessageBlock=r},function(t,n,a){'use strict';function r(t,n){var a=t.uri||t,r=a.indexOf('://');if(0>r)return!1;var i=a.indexOf('/',r+3);if(0>i)return!1;var o=a.slice(0,i+1);return o}function i(t,n){n&&(n.me=S.namedNode(t));var a;return t&&(a=t.uri||t),a?S.namedNode(a):null}function o(){var t=v();return t?t:null}function s(){var t=localStorage['solid-auth-client'];if(t){var n=JSON.parse(t);if(n.session&&n.session.webId)return S.sym(n.session.webId)}return null}function d(t){var n=o();return n?(t.me=n,Promise.resolve(t)):new Promise(function(n){k().then(function(a){if(a)return t.me=S.sym(a),console.log('logIn: Already logged in as '+t.me),void n(t);var r=C(t.dom,function(a){i(a,t),n(t)});t.div.appendChild(r)})})}function l(t){if(t.publicProfile)return Promise.resolve(t);var n=L.store.fetcher,a;return d(t).then(function(t){var r=t.me;if(!r)throw new Error('Could not log in');return a=r.doc(),n.fetch(a)}).then(function(n){if(!n.ok)throw new Error(n.error);return t.publicProfile=a,t}).catch(function(n){var r='Cannot load profile '+a+' : '+n;return t.div.appendChild(I.errorMessageBlock(t.dom,r)),t})}function c(t){if(t.preferencesFile)return Promise.resolve(t);var n=L.store,a=t.statusArea||t.div||null,r=n.any(t.me,L.ns.space('preferencesFile')),i;return Promise.resolve().then(function(){if(!r){var o='Can\'t find a preferences file for user: '+t.me;throw I.errorMessageBlock(t.dom,o),new Error(o)}return t.preferencesFile=r,a&&(i=I.errorMessageBlock(t.dom,'(loading preferences '+r+')','straw'),a.appendChild(i)),n.fetcher.load(r)}).then(function(){return i&&i.parentNode.removeChild(i),t}).catch(function(t){throw new Error('Error loading preferences file. '+t)})}function u(t){var n=L.ns,a=L.store;return l(t).then(c).then(function(t){var r=t.me;t.index=t.index||{},t.index.private=a.each(r,n.solid('privateTypeIndex'),void 0,t.preferencesFile),t.index.public=a.each(r,n.solid('publicTypeIndex'),void 0,t.publicProfile);var i=t.index.private.concat(t.index.public);return 0===i.length?t:a.fetcher.load(i)}).then(function(){return t}).catch(function(n){throw N.complain(t,n),new Error('Error loading type indexes: '+n)})}function f(t){return new Promise(function(n,a){return u(t).then(function(t){var a=L.ns,r=L.store,i=t.me,o=function t(n,o){return new Promise(function(t,s){var l={private:n.preferencesFile,public:n.publicProfile}[o];if(0===n.index[o].length){d=S.sym(n.preferencesFile.dir().uri+o+'TypeIndex.ttl'),console.log('Linking to new fresh type index '+d);var c=[S.st(i,a.solid(o+'TypeIndex'),d,l)];L.store.updater.update([],c,function(a,i,l){return i?(n.index[o].push(d),console.log('Creating new fresh type index '+d),!window.confirm('Creating new list of things  '+d))?s(new Error('Cancelled by user: writing of '+d)):void r.fetcher.webOperation('PUT',d,{data:'# '+new Date+' Blank initial Type index\n'}).then(function(a){t(n)}).catch(function(t){var a='Creating new index file '+t;N.complain(n,a),s(new Error(a))}):s(new Error('Error saving type index link saving back '+a+': '+l))})}else t(n)})},s=[o(t,'private'),o(t,'public')],d;return Promise.all(s).then(function(){n(t)})})})}function m(t,n){var a=L.store,o=L.ns,i=L.store.fetcher,s=a.each(void 0,o.solid('forClass'),n),d=[],l=[];return u(t).then(function(t){for(var c=0;c<s.length;c++)d=d.concat(a.each(n,o.solid('instance'))),l=l.concat(a.each(n,o.solid('instanceContainer')));return l.length?i.load(l).then(function(){for(var t=0,n;t<l.length;t++)n=l[t],d=d.concat(a.each(n,o.ldp('contains')))}):void 0}).then(function(){return t.instances=d,t.containers=l,t}).catch(function(t){throw new Error('Error looking for instances of '+n+': '+t)})}function h(t,n,a){var i=L.store,o=L.ns,r=t.dom,s=r.createElement('div');return t.div.appendChild(s),f(t).then(function(t){s.innerHTML='<table><tbody><tr></tr><tr></tr></tbody></table>',s.setAttribute('style','font-size: 120%; text-align: right; padding: 1em; border: solid gray 0.05em;');var r=s.children[0].children[0],d=i.bnode(),l=function t(r){var s=i.each(void 0,o.solid('instance'),n).filter(function(t){return i.holds(t,o.solid('forClass'),a)}),d=s.length?s[0]:N.newThing(r);return[S.st(d,o.solid('instance'),n,r),S.st(d,o.solid('forClass'),a,r)]},c,u;return t.index.public&&0<t.index.public.length&&(c=t.index.public[0],u=l(c),r.children[0].appendChild(N.buildCheckboxForm(t.dom,L.store,'Public link to this '+t.noun,null,u,d,c))),t.index.private&&0<t.index.private.length&&(c=t.index.private[0],u=l(c),r.children[1].appendChild(N.buildCheckboxForm(t.dom,L.store,'Personal note of this '+t.noun,null,u,d,c))),t})}function g(t,n){var a=L.store,r=L.ns,o=t.dom,s=o.createElement('div');return t.div.appendChild(s),f(t).then(function(d){s.innerHTML='<table><tbody></tbody></table>',s.setAttribute('style','font-size: 120%; text-align: right; padding: 1em; border: solid #eee 0.5em;');var l=s.firstChild,c=[],u=[],f=['private','public'];f.forEach(function(i){n[i]&&(c=c.concat(t.index[i][0]),u=u.concat(a.statementsMatching(void 0,r.solid('instance'),void 0,t.index[i][0])))});for(var m=0;m<u.length;m++){var i=u[m],h=i.object,g=function t(n){a.updater.update([i],[],function(t,n,a){n?console.log('Removed from index: '+i.subject):console.log('Error: Cannot delete '+i+': '+a)})},b={deleteFunction:g},y=N.personTR(o,r.solid('instance'),h,b);l.appendChild(y)}return t})}function b(t,n,a){var r=L.store,i=r.any(r.sym(t),r.sym('http://www.iana.org/assignments/link-relations/acl'));return Promise.resolve().then(function(){return i?i:y(t).catch(function(n){throw new Error('Error fetching rel=ACL header for '+t+': '+n)})}).then(function(i){var o=w(t,n,i.uri,a);return r.fetcher.webOperation('PUT',i.uri,{data:o,contentType:'text/turtle'}).then(function(t){if(!t.ok)throw new Error('Error writing ACL text: '+t.error);return i})})}function y(t){var n=L.store,a=n.fetcher;return a.fetch(t).then(function(a){if(!a.ok)throw new Error('While fetching:'+a.error);var r=n.any(n.sym(t),n.sym('http://www.iana.org/assignments/link-relations/acl'));if(!r)throw new Error('No Link rel=ACL header for '+t);return r})}function w(t,n,r){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},o=i.public||[],s=S.graph(),d=S.Namespace('http://www.w3.org/ns/auth/acl#'),l=s.sym(r+'#a1'),a=s.sym(r),c=s.sym(t);if(s.add(l,L.ns.rdf('type'),d('Authorization'),a),s.add(l,d('accessTo'),c,a),i.defaultForNew&&s.add(l,d('defaultForNew'),c,a),s.add(l,d('agent'),n,a),s.add(l,d('mode'),d('Read'),a),s.add(l,d('mode'),d('Write'),a),s.add(l,d('mode'),d('Control'),a),o.length){l=s.sym(r+'#a2'),s.add(l,L.ns.rdf('type'),d('Authorization'),a),s.add(l,d('accessTo'),c,a),s.add(l,d('agentClass'),L.ns.foaf('Agent'),a);for(var u=0;u<o.length;u++)s.add(l,d('mode'),d(o[u]),a)}return S.serialize(a,s,r,'text/turtle')}function v(){if('undefined'!=typeof $SolidTestEnvironment&&$SolidTestEnvironment.username)return console.log('Assuming the user is '+$SolidTestEnvironment.username),S.sym($SolidTestEnvironment.username);if('undefined'!=typeof document&&document.location&&'http://localhost'===(''+document.location).slice(0,16)){var t=document.getElementById('appTarget');if(!t)return null;var n=t.getAttribute('testID');return n?(console.log('Assuming user is '+n),S.sym(n)):null}return null}function x(t,n){var a=t.createElement('div'),r='SolidSignInOrSignUpBox';console.log('widgets.signInOrSignUpBox'),a.setUserCallback=n,a.setAttribute('class',r);var i=t.createElement('input');a.appendChild(i),i.setAttribute('type','button'),i.setAttribute('value','Log in'),i.setAttribute('style','padding: 1em; border-radius:0.5em; margin: 2em;'),i.addEventListener('click',function(){var a=v();return a?n(a.uri):j.popupLogin({popupUri:$SOLID_GLOBAL_config.popupUri}).then(function(n){var a=n.webId,o=t.getElementsByClassName(r);console.log('Logged in, '+o.length+' panels to be serviced');for(var s=0,i;s<o.length;s++)if(i=o[s],i.setUserCallback)try{i.setUserCallback(a);var d=i.parentNode;d&&d.removeChild(i)}catch(n){console.log('## Error satisfying login box: '+n),i.appendChild(L.error.errorMessageBlock(t,n))}})},!1);var o=t.createElement('input');return a.appendChild(o),o.setAttribute('type','button'),o.setAttribute('value','Sign Up'),o.setAttribute('style','padding: 1em; border-radius:0.5em; margin: 2em;'),o.addEventListener('click',function(t){var a=new A.Signup;a.signup().then(function(t){console.log('signInOrSignUpBox signed up '+t),n(t)})},!1),a}function _(t){var n=t?t.webId:null;return n&&i(n),n}function k(t){var n=o();return n?Promise.resolve(t?t(n):n):j.currentSession().then(_).catch(function(t){return console.log('Error fetching currentSession:',t),null}).then(function(n){var a=i(n);return a&&console.log('(Logged in as '+a+' by authentication)'),t?t(a):a})}function C(t,n){var a=o(),r=t.createElement('div'),i=function t(i){if(i){var o=i.uri||i;a=S.sym(o),r.refresh(),n&&n(a.uri)}},s=function t(){var i='Your Web ID was '+a+'. It has been forgotten.';a=null;try{L.log.alert(i)}catch(t){try{window.alert(i)}catch(t){}}r.refresh(),n&&n(null)},d=function n(a){var r='Web ID logout';if(a){var i=L.store.any(a,L.ns.foaf('nick'))||L.store.any(a,L.ns.foaf('name'));i&&(r='Logout '+i.value)}var o=t.createElement('input');return o.className='WebIDCancelButton',o.setAttribute('type','button'),o.setAttribute('value',r),o.addEventListener('click',s,!1),o};return r.refresh=function(){var n=o(),a=n?n.uri:'';r.me!==a&&(N.clearElement(r),n?r.appendChild(d(n)):r.appendChild(x(t,i))),r.me=a},r.me='99999',r.refresh(),r}function E(t,n,a){var r=n.noun,i=n.appPathSegment,s=o(),d=L.store,u=t.createElement('div'),f={me:s,dom:t,div:u},m=function n(a){u.appendChild(I.errorMessageBlock(t,a))},h=function t(n){var a=d.any(n,L.ns.space('uriPrefix'));a=a?a.value:n.uri.split('#')[0],'/'!==a.slice(-1)&&(console.log(i+': No / at end of uriPrefix '+a),a+='/');var r=new Date;return a+=i+'/id'+r.getTime()+'/',a},g=function n(o){var s=o.me,l=o.preferencesFile,c=null,f=d.statementsMatching(s,L.ns.space('workspace'),void 0,l).map(function(t){return t.object}),g=d.each(s,L.ns.space('storage'));g.map(function(t){f=f.concat(d.each(t,L.ns.ldp('contains')))}),1===f.length?(m('Workspace used: '+f[0].uri),c=h(f[0])):0===f.length&&m('You don\'t seem to have any workspaces. You have '+g.length+' storages.');var b=t.createElement('table');b.setAttribute('style','border-collapse:separate; border-spacing: 0.5em;'),u.appendChild(b),u.appendChild(t.createElement('hr'));var y=u.appendChild(t.createElement('p'));y.textContent='Where would you like to store the data for the '+r+'?  Give the URL of the directory where you would like the data stored.';var w=u.appendChild(t.createElement('input'));w.setAttribute('type','text'),w.size=80,w.label='base URL',w.autocomplete='on',c&&(w.value=c),o.baseField=w,u.appendChild(t.createElement('br'));var v=u.appendChild(t.createElement('button'));v.textContent='Start new '+r+' at this URI',v.addEventListener('click',function(t){var n=w.value;'/'!==n.slice(-1)&&(n+='/'),a(null,n)}),f=f.filter(function(t){return!d.holds(t,L.ns.rdf('type'),L.ns.space('MasterWorkspace'))});for(var x='height: 3em; margin: 1em; padding: 1em white; border-radius: 0.3em;',_=x+'border: 0px;',k=0,i,C,E,T,A,S,I;k<f.length;k++){if(A=f[k],T=t.createElement('tr'),0===k&&(i=t.createElement('td'),i.setAttribute('rowspan',''+f.length+1),i.textContent='Chose a workspace for this:',i.setAttribute('style','vertical-align:middle;'),T.appendChild(i)),C=t.createElement('td'),S=d.any(A,L.ns.ui('style')),S)S=S.value;else{var N=function t(n){return n.split('').reduce(function(t,n){return t=(t<<5)-t+n.charCodeAt(0),t&t},0)},j='#'+(12632256|16777215&N(A.uri)).toString(16);S='color: black ; background-color: '+j+';'}C.setAttribute('style',_+S),T.target=A.uri;var R=d.any(A,L.ns.rdfs('label'));R||(R=A.uri.split('/').slice(-1)[0]||A.uri.split('/').slice(-2)[0]),C.textContent=R||'???',T.appendChild(C),0===k&&(E=t.createElement('td'),E.setAttribute('rowspan',''+f.length+1),E.setAttribute('style','width:50%;'),T.appendChild(E)),b.appendChild(T);var M=function t(n,a,r,i){n.addEventListener('click',function(t){E.textContent=a,E.setAttribute('style',r),E.appendChild(D(i))},!0)},D=function n(r){var i=t.createElement('button');i.textContent='Continue';var o=h(r);return w.value=o,i.addEventListener('click',function(t){i.disabled=!0,a(r,o),i.textContent='---->'},!0),i};I=d.any(A,L.ns.rdfs('comment')),I=I?I.value:'Use this workspace',M(C,I?I.value:'',_+S,A)}var P=t.createElement('tr');C=t.createElement('td'),C.setAttribute('style',x),C.textContent='+ Make a new workspace',P.appendChild(C),b.appendChild(P)};return l(f).then(c).then(g),u}function T(t,n,a){var r=function t(n,r){a(n,r)},i=t.createElement('div'),o=t.createElement('button');return o.setAttribute('type','button'),i.appendChild(o),o.innerHTML='Make new '+n.noun,o.addEventListener('click',function(a){i.appendChild(E(t,n,r))},!1),i.appendChild(o),i}var A=a(244),S=a(4),I=a(95),N=a(26),j=a(162),L={log:a(24),ns:a(14),store:a(20)};t.exports={checkUser:k,currentUser:s,defaultTestUser:o,findAppInstances:m,findOriginOwner:r,loadTypeIndexes:u,logIn:d,loginStatusBox:C,newAppInstance:T,offlineTestID:v,registrationControl:h,registrationList:g,selectWorkspace:E,setACLUserPublic:b,saveUser:i,solidAuthClient:j}},function(t,n,a){'use strict';function r(t,n,a){var r=t.createElement('div');return r.setAttribute('style','margin: 0.1em; padding: 0.5em; border: 0.05em solid gray; background-color: '+(a||'#fee')+'; color:black;'),r.textContent=n,r}t.exports.errorMessageBlock=r},function(t,n,a){'use strict';function r(t){return t&&t.__esModule?t:{default:t}}function i(t){return{getItem:function n(a){return s.default.resolve(t.getItem(a))},setItem:function n(a,r){return s.default.resolve(t.setItem(a,r))},removeItem:function n(a){return s.default.resolve(t.removeItem(a))}}}Object.defineProperty(n,'__esModule',{value:!0}),n.postMessageStorage=n.memStorage=n.updateStorage=n.getData=n.defaultStorage=n.NAMESPACE=void 0;var o=a(47),s=r(o),d=a(181),l=r(d),c=a(6),u=r(c),f=a(7),m=r(f),h=n.getData=function(){var t=(0,m.default)(u.default.mark(function t(n){var a,r;return u.default.wrap(function t(i){for(;1;)switch(i.prev=i.next){case 0:return a=void 0,r=void 0,i.prev=2,i.next=5,n.getItem(y);case 5:a=i.sent,r=JSON.parse(a||'{}'),i.next=14;break;case 9:i.prev=9,i.t0=i['catch'](2),console.warn('Could not deserialize data:',a),console.error(i.t0),r={};case 14:return i.abrupt('return',r);case 15:case'end':return i.stop();}},t,this,[[2,9]])}));return function n(a){return t.apply(this,arguments)}}(),g=n.updateStorage=function(){var t=(0,m.default)(u.default.mark(function t(n,a){var r,i;return u.default.wrap(function t(o){for(;1;)switch(o.prev=o.next){case 0:return o.next=2,h(n);case 2:return r=o.sent,i=a(r),n.setItem(y,(0,l.default)(i)),o.abrupt('return',i);case 6:case'end':return o.stop();}},t,this)}));return function n(a,r){return t.apply(this,arguments)}}();n.asyncStorage=i;var b=a(250),y=n.NAMESPACE='solid-auth-client',w=n.defaultStorage=function t(){try{if(window&&window.localStorage)return i(window.localStorage)}catch(t){if(!(t instanceof ReferenceError))throw t}return console.warn('\'window.localStorage\' unavailable.  Creating a (not very useful) in-memory storage object as the default storage interface.'),i(v())},v=n.memStorage=function t(){var n={};return{getItem:function t(a){return'undefined'==typeof n[a]?null:n[a]},setItem:function t(a,r){n[a]=r},removeItem:function t(a){delete n[a]}}},x=n.postMessageStorage=function t(n,a){var r=(0,b.client)(n,a);return{getItem:function(){var t=(0,m.default)(u.default.mark(function t(n){var a;return u.default.wrap(function t(i){for(;1;)switch(i.prev=i.next){case 0:return i.next=2,r({method:'storage/getItem',args:[n]});case 2:if(a=i.sent,'string'==typeof a){i.next=5;break}throw new Error('expected postMessage call for \'storage/getItem\' to return a string, but got value '+a);case 5:return i.abrupt('return',a);case 6:case'end':return i.stop();}},t,void 0)}));return function n(a){return t.apply(this,arguments)}}(),setItem:function t(n,a){return r({method:'storage/setItem',args:[n,a]})},removeItem:function t(n){return r({method:'storage/removeItem',args:[n]})}}}},function(t,n,a){'use strict';var r=a(4),i=a(14),o={ns:i,rdf:r,acl:a(210),aclControl:a(441),authn:a(96),create:a(444),icons:a(23),log:a(24),matrix:a(445),messageArea:a(446),pad:a(447),preferences:a(448),store:a(20),style:a(71),table:a(449),tabs:a(450),utils:a(28),widgets:a(26)};t.exports=o},function(t,n,a){'use strict';function r(t,n,a,r,s,d){function l(t,n){return s?void s(t,n):n}a=a||t.uri,d=d||{},r=r||'text/turtle';var c=null;try{var u=o(n);d.flags&&u.setFlags(d.flags);var f=n.statementsMatching(void 0,void 0,void 0,t),m;switch(u.suggestNamespaces(n.namespaces),u.setBase(a),r){case'application/rdf+xml':return c=u.statementsToXML(f),l(null,c);case'text/n3':case'application/n3':return c=u.statementsToN3(f),l(null,c);case'text/turtle':case'application/x-turtle':return u.setFlags('si'),c=u.statementsToN3(f),l(null,c);case'application/n-triples':return u.setFlags('deinprstux'),c=u.statementsToNTriples(f),l(null,c);case'application/ld+json':u.setFlags('deinprstux'),m=u.statementsToNTriples(f),i.convertToJson(m,s);break;case'application/n-quads':case'application/nquads':return u.setFlags('deinprstux q'),c=u.statementsToNTriples(f),l(null,c);break;default:throw new Error('Serialize: Content-type '+r+' not supported for data write.');}}catch(t){if(s)return s(t);throw t}}t.exports=r;var i=a(148),o=a(110)},function(t,n,a){(function(n){function a(t){if(!(this instanceof a))return new a(t);if(t&&t.lineMode){this._tripleQuotedString=this._number=this._boolean=/$0^/;var n=this;this._tokenize=this.tokenize,this.tokenize=function(t,a){this._tokenize(t,function(t,r){!t&&/^(?:IRI|prefixed|literal|langcode|type|\.|eof)$/.test(r.type)?a&&a(t,r):a&&a(t||n._syntaxError(r.type,a=null))})}}}var r=_StringfromCharCode,i='function'==typeof n?n:function t(n){setTimeout(n,0)},o=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\[uU]|\\(.)/g,s={"\\":'\\',"'":'\'','"':'"',n:'\n',r:'\r',t:'\t',f:'\f',b:'\b',_:'_',"~":'~',".":'.',"-":'-',"!":'!',$:'$',"&":'&',"(":'(',")":')',"*":'*',"+":'+',",":',',";":';',"=":'=',"/":'/',"?":'?',"#":'#',"@":'@',"%":'%'},d=/[\x00-\x20<>\\"\{\}\|\^\`]/;a.prototype={_iri:/^<((?:[^>\\]|\\[uU])+)>/,_unescapedIri:/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>/,_unescapedString:/^"[^"\\]+"(?=[^"\\])/,_singleQuotedString:/^"[^"\\]*(?:\\.[^"\\]*)*"(?=[^"\\])|^'[^'\\]*(?:\\.[^'\\]*)*'(?=[^'\\])/,_tripleQuotedString:/^""("[^"\\]*(?:(?:\\.|"(?!""))[^"\\]*)*")""|^''('[^'\\]*(?:(?:\\.|'(?!''))[^'\\]*)*')''/,_langcode:/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,_prefix:/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,_prefixed:/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?=\.?[,;\s#()\[\]\{\}"'<])/,_blank:/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=\.?[,;:\s#()\[\]\{\}"'<])/,_number:/^[\-+]?(?:\d+\.?\d*([eE](?:[\-\+])?\d+)|\d*\.?\d+)(?=[.,;:\s#()\[\]\{\}"'<])/,_boolean:/^(?:true|false)(?=[.,;:\s#()\[\]\{\}"'<])/,_keyword:/^@[a-z]+(?=[\s#<:])/,_sparqlKeyword:/^(?:PREFIX|BASE|GRAPH)(?=[\s#<:])/i,_shortPredicates:/^a(?=\s+|<)/,_newline:/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,_whitespace:/^[ \t]+/,_endOfFile:/^(?:#[^\n\r]*)?$/,_tokenizeToEnd:function(t,n){function a(n){t(n._syntaxError(/^\S*/.exec(r)[0]))}for(var r=this._input;!0;){for(var i;i=this._newline.exec(r);)r=r.substr(i[0].length,r.length),this._line++;if((i=this._whitespace.exec(r))&&(r=r.substr(i[0].length,r.length)),this._endOfFile.test(r))return n&&t(r=null,{line:this._line,type:'eof',value:'',prefix:''}),this._input=r;var o=this._line,s='',l='',c='',u=r[0],f=null,m=0,h=!1,g;switch(u){case'^':if(1===r.length)break;else if('^'!==r[1])return a(this);if(this._prevTokenType='^',r=r.substr(2),'<'!==r[0]){h=!0;break}case'<':if(f=this._unescapedIri.exec(r))s='IRI',l=f[1];else if(f=this._iri.exec(r)){if(g=this._unescape(f[1]),null===g||d.test(g))return a(this);s='IRI',l=g}break;case'_':((f=this._blank.exec(r))||n&&(f=this._blank.exec(r+' ')))&&(s='prefixed',c='_',l=f[1]);break;case'"':case'\'':if(f=this._unescapedString.exec(r))s='literal',l=f[0];else if(f=this._singleQuotedString.exec(r)){if(g=this._unescape(f[0]),null===g)return a(this);s='literal',l=g.replace(/^'|'$/g,'"')}else if(f=this._tripleQuotedString.exec(r)){if(g=f[1]||f[2],this._line+=g.split(/\r\n|\r|\n/).length-1,g=this._unescape(g),null===g)return a(this);s='literal',l=g.replace(/^'|'$/g,'"')}break;case'@':'literal'===this._prevTokenType&&(f=this._langcode.exec(r))?(s='langcode',l=f[1]):(f=this._keyword.exec(r))&&(s=f[0]);break;case'.':if(1===r.length?n:'0'>r[1]||'9'<r[1]){s='.',m=1;break}case'0':case'1':case'2':case'3':case'4':case'5':case'6':case'7':case'8':case'9':case'+':case'-':(f=this._number.exec(r))&&(s='literal',l='"'+f[0]+'"^^http://www.w3.org/2001/XMLSchema#'+(f[1]?'double':/^[+\-]?\d+$/.test(f[0])?'integer':'decimal'));break;case'B':case'b':case'p':case'P':case'G':case'g':(f=this._sparqlKeyword.exec(r))?s=f[0].toUpperCase():h=!0;break;case'f':case't':(f=this._boolean.exec(r))?(s='literal',l='"'+f[0]+'"^^http://www.w3.org/2001/XMLSchema#boolean'):h=!0;break;case'a':(f=this._shortPredicates.exec(r))?(s='abbreviation',l='http://www.w3.org/1999/02/22-rdf-syntax-ns#type'):h=!0;break;case',':case';':case'[':case']':case'(':case')':case'{':case'}':m=1,s=u;break;default:h=!0;}if(h&&(('@prefix'===this._prevTokenType||'PREFIX'===this._prevTokenType)&&(f=this._prefix.exec(r))?(s='prefix',l=f[1]||''):((f=this._prefixed.exec(r))||n&&(f=this._prefixed.exec(r+' ')))&&(s='prefixed',c=f[1]||'',l=this._unescape(f[2]))),'^'===this._prevTokenType&&(s='IRI'===s||'prefixed'===s?'type':''),!s)return n||!/^'''|^"""/.test(r)&&/\n|\r/.test(r)?a(this):this._input=r;t(null,{line:o,type:s,value:l,prefix:c}),this._prevTokenType=s,r=r.substr(m||f[0].length,r.length)}},_unescape:function(t){try{return t.replace(o,function(t,n,a,i){var o;if(n){if(o=parseInt(n,16),isNaN(o))throw new Error;return r(o)}if(a){if(o=parseInt(a,16),isNaN(o))throw new Error;return 65535>=o?r(o):r(55296+(o-=65536)/1024,56320+(1023&o))}var d=s[i];if(!d)throw new Error;return d})}catch(t){return null}},_syntaxError:function(t){return this._input=null,new Error('Syntax error: unexpected "'+t+'" on line '+this._line+'.')},tokenize:function(t,n){function a(t){null!==o._input&&(o._input+=t,o._tokenizeToEnd(n,!1))}function r(){null!==o._input&&o._tokenizeToEnd(n,!0)}var o=this;this._line=1,'string'==typeof t?(this._input=t,i(function(){o._tokenizeToEnd(n,!0)})):(this._input='',t&&'function'!=typeof t?('function'==typeof t.setEncoding&&t.setEncoding('utf8'),t.on('data',a),t.on('end',r)):(this.addChunk=a,this.end=r,!n&&(n=t)))}},t.exports=a}).call(n,a(57).setImmediate)},function(t,n,a){function r(t){if(!(this instanceof r))return new r(t);this._tripleStack=[],this._graph=null,t=t||{},this._setBase(t.documentIRI);var n='string'==typeof t.format&&t.format.match(/\w*$/)[0].toLowerCase(),a='turtle'===n,s='trig'===n,d=/triple/.test(n),l=/quad/.test(n),c=d||l;(this._supportsNamedGraphs=!a)||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(a||s||d),c&&(this._base='',this._resolveIRI=function(t){return this._error('Disallowed relative IRI',t),this._callback=i,this._subject=null}),this._blankNodePrefix='string'==typeof t.blankNodePrefix?'_:'+t.blankNodePrefix.replace(/^_:/,''):'',this._lexer=t.lexer||new o({lineMode:c})}function i(){}var o=a(101),s='http://www.w3.org/1999/02/22-rdf-syntax-ns#',d=s+'nil',l=s+'first',c=s+'rest',u=/^[a-z][a-z0-9+.-]*:/i,f=/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i,m=/(?:^|\/)\.\.?(?:$|[\/#?])/,h=0,g=0;r._resetBlankNodeIds=function(){h=g=0},r.prototype={_setBase:function(t){if(!t)t=null;else if(0<=t.indexOf('#'))throw new Error('Invalid base IRI '+t);(this._base=t)&&(this._basePath=t.replace(/[^\/?]*(?:\?.*)?$/,''),t=t.match(f),this._baseRoot=t[0],this._baseScheme=t[1])},_readInTopContext:function(t){switch(t.type){case'eof':return null===this._graph?(delete this._prefixes._,this._callback(null,null,this._prefixes)):this._error('Unclosed graph',t);case'@prefix':return this._sparqlStyle=!1,this._readPrefix;case'PREFIX':return this._sparqlStyle=!0,this._readPrefix;case'@base':return this._sparqlStyle=!1,this._readBaseIRI;case'BASE':return this._sparqlStyle=!0,this._readBaseIRI;case'{':if(this._supportsNamedGraphs)return this._graph='',this._subject=null,this._readSubject;case'GRAPH':if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(t);}},_readSubject:function(t){switch(this._predicate=null,t.type){case'IRI':this._subject=null===this._base||u.test(t.value)?t.value:this._resolveIRI(t);break;case'prefixed':var n=this._prefixes[t.prefix];if(void 0===n)return this._error('Undefined prefix "'+t.prefix+':"',t);this._subject=n+t.value;break;case'[':return this._subject='_:b'+g++,this._tripleStack.push({subject:this._subject,predicate:null,object:null,type:'blank'}),this._readBlankNodeHead;case'(':return this._tripleStack.push({subject:d,predicate:null,object:null,type:'list'}),this._subject=null,this._readListItem;case'}':return this._readPunctuation(t);default:return this._error('Expected subject but got '+t.type,t);}return this._readPredicateOrNamedGraph},_readPredicate:function(t){var n=t.type;switch(n){case'IRI':case'abbreviation':this._predicate=null===this._base||u.test(t.value)?t.value:this._resolveIRI(t);break;case'prefixed':if('_'===t.prefix)return this._error('Disallowed blank node as predicate',t);var a=this._prefixes[t.prefix];if(void 0===a)return this._error('Undefined prefix "'+t.prefix+':"',t);this._predicate=a+t.value;break;case'.':case']':case'}':return null===this._predicate?this._error('Unexpected '+n,t):(this._subject=null,']'===n?this._readBlankNodeTail(t):this._readPunctuation(t));case';':return this._readPredicate;default:return this._error('Expected predicate to follow "'+this._subject+'"',t);}return this._readObject},_readObject:function(t){switch(t.type){case'IRI':this._object=null===this._base||u.test(t.value)?t.value:this._resolveIRI(t);break;case'prefixed':var n=this._prefixes[t.prefix];if(void 0===n)return this._error('Undefined prefix "'+t.prefix+':"',t);this._object=n+t.value;break;case'literal':return this._object=t.value,this._readDataTypeOrLang;case'[':var a='_:b'+g++;return this._tripleStack.push({subject:this._subject,predicate:this._predicate,object:a,type:'blank'}),this._subject=a,this._readBlankNodeHead;case'(':return this._tripleStack.push({subject:this._subject,predicate:this._predicate,object:d,type:'list'}),this._subject=null,this._readListItem;default:return this._error('Expected object to follow "'+this._predicate+'"',t);}return this._getTripleEndReader()},_readPredicateOrNamedGraph:function(t){return'{'===t.type?this._readGraph(t):this._readPredicate(t)},_readGraph:function(t){return'{'===t.type?(this._graph=this._subject,this._subject=null,this._readSubject):this._error('Expected graph but got '+t.type,t)},_readBlankNodeHead:function(t){return']'===t.type?(this._subject=null,this._readBlankNodeTail(t)):(this._predicate=null,this._readPredicate(t))},_readBlankNodeTail:function(t){if(']'!==t.type)return this._readBlankNodePunctuation(t);null!==this._subject&&this._callback(null,{subject:this._subject,predicate:this._predicate,object:this._object,graph:this._graph||''});var n=this._tripleStack.pop();return this._subject=n.subject,null===n.object?null===this._predicate?this._readPredicateOrNamedGraph:this._readPredicate:(this._predicate=n.predicate,this._object=n.object,this._getTripleEndReader())},_readDataTypeOrLang:function(t){switch(t.type){case'type':var n;if(''===t.prefix)n=null===this._base||u.test(t.value)?t.value:this._resolveIRI(t);else{var a=this._prefixes[t.prefix];if(void 0===a)return this._error('Undefined prefix "'+t.prefix+':"',t);n=a+t.value}return this._object+='^^'+n,this._getTripleEndReader();case'langcode':return this._object+='@'+t.value.toLowerCase(),this._getTripleEndReader();default:return this._getTripleEndReader().call(this,t);}},_readListItem:function(t){var n=null,a=null,r=this._subject,i=this._tripleStack,o=i[i.length-1],s=this._readListItem;switch(t.type){case'IRI':n=null===this._base||u.test(t.value)?t.value:this._resolveIRI(t);break;case'prefixed':var f=this._prefixes[t.prefix];if(void 0===f)return this._error('Undefined prefix "'+t.prefix+':"',t);n=f+t.value;break;case'literal':n=t.value,s=this._readDataTypeOrLang;break;case'[':a='_:b'+g++,n='_:b'+g++,i.push({subject:a,predicate:l,object:n,type:'blank'}),this._subject=n,s=this._readBlankNodeHead;break;case'(':a='_:b'+g++,i.push({subject:a,predicate:l,object:d,type:'list'}),this._subject=null,s=this._readListItem;break;case')':if(i.pop(),0!==i.length&&'list'===i[i.length-1].type&&this._callback(null,{subject:o.subject,predicate:o.predicate,object:o.object,graph:this._graph||''}),this._subject=o.subject,null===o.predicate){if(s=this._readPredicate,o.subject===d)return s;}else if(this._predicate=o.predicate,this._object=o.object,s=this._getTripleEndReader(),o.object===d)return s;a=d;break;default:return this._error('Expected list item instead of "'+t.type+'"',t);}return null===a&&(this._subject=a='_:b'+g++),null===r?o.object===d?o.object=a:o.subject=a:this._callback(null,{subject:r,predicate:c,object:a,graph:this._graph||''}),null!==n&&this._callback(null,{subject:a,predicate:l,object:n,graph:this._graph||''}),s},_readPunctuation:function(t){var n=this._subject,a=this._graph,r;switch(t.type){case'}':if(null===this._graph)return this._error('Unexpected graph closing',t);this._graph=null;case'.':this._subject=null,r=this._readInTopContext;break;case';':r=this._readPredicate;break;case',':r=this._readObject;break;case'IRI':if(this._supportsQuads&&null===this._graph){a=null===this._base||u.test(t.value)?t.value:this._resolveIRI(t),n=this._subject,r=this._readQuadPunctuation;break}case'prefixed':if(this._supportsQuads&&null===this._graph){var i=this._prefixes[t.prefix];if(void 0===i)return this._error('Undefined prefix "'+t.prefix+':"',t);a=i+t.value,r=this._readQuadPunctuation;break}default:return this._error('Expected punctuation to follow "'+this._object+'"',t);}return null!==n&&this._callback(null,{subject:n,predicate:this._predicate,object:this._object,graph:a||''}),r},_readBlankNodePunctuation:function(t){var n;switch(t.type){case';':n=this._readPredicate;break;case',':n=this._readObject;break;default:return this._error('Expected punctuation to follow "'+this._object+'"',t);}return this._callback(null,{subject:this._subject,predicate:this._predicate,object:this._object,graph:this._graph||''}),n},_readQuadPunctuation:function(t){return'.'===t.type?this._readInTopContext:this._error('Expected dot to follow quad',t)},_readPrefix:function(t){return'prefix'===t.type?(this._prefix=t.value,this._readPrefixIRI):this._error('Expected prefix to follow @prefix',t)},_readPrefixIRI:function(t){if('IRI'!==t.type)return this._error('Expected IRI to follow prefix "'+this._prefix+':"',t);var n;return n=null===this._base||u.test(t.value)?t.value:this._resolveIRI(t),this._prefixes[this._prefix]=n,this._prefixCallback(this._prefix,n),this._readDeclarationPunctuation},_readBaseIRI:function(t){if('IRI'!==t.type)return this._error('Expected IRI to follow base declaration',t);try{this._setBase(null===this._base||u.test(t.value)?t.value:this._resolveIRI(t))}catch(n){this._error(n.message,t)}return this._readDeclarationPunctuation},_readNamedGraphLabel:function(t){switch(t.type){case'IRI':case'prefixed':return this._readSubject(t),this._readGraph;case'[':return this._readNamedGraphBlankLabel;default:return this._error('Invalid graph label',t);}},_readNamedGraphBlankLabel:function(t){return']'===t.type?(this._subject='_:b'+g++,this._readGraph):this._error('Invalid graph label',t)},_readDeclarationPunctuation:function(t){return this._sparqlStyle?this._readInTopContext(t):'.'===t.type?this._readInTopContext:this._error('Expected declaration to end with a dot',t)},_getTripleEndReader:function(){var t=this._tripleStack;if(0===t.length)return this._readPunctuation;switch(t[t.length-1].type){case'blank':return this._readBlankNodeTail;case'list':return this._readListItem;}},_error:function(t,n){this._callback(new Error(t+' at line '+n.line+'.'))},_resolveIRI:function(t){var n=t.value;switch(n[0]){case void 0:return this._base;case'#':return this._base+n;case'?':return this._base.replace(/(?:\?.*)?$/,n);case'/':return('/'===n[1]?this._baseScheme:this._baseRoot)+this._removeDotSegments(n);default:return this._removeDotSegments(this._basePath+n);}},_removeDotSegments:function(t){if(!m.test(t))return t;for(var n='',a=t.length,r=-1,i=-1,o=0,s='/';r<a;){switch(s){case':':if(0>i&&'/'===t[++r]&&'/'===t[++r])for(;(i=r+1)<a&&'/'!==t[i];)r=i;break;case'?':case'#':r=a;break;case'/':if('.'===t[r+1])switch(s=t[++r+1],s){case'/':n+=t.substring(o,r-1),o=r+1;break;case void 0:case'?':case'#':return n+t.substring(o,r)+t.substr(r+1);case'.':if(s=t[++r+1],void 0===s||'/'===s||'?'===s||'#'===s){if(n+=t.substring(o,r-2),(o=n.lastIndexOf('/'))>=i&&(n=n.substr(0,o)),'/'!==s)return n+'/'+t.substr(r+1);o=r+1}}}s=t[++r]}return n+t.substring(o)},parse:function(t,n,a){this._readCallback=this._readInTopContext,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix||'_:b'+h++ +'_','function'==typeof t&&(a=n,n=t,t=null),this._callback=n||i,this._prefixCallback=a||i;var r=this;this._lexer.tokenize(t,function(t,n){null===t?r._readCallback!==void 0&&(r._readCallback=r._readCallback(n)):(r._callback(t),r._callback=i)}),t||(this.addChunk=this._lexer.addChunk,this.end=this._lexer.end)}},t.exports=r},function(t,n){function a(t,n){for(var a in u)n?t.prototype[a]=r(u[a]):t[a]=u[a];return t}function r(t){return function(n){return t(this,n)}}var i='http://www.w3.org/2001/XMLSchema#',o=i+'string',s=i+'integer',d=i+'decimal',l=i+'boolean',c='http://www.w3.org/1999/02/22-rdf-syntax-ns#langString',u={isIRI:function(t){if(!t)return t;var n=t[0];return'"'!==n&&'_'!==n},isLiteral:function(t){return t&&'"'===t[0]},isBlank:function(t){return t&&'_:'===t.substr(0,2)},getLiteralValue:function(t){var n=/^"([^]*)"/.exec(t);if(!n)throw new Error(t+' is not a literal');return n[1]},getLiteralType:function(t){var n=/^"[^]*"(?:\^\^([^"]+)|(@)[^@"]+)?$/.exec(t);if(!n)throw new Error(t+' is not a literal');return n[1]||(n[2]?c:o)},getLiteralLanguage:function(t){var n=/^"[^]*"(?:@([^@"]+)|\^\^[^"]+)?$/.exec(t);if(!n)throw new Error(t+' is not a literal');return n[1]?n[1].toLowerCase():''},isPrefixedName:function(t){return t&&/^[^:\/"']*:[^:\/"']+$/.test(t)},expandPrefixedName:function(t,n){var a=/(?:^|"\^\^)([^:\/#"'\^_]*):[^\/]*$/.exec(t),r,i,o;return a&&(r=a[1],i=n[r],o=a.index),void 0===i?t:0===o?i+t.substr(r.length+1):t.substr(0,o+3)+i+t.substr(o+r.length+4)},createIRI:function(t){return t&&'"'===t[0]?u.getLiteralValue(t):t},createLiteral:function(t,n){if(!n)switch(typeof t){case'boolean':n=l;break;case'number':if(isFinite(t)){n=0==t%1?s:d;break}default:return'"'+t+'"';}return'"'+t+(/^[a-z]+(-[a-z0-9]+)*$/i.test(n)?'"@'+n.toLowerCase():'"^^'+n)}};t.exports=a(a)},function(t,n){function a(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(t){return'function'==typeof t}function i(t){return'number'==typeof t}function o(t){return'object'==typeof t&&null!==t}function s(t){return void 0===t}t.exports=a,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._maxListeners=void 0,a.defaultMaxListeners=10,a.prototype.setMaxListeners=function(t){if(!i(t)||0>t||isNaN(t))throw TypeError('n must be a positive number');return this._maxListeners=t,this},a.prototype.emit=function(t){var n,a,d,l,c,i;if(this._events||(this._events={}),'error'===t&&(!this._events.error||o(this._events.error)&&!this._events.error.length))if(n=arguments[1],n instanceof Error)throw n;else{var u=new Error('Uncaught, unspecified "error" event. ('+n+')');throw u.context=n,u}if(a=this._events[t],s(a))return!1;if(r(a))switch(arguments.length){case 1:a.call(this);break;case 2:a.call(this,arguments[1]);break;case 3:a.call(this,arguments[1],arguments[2]);break;default:l=Array.prototype.slice.call(arguments,1),a.apply(this,l);}else if(o(a))for(l=Array.prototype.slice.call(arguments,1),i=a.slice(),d=i.length,c=0;c<d;c++)i[c].apply(this,l);return!0},a.prototype.addListener=function(t,n){var i;if(!r(n))throw TypeError('listener must be a function');return this._events||(this._events={}),this._events.newListener&&this.emit('newListener',t,r(n.listener)?n.listener:n),this._events[t]?o(this._events[t])?this._events[t].push(n):this._events[t]=[this._events[t],n]:this._events[t]=n,o(this._events[t])&&!this._events[t].warned&&(i=s(this._maxListeners)?a.defaultMaxListeners:this._maxListeners,i&&0<i&&this._events[t].length>i&&(this._events[t].warned=!0,console.error('(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.',this._events[t].length),'function'==typeof console.trace&&console.trace())),this},a.prototype.on=a.prototype.addListener,a.prototype.once=function(t,n){function a(){this.removeListener(t,a),i||(i=!0,n.apply(this,arguments))}if(!r(n))throw TypeError('listener must be a function');var i=!1;return a.listener=n,this.on(t,a),this},a.prototype.removeListener=function(t,n){var a,s,d,l;if(!r(n))throw TypeError('listener must be a function');if(!this._events||!this._events[t])return this;if(a=this._events[t],d=a.length,s=-1,a===n||r(a.listener)&&a.listener===n)delete this._events[t],this._events.removeListener&&this.emit('removeListener',t,n);else if(o(a)){for(l=d;0<l--;)if(a[l]===n||a[l].listener&&a[l].listener===n){s=l;break}if(0>s)return this;1===a.length?(a.length=0,delete this._events[t]):a.splice(s,1),this._events.removeListener&&this.emit('removeListener',t,n)}return this},a.prototype.removeAllListeners=function(t){var n,a;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(n in this._events)'removeListener'!==n&&this.removeAllListeners(n);return this.removeAllListeners('removeListener'),this._events={},this}if(a=this._events[t],r(a))this.removeListener(t,a);else if(a)for(;a.length;)this.removeListener(t,a[a.length-1]);return delete this._events[t],this},a.prototype.listeners=function(t){var n;return n=this._events&&this._events[t]?r(this._events[t])?[this._events[t]]:this._events[t].slice():[],n},a.prototype.listenerCount=function(t){if(this._events){var n=this._events[t];if(r(n))return 1;if(n)return n.length}return 0},a.listenerCount=function(t,n){return t.listenerCount(n)}},function(t,n,a){n=t.exports=a(154),n.Stream=n,n.Readable=n,n.Writable=a(106),n.Duplex=a(43),n.Transform=a(158),n.PassThrough=a(266)},function(t,n,a){'use strict';(function(n,r,i){function o(t,n,a){this.chunk=t,this.encoding=n,this.callback=a,this.next=null}function s(t){var n=this;this.next=null,this.entry=null,this.finish=function(){N(n,t)}}function d(t){return O.from(t)}function l(t){return O.isBuffer(t)||t instanceof B}function c(){}function u(t,n){R=R||a(43),t=t||{};var r=n instanceof R;this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var i=t.highWaterMark,o=t.writableHighWaterMark,d=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(o||0===o)?o:d,this.highWaterMark=_Mathfloor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var l=!1===t.decodeStrings;this.decodeStrings=!l,this.defaultEncoding=t.defaultEncoding||'utf8',this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){x(n,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new s(this)}function f(t){return R=R||a(43),F.call(f,this)||this instanceof R?void(this._writableState=new u(t,this),this.writable=!0,t&&('function'==typeof t.write&&(this._write=t.write),'function'==typeof t.writev&&(this._writev=t.writev),'function'==typeof t.destroy&&(this._destroy=t.destroy),'function'==typeof t.final&&(this._final=t.final)),P.call(this)):new f(t)}function m(t,n){var a=new Error('write after end');t.emit('error',a),j(n,a)}function h(t,n,a,r){var i=!0,o=!1;return null===a?o=new TypeError('May not write null values to stream'):'string'!=typeof a&&void 0!==a&&!n.objectMode&&(o=new TypeError('Invalid non-string/buffer chunk')),o&&(t.emit('error',o),j(r,o),i=!1),i}function g(t,n,a){return t.objectMode||!1===t.decodeStrings||'string'!=typeof n||(n=O.from(n,a)),n}function b(t,n,a,r,i,o){if(!a){var s=g(n,r,i);r!==s&&(a=!0,i='buffer',r=s)}var d=n.objectMode?1:r.length;n.length+=d;var l=n.length<n.highWaterMark;if(l||(n.needDrain=!0),n.writing||n.corked){var c=n.lastBufferedRequest;n.lastBufferedRequest={chunk:r,encoding:i,isBuf:a,callback:o,next:null},c?c.next=n.lastBufferedRequest:n.bufferedRequest=n.lastBufferedRequest,n.bufferedRequestCount+=1}else y(t,n,!1,d,r,i,o);return l}function y(t,n,a,r,i,o,s){n.writelen=r,n.writecb=s,n.writing=!0,n.sync=!0,a?t._writev(i,n.onwrite):t._write(i,o,n.onwrite),n.sync=!1}function w(t,n,a,r,i){--n.pendingcb,a?(j(i,r),j(S,t,n),t._writableState.errorEmitted=!0,t.emit('error',r)):(i(r),t._writableState.errorEmitted=!0,t.emit('error',r),S(t,n))}function v(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function x(t,n){var a=t._writableState,r=a.sync,i=a.writecb;if(v(a),n)w(t,a,r,n,i);else{var o=E(a);o||a.corked||a.bufferProcessing||!a.bufferedRequest||C(t,a),r?L(_,t,a,o,i):_(t,a,o,i)}}function _(t,n,a,r){a||k(t,n),n.pendingcb--,r(),S(t,n)}function k(t,n){0===n.length&&n.needDrain&&(n.needDrain=!1,t.emit('drain'))}function C(t,n){n.bufferProcessing=!0;var a=n.bufferedRequest;if(t._writev&&a&&a.next){var r=n.bufferedRequestCount,i=Array(r),o=n.corkedRequestsFree;o.entry=a;for(var d=0,l=!0;a;)i[d]=a,a.isBuf||(l=!1),a=a.next,d+=1;i.allBuffers=l,y(t,n,!0,n.length,i,'',o.finish),n.pendingcb++,n.lastBufferedRequest=null,o.next?(n.corkedRequestsFree=o.next,o.next=null):n.corkedRequestsFree=new s(n),n.bufferedRequestCount=0}else{for(;a;){var c=a.chunk,u=a.encoding,f=a.callback,m=n.objectMode?1:c.length;if(y(t,n,!1,m,c,u,f),a=a.next,n.bufferedRequestCount--,n.writing)break}null===a&&(n.lastBufferedRequest=null)}n.bufferedRequest=a,n.bufferProcessing=!1}function E(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function T(t,n){t._final(function(a){n.pendingcb--,a&&t.emit('error',a),n.prefinished=!0,t.emit('prefinish'),S(t,n)})}function A(t,n){n.prefinished||n.finalCalled||('function'==typeof t._final?(n.pendingcb++,n.finalCalled=!0,j(T,t,n)):(n.prefinished=!0,t.emit('prefinish')))}function S(t,n){var a=E(n);return a&&(A(t,n),0===n.pendingcb&&(n.finished=!0,t.emit('finish'))),a}function I(t,n,a){n.ending=!0,S(t,n),a&&(n.finished?j(a):t.once('finish',a)),n.ended=!0,t.writable=!1}function N(t,n,a){var r=t.entry;for(t.entry=null;r;){var i=r.callback;n.pendingcb--,i(a),r=r.next}n.corkedRequestsFree?n.corkedRequestsFree.next=t:n.corkedRequestsFree=t}var j=a(74).nextTick;t.exports=f;var L=!n.browser&&-1<['v0.10','v0.9.'].indexOf(n.version.slice(0,5))?r:j,R;f.WritableState=u;var M=a(58);M.inherits=a(0);var D={deprecate:a(265)},P=a(156),O=a(3).Buffer,B=i.Uint8Array||function(){},U=a(157);M.inherits(f,P),u.prototype.getBuffer=function t(){for(var n=this.bufferedRequest,a=[];n;)a.push(n),n=n.next;return a},function(){try{Object.defineProperty(u.prototype,'buffer',{get:D.deprecate(function(){return this.getBuffer()},'_writableState.buffer is deprecated. Use _writableState.getBuffer instead.','DEP0003')})}catch(t){}}();var F;'function'==typeof Symbol&&Symbol.hasInstance&&'function'==typeof Function.prototype[Symbol.hasInstance]?(F=Function.prototype[Symbol.hasInstance],Object.defineProperty(f,Symbol.hasInstance,{value:function(t){return!!F.call(this,t)||!(this!==f)&&t&&t._writableState instanceof u}})):F=function(t){return t instanceof this},f.prototype.pipe=function(){this.emit('error',new Error('Cannot pipe, not readable'))},f.prototype.write=function(t,n,a){var r=this._writableState,i=!1,o=!r.objectMode&&l(t);return o&&!O.isBuffer(t)&&(t=d(t)),'function'==typeof n&&(a=n,n=null),o?n='buffer':!n&&(n=r.defaultEncoding),'function'!=typeof a&&(a=c),r.ended?m(this,a):(o||h(this,r,t,a))&&(r.pendingcb++,i=b(this,r,o,t,n,a)),i},f.prototype.cork=function(){var t=this._writableState;t.corked++},f.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,!t.writing&&!t.corked&&!t.finished&&!t.bufferProcessing&&t.bufferedRequest&&C(this,t))},f.prototype.setDefaultEncoding=function t(n){if('string'==typeof n&&(n=n.toLowerCase()),!(-1<['hex','utf8','utf-8','ascii','binary','base64','ucs2','ucs-2','utf16le','utf-16le','raw'].indexOf((n+'').toLowerCase())))throw new TypeError('Unknown encoding: '+n);return this._writableState.defaultEncoding=n,this},f.prototype._write=function(t,n,a){a(new Error('_write() is not implemented'))},f.prototype._writev=null,f.prototype.end=function(t,n,a){var r=this._writableState;'function'==typeof t?(a=t,t=null,n=null):'function'==typeof n&&(a=n,n=null),null!==t&&t!==void 0&&this.write(t,n),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||I(this,r,a)},Object.defineProperty(f.prototype,'destroyed',{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),f.prototype.destroy=U.destroy,f.prototype._undestroy=U.undestroy,f.prototype._destroy=function(t,n){this.end(),n(t)}}).call(n,a(11),a(57).setImmediate,a(5))},function(t,n,a){'use strict';function r(t){if(!t)return'utf8';for(var n;!0;)switch(t){case'utf8':case'utf-8':return'utf8';case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return'utf16le';case'latin1':case'binary':return'latin1';case'base64':case'ascii':case'hex':return t;default:if(n)return;t=(''+t).toLowerCase(),n=!0;}}function i(t){var n=r(t);if('string'!=typeof n&&(v.isEncoding===x||!x(t)))throw new Error('Unknown encoding: '+t);return n||t}function o(t){this.encoding=i(t);var n;switch(this.encoding){case'utf16le':this.text=m,this.end=h,n=4;break;case'utf8':this.fillLast=c,n=4;break;case'base64':this.text=g,this.end=b,n=3;break;default:return this.write=y,void(this.end=w);}this.lastNeed=0,this.lastTotal=0,this.lastChar=v.allocUnsafe(n)}function s(t){if(127>=t)return 0;return 6==t>>5?2:14==t>>4?3:30==t>>3?4:-1}function d(t,n,a){var r=n.length-1;if(r<a)return 0;var i=s(n[r]);return 0<=i?(0<i&&(t.lastNeed=i-1),i):--r<a?0:(i=s(n[r]),0<=i)?(0<i&&(t.lastNeed=i-2),i):--r<a?0:(i=s(n[r]),0<=i?(0<i&&(2===i?i=0:t.lastNeed=i-3),i):0)}function l(t,n,a){if(128!=(192&n[0]))return t.lastNeed=0,'\uFFFD'.repeat(a);if(1<t.lastNeed&&1<n.length){if(128!=(192&n[1]))return t.lastNeed=1,'\uFFFD'.repeat(a+1);if(2<t.lastNeed&&2<n.length&&128!=(192&n[2]))return t.lastNeed=2,'\uFFFD'.repeat(a+2)}}function c(t){var n=this.lastTotal-this.lastNeed,a=l(this,t,n);return void 0===a?this.lastNeed<=t.length?(t.copy(this.lastChar,n,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):void(t.copy(this.lastChar,n,0,t.length),this.lastNeed-=t.length):a}function u(t,n){var a=d(this,t,n);if(!this.lastNeed)return t.toString('utf8',n);this.lastTotal=a;var r=t.length-(a-this.lastNeed);return t.copy(this.lastChar,0,r),t.toString('utf8',n,r)}function f(t){var n=t&&t.length?this.write(t):'';return this.lastNeed?n+'\uFFFD'.repeat(this.lastTotal-this.lastNeed):n}function m(t,n){if(0==(t.length-n)%2){var a=t.toString('utf16le',n);if(a){var r=a.charCodeAt(a.length-1);if(55296<=r&&56319>=r)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],a.slice(0,-1)}return a}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString('utf16le',n,t.length-1)}function h(t){var n=t&&t.length?this.write(t):'';if(this.lastNeed){var a=this.lastTotal-this.lastNeed;return n+this.lastChar.toString('utf16le',0,a)}return n}function g(t,a){var r=(t.length-a)%3;return 0==r?t.toString('base64',a):(this.lastNeed=3-r,this.lastTotal=3,1==r?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString('base64',a,t.length-r))}function b(t){var n=t&&t.length?this.write(t):'';return this.lastNeed?n+this.lastChar.toString('base64',0,3-this.lastNeed):n}function y(t){return t.toString(this.encoding)}function w(t){return t&&t.length?this.write(t):''}var v=a(3).Buffer,x=v.isEncoding||function(t){switch(t=''+t,t&&t.toLowerCase()){case'hex':case'utf8':case'utf-8':case'ascii':case'binary':case'base64':case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':case'raw':return!0;default:return!1;}};;n.StringDecoder=o,o.prototype.write=function(t){if(0===t.length)return'';var n,a;if(this.lastNeed){if(n=this.fillLast(t),void 0===n)return'';a=this.lastNeed,this.lastNeed=0}else a=0;return a<t.length?n?n+this.text(t,a):this.text(t,a):n||''},o.prototype.end=f,o.prototype.text=u,o.prototype.fillLast=function(t){return this.lastNeed<=t.length?(t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):void(t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length)}},function(t,a,n){(function(t,r){function o(t,n){var r={seen:[],stylize:s};return 3<=arguments.length&&(r.depth=arguments[2]),4<=arguments.length&&(r.colors=arguments[3]),b(n)?r.showHidden=n:n&&a._extend(r,n),k(r.showHidden)&&(r.showHidden=!1),k(r.depth)&&(r.depth=2),k(r.colors)&&(r.colors=!1),k(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=i),l(r,t,r.depth)}function i(t,n){var a=o.styles[n];return a?'\x1B['+o.colors[a][0]+'m'+t+'\x1B['+o.colors[a][1]+'m':t}function s(t,n){return t}function d(t){var n={};return t.forEach(function(t,a){n[t]=!0}),n}function l(t,r,i){if(t.customInspect&&r&&S(r.inspect)&&r.inspect!==a.inspect&&!(r.constructor&&r.constructor.prototype===r)){var o=r.inspect(i,t);return _(o)||(o=l(t,o,i)),o}var s=c(t,r);if(s)return s;var b=Object.keys(r),y=d(b);if(t.showHidden&&(b=Object.getOwnPropertyNames(r)),A(r)&&(0<=b.indexOf('message')||0<=b.indexOf('description')))return u(r);if(0===b.length){if(S(r)){var w=r.name?': '+r.name:'';return t.stylize('[Function'+w+']','special')}if(C(r))return t.stylize(RegExp.prototype.toString.call(r),'regexp');if(T(r))return t.stylize(Date.prototype.toString.call(r),'date');if(A(r))return u(r)}var v='',x=!1,k=['{','}'];if(g(r)&&(x=!0,k=['[',']']),S(r)){var E=r.name?': '+r.name:'';v=' [Function'+E+']'}if(C(r)&&(v=' '+RegExp.prototype.toString.call(r)),T(r)&&(v=' '+Date.prototype.toUTCString.call(r)),A(r)&&(v=' '+u(r)),0===b.length&&(!x||0==r.length))return k[0]+v+k[1];if(0>i)return C(r)?t.stylize(RegExp.prototype.toString.call(r),'regexp'):t.stylize('[Object]','special');t.seen.push(r);var n;return n=x?f(t,r,i,y,b):b.map(function(n){return m(t,r,i,y,n,x)}),t.seen.pop(),h(n,v,k)}function c(t,n){if(k(n))return t.stylize('undefined','undefined');if(_(n)){var a='\''+JSON.stringify(n).replace(/^"|"$/g,'').replace(/'/g,'\\\'').replace(/\\"/g,'"')+'\'';return t.stylize(a,'string')}return v(n)?t.stylize(''+n,'number'):b(n)?t.stylize(''+n,'boolean'):y(n)?t.stylize('null','null'):void 0}function u(t){return'['+Error.prototype.toString.call(t)+']'}function f(t,n,a,r,o){for(var s=[],d=0,i=n.length;d<i;++d)R(n,d+'')?s.push(m(t,n,a,r,d+'',!0)):s.push('');return o.forEach(function(i){i.match(/^\d+$/)||s.push(m(t,n,a,r,i,!0))}),s}function m(t,n,a,r,i,o){var s,d,c;if(c=Object.getOwnPropertyDescriptor(n,i)||{value:n[i]},c.get?c.set?d=t.stylize('[Getter/Setter]','special'):d=t.stylize('[Getter]','special'):c.set&&(d=t.stylize('[Setter]','special')),R(r,i)||(s='['+i+']'),d||(0>t.seen.indexOf(c.value)?(d=y(a)?l(t,c.value,null):l(t,c.value,a-1),-1<d.indexOf('\n')&&(o?d=d.split('\n').map(function(t){return'  '+t}).join('\n').substr(2):d='\n'+d.split('\n').map(function(t){return'   '+t}).join('\n'))):d=t.stylize('[Circular]','special')),k(s)){if(o&&i.match(/^\d+$/))return d;s=JSON.stringify(''+i),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,'name')):(s=s.replace(/'/g,'\\\'').replace(/\\"/g,'"').replace(/(^"|"$)/g,'\''),s=t.stylize(s,'string'))}return s+': '+d}function h(t,n,a){var r=0,i=t.reduce(function(t,n){return r++,0<=n.indexOf('\n')&&r++,t+n.replace(/\u001b\[\d\d?m/g,'').length+1},0);return 60<i?a[0]+(''===n?'':n+'\n ')+' '+t.join(',\n  ')+' '+a[1]:a[0]+n+' '+t.join(', ')+' '+a[1]}function g(t){return Array.isArray(t)}function b(t){return'boolean'==typeof t}function y(t){return null===t}function w(t){return null==t}function v(t){return'number'==typeof t}function _(t){return'string'==typeof t}function x(t){return'symbol'==typeof t}function k(t){return void 0===t}function C(t){return E(t)&&'[object RegExp]'===N(t)}function E(t){return'object'==typeof t&&null!==t}function T(t){return E(t)&&'[object Date]'===N(t)}function A(t){return E(t)&&('[object Error]'===N(t)||t instanceof Error)}function S(t){return'function'==typeof t}function I(t){return null===t||'boolean'==typeof t||'number'==typeof t||'string'==typeof t||'symbol'==typeof t||'undefined'==typeof t}function N(t){return Object.prototype.toString.call(t)}function j(t){return 10>t?'0'+t.toString(10):t.toString(10)}function L(){var t=new Date,n=[j(t.getHours()),j(t.getMinutes()),j(t.getSeconds())].join(':');return[t.getDate(),O[t.getMonth()],n].join(' ')}function R(t,n){return Object.prototype.hasOwnProperty.call(t,n)}var M=/%[sdj%]/g;a.format=function(t){if(!_(t)){for(var n=[],a=0;a<arguments.length;a++)n.push(o(arguments[a]));return n.join(' ')}for(var a=1,r=arguments,i=r.length,s=(t+'').replace(M,function(t){if('%%'===t)return'%';if(a>=i)return t;switch(t){case'%s':return r[a++]+'';case'%d':return+r[a++];case'%j':try{return JSON.stringify(r[a++])}catch(t){return'[Circular]'}default:return t;}}),d=r[a];a<i;d=r[++a])s+=y(d)||!E(d)?' '+d:' '+o(d);return s},a.deprecate=function(n,i){function o(){if(!s){if(r.throwDeprecation)throw new Error(i);else r.traceDeprecation?console.trace(i):console.error(i);s=!0}return n.apply(this,arguments)}if(k(t.process))return function(){return a.deprecate(n,i).apply(this,arguments)};if(!0===r.noDeprecation)return n;var s=!1;return o};var D={},P;a.debuglog=function(t){if(k(P)&&(P=r.env.NODE_DEBUG||''),t=t.toUpperCase(),!D[t])if(new RegExp('\\b'+t+'\\b','i').test(P)){var n=r.pid;D[t]=function(){var r=a.format.apply(a,arguments);console.error('%s %d: %s',t,n,r)}}else D[t]=function(){};return D[t]},a.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:'cyan',number:'yellow',boolean:'yellow',undefined:'grey',null:'bold',string:'green',date:'magenta',regexp:'red'},a.isArray=g,a.isBoolean=b,a.isNull=y,a.isNullOrUndefined=w,a.isNumber=v,a.isString=_,a.isSymbol=x,a.isUndefined=k,a.isRegExp=C,a.isObject=E,a.isDate=T,a.isError=A,a.isFunction=S,a.isPrimitive=I,a.isBuffer=n(271);var O=['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];a.log=function(){console.log('%s - %s',L(),a.format.apply(a,arguments))},a.inherits=n(272),a._extend=function(t,n){if(!n||!E(n))return t;for(var a=Object.keys(n),r=a.length;r--;)t[a[r]]=n[a[r]];return t}}).call(a,n(5),n(11))},function(t,n){function a(t,n){if(!(this instanceof a))return new a(t,n);if(t&&'function'!=typeof t.write&&(n=t,t=null),n=n||{},!t){var r='';this._outputStream={write:function(t,n,a){r+=t,a&&a()},end:function(t){t&&t(null,r)}},this._endStream=!0}else this._outputStream=t,this._endStream=void 0===n.end||!!n.end;this._subject=null,/triple|quad/i.test(n.format)?this._writeTriple=this._writeTripleLine:(this._graph='',this._prefixIRIs=Object.create(null),n.prefixes&&this.addPrefixes(n.prefixes))}function r(t){var n=c[t];return void 0===n&&(1===t.length?(n=t.charCodeAt(0).toString(16),n='\\u0000'.substr(0,6-n.length)+n):(n=(1024*(t.charCodeAt(0)-55296)+t.charCodeAt(1)+9216).toString(16),n='\\U00000000'.substr(0,10-n.length)+n)),n}var i=/^"([^]*)"(?:\^\^(.+)|@([\-a-z]+))?$/i,o='http://www.w3.org/1999/02/22-rdf-syntax-ns#',s=o+'type',d=/["\\\t\n\r\b\f\u0000-\u0019\ud800-\udbff]/,l=/["\\\t\n\r\b\f\u0000-\u0019]|[\ud800-\udbff][\udc00-\udfff]/g,c={"\\":'\\\\','"':'\\"',"	":'\\t',"\n":'\\n',"\r":'\\r',"":'\\b',"":'\\f'};a.prototype={_write:function(t,n){this._outputStream.write(t,'utf8',n)},_writeTriple:function(t,n,a,r,i){try{this._graph!==r&&(this._write((null===this._subject?'':this._graph?'\n}\n':'.\n')+(r?this._encodeIriOrBlankNode(r)+' {\n':'')),this._subject=null,this._graph='['===r[0]?']':r),this._subject===t?this._predicate===n?this._write(', '+this._encodeObject(a),i):this._write(';\n    '+this._encodePredicate(this._predicate=n)+' '+this._encodeObject(a),i):this._write((null===this._subject?'':'.\n')+this._encodeSubject(this._subject=t)+' '+this._encodePredicate(this._predicate=n)+' '+this._encodeObject(a),i)}catch(t){i&&i(t)}},_writeTripleLine:function(t,n,a,r,i){delete this._prefixMatch;try{this._write(this._encodeIriOrBlankNode(t)+' '+this._encodeIriOrBlankNode(n)+' '+this._encodeObject(a)+(r?' '+this._encodeIriOrBlankNode(r)+'.\n':'.\n'),i)}catch(t){i&&i(t)}},_encodeIriOrBlankNode:function(t){var n=t[0];if('['===n||'('===n||'_'===n&&':'===t[1])return t;d.test(t)&&(t=t.replace(l,r));var a=this._prefixRegex.exec(t);return a?a[1]?this._prefixIRIs[a[1]]+a[2]:t:'<'+t+'>'},_encodeLiteral:function(t,n,a){return d.test(t)&&(t=t.replace(l,r)),a?'"'+t+'"@'+a:n?'"'+t+'"^^'+this._encodeIriOrBlankNode(n):'"'+t+'"'},_encodeSubject:function(t){if('"'===t[0])throw new Error('A literal as subject is not allowed: '+t);return'['===t[0]&&(this._subject=']'),this._encodeIriOrBlankNode(t)},_encodePredicate:function(t){if('"'===t[0])throw new Error('A literal as predicate is not allowed: '+t);return t===s?'a':this._encodeIriOrBlankNode(t)},_encodeObject:function(t){if('"'!==t[0])return this._encodeIriOrBlankNode(t);var n=i.exec(t);if(!n)throw new Error('Invalid literal: '+t);return this._encodeLiteral(n[1],n[2],n[3])},_blockedWrite:function(){throw new Error('Cannot write because the writer has been closed.')},addTriple:function(t,n,a,r,i){a===void 0?this._writeTriple(t.subject,t.predicate,t.object,t.graph||'',n):'string'==typeof r?this._writeTriple(t,n,a,r,i):this._writeTriple(t,n,a,'',r)},addTriples:function(t){for(var n=0;n<t.length;n++)this.addTriple(t[n])},addPrefix:function(t,n,a){var r={};r[t]=n,this.addPrefixes(r,a)},addPrefixes:function(t,n){var a=this._prefixIRIs,r=!1;for(var i in t){var o=t[i];/[#\/]$/.test(o)&&a[o]!==(i+=':')&&(r=!0,a[o]=i,null!==this._subject&&(this._write(this._graph?'\n}\n':'.\n'),this._subject=null,this._graph=''),this._write('@prefix '+i+' <'+o+'>.\n'))}if(r){var s='',d='';for(var l in a)s+=s?'|'+l:l,d+=(d?'|':'')+a[l];s=s.replace(/[\]\/\(\)\*\+\?\.\\\$]/g,'\\$&'),this._prefixRegex=new RegExp('^(?:'+d+')[^/]*$|^('+s+')([a-zA-Z][\\-_a-zA-Z0-9]*)$')}this._write(r?'\n':'',n)},blank:function(t,n){var a=t,r,o;switch(void 0===t?a=[]:'string'==typeof t?a=[{predicate:t,object:n}]:!('length'in t)&&(a=[t]),o=a.length){case 0:return'[]';case 1:if(r=a[0],'['!==r.object[0])return'[ '+this._encodePredicate(r.predicate)+' '+this._encodeObject(r.object)+' ]';default:for(var s='[',d=0;d<o;d++)r=a[d],r.predicate===t?s+=', '+this._encodeObject(r.object):(s+=(d?';\n  ':'\n  ')+this._encodePredicate(r.predicate)+' '+this._encodeObject(r.object),t=r.predicate);return s+'\n]';}},list:function(t){for(var n=t&&t.length||0,a=Array(n),r=0;r<n;r++)a[r]=this._encodeObject(t[r]);return'('+a.join(' ')+')'},_prefixRegex:/$0^/,end:function(t){null!==this._subject&&(this._write(this._graph?'\n}\n':'.\n'),this._subject=null),this._write=this._blockedWrite;var n=t&&function(a,r){n=null,t(a,r)};if(this._endStream)try{return this._outputStream.end(n)}catch(t){}n&&n()}},t.exports=a},function(t,n,a){'use strict';var r=a(10),o=a(41),i=a(16),s=a(32),d=a(146),l=function(){function t(t){return encodeURI(t)}function n(t){for(var n='',a=0,r;a<t.length;a++)r=t.charCodeAt(a),n+=65535<r?'\\U'+('00000000'+r.toString(16)).slice(-8):126<r?'\\u'+('0000'+r.toString(16)).slice(-4):t[a];return n}var a=function t(n){this.flags='',this.base=null,this.prefixes=[],this.namespaces=[],this.suggestPrefix('rdf','http://www.w3.org/1999/02/22-rdf-syntax-ns#'),this.suggestPrefix('xml','reserved:reservedForFutureUse'),this.namespacesUsed=[],this.keywords=['a'],this.prefixchars='abcdefghijklmnopqustuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ',this.incoming=null,this.formulas=[],this.store=n};a.prototype.setBase=function(t){return this.base=t,this},a.prototype.setFlags=function(t){return this.flags=t||'',this},a.prototype.toStr=function(t){var n=t.toNT();return'Graph'===t.termType&&(this.formulas[n]=t),n},a.prototype.fromStr=function(t){if('{'===t[0]){var n=this.formulas[t];return n||console.log('No formula object for '+t),n}return this.store.fromNT(t)},a.prototype.suggestPrefix=function(t,n){'default'===t.slice(0,7)||'ns'===t.slice(0,2)||!t||!n||t in this.namespaces||n in this.prefixes||(this.prefixes[n]=t,this.namespaces[t]=n)},a.prototype.suggestNamespaces=function(t){for(var n in t)return this.suggestPrefix(n,t[n]),this},a.prototype.checkIntegrity=function(){var t,n;for(t in this.namespaces)if(this.prefixes[this.namespaces[t]]!==t)throw new Error('Serializer integity error 1: '+t+', '+this.namespaces[t]+', '+this.prefixes[this.namespaces[t]]+'!');for(n in this.prefixes)if(this.namespaces[this.prefixes[n]]!==n)throw new Error('Serializer integity error 2: '+n+', '+this.prefixs[n]+', '+this.namespaces[this.prefixes[n]]+'!')},a.prototype.makeUpPrefix=function(t){function n(n){return!!a.prototype.validPrefix.test(n)&&'ns'!==n&&!(n in this.namespaces)&&(this.prefixes[t]=n,this.namespaces[n]=t,n)}var r=t,o=n.bind(this);0<='#/'.indexOf(r[r.length-1])&&(r=r.slice(0,-1));var s=r.lastIndexOf('/');0<=s&&(r=r.slice(s+1));for(var d=0;d<r.length&&this.prefixchars.indexOf(r[d]);)d++;if(r=r.slice(0,d),6>r.length&&o(r))return r;if(o(r.slice(0,3)))return r.slice(0,3);if(o(r.slice(0,2)))return r.slice(0,2);if(o(r.slice(0,4)))return r.slice(0,4);if(o(r.slice(0,1)))return r.slice(0,1);if(o(r.slice(0,5)))return r.slice(0,5);a.prototype.validPrefix.test(r)||(r='n');for(var i=0;;i++)if(o(r.slice(0,3)+i))return r.slice(0,3)+i},a.prototype.rootSubjects=function(t){for(var n={},a={},r={},o=0;o<t.length;o++){var i=t[o],s=function t(a){n.hasOwnProperty(a)||(n[a]=[]),n[a].push(i.subject)},d=[i.subject,i.predicate,i.object];d.map(function(t){'BlankNode'===t.termType?r[t.toNT()]=!0:'Collection'===t.termType&&t.elements.forEach(function(t){s(t)})}),s(t[o].object);var l=a[this.toStr(i.subject)];l||(l=[]),l.push(i),a[this.toStr(i.subject)]=l}var c=[];for(var u in a)if(a.hasOwnProperty(u)){var f=this.fromStr(u);if('BlankNode'!==f.termType||!n[f]||1!==n[f].length){c.push(f);continue}}this.incoming=n;for(var m={},h=0;h<c.length;h++)m[c[h].toNT()]=!0;return{roots:c,subjects:a,rootsHash:m,incoming:n}},a.prototype.toN3=function(t){return this.statementsToN3(t.statements)},a.prototype._notQNameChars='\t\r\n !"#$%&\'()*.,+/;<=>?@[\\]^`{|}~',a.prototype._notNameChars=a.prototype._notQNameChars+':',a.prototype.explicitURI=function(a){return a=0>this.flags.indexOf('r')&&this.base?i.refTo(this.base,a):0<=this.flags.indexOf('u')?n(a):t(a),'<'+a+'>'},a.prototype.statementsToNTriples=function(t){var n=t.slice();n.sort();for(var a='',r='http://www.w3.org/1999/02/22-rdf-syntax-ns#',d=this,l=this.store,c=function t(n){if('Collection'!==n.termType)return d.atomicTermToN3(n);for(var s=n.elements,c=l.sym(r+'nill'),u=s.length-1,i;0<=u;u--)i=new o,a+=t(i)+' '+t(l.sym(r+'first'))+' '+t(s[u])+'.\n',a+=t(i)+' '+t(l.sym(r+'rest'))+' '+t(c)+'.\n',c=i;return d.atomicTermToN3(c)},u=0;u<n.length;u++){var i=n[u],f='';f+=c(i.subject)+' ',f+=c(i.predicate)+' ',f+=c(i.object)+' ',0<=this.flags.indexOf('q')&&(f+=c(i.why)+' '),f+='.\n',a+=f}return a},a.prototype.statementsToN3=function(t){function n(t){for(var n=this.rootSubjects(t),a=n.roots,o=[],s=0,i;s<a.length;s++)i=a[s],o.push(r(i,n));return o}function r(t,n){return'BlankNode'!==t.termType||n.incoming[t]?[k(t,n)].concat([x(t,n)]).concat(['.']):_(t,n,!0).concat(['.'])}function i(t,n){var a=[],r=null,o=n.subjects[this.toStr(t)]||[];if('undefined'==typeof o)throw new Error('Cant find statements for '+t);for(var s=[],d=0,i;d<o.length;d++)i=o[d],i.predicate.uri===r?s.push(','):(r&&(a=a.concat([s]).concat([';']),s=[]),a.push(g[i.predicate.uri]?g[i.predicate.uri]:k(i.predicate,n))),r=i.predicate.uri,s.push(_(i.object,n));return a=a.concat([s]),a}function o(t,n,a){return'BlankNode'===t.termType&&(a||void 0===n.rootsHash[t.toNT()])?n.subjects[this.toStr(t)]?['[',x(t,n),']']:'[]':k(t,n)}function d(t,n){var a,r;switch(t.termType){case'Graph':return r=['{'],r=r.concat(v(t.statements)),r.concat(['}']);case'Collection':for(r=['('],a=0;a<t.elements.length;a++)r.push([_(t.elements[a],n)]);return r.push(')'),r;default:return this.atomicTermToN3(t);}}function l(){var t='';for(var n in this.defaultNamespace&&(t+='@prefix : '+this.explicitURI(this.defaultNamespace)+'.\n'),this.prefixes)this.prefixes.hasOwnProperty(n)&&this.namespacesUsed[n]&&(t+='@prefix '+this.prefixes[n]+': '+this.explicitURI(n)+'.\n');return t+'\n'}var c=4,u=80,f=this.store,m={"http://www.w3.org/1999/02/22-rdf-syntax-ns#type":'aaa:00'},h=function t(n,a){return s.heavyCompareSPO(n,a,f,m)};t.sort(h),this.base&&!this.defaultNamespace&&(this.defaultNamespace=this.base+'#');var g={};0>this.flags.indexOf('s')&&(g['http://www.w3.org/2002/07/owl#sameAs']='='),0>this.flags.indexOf('t')&&(g['http://www.w3.org/1999/02/22-rdf-syntax-ns#type']='a'),0>this.flags.indexOf('i')&&(g['http://www.w3.org/2000/10/swap/log#implies']='=>');var b=function t(a){for(var n='',r=0;r<a;r++)n+=' ';return n},y=function t(n){for(var a='',r=0;r<n.length;r++){var i=n[r],o='string'==typeof i?i:t(i);if(0!==r){var s=a.slice(-1)||' ';','!==o&&';'!==o&&('.'!==o||'0123456789.'.includes(s))&&(a+=' ')}a+=o}return a},w=function t(n,a){var r='',o=1e5;a===void 0&&(a=-1);for(var s=0,i;s<n.length;s++){if(i=n[s],'string'!=typeof i){var d=t(i,a+1);if(d.length<10*(u-c*a)&&0>d.indexOf('"""')){var l=y(i);l.length<u-c*a&&(i=l,d='')}d&&(o=1e4),r+=d}if('string'==typeof i){if(1===i.length&&'\n'===r.slice(-1)&&0<=',.;'.indexOf(i)){r=r.slice(0,-1)+i+'\n',o+=1;continue}if(o<c*a+4||o+i.length+1<u&&0>';.'.indexOf(r[r.length-2]))r=r.slice(0,-1)+' '+i+'\n',o+=i.length+1;else{var f=b(c*a)+i;r+=f+'\n',o=f.length,0>a&&(r+='\n',o=1e5)}}}return r},v=n.bind(this),x=i.bind(this),_=o.bind(this);a.prototype.termToN3=k;var k=d.bind(this),C=l.bind(this),E=v(t);return C()+w(E)},a.prototype.atomicTermToN3=function t(n,a){switch(n.termType){case'BlankNode':case'Variable':return n.toNT();case'Literal':var r=n.value.toString();if(n.datatype&&0>this.flags.indexOf('x'))switch(n.datatype.uri){case'http://www.w3.org/2001/XMLSchema#integer':return r;case'http://www.w3.org/2001/XMLSchema#decimal':return 0>r.indexOf('.')&&(r+='.0'),r;case'http://www.w3.org/2001/XMLSchema#double':return 0>r.indexOf('.')&&(r+='.0'),0>r.indexOf('e')&&(r+='e0'),r;case'http://www.w3.org/2001/XMLSchema#boolean':return n.value?'true':'false';}var i=this.stringToN3(n.value);return n.language?i+='@'+n.language:!n.datatype.equals(d.string)&&(i+='^^'+this.atomicTermToN3(n.datatype,a)),i;case'NamedNode':return this.symbolToN3(n);default:throw new Error('Internal: atomicTermToN3 cannot handle '+n+' of termType: '+n.termType);}},a.prototype.validPrefix=new RegExp(/^[a-zA-Z][a-zA-Z0-9]*$/),a.prototype.forbidden1=new RegExp(/[\\"\b\f\r\v\t\n\u0080-\uffff]/gm),a.prototype.forbidden3=new RegExp(/[\\"\b\f\r\v\u0080-\uffff]/gm),a.prototype.stringToN3=function t(n,r){r||(r='e');var o='',s,i,d,l,c;for(20<n.length&&'"'!==n.slice(-1)&&0>r.indexOf('n')&&(0<n.indexOf('\n')||0<n.indexOf('"'))?(l='"""',c=a.prototype.forbidden3):(l='"',c=a.prototype.forbidden1),s=0;s<n.length;){c.lastIndex=0;var u=c.exec(n.slice(s));if(null==u)break;i=s+c.lastIndex-1,o+=n.slice(s,i);var f=n[i];'"'===f&&'"""'===l&&'"""'!==n.slice(i,i+3)?o+=f:(d='\b\f\r\t\x0B\n\\"'.indexOf(f),o+=0<=d?'\\'+'bfrtvn\\"'[d]:0<=r.indexOf('e')?'\\u'+('000'+f.charCodeAt(0).toString(16).toLowerCase()).slice(-4):f),s=i+1}return l+o+n.slice(s)+l},a.prototype.symbolToN3=function t(n){var r=n.uri,i=r.indexOf('#');if(0>i&&0>this.flags.indexOf('/')&&(i=r.lastIndexOf('/')),0<=i&&0>this.flags.indexOf('p')&&(0===r.indexOf('http')||0===r.indexOf('ws')||0===r.indexOf('file'))){for(var o=!0,s=i+1;s<r.length;s++)if(0<=a.prototype._notNameChars.indexOf(r[s])){o=!1;break}if(o){var d=r.slice(i+1),l=r.slice(0,i+1);if(this.defaultNamespace&&this.defaultNamespace===l&&0>this.flags.indexOf('d'))return 0<=this.flags.indexOf('k')&&0>this.keyords.indexOf(d)?d:':'+d;var c=this.prefixes[l];if(c||(c=this.makeUpPrefix(l)),c)return this.namespacesUsed[l]=!0,c+':'+d}}return this.explicitURI(r)},a.prototype.writeStore=function(t){var n=this.store,a=n.fetcher,r=a&&a.appNode,i=this.store.index[3];for(var o in i){var s=n.fromNT(o);r&&s.sameTerm(r)||t('\n'+this.atomicTermToN3(s)+' '+this.atomicTermToN3(n.sym('http://www.w3.org/2000/10/swap/log#semantics'))+' { '+this.statementsToN3(n.statementsMatching(void 0,void 0,void 0,s))+' }.\n')}n.statementsMatching(void 0,n.sym('http://www.w3.org/2007/ont/link#requestedURI')).map(function(a){t('\n<'+a.object.value+'> log:metadata {\n');var r=n.statementsMatching(void 0,void 0,void 0,a.subject);t(this.statementsToN3(this.statementsToN3(r))),t('}.\n')});var d=[];r&&d.push(r);var l=[];d.map(function(t){l=l.concat(n.statementsMatching(void 0,void 0,void 0,t))}),t(this.statementsToN3(l))},a.prototype.statementsToXML=function(t){function n(t){this.suggestPrefix('rdf','http://www.w3.org/1999/02/22-rdf-syntax-ns#');for(var n=this.rootSubjects(t),a=n.roots,r=[],o=0,i;o<a.length;o++)i=a[o],r.push(k(i,n));return r}function o(t){return'undefined'==typeof t?'@@@undefined@@@@':t.replace(/[&<"]/g,function(t){switch(t[0]){case'&':return'&amp;';case'<':return'&lt;';case'"':return'&quot;';}})}function i(t){return o(this.base?s.uri.refTo(this.base,t.uri):t.uri)}function l(n,a){var s=[],l=a.subjects[this.toStr(n)],u,f,t,m;if('undefined'==typeof l)return C(n,a);l.sort(function(t,n){var a=t.predicate.uri,r=n.predicate.uri;if(a.substring(0,y.length)===y||r.substring(0,y.length)===y)return a.localeCompare(r);var i=a.substring(y.length),o=r.substring(y.length),s=parseInt(i,10),d=parseInt(o,10);return isNaN(s)||isNaN(d)||s!==i||d!==o?a.localeCompare(r):s-d});for(var h=0;h<l.length;h++){if(t=l[h],'http://www.w3.org/1999/02/22-rdf-syntax-ns#type'===t.predicate.uri&&!u&&'symbol'===t.object.termType){u=t.object;continue}if(m=t.predicate,m.uri.substr(0,y.length)===y){var i=m.uri.substr(y.length),g=parseInt(i,10);i===g.toString()&&(m=new r('http://www.w3.org/1999/02/22-rdf-syntax-ns#li'))}switch(f=E(m),t.object.termType){case'BlankNode':s=1===a.incoming[t.object].length?s.concat(['<'+f+' rdf:parseType="Resource">',k(t.object,a),'</'+f+'>']):s.concat(['<'+f+' rdf:nodeID="'+t.object.toNT().slice(2)+'"/>']);break;case'NamedNode':s=s.concat(['<'+f+' rdf:resource="'+_(t.object)+'"/>']);break;case'Literal':s=s.concat(['<'+f+(t.object.datatype.equals(d.string)?'':' rdf:datatype="'+o(t.object.datatype.uri)+'"')+(t.object.language?' xml:lang="'+t.object.language+'"':'')+'>'+o(t.object.value)+'</'+f+'>']);break;case'Collection':s=s.concat(['<'+f+' rdf:parseType="Collection">',c(t.object,a),'</'+f+'>']);break;default:throw new Error('Can\'t serialize object of type '+t.object.termType+' into XML');}}var b=u?E(u):'rdf:Description',w='';return'BlankNode'===n.termType?(!a.incoming[n]||1!==a.incoming[n].length)&&(w=' rdf:nodeID="'+n.toNT().slice(2)+'"'):w=' rdf:about="'+_(n)+'"',['<'+b+w+'>'].concat([s]).concat(['</'+b+'>'])}function c(t,n){for(var a=[],r=0;r<t.elements.length;r++)a.push(k(t.elements[r],n));return a}function u(t,n){var a=[],r=n.subjects[this.toStr(t)];if(!r)return a;r.sort();for(var s=0,i;s<r.length;s++)switch(i=r[s],i.object.termType){case'BlankNode':a=n.rootsHash[i.object.toNT()]?a.concat(['<'+E(i.predicate)+' rdf:nodeID="'+i.object.toNT().slice(2)+'">','</'+E(i.predicate)+'>']):a.concat(['<'+E(i.predicate)+' rdf:parseType="Resource">',C(i.object,n),'</'+E(i.predicate)+'>']);break;case'NamedNode':a=a.concat(['<'+E(i.predicate)+' rdf:resource="'+_(i.object)+'"/>']);break;case'Literal':a=a.concat(['<'+E(i.predicate)+(i.object.datatype.equals(d.string)?'':' rdf:datatype="'+o(i.object.datatype.value)+'"')+(i.object.language?' xml:lang="'+i.object.language+'"':'')+'>'+o(i.object.value)+'</'+E(i.predicate)+'>']);break;case'Collection':a=a.concat(['<'+E(i.predicate)+' rdf:parseType="Collection">',c(i.object,n),'</'+E(i.predicate)+'>']);break;default:throw new Error('Can\'t serialize object of type '+i.object.termType+' into XML');}return a}function f(t){var n=t.uri,r=n.indexOf('#');if(0>r&&0>this.flags.indexOf('/')&&(r=n.lastIndexOf('/')),0>r)throw new Error('Cannot make qname out of <'+n+'>');for(var i=r+1;i<n.length;i++)if(0<=a.prototype._notNameChars.indexOf(n[i]))throw new Error('Invalid character "'+n[i]+'" cannot be in XML qname for URI: '+n);var o=n.slice(r+1),s=n.slice(0,r+1);if(this.defaultNamespace&&this.defaultNamespace===s&&0>this.flags.indexOf('d'))return o;var d=this.prefixes[s];return d||(d=this.makeUpPrefix(s)),g[s]=!0,d+':'+o}var m=4,h=80,g=[];g['http://www.w3.org/1999/02/22-rdf-syntax-ns#']=!0;var y='http://www.w3.org/1999/02/22-rdf-syntax-ns#_',b=function t(a){for(var n='',r=0;r<a;r++)n+=' ';return n},w=function t(n){for(var a='',r=0;r<n.length;r++){var i=n[r],o='string'==typeof i?i:t(i);a+=o}return a},v=function t(n,a){var r='',o=1e5,s;a||(a=0);for(var d=0,i;d<n.length;d++){if(i=n[d],'string'!=typeof i){var l=t(i,a+1);l.length<10*(h-m*a)&&0>l.indexOf('"""')&&(s=w(i),s.length<h-m*a&&(i='   '+s,l='')),l&&(o=1e4),r+=l}'string'==typeof i&&(o<m*a+4?(r=r.slice(0,-1)+' '+i+'\n',o+=i.length+1):(s=b(m*a)+i,r+=s+'\n',o=s.length))}return r},x=n.bind(this),_=i.bind(this),k=l.bind(this),C=u.bind(this),E=f.bind(this),T=x(t),A='<rdf:RDF';for(var S in this.defaultNamespace&&(A+=' xmlns="'+o(this.defaultNamespace)+'"'),g)if(g.hasOwnProperty(S)){var I=this.base&&this.flags.includes('z')?s.uri.refTo(this.base,S):S;A+='\n xmlns:'+this.prefixes[S]+'="'+o(I)+'"'}A+='>';var N=[A,T,'</rdf:RDF>'];return v(N,-1)};var l=function t(n){return new a(n)};return l}();t.exports=l},function(t,n,a){'use strict';function r(t,n){if(!t)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return n&&('object'==typeof n||'function'==typeof n)?n:t}function i(t,n){if('function'!=typeof n&&null!==n)throw new TypeError('Super expression must either be null or a function, not '+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}function o(t,n){if(!(t instanceof n))throw new TypeError('Cannot call a class as a function')}var s=function(){function t(t,n){for(var a=0,r;a<n.length;a++)r=n[a],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}return function(n,a,r){return a&&t(n.prototype,a),r&&t(n,r),n}}(),d=a(42),l=a(79),c=a(10),u=a(59),f=a(160),m=a(112).parseRDFaDOM,h=a(113),g=a(16),b=a(32),y=a(100),w=a(162).fetch,v={"text/n3":!0,"text/turtle":!0,"application/rdf+xml":!0,"application/xhtml+xml":!0,"text/html":!0,"application/ld+json":!0},x={rdf:'application/rdf+xml',owl:'application/rdf+xml',n3:'text/n3',ttl:'text/turtle',nt:'text/n3',acl:'text/n3',html:'text/html',xml:'text/xml'},_={link:u('http://www.w3.org/2007/ont/link#'),http:u('http://www.w3.org/2007/ont/http#'),httph:u('http://www.w3.org/2007/ont/httph#'),rdf:u('http://www.w3.org/1999/02/22-rdf-syntax-ns#'),rdfs:u('http://www.w3.org/2000/01/rdf-schema#'),dc:u('http://purl.org/dc/elements/1.1/'),ldp:u('http://www.w3.org/ns/ldp#')},k=function t(n,a){o(this,t),this.response=n,this.dom=a},C=function(t){function n(){return o(this,n),r(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return i(n,t),s(n,[{key:'parse',value:function t(n,a,r){var i=n.store;this.dom||(this.dom=b.parseXML(a));var o=this.dom.documentElement;if('parsererror'===o.nodeName)return n.failFetch(r,'Badly formed XML in '+r.resource.uri,'parse_error');var s=new h(i);try{s.parse(this.dom,r.original.uri,r.original)}catch(t){return n.failFetch(r,'Syntax error parsing RDF/XML! '+t,'parse_error')}return r.noMeta||i.add(r.original,_.rdf('type'),_.link('RDFDocument'),n.appNode),n.doneFetch(r,this.response)}}],[{key:'toString',value:function t(){return'RDFXMLHandler'}},{key:'register',value:function t(n){n.mediatypes['application/rdf+xml']={q:0.9}}}]),n}(k);C.pattern=/application\/rdf\+xml/;var E=function(t){function n(){return o(this,n),r(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return i(n,t),s(n,[{key:'parse',value:function t(n,a,r){var o,s;this.dom||(this.dom=b.parseXML(a));var d=n.store,l=this.dom.getElementsByTagName('title');0<l.length&&d.add(r.resource,_.dc('title'),d.literal(l[0].textContent),r.resource);for(var c=this.dom.getElementsByTagName('link'),u=c.length-1;0<=u;u--)o=c[u].getAttribute('rel'),s=!1,o||(o=c[u].getAttribute('rev'),s=!0),o&&n.linkData(r.original,o,c[u].getAttribute('href'),r.resource,s);for(var h=this.dom.getElementsByTagName('script'),g=0,i;g<h.length;g++)i=h[g].getAttribute('type'),v[i]&&f(h[g].textContent,d,r.original.uri,i);if(r.noMeta||d.add(r.resource,_.rdf('type'),_.link('WebPage'),n.appNode),!r.noRDFa&&m)try{m(this.dom,d,r.original.uri)}catch(t){var y='Error trying to parse '+r.resource+' as RDFa:\n'+t+':\n'+t.stack;return n.failFetch(r,y,'parse_error')}return n.doneFetch(r,this.response)}}],[{key:'toString',value:function t(){return'XHTMLHandler'}},{key:'register',value:function t(n){n.mediatypes['application/xhtml+xml']={}}}]),n}(k);E.pattern=/application\/xhtml/;var T=function(t){function n(){return o(this,n),r(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return i(n,t),s(n,[{key:'parse',value:function t(n,a,r){for(var i=b.parseXML(a),o=0;o<i.childNodes.length;o++)if(1===i.childNodes[o].nodeType){var s=i.childNodes[o].namespaceURI;if(s&&s===s.rdf){n.addStatus(r.req,'Has XML root element in the RDF namespace, so assume RDF/XML.');var d=new C(this.response,i);return d.parse(n,a,r)}break}if(i.doctype&&'html'===i.doctype.name&&i.doctype.publicId.match(/^-\/\/W3C\/\/DTD XHTML/)&&i.doctype.systemId.match(/http:\/\/www.w3.org\/TR\/xhtml/)){n.addStatus(r.req,'Has XHTML DOCTYPE. Switching to XHTML Handler.\n');var l=new E(this.response,i);return l.parse(n,a,r)}var c=i.getElementsByTagName('html')[0];if(c){var u=c.getAttribute('xmlns');if(u&&u.match(/^http:\/\/www.w3.org\/1999\/xhtml/)){n.addStatus(r.req,'Has a default namespace for XHTML. Switching to XHTMLHandler.\n');var f=new E(this.response,i);return f.parse(n,a,r)}}return n.failFetch(r,'Unsupported dialect of XML: not RDF or XHTML namespace, etc.\n'+a.slice(0,80))}}],[{key:'toString',value:function t(){return'XMLHandler'}},{key:'register',value:function t(n){n.mediatypes['text/xml']={q:0.5},n.mediatypes['application/xml']={q:0.5}}}]),n}(k);T.pattern=/(text|application)\/(.*)xml/;var A=function(t){function n(){return o(this,n),r(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return i(n,t),s(n,[{key:'parse',value:function t(n,a,r){var i=n.store;if(a.match(/\s*<\?xml\s+version\s*=[^<>]+\?>/)){n.addStatus(r.req,'Has an XML declaration. We\'ll assume it\'s XHTML as the content-type was text/html.\n');var o=new E(this.response);return o.parse(n,a,r)}if(a.match(/.*<!DOCTYPE\s+html[^<]+-\/\/W3C\/\/DTD XHTML[^<]+http:\/\/www.w3.org\/TR\/xhtml[^<]+>/)){n.addStatus(r.req,'Has XHTML DOCTYPE. Switching to XHTMLHandler.\n');var s=new E(this.response);return s.parse(n,a,r)}if(a.match(/[^(<html)]*<html\s+[^<]*xmlns=['"]http:\/\/www.w3.org\/1999\/xhtml["'][^<]*>/)){n.addStatus(r.req,'Has default namespace for XHTML, so switching to XHTMLHandler.\n');var d=new E(this.response);return d.parse(n,a,r)}var l=/<title>([\s\S]+?)<\/title>/im.exec(a);return l&&i.add(r.resource,_.dc('title'),i.literal(l[1]),r.resource),i.add(r.resource,_.rdf('type'),_.link('WebPage'),n.appNode),n.addStatus(r.req,'non-XML HTML document, not parsed for data.'),n.doneFetch(r,this.response)}}],[{key:'toString',value:function t(){return'HTMLHandler'}},{key:'register',value:function t(n){n.mediatypes['text/html']={q:0.9}}}]),n}(k);A.pattern=/text\/html/;var S=function(t){function n(){return o(this,n),r(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return i(n,t),s(n,[{key:'parse',value:function t(n,a,r){if(a.match(/\s*<\?xml\s+version\s*=[^<>]+\?>/)){n.addStatus(r.req,'Warning: '+r.resource+' has an XML declaration. We\'ll assume it\'s XML but its content-type wasn\'t XML.\n');var i=new T(this.response);return i.parse(n,a,r)}if(a.slice(0,500).match(/xmlns:/)){n.addStatus(r.req,'May have an XML namespace. We\'ll assume it\'s XML but its content-type wasn\'t XML.\n');var o=new T(this.response);return o.parse(n,a,r)}return n.addStatus(r.req,'Plain text document, no known RDF semantics.'),n.doneFetch(r,this.response)}}],[{key:'toString',value:function t(){return'TextHandler'}},{key:'register',value:function t(n){n.mediatypes['text/plain']={q:0.5}}}]),n}(k);S.pattern=/text\/plain/;var I=function(t){function n(){return o(this,n),r(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return i(n,t),s(n,[{key:'parse',value:function t(n,a,r){var i=n.store,o=l(i,i,r.original.uri,r.original.uri,null,null,'',null);try{o.loadBuf(a)}catch(t){var s='Error trying to parse '+r.resource+' as Notation3:\n'+t+':\n'+t.stack;return n.failFetch(r,s,'parse_error')}return n.addStatus(r.req,'N3 parsed: '+o.statementCount+' triples in '+o.lines+' lines.'),n.store.add(r.original,_.rdf('type'),_.link('RDFDocument'),n.appNode),n.doneFetch(r,this.response)}}],[{key:'toString',value:function t(){return'N3Handler'}},{key:'register',value:function t(n){n.mediatypes['text/n3']={q:'1.0'},n.mediatypes['text/turtle']={q:1}}}]),n}(k);I.pattern=/(application|text)\/(x-)?(rdf\+)?(n3|turtle)/;var N={RDFXMLHandler:C,XHTMLHandler:E,XMLHandler:T,HTMLHandler:A,TextHandler:S,N3Handler:I},j=function(){function t(n){var a=this,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(o(this,t),this.store=n,this.timeout=r.timeout||3e4,console.log('@@ Creating new Fetcher. Store size: '+n.statements.length),this._fetch=r.fetch||w,!this._fetch)throw new Error('No _fetch function availble for Fetcher');this.appNode=this.store.bnode(),this.store.fetcher=this,this.requested={},this.redirectedTo={},this.fetchQueue={},this.fetchCallbacks={},this.nonexistent={},this.lookedUp={},this.handlers=[],this.mediatypes={"image/*":{q:0.9},"*/*":{q:0.1}},b.callbackify(this,['request','fail','refresh','retract','done']),Object.keys(N).map(function(t){return a.addHandler(N[t])})}return s(t,[{key:'fetch',value:function t(n){var a=this,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(n instanceof Array)return Promise.all(n.map(function(t){return a.fetch(t,Object.assign({},r))}));var i=n.uri||n;return i=i.split('#')[0],r=this.initFetchOptions(i,r),this.pendingFetchPromise(i,r.baseURI,r)}},{key:'pendingFetchPromise',value:function t(n,a,r){var i;return!r.force&&this.fetchQueue[a]?i=this.fetchQueue[a]:(i=Promise.race([this.setRequestTimeout(n,r),this.fetchUri(n,r)]),this.fetchQueue[a]=i,this.cleanupFetchRequest(a,r,this.timeout)),i}},{key:'cleanupFetchRequest',value:function t(n,a,r){var i=this;setTimeout(function(){i.isPending(n)||delete i.fetchQueue[n]},r)}},{key:'load',value:function t(n,a){return this.fetch(n,a)}},{key:'initFetchOptions',value:function n(a,r){var i=this.store,o=!r.method||'GET'===r.method.toUpperCase();o||(r.force=!0),r.resource=i.sym(a),r.baseURI=r.baseURI||a,r.original=i.sym(r.baseURI),r.req=i.bnode(),r.headers=r.headers||{},r.contentType&&(r.headers['content-type']=r.contentType),r.force&&(r.cache='no-cache');var s=this.acceptString();r.headers.accept=s;var d=t.offlineOverride(a);r.requestedURI=d,t.withCredentials(d,r)&&(r.credentials='include');var l=t.proxyIfNecessary(d);return d!==l&&(r.proxyUsed=!0),r.actualProxyURI=l,r}},{key:'fetchUri',value:function n(a,r){var i=this;if(!a)return Promise.reject(new Error('Cannot fetch an empty uri'));if(t.unsupportedProtocol(a))return this.failFetch(r,'Unsupported protocol','unsupported_protocol');var o=this.getState(a);if(!r.force){if('fetched'===o)return Promise.resolve(this.doneFetch(r,{status:200,ok:!0}));if('failed'===o)return this.failFetch(r,'Previously failed: '+this.requested[a],this.requested[a])}else delete this.nonexistent[a];this.fireCallbacks('request',[a]),this.requested[a]=!0,r.noMeta||this.saveRequestMetadata(a,r);var s=r.actualProxyURI;return this._fetch(s,r).then(function(t){return i.handleResponse(t,a,r)}).catch(function(t){return i.handleError(t,a,r)})}},{key:'nowOrWhenFetched',value:function t(n,a,r){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};n=n.uri||n,'function'==typeof a?r=a:'undefined'==typeof a||(a instanceof c?i.referringTerm=a:i=a),console.log('@@ Fetcher: call this.fetch : '+n+': '+i),this.fetch(n,i).then(function(t){console.log('@@ Fetcher: result: '+t),r&&(t?r(t.ok,t.status,t):(console.log('@@ Fetcher: result: '+t),r(!1)))}).catch(function(t){r(!1,t.message)})}},{key:'addStatus',value:function t(n,a){var r=new Date;a='['+r.getHours()+':'+r.getMinutes()+':'+r.getSeconds()+'.'+r.getMilliseconds()+'] '+a;var i=this.store,o=i.the(n,_.link('status'));o&&o.append?o.append(i.literal(a)):d.warn('web.js: No list to add to: '+o+','+a)}},{key:'failFetch',value:function t(n,a,r){this.addStatus(n.req,a),n.noMeta||this.store.add(n.original,_.link('error'),a),n.resource.sameTerm(n.original)?console.log('@@ Recording failure for '+n.original+': '+r):console.log('@@ Recording failure original '+n.original+'( as '+n.resource+') : '+r);var i=!n.method||'GET'===n.method.toUpperCase()||'HEAD'===n.method.toUpperCase();return i&&(this.requested[g.docpart(n.original.uri)]=r,this.fireCallbacks('fail',[n.original.uri,a])),Promise.resolve({ok:!1,error:a,status:r})}},{key:'linkData',value:function t(n,a,r,i,o){if(r){var s=this.store,d=s.sym(g.join(r,n.uri)),l;if('alternate'===a||'seeAlso'===a||'meta'===a||'describedby'===a){if(d.uri===n.uri)return;l=_.rdfs('seeAlso')}else l='type'===a?s.sym('http://www.w3.org/1999/02/22-rdf-syntax-ns#type'):s.sym(g.join(encodeURIComponent(a),'http://www.iana.org/assignments/link-relations/'));o?s.add(d,l,n,i):s.add(n,l,d,i)}}},{key:'parseLinkHeader',value:function t(n,a,r){if(n)for(var o=/<[^>]*>\s*(\s*;\s*[^\(\)<>@,;:"\/\[\]\?={} \t]+=(([^\(\)<>@,;:"\/\[\]\?={} \t]+)|("[^"]*")))*(,|$)/g,d=/[^\(\)<>@,;:"\/\[\]\?={} \t]+=(([^\(\)<>@,;:"\/\[\]\?={} \t]+)|("[^"]*"))/g,l=n.match(o),c=0;c<l.length;c++)for(var i=l[c].split('>'),u=i[0].substring(1),f=i[1],m=f.match(d),s=0;s<m.length;s++){var h=m[s],g=h.split('='),b=g[1].replace(/["']/g,'');this.linkData(a,b,u,r)}}},{key:'doneFetch',value:function t(n,a){return this.addStatus(n.req,'Done.'),this.requested[n.original.uri]='done',this.fireCallbacks('done',[n.original.uri]),a.req=n.req,a}},{key:'nowKnownAs',value:function t(n,a){this.lookedUp[n.uri]?!this.lookedUp[a.uri]&&this.lookUpThing(a,n):this.lookedUp[a.uri]&&!this.lookedUp[n.uri]&&this.lookUpThing(n,a)}},{key:'putBack',value:function t(n){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};n=n.uri||n;var r=new c(n).doc();return a.data=y(r,this.store,r.uri,a.contentType||'text/turtle'),this.webOperation('PUT',n,a)}},{key:'webCopy',value:function t(n,a,r){var i=this;return this.webOperation('GET',n).then(function(t){return i.webOperation('PUT',a,{data:t.responseText,contentType:r})})}},{key:'delete',value:function t(n,a){var r=this;return this.webOperation('DELETE',n,a).then(function(t){return r.requested[n]=404,r.nonexistent[n]=!0,r.unload(r.store.sym(n)),t})}},{key:'createContainer',value:function t(n,a,r){var i={"content-type":'text/turtle',link:_.ldp('BasicContainer')+'; rel="type"'};a&&(i.slug=a);var o={headers:i};return r&&(o.body=r),this.webOperation('POST',n,o)}},{key:'webOperation',value:function t(n,a){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return r.method=n,r.body=r.data||r.body,r.force=!0,this.fetch(a,r)}},{key:'lookUpThing',value:function t(n,a){var r=this,i=this.store.uris(n);return i=i.map(function(t){return g.docpart(t)}),i.forEach(function(t){r.lookedUp[t]=!0}),this.fetch(i,{referringTerm:a})}},{key:'getHeader',value:function t(n,a){for(var i=this.store,o=i.each(void 0,_.link('requestedURI'),n.uri),s=0,r;s<o.length;s++)if(r=o[s],void 0!==r){var d=i.any(r,_.link('response'));if(void 0!==d){var l=i.each(d,_.httph(a.toLowerCase()));return l.length?l.map(function(t){return t.value}):[]}}}},{key:'saveRequestMetadata',value:function t(n,a){var r=a.req,i=this.store,o=a.referringTerm;this.addStatus(a.req,'Accept: '+a.headers.accept),o&&o.uri&&i.add(n,_.link('requestedBy'),o.uri,this.appNode),a.original&&a.original.uri!==n&&i.add(r,_.link('orginalURI'),i.literal(a.original.uri),this.appNode);var s=new Date,d='['+s.getHours()+':'+s.getMinutes()+':'+s.getSeconds()+'] ';i.add(r,_.rdfs('label'),i.literal(d+' Request for '+n),this.appNode),i.add(r,_.link('requestedURI'),i.literal(n),this.appNode),i.add(r,_.link('status'),i.collection(),this.appNode)}},{key:'saveResponseMetadata',value:function t(n,a){var r=this.store,i=r.bnode();return(r.add(a.req,_.link('response'),i),r.add(i,_.http('status'),r.literal(n.status),i),r.add(i,_.http('statusText'),r.literal(n.statusText),i),!a.resource.uri.startsWith('http'))?i:(n.headers.forEach(function(t,n){r.add(i,_.httph(n),t,i),'content-type'===n&&r.add(a.resource,_.rdf('type'),b.mediaTypeClass(t),i)}),i)}},{key:'objectRefresh',value:function t(n){var a=this.store.uris(n);if('undefined'!=typeof a)for(var r=0;r<a.length;r++)this.refresh(this.store.sym(g.docpart(a[r])))}},{key:'refresh',value:function t(n,a){this.fireCallbacks('refresh',arguments),this.nowOrWhenFetched(n,{force:!0,clearPreviousData:!0},a)}},{key:'retract',value:function t(n){this.store.removeMany(void 0,void 0,void 0,n),n.uri&&delete this.requested[g.docpart(n.uri)],this.fireCallbacks('retract',arguments)}},{key:'getState',value:function t(n){return'undefined'==typeof this.requested[n]?'unrequested':!0===this.requested[n]?'requested':'done'===this.requested[n]?'fetched':'redirected'===this.requested[n]?this.getState(this.redirectedTo[n]):'failed'}},{key:'isPending',value:function t(n){return!0===this.requested[n]}},{key:'unload',value:function t(n){this.store.removeDocument(n),delete this.requested[n.uri]}},{key:'addHandler',value:function t(n){this.handlers.push(n),n.register(this)}},{key:'retryNoCredentials',value:function t(n,a){console.log('web: Retrying with no credentials for '+a.resource),a.retriedWithNoCredentials=!0,delete this.requested[n];var r=Object.assign({},a,{withCredentials:!1});return this.addStatus(a.req,'Abort: Will retry with credentials SUPPRESSED to see if that helps'),this.fetch(n,r)}},{key:'isCrossSite',value:function t(n){if('undefined'==typeof document||!document.location)return!1;var a=g.hostpart,r=''+document.location;return a(r)&&a(n)&&a(r)!==a(n)}},{key:'handleError',value:function n(a,r,i){if(this.isCrossSite(r)){if(i.withCredentials&&!i.retriedWithNoCredentials)return this.retryNoCredentials(r,i);var o=t.crossSiteProxy(r);if(o&&!i.proxyUsed)return console.log('web: Direct failed so trying proxy '+o),this.redirectToProxy(o,i)}var s=a.message||a.status+' '+a.statusText;return this.failFetch(i,'Request failed: '+s,a.status)}},{key:'addType',value:function t(n,a,r,i){var o=a;if(i){var s=r.any(o,_.link('requestedURI'));s&&s!==i&&r.add(r.sym(i),_.rdf('type'),n,this.appNode)}for(;;){var d=r.any(o,_.link('requestedURI'));if(d&&d.value&&r.add(r.sym(d.value),_.rdf('type'),n,this.appNode),o=r.any(void 0,r.sym('http://www.w3.org/2007/ont/link#redirectedRequest'),o),!o)break;var l=r.any(o,r.sym('http://www.w3.org/2007/ont/link#response'));if(!l)break;var c=r.any(l,r.sym('http://www.w3.org/2007/ont/http#status'));if(!c)break;if('301'!==c&&'302'!==c)break}}},{key:'handleResponse',value:function t(n,a,r){var i=this,o=this.store,s=n.headers,d=r.req,l=this.saveResponseMetadata(n,r),c=this.normalizedContentType(r,s)||'',u=s.get('content-location');if(0===n.status)return console.log('Masked error - status 0 for '+a),this.handleError(n,a,r);if(400<=n.status)return 404===n.status&&(this.nonexistent[r.original.uri]=!0,this.nonexistent[a]=!0),this.saveErrorResponse(n,l).then(function(){var t='HTTP error for '+r.resource+': '+n.status+' '+n.statusText;return i.failFetch(r,t,n.status)});var f=null,m=null;if(u&&(m=g.join(u,a),m!==a&&(f=m)),200===n.status){this.addType(_.link('Document'),d,o,a),f&&this.addType(_.link('Document'),d,o,f),r.clearPreviousData&&o.removeDocument(r.resource);var h=c.includes('image/')||c.includes('application/pdf');c&&h&&(this.addType(o.sym('http://purl.org/dc/terms/Image'),d,o,a),f&&this.addType(o.sym('http://purl.org/dc/terms/Image'),d,o,f))}if(u){if(!r.force&&f&&'done'===this.requested[m])return this.doneFetch(r,n);this.requested[m]=!0}this.parseLinkHeader(s.get('link'),r.original,d);var b=this.handlerForContentType(c,n);return b?n.text().then(function(t){return n.responseText=t,b.parse(i,t,r)}):(this.addStatus(d,'Fetch over. No data handled.'),this.doneFetch(r,n))}},{key:'saveErrorResponse',value:function t(n,a){var r=this.store;return n.text().then(function(t){10<t.length&&r.add(a,_.http('content'),r.literal(t),a)})}},{key:'handlerForContentType',value:function t(n,a){if(!n)return null;var r=this.handlers.find(function(t){return n.match(t.pattern)});return r?new r(a):null}},{key:'guessContentType',value:function t(n){return x[n.split('.').pop()]}},{key:'normalizedContentType',value:function t(n,a){if(n.forceContentType)return n.forceContentType;var r=a.get('content-type');if(!r||r.includes('application/octet-stream')){var i=this.guessContentType(n.resource.uri);if(i)return i}var o=g.protocol(n.resource.uri);return!r&&['file','chrome'].includes(o)?'text/xml':r}},{key:'redirectToProxy',value:function t(n,a){var r=this;this.addStatus(a.req,'BLOCKED -> Cross-site Proxy to <'+n+'>'),a.proxyUsed=!0;var i=this.store,o=a.req;a.noMeta||(i.add(o,_.link('redirectedTo'),i.sym(n),o),this.addStatus(o,'redirected to new request')),this.requested[a.resource.uri]='redirected',this.redirectedTo[a.resource.uri]=n;var s=Object.assign({},a);return s.baseURI=a.resource.uri,this.fetchUri(n,s).then(function(t){return s.noMeta||i.add(o,_.link('redirectedRequest'),s.req,r.appNode),t})}},{key:'setRequestTimeout',value:function t(n,a){var r=this;return new Promise(function(t){setTimeout(function(){!r.isPending(n)||a.retriedWithNoCredentials||a.proxyUsed||t(r.failFetch(a,'Request to '+n+' timed out','timeout'))},r.timeout)})}},{key:'addFetchCallback',value:function t(n,a){this.fetchCallbacks[n]?this.fetchCallbacks[n].push(a):this.fetchCallbacks[n]=[a]}},{key:'acceptString',value:function t(){var n='';for(var a in this.mediatypes)for(var r in''!=n&&(n+=', '),n+=a,this.mediatypes[a])n+=';'+r+'='+this.mediatypes[a][r];return n}}],[{key:'crossSiteProxy',value:function n(a){return t.crossSiteProxyTemplate?t.crossSiteProxyTemplate.replace('{uri}',encodeURIComponent(a)):void 0}},{key:'offlineOverride',value:function t(n){var a=n;return'undefined'!=typeof UI&&UI.preferences&&UI.preferences.get('offlineModeUsingLocalhost')&&'http://'===a.slice(0,7)&&'localhost/'!==a.slice(7,17)&&(a='http://localhost/'+a.slice(7),d.warn('Localhost kludge for offline use: actually getting <'+a+'>')),a}},{key:'proxyIfNecessary',value:function n(a){if('undefined'!=typeof UI&&UI.isExtension)return a;if('undefined'!=typeof $SolidTestEnvironment&&$SolidTestEnvironment.localSiteMap){var r=a.split('/').slice(2),i=function t(n,a){var r=a[n.shift()];return r?'string'==typeof r?r+n.join('/'):n?t(n,r):null:null},o=i(r,$SolidTestEnvironment.localSiteMap);if(o)return o}return t.crossSiteProxyTemplate&&'undefined'!=typeof document&&document.location&&'https:'===(''+document.location).slice(0,6)&&'http:'===a.slice(0,5)?t.crossSiteProxyTemplate.replace('{uri}',encodeURIComponent(a)):a}},{key:'unsupportedProtocol',value:function t(n){var a=g.protocol(n);return'tel'===a||'mailto'===a||'urn'===a}},{key:'withCredentials',value:function t(n){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},t=n.startsWith('https:');return void 0!==a.withCredentials&&(t=a.withCredentials),t}}]),t}();t.exports=j,t.exports.HANDLERS=N,t.exports.CONTENT_TYPE_BY_EXT=x},function(t,n,a){'use strict';function r(t,n){if(!(t instanceof n))throw new TypeError('Cannot call a class as a function')}var i=function(){function t(t,n){for(var a=0,r;a<n.length;a++)r=n[a],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}return function(n,a,r){return a&&t(n.prototype,a),r&&t(n,r),n}}(),o=a(41),s=a(50),d=a(78),l=a(10),c=a(16),u=a(32);if('undefined'==typeof f)var f={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12};var m=function(){function t(n,a){r(this,t),this.options=a||{},this.kb=n,this.target=a.target||{graph:{subjects:{},prefixes:{},terms:{}}},this.blankNodes=[],this.htmlOptions={selfClosing:'br img input area base basefont col colgroup source wbr isindex link meta param hr'},this.theOne='_:'+new Date().getTime(),this.language=null,this.vocabulary=null,this.blankCounter=0,this.langAttributes=[{namespaceURI:'http://www.w3.org/XML/1998/namespace',localName:'lang'}],this.inXHTMLMode=!1,this.absURIRE=/[\w\_\-]+:\S+/,this.finishedHandlers=[],this.init()}return i(t,[{key:'addTriple',value:function t(n,a,r,i){var o,s,l,c;o='undefined'==typeof a?d.namedNode(this.options.base):this.toRDFNodeObject(a),l=this.toRDFNodeObject(r),s=this.toRDFNodeObject(i),c=d.namedNode(this.options.base),this.kb.add(o,l,s,c)}},{key:'ancestorPath',value:function t(n){for(var a='';n&&n.nodeType!==f.DOCUMENT_NODE;)a='/'+n.localName+a,n=n.parentNode;return a}},{key:'copyMappings',value:function t(n){var a={};for(var r in n)a[r]=n[r];return a}},{key:'copyProperties',value:function t(){}},{key:'deriveDateTimeType',value:function n(a){for(var r=0,i;r<t.dateTimeTypes.length;r++)if(i=t.dateTimeTypes[r].pattern.exec(a),i&&i[0].length===a.length)return t.dateTimeTypes[r].type;return null}},{key:'init',value:function t(){}},{key:'newBlankNode',value:function t(){return this.blankCounter++,'_:'+this.blankCounter}},{key:'newSubjectOrigin',value:function t(n,a){}},{key:'parseCURIE',value:function n(a,r,i){var o=a.indexOf(':'),s;if(0<=o){var d=a.substring(0,o);if(''===d)return s=r[''],s?s+a.substring(o+1):null;if('_'===d)return'_:'+a.substring(o+1);if(t.NCNAME.test(d)&&(s=r[d],s))return s+a.substring(o+1)}return null}},{key:'parseCURIEOrURI',value:function t(n,a,r){var i=this.parseCURIE(n,a,r);return i?i:this.resolveAndNormalize(r,n)}},{key:'parsePredicate',value:function t(n,a,r,i,o,s){if(''===n)return null;var d=this.parseTermOrCURIEOrAbsURI(n,a,s?null:r,i,o);return d&&0===d.indexOf('_:')?null:d}},{key:'parsePrefixMappings',value:function t(n,a){for(var r=this.tokenize(n),o=null,s=0;s<r.length;s++)':'===r[s][r[s].length-1]?o=r[s].substring(0,r[s].length-1):o&&(a[o]=this.options.base?c.join(r[s],this.options.base):r[s],o=null)}},{key:'parseSafeCURIEOrCURIEOrURI',value:function t(n,a,r){return n=this.trim(n),'['===n.charAt(0)&&']'===n.charAt(n.length-1)?(n=n.substring(1,n.length-1),n=n.trim(n),0===n.length?null:'_:'===n?this.theOne:this.parseCURIE(n,a,r)):this.parseCURIEOrURI(n,a,r)}},{key:'parseTermOrCURIEOrAbsURI',value:function t(n,a,r,i,o){n=this.trim(n);var s=this.parseCURIE(n,i,o);if(s)return s;if(r){if(a&&!this.absURIRE.exec(n))return a+n;var d=r[n];if(d)return d;var l=n.toLowerCase();if(d=r[l],d)return d}return this.absURIRE.exec(n)?this.resolveAndNormalize(o,n):null}},{key:'parseTermOrCURIEOrURI',value:function t(n,a,r,i,o){n=this.trim(n);var s=this.parseCURIE(n,i,o);if(s)return s;var d=r[n];if(d)return d;var l=n.toLowerCase();return(d=r[l],d)?d:a&&!this.absURIRE.exec(n)?a+n:this.resolveAndNormalize(o,n)}},{key:'parseURI',value:function t(n){return n}},{key:'process',value:function n(a,r){var o;a.nodeType===f.DOCUMENT_NODE?(o=a.baseURI,a=a.documentElement,a.baseURI=o,this.setContext(a)):a.parentNode.nodeType===f.DOCUMENT_NODE&&this.setContext(a);var s=[],d=function t(n){if(!n&&r&&r.baseURI)return r.baseURI;var a=n.indexOf('#');return 0<=a&&(n=n.substring(0,a)),r&&r.baseURIMap&&(n=r.baseURIMap(n)),n};for(s.push({current:a,context:this.push(null,d(a.baseURI))});0<s.length;){var l=s.shift();if(l.parent){if(l.context.parent&&l.context.parent.listMapping===l.listMapping)continue;for(var u in l.listMapping){var m=l.listMapping[u];if(0===m.length){this.addTriple(l.parent,l.subject,u,{type:t.objectURI,value:'http://www.w3.org/1999/02/22-rdf-syntax-ns#nil'});continue}for(var h=[],g=0;g<m.length;g++)h.push(this.newBlankNode());for(var b=0;b<h.length;b++)this.addTriple(l.parent,h[b],'http://www.w3.org/1999/02/22-rdf-syntax-ns#first',m[b]),this.addTriple(l.parent,h[b],'http://www.w3.org/1999/02/22-rdf-syntax-ns#rest',{type:t.objectURI,value:b+1<h.length?h[b+1]:'http://www.w3.org/1999/02/22-rdf-syntax-ns#nil'});this.addTriple(l.parent,l.subject,u,{type:t.objectURI,value:h[0]})}continue}var y=l.current,w=l.context,v=!1,x=null,_=null,k=null,C=w.prefixes,E=!1,T=[],A=w.listMapping,S=!w.parent,I=w.language,N=w.vocabulary;o=this.parseURI(d(y.baseURI)),y.item=null;var j=y.getAttributeNode('vocab');if(j){var L=this.trim(j.value);if(0<L.length){N=L;var R=o.spec;this.addTriple(y,R,'http://www.w3.org/ns/rdfa#usesVocabulary',{type:t.objectURI,value:N})}else N=this.vocabulary}for(var M=0,i;M<y.attributes.length;M++)if(i=y.attributes[M],'x'===i.nodeName.charAt(0)&&0===i.nodeName.indexOf('xmlns:')){E||(C=this.copyMappings(C),E=!0);var D=i.nodeName.substring(6),P=t.trim(i.value);C[D]=this.options.base?c.join(P,this.options.base):P}var O=y.getAttributeNode('prefix');O&&(!E&&(C=this.copyMappings(C),E=!0),this.parsePrefixMappings(O.value,C));for(var B=null,U=0;!B&&U<this.langAttributes.length;U++)B=y.getAttributeNodeNS(this.langAttributes[U].namespaceURI,this.langAttributes[U].localName);if(B){var F=t.trim(B.value);I=0<F.length?F:null}var q=y.getAttributeNode('rel'),z=y.getAttributeNode('rev'),H=y.getAttributeNode('typeof'),W=y.getAttributeNode('property'),V=y.getAttributeNode('datatype'),G=this.inHTMLMode?y.getAttributeNode('datetime'):null,J=y.getAttributeNode('content'),K=y.getAttributeNode('about'),X=y.getAttributeNode('src'),Y=y.getAttributeNode('resource'),Z=y.getAttributeNode('href'),Q=y.getAttributeNode('inlist'),ee=[],te,ne;if(q){ne=this.tokenize(q.value);for(var ae=0;ae<ne.length;ae++)te=this.parsePredicate(ne[ae],N,w.terms,C,o,this.inHTMLMode&&null!==W),te&&ee.push(te)}var re=[];if(z){ne=this.tokenize(z.value);for(var ie=0;ie<ne.length;ie++)te=this.parsePredicate(ne[ie],N,w.terms,C,o,this.inHTMLMode&&W),te&&re.push(te)}if(this.inHTMLMode&&(q||z)&&W&&(0===ee.length&&(q=null),0===re.length&&(z=null)),q||z?(K&&(x=this.parseSafeCURIEOrCURIEOrURI(K.value,C,o)),H&&(k=x),!x&&(y.parentNode.nodeType===f.DOCUMENT_NODE?x=d(y.baseURI):w.parentObject&&(x=d(y.parentNode.baseURI)===w.parentObject?d(y.baseURI):w.parentObject)),Y&&(_=this.parseSafeCURIEOrCURIEOrURI(Y.value,C,o)),!_&&(Z?_=this.resolveAndNormalize(o,encodeURI(Z.value)):X?_=this.resolveAndNormalize(o,encodeURI(X.value)):H&&!K&&!(this.inXHTMLMode&&('head'===y.localName||'body'===y.localName))&&(_=this.newBlankNode())),H&&!K&&this.inXHTMLMode&&('head'===y.localName||'body'===y.localName)?k=x:H&&!K&&(k=_)):!W||J||V?(K&&(x=this.parseSafeCURIEOrCURIEOrURI(K.value,C,o)),!x&&Y&&(x=this.parseSafeCURIEOrCURIEOrURI(Y.value,C,o)),!x&&Z&&(x=this.resolveAndNormalize(o,encodeURI(Z.value))),!x&&X&&(x=this.resolveAndNormalize(o,encodeURI(X.value))),!x&&(y.parentNode.nodeType===f.DOCUMENT_NODE?x=d(y.baseURI):(this.inXHTMLMode||this.inHTMLMode)&&('head'===y.localName||'body'===y.localName)?x=d(y.parentNode.baseURI)===w.parentObject?d(y.baseURI):w.parentObject:H?x=this.newBlankNode():w.parentObject&&(x=d(y.parentNode.baseURI)===w.parentObject?d(y.baseURI):w.parentObject,!W&&(v=!0))),H&&(k=x)):(K&&(x=this.parseSafeCURIEOrCURIEOrURI(K.value,C,o),H&&(k=x)),x||y.parentNode.nodeType!==f.DOCUMENT_NODE?!x&&w.parentObject&&(x=d(y.parentNode.baseURI)===w.parentObject?d(y.baseURI):w.parentObject):(x=d(y.baseURI),H&&(k=x)),H&&!k&&(Y&&(k=this.parseSafeCURIEOrCURIEOrURI(Y.value,C,o)),!k&&Z&&(k=this.resolveAndNormalize(o,encodeURI(Z.value))),!k&&X&&(k=this.resolveAndNormalize(o,encodeURI(X.value))),!k&&(this.inXHTMLMode||this.inHTMLMode)&&('head'===y.localName||'body'===y.localName)&&(k=x),!k&&(k=this.newBlankNode()),_=k)),x&&(K||Y||k)){var oe=x;H&&!K&&!Y&&_&&(oe=_),this.newSubjectOrigin(y,oe)}if(k){ne=this.tokenize(H.value);for(var se=0,de;se<ne.length;se++)de=this.parseTermOrCURIEOrAbsURI(ne[se],N,w.terms,C,o),de&&this.addTriple(y,k,t.typeURI,{type:t.objectURI,value:de})}if(x&&x!==w.parentObject&&(A={},S=!0),_){if(q&&Q)for(var le=0,pe;le<ee.length;le++)pe=A[ee[le]],pe||(pe=[],A[ee[le]]=pe),pe.push({type:t.objectURI,value:_});else if(q)for(var ce=0;ce<ee.length;ce++)this.addTriple(y,x,ee[ce],{type:t.objectURI,value:_});if(z)for(var ue=0;ue<re.length;ue++)this.addTriple(y,_,re[ue],{type:t.objectURI,value:x})}else{if(x&&!_&&(q||z)&&(_=this.newBlankNode()),q&&Q)for(var fe=0,he;fe<ee.length;fe++)he=A[ee[fe]],he||(he=[],A[te]=he),T.push({predicate:ee[fe],list:he});else if(q)for(var ge=0;ge<ee.length;ge++)T.push({predicate:ee[ge],forward:!0});if(z)for(var be=0;be<re.length;be++)T.push({predicate:re[be],forward:!1})}if(W){var ye=null,we=null;V?(ye=''===V.value?t.PlainLiteralURI:this.parseTermOrCURIEOrAbsURI(V.value,N,w.terms,C,o),we=G&&!J?G.value:ye===t.XMLLiteralURI||ye===t.HTMLLiteralURI?null:J?J.value:y.textContent):J?(ye=t.PlainLiteralURI,we=J.value):G?(we=G.value,ye=t.deriveDateTimeType(we),!ye&&(ye=t.PlainLiteralURI)):!q&&!z&&(Y&&(we=this.parseSafeCURIEOrCURIEOrURI(Y.value,C,o)),!we&&Z?we=this.resolveAndNormalize(o,encodeURI(Z.value)):!we&&X&&(we=this.resolveAndNormalize(o,encodeURI(X.value))),we&&(ye=t.objectURI)),ye||(H&&!K?(ye=t.objectURI,we=k):(we=y.textContent,this.inHTMLMode&&'time'===y.localName&&(ye=t.deriveDateTimeType(we)),!ye&&(ye=t.PlainLiteralURI))),ne=this.tokenize(W.value);for(var ve=0,xe;ve<ne.length;ve++)if(xe=this.parsePredicate(ne[ve],N,w.terms,C,o),xe)if(Q){var _e=A[xe];_e||(_e=[],A[xe]=_e),_e.push(ye===t.XMLLiteralURI||ye===t.HTMLLiteralURI?{type:ye,value:y.childNodes}:{type:ye?ye:t.PlainLiteralURI,value:we,language:I})}else ye===t.XMLLiteralURI||ye===t.HTMLLiteralURI?this.addTriple(y,x,xe,{type:ye,value:y.childNodes}):this.addTriple(y,x,xe,{type:ye?ye:t.PlainLiteralURI,value:we,language:I})}if(x&&!v)for(var ke=0;ke<w.incomplete.length;ke++)w.incomplete[ke].list?w.incomplete[ke].list.push({type:t.objectURI,value:x}):w.incomplete[ke].forward?this.addTriple(y,w.subject,w.incomplete[ke].predicate,{type:t.objectURI,value:x}):this.addTriple(y,x,w.incomplete[ke].predicate,{type:t.objectURI,value:w.subject});var Ce=null,Ee=x;v?(Ce=this.push(w,w.subject),Ce.parentObject=d(y.parentNode.baseURI)===w.parentObject?d(y.baseURI):w.parentObject,Ce.incomplete=w.incomplete,Ce.language=I,Ce.prefixes=C,Ce.vocabulary=N):(Ce=this.push(w,x),Ce.parentObject=_?_:x?x:w.subject,Ce.prefixes=C,Ce.incomplete=T,_&&(Ee=_,A={},S=!0),Ce.listMapping=A,Ce.language=I,Ce.vocabulary=N),S&&s.unshift({parent:y,context:w,subject:Ee,listMapping:A});for(var Te=y.lastChild;Te;Te=Te.previousSibling)Te.nodeType===f.ELEMENT_NODE&&(Te.baseURI=y.baseURI,s.unshift({current:Te,context:Ce}))}this.inHTMLMode&&this.copyProperties();for(var Ae=0;Ae<this.finishedHandlers.length;Ae++)this.finishedHandlers[Ae](a)}},{key:'push',value:function t(n,a){return{parent:n,subject:a?a:n?n.subject:null,parentObject:null,incomplete:[],listMapping:n?n.listMapping:{},language:n?n.language:this.language,prefixes:n?n.prefixes:this.target.graph.prefixes,terms:n?n.terms:this.target.graph.terms,vocabulary:n?n.vocabulary:this.vocabulary}}},{key:'resolveAndNormalize',value:function t(n,a){return c.join(a,n)}},{key:'setContext',value:function t(n){'html'===n.localName&&'XHTML+RDFa 1.1'===n.getAttribute('version')?this.setXHTMLContext():'html'===n.localName||'http://www.w3.org/1999/xhtml'===n.namespaceURI?'undefined'!=typeof document&&document.doctype?'-//W3C//DTD XHTML+RDFa 1.0//EN'===document.doctype.publicId&&'http://www.w3.org/MarkUp/DTD/xhtml-rdfa-1.dtd'===document.doctype.systemId?(console.log('WARNING: RDF 1.0 is not supported.  Defaulting to HTML5 mode.'),this.setHTMLContext()):'-//W3C//DTD XHTML+RDFa 1.1//EN'===document.doctype.publicId&&'http://www.w3.org/MarkUp/DTD/xhtml-rdfa-2.dtd'===document.doctype.systemId?this.setXHTMLContext():this.setHTMLContext():this.setHTMLContext():this.setXMLContext()}},{key:'setHTMLContext',value:function t(){this.setInitialContext(),this.langAttributes=[{namespaceURI:'http://www.w3.org/XML/1998/namespace',localName:'lang'},{namespaceURI:null,localName:'lang'}],this.inXHTMLMode=!1,this.inHTMLMode=!0}},{key:'setInitialContext',value:function t(){this.vocabulary=null,this.langAttributes=[{namespaceURI:'http://www.w3.org/XML/1998/namespace',localName:'lang'}]}},{key:'setXHTMLContext',value:function t(){this.setInitialContext(),this.inXHTMLMode=!0,this.inHTMLMode=!1,this.langAttributes=[{namespaceURI:'http://www.w3.org/XML/1998/namespace',localName:'lang'},{namespaceURI:null,localName:'lang'}],this.target.graph.terms.alternate='http://www.w3.org/1999/xhtml/vocab#alternate',this.target.graph.terms.appendix='http://www.w3.org/1999/xhtml/vocab#appendix',this.target.graph.terms.bookmark='http://www.w3.org/1999/xhtml/vocab#bookmark',this.target.graph.terms.cite='http://www.w3.org/1999/xhtml/vocab#cite',this.target.graph.terms.chapter='http://www.w3.org/1999/xhtml/vocab#chapter',this.target.graph.terms.contents='http://www.w3.org/1999/xhtml/vocab#contents',this.target.graph.terms.copyright='http://www.w3.org/1999/xhtml/vocab#copyright',this.target.graph.terms.first='http://www.w3.org/1999/xhtml/vocab#first',this.target.graph.terms.glossary='http://www.w3.org/1999/xhtml/vocab#glossary',this.target.graph.terms.help='http://www.w3.org/1999/xhtml/vocab#help',this.target.graph.terms.icon='http://www.w3.org/1999/xhtml/vocab#icon',this.target.graph.terms.index='http://www.w3.org/1999/xhtml/vocab#index',this.target.graph.terms.last='http://www.w3.org/1999/xhtml/vocab#last',this.target.graph.terms.license='http://www.w3.org/1999/xhtml/vocab#license',this.target.graph.terms.meta='http://www.w3.org/1999/xhtml/vocab#meta',this.target.graph.terms.next='http://www.w3.org/1999/xhtml/vocab#next',this.target.graph.terms.prev='http://www.w3.org/1999/xhtml/vocab#prev',this.target.graph.terms.previous='http://www.w3.org/1999/xhtml/vocab#previous',this.target.graph.terms.section='http://www.w3.org/1999/xhtml/vocab#section',this.target.graph.terms.stylesheet='http://www.w3.org/1999/xhtml/vocab#stylesheet',this.target.graph.terms.subsection='http://www.w3.org/1999/xhtml/vocab#subsection',this.target.graph.terms.start='http://www.w3.org/1999/xhtml/vocab#start',this.target.graph.terms.top='http://www.w3.org/1999/xhtml/vocab#top',this.target.graph.terms.up='http://www.w3.org/1999/xhtml/vocab#up',this.target.graph.terms.p3pv1='http://www.w3.org/1999/xhtml/vocab#p3pv1',this.target.graph.terms.related='http://www.w3.org/1999/xhtml/vocab#related',this.target.graph.terms.role='http://www.w3.org/1999/xhtml/vocab#role',this.target.graph.terms.transformation='http://www.w3.org/1999/xhtml/vocab#transformation'}},{key:'setXMLContext',value:function t(){this.setInitialContext(),this.inXHTMLMode=!1,this.inHTMLMode=!1}},{key:'tokenize',value:function t(n){return this.trim(n).split(/\s+/)}},{key:'toRDFNodeObject',value:function n(a){if('undefined'!=typeof a){if('string'==typeof a)return'_:'===a.substring(0,2)?('undefined'==typeof this.blankNodes[a.substring(2)]&&(this.blankNodes[a.substring(2)]=new o(a.substring(2))),this.blankNodes[a.substring(2)]):d.namedNode(a);switch(a.type){case t.objectURI:return'_:'===a.value.substring(0,2)?('undefined'==typeof this.blankNodes[a.value.substring(2)]&&(this.blankNodes[a.value.substring(2)]=new o(a.value.substring(2))),this.blankNodes[a.value.substring(2)]):d.namedNode(a.value);case t.PlainLiteralURI:return new s(a.value,a.language||'');case t.XMLLiteralURI:case t.HTMLLiteralURI:var r='';return Object.keys(a.value).forEach(function(t){r+=u.domToString(a.value[t],this.htmlOptions)}),new s(r,'',new l(a.type));default:return new s(a.value,'',new l(a.type));}}}},{key:'trim',value:function t(n){return n.replace(/^\s\s*/,'').replace(/\s\s*$/,'')}}],[{key:'parseRDFaDOM',value:function n(a,r,i){var o=new t(r,{base:i});a.baseURI=i,o.process(a)}}]),t}();m.XMLLiteralURI='http://www.w3.org/1999/02/22-rdf-syntax-ns#XMLLiteral',m.HTMLLiteralURI='http://www.w3.org/1999/02/22-rdf-syntax-ns#HTML',m.PlainLiteralURI='http://www.w3.org/1999/02/22-rdf-syntax-ns#PlainLiteral',m.objectURI='http://www.w3.org/1999/02/22-rdf-syntax-ns#object',m.typeURI='http://www.w3.org/1999/02/22-rdf-syntax-ns#type',m.nameChar='[-A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u10000-\uEFFFF.0-9\xB7\u0300-\u036F\u203F-\u2040]',m.nameStartChar='[A-Za-z\xC0-\xD6\xD8-\xF6\xF8-\xFF\u0100-\u0131\u0134-\u013E\u0141-\u0148\u014A-\u017E\u0180-\u01C3\u01CD-\u01F0\u01F4-\u01F5\u01FA-\u0217\u0250-\u02A8\u02BB-\u02C1\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03CE\u03D0-\u03D6\u03DA\u03DC\u03DE\u03E0\u03E2-\u03F3\u0401-\u040C\u040E-\u044F\u0451-\u045C\u045E-\u0481\u0490-\u04C4\u04C7-\u04C8\u04CB-\u04CC\u04D0-\u04EB\u04EE-\u04F5\u04F8-\u04F9\u0531-\u0556\u0559\u0561-\u0586\u05D0-\u05EA\u05F0-\u05F2\u0621-\u063A\u0641-\u064A\u0671-\u06B7\u06BA-\u06BE\u06C0-\u06CE\u06D0-\u06D3\u06D5\u06E5-\u06E6\u0905-\u0939\u093D\u0958-\u0961\u0985-\u098C\u098F-\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09DC-\u09DD\u09DF-\u09E1\u09F0-\u09F1\u0A05-\u0A0A\u0A0F-\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32-\u0A33\u0A35-\u0A36\u0A38-\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8B\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2-\u0AB3\u0AB5-\u0AB9\u0ABD\u0AE0\u0B05-\u0B0C\u0B0F-\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32-\u0B33\u0B36-\u0B39\u0B3D\u0B5C-\u0B5D\u0B5F-\u0B61\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99-\u0B9A\u0B9C\u0B9E-\u0B9F\u0BA3-\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB5\u0BB7-\u0BB9\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C60-\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CDE\u0CE0-\u0CE1\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D28\u0D2A-\u0D39\u0D60-\u0D61\u0E01-\u0E2E\u0E30\u0E32-\u0E33\u0E40-\u0E45\u0E81-\u0E82\u0E84\u0E87-\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA-\u0EAB\u0EAD-\u0EAE\u0EB0\u0EB2-\u0EB3\u0EBD\u0EC0-\u0EC4\u0F40-\u0F47\u0F49-\u0F69\u10A0-\u10C5\u10D0-\u10F6\u1100\u1102-\u1103\u1105-\u1107\u1109\u110B-\u110C\u110E-\u1112\u113C\u113E\u1140\u114C\u114E\u1150\u1154-\u1155\u1159\u115F-\u1161\u1163\u1165\u1167\u1169\u116D-\u116E\u1172-\u1173\u1175\u119E\u11A8\u11AB\u11AE-\u11AF\u11B7-\u11B8\u11BA\u11BC-\u11C2\u11EB\u11F0\u11F9\u1E00-\u1E9B\u1EA0-\u1EF9\u1F00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2126\u212A-\u212B\u212E\u2180-\u2182\u3041-\u3094\u30A1-\u30FA\u3105-\u312C\uAC00-\uD7A3\u4E00-\u9FA5\u3007\u3021-\u3029_]',m.NCNAME=new RegExp('^'+m.nameStartChar+m.nameChar+'*$'),m.dateTimeTypes=[{pattern:/-?P(?:[0-9]+Y)?(?:[0-9]+M)?(?:[0-9]+D)?(?:T(?:[0-9]+H)?(?:[0-9]+M)?(?:[0-9]+(?:\.[0-9]+)?S)?)?/,type:'http://www.w3.org/2001/XMLSchema#duration'},{pattern:/-?(?:[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9])-[0-9][0-9]-[0-9][0-9]T(?:[0-1][0-9]|2[0-4]):[0-5][0-9]:[0-5][0-9](?:\.[0-9]+)?(?:Z|[+\-][0-9][0-9]:[0-9][0-9])?/,type:'http://www.w3.org/2001/XMLSchema#dateTime'},{pattern:/-?(?:[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9])-[0-9][0-9]-[0-9][0-9](?:Z|[+\-][0-9][0-9]:[0-9][0-9])?/,type:'http://www.w3.org/2001/XMLSchema#date'},{pattern:/(?:[0-1][0-9]|2[0-4]):[0-5][0-9]:[0-5][0-9](?:\.[0-9]+)?(?:Z|[+\-][0-9][0-9]:[0-9][0-9])?/,type:'http://www.w3.org/2001/XMLSchema#time'},{pattern:/-?(?:[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9])-[0-9][0-9]/,type:'http://www.w3.org/2001/XMLSchema#gYearMonth'},{pattern:/-?[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9]/,type:'http://www.w3.org/2001/XMLSchema#gYear'}],t.exports=m},function(t,n,a){'use strict';var r=a(16),i=function t(n){var t={};t.ns={RDF:'http://www.w3.org/1999/02/22-rdf-syntax-ns#',RDFS:'http://www.w3.org/2000/01/rdf-schema#'},t.nodeType={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12},this.frameFactory=function(n,a,i){return{NODE:1,ARC:2,parent:a,parser:n,store:n.store,element:i,lastChild:0,base:null,lang:null,node:null,nodeType:null,listIndex:1,rdfid:null,datatype:null,collection:!1,terminateFrame:function t(){this.collection&&this.node.close()},addSymbol:function t(n,a){a=r.join(a,this.base),this.node=this.store.sym(a),this.nodeType=n},loadTriple:function n(){if(this.parent.parent.collection?this.parent.parent.node.append(this.node):this.store.add(this.parent.parent.node,this.parent.node,this.node,this.parser.why),null!=this.parent.rdfid){var a=this.store.sym(r.join('#'+this.parent.rdfid,this.base));this.store.add(a,this.store.sym(t.ns.RDF+'type'),this.store.sym(t.ns.RDF+'Statement'),this.parser.why),this.store.add(a,this.store.sym(t.ns.RDF+'subject'),this.parent.parent.node,this.parser.why),this.store.add(a,this.store.sym(t.ns.RDF+'predicate'),this.parent.node,this.parser.why),this.store.add(a,this.store.sym(t.ns.RDF+'object'),this.node,this.parser.why)}},isTripleToLoad:function t(){return null!=this.parent&&null!=this.parent.parent&&this.nodeType===this.NODE&&this.parent.nodeType===this.ARC&&this.parent.parent.nodeType===this.NODE},addNode:function t(n){this.addSymbol(this.NODE,n),this.isTripleToLoad()&&this.loadTriple()},addCollection:function t(){this.nodeType=this.NODE,this.node=this.store.collection(),this.collection=!0,this.isTripleToLoad()&&this.loadTriple()},addCollectionArc:function t(){this.nodeType=this.ARC},addBNode:function t(n){this.node=null==n?this.store.bnode():null==this.parser.bnodes[n]?this.parser.bnodes[n]=this.store.bnode():this.parser.bnodes[n],this.nodeType=this.NODE,this.isTripleToLoad()&&this.loadTriple()},addArc:function n(a){a===t.ns.RDF+'li'&&(a=t.ns.RDF+'_'+this.parent.listIndex,this.parent.listIndex++),this.addSymbol(this.ARC,a)},addLiteral:function t(n){this.node=this.parent.datatype?this.store.literal(n,'',this.store.sym(this.parent.datatype)):this.store.literal(n,this.lang),this.nodeType=this.NODE,this.isTripleToLoad()&&this.loadTriple()}}},this.getAttributeNodeNS=function(t,n,a){var r=null;if(t.getAttributeNodeNS)r=t.getAttributeNodeNS(n,a);else for(var o=t.attributes,s=0,i,d;s<o.length;++s)if(i=o[s],i.namespaceURI===n&&(d=i.prefix?i.prefix+':'+a:a,d===i.nodeName)){r=i;break}return r},this.store=n,this.bnodes={},this.why=null,this.reify=!1,this.parse=function(n,a,r){var i=n.childNodes;this.cleanParser();var o;if(n.nodeType===t.nodeType.DOCUMENT){for(var s=0;s<i.length;s++)if(i[s].nodeType===t.nodeType.ELEMENT){o=i[s];break}}else if(n.nodeType===t.nodeType.ELEMENT)o=n;else throw new Error('RDFParser: can\'t find root in '+a+'. Halting. ');this.why=r;var d=this.frameFactory(this);return this.base=a,d.base=a,d.lang=null,this.parseDOM(this.buildFrame(d,o)),!0},this.parseDOM=function(n){for(var a=function(t){var n='';if(null==t.namespaceURI)throw new Error('RDF/XML syntax error: No namespace for '+t.localName+' in '+this.base);return t.namespaceURI&&(n+=t.namespaceURI),t.localName?n+=t.localName:t.nodeName&&(0<=t.nodeName.indexOf(':')?n+=t.nodeName.split(':')[1]:n+=t.nodeName),n}.bind(this),i=!0,o;n.parent;){var s=n.element,d=s.attributes;if(s.nodeType===t.nodeType.TEXT||s.nodeType===t.nodeType.CDATA_SECTION)n.parent.nodeType===n.NODE&&(n.addArc(t.ns.RDF+'value'),n=this.buildFrame(n)),n.addLiteral(s.nodeValue);else if(a(s)!==t.ns.RDF+'RDF')if(n.parent&&n.parent.collection&&(n.addCollectionArc(),n=this.buildFrame(n,n.element),n.parent.element=null),!n.parent||!n.parent.nodeType||n.parent.nodeType===n.ARC){var l=this.getAttributeNodeNS(s,t.ns.RDF,'about');if(o=this.getAttributeNodeNS(s,t.ns.RDF,'ID'),l&&o)throw new Error('RDFParser: '+s.nodeName+' has both rdf:id and rdf:about. Halting. Only one of these properties may be specified on a node.');if(!l&&o)n.addNode('#'+o.nodeValue),s.removeAttributeNode(o);else if(null==l&&null==o){var c=this.getAttributeNodeNS(s,t.ns.RDF,'nodeID');c?(n.addBNode(c.nodeValue),s.removeAttributeNode(c)):n.addBNode()}else n.addNode(l.nodeValue),s.removeAttributeNode(l);var u=this.getAttributeNodeNS(s,t.ns.RDF,'type');t.ns.RDF+'Description'!==a(s)&&(u={nodeValue:a(s)}),null!=u&&(this.store.add(n.node,this.store.sym(t.ns.RDF+'type'),this.store.sym(r.join(u.nodeValue,n.base)),this.why),u.nodeName&&s.removeAttributeNode(u));for(var m=d.length-1;0<=m;m--)this.store.add(n.node,this.store.sym(a(d[m])),this.store.literal(d[m].nodeValue,n.lang),this.why)}else{n.addArc(a(s)),this.reify&&(o=this.getAttributeNodeNS(s,t.ns.RDF,'ID'),o&&(n.rdfid=o.nodeValue,s.removeAttributeNode(o)));var h=this.getAttributeNodeNS(s,t.ns.RDF,'parseType'),g=this.getAttributeNodeNS(s,t.ns.RDF,'datatype');if(g&&(n.datatype=g.nodeValue,s.removeAttributeNode(g)),h){var b=h.nodeValue;'Literal'===b?(n.datatype=t.ns.RDF+'XMLLiteral',n=this.buildFrame(n),n.addLiteral(s),i=!1):'Resource'===b?(n=this.buildFrame(n,n.element),n.parent.element=null,n.addBNode()):'Collection'===b&&(n=this.buildFrame(n,n.element),n.parent.element=null,n.addCollection()),s.removeAttributeNode(h)}if(0!==d.length){var y=this.getAttributeNodeNS(s,t.ns.RDF,'resource'),w=this.getAttributeNodeNS(s,t.ns.RDF,'nodeID');n=this.buildFrame(n),y?(n.addNode(y.nodeValue),s.removeAttributeNode(y)):w?(n.addBNode(w.nodeValue),s.removeAttributeNode(w)):n.addBNode();for(var v=d.length-1,x;0<=v;v--)x=this.buildFrame(n),x.addArc(a(d[v])),a(d[v])===t.ns.RDF+'type'?this.buildFrame(x).addNode(d[v].nodeValue):this.buildFrame(x).addLiteral(d[v].nodeValue)}else 0===s.childNodes.length&&this.buildFrame(n).addLiteral('')}for(s=n.element;n.parent;){for(var f=n;null==s;)n=n.parent,s=n.element;var _=s.childNodes&&s.childNodes[n.lastChild];if(!_||!i){if(n.terminateFrame(),!(n=n.parent))break;s=n.element,i=!0}else if(_.nodeType!==t.nodeType.ELEMENT&&_.nodeType!==t.nodeType.TEXT&&_.nodeType!==t.nodeType.CDATA_SECTION||(_.nodeType===t.nodeType.TEXT||_.nodeType===t.nodeType.CDATA_SECTION)&&1!==s.childNodes.length)n.lastChild++;else{n.lastChild++,n=this.buildFrame(f,s.childNodes[n.lastChild-1]);break}}}},this.cleanParser=function(){this.bnodes={},this.why=null},this.buildFrame=function(n,a){var i=this.frameFactory(this,n,a);if(n&&(i.base=n.base,i.lang=n.lang),!a||a.nodeType===t.nodeType.TEXT||a.nodeType===t.nodeType.CDATA_SECTION)return i;var o=a.attributes,s=a.getAttributeNode('xml:base');null!=s&&(i.base=s.nodeValue,a.removeAttribute('xml:base'));var d=a.getAttributeNode('xml:lang');null!=d&&(i.lang=d.nodeValue,a.removeAttribute('xml:lang'));for(var l=o.length-1;0<=l;l--)if('xml'===o[l].nodeName.substr(0,3)){if('xmlns:'===o[l].name.slice(0,6)){var c=o[l].nodeValue;this.base&&(c=r.join(c,this.base)),this.store.setPrefixForURI(o[l].name.slice(6),c)}a.removeAttributeNode(o[l])}return i}};t.exports=i},function(t,n,a){var r=a(45),i=a(12).document,o=r(i)&&r(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,n,a){var r=a(45);t.exports=function(t,n){if(!r(t))return t;var a,i;if(n&&'function'==typeof(a=t.toString)&&!r(i=a.call(t)))return i;if('function'==typeof(a=t.valueOf)&&!r(i=a.call(t)))return i;if(!n&&'function'==typeof(a=t.toString)&&!r(i=a.call(t)))return i;throw TypeError('Can\'t convert object to primitive value')}},function(t,n){t.exports=function(t){if(t==void 0)throw TypeError('Can\'t call method on  '+t);return t}},function(t,n,a){var r=a(118),i=_Mathmin;t.exports=function(t){return 0<t?i(r(t),9007199254740991):0}},function(t,n){var a=_Mathceil,r=_Mathfloor;t.exports=function(t){return isNaN(t=+t)?0:(0<t?r:a)(t)}},function(t,n,a){var r=a(120)('keys'),i=a(82);t.exports=function(t){return r[t]||(r[t]=i(t))}},function(t,n,a){var r=a(12),i='__core-js_shared__',o=r[i]||(r[i]={});t.exports=function(t){return o[t]||(o[t]={})}},function(t,n){t.exports=['constructor','hasOwnProperty','isPrototypeOf','propertyIsEnumerable','toLocaleString','toString','valueOf']},function(t,n){n.f=Object.getOwnPropertySymbols},function(t,n,a){var r=a(116);t.exports=function(t){return Object(r(t))}},function(t,n,a){'use strict';var r=a(284)(!0);a(167)(String,'String',function(t){this._t=t+'',this._i=0},function(){var t=this._t,n=this._i,a;return n>=t.length?{value:void 0,done:!0}:(a=r(t,n),this._i+=a.length,{value:a,done:!1})})},function(t,n,a){'use strict';function r(t){var n,a;this.promise=new t(function(t,r){if(n!=void 0||a!=void 0)throw TypeError('Bad Promise constructor');n=t,a=r}),this.resolve=i(n),this.reject=i(a)}var i=a(80);t.exports.f=function(t){return new r(t)}},function(t,n,a){'use strict';function r(t){return t&&t.__esModule?t:{default:t}}function i(t){var n=this;return function(){var a=(0,u.default)(l.default.mark(function a(r){var i;return l.default.wrap(function n(a){for(;1;)switch(a.prev=a.next){case 0:return a.next=2,(0,h.updateStorage)(t,function(t){return(0,s.default)({},t,{session:r})});case 2:return i=a.sent,a.abrupt('return',i.session);case 4:case'end':return a.stop();}},a,n)}));return function(t){return a.apply(this,arguments)}}()}Object.defineProperty(n,'__esModule',{value:!0}),n.clearSession=n.getSession=void 0;var o=a(35),s=r(o),d=a(6),l=r(d),c=a(7),u=r(c),f=n.getSession=function(){var t=(0,u.default)(l.default.mark(function t(n){var a;return l.default.wrap(function t(r){for(;1;)switch(r.prev=r.next){case 0:return r.next=2,(0,h.getData)(n);case 2:return a=r.sent,r.abrupt('return',a.session||null);case 4:case'end':return r.stop();}},t,this)}));return function n(a){return t.apply(this,arguments)}}(),m=n.clearSession=function(){var t=(0,u.default)(l.default.mark(function t(n){return l.default.wrap(function t(a){for(;1;)switch(a.prev=a.next){case 0:return a.next=2,(0,h.updateStorage)(n,function(t){return(0,s.default)({},t,{session:null})});case 2:case'end':return a.stop();}},t,this)}));return function n(a){return t.apply(this,arguments)}}();n.saveSession=i;var h=a(87)},function(t,n,a){n.f=a(13)},function(t,n,a){var r=a(12),i=a(18),o=a(84),s=a(127),d=a(33).f;t.exports=function(t){var n=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});'_'==t.charAt(0)||t in n||d(n,t,{value:s.f(t)})}},function(t,n,a){'use strict';function r(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(n[a]=t[a]);return n.default=t,n}function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,'__esModule',{value:!0}),n.fetchWithCredentials=n.requiresAuth=n.getRegisteredRp=n.logout=n.currentSession=n.login=void 0;var o=a(35),s=i(o),d=a(6),l=i(d),c=a(7),u=i(c),f=function(){var t=(0,u.default)(l.default.mark(function t(n){var a,r;return l.default.wrap(function t(i){for(;1;)switch(i.prev=i.next){case 0:return i.next=2,(0,_.getData)(n);case 2:if(a=i.sent,r=a.rpConfig,!r){i.next=9;break}return r.store=n,i.abrupt('return',y.default.from(r));case 9:return i.abrupt('return',null);case 10:case'end':return i.stop();}},t,this)}));return function n(a){return t.apply(this,arguments)}}(),m=function(){var t=(0,u.default)(l.default.mark(function t(n,a,r){return l.default.wrap(function t(a){for(;1;)switch(a.prev=a.next){case 0:return a.next=2,(0,_.updateStorage)(n,function(t){return(0,s.default)({},t,{rpConfig:r})});case 2:return a.abrupt('return',r);case 3:case'end':return a.stop();}},t,this)}));return function n(a,r,i){return t.apply(this,arguments)}}();a(39);var h=a(88),g=r(h),b=a(187),y=i(b),w=a(206),v=i(w),x=a(133),_=a(87),k=n.login=function(){var t=(0,u.default)(l.default.mark(function t(n,a){var r;return l.default.wrap(function t(i){for(;1;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,T(n,a);case 3:return r=i.sent,i.next=6,I(a.storage);case 6:return i.abrupt('return',function(){return S(r,a)});case 9:return i.prev=9,i.t0=i['catch'](0),console.warn('Error logging in with WebID-OIDC'),console.error(i.t0),i.abrupt('return',null);case 14:case'end':return i.stop();}},t,void 0,[[0,9]])}));return function n(a,r){return t.apply(this,arguments)}}(),C=n.currentSession=function(){var t=(0,u.default)(l.default.mark(function t(){var n=0<arguments.length&&arguments[0]!==void 0?arguments[0]:(0,_.defaultStorage)(),a,r,i,o,s,d,c,u,m;return l.default.wrap(function t(l){for(;1;)switch(l.prev=l.next){case 0:return l.prev=0,l.next=3,f(n);case 3:if(a=l.sent,a){l.next=6;break}return l.abrupt('return',null);case 6:if(r=(0,x.currentUrl)(),r&&r.includes('#')){l.next=9;break}return l.abrupt('return',null);case 9:return l.next=11,(0,_.getData)(n);case 11:return i=l.sent,l.next=14,a.validateResponse(r,i);case 14:if(o=l.sent,o){l.next=17;break}return l.abrupt('return',null);case 17:return l.next=19,N(n);case 19:return s=o.idp,d=o.idToken,c=o.accessToken,u=o.clientId,m=o.sessionKey,l.abrupt('return',{authType:'WebID-OIDC',webId:o.decoded.payload.sub,idp:s,idToken:d,accessToken:c,clientId:u,sessionKey:m});case 23:return l.prev=23,l.t0=l['catch'](0),console.warn('Error finding a WebID-OIDC session'),console.error(l.t0),l.abrupt('return',null);case 28:case'end':return l.stop();}},t,void 0,[[0,23]])}));return function n(){return t.apply(this,arguments)}}(),E=n.logout=function t(n){return f(n).then(function(t){return t?t.logout():void 0}).catch(function(t){console.warn('Error logging out of the WebID-OIDC session'),console.error(t)})},T=n.getRegisteredRp=function t(n,a){return f(a.storage).then(function(t){return t&&t.provider.url===n?t:A(n,a).then(function(t){return m(a.storage,n,t)})})},A=function t(n,a){var r=a.storage,i=a.callbackUri,o='id_token token',s={issuer:n,grant_types:['implicit'],redirect_uris:[i],response_types:[o],scope:'openid profile'},d={defaults:{authenticate:{redirect_uri:i,response_type:o}},store:r};return y.default.register(n,s,d)},S=function(){var t=(0,u.default)(l.default.mark(function t(n,a){var r=a.callbackUri,i=a.storage,o,s;return l.default.wrap(function t(a){for(;1;)switch(a.prev=a.next){case 0:return a.next=2,(0,_.getData)(i);case 2:return o=a.sent,a.next=5,n.createRequest({redirect_uri:r},o);case 5:return s=a.sent,a.next=8,(0,_.updateStorage)(i,function(){return o});case 8:return a.abrupt('return',(0,x.navigateTo)(s));case 9:case'end':return a.stop();}},t,void 0)}));return function n(a,r){return t.apply(this,arguments)}}(),I=function t(n){return(0,_.updateStorage)(n,function(t){return(0,s.default)({},t,{appHashFragment:window.location.hash})})},N=function t(n){return(0,_.updateStorage)(n,function(t){return window.location.hash=t.appHashFragment,delete t.appHashFragment,t})},j=n.requiresAuth=function t(n){if(401!==n.status)return!1;var a=n.headers.get('www-authenticate');if(!a)return!1;var r=g.parse(a);return'Bearer'===r.scheme&&r.params&&'openid webid'===r.params.scope},L=n.fetchWithCredentials=function t(n){return function(){var t=(0,u.default)(l.default.mark(function t(a,r){var i,o;return l.default.wrap(function t(d){for(;1;)switch(d.prev=d.next){case 0:return d.next=2,v.default.issueFor(a,n);case 2:return i=d.sent,o=(0,s.default)({},r,{headers:(0,s.default)({},r&&r.headers?r.headers:{},{authorization:'Bearer '+i})}),d.abrupt('return',fetch(a,o));case 5:case'end':return d.stop();}},t,void 0)}));return function(n,a){return t.apply(this,arguments)}}()}},function(t,n,a){'use strict';(function(n){/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function r(t,n){if(t===n)return 0;for(var a=t.length,r=n.length,o=0,i=_Mathmin(a,r);o<i;++o)if(t[o]!==n[o]){a=t[o],r=n[o];break}return a<r?-1:r<a?1:0}function i(t){return n.Buffer&&'function'==typeof n.Buffer.isBuffer?n.Buffer.isBuffer(t):!!(null!=t&&t._isBuffer)}function o(t){return Object.prototype.toString.call(t)}function s(t){return!i(t)&&!('function'!=typeof n.ArrayBuffer)&&('function'==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):!!t&&(!!(t instanceof DataView)||t.buffer&&t.buffer instanceof ArrayBuffer))}function d(t){if(_.isFunction(t)){if(E)return t.name;var n=t.toString(),a=n.match(A);return a&&a[1]}}function l(t,a){return'string'==typeof t?t.length<a?t:t.slice(0,a):t}function c(t){if(E||!_.isFunction(t))return _.inspect(t);var n=d(t),a=n?': '+n:'';return'[Function'+a+']'}function u(t){return l(c(t.actual),128)+' '+t.operator+' '+l(c(t.expected),128)}function f(t,n,a,r,i){throw new T.AssertionError({message:a,actual:t,expected:n,operator:r,stackStartFunction:i})}function m(t,n){t||f(t,!0,n,'==',T.ok)}function h(t,n,a,d){if(t===n)return!0;if(i(t)&&i(n))return 0===r(t,n);if(_.isDate(t)&&_.isDate(n))return t.getTime()===n.getTime();if(_.isRegExp(t)&&_.isRegExp(n))return t.source===n.source&&t.global===n.global&&t.multiline===n.multiline&&t.lastIndex===n.lastIndex&&t.ignoreCase===n.ignoreCase;if((null===t||'object'!=typeof t)&&(null===n||'object'!=typeof n))return a?t==n:t==n;if(s(t)&&s(n)&&o(t)===o(n)&&!(t instanceof Float32Array||t instanceof Float64Array))return 0===r(new Uint8Array(t.buffer),new Uint8Array(n.buffer));if(i(t)!==i(n))return!1;d=d||{actual:[],expected:[]};var l=d.actual.indexOf(t);return-1!==l&&l===d.expected.indexOf(n)||(d.actual.push(t),d.expected.push(n),b(t,n,a,d))}function g(t){return'[object Arguments]'==Object.prototype.toString.call(t)}function b(t,n,a,r){if(null===t||t===void 0||null===n||n===void 0)return!1;if(_.isPrimitive(t)||_.isPrimitive(n))return t===n;if(a&&Object.getPrototypeOf(t)!==Object.getPrototypeOf(n))return!1;var o=g(t),s=g(n);if(o&&!s||!o&&s)return!1;if(o)return t=C.call(t),n=C.call(n),h(t,n,a);var d=S(t),l=S(n),c,u;if(d.length!==l.length)return!1;for(d.sort(),l.sort(),u=d.length-1;0<=u;u--)if(d[u]!==l[u])return!1;for(u=d.length-1;0<=u;u--)if(c=d[u],!h(t[c],n[c],a,r))return!1;return!0}function y(t,n,a){h(t,n,!0)&&f(t,n,a,'notDeepStrictEqual',y)}function w(t,n){if(!t||!n)return!1;if('[object RegExp]'==Object.prototype.toString.call(n))return n.test(t);try{if(t instanceof n)return!0}catch(t){}return!Error.isPrototypeOf(n)&&!0===n.call({},t)}function v(t){var n;try{t()}catch(t){n=t}return n}function x(t,n,a,r){var i;if('function'!=typeof n)throw new TypeError('"block" argument must be a function');'string'==typeof a&&(r=a,a=null),i=v(n),r=(a&&a.name?' ('+a.name+').':'.')+(r?' '+r:'.'),t&&!i&&f(i,a,'Missing expected exception'+r);var o='string'==typeof r,s=!t&&_.isError(i),d=!t&&i&&!a;if((s&&o&&w(i,a)||d)&&f(i,a,'Got unwanted exception'+r),t&&i&&a&&!w(i,a)||!t&&i)throw i}var _=a(108),k=Object.prototype.hasOwnProperty,C=Array.prototype.slice,E=function(){return'foo'===function t(){}.name}(),T=t.exports=m,A=/\s*function\s+([^\(\s]*)\s*/;T.AssertionError=function t(n){this.name='AssertionError',this.actual=n.actual,this.expected=n.expected,this.operator=n.operator,n.message?(this.message=n.message,this.generatedMessage=!1):(this.message=u(this),this.generatedMessage=!0);var a=n.stackStartFunction||f;if(Error.captureStackTrace)Error.captureStackTrace(this,a);else{var r=new Error;if(r.stack){var i=r.stack,o=d(a),s=i.indexOf('\n'+o);if(0<=s){var l=i.indexOf('\n',s+1);i=i.substring(l+1)}this.stack=i}}},_.inherits(T.AssertionError,Error),T.fail=f,T.ok=m,T.equal=function t(n,a,r){n!=a&&f(n,a,r,'==',T.equal)},T.notEqual=function t(n,a,r){n==a&&f(n,a,r,'!=',T.notEqual)},T.deepEqual=function t(n,a,r){h(n,a,!1)||f(n,a,r,'deepEqual',T.deepEqual)},T.deepStrictEqual=function t(n,a,r){h(n,a,!0)||f(n,a,r,'deepStrictEqual',T.deepStrictEqual)},T.notDeepEqual=function t(n,a,r){h(n,a,!1)&&f(n,a,r,'notDeepEqual',T.notDeepEqual)},T.notDeepStrictEqual=y,T.strictEqual=function t(n,a,r){n!==a&&f(n,a,r,'===',T.strictEqual)},T.notStrictEqual=function t(n,a,r){n===a&&f(n,a,r,'!==',T.notStrictEqual)},T.throws=function(t,n,a){x(!0,t,n,a)},T.doesNotThrow=function(t,n,a){x(!1,t,n,a)},T.ifError=function(t){if(t)throw t};var S=Object.keys||function(t){var n=[];for(var a in t)k.call(t,a)&&n.push(a);return n}}).call(n,a(5))},function(t,n,a){'use strict';function r(t,n){if(!(t instanceof n))throw new TypeError('Cannot call a class as a function')}var i=function(){function t(t,n){for(var a=0,r;a<n.length;a++)r=n[a],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}return function(n,a,r){return a&&t(n.prototype,a),r&&t(n,r),n}}(),o=0,s=1,d=2,l=function(){function t(n,a){r(this,t),this.expr=n,this.mode=a||o,this.tokens=n&&'#'===n.charAt(0)?this.parseURIFragmentIdentifier(n):this.parseJSONString(n)}return i(t,[{key:'escape',value:function t(n){return n.replace(/~/g,'~0').replace(/\//g,'~1')}},{key:'unescape',value:function t(n){return n.replace(/~1/g,'/').replace(/~0/g,'~')}},{key:'parseJSONString',value:function t(n){if('string'!=typeof n)throw new Error('JSON Pointer must be a string');if(''===n)return[];if('/'!==n.charAt(0))throw new Error('Invalid JSON Pointer');return'/'===n?['']:n.substr(1).split('/').map(this.unescape)}},{key:'toJSONString',value:function t(){return'/'+this.tokens.map(this.escape).join('/')}},{key:'parseURIFragmentIdentifier',value:function t(n){if('string'!=typeof n)throw new Error('JSON Pointer must be a string');if('#'!==n.charAt(0))throw new Error('Invalid JSON Pointer URI Fragment Identifier');return this.parseJSONString(decodeURIComponent(n.substr(1)))}},{key:'toURIFragmentIdentifier',value:function t(){var n=this,a=this.tokens.map(function(t){return encodeURIComponent(n.escape(t))}).join('/');return'#/'+a}},{key:'get',value:function t(n){for(var a=n,r=this.tokens,s=0;s<r.length;s++){if(!a||void 0===a[r[s]]){if(this.mode!==o)return;throw new Error('Invalid JSON Pointer reference')}a=a[r[s]]}return a}},{key:'add',value:function t(n,a){for(var r=this.tokens,l=n,c=0,i;c<r.length;c++)if(i=r[c],c===r.length-1)'-'===i?l.push(a):Array.isArray(l)?l.splice(i,0,a):void 0!==a&&(l[i]=a);else if(!l[i])switch(this.mode){case o:throw new Error('Invalid JSON Pointer reference');case s:l=l[i]=parseInt(i)?[]:{};break;case d:return;default:throw new Error('Invalid pointer mode');}else l=l[i]}},{key:'replace',value:function t(n,a){for(var r=this.tokens,o=n,s=0,i;s<r.length;s++)i=r[s],s===r.length-1?o[i]=a:o[i]?o=o[i]:o=o[i]=parseInt(i)?[]:{}}},{key:'remove',value:function t(n){for(var a=this.tokens,r=n,o=0,i;o<a.length;o++){if(i=a[o],void 0===r||void 0===r[i])return;if(Array.isArray(r))return void r.splice(i,1);o===a.length-1&&delete r[i],r=r[i]}}}],[{key:'parse',value:function n(a){return new t(a)}}]),t}();t.exports=l},function(t,n,a){'use strict';function r(t,n){if(!(t instanceof n))throw new TypeError('Cannot call a class as a function')}var i=function(){function t(t,n){for(var a=0,r;a<n.length;a++)r=n[a],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}return function(n,a,r){return a&&t(n.prototype,a),r&&t(n,r),n}}(),o=a(48),s=a(327),d=a(195),l=d.NotSupportedError,c=function(){function t(){r(this,t)}return i(t,null,[{key:'sign',value:function t(n,a,r){var i=s.normalize('sign',n);return i instanceof Error?Promise.reject(new l(n)):i.sign(a,r)}},{key:'verify',value:function t(n,a,r,i){var o=s.normalize('verify',n);return o instanceof Error?Promise.reject(new l(n)):o.verify(a,r,i)}},{key:'importKey',value:function t(n){var a=s.normalize('importKey',n.alg);return a.importKey(n)}}]),t}();t.exports=c},function(t,n,a){'use strict';Object.defineProperty(n,'__esModule',{value:!0});var r=n.currentUrl=function t(){return window.location.href},i=n.currentUrlNoParams=function t(){return window.location.origin+window.location.pathname},o=n.navigateTo=function t(n){window.location.href=n},s=n.originOf=function t(n){return new URL(n).origin}},function(t,n,a){'use strict';function r(t,n){t[n>>5]|=128<<n%32,t[(n+64>>>9<<4)+14]=n;for(var r=1732584193,a=-271733879,m=-1732584194,c=271733878,d=0;d<t.length;d+=16){var i=r,h=a,g=m,b=c;r=o(r,a,m,c,t[d+0],7,-680876936),c=o(c,r,a,m,t[d+1],12,-389564586),m=o(m,c,r,a,t[d+2],17,606105819),a=o(a,m,c,r,t[d+3],22,-1044525330),r=o(r,a,m,c,t[d+4],7,-176418897),c=o(c,r,a,m,t[d+5],12,1200080426),m=o(m,c,r,a,t[d+6],17,-1473231341),a=o(a,m,c,r,t[d+7],22,-45705983),r=o(r,a,m,c,t[d+8],7,1770035416),c=o(c,r,a,m,t[d+9],12,-1958414417),m=o(m,c,r,a,t[d+10],17,-42063),a=o(a,m,c,r,t[d+11],22,-1990404162),r=o(r,a,m,c,t[d+12],7,1804603682),c=o(c,r,a,m,t[d+13],12,-40341101),m=o(m,c,r,a,t[d+14],17,-1502002290),a=o(a,m,c,r,t[d+15],22,1236535329),r=s(r,a,m,c,t[d+1],5,-165796510),c=s(c,r,a,m,t[d+6],9,-1069501632),m=s(m,c,r,a,t[d+11],14,643717713),a=s(a,m,c,r,t[d+0],20,-373897302),r=s(r,a,m,c,t[d+5],5,-701558691),c=s(c,r,a,m,t[d+10],9,38016083),m=s(m,c,r,a,t[d+15],14,-660478335),a=s(a,m,c,r,t[d+4],20,-405537848),r=s(r,a,m,c,t[d+9],5,568446438),c=s(c,r,a,m,t[d+14],9,-1019803690),m=s(m,c,r,a,t[d+3],14,-187363961),a=s(a,m,c,r,t[d+8],20,1163531501),r=s(r,a,m,c,t[d+13],5,-1444681467),c=s(c,r,a,m,t[d+2],9,-51403784),m=s(m,c,r,a,t[d+7],14,1735328473),a=s(a,m,c,r,t[d+12],20,-1926607734),r=l(r,a,m,c,t[d+5],4,-378558),c=l(c,r,a,m,t[d+8],11,-2022574463),m=l(m,c,r,a,t[d+11],16,1839030562),a=l(a,m,c,r,t[d+14],23,-35309556),r=l(r,a,m,c,t[d+1],4,-1530992060),c=l(c,r,a,m,t[d+4],11,1272893353),m=l(m,c,r,a,t[d+7],16,-155497632),a=l(a,m,c,r,t[d+10],23,-1094730640),r=l(r,a,m,c,t[d+13],4,681279174),c=l(c,r,a,m,t[d+0],11,-358537222),m=l(m,c,r,a,t[d+3],16,-722521979),a=l(a,m,c,r,t[d+6],23,76029189),r=l(r,a,m,c,t[d+9],4,-640364487),c=l(c,r,a,m,t[d+12],11,-421815835),m=l(m,c,r,a,t[d+15],16,530742520),a=l(a,m,c,r,t[d+2],23,-995338651),r=u(r,a,m,c,t[d+0],6,-198630844),c=u(c,r,a,m,t[d+7],10,1126891415),m=u(m,c,r,a,t[d+14],15,-1416354905),a=u(a,m,c,r,t[d+5],21,-57434055),r=u(r,a,m,c,t[d+12],6,1700485571),c=u(c,r,a,m,t[d+3],10,-1894986606),m=u(m,c,r,a,t[d+10],15,-1051523),a=u(a,m,c,r,t[d+1],21,-2054922799),r=u(r,a,m,c,t[d+8],6,1873313359),c=u(c,r,a,m,t[d+15],10,-30611744),m=u(m,c,r,a,t[d+6],15,-1560198380),a=u(a,m,c,r,t[d+13],21,1309151649),r=u(r,a,m,c,t[d+4],6,-145523070),c=u(c,r,a,m,t[d+11],10,-1120210379),m=u(m,c,r,a,t[d+2],15,718787259),a=u(a,m,c,r,t[d+9],21,-343485551),r=f(r,i),a=f(a,h),m=f(m,g),c=f(c,b)}return[r,a,m,c]}function i(n,r,a,i,o,s){return f(d(f(f(r,n),f(i,s)),o),a)}function o(n,a,r,o,d,l,s){return i(a&r|~a&o,n,a,d,l,s)}function s(n,a,r,o,l,c,s){return i(a&o|r&~o,n,a,l,c,s)}function l(n,a,r,o,d,l,s){return i(a^r^o,n,a,d,l,s)}function u(n,a,r,o,l,c,s){return i(r^(a|~o),n,a,l,c,s)}function f(t,n){var a=(65535&t)+(65535&n),r=(t>>16)+(n>>16)+(a>>16);return r<<16|65535&a}function d(t,n){return t<<n|t>>>32-n}var c=a(354);t.exports=function t(n){return c(n,r)}},function(t,n,a){'use strict';(function(n){function r(){f.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function o(t,a){return t<<a|t>>>32-a}function s(t,n,a,r,i,d,l,c){return 0|o(0|t+(n^a^r)+d+l,c)+i}function d(t,n,a,r,i,d,l,c){return 0|o(0|t+(n&a|~n&r)+d+l,c)+i}function l(t,n,a,r,i,d,l,u){return 0|o(0|t+((n|~a)^r)+d+l,u)+i}function c(t,n,a,r,i,l,c,u){return 0|o(0|t+(n&r|a&~r)+l+c,u)+i}function u(t,n,a,r,i,l,c,u){return 0|o(0|t+(n^(a|~r))+l+c,u)+i}var i=a(0),f=a(355);i(r,f),r.prototype._update=function(){for(var n=Array(16),a=0;16>a;++a)n[a]=this._block.readInt32LE(4*a);var r=this._a,i=this._b,f=this._c,m=this._d,h=this._e;r=s(r,i,f,m,h,n[0],0,11),f=o(f,10),h=s(h,r,i,f,m,n[1],0,14),i=o(i,10),m=s(m,h,r,i,f,n[2],0,15),r=o(r,10),f=s(f,m,h,r,i,n[3],0,12),h=o(h,10),i=s(i,f,m,h,r,n[4],0,5),m=o(m,10),r=s(r,i,f,m,h,n[5],0,8),f=o(f,10),h=s(h,r,i,f,m,n[6],0,7),i=o(i,10),m=s(m,h,r,i,f,n[7],0,9),r=o(r,10),f=s(f,m,h,r,i,n[8],0,11),h=o(h,10),i=s(i,f,m,h,r,n[9],0,13),m=o(m,10),r=s(r,i,f,m,h,n[10],0,14),f=o(f,10),h=s(h,r,i,f,m,n[11],0,15),i=o(i,10),m=s(m,h,r,i,f,n[12],0,6),r=o(r,10),f=s(f,m,h,r,i,n[13],0,7),h=o(h,10),i=s(i,f,m,h,r,n[14],0,9),m=o(m,10),r=s(r,i,f,m,h,n[15],0,8),f=o(f,10),h=d(h,r,i,f,m,n[7],1518500249,7),i=o(i,10),m=d(m,h,r,i,f,n[4],1518500249,6),r=o(r,10),f=d(f,m,h,r,i,n[13],1518500249,8),h=o(h,10),i=d(i,f,m,h,r,n[1],1518500249,13),m=o(m,10),r=d(r,i,f,m,h,n[10],1518500249,11),f=o(f,10),h=d(h,r,i,f,m,n[6],1518500249,9),i=o(i,10),m=d(m,h,r,i,f,n[15],1518500249,7),r=o(r,10),f=d(f,m,h,r,i,n[3],1518500249,15),h=o(h,10),i=d(i,f,m,h,r,n[12],1518500249,7),m=o(m,10),r=d(r,i,f,m,h,n[0],1518500249,12),f=o(f,10),h=d(h,r,i,f,m,n[9],1518500249,15),i=o(i,10),m=d(m,h,r,i,f,n[5],1518500249,9),r=o(r,10),f=d(f,m,h,r,i,n[2],1518500249,11),h=o(h,10),i=d(i,f,m,h,r,n[14],1518500249,7),m=o(m,10),r=d(r,i,f,m,h,n[11],1518500249,13),f=o(f,10),h=d(h,r,i,f,m,n[8],1518500249,12),i=o(i,10),m=l(m,h,r,i,f,n[3],1859775393,11),r=o(r,10),f=l(f,m,h,r,i,n[10],1859775393,13),h=o(h,10),i=l(i,f,m,h,r,n[14],1859775393,6),m=o(m,10),r=l(r,i,f,m,h,n[4],1859775393,7),f=o(f,10),h=l(h,r,i,f,m,n[9],1859775393,14),i=o(i,10),m=l(m,h,r,i,f,n[15],1859775393,9),r=o(r,10),f=l(f,m,h,r,i,n[8],1859775393,13),h=o(h,10),i=l(i,f,m,h,r,n[1],1859775393,15),m=o(m,10),r=l(r,i,f,m,h,n[2],1859775393,14),f=o(f,10),h=l(h,r,i,f,m,n[7],1859775393,8),i=o(i,10),m=l(m,h,r,i,f,n[0],1859775393,13),r=o(r,10),f=l(f,m,h,r,i,n[6],1859775393,6),h=o(h,10),i=l(i,f,m,h,r,n[13],1859775393,5),m=o(m,10),r=l(r,i,f,m,h,n[11],1859775393,12),f=o(f,10),h=l(h,r,i,f,m,n[5],1859775393,7),i=o(i,10),m=l(m,h,r,i,f,n[12],1859775393,5),r=o(r,10),f=c(f,m,h,r,i,n[1],2400959708,11),h=o(h,10),i=c(i,f,m,h,r,n[9],2400959708,12),m=o(m,10),r=c(r,i,f,m,h,n[11],2400959708,14),f=o(f,10),h=c(h,r,i,f,m,n[10],2400959708,15),i=o(i,10),m=c(m,h,r,i,f,n[0],2400959708,14),r=o(r,10),f=c(f,m,h,r,i,n[8],2400959708,15),h=o(h,10),i=c(i,f,m,h,r,n[12],2400959708,9),m=o(m,10),r=c(r,i,f,m,h,n[4],2400959708,8),f=o(f,10),h=c(h,r,i,f,m,n[13],2400959708,9),i=o(i,10),m=c(m,h,r,i,f,n[3],2400959708,14),r=o(r,10),f=c(f,m,h,r,i,n[7],2400959708,5),h=o(h,10),i=c(i,f,m,h,r,n[15],2400959708,6),m=o(m,10),r=c(r,i,f,m,h,n[14],2400959708,8),f=o(f,10),h=c(h,r,i,f,m,n[5],2400959708,6),i=o(i,10),m=c(m,h,r,i,f,n[6],2400959708,5),r=o(r,10),f=c(f,m,h,r,i,n[2],2400959708,12),h=o(h,10),i=u(i,f,m,h,r,n[4],2840853838,9),m=o(m,10),r=u(r,i,f,m,h,n[0],2840853838,15),f=o(f,10),h=u(h,r,i,f,m,n[5],2840853838,5),i=o(i,10),m=u(m,h,r,i,f,n[9],2840853838,11),r=o(r,10),f=u(f,m,h,r,i,n[7],2840853838,6),h=o(h,10),i=u(i,f,m,h,r,n[12],2840853838,8),m=o(m,10),r=u(r,i,f,m,h,n[2],2840853838,13),f=o(f,10),h=u(h,r,i,f,m,n[10],2840853838,12),i=o(i,10),m=u(m,h,r,i,f,n[14],2840853838,5),r=o(r,10),f=u(f,m,h,r,i,n[1],2840853838,12),h=o(h,10),i=u(i,f,m,h,r,n[3],2840853838,13),m=o(m,10),r=u(r,i,f,m,h,n[8],2840853838,14),f=o(f,10),h=u(h,r,i,f,m,n[11],2840853838,11),i=o(i,10),m=u(m,h,r,i,f,n[6],2840853838,8),r=o(r,10),f=u(f,m,h,r,i,n[15],2840853838,5),h=o(h,10),i=u(i,f,m,h,r,n[13],2840853838,6),m=o(m,10);var g=this._a,b=this._b,y=this._c,w=this._d,v=this._e;g=u(g,b,y,w,v,n[5],1352829926,8),y=o(y,10),v=u(v,g,b,y,w,n[14],1352829926,9),b=o(b,10),w=u(w,v,g,b,y,n[7],1352829926,9),g=o(g,10),y=u(y,w,v,g,b,n[0],1352829926,11),v=o(v,10),b=u(b,y,w,v,g,n[9],1352829926,13),w=o(w,10),g=u(g,b,y,w,v,n[2],1352829926,15),y=o(y,10),v=u(v,g,b,y,w,n[11],1352829926,15),b=o(b,10),w=u(w,v,g,b,y,n[4],1352829926,5),g=o(g,10),y=u(y,w,v,g,b,n[13],1352829926,7),v=o(v,10),b=u(b,y,w,v,g,n[6],1352829926,7),w=o(w,10),g=u(g,b,y,w,v,n[15],1352829926,8),y=o(y,10),v=u(v,g,b,y,w,n[8],1352829926,11),b=o(b,10),w=u(w,v,g,b,y,n[1],1352829926,14),g=o(g,10),y=u(y,w,v,g,b,n[10],1352829926,14),v=o(v,10),b=u(b,y,w,v,g,n[3],1352829926,12),w=o(w,10),g=u(g,b,y,w,v,n[12],1352829926,6),y=o(y,10),v=c(v,g,b,y,w,n[6],1548603684,9),b=o(b,10),w=c(w,v,g,b,y,n[11],1548603684,13),g=o(g,10),y=c(y,w,v,g,b,n[3],1548603684,15),v=o(v,10),b=c(b,y,w,v,g,n[7],1548603684,7),w=o(w,10),g=c(g,b,y,w,v,n[0],1548603684,12),y=o(y,10),v=c(v,g,b,y,w,n[13],1548603684,8),b=o(b,10),w=c(w,v,g,b,y,n[5],1548603684,9),g=o(g,10),y=c(y,w,v,g,b,n[10],1548603684,11),v=o(v,10),b=c(b,y,w,v,g,n[14],1548603684,7),w=o(w,10),g=c(g,b,y,w,v,n[15],1548603684,7),y=o(y,10),v=c(v,g,b,y,w,n[8],1548603684,12),b=o(b,10),w=c(w,v,g,b,y,n[12],1548603684,7),g=o(g,10),y=c(y,w,v,g,b,n[4],1548603684,6),v=o(v,10),b=c(b,y,w,v,g,n[9],1548603684,15),w=o(w,10),g=c(g,b,y,w,v,n[1],1548603684,13),y=o(y,10),v=c(v,g,b,y,w,n[2],1548603684,11),b=o(b,10),w=l(w,v,g,b,y,n[15],1836072691,9),g=o(g,10),y=l(y,w,v,g,b,n[5],1836072691,7),v=o(v,10),b=l(b,y,w,v,g,n[1],1836072691,15),w=o(w,10),g=l(g,b,y,w,v,n[3],1836072691,11),y=o(y,10),v=l(v,g,b,y,w,n[7],1836072691,8),b=o(b,10),w=l(w,v,g,b,y,n[14],1836072691,6),g=o(g,10),y=l(y,w,v,g,b,n[6],1836072691,6),v=o(v,10),b=l(b,y,w,v,g,n[9],1836072691,14),w=o(w,10),g=l(g,b,y,w,v,n[11],1836072691,12),y=o(y,10),v=l(v,g,b,y,w,n[8],1836072691,13),b=o(b,10),w=l(w,v,g,b,y,n[12],1836072691,5),g=o(g,10),y=l(y,w,v,g,b,n[2],1836072691,14),v=o(v,10),b=l(b,y,w,v,g,n[10],1836072691,13),w=o(w,10),g=l(g,b,y,w,v,n[0],1836072691,13),y=o(y,10),v=l(v,g,b,y,w,n[4],1836072691,7),b=o(b,10),w=l(w,v,g,b,y,n[13],1836072691,5),g=o(g,10),y=d(y,w,v,g,b,n[8],2053994217,15),v=o(v,10),b=d(b,y,w,v,g,n[6],2053994217,5),w=o(w,10),g=d(g,b,y,w,v,n[4],2053994217,8),y=o(y,10),v=d(v,g,b,y,w,n[1],2053994217,11),b=o(b,10),w=d(w,v,g,b,y,n[3],2053994217,14),g=o(g,10),y=d(y,w,v,g,b,n[11],2053994217,14),v=o(v,10),b=d(b,y,w,v,g,n[15],2053994217,6),w=o(w,10),g=d(g,b,y,w,v,n[0],2053994217,14),y=o(y,10),v=d(v,g,b,y,w,n[5],2053994217,6),b=o(b,10),w=d(w,v,g,b,y,n[12],2053994217,9),g=o(g,10),y=d(y,w,v,g,b,n[2],2053994217,12),v=o(v,10),b=d(b,y,w,v,g,n[13],2053994217,9),w=o(w,10),g=d(g,b,y,w,v,n[9],2053994217,12),y=o(y,10),v=d(v,g,b,y,w,n[7],2053994217,5),b=o(b,10),w=d(w,v,g,b,y,n[10],2053994217,15),g=o(g,10),y=d(y,w,v,g,b,n[14],2053994217,8),v=o(v,10),b=s(b,y,w,v,g,n[12],0,8),w=o(w,10),g=s(g,b,y,w,v,n[15],0,5),y=o(y,10),v=s(v,g,b,y,w,n[10],0,12),b=o(b,10),w=s(w,v,g,b,y,n[4],0,9),g=o(g,10),y=s(y,w,v,g,b,n[1],0,12),v=o(v,10),b=s(b,y,w,v,g,n[5],0,5),w=o(w,10),g=s(g,b,y,w,v,n[8],0,14),y=o(y,10),v=s(v,g,b,y,w,n[7],0,6),b=o(b,10),w=s(w,v,g,b,y,n[6],0,8),g=o(g,10),y=s(y,w,v,g,b,n[2],0,13),v=o(v,10),b=s(b,y,w,v,g,n[13],0,6),w=o(w,10),g=s(g,b,y,w,v,n[14],0,5),y=o(y,10),v=s(v,g,b,y,w,n[0],0,15),b=o(b,10),w=s(w,v,g,b,y,n[3],0,13),g=o(g,10),y=s(y,w,v,g,b,n[9],0,11),v=o(v,10),b=s(b,y,w,v,g,n[11],0,11),w=o(w,10);var x=0|this._b+f+w;this._b=0|this._c+m+v,this._c=0|this._d+h+g,this._d=0|this._e+r+b,this._e=0|this._a+i+y,this._a=x},r.prototype._digest=function(){this._block[this._blockOffset++]=128,56<this._blockOffset&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=new n(20);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t.writeInt32LE(this._e,16),t},t.exports=r}).call(n,a(2).Buffer)},function(t,n,a){var n=t.exports=function t(a){a=a.toLowerCase();var r=n[a];if(!r)throw new Error(a+' is not supported (we accept pull requests)');return new r};n.sha=a(356),n.sha1=a(357),n.sha224=a(358),n.sha256=a(213),n.sha384=a(359),n.sha512=a(214)},function(t,n,a){function r(){return Object.keys(s)}var i=a(366),o=a(374),s=a(223);n.createCipher=n.Cipher=i.createCipher,n.createCipheriv=n.Cipheriv=i.createCipheriv,n.createDecipher=n.Decipher=o.createDecipher,n.createDecipheriv=n.Decipheriv=o.createDecipheriv,n.listCiphers=n.getCiphers=r},function(t,n,a){var r={ECB:a(367),CBC:a(368),CFB:a(369),CFB8:a(370),CFB1:a(371),OFB:a(372),CTR:a(221),GCM:a(221)},i=a(223);for(var o in i)i[o].module=r[i[o].mode];t.exports=i},function(t,n,a){'use strict';n.utils=a(376),n.Cipher=a(377),n.DES=a(378),n.CBC=a(379),n.EDE=a(380)},function(t,n,a){(function(n){function r(t){var n=o(t),a=n.toRed(s.mont(t.modulus)).redPow(new s(t.publicExponent)).fromRed();return{blinder:a,unblinder:n.invm(t.modulus)}}function i(t,a){var i=r(a),o=a.modulus.byteLength(),d=s.mont(a.modulus),l=new s(t).mul(i.blinder).umod(a.modulus),c=l.toRed(s.mont(a.prime1)),u=l.toRed(s.mont(a.prime2)),f=a.coefficient,m=a.prime1,g=a.prime2,b=c.redPow(a.exponent1),y=u.redPow(a.exponent2);b=b.fromRed(),y=y.fromRed();var w=b.isub(y).imul(f).umod(m);return w.imul(g),y.iadd(w),new n(y.imul(i.unblinder).umod(a.modulus).toArray(!1,o))}function o(t){for(var n=t.modulus.byteLength(),a=new s(d(n));0<=a.cmp(t.modulus)||!a.umod(t.prime1)||!a.umod(t.prime2);)a=new s(d(n));return a}var s=a(391),d=a(55);t.exports=i,i.getr=o}).call(n,a(2).Buffer)},function(t,n,a){var r=n;r.utils=a(27),r.common=a(68),r.sha=a(401),r.ripemd=a(405),r.hmac=a(406),r.sha1=r.sha.sha1,r.sha256=r.sha.sha256,r.sha224=r.sha.sha224,r.sha384=r.sha.sha384,r.sha512=r.sha.sha512,r.ripemd160=r.ripemd.ripemd160},function(t,n,a){(function(t){(function(t,n){'use strict';function o(t,n){if(!t)throw new Error(n||'Assertion failed')}function r(t,n){t.super_=n;var a=function(){};a.prototype=n.prototype,t.prototype=new a,t.prototype.constructor=t}function d(t,n,a){return d.isBN(t)?t:void(this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&(('le'===n||'be'===n)&&(a=n,n=10),this._init(t||0,n||10,a||'be')))}function s(t,n,a){for(var o=0,r=_Mathmin(t.length,a),s=n,i;s<r;s++)i=t.charCodeAt(s)-48,o<<=4,o|=49<=i&&54>=i?i-49+10:17<=i&&22>=i?i-17+10:15&i;return o}function l(t,n,a,o){for(var s=0,r=_Mathmin(t.length,a),d=n,i;d<r;d++)i=t.charCodeAt(d)-48,s*=o,s+=49<=i?i-49+10:17<=i?i-17+10:i;return s}function c(t){for(var n=Array(t.bitLength()),a=0;a<n.length;a++){var r=0|a/26,i=a%26;n[a]=(t.words[r]&1<<i)>>>i}return n}function i(t,n,o){o.negative=n.negative^t.negative;var s=0|t.length+n.length;o.length=s,s=0|s-1;var d=0|t.words[0],a=0|n.words[0],l=d*a,r=67108863&l,c=0|l/67108864;o.words[0]=r;for(var u=1;u<s;u++){for(var f=c>>>26,m=67108863&c,h=_Mathmin(u,n.length-1),g=_Mathmax(0,u-t.length+1),b;g<=h;g++)b=0|u-g,d=0|t.words[b],a=0|n.words[g],l=d*a+m,f+=0|l/67108864,m=67108863&l;o.words[u]=0|m,c=0|f}return 0==c?o.length--:o.words[u]=0|c,o.strip()}function u(t,n,o){o.negative=n.negative^t.negative,o.length=t.length+n.length;for(var s=0,d=0,l=0,c;l<o.length-1;l++){c=d,d=0;for(var u=67108863&s,f=_Mathmin(l,n.length-1),m=_Mathmax(0,l-t.length+1);m<=f;m++){var h=l-m,i=0|t.words[h],a=0|n.words[m],g=i*a,r=67108863&g;c=0|c+(0|g/67108864),r=0|r+u,u=67108863&r,c=0|c+(r>>>26),d+=c>>>26,c&=67108863}o.words[l]=u,s=c,c=d}return 0==s?o.length--:o.words[l]=s,o.strip()}function f(t,n,a){var r=new m;return r.mulp(t,n,a)}function m(t,n){this.x=t,this.y=n}function h(t,n){this.name=t,this.p=new d(n,16),this.n=this.p.bitLength(),this.k=new d(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function g(){h.call(this,'k256','ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f')}function b(){h.call(this,'p224','ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001')}function y(){h.call(this,'p192','ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff')}function w(){h.call(this,'25519','7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed')}function v(t){if('string'==typeof t){var n=d._prime(t);this.m=n.p,this.prime=n}else o(t.gtn(1),'modulus must be greater than 1'),this.m=t,this.prime=null}function x(t){v.call(this,t),this.shift=this.m.bitLength(),0!=this.shift%26&&(this.shift+=26-this.shift%26),this.r=new d(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}'object'==typeof t?t.exports=d:n.BN=d,d.BN=d,d.wordSize=26;var _;try{_=a(438).Buffer}catch(t){}d.isBN=function t(n){return!!(n instanceof d)||null!==n&&'object'==typeof n&&n.constructor.wordSize===d.wordSize&&Array.isArray(n.words)},d.max=function t(n,a){return 0<n.cmp(a)?n:a},d.min=function t(n,a){return 0>n.cmp(a)?n:a},d.prototype._init=function t(n,a,r){if('number'==typeof n)return this._initNumber(n,a,r);if('object'==typeof n)return this._initArray(n,a,r);'hex'===a&&(a=16),o(a===(0|a)&&2<=a&&36>=a),n=n.toString().replace(/\s+/g,'');var i=0;'-'===n[0]&&i++,16===a?this._parseHex(n,i):this._parseBase(n,a,i),'-'===n[0]&&(this.negative=1),this.strip();'le'!==r||this._initArray(this.toArray(),a,r)},d.prototype._initNumber=function t(n,a,r){0>n&&(this.negative=1,n=-n),67108864>n?(this.words=[67108863&n],this.length=1):4503599627370496>n?(this.words=[67108863&n,67108863&n/67108864],this.length=2):(o(9007199254740992>n),this.words=[67108863&n,67108863&n/67108864,1],this.length=3);'le'!==r||this._initArray(this.toArray(),a,r)},d.prototype._initArray=function t(n,a,r){if(o('number'==typeof n.length),0>=n.length)return this.words=[0],this.length=1,this;this.length=_Mathceil(n.length/3),this.words=Array(this.length);for(var s=0;s<this.length;s++)this.words[s]=0;var i=0,d,l;if('be'===r)for(s=n.length-1,d=0;0<=s;s-=3)l=n[s]|n[s-1]<<8|n[s-2]<<16,this.words[d]|=67108863&l<<i,this.words[d+1]=67108863&l>>>26-i,i+=24,26<=i&&(i-=26,d++);else if('le'===r)for(s=0,d=0;s<n.length;s+=3)l=n[s]|n[s+1]<<8|n[s+2]<<16,this.words[d]|=67108863&l<<i,this.words[d+1]=67108863&l>>>26-i,i+=24,26<=i&&(i-=26,d++);return this.strip()},d.prototype._parseHex=function t(n,a){this.length=_Mathceil((n.length-a)/6),this.words=Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var i=0,o,d;for(r=n.length-6,o=0;r>=a;r-=6)d=s(n,r,r+6),this.words[o]|=67108863&d<<i,this.words[o+1]|=4194303&d>>>26-i,i+=24,26<=i&&(i-=26,o++);r+6!==a&&(d=s(n,a,r+6),this.words[o]|=67108863&d<<i,this.words[o+1]|=4194303&d>>>26-i),this.strip()},d.prototype._parseBase=function t(n,a,r){this.words=[0],this.length=1;for(var o=0,s=1;67108863>=s;s*=a)o++;o--,s=0|s/a;for(var d=n.length-r,c=d%o,u=_Mathmin(d,d-c)+r,f=0,m=r;m<u;m+=o)f=l(n,m,m+o,a),this.imuln(s),67108864>this.words[0]+f?this.words[0]+=f:this._iaddn(f);if(0!=c){var i=1;for(f=l(n,m,n.length,a),m=0;m<c;m++)i*=a;this.imuln(i),67108864>this.words[0]+f?this.words[0]+=f:this._iaddn(f)}},d.prototype.copy=function t(n){n.words=Array(this.length);for(var a=0;a<this.length;a++)n.words[a]=this.words[a];n.length=this.length,n.negative=this.negative,n.red=this.red},d.prototype.clone=function t(){var n=new d(null);return this.copy(n),n},d.prototype._expand=function t(n){for(;this.length<n;)this.words[this.length++]=0;return this},d.prototype.strip=function t(){for(;1<this.length&&0===this.words[this.length-1];)this.length--;return this._normSign()},d.prototype._normSign=function t(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},d.prototype.inspect=function t(){return(this.red?'<BN-R: ':'<BN: ')+this.toString(16)+'>'};var k=['','0','00','000','0000','00000','000000','0000000','00000000','000000000','0000000000','00000000000','000000000000','0000000000000','00000000000000','000000000000000','0000000000000000','00000000000000000','000000000000000000','0000000000000000000','00000000000000000000','000000000000000000000','0000000000000000000000','00000000000000000000000','000000000000000000000000','0000000000000000000000000'],C=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],E=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,10000000,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64000000,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,24300000,28629151,33554432,39135393,45435424,52521875,60466176];d.prototype.toString=function t(n,a){n=n||10,a=0|a||1;var s;if(16===n||'hex'===n){s='';for(var d=0,l=0,u=0;u<this.length;u++){var i=this.words[u],f=(16777215&(i<<d|l)).toString(16);l=16777215&i>>>24-d,s=0!=l||u!==this.length-1?k[6-f.length]+f+s:f+s,d+=2,26<=d&&(d-=26,u--)}for(0!=l&&(s=l.toString(16)+s);0!=s.length%a;)s='0'+s;return 0!==this.negative&&(s='-'+s),s}if(n===(0|n)&&2<=n&&36>=n){var m=C[n],h=E[n];s='';var g=this.clone();for(g.negative=0;!g.isZero();){var c=g.modn(h).toString(n);g=g.idivn(h),s=g.isZero()?c+s:k[m-c.length]+c+s}for(this.isZero()&&(s='0'+s);0!=s.length%a;)s='0'+s;return 0!==this.negative&&(s='-'+s),s}o(!1,'Base should be between 2 and 36')},d.prototype.toNumber=function t(){var n=this.words[0];return 2===this.length?n+=67108864*this.words[1]:3===this.length&&1===this.words[2]?n+=4503599627370496+67108864*this.words[1]:2<this.length&&o(!1,'Number can only safely store up to 53 bits'),0===this.negative?n:-n},d.prototype.toJSON=function t(){return this.toString(16)},d.prototype.toBuffer=function t(n,a){return o('undefined'!=typeof _),this.toArrayLike(_,n,a)},d.prototype.toArray=function t(n,a){return this.toArrayLike(Array,n,a)},d.prototype.toArrayLike=function t(n,a,r){var s=this.byteLength(),d=r||_Mathmax(1,s);o(s<=d,'byte array longer than desired length'),o(0<d,'Requested array length <= 0'),this.strip();var l='le'===a,c=new n(d),u=this.clone(),f,m;if(!l){for(m=0;m<d-s;m++)c[m]=0;for(m=0;!u.isZero();m++)f=u.andln(255),u.iushrn(8),c[d-m-1]=f}else{for(m=0;!u.isZero();m++)f=u.andln(255),u.iushrn(8),c[m]=f;for(;m<d;m++)c[m]=0}return c},d.prototype._countBits=_Mathclz?function t(n){return 32-_Mathclz(n)}:function n(a){var i=a,t=0;return 4096<=i&&(t+=13,i>>>=13),64<=i&&(t+=7,i>>>=7),8<=i&&(t+=4,i>>>=4),2<=i&&(t+=2,i>>>=2),t+i},d.prototype._zeroBits=function n(a){if(0===a)return 26;var i=a,t=0;return 0==(8191&i)&&(t+=13,i>>>=13),0==(127&i)&&(t+=7,i>>>=7),0==(15&i)&&(t+=4,i>>>=4),0==(3&i)&&(t+=2,i>>>=2),0==(1&i)&&t++,t},d.prototype.bitLength=function t(){var n=this.words[this.length-1],a=this._countBits(n);return 26*(this.length-1)+a},d.prototype.zeroBits=function t(){if(this.isZero())return 0;for(var n=0,a=0,r;a<this.length&&(r=this._zeroBits(this.words[a]),n+=r,26===r);a++);return n},d.prototype.byteLength=function t(){return _Mathceil(this.bitLength()/8)},d.prototype.toTwos=function t(n){return 0===this.negative?this.clone():this.abs().inotn(n).iaddn(1)},d.prototype.fromTwos=function t(n){return this.testn(n-1)?this.notn(n).iaddn(1).ineg():this.clone()},d.prototype.isNeg=function t(){return 0!==this.negative},d.prototype.neg=function t(){return this.clone().ineg()},d.prototype.ineg=function t(){return this.isZero()||(this.negative^=1),this},d.prototype.iuor=function t(n){for(;this.length<n.length;)this.words[this.length++]=0;for(var a=0;a<n.length;a++)this.words[a]|=n.words[a];return this.strip()},d.prototype.ior=function t(n){return o(0==(this.negative|n.negative)),this.iuor(n)},d.prototype.or=function t(n){return this.length>n.length?this.clone().ior(n):n.clone().ior(this)},d.prototype.uor=function t(n){return this.length>n.length?this.clone().iuor(n):n.clone().iuor(this)},d.prototype.iuand=function t(n){var a;a=this.length>n.length?n:this;for(var r=0;r<a.length;r++)this.words[r]&=n.words[r];return this.length=a.length,this.strip()},d.prototype.iand=function t(n){return o(0==(this.negative|n.negative)),this.iuand(n)},d.prototype.and=function t(n){return this.length>n.length?this.clone().iand(n):n.clone().iand(this)},d.prototype.uand=function t(n){return this.length>n.length?this.clone().iuand(n):n.clone().iuand(this)},d.prototype.iuxor=function t(n){var r,a;this.length>n.length?(r=this,a=n):(r=n,a=this);for(var o=0;o<a.length;o++)this.words[o]=r.words[o]^a.words[o];if(this!==r)for(;o<r.length;o++)this.words[o]=r.words[o];return this.length=r.length,this.strip()},d.prototype.ixor=function t(n){return o(0==(this.negative|n.negative)),this.iuxor(n)},d.prototype.xor=function t(n){return this.length>n.length?this.clone().ixor(n):n.clone().ixor(this)},d.prototype.uxor=function t(n){return this.length>n.length?this.clone().iuxor(n):n.clone().iuxor(this)},d.prototype.inotn=function t(n){o('number'==typeof n&&0<=n);var a=0|_Mathceil(n/26),r=n%26;this._expand(a),0<r&&a--;for(var s=0;s<a;s++)this.words[s]=67108863&~this.words[s];return 0<r&&(this.words[s]=~this.words[s]&67108863>>26-r),this.strip()},d.prototype.notn=function t(n){return this.clone().inotn(n)},d.prototype.setn=function t(n,a){o('number'==typeof n&&0<=n);var r=0|n/26,i=n%26;return this._expand(r+1),a?this.words[r]|=1<<i:this.words[r]&=~(1<<i),this.strip()},d.prototype.iadd=function t(n){var o;if(0!==this.negative&&0===n.negative)return this.negative=0,o=this.isub(n),this.negative^=1,this._normSign();if(0===this.negative&&0!==n.negative)return n.negative=0,o=this.isub(n),n.negative=1,o._normSign();var r,a;this.length>n.length?(r=this,a=n):(r=n,a=this);for(var s=0,d=0;d<a.length;d++)o=(0|r.words[d])+(0|a.words[d])+s,this.words[d]=67108863&o,s=o>>>26;for(;0!=s&&d<r.length;d++)o=(0|r.words[d])+s,this.words[d]=67108863&o,s=o>>>26;if(this.length=r.length,0!=s)this.words[this.length]=s,this.length++;else if(r!==this)for(;d<r.length;d++)this.words[d]=r.words[d];return this},d.prototype.add=function t(n){var a;return 0!==n.negative&&0===this.negative?(n.negative=0,a=this.sub(n),n.negative^=1,a):0===n.negative&&0!==this.negative?(this.negative=0,a=n.sub(this),this.negative=1,a):this.length>n.length?this.clone().iadd(n):n.clone().iadd(this)},d.prototype.isub=function t(n){if(0!==n.negative){n.negative=0;var o=this.iadd(n);return n.negative=1,o._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(n),this.negative=1,this._normSign();var r=this.cmp(n);if(0===r)return this.negative=0,this.length=1,this.words[0]=0,this;var s,a;0<r?(s=this,a=n):(s=n,a=this);for(var d=0,l=0;l<a.length;l++)o=(0|s.words[l])-(0|a.words[l])+d,d=o>>26,this.words[l]=67108863&o;for(;0!=d&&l<s.length;l++)o=(0|s.words[l])+d,d=o>>26,this.words[l]=67108863&o;if(0==d&&l<s.length&&s!==this)for(;l<s.length;l++)this.words[l]=s.words[l];return this.length=_Mathmax(this.length,l),s!==this&&(this.negative=1),this.strip()},d.prototype.sub=function t(n){return this.clone().isub(n)};var T=function t(n,r,i){var s=n.words,a=r.words,d=i.words,o=0,l=0|s[0],c=8191&l,u=l>>>13,f=0|s[1],m=8191&f,h=f>>>13,g=0|s[2],b=8191&g,y=g>>>13,w=0|s[3],v=8191&w,x=w>>>13,_=0|s[4],k=8191&_,C=_>>>13,E=0|s[5],T=8191&E,A=E>>>13,S=0|s[6],I=8191&S,N=S>>>13,j=0|s[7],L=8191&j,R=j>>>13,M=0|s[8],D=8191&M,P=M>>>13,O=0|s[9],B=8191&O,U=O>>>13,F=0|a[0],q=8191&F,z=F>>>13,H=0|a[1],W=8191&H,V=H>>>13,G=0|a[2],J=8191&G,K=G>>>13,X=0|a[3],Y=8191&X,Z=X>>>13,Q=0|a[4],ee=8191&Q,te=Q>>>13,ne=0|a[5],ae=8191&ne,re=ne>>>13,ie=0|a[6],oe=8191&ie,se=ie>>>13,de=0|a[7],le=8191&de,pe=de>>>13,ce=0|a[8],ue=8191&ce,fe=ce>>>13,he=0|a[9],ge=8191&he,be=he>>>13,ye,we,ve;i.negative=n.negative^r.negative,i.length=19,ye=_Mathimul(c,q),we=_Mathimul(c,z),we=0|we+_Mathimul(u,q),ve=_Mathimul(u,z);var xe=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(xe>>>26),xe&=67108863,ye=_Mathimul(m,q),we=_Mathimul(m,z),we=0|we+_Mathimul(h,q),ve=_Mathimul(h,z),ye=0|ye+_Mathimul(c,W),we=0|we+_Mathimul(c,V),we=0|we+_Mathimul(u,W),ve=0|ve+_Mathimul(u,V);var _e=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(_e>>>26),_e&=67108863,ye=_Mathimul(b,q),we=_Mathimul(b,z),we=0|we+_Mathimul(y,q),ve=_Mathimul(y,z),ye=0|ye+_Mathimul(m,W),we=0|we+_Mathimul(m,V),we=0|we+_Mathimul(h,W),ve=0|ve+_Mathimul(h,V),ye=0|ye+_Mathimul(c,J),we=0|we+_Mathimul(c,K),we=0|we+_Mathimul(u,J),ve=0|ve+_Mathimul(u,K);var ke=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(ke>>>26),ke&=67108863,ye=_Mathimul(v,q),we=_Mathimul(v,z),we=0|we+_Mathimul(x,q),ve=_Mathimul(x,z),ye=0|ye+_Mathimul(b,W),we=0|we+_Mathimul(b,V),we=0|we+_Mathimul(y,W),ve=0|ve+_Mathimul(y,V),ye=0|ye+_Mathimul(m,J),we=0|we+_Mathimul(m,K),we=0|we+_Mathimul(h,J),ve=0|ve+_Mathimul(h,K),ye=0|ye+_Mathimul(c,Y),we=0|we+_Mathimul(c,Z),we=0|we+_Mathimul(u,Y),ve=0|ve+_Mathimul(u,Z);var Ce=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Ce>>>26),Ce&=67108863,ye=_Mathimul(k,q),we=_Mathimul(k,z),we=0|we+_Mathimul(C,q),ve=_Mathimul(C,z),ye=0|ye+_Mathimul(v,W),we=0|we+_Mathimul(v,V),we=0|we+_Mathimul(x,W),ve=0|ve+_Mathimul(x,V),ye=0|ye+_Mathimul(b,J),we=0|we+_Mathimul(b,K),we=0|we+_Mathimul(y,J),ve=0|ve+_Mathimul(y,K),ye=0|ye+_Mathimul(m,Y),we=0|we+_Mathimul(m,Z),we=0|we+_Mathimul(h,Y),ve=0|ve+_Mathimul(h,Z),ye=0|ye+_Mathimul(c,ee),we=0|we+_Mathimul(c,te),we=0|we+_Mathimul(u,ee),ve=0|ve+_Mathimul(u,te);var Ee=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Ee>>>26),Ee&=67108863,ye=_Mathimul(T,q),we=_Mathimul(T,z),we=0|we+_Mathimul(A,q),ve=_Mathimul(A,z),ye=0|ye+_Mathimul(k,W),we=0|we+_Mathimul(k,V),we=0|we+_Mathimul(C,W),ve=0|ve+_Mathimul(C,V),ye=0|ye+_Mathimul(v,J),we=0|we+_Mathimul(v,K),we=0|we+_Mathimul(x,J),ve=0|ve+_Mathimul(x,K),ye=0|ye+_Mathimul(b,Y),we=0|we+_Mathimul(b,Z),we=0|we+_Mathimul(y,Y),ve=0|ve+_Mathimul(y,Z),ye=0|ye+_Mathimul(m,ee),we=0|we+_Mathimul(m,te),we=0|we+_Mathimul(h,ee),ve=0|ve+_Mathimul(h,te),ye=0|ye+_Mathimul(c,ae),we=0|we+_Mathimul(c,re),we=0|we+_Mathimul(u,ae),ve=0|ve+_Mathimul(u,re);var Te=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Te>>>26),Te&=67108863,ye=_Mathimul(I,q),we=_Mathimul(I,z),we=0|we+_Mathimul(N,q),ve=_Mathimul(N,z),ye=0|ye+_Mathimul(T,W),we=0|we+_Mathimul(T,V),we=0|we+_Mathimul(A,W),ve=0|ve+_Mathimul(A,V),ye=0|ye+_Mathimul(k,J),we=0|we+_Mathimul(k,K),we=0|we+_Mathimul(C,J),ve=0|ve+_Mathimul(C,K),ye=0|ye+_Mathimul(v,Y),we=0|we+_Mathimul(v,Z),we=0|we+_Mathimul(x,Y),ve=0|ve+_Mathimul(x,Z),ye=0|ye+_Mathimul(b,ee),we=0|we+_Mathimul(b,te),we=0|we+_Mathimul(y,ee),ve=0|ve+_Mathimul(y,te),ye=0|ye+_Mathimul(m,ae),we=0|we+_Mathimul(m,re),we=0|we+_Mathimul(h,ae),ve=0|ve+_Mathimul(h,re),ye=0|ye+_Mathimul(c,oe),we=0|we+_Mathimul(c,se),we=0|we+_Mathimul(u,oe),ve=0|ve+_Mathimul(u,se);var Ae=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Ae>>>26),Ae&=67108863,ye=_Mathimul(L,q),we=_Mathimul(L,z),we=0|we+_Mathimul(R,q),ve=_Mathimul(R,z),ye=0|ye+_Mathimul(I,W),we=0|we+_Mathimul(I,V),we=0|we+_Mathimul(N,W),ve=0|ve+_Mathimul(N,V),ye=0|ye+_Mathimul(T,J),we=0|we+_Mathimul(T,K),we=0|we+_Mathimul(A,J),ve=0|ve+_Mathimul(A,K),ye=0|ye+_Mathimul(k,Y),we=0|we+_Mathimul(k,Z),we=0|we+_Mathimul(C,Y),ve=0|ve+_Mathimul(C,Z),ye=0|ye+_Mathimul(v,ee),we=0|we+_Mathimul(v,te),we=0|we+_Mathimul(x,ee),ve=0|ve+_Mathimul(x,te),ye=0|ye+_Mathimul(b,ae),we=0|we+_Mathimul(b,re),we=0|we+_Mathimul(y,ae),ve=0|ve+_Mathimul(y,re),ye=0|ye+_Mathimul(m,oe),we=0|we+_Mathimul(m,se),we=0|we+_Mathimul(h,oe),ve=0|ve+_Mathimul(h,se),ye=0|ye+_Mathimul(c,le),we=0|we+_Mathimul(c,pe),we=0|we+_Mathimul(u,le),ve=0|ve+_Mathimul(u,pe);var Se=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Se>>>26),Se&=67108863,ye=_Mathimul(D,q),we=_Mathimul(D,z),we=0|we+_Mathimul(P,q),ve=_Mathimul(P,z),ye=0|ye+_Mathimul(L,W),we=0|we+_Mathimul(L,V),we=0|we+_Mathimul(R,W),ve=0|ve+_Mathimul(R,V),ye=0|ye+_Mathimul(I,J),we=0|we+_Mathimul(I,K),we=0|we+_Mathimul(N,J),ve=0|ve+_Mathimul(N,K),ye=0|ye+_Mathimul(T,Y),we=0|we+_Mathimul(T,Z),we=0|we+_Mathimul(A,Y),ve=0|ve+_Mathimul(A,Z),ye=0|ye+_Mathimul(k,ee),we=0|we+_Mathimul(k,te),we=0|we+_Mathimul(C,ee),ve=0|ve+_Mathimul(C,te),ye=0|ye+_Mathimul(v,ae),we=0|we+_Mathimul(v,re),we=0|we+_Mathimul(x,ae),ve=0|ve+_Mathimul(x,re),ye=0|ye+_Mathimul(b,oe),we=0|we+_Mathimul(b,se),we=0|we+_Mathimul(y,oe),ve=0|ve+_Mathimul(y,se),ye=0|ye+_Mathimul(m,le),we=0|we+_Mathimul(m,pe),we=0|we+_Mathimul(h,le),ve=0|ve+_Mathimul(h,pe),ye=0|ye+_Mathimul(c,ue),we=0|we+_Mathimul(c,fe),we=0|we+_Mathimul(u,ue),ve=0|ve+_Mathimul(u,fe);var Ie=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Ie>>>26),Ie&=67108863,ye=_Mathimul(B,q),we=_Mathimul(B,z),we=0|we+_Mathimul(U,q),ve=_Mathimul(U,z),ye=0|ye+_Mathimul(D,W),we=0|we+_Mathimul(D,V),we=0|we+_Mathimul(P,W),ve=0|ve+_Mathimul(P,V),ye=0|ye+_Mathimul(L,J),we=0|we+_Mathimul(L,K),we=0|we+_Mathimul(R,J),ve=0|ve+_Mathimul(R,K),ye=0|ye+_Mathimul(I,Y),we=0|we+_Mathimul(I,Z),we=0|we+_Mathimul(N,Y),ve=0|ve+_Mathimul(N,Z),ye=0|ye+_Mathimul(T,ee),we=0|we+_Mathimul(T,te),we=0|we+_Mathimul(A,ee),ve=0|ve+_Mathimul(A,te),ye=0|ye+_Mathimul(k,ae),we=0|we+_Mathimul(k,re),we=0|we+_Mathimul(C,ae),ve=0|ve+_Mathimul(C,re),ye=0|ye+_Mathimul(v,oe),we=0|we+_Mathimul(v,se),we=0|we+_Mathimul(x,oe),ve=0|ve+_Mathimul(x,se),ye=0|ye+_Mathimul(b,le),we=0|we+_Mathimul(b,pe),we=0|we+_Mathimul(y,le),ve=0|ve+_Mathimul(y,pe),ye=0|ye+_Mathimul(m,ue),we=0|we+_Mathimul(m,fe),we=0|we+_Mathimul(h,ue),ve=0|ve+_Mathimul(h,fe),ye=0|ye+_Mathimul(c,ge),we=0|we+_Mathimul(c,be),we=0|we+_Mathimul(u,ge),ve=0|ve+_Mathimul(u,be);var Ne=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Ne>>>26),Ne&=67108863,ye=_Mathimul(B,W),we=_Mathimul(B,V),we=0|we+_Mathimul(U,W),ve=_Mathimul(U,V),ye=0|ye+_Mathimul(D,J),we=0|we+_Mathimul(D,K),we=0|we+_Mathimul(P,J),ve=0|ve+_Mathimul(P,K),ye=0|ye+_Mathimul(L,Y),we=0|we+_Mathimul(L,Z),we=0|we+_Mathimul(R,Y),ve=0|ve+_Mathimul(R,Z),ye=0|ye+_Mathimul(I,ee),we=0|we+_Mathimul(I,te),we=0|we+_Mathimul(N,ee),ve=0|ve+_Mathimul(N,te),ye=0|ye+_Mathimul(T,ae),we=0|we+_Mathimul(T,re),we=0|we+_Mathimul(A,ae),ve=0|ve+_Mathimul(A,re),ye=0|ye+_Mathimul(k,oe),we=0|we+_Mathimul(k,se),we=0|we+_Mathimul(C,oe),ve=0|ve+_Mathimul(C,se),ye=0|ye+_Mathimul(v,le),we=0|we+_Mathimul(v,pe),we=0|we+_Mathimul(x,le),ve=0|ve+_Mathimul(x,pe),ye=0|ye+_Mathimul(b,ue),we=0|we+_Mathimul(b,fe),we=0|we+_Mathimul(y,ue),ve=0|ve+_Mathimul(y,fe),ye=0|ye+_Mathimul(m,ge),we=0|we+_Mathimul(m,be),we=0|we+_Mathimul(h,ge),ve=0|ve+_Mathimul(h,be);var je=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(je>>>26),je&=67108863,ye=_Mathimul(B,J),we=_Mathimul(B,K),we=0|we+_Mathimul(U,J),ve=_Mathimul(U,K),ye=0|ye+_Mathimul(D,Y),we=0|we+_Mathimul(D,Z),we=0|we+_Mathimul(P,Y),ve=0|ve+_Mathimul(P,Z),ye=0|ye+_Mathimul(L,ee),we=0|we+_Mathimul(L,te),we=0|we+_Mathimul(R,ee),ve=0|ve+_Mathimul(R,te),ye=0|ye+_Mathimul(I,ae),we=0|we+_Mathimul(I,re),we=0|we+_Mathimul(N,ae),ve=0|ve+_Mathimul(N,re),ye=0|ye+_Mathimul(T,oe),we=0|we+_Mathimul(T,se),we=0|we+_Mathimul(A,oe),ve=0|ve+_Mathimul(A,se),ye=0|ye+_Mathimul(k,le),we=0|we+_Mathimul(k,pe),we=0|we+_Mathimul(C,le),ve=0|ve+_Mathimul(C,pe),ye=0|ye+_Mathimul(v,ue),we=0|we+_Mathimul(v,fe),we=0|we+_Mathimul(x,ue),ve=0|ve+_Mathimul(x,fe),ye=0|ye+_Mathimul(b,ge),we=0|we+_Mathimul(b,be),we=0|we+_Mathimul(y,ge),ve=0|ve+_Mathimul(y,be);var Le=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Le>>>26),Le&=67108863,ye=_Mathimul(B,Y),we=_Mathimul(B,Z),we=0|we+_Mathimul(U,Y),ve=_Mathimul(U,Z),ye=0|ye+_Mathimul(D,ee),we=0|we+_Mathimul(D,te),we=0|we+_Mathimul(P,ee),ve=0|ve+_Mathimul(P,te),ye=0|ye+_Mathimul(L,ae),we=0|we+_Mathimul(L,re),we=0|we+_Mathimul(R,ae),ve=0|ve+_Mathimul(R,re),ye=0|ye+_Mathimul(I,oe),we=0|we+_Mathimul(I,se),we=0|we+_Mathimul(N,oe),ve=0|ve+_Mathimul(N,se),ye=0|ye+_Mathimul(T,le),we=0|we+_Mathimul(T,pe),we=0|we+_Mathimul(A,le),ve=0|ve+_Mathimul(A,pe),ye=0|ye+_Mathimul(k,ue),we=0|we+_Mathimul(k,fe),we=0|we+_Mathimul(C,ue),ve=0|ve+_Mathimul(C,fe),ye=0|ye+_Mathimul(v,ge),we=0|we+_Mathimul(v,be),we=0|we+_Mathimul(x,ge),ve=0|ve+_Mathimul(x,be);var Re=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Re>>>26),Re&=67108863,ye=_Mathimul(B,ee),we=_Mathimul(B,te),we=0|we+_Mathimul(U,ee),ve=_Mathimul(U,te),ye=0|ye+_Mathimul(D,ae),we=0|we+_Mathimul(D,re),we=0|we+_Mathimul(P,ae),ve=0|ve+_Mathimul(P,re),ye=0|ye+_Mathimul(L,oe),we=0|we+_Mathimul(L,se),we=0|we+_Mathimul(R,oe),ve=0|ve+_Mathimul(R,se),ye=0|ye+_Mathimul(I,le),we=0|we+_Mathimul(I,pe),we=0|we+_Mathimul(N,le),ve=0|ve+_Mathimul(N,pe),ye=0|ye+_Mathimul(T,ue),we=0|we+_Mathimul(T,fe),we=0|we+_Mathimul(A,ue),ve=0|ve+_Mathimul(A,fe),ye=0|ye+_Mathimul(k,ge),we=0|we+_Mathimul(k,be),we=0|we+_Mathimul(C,ge),ve=0|ve+_Mathimul(C,be);var Me=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Me>>>26),Me&=67108863,ye=_Mathimul(B,ae),we=_Mathimul(B,re),we=0|we+_Mathimul(U,ae),ve=_Mathimul(U,re),ye=0|ye+_Mathimul(D,oe),we=0|we+_Mathimul(D,se),we=0|we+_Mathimul(P,oe),ve=0|ve+_Mathimul(P,se),ye=0|ye+_Mathimul(L,le),we=0|we+_Mathimul(L,pe),we=0|we+_Mathimul(R,le),ve=0|ve+_Mathimul(R,pe),ye=0|ye+_Mathimul(I,ue),we=0|we+_Mathimul(I,fe),we=0|we+_Mathimul(N,ue),ve=0|ve+_Mathimul(N,fe),ye=0|ye+_Mathimul(T,ge),we=0|we+_Mathimul(T,be),we=0|we+_Mathimul(A,ge),ve=0|ve+_Mathimul(A,be);var De=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(De>>>26),De&=67108863,ye=_Mathimul(B,oe),we=_Mathimul(B,se),we=0|we+_Mathimul(U,oe),ve=_Mathimul(U,se),ye=0|ye+_Mathimul(D,le),we=0|we+_Mathimul(D,pe),we=0|we+_Mathimul(P,le),ve=0|ve+_Mathimul(P,pe),ye=0|ye+_Mathimul(L,ue),we=0|we+_Mathimul(L,fe),we=0|we+_Mathimul(R,ue),ve=0|ve+_Mathimul(R,fe),ye=0|ye+_Mathimul(I,ge),we=0|we+_Mathimul(I,be),we=0|we+_Mathimul(N,ge),ve=0|ve+_Mathimul(N,be);var Pe=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Pe>>>26),Pe&=67108863,ye=_Mathimul(B,le),we=_Mathimul(B,pe),we=0|we+_Mathimul(U,le),ve=_Mathimul(U,pe),ye=0|ye+_Mathimul(D,ue),we=0|we+_Mathimul(D,fe),we=0|we+_Mathimul(P,ue),ve=0|ve+_Mathimul(P,fe),ye=0|ye+_Mathimul(L,ge),we=0|we+_Mathimul(L,be),we=0|we+_Mathimul(R,ge),ve=0|ve+_Mathimul(R,be);var Oe=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Oe>>>26),Oe&=67108863,ye=_Mathimul(B,ue),we=_Mathimul(B,fe),we=0|we+_Mathimul(U,ue),ve=_Mathimul(U,fe),ye=0|ye+_Mathimul(D,ge),we=0|we+_Mathimul(D,be),we=0|we+_Mathimul(P,ge),ve=0|ve+_Mathimul(P,be);var Be=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Be>>>26),Be&=67108863,ye=_Mathimul(B,ge),we=_Mathimul(B,be),we=0|we+_Mathimul(U,ge),ve=_Mathimul(U,be);var Ue=0|(0|o+ye)+((8191&we)<<13);return o=0|(0|ve+(we>>>13))+(Ue>>>26),Ue&=67108863,d[0]=xe,d[1]=_e,d[2]=ke,d[3]=Ce,d[4]=Ee,d[5]=Te,d[6]=Ae,d[7]=Se,d[8]=Ie,d[9]=Ne,d[10]=je,d[11]=Le,d[12]=Re,d[13]=Me,d[14]=De,d[15]=Pe,d[16]=Oe,d[17]=Be,d[18]=Ue,0!=o&&(d[19]=o,i.length++),i};_Mathimul||(T=i),d.prototype.mulTo=function t(n,a){var r=this.length+n.length,o;return o=10===this.length&&10===n.length?T(this,n,a):63>r?i(this,n,a):1024>r?u(this,n,a):f(this,n,a),o},m.prototype.makeRBT=function n(a){for(var r=Array(a),t=d.prototype._countBits(a)-1,o=0;o<a;o++)r[o]=this.revBin(o,t,a);return r},m.prototype.revBin=function t(n,a,r){if(0===n||n===r-1)return n;for(var o=0,s=0;s<a;s++)o|=(1&n)<<a-s-1,n>>=1;return o},m.prototype.permute=function t(n,a,r,o,s,d){for(var l=0;l<d;l++)o[l]=a[n[l]],s[l]=r[n[l]]},m.prototype.transform=function t(n,a,r,i,o,d){this.permute(d,n,a,r,i,o);for(var c=1;c<o;c<<=1)for(var s=c<<1,l=_Mathcos(2*_MathPI/s),u=_Mathsin(2*_MathPI/s),f=0;f<o;f+=s)for(var m=l,h=u,g=0;g<c;g++){var b=r[f+g],y=i[f+g],w=r[f+g+c],v=i[f+g+c],x=m*w-h*v;v=m*v+h*w,w=x,r[f+g]=b+w,i[f+g]=y+v,r[f+g+c]=b-w,i[f+g+c]=y-v,g!==s&&(x=l*m-u*h,h=l*h+u*m,m=x)}},m.prototype.guessLen13b=function t(a,n){var r=1|_Mathmax(n,a),o=1&r,s=0;for(r=0|r/2;r;r>>>=1)s++;return 1<<s+1+o},m.prototype.conjugate=function n(a,r,o){if(!(1>=o))for(var s=0,i;s<o/2;s++)i=a[s],a[s]=a[o-s-1],a[o-s-1]=i,i=r[s],r[s]=-r[o-s-1],r[o-s-1]=-i},m.prototype.normalize13b=function t(n,a){for(var r=0,o=0,i;o<a/2;o++)i=8192*_Mathround(n[2*o+1]/a)+_Mathround(n[2*o]/a)+r,n[o]=67108863&i,r=67108864>i?0:0|i/67108864;return n},m.prototype.convert13b=function t(n,a,r,s){for(var d=0,l=0;l<a;l++)d+=0|n[l],r[2*l]=8191&d,d>>>=13,r[2*l+1]=8191&d,d>>>=13;for(l=2*a;l<s;++l)r[l]=0;o(0==d),o(0==(-8192&d))},m.prototype.stub=function t(n){for(var a=Array(n),r=0;r<n;r++)a[r]=0;return a},m.prototype.mulp=function t(n,a,r){var o=2*this.guessLen13b(n.length,a.length),s=this.makeRBT(o),d=this.stub(o),l=Array(o),c=Array(o),u=Array(o),f=Array(o),m=Array(o),h=Array(o),g=r.words;g.length=o,this.convert13b(n.words,n.length,l,o),this.convert13b(a.words,a.length,f,o),this.transform(l,d,c,u,o,s),this.transform(f,d,m,h,o,s);for(var b=0,i;b<o;b++)i=c[b]*m[b]-u[b]*h[b],u[b]=c[b]*h[b]+u[b]*m[b],c[b]=i;return this.conjugate(c,u,o),this.transform(c,u,g,d,o,s),this.conjugate(g,d,o),this.normalize13b(g,o),r.negative=n.negative^a.negative,r.length=n.length+a.length,r.strip()},d.prototype.mul=function t(n){var a=new d(null);return a.words=Array(this.length+n.length),this.mulTo(n,a)},d.prototype.mulf=function t(n){var a=new d(null);return a.words=Array(this.length+n.length),f(this,n,a)},d.prototype.imul=function t(n){return this.clone().mulTo(n,this)},d.prototype.imuln=function t(n){o('number'==typeof n),o(67108864>n);for(var a=0,r=0;r<this.length;r++){var i=(0|this.words[r])*n,s=(67108863&i)+(67108863&a);a>>=26,a+=0|i/67108864,a+=s>>>26,this.words[r]=67108863&s}return 0!=a&&(this.words[r]=a,this.length++),this},d.prototype.muln=function t(n){return this.clone().imuln(n)},d.prototype.sqr=function t(){return this.mul(this)},d.prototype.isqr=function t(){return this.imul(this.clone())},d.prototype.pow=function t(n){var a=c(n);if(0===a.length)return new d(1);for(var r=this,o=0;o<a.length&&!(0!==a[o]);o++,r=r.sqr());if(++o<a.length)for(var i=r.sqr();o<a.length;o++,i=i.sqr())0!==a[o]&&(r=r.mul(i));return r},d.prototype.iushln=function t(n){o('number'==typeof n&&0<=n);var a=n%26,r=(n-a)/26,s=67108863>>>26-a<<26-a,d;if(0!=a){var i=0;for(d=0;d<this.length;d++){var l=this.words[d]&s,u=(0|this.words[d])-l<<a;this.words[d]=u|i,i=l>>>26-a}i&&(this.words[d]=i,this.length++)}if(0!=r){for(d=this.length-1;0<=d;d--)this.words[d+r]=this.words[d];for(d=0;d<r;d++)this.words[d]=0;this.length+=r}return this.strip()},d.prototype.ishln=function t(n){return o(0===this.negative),this.iushln(n)},d.prototype.iushrn=function t(n,a,d){o('number'==typeof n&&0<=n);var l;l=a?(a-a%26)/26:0;var c=n%26,r=_Mathmin((n-c)/26,this.length),s=67108863^67108863>>>c<<c,u=d;if(l-=r,l=_Mathmax(0,l),u){for(var f=0;f<r;f++)u.words[f]=this.words[f];u.length=r}if(0===r);else if(this.length>r)for(this.length-=r,f=0;f<this.length;f++)this.words[f]=this.words[f+r];else this.words[0]=0,this.length=1;var i=0;for(f=this.length-1;0<=f&&(0!=i||f>=l);f--){var m=0|this.words[f];this.words[f]=i<<26-c|m>>>c,i=m&s}return u&&0!=i&&(u.words[u.length++]=i),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},d.prototype.ishrn=function t(n,a,r){return o(0===this.negative),this.iushrn(n,a,r)},d.prototype.shln=function t(n){return this.clone().ishln(n)},d.prototype.ushln=function t(n){return this.clone().iushln(n)},d.prototype.shrn=function t(n){return this.clone().ishrn(n)},d.prototype.ushrn=function t(n){return this.clone().iushrn(n)},d.prototype.testn=function t(n){o('number'==typeof n&&0<=n);var a=n%26,r=(n-a)/26,i=1<<a;if(this.length<=r)return!1;var s=this.words[r];return!!(s&i)},d.prototype.imaskn=function t(n){o('number'==typeof n&&0<=n);var a=n%26,r=(n-a)/26;if(o(0===this.negative,'imaskn works only with positive numbers'),this.length<=r)return this;if(0!=a&&r++,this.length=_Mathmin(r,this.length),0!=a){var i=67108863^67108863>>>a<<a;this.words[this.length-1]&=i}return this.strip()},d.prototype.maskn=function t(n){return this.clone().imaskn(n)},d.prototype.iaddn=function t(n){return o('number'==typeof n),o(67108864>n),0>n?this.isubn(-n):0===this.negative?this._iaddn(n):1===this.length&&(0|this.words[0])<n?(this.words[0]=n-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(n),this.negative=1,this)},d.prototype._iaddn=function t(n){this.words[0]+=n;for(var a=0;a<this.length&&67108864<=this.words[a];a++)this.words[a]-=67108864,a===this.length-1?this.words[a+1]=1:this.words[a+1]++;return this.length=_Mathmax(this.length,a+1),this},d.prototype.isubn=function t(n){if(o('number'==typeof n),o(67108864>n),0>n)return this.iaddn(-n);if(0!==this.negative)return this.negative=0,this.iaddn(n),this.negative=1,this;if(this.words[0]-=n,1===this.length&&0>this.words[0])this.words[0]=-this.words[0],this.negative=1;else for(var a=0;a<this.length&&0>this.words[a];a++)this.words[a]+=67108864,this.words[a+1]-=1;return this.strip()},d.prototype.addn=function t(n){return this.clone().iaddn(n)},d.prototype.subn=function t(n){return this.clone().isubn(n)},d.prototype.iabs=function t(){return this.negative=0,this},d.prototype.abs=function t(){return this.clone().iabs()},d.prototype._ishlnsubmul=function t(n,a,r){var s=n.length+r,d;this._expand(s);var i=0,l;for(d=0;d<n.length;d++){l=(0|this.words[d+r])+i;var c=(0|n.words[d])*a;l-=67108863&c,i=(l>>26)-(0|c/67108864),this.words[d+r]=67108863&l}for(;d<this.length-r;d++)l=(0|this.words[d+r])+i,i=l>>26,this.words[d+r]=67108863&l;if(0==i)return this.strip();for(o(-1==i),i=0,d=0;d<this.length;d++)l=-(0|this.words[d])+i,i=l>>26,this.words[d]=67108863&l;return this.negative=1,this.strip()},d.prototype._wordDiv=function t(n,r){var o=this.length-n.length,s=this.clone(),l=n,c=0|l.words[l.length-1],u=this._countBits(c);o=26-u,0!=o&&(l=l.ushln(o),s.iushln(o),c=0|l.words[l.length-1]);var f=s.length-l.length,m;if('mod'!==r){m=new d(null),m.length=f+1,m.words=Array(m.length);for(var h=0;h<m.length;h++)m.words[h]=0}var i=s.clone()._ishlnsubmul(l,1,f);0===i.negative&&(s=i,m&&(m.words[f]=1));for(var g=f-1,b;0<=g;g--){for(b=67108864*(0|s.words[l.length+g])+(0|s.words[l.length+g-1]),b=_Mathmin(0|b/c,67108863),s._ishlnsubmul(l,b,g);0!==s.negative;)b--,s.negative=0,s._ishlnsubmul(l,1,g),s.isZero()||(s.negative^=1);m&&(m.words[g]=b)}return m&&m.strip(),s.strip(),'div'!==r&&0!=o&&s.iushrn(o),{div:m||null,mod:s}},d.prototype.divmod=function t(n,a,r){if(o(!n.isZero()),this.isZero())return{div:new d(0),mod:new d(0)};var i,s,l;return 0!==this.negative&&0===n.negative?(l=this.neg().divmod(n,a),'mod'!==a&&(i=l.div.neg()),'div'!==a&&(s=l.mod.neg(),r&&0!==s.negative&&s.iadd(n)),{div:i,mod:s}):0===this.negative&&0!==n.negative?(l=this.divmod(n.neg(),a),'mod'!==a&&(i=l.div.neg()),{div:i,mod:l.mod}):0==(this.negative&n.negative)?n.length>this.length||0>this.cmp(n)?{div:new d(0),mod:this}:1===n.length?'div'===a?{div:this.divn(n.words[0]),mod:null}:'mod'===a?{div:null,mod:new d(this.modn(n.words[0]))}:{div:this.divn(n.words[0]),mod:new d(this.modn(n.words[0]))}:this._wordDiv(n,a):(l=this.neg().divmod(n.neg(),a),'div'!==a&&(s=l.mod.neg(),r&&0!==s.negative&&s.isub(n)),{div:l.div,mod:s})},d.prototype.div=function t(n){return this.divmod(n,'div',!1).div},d.prototype.mod=function t(n){return this.divmod(n,'mod',!1).mod},d.prototype.umod=function t(n){return this.divmod(n,'mod',!0).mod},d.prototype.divRound=function t(n){var a=this.divmod(n);if(a.mod.isZero())return a.div;var r=0===a.div.negative?a.mod:a.mod.isub(n),i=n.ushrn(1),o=n.andln(1),s=r.cmp(i);return 0>s||1===o&&0===s?a.div:0===a.div.negative?a.div.iaddn(1):a.div.isubn(1)},d.prototype.modn=function t(n){o(67108863>=n);for(var a=67108864%n,r=0,s=this.length-1;0<=s;s--)r=(a*r+(0|this.words[s]))%n;return r},d.prototype.idivn=function t(n){o(67108863>=n);for(var a=0,r=this.length-1,i;0<=r;r--)i=(0|this.words[r])+67108864*a,this.words[r]=0|i/n,a=i%n;return this.strip()},d.prototype.divn=function t(n){return this.clone().idivn(n)},d.prototype.egcd=function t(n){o(0===n.negative),o(!n.isZero());var a=this,r=n.clone();a=0===a.negative?a.clone():a.umod(n);for(var s=new d(1),l=new d(0),c=new d(0),u=new d(1),f=0;a.isEven()&&r.isEven();)a.iushrn(1),r.iushrn(1),++f;for(var m=r.clone(),h=a.clone();!a.isZero();){for(var g=0,i=1;0==(a.words[0]&i)&&26>g;++g,i<<=1);if(0<g)for(a.iushrn(g);0<g--;)(s.isOdd()||l.isOdd())&&(s.iadd(m),l.isub(h)),s.iushrn(1),l.iushrn(1);for(var b=0,y=1;0==(r.words[0]&y)&&26>b;++b,y<<=1);if(0<b)for(r.iushrn(b);0<b--;)(c.isOdd()||u.isOdd())&&(c.iadd(m),u.isub(h)),c.iushrn(1),u.iushrn(1);0<=a.cmp(r)?(a.isub(r),s.isub(c),l.isub(u)):(r.isub(a),c.isub(s),u.isub(l))}return{a:c,b:u,gcd:r.iushln(f)}},d.prototype._invmp=function t(n){o(0===n.negative),o(!n.isZero());var r=this,a=n.clone();r=0===r.negative?r.clone():r.umod(n);for(var s=new d(1),l=new d(0),c=a.clone();0<r.cmpn(1)&&0<a.cmpn(1);){for(var u=0,i=1;0==(r.words[0]&i)&&26>u;++u,i<<=1);if(0<u)for(r.iushrn(u);0<u--;)s.isOdd()&&s.iadd(c),s.iushrn(1);for(var f=0,m=1;0==(a.words[0]&m)&&26>f;++f,m<<=1);if(0<f)for(a.iushrn(f);0<f--;)l.isOdd()&&l.iadd(c),l.iushrn(1);0<=r.cmp(a)?(r.isub(a),s.isub(l)):(a.isub(r),l.isub(s))}var h;return h=0===r.cmpn(1)?s:l,0>h.cmpn(0)&&h.iadd(n),h},d.prototype.gcd=function n(i){if(this.isZero())return i.abs();if(i.isZero())return this.abs();var o=this.clone(),a=i.clone();o.negative=0,a.negative=0;for(var s=0;o.isEven()&&a.isEven();s++)o.iushrn(1),a.iushrn(1);do{for(;o.isEven();)o.iushrn(1);for(;a.isEven();)a.iushrn(1);var d=o.cmp(a);if(0>d){var r=o;o=a,a=r}else if(0===d||0===a.cmpn(1))break;o.isub(a)}while(!0);return a.iushln(s)},d.prototype.invm=function t(n){return this.egcd(n).a.umod(n)},d.prototype.isEven=function t(){return 0==(1&this.words[0])},d.prototype.isOdd=function t(){return 1==(1&this.words[0])},d.prototype.andln=function t(n){return this.words[0]&n},d.prototype.bincn=function t(n){o('number'==typeof n);var a=n%26,r=(n-a)/26,s=1<<a;if(this.length<=r)return this._expand(r+1),this.words[r]|=s,this;for(var d=s,l=r,i;0!=d&&l<this.length;l++)i=0|this.words[l],i+=d,d=i>>>26,i&=67108863,this.words[l]=i;return 0!=d&&(this.words[l]=d,this.length++),this},d.prototype.isZero=function t(){return 1===this.length&&0===this.words[0]},d.prototype.cmpn=function t(n){var a=0>n;if(0!==this.negative&&!a)return-1;if(0===this.negative&&a)return 1;this.strip();var r;if(1<this.length)r=1;else{a&&(n=-n),o(67108863>=n,'Number is too big');var i=0|this.words[0];r=i===n?0:i<n?-1:1}return 0===this.negative?r:0|-r},d.prototype.cmp=function t(n){if(0!==this.negative&&0===n.negative)return-1;if(0===this.negative&&0!==n.negative)return 1;var a=this.ucmp(n);return 0===this.negative?a:0|-a},d.prototype.ucmp=function t(n){if(this.length>n.length)return 1;if(this.length<n.length)return-1;for(var r=0,o=this.length-1;0<=o;o--){var i=0|this.words[o],a=0|n.words[o];if(i!=a){i<a?r=-1:i>a&&(r=1);break}}return r},d.prototype.gtn=function t(n){return 1===this.cmpn(n)},d.prototype.gt=function t(n){return 1===this.cmp(n)},d.prototype.gten=function t(n){return 0<=this.cmpn(n)},d.prototype.gte=function t(n){return 0<=this.cmp(n)},d.prototype.ltn=function t(n){return-1===this.cmpn(n)},d.prototype.lt=function t(n){return-1===this.cmp(n)},d.prototype.lten=function t(n){return 0>=this.cmpn(n)},d.prototype.lte=function t(n){return 0>=this.cmp(n)},d.prototype.eqn=function t(n){return 0===this.cmpn(n)},d.prototype.eq=function t(n){return 0===this.cmp(n)},d.red=function t(n){return new v(n)},d.prototype.toRed=function t(n){return o(!this.red,'Already a number in reduction context'),o(0===this.negative,'red works only with positives'),n.convertTo(this)._forceRed(n)},d.prototype.fromRed=function t(){return o(this.red,'fromRed works only with numbers in reduction context'),this.red.convertFrom(this)},d.prototype._forceRed=function t(n){return this.red=n,this},d.prototype.forceRed=function t(n){return o(!this.red,'Already a number in reduction context'),this._forceRed(n)},d.prototype.redAdd=function t(n){return o(this.red,'redAdd works only with red numbers'),this.red.add(this,n)},d.prototype.redIAdd=function t(n){return o(this.red,'redIAdd works only with red numbers'),this.red.iadd(this,n)},d.prototype.redSub=function t(n){return o(this.red,'redSub works only with red numbers'),this.red.sub(this,n)},d.prototype.redISub=function t(n){return o(this.red,'redISub works only with red numbers'),this.red.isub(this,n)},d.prototype.redShl=function t(n){return o(this.red,'redShl works only with red numbers'),this.red.shl(this,n)},d.prototype.redMul=function t(n){return o(this.red,'redMul works only with red numbers'),this.red._verify2(this,n),this.red.mul(this,n)},d.prototype.redIMul=function t(n){return o(this.red,'redMul works only with red numbers'),this.red._verify2(this,n),this.red.imul(this,n)},d.prototype.redSqr=function t(){return o(this.red,'redSqr works only with red numbers'),this.red._verify1(this),this.red.sqr(this)},d.prototype.redISqr=function t(){return o(this.red,'redISqr works only with red numbers'),this.red._verify1(this),this.red.isqr(this)},d.prototype.redSqrt=function t(){return o(this.red,'redSqrt works only with red numbers'),this.red._verify1(this),this.red.sqrt(this)},d.prototype.redInvm=function t(){return o(this.red,'redInvm works only with red numbers'),this.red._verify1(this),this.red.invm(this)},d.prototype.redNeg=function t(){return o(this.red,'redNeg works only with red numbers'),this.red._verify1(this),this.red.neg(this)},d.prototype.redPow=function t(n){return o(this.red&&!n.red,'redPow(normalNum)'),this.red._verify1(this),this.red.pow(this,n)};var A={k256:null,p224:null,p192:null,p25519:null};h.prototype._tmp=function t(){var n=new d(null);return n.words=Array(_Mathceil(this.n/13)),n},h.prototype.ireduce=function t(n){var a=n,r;do this.split(a,this.tmp),a=this.imulK(a),a=a.iadd(this.tmp),r=a.bitLength();while(r>this.n);var i=r<this.n?-1:a.ucmp(this.p);return 0===i?(a.words[0]=0,a.length=1):0<i?a.isub(this.p):a.strip(),a},h.prototype.split=function t(n,a){n.iushrn(this.n,0,a)},h.prototype.imulK=function t(n){return n.imul(this.k)},r(g,h),g.prototype.split=function t(n,a){for(var r=4194303,o=_Mathmin(n.length,9),s=0;s<o;s++)a.words[s]=n.words[s];if(a.length=o,9>=n.length)return n.words[0]=0,void(n.length=1);var i=n.words[9];for(a.words[a.length++]=i&r,s=10;s<n.length;s++){var d=0|n.words[s];n.words[s-10]=(d&r)<<4|i>>>22,i=d}i>>>=22,n.words[s-10]=i,n.length-=0===i&&10<n.length?10:9},g.prototype.imulK=function t(n){n.words[n.length]=0,n.words[n.length+1]=0,n.length+=2;for(var a=0,r=0,i;r<n.length;r++)i=0|n.words[r],a+=977*i,n.words[r]=67108863&a,a=64*i+(0|a/67108864);return 0===n.words[n.length-1]&&(n.length--,0===n.words[n.length-1]&&n.length--),n},r(b,h),r(y,h),r(w,h),w.prototype.imulK=function t(n){for(var a=0,r=0;r<n.length;r++){var i=19*(0|n.words[r])+a,o=67108863&i;i>>>=26,n.words[r]=o,a=i}return 0!=a&&(n.words[n.length++]=a),n},d._prime=function t(n){if(A[n])return A[n];var t;if('k256'===n)t=new g;else if('p224'===n)t=new b;else if('p192'===n)t=new y;else if('p25519'===n)t=new w;else throw new Error('Unknown prime '+n);return A[n]=t,t},v.prototype._verify1=function t(n){o(0===n.negative,'red works only with positives'),o(n.red,'red works only with red numbers')},v.prototype._verify2=function t(n,a){o(0==(n.negative|a.negative),'red works only with positives'),o(n.red&&n.red===a.red,'red works only with red numbers')},v.prototype.imod=function t(n){return this.prime?this.prime.ireduce(n)._forceRed(this):n.umod(this.m)._forceRed(this)},v.prototype.neg=function t(n){return n.isZero()?n.clone():this.m.sub(n)._forceRed(this)},v.prototype.add=function t(n,a){this._verify2(n,a);var r=n.add(a);return 0<=r.cmp(this.m)&&r.isub(this.m),r._forceRed(this)},v.prototype.iadd=function t(n,a){this._verify2(n,a);var r=n.iadd(a);return 0<=r.cmp(this.m)&&r.isub(this.m),r},v.prototype.sub=function t(n,a){this._verify2(n,a);var r=n.sub(a);return 0>r.cmpn(0)&&r.iadd(this.m),r._forceRed(this)},v.prototype.isub=function t(n,a){this._verify2(n,a);var r=n.isub(a);return 0>r.cmpn(0)&&r.iadd(this.m),r},v.prototype.shl=function t(n,a){return this._verify1(n),this.imod(n.ushln(a))},v.prototype.imul=function t(n,a){return this._verify2(n,a),this.imod(n.imul(a))},v.prototype.mul=function t(n,a){return this._verify2(n,a),this.imod(n.mul(a))},v.prototype.isqr=function t(n){return this.imul(n,n.clone())},v.prototype.sqr=function t(n){return this.mul(n,n)},v.prototype.sqrt=function n(l){if(l.isZero())return l.clone();var a=this.m.andln(3);if(o(1==a%2),3===a){var u=this.m.add(new d(1)).iushrn(2);return this.pow(l,u)}for(var f=this.m.subn(1),h=0;!f.isZero()&&0===f.andln(1);)h++,f.iushrn(1);o(!f.isZero());var s=new d(1).toRed(this),g=s.redNeg(),y=this.m.subn(1).iushrn(1),w=this.m.bitLength();for(w=new d(2*w*w).toRed(this);0!==this.pow(w,y).cmp(g);)w.redIAdd(g);for(var v=this.pow(w,f),c=this.pow(l,f.addn(1).iushrn(1)),r=this.pow(l,f),t=h;0!==r.cmp(s);){for(var m=r,x=0;0!==m.cmp(s);x++)m=m.redSqr();o(x<t);var i=this.pow(v,new d(1).iushln(t-x-1));c=c.redMul(i),v=i.redSqr(),r=r.redMul(v),t=x}return c},v.prototype.invm=function t(n){var a=n._invmp(this.m);return 0===a.negative?this.imod(a):(a.negative=0,this.imod(a).redNeg())},v.prototype.pow=function t(n,a){if(a.isZero())return new d(1).toRed(this);if(0===a.cmpn(1))return n.clone();var r=4,o=Array(1<<r);o[0]=new d(1).toRed(this),o[1]=n;for(var s=2;s<o.length;s++)o[s]=this.mul(o[s-1],n);var i=o[0],l=0,c=0,u=a.bitLength()%26;for(0==u&&(u=26),s=a.length-1;0<=s;s--){for(var f=a.words[s],m=u-1,h;0<=m;m--){if(h=1&f>>m,i!==o[0]&&(i=this.sqr(i)),0==h&&0==l){c=0;continue}l<<=1,l|=h,c++,c!=r&&(0!==s||0!==m)||(i=this.mul(i,o[l]),c=0,l=0)}u=26}return i},v.prototype.convertTo=function t(n){var a=n.umod(this.m);return a===n?a.clone():a},v.prototype.convertFrom=function t(n){var a=n.clone();return a.red=null,a},d.mont=function t(n){return new x(n)},r(x,v),x.prototype.convertTo=function t(n){return this.imod(n.ushln(this.shift))},x.prototype.convertFrom=function t(n){var a=this.imod(n.mul(this.rinv));return a.red=null,a},x.prototype.imul=function n(r,a){if(r.isZero()||a.isZero())return r.words[0]=0,r.length=1,r;var i=r.imul(a),t=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=i.isub(t).iushrn(this.shift),s=o;return 0<=o.cmp(this.m)?s=o.isub(this.m):0>o.cmpn(0)&&(s=o.iadd(this.m)),s._forceRed(this)},x.prototype.mul=function n(r,a){if(r.isZero()||a.isZero())return new d(0)._forceRed(this);var i=r.mul(a),t=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=i.isub(t).iushrn(this.shift),s=o;return 0<=o.cmp(this.m)?s=o.isub(this.m):0>o.cmpn(0)&&(s=o.iadd(this.m)),s._forceRed(this)},x.prototype.invm=function t(n){var a=this.imod(n._invmp(this.m).mul(this.r2));return a._forceRed(this)}})('undefined'==typeof t||t,this)}).call(n,a(9)(t))},function(t,n,a){'use strict';function r(t){return t&&t.__esModule?t:{default:t}}function i(t){var n=this;return function(){var a=(0,u.default)(l.default.mark(function a(r){var i;return l.default.wrap(function n(a){for(;1;)switch(a.prev=a.next){case 0:return a.next=2,(0,h.updateStorage)(t,function(t){return(0,s.default)({},t,{session:r})});case 2:return i=a.sent,a.abrupt('return',i.session);case 4:case'end':return a.stop();}},a,n)}));return function(t){return a.apply(this,arguments)}}()}Object.defineProperty(n,'__esModule',{value:!0}),n.clearSession=n.getSession=void 0;var o=a(35),s=r(o),d=a(6),l=r(d),c=a(7),u=r(c),f=n.getSession=function(){var t=(0,u.default)(l.default.mark(function t(n){var a;return l.default.wrap(function t(r){for(;1;)switch(r.prev=r.next){case 0:return r.next=2,(0,h.getData)(n);case 2:return a=r.sent,r.abrupt('return',a.session||null);case 4:case'end':return r.stop();}},t,this)}));return function n(a){return t.apply(this,arguments)}}(),m=n.clearSession=function(){var t=(0,u.default)(l.default.mark(function t(n){return l.default.wrap(function t(a){for(;1;)switch(a.prev=a.next){case 0:return a.next=2,(0,h.updateStorage)(n,function(t){return(0,s.default)({},t,{session:null})});case 2:case'end':return a.stop();}},t,this)}));return function n(a){return t.apply(this,arguments)}}();n.saveSession=i;var h=a(98)},function(t,n,a){'use strict';function r(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(n[a]=t[a]);return n.default=t,n}function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,'__esModule',{value:!0}),n.fetchWithCredentials=n.requiresAuth=n.getRegisteredRp=n.logout=n.currentSession=n.login=void 0;var o=a(35),s=i(o),d=a(6),l=i(d),c=a(7),u=i(c),f=function(){var t=(0,u.default)(l.default.mark(function t(n){var a,r;return l.default.wrap(function t(i){for(;1;)switch(i.prev=i.next){case 0:return i.next=2,(0,_.getData)(n);case 2:if(a=i.sent,r=a.rpConfig,!r){i.next=9;break}return r.store=n,i.abrupt('return',y.default.from(r));case 9:return i.abrupt('return',null);case 10:case'end':return i.stop();}},t,this)}));return function n(a){return t.apply(this,arguments)}}(),m=function(){var t=(0,u.default)(l.default.mark(function t(n,a,r){return l.default.wrap(function t(a){for(;1;)switch(a.prev=a.next){case 0:return a.next=2,(0,_.updateStorage)(n,function(t){return(0,s.default)({},t,{rpConfig:r})});case 2:return a.abrupt('return',r);case 3:case'end':return a.stop();}},t,this)}));return function n(a,r,i){return t.apply(this,arguments)}}();a(39);var h=a(88),g=r(h),b=a(187),y=i(b),w=a(206),v=i(w),x=a(145),_=a(98),k=n.login=function(){var t=(0,u.default)(l.default.mark(function t(n,a){var r;return l.default.wrap(function t(i){for(;1;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,T(n,a);case 3:return r=i.sent,i.next=6,I(a.storage);case 6:return i.abrupt('return',function(){return S(r,a)});case 9:return i.prev=9,i.t0=i['catch'](0),console.warn('Error logging in with WebID-OIDC'),console.error(i.t0),i.abrupt('return',null);case 14:case'end':return i.stop();}},t,void 0,[[0,9]])}));return function n(a,r){return t.apply(this,arguments)}}(),C=n.currentSession=function(){var t=(0,u.default)(l.default.mark(function t(){var n=0<arguments.length&&arguments[0]!==void 0?arguments[0]:(0,_.defaultStorage)(),a,r,i,o,s,d,c,u,m;return l.default.wrap(function t(l){for(;1;)switch(l.prev=l.next){case 0:return l.prev=0,l.next=3,f(n);case 3:if(a=l.sent,a){l.next=6;break}return l.abrupt('return',null);case 6:if(r=(0,x.currentUrl)(),r&&r.includes('#')){l.next=9;break}return l.abrupt('return',null);case 9:return l.next=11,(0,_.getData)(n);case 11:return i=l.sent,l.next=14,a.validateResponse(r,i);case 14:if(o=l.sent,o){l.next=17;break}return l.abrupt('return',null);case 17:return l.next=19,N(n);case 19:return s=o.idp,d=o.idToken,c=o.accessToken,u=o.clientId,m=o.sessionKey,l.abrupt('return',{authType:'WebID-OIDC',webId:o.decoded.payload.sub,idp:s,idToken:d,accessToken:c,clientId:u,sessionKey:m});case 23:return l.prev=23,l.t0=l['catch'](0),console.warn('Error finding a WebID-OIDC session'),console.error(l.t0),l.abrupt('return',null);case 28:case'end':return l.stop();}},t,void 0,[[0,23]])}));return function n(){return t.apply(this,arguments)}}(),E=n.logout=function t(n){return f(n).then(function(t){return t?t.logout():void 0}).catch(function(t){console.warn('Error logging out of the WebID-OIDC session'),console.error(t)})},T=n.getRegisteredRp=function t(n,a){return f(a.storage).then(function(t){return t&&t.provider.url===n?t:A(n,a).then(function(t){return m(a.storage,n,t)})})},A=function t(n,a){var r=a.storage,i=a.callbackUri,o='id_token token',s={issuer:n,grant_types:['implicit'],redirect_uris:[i],response_types:[o],scope:'openid profile'},d={defaults:{authenticate:{redirect_uri:i,response_type:o}},store:r};return y.default.register(n,s,d)},S=function(){var t=(0,u.default)(l.default.mark(function t(n,a){var r=a.callbackUri,i=a.storage,o,s;return l.default.wrap(function t(a){for(;1;)switch(a.prev=a.next){case 0:return a.next=2,(0,_.getData)(i);case 2:return o=a.sent,a.next=5,n.createRequest({redirect_uri:r},o);case 5:return s=a.sent,a.next=8,(0,_.updateStorage)(i,function(){return o});case 8:return a.abrupt('return',(0,x.navigateTo)(s));case 9:case'end':return a.stop();}},t,void 0)}));return function n(a,r){return t.apply(this,arguments)}}(),I=function t(n){return(0,_.updateStorage)(n,function(t){return(0,s.default)({},t,{appHashFragment:window.location.hash})})},N=function t(n){return(0,_.updateStorage)(n,function(t){return window.location.hash=t.appHashFragment,delete t.appHashFragment,t})},j=n.requiresAuth=function t(n){if(401!==n.status)return!1;var a=n.headers.get('www-authenticate');if(!a)return!1;var r=g.parse(a);return'Bearer'===r.scheme&&r.params&&'openid webid'===r.params.scope},L=n.fetchWithCredentials=function t(n){return function(){var t=(0,u.default)(l.default.mark(function t(a,r){var i,o;return l.default.wrap(function t(d){for(;1;)switch(d.prev=d.next){case 0:return d.next=2,v.default.issueFor(a,n);case 2:return i=d.sent,o=(0,s.default)({},r,{headers:(0,s.default)({},r&&r.headers?r.headers:{},{authorization:'Bearer '+i})}),d.abrupt('return',fetch(a,o));case 5:case'end':return d.stop();}},t,void 0)}));return function(n,a){return t.apply(this,arguments)}}()}},function(t,n,a){'use strict';Object.defineProperty(n,'__esModule',{value:!0});var r=n.currentUrl=function t(){return window.location.href},i=n.currentUrlNoParams=function t(){return window.location.origin+window.location.pathname},o=n.navigateTo=function t(n){window.location.href=n},s=n.originOf=function t(n){return new URL(n).origin}},function(t,n,a){'use strict';function r(t,n){if(!(t instanceof n))throw new TypeError('Cannot call a class as a function')}var i=a(10),o=function t(){r(this,t)};o.boolean=new i('http://www.w3.org/2001/XMLSchema#boolean'),o.dateTime=new i('http://www.w3.org/2001/XMLSchema#dateTime'),o.decimal=new i('http://www.w3.org/2001/XMLSchema#decimal'),o.double=new i('http://www.w3.org/2001/XMLSchema#double'),o.integer=new i('http://www.w3.org/2001/XMLSchema#integer'),o.langString=new i('http://www.w3.org/1999/02/22-rdf-syntax-ns#langString'),o.string=new i('http://www.w3.org/2001/XMLSchema#string'),t.exports=o},function(t,n,a){'use strict';function r(t,n){if(!(t instanceof n))throw new TypeError('Cannot call a class as a function')}function i(t,n){if(!t)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return n&&('object'==typeof n||'function'==typeof n)?n:t}function o(t,n){if('function'!=typeof n&&null!==n)throw new TypeError('Super expression must either be null or a function, not '+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}var s=function(){function t(t,n){for(var a=0,r;a<n.length;a++)r=n[a],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}return function(n,a,r){return a&&t(n.prototype,a),r&&t(n,r),n}}(),d=a(41),l=a(49),c=a(73),u=a(50),f=a(42),m=a(10),h=a(17),g=a(100),b=a(75),y=a(76),w=function(t){function n(t,a,o,s){r(this,n);var d=i(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return d.termType=n.termType,d.statements=t||[],d.constraints=a||[],d.initBindings=o||[],d.optional=s||[],d}return o(n,t),s(n,[{key:'add',value:function t(n,a,r,i){return this.statements.push(new b(n,a,r,i))}},{key:'addStatement',value:function t(n){return this.statements.push(n)}},{key:'bnode',value:function t(n){return new d(n)}},{key:'bottomTypeURIs',value:function t(n){var a,r,o,s,i,d,l,c,u;for(i in a=[],n)if(n.hasOwnProperty(i)){for(u=n[i],c=this.each(void 0,this.sym('http://www.w3.org/2000/01/rdf-schema#subClassOf'),this.sym(i)),r=!0,s=0,d=c.length;s<d;s++)if(o=c[s],l=o.uri,l in n){r=!1;break}r&&(a[i]=u)}return a}},{key:'collection',value:function t(){return new c}},{key:'each',value:function t(n,a,r,o){var s=[],d=this.statementsMatching(n,a,r,o,!1),c,u,i,l,f,m,h,g,b;if(null==n)for(u=0,m=d.length;u<m;u++)c=d[u],s.push(c.subject);else if(null==a)for(i=0,h=d.length;i<h;i++)c=d[i],s.push(c.predicate);else if(null==r)for(l=0,g=d.length;l<g;l++)c=d[l],s.push(c.object);else if(null==o)for(f=0,b=d.length;f<b;f++)c=d[f],s.push(c.why);return s}},{key:'equals',value:function t(n){return!!n&&this.hashString()===n.hashString()}},{key:'findMembersNT',value:function n(a){var r,i,o,s,d,l,c,f,m,h,g,b,y,w,v,x,_,k,C,E,t;for(E in k={},k[a.toNT()]=!0,m={},b=this.transitiveClosure(k,this.sym('http://www.w3.org/2000/01/rdf-schema#subClassOf'),!0),b)if(b.hasOwnProperty(E)){for(y=this.statementsMatching(void 0,this.sym('http://www.w3.org/1999/02/22-rdf-syntax-ns#type'),this.fromNT(E)),r=0,o=y.length;r<o;r++)C=y[r],m[C.subject.toNT()]=C;for(w=this.each(void 0,this.sym('http://www.w3.org/2000/01/rdf-schema#domain'),this.fromNT(E)),i=0,s=w.length;i<s;i++)for(h=w[i],v=this.statementsMatching(void 0,h),(f=0,d=v.length);f<d;f++)C=v[f],m[C.subject.toNT()]=C;for(x=this.each(void 0,this.sym('http://www.w3.org/2000/01/rdf-schema#range'),this.fromNT(E)),g=0,l=x.length;g<l;g++)for(h=x[g],_=this.statementsMatching(void 0,h),(t=0,c=_.length);t<c;t++)C=_[t],m[C.object.toNT()]=C}return m}},{key:'findMemberURIs',value:function t(n){return this.NTtoURI(this.findMembersNT(n))}},{key:'findSubClassesNT',value:function t(n){var a={};return a[n.toNT()]=!0,this.transitiveClosure(a,this.sym('http://www.w3.org/2000/01/rdf-schema#subClassOf'),!0)}},{key:'findSuperClassesNT',value:function t(n){var a={};return a[n.toNT()]=!0,this.transitiveClosure(a,this.sym('http://www.w3.org/2000/01/rdf-schema#subClassOf'),!1)}},{key:'findTypesNT',value:function t(n){var a,r,i,o,s,d,l,c,u,f,m,h,g,b,y,w,v;for(m='http://www.w3.org/1999/02/22-rdf-syntax-ns#type',v=[],h=this.statementsMatching(n,void 0,void 0),(r=0,o=h.length);r<o;r++)if(w=h[r],w.predicate.uri===m)v[w.object.toNT()]=w;else for(g=this.each(w.predicate,this.sym('http://www.w3.org/2000/01/rdf-schema#domain')),i=0,s=g.length;i<s;i++)f=g[i],v[f.toNT()]=w;for(b=this.statementsMatching(void 0,void 0,n),c=0,d=b.length;c<d;c++)for(w=b[c],y=this.each(w.predicate,this.sym('http://www.w3.org/2000/01/rdf-schema#range')),(u=0,l=y.length);u<l;u++)a=y[u],v[a.toNT()]=w;return this.transitiveClosure(v,this.sym('http://www.w3.org/2000/01/rdf-schema#subClassOf'),!1)}},{key:'findTypeURIs',value:function t(n){return this.NTtoURI(this.findTypesNT(n))}},{key:'connectedStatements',value:function t(n,a,r){r=r||[];for(var i=[n],o=[],s=[],d=[],l=this,c=function t(n){var c=function t(n){'BlankNode'!==n.termType||o[n.value]||(o[n.value]=!0,i.push(n))},u=l.statementsMatching(null,null,n,a).concat(l.statementsMatching(n,null,null,a));u=u.filter(function(t){if(r[t.predicate.uri])return!1;var n=t.toNT();return!s[n]&&(s[n]=!0,!0)}),u.forEach(function(t,n){c(t.subject),c(t.object)}),d=d.concat(u)};i.length;)c(i.shift());return d}},{key:'formula',value:function t(){return new n}},{key:'fromNT',value:function t(n){var a,r,i,o;switch(n[0]){case'<':return this.sym(n.slice(1,-1));case'"':if(i=void 0,a=void 0,r=n.lastIndexOf('"'),r<n.length-1)if('@'===n[r+1])i=n.slice(r+2);else if('^^'===n.slice(r+1,r+3))a=this.fromNT(n.slice(r+3));else throw new Error('Can\'t convert string from NT: '+n);return n=n.slice(1,r),n=n.replace(/\\"/g,'"'),n=n.replace(/\\n/g,'\n'),n=n.replace(/\\\\/g,'\\'),this.literal(n,i,a);case'_':return new d(n.slice(2));case'?':return new y(n.slice(1));}throw new Error('Can\'t convert from NT: '+n)}},{key:'holds',value:function t(n,a,r,o){var d;if(1===arguments.length){if(!n)return!0;if(n instanceof Array){for(d=0;d<n.length;d++)if(!this.holds(n[d]))return!1;return!0}if(n instanceof b)return this.holds(n.subject,n.predicate,n.object,n.why);if(n.statements)return this.holds(n.statements)}var i=this.anyStatementMatching(n,a,r,o);return null!=i}},{key:'holdsStatement',value:function t(n){return this.holds(n.subject,n.predicate,n.object,n.why)}},{key:'list',value:function t(n){var a=new c;return n.forEach(function(t){a.append(t)}),a}},{key:'literal',value:function t(n,a,r){return new u(''+n,a,r)}},{key:'NTtoURI',value:function n(a){var t={},r,i;for(r in a)a.hasOwnProperty(r)&&(i=a[r],'<'===r[0]&&(t[r.slice(1,-1)]=i));return t}},{key:'serialize',value:function t(n,a,r){var i,o,s;switch(s=g(this),s.suggestNamespaces(this.namespaces),s.setBase(n),o=r?this.statementsMatching(void 0,void 0,void 0,r):this.statements,null==a?'text/n3':a){case'application/rdf+xml':i=s.statementsToXML(o);break;case'text/n3':case'text/turtle':i=s.statementsToN3(o);break;default:throw new Error('serialize: Content-type '+a+' not supported.');}return i}},{key:'substitute',value:function t(a){var r=this.statements.map(function(t){return t.substitute(a)});console.log('Formula subs statmnts:'+r);var i=new n;return i.add(r),console.log('indexed-form subs formula:'+i),i}},{key:'sym',value:function t(n,a){if(a)throw new Error('This feature (kb.sym with 2 args) is removed. Do not assume prefix mappings.');return new m(n)}},{key:'the',value:function t(n,a,r,i){var o=this.any(n,a,r,i);return null==o&&f.error('No value found for the() {'+n+' '+a+' '+r+'}.'),o}},{key:'transitiveClosure',value:function n(a,r,o){var d={},l,c,i,u,s,f;Object.assign(d,a);for(var t={};!0;){if(f=function(){for(var t in d)if(d.hasOwnProperty(t))return t}(),null==f)return t;for(s=o?this.each(void 0,r,this.fromNT(f)):this.each(this.fromNT(f),r),c=0,i=s.length;c<i;c++)(l=s[c],u=l.toNT(),!(u in t))&&(u in d||(d[u]=d[f]));t[f]=d[f],delete d[f]}}},{key:'topTypeURIs',value:function t(a){var r,i,o,s,d,n,l,c;for(o in l=[],a)if(a.hasOwnProperty(o)){for(c=a[o],d=0,n=this.each(this.sym(o),this.sym('http://www.w3.org/2000/01/rdf-schema#subClassOf')),(r=0,s=n.length);r<s;r++)if(i=n[r],'http://www.w3.org/2000/01/rdf-schema#Resource'!==i.uri){d++;break}d||(l[o]=c)}return l['http://www.w3.org/2000/01/rdf-schema#Resource']&&delete l['http://www.w3.org/2000/01/rdf-schema#Resource'],l['http://www.w3.org/2002/07/owl#Thing']&&delete l['http://www.w3.org/2002/07/owl#Thing'],l}},{key:'toString',value:function t(){return'{'+this.statements.join('\n')+'}'}},{key:'whether',value:function t(n,a,r,i){return this.statementsMatching(n,a,r,i,!1).length}}]),n}(h);w.termType='Graph',w.prototype.classOrder=l.Graph,w.prototype.isVar=0,w.prototype.ns=a(59),w.prototype.variable=function(t){return new y(t)},t.exports=w},function(t,n,a){'use strict';function r(t,n){var a=d.Parser(),r=d.Writer({format:'N-Quads'}),i;o.waterfall([function(n){a.parse(t,n)},function(t,n,a){null!==t&&r.addTriple(t),'function'==typeof a&&r.end(a)},function(t,n){try{s.fromRDF(t,{format:'application/nquads'},n)}catch(t){n(t)}},function(t,a){i=JSON.stringify(t),n(null,i)}],function(t,a){n(t,i)})}function i(t,n){var a=d.Parser(),r=d.Writer({format:'N-Quads'}),i;o.waterfall([function(n){a.parse(t,n)},function(t,n,a){null!==t&&r.addTriple(t),'function'==typeof a&&r.end(a)},function(t,a){i=t,n(null,i)}],function(t,a){n(t,i)})}t.exports.convertToJson=r,t.exports.convertToNQuads=i;var o=a(255),s=a(149),d=a(151)},function(t,n,a){(function(r,i,o,s){var d,l;/**
 * A JavaScript implementation of the JSON-LD API.
 *
 * @author Dave Longley
 *
 * @license BSD 3-Clause License
 * Copyright (c) 2011-2015 Digital Bazaar, Inc.
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * Redistributions of source code must retain the above copyright notice,
 * this list of conditions and the following disclaimer.
 *
 * Redistributions in binary form must reproduce the above copyright
 * notice, this list of conditions and the following disclaimer in the
 * documentation and/or other materials provided with the distribution.
 *
 * Neither the name of the Digital Bazaar, Inc. nor the names of its
 * contributors may be used to endorse or promote products derived from
 * this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
 * IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED
 * TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A
 * PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 * HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
 * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */(function(){var c='undefined'!=typeof r&&r.versions&&r.versions.node,u=!c&&('undefined'!=typeof window||'undefined'!=typeof self);u&&'undefined'==typeof i&&('undefined'==typeof window?'undefined'==typeof self?'undefined'!=typeof $&&(i=$):i=self:i=window);var f=function(t){function n(){}function d(t){for(var n=[],a=Object.keys(t).sort(),r=0;r<a.length;++r){var i=a[r],o=t[i];H(o)||(o=[o]);for(var s=0,d;s<o.length;++s)if(d=o[s],null!==d){if(!V(d))throw new Pe('Invalid JSON-LD syntax; language map values must be strings.','jsonld.SyntaxError',{code:'invalid language map value',languageMap:t});n.push({"@value":d,"@language":i.toLowerCase()})}}return n}function l(t,n){if(H(n))for(var a=0;a<n.length;++a)n[a]=l(t,n[a]);else if(te(n))n['@list']=l(t,n['@list']);else if(q(n)){ne(n)&&(n['@id']=t.getId(n['@id']));for(var r=Object.keys(n).sort(),i=0,o;i<r.length;++i)o=r[i],'@id'!==o&&(n[o]=l(t,n[o]))}return n}function f(n,a,r){if(null===r||void 0===r)return null;var i=P(n,a,{vocab:!0});if('@id'===i)return P(n,r,{base:!0});if('@type'===i)return P(n,r,{vocab:!0,base:!0});var o=t.getContextValue(n,a,'@type');if('@id'===o||'@graph'===i&&V(r))return{"@id":P(n,r,{base:!0})};if('@vocab'===o)return{"@id":P(n,r,{vocab:!0,base:!0})};if(F(i))return r;var s={};if(null!==o)s['@type']=o;else if(V(r)){var d=t.getContextValue(n,a,'@language');null!==d&&(s['@language']=d)}return-1===['boolean','number','string'].indexOf(typeof r)&&(r=r.toString()),s['@value']=r,s}function m(t,n,a){for(var r=[],o=Object.keys(t).sort(),s=0;s<o.length;++s)for(var i=o[s],d=t[i],l=Object.keys(d).sort(),c=0;c<l.length;++c){var u=l[c],f=d[u];if('@type'===u)u=Ie;else if(F(u))continue;for(var m=0;m<f.length;++m){var b=f[m],y={};if(y.type=0===i.indexOf('_:')?'blank node':'IRI',y.value=i,!!ae(i)){var w={type:0===u.indexOf('_:')?'blank node':'IRI',value:u};if(ae(u)&&('blank node'!==w.type||a.produceGeneralizedRdf))if(te(b))h(b['@list'],n,y,w,r);else{var v=g(b);v&&r.push({subject:y,predicate:w,object:v})}}}}return r}function h(t,n,a,r,o){for(var s={type:'IRI',value:Te},d={type:'IRI',value:Ae},l={type:'IRI',value:Se},c=0;c<t.length;++c){var i=t[c],u={type:'blank node',value:n.getId()};o.push({subject:a,predicate:r,object:u}),a=u,r=s;var f=g(i);f&&o.push({subject:a,predicate:r,object:f}),r=d}o.push({subject:a,predicate:r,object:l})}function g(t){var n={};if(ee(t)){n.type='literal';var a=t['@value'],r=t['@type']||null;X(a)?(n.value=a.toString(),n.datatype=r||ve):J(a)||r===xe?(!J(a)&&(a=parseFloat(a)),n.value=a.toExponential(15).replace(/(\d)0*e\+?/,'$1E'),n.datatype=r||xe):G(a)?(n.value=a.toFixed(0),n.datatype=r||_e):'@language'in t?(n.value=a,n.datatype=r||Re,n.language=t['@language']):(n.value=a,n.datatype=r||ke)}else{var i=q(t)?t['@id']:t;n.type=0===i.indexOf('_:')?'blank node':'IRI',n.value=i}return'IRI'!==n.type||ae(n.value)?n:null}function b(t,n){if('IRI'===t.type||'blank node'===t.type)return{"@id":t.value};var a={"@value":t.value};if(t.language)a['@language']=t.language;else{var r=t.datatype;if(r||(r=ke),n){if(r===ve)'true'===a['@value']?a['@value']=!0:'false'===a['@value']&&(a['@value']=!1);else if(K(a['@value']))if(r===_e){var o=parseInt(a['@value'],10);o.toFixed(0)===a['@value']&&(a['@value']=o)}else r===xe&&(a['@value']=parseFloat(a['@value']));-1===[ve,_e,xe,ke].indexOf(r)&&(a['@type']=r)}else r!==ke&&(a['@type']=r)}return a}function y(t,n){for(var a=['subject','predicate','object'],r=0,i;r<a.length;++r)if(i=a[r],t[i].type!==n[i].type||t[i].value!==n[i].value)return!1;return t.object.language===n.object.language&&t.object.datatype===n.object.datatype}function w(n,a,r,s,d,l){if(H(n)){for(var c=0;c<n.length;++c)w(n[c],a,r,s,void 0,l);return}if(!q(n))return void(l&&l.push(n));if(ee(n)){if('@type'in n){var i=n['@type'];0===i.indexOf('_:')&&(n['@type']=i=s.getId(i))}return void(l&&l.push(n))}if('@type'in n)for(var u=n['@type'],c=0,i;c<u.length;++c)i=u[c],0===i.indexOf('_:')&&s.getId(i);Y(d)&&(d=ne(n)?s.getId(n['@id']):n['@id']),l&&l.push({"@id":d});var f=a[r],m=f[d]=f[d]||{};m['@id']=d;for(var h=Object.keys(n).sort(),b=0,y;b<h.length;++b)if(y=h[b],'@id'!==y){if('@reverse'===y){var v={"@id":d},x=n['@reverse'];for(var _ in x)for(var k=x[_],C=0;C<k.length;++C){var E=k[C],T=E['@id'];ne(E)&&(T=s.getId(T)),w(E,a,r,s,T),t.addValue(f[T],_,v,{propertyIsArray:!0,allowDuplicate:!1})}continue}if('@graph'===y){d in a||(a[d]={});var A='@merged'===r?r:d;w(n[y],a,A,s);continue}if('@type'!==y&&F(y)){if('@index'===y&&y in m&&(n[y]!==m[y]||n[y]['@id']!==m[y]['@id']))throw new Pe('Invalid JSON-LD syntax; conflicting @index property detected.','jsonld.SyntaxError',{code:'conflicting indexes',subject:m});m[y]=n[y];continue}var g=n[y];if(0===y.indexOf('_:')&&(y=s.getId(y)),0===g.length){t.addValue(m,y,[],{propertyIsArray:!0});continue}for(var S=0,I;S<g.length;++S)if(I=g[S],'@type'===y&&(I=0===I.indexOf('_:')?s.getId(I):I),Z(I)||Q(I)){var o=ne(I)?s.getId(I['@id']):I['@id'];t.addValue(m,y,{"@id":o},{propertyIsArray:!0,allowDuplicate:!1}),w(I,a,r,s,o)}else if(te(I)){var N=[];w(I['@list'],a,r,s,d,N),I={"@list":N},t.addValue(m,y,I,{propertyIsArray:!0,allowDuplicate:!1})}else w(I,a,r,s,d),t.addValue(m,y,I,{propertyIsArray:!0,allowDuplicate:!1})}}function v(t){for(var n=t['@default'],a=Object.keys(t).sort(),r=0,i;r<a.length;++r)if(i=a[r],'@default'!==i){var o=t[i],s=n[i];s?!('@graph'in s)&&(s['@graph']=[]):n[i]=s={"@id":i,"@graph":[]};for(var d=s['@graph'],l=Object.keys(o).sort(),c=0,u;c<l.length;++c)u=o[l[c]],Q(u)||d.push(u)}return n}function x(t,a,r,s,d){E(r),r=r[0];for(var l=t.options,c={embed:C(r,l,'embed'),explicit:C(r,l,'explicit'),requireAll:C(r,l,'requireAll')},u=T(t,a,r,c),f=Object.keys(u).sort(),m=0;m<f.length;++m){var h=f[m],g=u[h];if('@link'===c.embed&&h in t.link){I(s,d,t.link[h]);continue}null===d&&(t.uniqueEmbeds={});var b={};if(b['@id']=h,t.link[h]=b,'@never'===c.embed||k(g,t.subjectStack)){I(s,d,b);continue}'@last'===c.embed&&(h in t.uniqueEmbeds&&S(t,h),t.uniqueEmbeds[h]={parent:s,property:d}),t.subjectStack.push(g);for(var y=Object.keys(g).sort(),w=0,i;w<y.length;w++){if(i=y[w],F(i)){b[i]=re(g[i]);continue}if(!c.explicit||i in r)for(var v=g[i],A=0,N;A<v.length;++A){if(N=v[A],te(N)){var o={"@list":[]};I(b,i,o);var j=N['@list'];for(var L in j)if(N=j[L],Q(N)){var n=i in r?r[i][0]['@list']:_(c);x(t,[N['@id']],n,o,'@list')}else I(o,'@list',re(N));continue}if(Q(N)){var n=i in r?r[i]:_(c);x(t,[N['@id']],n,b,i)}else I(b,i,re(N))}}for(var y=Object.keys(r).sort(),w=0,i;w<y.length;++w)if(i=y[w],!F(i)){var R=r[i][0],M=C(R,l,'omitDefault');if(!M&&!(i in b)){var D='@null';'@default'in R&&(D=re(R['@default'])),H(D)||(D=[D]),b[i]=[{"@preserve":D}]}}I(s,d,b),t.subjectStack.pop()}}function _(t){var n={};for(var a in t)void 0!==t[a]&&(n['@'+a]=[t[a]]);return[n]}function k(t,n){for(var a=n.length-1;0<=a;--a)if(n[a]['@id']===t['@id'])return!0;return!1}function C(t,n,a){var r='@'+a,i=r in t?t[r][0]:n[a];return'embed'===a&&(!0===i?i='@last':!1===i?i='@never':'@always'!==i&&'@never'!==i&&'@link'!==i&&(i='@last')),i}function E(t){if(!H(t)||1!==t.length||!q(t[0]))throw new Pe('Invalid JSON-LD syntax; a JSON-LD frame must be a single object.','jsonld.SyntaxError',{frame:t})}function T(t,n,a,r){for(var o={},s=0;s<n.length;++s){var i=n[s],d=t.subjects[i];A(d,a,r)&&(o[i]=d)}return o}function A(n,a,r){if('@type'in a&&!(1===a['@type'].length&&q(a['@type'][0]))){for(var o=a['@type'],s=0;s<o.length;++s)if(t.hasValue(n,'@type',o[s]))return!0;return!1}var i=!0,d=!1;for(var l in a){if(F(l)){if('@id'!=l&&'@type'!=l)continue;if(i=!1,'@id'==l&&V(a[l])){if(n[l]!==a[l])return!1;d=!0;continue}}if(i=!1,l in n){if(H(a[l])&&0===a[l].length&&void 0!==n[l])return!1;d=!0;continue}var c=H(a[l])&&q(a[l][0])&&'@default'in a[l][0];if(r.requireAll&&!c)return!1}return i||d}function S(n,a){var r=n.uniqueEmbeds,o=r[a],s=o.parent,d=o.property,l={"@id":a};if(H(s)){for(var c=0;c<s.length;++c)if(t.compareValues(s[c],l)){s[c]=l;break}}else{var i=H(s[d]);t.removeValue(s,d,l,{propertyIsArray:i}),t.addValue(s,d,l,{propertyIsArray:i})}var u=function(t){for(var n=Object.keys(r),a=0,i;a<n.length;++a)i=n[a],i in r&&q(r[i].parent)&&r[i].parent['@id']===t&&(delete r[i],u(i))};u(a)}function I(n,a,r){q(n)?t.addValue(n,a,r,{propertyIsArray:!0}):n.push(r)}/**
 * Removes the @preserve keywords as the last step of the framing algorithm.
 *
 * @param ctx the active context used to compact the input.
 * @param input the framed, compacted output.
 * @param options the compaction options used.
 *
 * @return the resulting output.
 */function N(n,a,r){if(H(a)){for(var o=[],s=0,i;s<a.length;++s)i=N(n,a[s],r),null!==i&&o.push(i);a=o}else if(q(a)){// remove @preserve
if('@preserve'in a)return'@null'===a['@preserve']?null:a['@preserve'];if(ee(a))return a;if(te(a))return a['@list']=N(n,a['@list'],r),a;var d=R(n,'@id');if(d in a){var l=a[d];if(l in r.link){var c=r.link[l].indexOf(a);if(-1===c)r.link[l].push(a);else return r.link[l][c]}else r.link[l]=[a]}for(var u in a){var i=N(n,a[u],r),f=t.getContextValue(n,u,'@container');r.compactArrays&&H(i)&&1===i.length&&null===f&&(i=i[0]),a[u]=i}}return a}function j(t,n){return t.length<n.length?-1:n.length<t.length?1:t===n?0:t<n?-1:1}function L(t,n,a,r,i,o){null===o&&(o='@null');var s=[];if(('@id'===o||'@reverse'===o)&&Q(a)){'@reverse'===o&&s.push('@reverse');var d=R(t,a['@id'],null,{vocab:!0});d in t.mappings&&t.mappings[d]&&t.mappings[d]['@id']===a['@id']?s.push.apply(s,['@vocab','@id']):s.push.apply(s,['@id','@vocab'])}else s.push(o);s.push('@none');for(var l=t.inverse[n],c=0,u;c<r.length;++c)if(u=r[c],!!(u in l))for(var f=l[u][i],m=0,h;m<s.length;++m)if(h=s[m],!!(h in f))return f[h];return null}function R(t,n,a,r,o){if(null===n)return n;Y(a)&&(a=null),Y(o)&&(o=!1),r=r||{};var s=t.getInverse();if(F(n))return n in s?s[n]['@none']['@type']['@none']:n;if(r.vocab&&n in s){var d=t['@language']||'@none',l=[];q(a)&&'@index'in a&&l.push('@index');var c='@language',u='@null';if(o)c='@type',u='@reverse',l.push('@set');else if(te(a)){'@index'in a||l.push('@list');for(var f=a['@list'],m=0===f.length?d:null,h=null,g=0;g<f.length;++g){var i=f[g],b='@none',y='@none';if(ee(i)?'@language'in i?b=i['@language']:'@type'in i?y=i['@type']:b='@null':y='@id',null===m?m=b:b!==m&&ee(i)&&(m='@none'),null==h?h=y:y!==h&&(h='@none'),'@none'===m&&'@none'===h)break}m=m||'@none',h=h||'@none','@none'===h?u=m:(c='@type',u=h)}else ee(a)?'@language'in a&&!('@index'in a)?(l.push('@language'),u=a['@language']):'@type'in a&&(c='@type',u=a['@type']):(c='@type',u='@id'),l.push('@set');l.push('@none');var w=L(t,n,a,l,c,u);if(null!==w)return w}if(r.vocab&&'@vocab'in t){var v=t['@vocab'];if(0===n.indexOf(v)&&n!==v){var x=n.substr(v.length);if(!(x in t.mappings))return x}}for(var _=null,k=0,C=[],E=t.fastCurieMap,T=n.length-1;k<T&&n[k]in E;++k)E=E[n[k]],''in E&&C.push(E[''][0]);for(var g=C.length-1;0<=g;--g)for(var A=C[g],S=A.terms,I=0;I<S.length;++I){var N=S[I]+':'+n.substr(A.iri.length),R=!(N in t.mappings)||null===a&&t.mappings[N]['@id']===n;R&&(null==_||0>j(N,_))&&(_=N)}return null===_?r.vocab?n:B(t['@base'],n):_}function M(n,a,r){if(ee(r)){var i=t.getContextValue(n,a,'@type'),o=t.getContextValue(n,a,'@language'),s=t.getContextValue(n,a,'@container'),d='@index'in r&&'@index'!==s;if(!d&&(r['@type']===i||r['@language']===o))return r['@value'];var l=Object.keys(r).length,c=1===l||2===l&&'@index'in r&&!d,u='@language'in n,f=V(r['@value']),m=n.mappings[a]&&null===n.mappings[a]['@language'];if(c&&(!u||!f||m))return r['@value'];var h={};return d&&(h[R(n,'@index')]=r['@index']),'@type'in r?h[R(n,'@type')]=R(n,r['@type'],null,{vocab:!0}):'@language'in r&&(h[R(n,'@language')]=r['@language']),h[R(n,'@value')]=r['@value'],h}var g=P(n,a,{vocab:!0}),i=t.getContextValue(n,a,'@type'),b=R(n,r['@id'],null,{vocab:'@vocab'===i});if('@id'===i||'@vocab'===i||'@graph'===g)return b;var h={};return h[R(n,'@id')]=b,h}function D(t,n,a,r){if(a in r){if(r[a])return;throw new Pe('Cyclical context definition detected.','jsonld.CyclicalContext',{code:'cyclic IRI mapping',context:n,term:a})}if(r[a]=!1,F(a))throw new Pe('Invalid JSON-LD syntax; keywords cannot be overridden.','jsonld.SyntaxError',{code:'keyword redefinition',context:n,term:a});if(''===a)throw new Pe('Invalid JSON-LD syntax; a term cannot be an empty string.','jsonld.SyntaxError',{code:'invalid term definition',context:n});t.mappings[a]&&delete t.mappings[a];var i=n[a];if(null===i||q(i)&&null===i['@id'])return t.mappings[a]=null,void(r[a]=!0);if(V(i)&&(i={"@id":i}),!q(i))throw new Pe('Invalid JSON-LD syntax; @context property values must be strings or objects.','jsonld.SyntaxError',{code:'invalid term definition',context:n});var o=t.mappings[a]={};if(o.reverse=!1,'@reverse'in i){if('@id'in i)throw new Pe('Invalid JSON-LD syntax; a @reverse term definition must not contain @id.','jsonld.SyntaxError',{code:'invalid reverse property',context:n});var s=i['@reverse'];if(!V(s))throw new Pe('Invalid JSON-LD syntax; a @context @reverse value must be a string.','jsonld.SyntaxError',{code:'invalid IRI mapping',context:n});var d=P(t,s,{vocab:!0,base:!1},n,r);if(!ae(d))throw new Pe('Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.','jsonld.SyntaxError',{code:'invalid IRI mapping',context:n});o['@id']=d,o.reverse=!0}else if('@id'in i){var d=i['@id'];if(!V(d))throw new Pe('Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.','jsonld.SyntaxError',{code:'invalid IRI mapping',context:n});if(d!==a){if(d=P(t,d,{vocab:!0,base:!1},n,r),!ae(d)&&!F(d))throw new Pe('Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.','jsonld.SyntaxError',{code:'invalid IRI mapping',context:n});o['@id']=d}}var l=a.indexOf(':');if(o._termHasColon=-1!==l,!('@id'in o))if(o._termHasColon){var c=a.substr(0,l);if(c in n&&D(t,n,c,r),t.mappings[c]){var u=a.substr(l+1);o['@id']=t.mappings[c]['@id']+u}else o['@id']=a}else{if(!('@vocab'in t))throw new Pe('Invalid JSON-LD syntax; @context terms must define an @id.','jsonld.SyntaxError',{code:'invalid IRI mapping',context:n,term:a});o['@id']=t['@vocab']+a}if(r[a]=!0,'@type'in i){var f=i['@type'];if(!V(f))throw new Pe('Invalid JSON-LD syntax; an @context @type values must be a string.','jsonld.SyntaxError',{code:'invalid type mapping',context:n});if('@id'!==f&&'@vocab'!==f){if(f=P(t,f,{vocab:!0,base:!1},n,r),!ae(f))throw new Pe('Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.','jsonld.SyntaxError',{code:'invalid type mapping',context:n});if(0===f.indexOf('_:'))throw new Pe('Invalid JSON-LD syntax; an @context @type values must be an IRI, not a blank node identifier.','jsonld.SyntaxError',{code:'invalid type mapping',context:n})}o['@type']=f}if('@container'in i){var m=i['@container'];if('@list'!==m&&'@set'!==m&&'@index'!==m&&'@language'!==m)throw new Pe('Invalid JSON-LD syntax; @context @container value must be one of the following: @list, @set, @index, or @language.','jsonld.SyntaxError',{code:'invalid container mapping',context:n});if(o.reverse&&'@index'!==m&&'@set'!==m&&null!==m)throw new Pe('Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.','jsonld.SyntaxError',{code:'invalid reverse property',context:n});o['@container']=m}if('@language'in i&&!('@type'in i)){var h=i['@language'];if(null!==h&&!V(h))throw new Pe('Invalid JSON-LD syntax; @context @language value must be a string or null.','jsonld.SyntaxError',{code:'invalid language mapping',context:n});null!==h&&(h=h.toLowerCase()),o['@language']=h}// disallow aliasing @context and @preserve
var d=o['@id'];if('@context'===d||'@preserve'===d)throw new Pe('Invalid JSON-LD syntax; @context and @preserve cannot be aliased.','jsonld.SyntaxError',{code:'invalid keyword alias',context:n})}function P(n,a,r,i,o){if(null===a||F(a))return a;if(a+='',i&&a in i&&!0!==o[a]&&D(n,i,a,o),r=r||{},r.vocab){var s=n.mappings[a];if(null===s)return null;if(s)return s['@id']}var d=a.indexOf(':');if(-1!==d){var l=a.substr(0,d),c=a.substr(d+1);if('_'===l||0===c.indexOf('//'))return a;i&&l in i&&D(n,i,l,o);var s=n.mappings[l];return s?s['@id']+c:a}if(r.vocab&&'@vocab'in n)return n['@vocab']+a;var u=a;return r.base&&(u=t.prependBase(n['@base'],u)),u}function O(n,a){if(null===n)return a;if(-1!==a.indexOf(':'))return a;V(n)&&(n=t.url.parse(n||''));var r=t.url.parse(a),i={protocol:n.protocol||''};if(null!==r.authority)i.authority=r.authority,i.path=r.path,i.query=r.query;else if(i.authority=n.authority,''===r.path)i.path=n.path,i.query=null===r.query?n.query:r.query;else{if(0===r.path.indexOf('/'))i.path=r.path;else{var o=n.path;''!==r.path&&(o=o.substr(0,o.lastIndexOf('/')+1),0<o.length&&'/'!==o.substr(-1)&&(o+='/'),o+=r.path),i.path=o}i.query=r.query}i.path=ue(i.path,!!i.authority);var s=i.protocol;return null!==i.authority&&(s+='//'+i.authority),s+=i.path,null!==i.query&&(s+='?'+i.query),null!==r.fragment&&(s+='#'+r.fragment),''===s&&(s='./'),s}function B(n,a){if(null===n)return a;V(n)&&(n=t.url.parse(n||''));var r='';if(''===n.href?a.indexOf('//')&&(r+='//'):r+=(n.protocol||'')+'//'+(n.authority||''),0!==a.indexOf(r))return a;for(var o=t.url.parse(a.substr(r.length)),s=n.normalizedPath.split('/'),d=o.normalizedPath.split('/'),l=o.fragment||o.query?0:1;0<s.length&&d.length>l&&s[0]===d[0];)s.shift(),d.shift();var c='';if(0<s.length){s.pop();for(var u=0;u<s.length;++u)c+='../'}return c+=d.join('/'),null!==o.query&&(c+='?'+o.query),null!==o.fragment&&(c+='#'+o.fragment),''===c&&(c='./'),c}function U(n){function a(){var t=this;if(t.inverse)return t.inverse;for(var n=t.inverse={},a=t.fastCurieMap={},o={},s=t['@language']||'@none',d=t.mappings,l=Object.keys(d).sort(j),c=0;c<l.length;++c){var u=l[c],f=d[u];if(null!==f){var m=f['@container']||'@none',h=f['@id'];H(h)||(h=[h]);for(var g=0;g<h.length;++g){var b=h[g],y=n[b],w=F(b);if(!!y)w||f._termHasColon||o[b].push(u);else if(n[b]=y={},!w&&!f._termHasColon){o[b]=[u];var v={iri:b,terms:o[b]};b[0]in a?a[b[0]].push(v):a[b[0]]=[v]}if(y[m]||(y[m]={"@language":{},"@type":{}}),y=y[m],f.reverse)i(f,u,y['@type'],'@reverse');else if('@type'in f)i(f,u,y['@type'],f['@type']);else if('@language'in f){var x=f['@language']||'@null';i(f,u,y['@language'],x)}else i(f,u,y['@language'],s),i(f,u,y['@type'],'@none'),i(f,u,y['@language'],'@none')}}}for(var _ in a)r(a,_,1);return n}function r(t,n,a){for(var o=t[n],s=t[n]={},d=0,i,l;d<o.length;++d)i=o[d].iri,l=a>=i.length?'':i[a],l in s?s[l].push(o[d]):s[l]=[o[d]];for(var n in s)''!==n&&r(s,n,a+1)}function i(t,n,a,r){r in a||(a[r]=n)}function o(){var t={};return t['@base']=this['@base'],t.mappings=re(this.mappings),t.clone=this.clone,t.inverse=null,t.getInverse=this.getInverse,'@language'in this&&(t['@language']=this['@language']),'@vocab'in this&&(t['@vocab']=this['@vocab']),t}var s=t.url.parse(n.base||'');return{"@base":s,mappings:{},inverse:null,getInverse:a,clone:o}}function F(t){return!!V(t)&&('@base'===t||'@context'===t||'@container'===t||'@default'===t||'@embed'===t||'@explicit'===t||'@graph'===t||'@id'===t||'@index'===t||'@language'===t||'@list'===t||'@omitDefault'===t||'@preserve'===t||'@requireAll'===t||'@reverse'===t||'@set'===t||'@type'===t||'@value'===t||'@vocab'===t)}function q(t){return'[object Object]'===Object.prototype.toString.call(t)}function z(t){return q(t)&&0===Object.keys(t).length}function H(t){return Array.isArray(t)}function W(t){if(!(V(t)||z(t))){var n=!1;if(H(t)){n=!0;for(var a=0;a<t.length;++a)if(!V(t[a])){n=!1;break}}if(!n)throw new Pe('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, or an empty object.','jsonld.SyntaxError',{code:'invalid type value',value:t})}}function V(t){return'string'==typeof t||'[object String]'===Object.prototype.toString.call(t)}function G(t){return'number'==typeof t||'[object Number]'===Object.prototype.toString.call(t)}function J(t){return G(t)&&-1!==(t+'').indexOf('.')}function K(t){return!isNaN(parseFloat(t))&&isFinite(t)}function X(t){return'boolean'==typeof t||'[object Boolean]'===Object.prototype.toString.call(t)}function Y(t){return'undefined'==typeof t}function Z(t){var n=!1;if(q(t)&&!('@value'in t||'@set'in t||'@list'in t)){var a=Object.keys(t).length;n=1<a||!('@id'in t)}return n}function Q(t){return q(t)&&1===Object.keys(t).length&&'@id'in t}function ee(t){return q(t)&&'@value'in t}function te(t){return q(t)&&'@list'in t}function ne(t){var n=!1;return q(t)&&('@id'in t?n=0===t['@id'].indexOf('_:'):n=0===Object.keys(t).length||!('@value'in t||'@set'in t||'@list'in t)),n}function ae(t){return V(t)&&-1!==t.indexOf(':')}function re(t){if(t&&'object'==typeof t){var n;if(H(t)){n=[];for(var a=0;a<t.length;++a)n[a]=re(t[a])}else if(q(t))for(var r in n={},t)n[r]=re(t[r]);else n=t.toString();return n}return t}function ie(n,a,r,o){var s=Object.keys(a).length;if(H(n)){for(var d=0;d<n.length;++d)ie(n[d],a,r,o);return s<Object.keys(a).length}if(q(n)){for(var i in n){if('@context'!=i){ie(n[i],a,r,o);continue}var l=n[i];if(H(l))for(var c=l.length,d=0,u;d<c;++d)u=l[d],V(u)&&(u=t.prependBase(o,u),r?(u=a[u],H(u)?(Array.prototype.splice.apply(l,[d,1].concat(u)),d+=u.length-1,c=l.length):l[d]=u):!(u in a)&&(a[u]=!1));else V(l)&&(l=t.prependBase(o,l),r?n[i]=a[l]:!(l in a)&&(a[l]=!1))}return s<Object.keys(a).length}return!1}function oe(t,n,a){var r=null,i=n.documentLoader,o=function(t,n,a,s,d){if(Object.keys(n).length>De)return r=new Pe('Maximum number of @context URLs exceeded.','jsonld.ContextUrlError',{code:'loading remote context failed',max:De}),d(r);var l={},c=function(){ie(t,l,!0,s),d(null,t)};if(!ie(t,l,!1,s))return c();var u=[];for(var f in l)!1===l[f]&&u.push(f);for(var m=u.length,h=0;h<u.length;++h)(function(t){if(t in n)return r=new Pe('Cyclical @context URLs detected.','jsonld.ContextUrlError',{code:'recursive context inclusion',url:t}),d(r);var i=re(n);i[t]=!0;var s=function(n,s){if(!r){var u=s?s.document:null;if(!n&&V(u))try{u=JSON.parse(u)}catch(t){n=t}return n?n=new Pe('Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context.','jsonld.InvalidUrl',{code:'loading remote context failed',url:t,cause:n}):!q(u)&&(n=new Pe('Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object.','jsonld.InvalidUrl',{code:'invalid remote context',url:t,cause:n})),n?(r=n,d(r)):void(u='@context'in u?{"@context":u['@context']}:{"@context":{}},s.contextUrl&&(!H(u['@context'])&&(u['@context']=[u['@context']]),u['@context'].push(s.contextUrl)),o(u,i,a,t,function(n,a){return n?d(n):void(l[t]=a['@context'],m-=1,0===m&&c())}))}},u=a(t,s);u&&'then'in u&&u.then(s.bind(null,null),s)})(u[h])};o(t,{},i,n.base,a)}function se(t){for(var n='(?:<([^:]+:[^>]*)>)',a='(_:(?:[A-Za-z0-9]+))',r='"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)"',i='(?:\\^\\^'+n+')',o='(?:@([a-z]+(?:-[a-z0-9]+)*))',s='(?:'+r+'(?:'+i+'|'+o+')?)',d='(?:#.*)?',l='[ \\t]+',c='[ \\t]*',u=/(?:\r\n)|(?:\n)|(?:\r)/g,f=/^[ \t]*(?:#.*)?$/,m='(?:'+n+'|'+a+')'+l,h=n+l,g='(?:'+n+'|'+a+'|'+s+')'+c,b='(?:\\.|(?:(?:'+n+'|'+a+')'+c+'\\.))',w=/^[ \t]*(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z0-9]+)))[ \t]+(?:<([^:]+:[^>]*)>)[ \t]+(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z0-9]+))|(?:"([^"\\]*(?:\\.[^"\\]*)*)"(?:(?:\^\^(?:<([^:]+:[^>]*)>))|(?:@([a-z]+(?:-[a-z0-9]+)*)))?))[ \t]*(?:\.|(?:(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z0-9]+)))[ \t]*\.))[ \t]*(?:#.*)?$/,v={},x=t.split(u),_=0,k=0,C;k<x.length;++k)if(C=x[k],_++,!f.test(C)){var E=C.match(w);if(null===E)throw new Pe('Error while parsing N-Quads; invalid quad.','jsonld.ParseError',{line:_});var T={};if(T.subject=Y(E[1])?{type:'blank node',value:E[2]}:{type:'IRI',value:E[1]},T.predicate={type:'IRI',value:E[3]},!Y(E[4]))T.object={type:'IRI',value:E[4]};else if(!Y(E[5]))T.object={type:'blank node',value:E[5]};else{T.object={type:'literal'},Y(E[7])?Y(E[8])?T.object.datatype=ke:(T.object.datatype=Re,T.object.language=E[8]):T.object.datatype=E[7];var A=E[6].replace(/\\"/g,'"').replace(/\\t/g,'\t').replace(/\\n/g,'\n').replace(/\\r/g,'\r').replace(/\\\\/g,'\\');T.object.value=A}var S='@default';if(Y(E[9])?!Y(E[10])&&(S=E[10]):S=E[9],!(S in v))v[S]=[T];else{for(var I=!0,N=v[S],j=0;I&&j<N.length;++j)y(N[j],T)&&(I=!1);I&&N.push(T)}}return v}function de(t){var n=[];for(var a in t)for(var r=t[a],i=0,o;i<r.length;++i)o=r[i],'@default'==a&&(a=null),n.push(le(o,a));return n.sort().join('')}function le(t,n){var a=t.subject,r=t.predicate,i=t.object,o=n||null;'name'in t&&t.name&&(o=t.name.value);var s='';if(s+='IRI'===a.type?'<'+a.value+'>':a.value,s+=' ',s+='IRI'===r.type?'<'+r.value+'>':r.value,s+=' ','IRI'===i.type)s+='<'+i.value+'>';else if('blank node'===i.type)s+=i.value;else{var d=i.value.replace(/\\/g,'\\\\').replace(/\t/g,'\\t').replace(/\n/g,'\\n').replace(/\r/g,'\\r').replace(/\"/g,'\\"');s+='"'+d+'"',i.datatype===Re?i.language&&(s+='@'+i.language):i.datatype!==ke&&(s+='^^<'+i.datatype+'>')}return null!==o&&void 0!==o&&(0===o.indexOf('_:')?s+=' '+o:s+=' <'+o+'>'),s+=' .\n',s}function pe(t){for(var n={"@default":[]},a=t.getSubjects(),r=0,i;r<a.length;++r)if(i=a[r],null!==i){var o=t.getSubjectTriples(i);if(null!==o){var s=o.predicates;for(var d in s)for(var l=s[d].objects,c=0;c<l.length;++c){var u=l[c],f={};f.subject=0===i.indexOf('_:')?{type:'blank node',value:i}:{type:'IRI',value:i},f.predicate=0===d.indexOf('_:')?{type:'blank node',value:d}:{type:'IRI',value:d};var m=u.value;if(u.type===je){ye||ze();var h=new ye;m='';for(var g=0;g<u.value.length;g++)u.value[g].nodeType===we.ELEMENT_NODE?m+=h.serializeToString(u.value[g]):u.value[g].nodeType===we.TEXT_NODE&&(m+=u.value[g].nodeValue)}f.object={},u.type===Le?0===u.value.indexOf('_:')?f.object.type='blank node':f.object.type='IRI':(f.object.type='literal',u.type===Ne?u.language?(f.object.datatype=Re,f.object.language=u.language):f.object.datatype=ke:f.object.datatype=u.type),f.object.value=m,n['@default'].push(f)}}}return n}function ce(t){this.prefix=t,this.counter=0,this.existing={}}function ue(t,n){var a='';0===t.indexOf('/')&&(a='/');for(var r=t.split('/'),i=[];0<r.length;){if('.'===r[0]||''===r[0]&&1<r.length){r.shift();continue}if('..'===r[0]){r.shift(),n||0<i.length&&'..'!==i[i.length-1]?i.pop():i.push('..');continue}i.push(r.shift())}return a+i.join('/')}t.compact=function(n,a,r,o){function i(t,n,r,s){if(t)return o(t);s.compactArrays&&!s.graph&&H(n)?1===n.length?n=n[0]:0===n.length&&(n={}):s.graph&&q(n)&&(n=[n]),q(a)&&'@context'in a&&(a=a['@context']),a=re(a),H(a)||(a=[a]);var d=a;a=[];for(var l=0;l<d.length;++l)(!q(d[l])||0<Object.keys(d[l]).length)&&a.push(d[l]);var i=0<a.length;if(1===a.length&&(a=a[0]),H(n)){var c=R(r,'@graph'),u=n;n={},i&&(n['@context']=a),n[c]=u}else if(q(n)&&i){var u=n;for(var f in n={"@context":a},u)n[f]=u[f]}o(null,n,r)}if(2>arguments.length)return t.nextTick(function(){o(new TypeError('Could not compact, too few arguments.'))});if('function'==typeof r&&(o=r,r={}),r=r||{},null===a)return t.nextTick(function(){o(new Pe('The compaction context must not be null.','jsonld.CompactError',{code:'invalid local context'}))});if(null===n)return t.nextTick(function(){o(null,null)});'base'in r||(r.base='string'==typeof n?n:''),'compactArrays'in r||(r.compactArrays=!0),'graph'in r||(r.graph=!1),'skipExpansion'in r||(r.skipExpansion=!1),'documentLoader'in r||(r.documentLoader=t.loadDocument),'link'in r||(r.link=!1),r.link&&(r.skipExpansion=!0);var s=function(n,a,r){return a.skipExpansion?t.nextTick(function(){r(null,n)}):void t.expand(n,a,r)};s(n,r,function(n,s){if(n)return o(new Pe('Could not expand input before compaction.','jsonld.CompactError',{cause:n}));var d=U(r);t.processContext(d,a,r,function(t,n){if(t)return o(new Pe('Could not process context before compaction.','jsonld.CompactError',{cause:t}));var a;try{a=new Oe().compact(n,null,s,r)}catch(t){return o(t)}i(null,a,n,r)})})},t.expand=function(n,a,r){function i(t){'base'in a||(a.base=t.documentUrl||'');var n={document:re(t.document),remoteContext:{"@context":t.contextUrl}};if('expandContext'in a){var i=re(a.expandContext);n.expandContext='object'==typeof i&&'@context'in i?i:{"@context":i}}oe(n,a,function(t,n){if(t)return r(t);var i;try{var o=new Oe,s=U(a),d=n.document,l=n.remoteContext['@context'];n.expandContext&&(s=o.processContext(s,n.expandContext['@context'],a)),l&&(s=o.processContext(s,l,a)),i=o.expand(s,null,d,a,!1),q(i)&&'@graph'in i&&1===Object.keys(i).length?i=i['@graph']:null===i&&(i=[]),H(i)||(i=[i])}catch(t){return r(t)}r(null,i)})}return 1>arguments.length?t.nextTick(function(){r(new TypeError('Could not expand, too few arguments.'))}):void('function'==typeof a&&(r=a,a={}),a=a||{},!('documentLoader'in a)&&(a.documentLoader=t.loadDocument),!('keepFreeFloatingNodes'in a)&&(a.keepFreeFloatingNodes=!1),t.nextTick(function(){if('string'==typeof n){var t=function(t,n){if(t)return r(t);try{if(!n.document)throw new Pe('No remote document found at the given URL.','jsonld.NullRemoteDocument');'string'==typeof n.document&&(n.document=JSON.parse(n.document))}catch(t){return r(new Pe('Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.','jsonld.LoadDocumentError',{code:'loading document failed',cause:t,remoteDoc:n}))}i(n)},o=a.documentLoader(n,t);return void(o&&'then'in o&&o.then(t.bind(null,null),t))}i({contextUrl:null,documentUrl:null,document:n})}))},t.flatten=function(n,a,r,i){return 1>arguments.length?t.nextTick(function(){i(new TypeError('Could not flatten, too few arguments.'))}):void('function'==typeof r?(i=r,r={}):'function'==typeof a&&(i=a,a=null,r={}),r=r||{},!('base'in r)&&(r.base='string'==typeof n?n:''),!('documentLoader'in r)&&(r.documentLoader=t.loadDocument),t.expand(n,r,function(n,o){if(n)return i(new Pe('Could not expand input before flattening.','jsonld.FlattenError',{cause:n}));var s;try{s=new Oe().flatten(o)}catch(t){return i(t)}return null===a?i(null,s):void(r.graph=!0,r.skipExpansion=!0,t.compact(s,a,r,function(t,n){return t?i(new Pe('Could not compact flattened output.','jsonld.FlattenError',{cause:t})):void i(null,n)}))}))},t.frame=function(n,a,r,i){function o(a){var o=a.document,s;o?(s=o['@context'],a.contextUrl?(s?H(s)?s.push(a.contextUrl):s=[s,a.contextUrl]:s=a.contextUrl,o['@context']=s):s=s||{}):s={},t.expand(n,r,function(n,a){if(n)return i(new Pe('Could not expand input before framing.','jsonld.FrameError',{cause:n}));var d=re(r);d.isFrame=!0,d.keepFreeFloatingNodes=!0,t.expand(o,d,function(n,r){if(n)return i(new Pe('Could not expand frame before framing.','jsonld.FrameError',{cause:n}));var o;try{o=new Oe().frame(a,r,d)}catch(t){return i(t)}d.graph=!0,d.skipExpansion=!0,d.link={},t.compact(o,s,d,function(t,n,a){if(t)return i(new Pe('Could not compact framed output.','jsonld.FrameError',{cause:t}));var r=R(a,'@graph');// remove @preserve from results
d.link={},n[r]=N(a,n[r],d),i(null,n)})})})}return 2>arguments.length?t.nextTick(function(){i(new TypeError('Could not frame, too few arguments.'))}):void('function'==typeof r&&(i=r,r={}),r=r||{},!('base'in r)&&(r.base='string'==typeof n?n:''),!('documentLoader'in r)&&(r.documentLoader=t.loadDocument),!('embed'in r)&&(r.embed='@last'),r.explicit=r.explicit||!1,!('requireAll'in r)&&(r.requireAll=!0),r.omitDefault=r.omitDefault||!1,t.nextTick(function(){if('string'==typeof a){var t=function(t,n){if(t)return i(t);try{if(!n.document)throw new Pe('No remote document found at the given URL.','jsonld.NullRemoteDocument');'string'==typeof n.document&&(n.document=JSON.parse(n.document))}catch(t){return i(new Pe('Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.','jsonld.LoadDocumentError',{code:'loading document failed',cause:t,remoteDoc:n}))}o(n)},n=r.documentLoader(a,t);return void(n&&'then'in n&&n.then(t.bind(null,null),t))}o({contextUrl:null,documentUrl:null,document:a})}))},t.link=function(n,a,r,i){var o={};a&&(o['@context']=a),o['@embed']='@link',t.frame(n,o,r,i)},t.objectify=function(n,a,r,i){'function'==typeof r&&(i=r,r={}),r=r||{},'base'in r||(r.base='string'==typeof n?n:''),'documentLoader'in r||(r.documentLoader=t.loadDocument),t.expand(n,r,function(n,o){if(n)return i(new Pe('Could not expand input before linking.','jsonld.LinkError',{cause:n}));var s;try{s=new Oe().flatten(o)}catch(t){return i(t)}r.graph=!0,r.skipExpansion=!0,t.compact(s,a,r,function(n,a,r){if(n)return i(new Pe('Could not compact flattened output before linking.','jsonld.LinkError',{cause:n}));var o=R(r,'@graph'),d=a[o][0],l=function(n){if(q(n)||H(n)){if(q(n)){if(l.visited[n['@id']])return;l.visited[n['@id']]=!0}for(var a in n){var o=n[a],s='@id'===t.getContextValue(r,a,'@type');if(H(o)||q(o)||s)if(V(o)&&s)n[a]=o=d[o],l(o);else if(H(o))for(var c=0;c<o.length;++c)V(o[c])&&s?o[c]=d[o[c]]:q(o[c])&&'@id'in o[c]&&(o[c]=d[o[c]['@id']]),l(o[c]);else if(q(o)){var i=o['@id'];n[a]=o=d[i],l(o)}}}};for(var c in l.visited={},l(d),a.of_type={},d)if('@type'in d[c]){var s=d[c]['@type'];H(s)||(s=[s]);for(var u=0;u<s.length;++u)s[u]in a.of_type||(a.of_type[s[u]]=[]),a.of_type[s[u]].push(d[c])}i(null,a)})})},t.normalize=function(n,a,r){if(1>arguments.length)return t.nextTick(function(){r(new TypeError('Could not normalize, too few arguments.'))});if('function'==typeof a&&(r=a,a={}),a=a||{},'algorithm'in a||(a.algorithm='URGNA2012'),'base'in a||(a.base='string'==typeof n?n:''),'documentLoader'in a||(a.documentLoader=t.loadDocument),'inputFormat'in a){if('application/nquads'!==a.inputFormat)return r(new Pe('Unknown normalization input format.','jsonld.NormalizeError'));var i=se(n);new Oe().normalize(i,a,r)}else{var o=re(a);delete o.format,o.produceGeneralizedRdf=!1,t.toRDF(n,o,function(t,n){return t?r(new Pe('Could not convert input to RDF dataset before normalization.','jsonld.NormalizeError',{cause:t})):void new Oe().normalize(n,a,r)})}},t.fromRDF=function(n,a,r){return 1>arguments.length?t.nextTick(function(){r(new TypeError('Could not convert from RDF, too few arguments.'))}):void('function'==typeof a&&(r=a,a={}),a=a||{},!('useRdfType'in a)&&(a.useRdfType=!1),!('useNativeTypes'in a)&&(a.useNativeTypes=!1),!('format'in a)&&V(n)&&!('format'in a)&&(a.format='application/nquads'),t.nextTick(function(){function t(t,n,a){new Oe().fromRDF(t,n,a)}var i;if(!a.format)i=function(){return n};else if(i=a.rdfParser||be[a.format],!i)return r(new Pe('Unknown input format.','jsonld.UnknownFormat',{format:a.format}));var o=!1;try{n=i(n,function(n,i){return o=!0,n?r(n):void t(i,a,r)})}catch(t){if(!o)return r(t);throw t}if(n){if('then'in n)return n.then(function(n){t(n,a,r)},r);t(n,a,r)}}))},t.toRDF=function(n,a,r){return 1>arguments.length?t.nextTick(function(){r(new TypeError('Could not convert to RDF, too few arguments.'))}):void('function'==typeof a&&(r=a,a={}),a=a||{},!('base'in a)&&(a.base='string'==typeof n?n:''),!('documentLoader'in a)&&(a.documentLoader=t.loadDocument),t.expand(n,a,function(t,n){if(t)return r(new Pe('Could not expand input before serialization to RDF.','jsonld.RdfError',{cause:t}));var i;try{if(i=Oe.prototype.toRDF(n,a),a.format){if('application/nquads'===a.format)return r(null,de(i));throw new Pe('Unknown output format.','jsonld.UnknownFormat',{format:a.format})}}catch(t){return r(t)}r(null,i)}))},t.createNodeMap=function(n,a,r){return 1>arguments.length?t.nextTick(function(){r(new TypeError('Could not create node map, too few arguments.'))}):void('function'==typeof a&&(r=a,a={}),a=a||{},!('base'in a)&&(a.base='string'==typeof n?n:''),!('documentLoader'in a)&&(a.documentLoader=t.loadDocument),t.expand(n,a,function(t,n){if(t)return r(new Pe('Could not expand input before creating node map.','jsonld.CreateNodeMapError',{cause:t}));var i;try{i=new Oe().createNodeMap(n,a)}catch(t){return r(t)}r(null,i)}))},t.merge=function(n,a,r,o){function s(t,n){return c?void 0:t?(c=t,o(new Pe('Could not expand input before flattening.','jsonld.FlattenError',{cause:t}))):void(l.push(n),0==--u&&d(l))}function d(n){var s=!0;'mergeNodes'in r&&(s=r.mergeNodes);var d=r.namer||r.issuer||new ce('_:b'),l={"@default":{}},c;try{for(var u=0,i;u<n.length;++u){i=n[u],i=t.relabelBlankNodes(i,{issuer:new ce('_:b'+u+'-')});var f=s||0===u?l:{"@default":{}};if(w(i,f,'@default',d),f!==l)for(var m in f){var h=f[m];if(!(m in l)){l[m]=h;continue}var g=l[m];for(var b in h)b in g||(g[b]=h[b])}}c=v(l)}catch(t){return o(t)}for(var y=[],x=Object.keys(c).sort(),_=0,k;_<x.length;++_)k=c[x[_]],Q(k)||y.push(k);return null===a?o(null,y):void(r.graph=!0,r.skipExpansion=!0,t.compact(y,a,r,function(t,n){return t?o(new Pe('Could not compact merged output.','jsonld.MergeError',{cause:t})):void o(null,n)}))}if(1>arguments.length)return t.nextTick(function(){o(new TypeError('Could not merge, too few arguments.'))});if(!H(n))return t.nextTick(function(){o(new TypeError('Could not merge, "docs" must be an array.'))});'function'==typeof r?(o=r,r={}):'function'==typeof a&&(o=a,a=null,r={}),r=r||{};for(var l=[],c=null,u=n.length,f=0,i;f<n.length;++f){for(var m in i={},r)i[m]=r[m];t.expand(n[f],i,s)}},t.relabelBlankNodes=function(t,n){n=n||{};var a=n.namer||n.issuer||new ce('_:b');return l(a,t)},t.prependBase=function(t,n){return O(t,n)},t.documentLoader=function(n,a){var r=new Pe('Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.','jsonld.LoadDocumentError',{code:'loading document failed'});return c?a(r,{contextUrl:null,documentUrl:n,document:null}):t.promisify(function(t){t(r)})},t.loadDocument=function(n,a){var r=t.documentLoader(n,a);r&&'then'in r&&r.then(a.bind(null,null),a)},t.promises=function(n){n=n||{};var r=Array.prototype.slice,o=t.promisify,s=n.api||{},d=n.version||'jsonld.js';'string'==typeof n.api&&(!n.version&&(d=n.api),s={}),s.expand=function(n){if(1>arguments.length)throw new TypeError('Could not expand, too few arguments.');return o.apply(null,[t.expand].concat(r.call(arguments)))},s.compact=function(n,a){if(2>arguments.length)throw new TypeError('Could not compact, too few arguments.');var i=function(n,a,r,i){'function'==typeof r&&(i=r,r={}),r=r||{},t.compact(n,a,r,function(t,n){i(t,n)})};return o.apply(null,[i].concat(r.call(arguments)))},s.flatten=function(n){if(1>arguments.length)throw new TypeError('Could not flatten, too few arguments.');return o.apply(null,[t.flatten].concat(r.call(arguments)))},s.frame=function(n,a){if(2>arguments.length)throw new TypeError('Could not frame, too few arguments.');return o.apply(null,[t.frame].concat(r.call(arguments)))},s.fromRDF=function(n){if(1>arguments.length)throw new TypeError('Could not convert from RDF, too few arguments.');return o.apply(null,[t.fromRDF].concat(r.call(arguments)))},s.toRDF=function(n){if(1>arguments.length)throw new TypeError('Could not convert to RDF, too few arguments.');return o.apply(null,[t.toRDF].concat(r.call(arguments)))},s.normalize=function(n){if(1>arguments.length)throw new TypeError('Could not normalize, too few arguments.');return o.apply(null,[t.normalize].concat(r.call(arguments)))},'jsonld.js'===d&&(s.link=function(n,a){if(2>arguments.length)throw new TypeError('Could not link, too few arguments.');return o.apply(null,[t.link].concat(r.call(arguments)))},s.objectify=function(n){return o.apply(null,[t.objectify].concat(r.call(arguments)))},s.createNodeMap=function(n){return o.apply(null,[t.createNodeMap].concat(r.call(arguments)))},s.merge=function(n){return o.apply(null,[t.merge].concat(r.call(arguments)))});try{t.Promise=i.Promise||a(150).Promise}catch(t){var l=function(){throw new Error('Unable to find a Promise implementation.')};for(var c in s)s[c]=l}return s},t.promisify=function(n){if(!t.Promise)try{t.Promise=i.Promise||a(150).Promise}catch(t){throw new Error('Unable to find a Promise implementation.')}var r=Array.prototype.slice.call(arguments,1);return new t.Promise(function(t,a){n.apply(null,r.concat(function(n,r){n?a(n):t(r)}))})},t.promises({api:t.promises}),n.prototype=t.promises({version:'json-ld-1.0'}),n.prototype.toString=function(){return this instanceof n?'[object JsonLdProcessor]':'[object JsonLdProcessorPrototype]'},t.JsonLdProcessor=n;var fe=!!Object.defineProperty;if(fe)try{Object.defineProperty({},'x',{})}catch(t){fe=!1}fe&&(Object.defineProperty(n,'prototype',{writable:!1,enumerable:!1}),Object.defineProperty(n.prototype,'constructor',{writable:!0,enumerable:!1,configurable:!0,value:n})),u&&'undefined'==typeof i.JsonLdProcessor&&(fe?Object.defineProperty(i,'JsonLdProcessor',{writable:!0,enumerable:!1,configurable:!0,value:n}):i.JsonLdProcessor=n);var he='function'==typeof o&&o,ge=he?function(t){he(t)}:function(t){setTimeout(t,0)};t.nextTick='object'==typeof r&&'function'==typeof r.nextTick?r.nextTick:ge,t.setImmediate=he?ge:t.nextTick,t.parseLinkHeader=function(t){for(var n={},a=t.match(/(?:<[^>]*?>|"[^"]*?"|[^,])+/g),r=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/,o=0,i;o<a.length;++o)if(i=a[o].match(r),!!i){for(var s={target:i[1]},d=i[2],l=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g;i=l.exec(d);)s[i[1]]=void 0===i[2]?i[3]:i[2];var c=s.rel||'';H(n[c])?n[c].push(s):c in n?n[c]=[n[c],s]:n[c]=s}return n},t.RequestQueue=function(){this._requests={}},t.RequestQueue.prototype.wrapLoader=function(t){return this._loader=t,this._usePromise=1===t.length,this.add.bind(this)},t.RequestQueue.prototype.add=function(n,a){var r=this;if(!a&&!r._usePromise)throw new Error('callback must be specified.');return r._usePromise?new t.Promise(function(t,a){var i=r._requests[n];i||(i=r._requests[n]=r._loader(n).then(function(t){return delete r._requests[n],t}).catch(function(t){throw delete r._requests[n],t})),i.then(function(n){t(n)}).catch(function(t){a(t)})}):void(n in r._requests?r._requests[n].push(a):(r._requests[n]=[a],r._loader(n,function(t,a){var o=r._requests[n];delete r._requests[n];for(var s=0;s<o.length;++s)o[s](t,a)})))},t.DocumentCache=function(t){this.order=[],this.cache={},this.size=t||50,this.expires=30000},t.DocumentCache.prototype.get=function(t){if(t in this.cache){var n=this.cache[t];if(n.expires>=+new Date)return n.ctx;delete this.cache[t],this.order.splice(this.order.indexOf(t),1)}return null},t.DocumentCache.prototype.set=function(t,n){this.order.length===this.size&&delete this.cache[this.order.shift()],this.order.push(t),this.cache[t]={ctx:n,expires:+new Date+this.expires}},t.ActiveContextCache=function(t){this.order=[],this.cache={},this.size=t||100},t.ActiveContextCache.prototype.get=function(t,n){var a=JSON.stringify(t),r=JSON.stringify(n),i=this.cache[a];return i&&r in i?i[r]:null},t.ActiveContextCache.prototype.set=function(t,n,a){if(this.order.length===this.size){var r=this.order.shift();delete this.cache[r.activeCtx][r.localCtx]}var i=JSON.stringify(t),o=JSON.stringify(n);this.order.push({activeCtx:i,localCtx:o}),i in this.cache||(this.cache[i]={}),this.cache[i][o]=re(a)},t.cache={activeCtx:new t.ActiveContextCache},t.documentLoaders={},t.documentLoaders.jquery=function(n,a){function r(r,i){return 0!==r.indexOf('http:')&&0!==r.indexOf('https:')?i(new Pe('URL could not be dereferenced; only "http" and "https" URLs are supported.','jsonld.InvalidUrl',{code:'loading document failed',url:r}),{contextUrl:null,documentUrl:r,document:null}):a.secure&&0!==r.indexOf('https')?i(new Pe('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".','jsonld.InvalidUrl',{code:'loading document failed',url:r}),{contextUrl:null,documentUrl:r,document:null}):void n.ajax({url:r,accepts:{json:'application/ld+json, application/json'},headers:{Accept:'application/ld+json, application/json'},dataType:'json',crossDomain:!0,success:function(n,a,o){var s={contextUrl:null,documentUrl:r,document:n},d=o.getResponseHeader('Content-Type'),l=o.getResponseHeader('Link');if(l&&'application/ld+json'!==d){if(l=t.parseLinkHeader(l)[Me],H(l))return i(new Pe('URL could not be dereferenced, it has more than one associated HTTP Link Header.','jsonld.InvalidUrl',{code:'multiple context link headers',url:r}),s);l&&(s.contextUrl=l.target)}i(null,s)},error:function(t,n,a){i(new Pe('URL could not be dereferenced, an error occurred.','jsonld.LoadDocumentError',{code:'loading document failed',url:r,cause:a}),{contextUrl:null,documentUrl:r,document:null})}})}a=a||{};var i=new t.RequestQueue,o='usePromise'in a?a.usePromise:'undefined'!=typeof Promise;return o?i.wrapLoader(function(n){return t.promisify(r,n)}):i.wrapLoader(r)},t.documentLoaders.node=function(n){function r(a,c,u){function f(n,i,s){if(m={contextUrl:null,documentUrl:a,document:s||null},n)return u(new Pe('URL could not be dereferenced, an error occurred.','jsonld.LoadDocumentError',{code:'loading document failed',url:a,cause:n}),m);var d=l.STATUS_CODES[i.statusCode];if(400<=i.statusCode)return u(new Pe('URL could not be dereferenced: '+d,'jsonld.InvalidUrl',{code:'loading document failed',url:a,httpStatusCode:i.statusCode}),m);if(i.headers.link&&'application/ld+json'!==i.headers['content-type']){var f=t.parseLinkHeader(i.headers.link)[Me];if(H(f))return u(new Pe('URL could not be dereferenced, it has more than one associated HTTP Link Header.','jsonld.InvalidUrl',{code:'multiple context link headers',url:a}),m);f&&(m.contextUrl=f.target)}return 300<=i.statusCode&&400>i.statusCode&&i.headers.location?c.length===o?u(new Pe('URL could not be dereferenced; there were too many redirects.','jsonld.TooManyRedirects',{code:'loading document failed',url:a,httpStatusCode:i.statusCode,redirects:c}),m):-1===c.indexOf(a)?(c.push(a),r(i.headers.location,c,u)):u(new Pe('URL could not be dereferenced; infinite redirection was detected.','jsonld.InfiniteRedirectDetected',{code:'recursive context inclusion',url:a,httpStatusCode:i.statusCode,redirects:c}),m):void(c.push(a),u(n,m))}if(0!==a.indexOf('http:')&&0!==a.indexOf('https:'))return u(new Pe('URL could not be dereferenced; only "http" and "https" URLs are supported.','jsonld.InvalidUrl',{code:'loading document failed',url:a}),{contextUrl:null,documentUrl:a,document:null});if(n.secure&&0!==a.indexOf('https'))return u(new Pe('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".','jsonld.InvalidUrl',{code:'loading document failed',url:a}),{contextUrl:null,documentUrl:a,document:null});var m=null;if(null!=m)return u(null,m);var h={Accept:d};for(var g in n.headers)h[g]=n.headers[g];s({url:a,headers:h,strictSSL:i,followRedirect:!1},f)}n=n||{};var i=!('strictSSL'in n)||n.strictSSL,o='maxRedirects'in n?n.maxRedirects:-1,s='request'in n?n.request:a(52),d='application/ld+json, application/json',l=a(52),c=new t.RequestQueue;if(n.usePromise)return c.wrapLoader(function(n){return t.promisify(r,n,[])});var u=n.headers||{};if('Accept'in u||'accept'in u)throw new RangeError('Accept header may not be specified as an option; only "'+d+'" is supported.');return c.wrapLoader(function(t,n){r(t,[],n)})},t.documentLoaders.xhr=function(n){function a(a,i){if(0!==a.indexOf('http:')&&0!==a.indexOf('https:'))return i(new Pe('URL could not be dereferenced; only "http" and "https" URLs are supported.','jsonld.InvalidUrl',{code:'loading document failed',url:a}),{contextUrl:null,documentUrl:a,document:null});if(n.secure&&0!==a.indexOf('https'))return i(new Pe('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".','jsonld.InvalidUrl',{code:'loading document failed',url:a}),{contextUrl:null,documentUrl:a,document:null});var o=n.xhr||XMLHttpRequest,s=new o;s.onload=function(){if(400<=s.status)return i(new Pe('URL could not be dereferenced: '+s.statusText,'jsonld.LoadDocumentError',{code:'loading document failed',url:a,httpStatusCode:s.status}),{contextUrl:null,documentUrl:a,document:null});var n={contextUrl:null,documentUrl:a,document:s.response},o=s.getResponseHeader('Content-Type'),d;if(r.test(s.getAllResponseHeaders())&&(d=s.getResponseHeader('Link')),d&&'application/ld+json'!==o){if(d=t.parseLinkHeader(d)[Me],H(d))return i(new Pe('URL could not be dereferenced, it has more than one associated HTTP Link Header.','jsonld.InvalidUrl',{code:'multiple context link headers',url:a}),n);d&&(n.contextUrl=d.target)}i(null,n)},s.onerror=function(){i(new Pe('URL could not be dereferenced, an error occurred.','jsonld.LoadDocumentError',{code:'loading document failed',url:a}),{contextUrl:null,documentUrl:a,document:null})},s.open('GET',a,!0),s.setRequestHeader('Accept','application/ld+json, application/json'),s.send()}n=n||{};var r=/(^|(\r\n))link:/i,i=new t.RequestQueue,o='usePromise'in n?n.usePromise:'undefined'!=typeof Promise;return o?i.wrapLoader(function(n){return t.promisify(a,n)}):i.wrapLoader(a)},t.useDocumentLoader=function(n){if(!(n in t.documentLoaders))throw new Pe('Unknown document loader type: "'+n+'"','jsonld.UnknownDocumentLoader',{type:n});t.documentLoader=t.documentLoaders[n].apply(t,Array.prototype.slice.call(arguments,1))},t.processContext=function(n,a){var r={},i=2;3<arguments.length&&(r=arguments[2]||{},i+=1);var o=arguments[i];return'base'in r||(r.base=''),'documentLoader'in r||(r.documentLoader=t.loadDocument),null===a?o(null,U(r)):void(a=re(a),!(q(a)&&'@context'in a)&&(a={"@context":a}),oe(a,r,function(t,a){if(t)return o(t);try{a=new Oe().processContext(n,a,r)}catch(t){return o(t)}o(null,a)}))},t.hasProperty=function(t,n){var a=!1;if(n in t){var r=t[n];a=!H(r)||0<r.length}return a},t.hasValue=function(n,a,r){var o=!1;if(t.hasProperty(n,a)){var s=n[a],d=te(s);if(H(s)||d){d&&(s=s['@list']);for(var l=0;l<s.length;++l)if(t.compareValues(r,s[l])){o=!0;break}}else H(r)||(o=t.compareValues(r,s))}return o},t.addValue=function(n,a,r,o){if(o=o||{},'propertyIsArray'in o||(o.propertyIsArray=!1),'allowDuplicate'in o||(o.allowDuplicate=!0),H(r)){0===r.length&&o.propertyIsArray&&!(a in n)&&(n[a]=[]);for(var s=0;s<r.length;++s)t.addValue(n,a,r[s],o)}else if(a in n){var i=!o.allowDuplicate&&t.hasValue(n,a,r);H(n[a])||i&&!o.propertyIsArray||(n[a]=[n[a]]),i||n[a].push(r)}else n[a]=o.propertyIsArray?[r]:r},t.getValues=function(t,n){var a=t[n]||[];return H(a)||(a=[a]),a},t.removeProperty=function(t,n){delete t[n]},t.removeValue=function(n,a,r,i){i=i||{},'propertyIsArray'in i||(i.propertyIsArray=!1);var o=t.getValues(n,a).filter(function(n){return!t.compareValues(n,r)});0===o.length?t.removeProperty(n,a):1!==o.length||i.propertyIsArray?n[a]=o:n[a]=o[0]},t.compareValues=function(t,n){return t===n||ee(t)&&ee(n)&&t['@value']===n['@value']&&t['@type']===n['@type']&&t['@language']===n['@language']&&t['@index']===n['@index']||q(t)&&'@id'in t&&q(n)&&'@id'in n&&t['@id']===n['@id']},t.getContextValue=function(t,n,a){var r=null;if(null===n)return r;if('@language'===a&&a in t&&(r=t[a]),t.mappings[n]){var i=t.mappings[n];Y(a)?r=i:a in i&&(r=i[a])}return r};var be={};if(t.registerRDFParser=function(t,n){be[t]=n},t.unregisterRDFParser=function(t){delete be[t]},c){if('undefined'==typeof ye)var ye=null;if('undefined'==typeof we)var we={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12}}var ve='http://www.w3.org/2001/XMLSchema#boolean',xe='http://www.w3.org/2001/XMLSchema#double',_e='http://www.w3.org/2001/XMLSchema#integer',ke='http://www.w3.org/2001/XMLSchema#string',Ce='http://www.w3.org/1999/02/22-rdf-syntax-ns#',Ee=Ce+'List',Te=Ce+'first',Ae=Ce+'rest',Se=Ce+'nil',Ie=Ce+'type',Ne=Ce+'PlainLiteral',je=Ce+'XMLLiteral',Le=Ce+'object',Re=Ce+'langString',Me='http://www.w3.org/ns/json-ld#context',De=10,Pe=function(t,n,a){c?(Error.call(this),Error.captureStackTrace(this,this.constructor)):'undefined'!=typeof Error&&(this.stack=new Error().stack),this.name=n||'jsonld.Error',this.message=t||'An unspecified JSON-LD error occurred.',this.details=a||{}};c?a(52).inherits(Pe,Error):'undefined'!=typeof Error&&(Pe.prototype=new Error);var Oe=function(){};Oe.prototype.compact=function(n,a,r,o){if(H(r)){for(var s=[],d=0,i;d<r.length;++d)i=this.compact(n,a,r[d],o),null!==i&&s.push(i);if(o.compactArrays&&1===s.length){var l=t.getContextValue(n,a,'@container');null===l&&(s=s[0])}return s}if(q(r)){if(o.link&&'@id'in r&&r['@id']in o.link)for(var c=o.link[r['@id']],d=0;d<c.length;++d)if(c[d].expanded===r)return c[d].compacted;if(ee(r)||Q(r)){var s=M(n,a,r);return o.link&&Q(r)&&(!(r['@id']in o.link)&&(o.link[r['@id']]=[]),o.link[r['@id']].push({expanded:r,compacted:s})),s}var u='@reverse'===a,s={};o.link&&'@id'in r&&(!(r['@id']in o.link)&&(o.link[r['@id']]=[]),o.link[r['@id']].push({expanded:r,compacted:s}));for(var f=Object.keys(r).sort(),m=0;m<f.length;++m){var h=f[m],g=r[h];if('@id'===h||'@type'===h){var b;if(V(g))b=R(n,g,null,{vocab:'@type'===h});else{b=[];for(var y=0;y<g.length;++y)b.push(R(n,g[y],null,{vocab:!0}))}var w=R(n,h),v=H(b)&&0===g.length;t.addValue(s,w,b,{propertyIsArray:v});continue}if('@reverse'===h){var b=this.compact(n,'@reverse',g,o);for(var x in b)if(n.mappings[x]&&n.mappings[x].reverse){var _=b[x],l=t.getContextValue(n,x,'@container'),k='@set'===l||!o.compactArrays;t.addValue(s,x,_,{propertyIsArray:k}),delete b[x]}if(0<Object.keys(b).length){var w=R(n,h);t.addValue(s,w,b)}continue}if('@index'===h){var l=t.getContextValue(n,a,'@container');if('@index'===l)continue;var w=R(n,h);t.addValue(s,w,g);continue}if('@graph'!==h&&'@list'!==h&&F(h)){var w=R(n,h);t.addValue(s,w,g);continue}if(0===g.length){var C=R(n,h,g,{vocab:!0},u);t.addValue(s,C,g,{propertyIsArray:!0})}for(var y=0;y<g.length;++y){var E=g[y],C=R(n,h,E,{vocab:!0},u),l=t.getContextValue(n,C,'@container'),T=te(E),A=null;T&&(A=E['@list']);var S=this.compact(n,C,T?A:E,o);if(T)if(H(S)||(S=[S]),'@list'!==l){var I={};I[R(n,'@list')]=S,S=I,'@index'in E&&(S[R(n,'@index')]=E['@index'])}else if(C in s)throw new Pe('JSON-LD compact error; property has a "@list" @container rule but there is more than a single @list that matches the compacted term in the document. Compaction might mix unwanted items into the list.','jsonld.SyntaxError',{code:'compaction to list of lists'});if('@language'===l||'@index'===l){var N;C in s?N=s[C]:s[C]=N={},'@language'===l&&ee(S)&&(S=S['@value']),t.addValue(N,E[l],S)}else{var v=!o.compactArrays||'@set'===l||'@list'===l||H(S)&&0===S.length||'@list'===h||'@graph'===h;t.addValue(s,C,S,{propertyIsArray:v})}}}return s}return r},Oe.prototype.expand=function(n,a,r,o,s){var l=this;if(null===r||void 0===r)return null;if(!H(r)&&!q(r))return s||null!==a&&'@graph'!==P(n,a,{vocab:!0})?f(n,a,r):null;if(H(r)){var c=[],u=t.getContextValue(n,a,'@container');s=s||'@list'===u;for(var m=0,i;m<r.length;++m){if(i=l.expand(n,a,r[m],o),s&&(H(i)||te(i)))throw new Pe('Invalid JSON-LD syntax; lists of lists are not permitted.','jsonld.SyntaxError',{code:'list of lists'});null!==i&&(H(i)?c=c.concat(i):c.push(i))}return c}'@context'in r&&(n=l.processContext(n,r['@context'],o));for(var h=P(n,a,{vocab:!0}),c={},g=Object.keys(r).sort(),b=0;b<g.length;++b){var y=g[b],w=r[y],v;if('@context'!==y){var x=P(n,y,{vocab:!0});if(null!==x&&(ae(x)||F(x))){if(F(x)){if('@reverse'===h)throw new Pe('Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.','jsonld.SyntaxError',{code:'invalid reverse property map',value:w});if(x in c)throw new Pe('Invalid JSON-LD syntax; colliding keywords detected.','jsonld.SyntaxError',{code:'colliding keywords',keyword:x})}if('@id'===x&&!V(w)){if(!o.isFrame)throw new Pe('Invalid JSON-LD syntax; "@id" value must a string.','jsonld.SyntaxError',{code:'invalid @id value',value:w});if(!q(w))throw new Pe('Invalid JSON-LD syntax; "@id" value must be a string or an object.','jsonld.SyntaxError',{code:'invalid @id value',value:w})}if('@type'===x&&W(w),'@graph'===x&&!(q(w)||H(w)))throw new Pe('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.','jsonld.SyntaxError',{code:'invalid @graph value',value:w});if('@value'===x&&(q(w)||H(w)))throw new Pe('Invalid JSON-LD syntax; "@value" value must not be an object or an array.','jsonld.SyntaxError',{code:'invalid value object value',value:w});if('@language'===x){if(null===w)continue;if(!V(w))throw new Pe('Invalid JSON-LD syntax; "@language" value must be a string.','jsonld.SyntaxError',{code:'invalid language-tagged string',value:w});w=w.toLowerCase()}if('@index'===x&&!V(w))throw new Pe('Invalid JSON-LD syntax; "@index" value must be a string.','jsonld.SyntaxError',{code:'invalid @index value',value:w});if('@reverse'===x){if(!q(w))throw new Pe('Invalid JSON-LD syntax; "@reverse" value must be an object.','jsonld.SyntaxError',{code:'invalid @reverse value',value:w});if(v=l.expand(n,'@reverse',w,o),'@reverse'in v)for(var _ in v['@reverse'])t.addValue(c,_,v['@reverse'][_],{propertyIsArray:!0});var k=c['@reverse']||null;for(var _ in v)if('@reverse'!=_){null===k&&(k=c['@reverse']={}),t.addValue(k,_,[],{propertyIsArray:!0});for(var C=v[_],E=0,T;E<C.length;++E){if(T=C[E],ee(T)||te(T))throw new Pe('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.','jsonld.SyntaxError',{code:'invalid reverse property value',value:v});t.addValue(k,_,T,{propertyIsArray:!0})}}continue}var u=t.getContextValue(n,y,'@container');if('@language'===u&&q(w))v=d(w);else if('@index'===u&&q(w))v=function t(a){for(var r=[],i=Object.keys(w).sort(),s=0;s<i.length;++s){var d=i[s],c=w[d];H(c)||(c=[c]),c=l.expand(n,a,c,o,!1);for(var u=0,f;u<c.length;++u)f=c[u],'@index'in f||(f['@index']=d),r.push(f)}return r}(y);else{var A='@list'===x;if(A||'@set'===x){var S=a;if(A&&'@graph'===h&&(S=null),v=l.expand(n,S,w,o,A),A&&te(v))throw new Pe('Invalid JSON-LD syntax; lists of lists are not permitted.','jsonld.SyntaxError',{code:'list of lists'})}else v=l.expand(n,y,w,o,!1)}if(null!==v||'@value'===x){if('@list'===x||te(v)||'@list'!==u||(v=H(v)?v:[v],v={"@list":v}),n.mappings[y]&&n.mappings[y].reverse){var k=c['@reverse']=c['@reverse']||{};H(v)||(v=[v]);for(var E=0,T;E<v.length;++E){if(T=v[E],ee(T)||te(T))throw new Pe('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.','jsonld.SyntaxError',{code:'invalid reverse property value',value:v});t.addValue(k,x,T,{propertyIsArray:!0})}continue}var I=-1===['@index','@id','@type','@value','@language'].indexOf(x);t.addValue(c,x,v,{propertyIsArray:I})}}}}g=Object.keys(c);var N=g.length;if('@value'in c){if('@type'in c&&'@language'in c)throw new Pe('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and "@language".','jsonld.SyntaxError',{code:'invalid value object',element:c});var j=N-1;if('@type'in c&&(j-=1),'@index'in c&&(j-=1),'@language'in c&&(j-=1),0!=j)throw new Pe('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and at most one other property which can be "@type" or "@language".','jsonld.SyntaxError',{code:'invalid value object',element:c});if(null===c['@value'])c=null;else if('@language'in c&&!V(c['@value']))throw new Pe('Invalid JSON-LD syntax; only strings may be language-tagged.','jsonld.SyntaxError',{code:'invalid language-tagged value',element:c});else if('@type'in c&&(!ae(c['@type'])||0===c['@type'].indexOf('_:')))throw new Pe('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".','jsonld.SyntaxError',{code:'invalid typed value',element:c})}else if('@type'in c&&!H(c['@type']))c['@type']=[c['@type']];else if('@set'in c||'@list'in c){if(1<N&&!(2===N&&'@index'in c))throw new Pe('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".','jsonld.SyntaxError',{code:'invalid set or list object',element:c});'@set'in c&&(c=c['@set'],g=Object.keys(c),N=g.length)}else 1===N&&'@language'in c&&(c=null);return q(c)&&!o.keepFreeFloatingNodes&&!s&&(null===a||'@graph'===h)&&(0===N||'@value'in c||'@list'in c||1===N&&'@id'in c)&&(c=null),c},Oe.prototype.createNodeMap=function(t,n){n=n||{};var a=n.namer||n.issuer||new ce('_:b'),r={"@default":{}};return w(t,r,'@default',a),v(r)},Oe.prototype.flatten=function(t){for(var n=this.createNodeMap(t),a=[],r=Object.keys(n).sort(),i=0,o;i<r.length;++i)o=n[r[i]],Q(o)||a.push(o);return a},Oe.prototype.frame=function(t,n,a){var r={options:a,graphs:{"@default":{},"@merged":{}},subjectStack:[],link:{}},i=new ce('_:b');w(t,r.graphs,'@merged',i),r.subjects=r.graphs['@merged'];var o=[];return x(r,Object.keys(r.subjects).sort(),n,o,null),o},Oe.prototype.normalize=function(t,n,a){return'URDNA2015'===n.algorithm?new Be(n).main(t,a):'URGNA2012'===n.algorithm?new Ue(n).main(t,a):void a(new Error('Invalid RDF Dataset Normalization algorithm: '+n.algorithm))},Oe.prototype.fromRDF=function(n,a,r){var d={},l={"@default":d},c={};for(var u in n){var f=n[u];u in l||(l[u]={}),'@default'==u||u in d||(d[u]={"@id":u});for(var m=l[u],h=0;h<f.length;++h){var g=f[h],y=g.subject.value,w=g.predicate.value,v=g.object;y in m||(m[y]={"@id":y});var o=m[y],x='IRI'===v.type||'blank node'===v.type;if(x&&!(v.value in m)&&(m[v.value]={"@id":v.value}),w===Ie&&!a.useRdfType&&x){t.addValue(o,'@type',v.value,{propertyIsArray:!0});continue}var _=b(v,a.useNativeTypes);if(t.addValue(o,w,_,{propertyIsArray:!0}),x)if(v.value===Se){var k=m[v.value];'usages'in k||(k.usages=[]),k.usages.push({node:o,property:w,value:_})}else c[v.value]=!(v.value in c)&&{node:o,property:w,value:_}}}for(var u in l){var C=l[u];if(Se in C){for(var E=C[Se],T=0;T<E.usages.length;++T){for(var i=E.usages[T],o=i.node,A=i.property,S=i.value,I=[],N=[],L=Object.keys(o).length;A===Ae&&q(c[o['@id']])&&H(o[Te])&&1===o[Te].length&&H(o[Ae])&&1===o[Ae].length&&(3===L||4===L&&H(o['@type'])&&1===o['@type'].length&&o['@type'][0]===Ee)&&(I.push(o[Te][0]),N.push(o['@id']),i=c[o['@id']],o=i.node,A=i.property,S=i.value,L=Object.keys(o).length,0===o['@id'].indexOf('_:')););if(A===Te){if(o['@id']===Se)continue;S=C[S['@id']][Ae][0],I.pop(),N.pop()}delete S['@id'],S['@list']=I.reverse();for(var R=0;R<N.length;++R)delete C[N[R]]}delete E.usages}}for(var j=[],M=Object.keys(d).sort(),T=0;T<M.length;++T){var D=M[T],o=d[D];if(D in l)for(var f=o['@graph']=[],C=l[D],P=Object.keys(C).sort(),O=0,B;O<P.length;++O)B=C[P[O]],Q(B)||f.push(B);Q(o)||j.push(o)}r(null,j)},Oe.prototype.toRDF=function(t,n){var a=new ce('_:b'),r={"@default":{}};w(t,r,'@default',a);for(var o={},s=Object.keys(r).sort(),d=0,i;d<s.length;++d)i=s[d],('@default'===i||ae(i))&&(o[i]=m(r[i],a,n));return o},Oe.prototype.processContext=function(n,a,r){q(a)&&'@context'in a&&H(a['@context'])&&(a=a['@context']);var o=H(a)?a:[a];if(0===o.length)return n.clone();for(var s=n,d=0,i;d<o.length;++d){if(i=o[d],null===i){s=n=U(r);continue}if(q(i)&&'@context'in i&&(i=i['@context']),!q(i))throw new Pe('Invalid JSON-LD syntax; @context must be an object.','jsonld.SyntaxError',{code:'invalid local context',context:i});if(t.cache.activeCtx){var l=t.cache.activeCtx.get(n,i);if(l){s=n=l;continue}}n=s,s=s.clone();var c={};if('@base'in i){var u=i['@base'];if(null===u)u=null;else if(!V(u))throw new Pe('Invalid JSON-LD syntax; the value of "@base" in a @context must be a string or null.','jsonld.SyntaxError',{code:'invalid base IRI',context:i});else if(''!==u&&!ae(u))throw new Pe('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI or the empty string.','jsonld.SyntaxError',{code:'invalid base IRI',context:i});null!==u&&(u=t.url.parse(u||'')),s['@base']=u,c['@base']=!0}if('@vocab'in i){var f=i['@vocab'];if(null===f)delete s['@vocab'];else if(!V(f))throw new Pe('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.','jsonld.SyntaxError',{code:'invalid vocab mapping',context:i});else if(!ae(f))throw new Pe('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.','jsonld.SyntaxError',{code:'invalid vocab mapping',context:i});else s['@vocab']=f;c['@vocab']=!0}if('@language'in i){var f=i['@language'];if(null===f)delete s['@language'];else if(!V(f))throw new Pe('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.','jsonld.SyntaxError',{code:'invalid default language',context:i});else s['@language']=f.toLowerCase();c['@language']=!0}for(var m in i)D(s,i,m,c);t.cache.activeCtx&&t.cache.activeCtx.set(n,i,s)}return s};var Be=function(){var n={subject:'s',object:'o',name:'g'},a=function(t){t=t||{},this.name='URDNA2015',this.options=t,this.blankNodeInfo={},this.hashToBlankNodes={},this.canonicalIssuer=new ce('_:c14n'),this.quads=[],this.schedule={},this.schedule.MAX_DEPTH='maxCallStackDepth'in t?t.maxCallStackDepth:500,this.schedule.MAX_TOTAL_DEPTH='maxTotalCallStackDepth'in t?t.maxCallStackDepth:4294967295,this.schedule.depth=0,this.schedule.totalDepth=0,this.schedule.timeSlice='timeSlice'in t?t.timeSlice:10};return a.prototype.doWork=function(n,a){var r=this.schedule;return r.totalDepth>=r.MAX_TOTAL_DEPTH?a(new Error('Maximum total call stack depth exceeded; normalization aborting.')):void function i(){if(r.depth===r.MAX_DEPTH)return r.depth=0,r.running=!1,t.nextTick(i);var o=new Date().getTime();return r.running||(r.start=new Date().getTime(),r.deadline=r.start+r.timeSlice),o<r.deadline?(r.running=!0,r.depth++,r.totalDepth++,n(function(t,n){r.depth--,r.totalDepth--,a(t,n)})):void(r.depth=0,r.running=!1,t.setImmediate(i))}()},a.prototype.forEach=function(t,n,a){var r=this,i=0,o,s;if(H(t))s=t.length,o=function(){return i!==s&&(o.value=t[i++],o.key=i,!0)};else{var d=Object.keys(t);s=d.length,o=function(){return i!==s&&(o.key=d[i++],o.value=t[o.key],!0)}}(function t(i,s){return i?a(i):o()?r.doWork(function(){n(o.value,o.key,t)}):void a()})()},a.prototype.waterfall=function(t,n){var a=this;a.forEach(t,function(t,n,r){a.doWork(t,r)},n)},a.prototype.whilst=function(t,n,a){var r=this;(function i(o){return o?a(o):t()?void r.doWork(n,i):a()})()},a.prototype.main=function(t,n){var a=this;a.schedule.start=new Date().getTime();var r;if(a.options.format&&'application/nquads'!==a.options.format)return n(new Pe('Unknown output format.','jsonld.UnknownFormat',{format:a.options.format}));var o={};a.waterfall([function(n){a.forEach(t,function(t,n,r){'@default'===n&&(n=null),a.forEach(t,function(t,r,i){null!==n&&(0===n.indexOf('_:')?t.name={type:'blank node',value:n}:t.name={type:'IRI',value:n}),a.quads.push(t),a.forEachComponent(t,function(n){if('blank node'===n.type){var r=n.value;r in a.blankNodeInfo?a.blankNodeInfo[r].quads.push(t):(o[r]=!0,a.blankNodeInfo[r]={quads:[t]})}}),i()},r)},n)},function(t){var n=!0;a.whilst(function(){return n},function(t){n=!1,a.hashToBlankNodes={},a.waterfall([function(t){a.forEach(o,function(t,n,r){a.hashFirstDegreeQuads(n,function(t,i){return t?r(t):void(i in a.hashToBlankNodes?a.hashToBlankNodes[i].push(n):a.hashToBlankNodes[i]=[n],r())})},t)},function(t){var r=Object.keys(a.hashToBlankNodes).sort();a.forEach(r,function(t,r,i){var s=a.hashToBlankNodes[t];if(1<s.length)return i();var d=s[0];a.canonicalIssuer.getId(d),delete o[d],delete a.hashToBlankNodes[t],n=!0,i()},t)}],t)},t)},function(t){var n=Object.keys(a.hashToBlankNodes).sort();a.forEach(n,function(t,n,r){var i=[],o=a.hashToBlankNodes[t];a.waterfall([function(t){a.forEach(o,function(t,n,r){if(a.canonicalIssuer.hasId(t))return r();var o=new ce('_:b');o.getId(t),a.hashNDegreeQuads(t,o,function(t,n){return t?r(t):void(i.push(n),r())})},t)},function(t){i.sort(function(t,n){return t.hash<n.hash?-1:t.hash>n.hash?1:0}),a.forEach(i,function(t,n,r){for(var i in t.issuer.existing)a.canonicalIssuer.getId(i);r()},t)}],r)},t)},function(t){var n=[];a.waterfall([function(t){a.forEach(a.quads,function(t,r,i){a.forEachComponent(t,function(t){'blank node'===t.type&&0!==t.value.indexOf(a.canonicalIssuer.prefix)&&(t.value=a.canonicalIssuer.getId(t.value))}),n.push(le(t)),i()},t)},function(t){return n.sort(),'application/nquads'===a.options.format?(r=n.join(''),t()):void(r=se(n.join('')),t())}],t)}],function(t){n(t,r)})},a.prototype.hashFirstDegreeQuads=function(t,n){var a=this,r=a.blankNodeInfo[t];if('hash'in r)return n(null,r.hash);var i=[],o=r.quads;a.forEach(o,function(n,r,o){var s={predicate:n.predicate};a.forEachComponent(n,function(n,r){s[r]=a.modifyFirstDegreeComponent(t,n,r)}),i.push(le(s)),o()},function(t){return t?n(t):void(i.sort(),r.hash=qe.hashNQuads(a.name,i),n(null,r.hash))})},a.prototype.modifyFirstDegreeComponent=function(t,n){return'blank node'===n.type?(n=re(n),n.value=n.value===t?'_:a':'_:z',n):n},a.prototype.hashRelatedBlankNode=function(t,n,a,r,i){var o=this,s;o.waterfall([function(n){return o.canonicalIssuer.hasId(t)?(s=o.canonicalIssuer.getId(t),n()):a.hasId(t)?(s=a.getId(t),n()):void o.hashFirstDegreeQuads(t,function(t,a){return t?n(t):void(s=a,n())})}],function(t){if(t)return i(t);var a=new qe(o.name);return a.update(r),'g'!==r&&a.update(o.getRelatedPredicate(n)),a.update(s),i(null,a.digest())})},a.prototype.getRelatedPredicate=function(t){return'<'+t.predicate.value+'>'},a.prototype.hashNDegreeQuads=function(t,n,a){var r=this,i=new qe(r.name),o;r.waterfall([function(a){r.createHashToRelated(t,n,function(t,n){return t?a(t):void(o=n,a())})},function(t){var a=Object.keys(o).sort();r.forEach(a,function(t,a,s){i.update(t);var d='',l=new Fe(o[t]),c;r.whilst(function(){return l.hasNext()},function(t){var a=l.next(),i=n.clone(),o='',s=[];r.waterfall([function(n){r.forEach(a,function(n,a,l){return r.canonicalIssuer.hasId(n)?o+=r.canonicalIssuer.getId(n):(!i.hasId(n)&&s.push(n),o+=i.getId(n)),0!==d.length&&o.length>=d.length&&o>d?t():void l()},n)},function(n){r.forEach(s,function(n,a,s){r.hashNDegreeQuads(n,i,function(a,r){return a?s(a):(o+=i.getId(n),o+='<'+r.hash+'>',i=r.issuer,0!==d.length&&o.length>=d.length&&o>d?t():void s())})},n)},function(t){(0===d.length||o<d)&&(d=o,c=i),t()}],t)},function(t){return t?s(t):void(i.update(d),n=c,s())})},t)}],function(t){a(t,{hash:i.digest(),issuer:n})})},a.prototype.createHashToRelated=function(t,a,r){var i=this,o={},s=i.blankNodeInfo[t].quads;i.forEach(s,function(r,s,d){i.forEach(r,function(s,d,l){if('predicate'===d||'blank node'!==s.type||s.value===t)return l();var c=s.value,u=n[d];i.hashRelatedBlankNode(c,r,a,u,function(t,n){return t?l(t):void(n in o?o[n].push(c):o[n]=[c],l())})},d)},function(t){r(t,o)})},a.prototype.forEachComponent=function(t,n){for(var a in t)'predicate'!=a&&n(t[a],a,t)},a}(),Ue=function(){var t=function(t){Be.call(this,t),this.name='URGNA2012'};return t.prototype=new Be,t.prototype.modifyFirstDegreeComponent=function(t,n,a){return'blank node'===n.type?(n=re(n),n.value='name'===a?'_:g':n.value===t?'_:a':'_:z',n):n},t.prototype.getRelatedPredicate=function(t){return t.predicate.value},t.prototype.createHashToRelated=function(t,n,a){var r=this,i={},o=r.blankNodeInfo[t].quads;r.forEach(o,function(a,o,s){var d,l;if('blank node'===a.subject.type&&a.subject.value!==t)l=a.subject.value,d='p';else if('blank node'===a.object.type&&a.object.value!==t)l=a.object.value,d='r';else return s();r.hashRelatedBlankNode(l,a,n,d,function(t,n){n in i?i[n].push(l):i[n]=[l],s()})},function(t){a(t,i)})},t}();Object.keys||(Object.keys=function(t){if(t!==Object(t))throw new TypeError('Object.keys called on non-object');var n=[];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.push(a);return n}),t.registerRDFParser('application/nquads',se),t.registerRDFParser('rdfa-api',pe),t.IdentifierIssuer=ce,t.UniqueNamer=ce,ce.prototype.clone=function(){var t=new ce(this.prefix);return t.counter=this.counter,t.existing=re(this.existing),t},ce.prototype.getId=function(t){if(t&&t in this.existing)return this.existing[t];var n=this.prefix+this.counter;return this.counter+=1,t&&(this.existing[t]=n),n},ce.prototype.getName=ce.prototype.getName,ce.prototype.hasId=function(t){return t in this.existing},ce.prototype.isNamed=ce.prototype.hasId;var Fe=function(t){this.list=t.sort(),this.done=!1,this.left={};for(var n=0;n<t.length;++n)this.left[t[n]]=!0};Fe.prototype.hasNext=function(){return!this.done},Fe.prototype.next=function(){for(var t=this.list.slice(),n=null,a=0,r=this.list.length,o=0;o<r;++o){var i=this.list[o],s=this.left[i];(null==n||i>n)&&(s&&0<o&&i>this.list[o-1]||!s&&o<r-1&&i>this.list[o+1])&&(n=i,a=o)}if(null===n)this.done=!0;else{var d=this.left[n]?a-1:a+1;this.list[a]=this.list[d],this.list[d]=n;for(var o=0;o<r;++o)this.list[o]>n&&(this.left[this.list[o]]=!this.left[this.list[o]])}return t};var qe=function(t){if(!(this instanceof qe))return new qe(t);if(-1===['URDNA2015','URGNA2012'].indexOf(t))throw new Error('Invalid RDF Dataset Normalization algorithm: '+t);qe._init.call(this,t)};if(qe.hashNQuads=function(t,n){for(var a=new qe(t),r=0;r<n.length;++r)a.update(n[r]);return a.digest()},function(t){if(t){var n=a(52);return qe._init=function(t){t='URDNA2015'===t?'sha256':'sha1',this.md=n.createHash(t)},qe.prototype.update=function(t){return this.md.update(t,'utf8')},void(qe.prototype.digest=function(){return this.md.digest('hex')})}qe._init=function(t){t='URDNA2015'===t?new l.Algorithm:new o.Algorithm,this.md=new r(t)},qe.prototype.update=function(t){return this.md.update(t)},qe.prototype.digest=function(){return this.md.digest().toHex()};var r=function(t){if(!(this instanceof r))return new r(t);if(this._algorithm=t,!r._padding||r._padding.length<this._algorithm.blockSize){r._padding='\x80';for(var a='\0',i=64;0<i;)1&i&&(r._padding+=a),i>>>=1,0<i&&(a+=a)}this.start()};r.prototype.start=function(){this.messageLength=0,this.fullMessageLength=[];for(var t=this._algorithm.messageLengthSize/4,n=0;n<t;++n)this.fullMessageLength.push(0);return this._input=new r.ByteBuffer,this.state=this._algorithm.start(),this},r.prototype.update=function(t){t=new r.ByteBuffer(unescape(encodeURIComponent(t))),this.messageLength+=t.length();var n=t.length();n=[n/4294967296>>>0,n>>>0];for(var a=this.fullMessageLength.length-1;0<=a;--a)this.fullMessageLength[a]+=n[1],n[1]=n[0]+(this.fullMessageLength[a]/4294967296>>>0),this.fullMessageLength[a]>>>=0,n[0]=n[1]/4294967296>>>0;for(this._input.putBytes(t.bytes());this._input.length()>=this._algorithm.blockSize;)this.state=this._algorithm.digest(this.state,this._input);return(2048<this._input.read||0===this._input.length())&&this._input.compact(),this},r.prototype.digest=function(){var t=new r.ByteBuffer;t.putBytes(this._input.bytes());var n=this.fullMessageLength[this.fullMessageLength.length-1]+this._algorithm.messageLengthSize,a=n&this._algorithm.blockSize-1;t.putBytes(r._padding.substr(0,this._algorithm.blockSize-a));for(var o=new r.ByteBuffer,s=0;s<this.fullMessageLength.length;++s)o.putInt32(this.fullMessageLength[s]<<3|this.fullMessageLength[s+1]>>>28);this._algorithm.writeMessageLength(t,o);var i=this._algorithm.digest(this.state.copy(),t),d=new r.ByteBuffer;return i.write(d),d},r.ByteBuffer=function(t){this.data='string'==typeof t?t:'',this.read=0},r.ByteBuffer.prototype.putInt32=function(t){this.data+=_StringfromCharCode(255&t>>24)+_StringfromCharCode(255&t>>16)+_StringfromCharCode(255&t>>8)+_StringfromCharCode(255&t)},r.ByteBuffer.prototype.getInt32=function(){var t=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,t},r.ByteBuffer.prototype.putBytes=function(t){this.data+=t},r.ByteBuffer.prototype.bytes=function(){return this.data.slice(this.read)},r.ByteBuffer.prototype.length=function(){return this.data.length-this.read},r.ByteBuffer.prototype.compact=function(){this.data=this.data.slice(this.read),this.read=0},r.ByteBuffer.prototype.toHex=function(){for(var t='',n=this.read,a;n<this.data.length;++n)a=this.data.charCodeAt(n),16>a&&(t+='0'),t+=a.toString(16);return t};var o={_w:null};o.Algorithm=function(){this.name='sha1',this.blockSize=64,this.digestLength=20,this.messageLengthSize=8},o.Algorithm.prototype.start=function(){return o._w||(o._w=Array(80)),o._createState()},o.Algorithm.prototype.writeMessageLength=function(t,n){t.putBytes(n.bytes())},o.Algorithm.prototype.digest=function(n,r){for(var s=r.length(),l=o._w,u,t,a,m,c,d,h,f;64<=s;){for(t=n.h0,a=n.h1,m=n.h2,c=n.h3,d=n.h4,f=0;16>f;++f)u=r.getInt32(),l[f]=u,h=c^a&(m^c),u=(t<<5|t>>>27)+h+d+1518500249+u,d=c,c=m,m=a<<30|a>>>2,a=t,t=u;for(;20>f;++f)u=l[f-3]^l[f-8]^l[f-14]^l[f-16],u=u<<1|u>>>31,l[f]=u,h=c^a&(m^c),u=(t<<5|t>>>27)+h+d+1518500249+u,d=c,c=m,m=a<<30|a>>>2,a=t,t=u;for(;32>f;++f)u=l[f-3]^l[f-8]^l[f-14]^l[f-16],u=u<<1|u>>>31,l[f]=u,h=a^m^c,u=(t<<5|t>>>27)+h+d+1859775393+u,d=c,c=m,m=a<<30|a>>>2,a=t,t=u;for(;40>f;++f)u=l[f-6]^l[f-16]^l[f-28]^l[f-32],u=u<<2|u>>>30,l[f]=u,h=a^m^c,u=(t<<5|t>>>27)+h+d+1859775393+u,d=c,c=m,m=a<<30|a>>>2,a=t,t=u;for(;60>f;++f)u=l[f-6]^l[f-16]^l[f-28]^l[f-32],u=u<<2|u>>>30,l[f]=u,h=a&m|c&(a^m),u=(t<<5|t>>>27)+h+d+2400959708+u,d=c,c=m,m=a<<30|a>>>2,a=t,t=u;for(;80>f;++f)u=l[f-6]^l[f-16]^l[f-28]^l[f-32],u=u<<2|u>>>30,l[f]=u,h=a^m^c,u=(t<<5|t>>>27)+h+d+3395469782+u,d=c,c=m,m=a<<30|a>>>2,a=t,t=u;n.h0=0|n.h0+t,n.h1=0|n.h1+a,n.h2=0|n.h2+m,n.h3=0|n.h3+c,n.h4=0|n.h4+d,s-=64}return n},o._createState=function(){var t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520};return t.copy=function(){var n=o._createState();return n.h0=t.h0,n.h1=t.h1,n.h2=t.h2,n.h3=t.h3,n.h4=t.h4,n},t.write=function(n){n.putInt32(t.h0),n.putInt32(t.h1),n.putInt32(t.h2),n.putInt32(t.h3),n.putInt32(t.h4)},t};var l={_k:null,_w:null};l.Algorithm=function(){this.name='sha256',this.blockSize=64,this.digestLength=32,this.messageLengthSize=8},l.Algorithm.prototype.start=function(){return l._k||l._init(),l._createState()},l.Algorithm.prototype.writeMessageLength=function(t,n){t.putBytes(n.bytes())},l.Algorithm.prototype.digest=function(t,n){for(var r=n.length(),o=l._k,s=l._w,u,m,y,w,v,x,_,i,a,b,c,d,k,f,g;64<=r;){for(_=0;16>_;++_)s[_]=n.getInt32();for(;64>_;++_)u=s[_-2],u=(u>>>17|u<<15)^(u>>>19|u<<13)^u>>>10,m=s[_-15],m=(m>>>7|m<<25)^(m>>>18|m<<14)^m>>>3,s[_]=0|u+s[_-7]+m+s[_-16];for(i=t.h0,a=t.h1,b=t.h2,c=t.h3,d=t.h4,k=t.h5,f=t.h6,g=t.h7,_=0;64>_;++_)w=(d>>>6|d<<26)^(d>>>11|d<<21)^(d>>>25|d<<7),v=f^d&(k^f),y=(i>>>2|i<<30)^(i>>>13|i<<19)^(i>>>22|i<<10),x=i&a|b&(i^a),u=g+w+v+o[_]+s[_],m=y+x,g=f,f=k,k=d,d=0|c+u,c=b,b=a,a=i,i=0|u+m;t.h0=0|t.h0+i,t.h1=0|t.h1+a,t.h2=0|t.h2+b,t.h3=0|t.h3+c,t.h4=0|t.h4+d,t.h5=0|t.h5+k,t.h6=0|t.h6+f,t.h7=0|t.h7+g,r-=64}return t},l._createState=function(){var t={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225};return t.copy=function(){var n=l._createState();return n.h0=t.h0,n.h1=t.h1,n.h2=t.h2,n.h3=t.h3,n.h4=t.h4,n.h5=t.h5,n.h6=t.h6,n.h7=t.h7,n},t.write=function(n){n.putInt32(t.h0),n.putInt32(t.h1),n.putInt32(t.h2),n.putInt32(t.h3),n.putInt32(t.h4),n.putInt32(t.h5),n.putInt32(t.h6),n.putInt32(t.h7)},t},l._init=function(){l._k=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],l._w=Array(64)}}(c),!ye)var ze=function(){ye=a(51).XMLSerializer};if(t.url={},t.url.parsers={simple:{keys:['href','scheme','authority','path','query','fragment'],regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},full:{keys:['href','protocol','scheme','authority','auth','user','password','hostname','port','path','directory','file','query','fragment'],regex:/^(([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}},t.url.parse=function(n,a){for(var r={},s=t.url.parsers[a||'full'],o=s.regex.exec(n),d=s.keys.length;d--;)r[s.keys[d]]=void 0===o[d]?null:o[d];return r.normalizedPath=ue(r.path,!!r.authority),r},c?t.useDocumentLoader('node'):'undefined'!=typeof XMLHttpRequest&&t.useDocumentLoader('xhr'),c){t.use=function(n){switch(n){case'request':t.request=a(52);break;default:throw new Pe('Unknown extension.','jsonld.UnknownExtension',{extension:n});}};var He={exports:{},filename:s};a(52)(He,'version'),t.version=He.exports.version}return t},m=function(){return f(function(){return m()})};return!c&&a(258)?(d=[],l=function(){return f(m),m}.apply(n,d),!(void 0!==l&&(t.exports=l))):(f(m),'undefined'!=typeof t&&t.exports&&(t.exports=m),u&&('undefined'==typeof jsonld?jsonld=jsonldjs=m:jsonldjs=m)),m})()}).call(n,a(11),a(5),a(57).setImmediate,'/')},function(t,n,a){(function(r,i,o){var s,d;/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/jakearchibald/es6-promise/master/LICENSE
 * @version   2.3.0
 */(function(){'use strict';function l(t){return'function'==typeof t||'object'==typeof t&&null!==t}function c(t){return'function'==typeof t}function u(t){return'object'==typeof t&&null!==t}function f(t){de=t}function m(t){ee=t}function h(){var t=r.nextTick,n=r.versions.node.match(/^(?:(\d+)\.)?(?:(\d+)\.)?(\*|\d+)$/);return Array.isArray(n)&&'0'===n[1]&&'10'===n[2]&&(t=i),function(){t(v)}}function g(){return function(){se(v)}}function b(){var t=0,n=new ae(v),a=document.createTextNode('');return n.observe(a,{characterData:!0}),function(){a.data=t=++t%2}}function y(){var t=new MessageChannel;return t.port1.onmessage=v,function(){t.port2.postMessage(0)}}function w(){return function(){setTimeout(v,1)}}function v(){for(var t=0;t<Z;t+=2){var n=oe[t],a=oe[t+1];n(a),oe[t]=void 0,oe[t+1]=void 0}Z=0}function x(){try{var t=s,n=a(257);return se=n.runOnLoop||n.runOnContext,g()}catch(t){return w()}}function _(){}function k(){return new TypeError('You cannot resolve a promise with itself')}function C(){return new TypeError('A promises callback cannot return that same promise.')}function E(t){try{return t.then}catch(t){return ue.error=t,ue}}function T(t,n,a,r){try{t.call(n,a,r)}catch(t){return t}}function A(t,n,a){ee(function(t){var r=!1,i=T(a,n,function(a){r||(r=!0,n===a?L(t,a):N(t,a))},function(n){r||(r=!0,R(t,n))},'Settle: '+(t._label||' unknown promise'));!r&&i&&(r=!0,R(t,i))},t)}function S(t,n){n._state===pe?L(t,n._result):n._state===ce?R(t,n._result):M(n,void 0,function(n){N(t,n)},function(n){R(t,n)})}function I(t,n){if(n.constructor===t.constructor)S(t,n);else{var a=E(n);a===ue?R(t,ue.error):a===void 0?L(t,n):c(a)?A(t,n,a):L(t,n)}}function N(t,n){t===n?R(t,k()):l(n)?I(t,n):L(t,n)}function j(t){t._onerror&&t._onerror(t._result),D(t)}function L(t,n){t._state!==he||(t._result=n,t._state=pe,0!==t._subscribers.length&&ee(D,t))}function R(t,n){t._state!==he||(t._state=ce,t._result=n,ee(j,t))}function M(t,n,a,r){var i=t._subscribers,o=i.length;t._onerror=null,i[o]=n,i[o+pe]=a,i[o+ce]=r,0===o&&t._state&&ee(D,t)}function D(t){var n=t._subscribers,a=t._state;if(0!==n.length){for(var r=t._result,o=0,i,s;o<n.length;o+=3)i=n[o],s=n[o+a],i?B(a,i,s,r):s(r);t._subscribers.length=0}}function P(){this.error=null}function O(t,n){try{return t(n)}catch(t){return fe.error=t,fe}}function B(t,n,a,r){var i=c(a),o,s,d,l;if(!i)o=r,d=!0;else if(o=O(a,r),o===fe?(l=!0,s=o.error,o=null):d=!0,n===o)return void R(n,C());n._state!==he||(i&&d?N(n,o):l?R(n,s):t===pe?L(n,o):t===ce&&R(n,o))}function U(t,n){try{n(function n(a){N(t,a)},function n(a){R(t,a)})}catch(n){R(t,n)}}function F(t,n){var a=this;a._instanceConstructor=t,a.promise=new t(_),a._validateInput(n)?(a._input=n,a.length=n.length,a._remaining=n.length,a._init(),0===a.length?L(a.promise,a._result):(a.length=a.length||0,a._enumerate(),0===a._remaining&&L(a.promise,a._result))):R(a.promise,a._validationError())}function q(t){return new ge(this,t).promise}function z(t){function n(t){N(o,t)}function a(t){R(o,t)}var r=this,o=new r(_);if(!Y(t))return R(o,new TypeError('You must pass an array to race.')),o;for(var s=t.length,d=0;o._state===he&&d<s;d++)M(r.resolve(t[d]),void 0,n,a);return o}function H(t){var n=this;if(t&&'object'==typeof t&&t.constructor===n)return t;var a=new n(_);return N(a,t),a}function W(t){var n=this,a=new n(_);return R(a,t),a}function V(){throw new TypeError('You must pass a resolver function as the first argument to the promise constructor')}function G(){throw new TypeError('Failed to construct \'Promise\': Please use the \'new\' operator, this object constructor cannot be called as a function.')}function J(t){this._id=xe++,this._state=void 0,this._result=void 0,this._subscribers=[],_!==t&&(!c(t)&&V(),!(this instanceof J)&&G(),U(this,t))}function K(){var t;if('undefined'!=typeof o)t=o;else if('undefined'!=typeof self)t=self;else try{t=Function('return this')()}catch(t){throw new Error('polyfill failed because global object is unavailable in this environment')}var n=t.Promise;n&&'[object Promise]'===Object.prototype.toString.call(n.resolve())&&!n.cast||(t.Promise=_e)}var X;X=Array.isArray?Array.isArray:function(t){return'[object Array]'===Object.prototype.toString.call(t)};var Y=X,Z=0,Q={}.toString,ee=function t(n,a){oe[Z]=n,oe[Z+1]=a,Z+=2,2==Z&&(de?de(v):le())},te='undefined'==typeof window?void 0:window,ne=te||{},ae=ne.MutationObserver||ne.WebKitMutationObserver,re='undefined'!=typeof r&&'[object process]'==={}.toString.call(r),ie='undefined'!=typeof Uint8ClampedArray&&'undefined'!=typeof importScripts&&'undefined'!=typeof MessageChannel,oe=Array(1e3),se,de,le;le=re?h():ae?b():ie?y():void 0!==te||0?w():x();var pe=1,ce=2,ue=new P,fe=new P,he;F.prototype._validateInput=function(t){return Y(t)},F.prototype._validationError=function(){return new Error('Array Methods must be provided an Array')},F.prototype._init=function(){this._result=Array(this.length)};var ge=F;F.prototype._enumerate=function(){for(var t=this,n=t.length,a=t.promise,r=t._input,o=0;a._state===he&&o<n;o++)t._eachEntry(r[o],o)},F.prototype._eachEntry=function(t,n){var a=this,r=a._instanceConstructor;u(t)?t.constructor===r&&t._state!==he?(t._onerror=null,a._settledAt(t._state,n,t._result)):a._willSettleAt(r.resolve(t),n):(a._remaining--,a._result[n]=t)},F.prototype._settledAt=function(t,n,a){var r=this,i=r.promise;i._state===he&&(r._remaining--,t===ce?R(i,a):r._result[n]=a),0===r._remaining&&L(i,r._result)},F.prototype._willSettleAt=function(t,n){var a=this;M(t,void 0,function(t){a._settledAt(pe,n,t)},function(t){a._settledAt(ce,n,t)})};var be=q,ye=z,we=H,ve=W,xe=0,_e=J;J.all=be,J.race=ye,J.resolve=we,J.reject=ve,J._setScheduler=f,J._setAsap=m,J._asap=ee,J.prototype={constructor:J,then:function(t,n){var a=this,r=a._state;if(r===pe&&!t||r===ce&&!n)return this;var i=new this.constructor(_),o=a._result;if(r){var s=arguments[r-1];ee(function(){B(r,i,s,o)})}else M(a,i,t,n);return i},catch:function(t){return this.then(null,t)}};var ke=K,Ce={Promise:_e,polyfill:ke};!0?(d=function(){return Ce}.call(n,a,n,t),!(d!==void 0&&(t.exports=d))):'undefined'!=typeof t&&t.exports?t.exports=Ce:'undefined'!=typeof this&&(this.ES6Promise=Ce),ke()}).call(this)}).call(n,a(11),a(57).setImmediate,a(5))},function(t,n,a){var r=i,i,i;i=function(){};var n=t.exports={Lexer:i('./lib/N3Lexer'),Parser:i('./lib/N3Parser'),Writer:i('./lib/N3Writer'),Store:i('./lib/N3Store'),StreamParser:i('./lib/N3StreamParser'),StreamWriter:i('./lib/N3StreamWriter'),Util:i('./lib/N3Util')};Object.keys(n).forEach(function(t){Object.defineProperty(n,t,{configurable:!0,enumerable:!0,get:function(){return delete n[t],n[t]=a(259)('./N3'+t)}})})},function(t,n,a){function r(t,n){return this instanceof r?void(this._size=0,this._graphs=Object.create(null),this._entities=Object.create(null),this._entities['><']=0,this._entityCount=0,this._blankNodeIndex=0,!n&&t&&!t[0]&&(n=t,t=null),this._prefixes=Object.create(null),n&&n.prefixes&&this.addPrefixes(n.prefixes),t&&this.addTriples(t)):new r(t,n)}var i=a(103).expandPrefixedName;r.prototype={get size(){var t=this._size;if(null!==t)return t;var n=this._graphs,a,r;for(var i in n)for(var o in a=n[i].subjects)for(var s in r=a[o])t+=Object.keys(r[s]).length;return this._size=t},_addToIndex:function(t,n,a,r){var i=t[n]||(t[n]={}),o=i[a]||(i[a]={});o[r]=null},_removeFromIndex:function(t,n,a,r){var i=t[n],o=i[a],s;for(s in delete o[r],o)return;for(s in delete i[a],i)return;delete t[n]},_findInIndex:function(t,n,a,r,i,o,s,d){var c=[],u=Object.keys(this._entities),f,m,h;for(var g in n&&((f=t,t={})[n]=f[n]),t){var b=u[g];if(m=t[g])for(var y in a&&((f=m,m={})[a]=f[a]),m){var w=u[y];if(h=m[y])for(var v=r?(r in h)?[r]:[]:Object.keys(h),x=v.length-1,l;0<=x;x--)l={subject:'',predicate:'',object:'',graph:d},l[i]=b,l[o]=w,l[s]=u[v[x]],c.push(l)}}return c},_countInIndex:function(t,n,a,r){var i=0,o,s,d;for(var l in n&&((o=t,t={})[n]=o[n]),t)if(s=t[l])for(var c in a&&((o=s,s={})[a]=o[a]),s)(d=s[c])&&(r?r in d&&i++:i+=Object.keys(d).length);return i},addTriple:function(t,n,a,r){n||(r=t.graph,a=t.object,n=t.predicate,t=t.subject),r=r||'';var i=this._graphs[r];i||(i=this._graphs[r]={subjects:{},predicates:{},objects:{}},Object.freeze(i));var o=this._entities;t=o[t]||(o[t]=++this._entityCount),n=o[n]||(o[n]=++this._entityCount),a=o[a]||(o[a]=++this._entityCount),this._addToIndex(i.subjects,t,n,a),this._addToIndex(i.predicates,n,a,t),this._addToIndex(i.objects,a,t,n),this._size=null},addTriples:function(t){for(var n=t.length-1;0<=n;n--)this.addTriple(t[n])},addPrefix:function(t,n){this._prefixes[t]=n},addPrefixes:function(t){for(var n in t)this.addPrefix(n,t[n])},removeTriple:function(t,n,a,r){n||(r=t.graph,a=t.object,n=t.predicate,t=t.subject),r=r||'';var i=this._entities,o=this._graphs,s;if((t=i[t])&&(n=i[n])&&(a=i[a])&&(s=o[r])){var d,l;if((d=s.subjects[t])&&(l=d[n])&&a in l){for(t in this._removeFromIndex(s.subjects,t,n,a),this._removeFromIndex(s.predicates,n,a,t),this._removeFromIndex(s.objects,a,t,n),null!==this._size&&this._size--,s.subjects)return;delete o[r]}}},removeTriples:function(t){for(var n=t.length-1;0<=n;n--)this.removeTriple(t[n])},find:function(t,n,a,r){var o=this._prefixes;return this.findByIRI(i(t,o),i(n,o),i(a,o),i(r,o))},findByIRI:function(t,n,a,r){r=r||'';var i=this._graphs[r],o=this._entities;return i?t&&!(t=o[t])?[]:n&&!(n=o[n])?[]:a&&!(a=o[a])?[]:t?a?this._findInIndex(i.objects,a,t,n,'object','subject','predicate',r):this._findInIndex(i.subjects,t,n,null,'subject','predicate','object',r):n?this._findInIndex(i.predicates,n,a,null,'predicate','object','subject',r):a?this._findInIndex(i.objects,a,null,null,'object','subject','predicate',r):this._findInIndex(i.subjects,null,null,null,'subject','predicate','object',r):[]},count:function(t,n,a,r){var o=this._prefixes;return this.countByIRI(i(t,o),i(n,o),i(a,o),i(r,o))},countByIRI:function(t,n,a,r){r=r||'';var i=this._graphs[r],o=this._entities;return i?t&&!(t=o[t])?0:n&&!(n=o[n])?0:a&&!(a=o[a])?0:t?a?this._countInIndex(i.objects,a,t,n):this._countInIndex(i.subjects,t,n,a):n?this._countInIndex(i.predicates,n,a,t):this._countInIndex(i.objects,a,t,n):0},createBlankNode:function(t){var n,a;if(t)for(n=t='_:'+t,a=1;this._entities[n];)n=t+a++;else do n='_:b'+this._blankNodeIndex++;while(this._entities[n]);return this._entities[n]=++this._entityCount,n}},t.exports=r},function(t,n,a){function r(t){if(!(this instanceof r))return new r(t);i.call(this,{decodeStrings:!0}),this._readableState.objectMode=!0;var n=this,a=new s(t);a.parse(function(t,a){a&&n.push(a)||t&&n.emit('error',t)},this.emit.bind(this,'prefix')),this._transform=function(t,n,r){a.addChunk(t),r()},this._flush=function(t){a.end(),t()}}var i=a(53).Transform,o=a(108),s=a(102);o.inherits(r,i),t.exports=r},function(t,n,a){'use strict';(function(n,r){function i(t){return q.from(t)}function o(t){return q.isBuffer(t)||t instanceof z}function s(t,n,a){return'function'==typeof t.prependListener?t.prependListener(n,a):void(t._events&&t._events[n]?P(t._events[n])?t._events[n].unshift(a):t._events[n]=[a,t._events[n]]:t.on(n,a))}function d(t,n){O=O||a(43),t=t||{};var r=n instanceof O;this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var i=t.highWaterMark,o=t.readableHighWaterMark,s=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(o||0===o)?o:s,this.highWaterMark=_Mathfloor(this.highWaterMark),this.buffer=new G,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||'utf8',this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(!K&&(K=a(107).StringDecoder),this.decoder=new K(t.encoding),this.encoding=t.encoding)}function l(t){return O=O||a(43),this instanceof l?void(this._readableState=new d(t,this),this.readable=!0,t&&('function'==typeof t.read&&(this._read=t.read),'function'==typeof t.destroy&&(this._destroy=t.destroy)),F.call(this)):new l(t)}function c(t,n,a,r,o){var s=t._readableState;if(null===n)s.reading=!1,b(t,s);else{var d;o||(d=f(s,n)),d?t.emit('error',d):s.objectMode||n&&0<n.length?('string'!=typeof n&&!s.objectMode&&Object.getPrototypeOf(n)!==q.prototype&&(n=i(n)),r?s.endEmitted?t.emit('error',new Error('stream.unshift() after end event')):u(t,s,n,!0):s.ended?t.emit('error',new Error('stream.push() after EOF')):(s.reading=!1,s.decoder&&!a?(n=s.decoder.write(n),s.objectMode||0!==n.length?u(t,s,n,!1):v(t,s)):u(t,s,n,!1))):!r&&(s.reading=!1)}return m(s)}function u(t,n,a,r){n.flowing&&0===n.length&&!n.sync?(t.emit('data',a),t.read(0)):(n.length+=n.objectMode?1:a.length,r?n.buffer.unshift(a):n.buffer.push(a),n.needReadable&&y(t)),v(t,n)}function f(t,n){var a;return o(n)||'string'==typeof n||void 0===n||t.objectMode||(a=new TypeError('Invalid non-string/buffer chunk')),a}function m(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}function h(t){return t>=Y?t=Y:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function g(t,n){return 0>=t||0===n.length&&n.ended?0:n.objectMode?1:t===t?(t>n.highWaterMark&&(n.highWaterMark=h(t)),t<=n.length?t:n.ended?n.length:(n.needReadable=!0,0)):n.flowing&&n.length?n.buffer.head.data.length:n.length}function b(t,n){if(!n.ended){if(n.decoder){var a=n.decoder.end();a&&a.length&&(n.buffer.push(a),n.length+=n.objectMode?1:a.length)}n.ended=!0,y(t)}}function y(t){var n=t._readableState;n.needReadable=!1,n.emittedReadable||(V('emitReadable',n.flowing),n.emittedReadable=!0,n.sync?D(w,t):w(t))}function w(t){V('emit readable'),t.emit('readable'),T(t)}function v(t,n){n.readingMore||(n.readingMore=!0,D(x,t,n))}function x(t,n){for(var a=n.length;!n.reading&&!n.flowing&&!n.ended&&n.length<n.highWaterMark&&(V('maybeReadMore read 0'),t.read(0),a!==n.length);)a=n.length;n.readingMore=!1}function _(t){return function(){var n=t._readableState;V('pipeOnDrain',n.awaitDrain),n.awaitDrain&&n.awaitDrain--,0===n.awaitDrain&&U(t,'data')&&(n.flowing=!0,T(t))}}function k(t){V('readable nexttick read 0'),t.read(0)}function C(t,n){n.resumeScheduled||(n.resumeScheduled=!0,D(E,t,n))}function E(t,n){n.reading||(V('resume read 0'),t.read(0)),n.resumeScheduled=!1,n.awaitDrain=0,t.emit('resume'),T(t),n.flowing&&!n.reading&&t.read(0)}function T(t){var n=t._readableState;for(V('flow',n.flowing);n.flowing&&null!==t.read(););}function A(t,a){if(0===a.length)return null;var r;return a.objectMode?r=a.buffer.shift():!t||t>=a.length?(r=a.decoder?a.buffer.join(''):1===a.buffer.length?a.buffer.head.data:a.buffer.concat(a.length),a.buffer.clear()):r=S(t,a.buffer,a.decoder),r}function S(t,n,a){var r;return t<n.head.data.length?(r=n.head.data.slice(0,t),n.head.data=n.head.data.slice(t)):t===n.head.data.length?r=n.shift():r=a?I(t,n):N(t,n),r}function I(t,n){var a=n.head,r=1,i=a.data;for(t-=i.length;a=a.next;){var o=a.data,s=t>o.length?o.length:t;if(i+=s===o.length?o:o.slice(0,t),t-=s,0===t){s===o.length?(++r,n.head=a.next?a.next:n.tail=null):(n.head=a,a.data=o.slice(s));break}++r}return n.length-=r,i}function N(t,n){var a=q.allocUnsafe(t),r=n.head,i=1;for(r.data.copy(a),t-=r.data.length;r=r.next;){var o=r.data,s=t>o.length?o.length:t;if(o.copy(a,a.length-t,0,s),t-=s,0===t){s===o.length?(++i,n.head=r.next?r.next:n.tail=null):(n.head=r,r.data=o.slice(s));break}++i}return n.length-=i,a}function j(t){var n=t._readableState;if(0<n.length)throw new Error('"endReadable()" called on non-empty stream');n.endEmitted||(n.ended=!0,D(L,n,t))}function L(t,n){t.endEmitted||0!==t.length||(t.endEmitted=!0,n.readable=!1,n.emit('end'))}function R(t,n){for(var a=0,r=t.length;a<r;a++)n(t[a],a)}function M(t,n){for(var a=0,r=t.length;a<r;a++)if(t[a]===n)return a;return-1}var D=a(74).nextTick;t.exports=l;var P=a(155),O;l.ReadableState=d;var B=a(104).EventEmitter,U=function(t,n){return t.listeners(n).length},F=a(156),q=a(3).Buffer,z=n.Uint8Array||function(){},H=a(58);H.inherits=a(0);var W=a(262),V;V=W&&W.debuglog?W.debuglog('stream'):function(){};var G=a(263),J=a(157),K;H.inherits(l,F);var X=['error','close','destroy','pause','resume'];Object.defineProperty(l.prototype,'destroyed',{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),l.prototype.destroy=J.destroy,l.prototype._undestroy=J.undestroy,l.prototype._destroy=function(t,n){this.push(null),n(t)},l.prototype.push=function(t,n){var a=this._readableState,r;return a.objectMode?r=!0:'string'==typeof t&&(n=n||a.defaultEncoding,n!==a.encoding&&(t=q.from(t,n),n=''),r=!0),c(this,t,n,!1,r)},l.prototype.unshift=function(t){return c(this,t,null,!0,!1)},l.prototype.isPaused=function(){return!1===this._readableState.flowing},l.prototype.setEncoding=function(t){return K||(K=a(107).StringDecoder),this._readableState.decoder=new K(t),this._readableState.encoding=t,this};var Y=8388608;l.prototype.read=function(t){V('read',t),t=parseInt(t,10);var n=this._readableState,a=t;if(0!==t&&(n.emittedReadable=!1),0===t&&n.needReadable&&(n.length>=n.highWaterMark||n.ended))return V('read: emitReadable',n.length,n.ended),0===n.length&&n.ended?j(this):y(this),null;if(t=g(t,n),0===t&&n.ended)return 0===n.length&&j(this),null;var r=n.needReadable;V('need readable',r),(0===n.length||n.length-t<n.highWaterMark)&&(r=!0,V('length less than watermark',r)),n.ended||n.reading?(r=!1,V('reading or ended',r)):r&&(V('do read'),n.reading=!0,n.sync=!0,0===n.length&&(n.needReadable=!0),this._read(n.highWaterMark),n.sync=!1,!n.reading&&(t=g(a,n)));var i;return i=0<t?A(t,n):null,null===i?(n.needReadable=!0,t=0):n.length-=t,0===n.length&&(!n.ended&&(n.needReadable=!0),a!==t&&n.ended&&j(this)),null!==i&&this.emit('data',i),i},l.prototype._read=function(t){this.emit('error',new Error('_read() is not implemented'))},l.prototype.pipe=function(t,n){function a(t,n){V('onunpipe'),t===m&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,o())}function i(){V('onend'),t.end()}function o(){V('cleanup'),t.removeListener('close',c),t.removeListener('finish',u),t.removeListener('drain',y),t.removeListener('error',l),t.removeListener('unpipe',a),m.removeListener('end',i),m.removeListener('end',f),m.removeListener('data',d),w=!0,h.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&y()}function d(n){V('ondata'),v=!1;var a=t.write(n);!1!==a||v||((1===h.pipesCount&&h.pipes===t||1<h.pipesCount&&-1!==M(h.pipes,t))&&!w&&(V('false write response, pause',m._readableState.awaitDrain),m._readableState.awaitDrain++,v=!0),m.pause())}function l(n){V('onerror',n),f(),t.removeListener('error',l),0===U(t,'error')&&t.emit('error',n)}function c(){t.removeListener('finish',u),f()}function u(){V('onfinish'),t.removeListener('close',c),f()}function f(){V('unpipe'),m.unpipe(t)}var m=this,h=this._readableState;switch(h.pipesCount){case 0:h.pipes=t;break;case 1:h.pipes=[h.pipes,t];break;default:h.pipes.push(t);}h.pipesCount+=1,V('pipe count=%d opts=%j',h.pipesCount,n);var g=(!n||!1!==n.end)&&t!==r.stdout&&t!==r.stderr,b=g?i:f;h.endEmitted?D(b):m.once('end',b),t.on('unpipe',a);var y=_(m);t.on('drain',y);var w=!1,v=!1;return m.on('data',d),s(t,'error',l),t.once('close',c),t.once('finish',u),t.emit('pipe',m),h.flowing||(V('pipe resume'),m.resume()),t},l.prototype.unpipe=function(t){var n=this._readableState,a={hasUnpiped:!1};if(0===n.pipesCount)return this;if(1===n.pipesCount)return t&&t!==n.pipes?this:(t||(t=n.pipes),n.pipes=null,n.pipesCount=0,n.flowing=!1,t&&t.emit('unpipe',this,a),this);if(!t){var r=n.pipes,o=n.pipesCount;n.pipes=null,n.pipesCount=0,n.flowing=!1;for(var s=0;s<o;s++)r[s].emit('unpipe',this,a);return this}var i=M(n.pipes,t);return-1===i?this:(n.pipes.splice(i,1),n.pipesCount-=1,1===n.pipesCount&&(n.pipes=n.pipes[0]),t.emit('unpipe',this,a),this)},l.prototype.on=function(t,n){var a=F.prototype.on.call(this,t,n);if('data'===t)!1!==this._readableState.flowing&&this.resume();else if('readable'===t){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&y(this):D(k,this))}return a},l.prototype.addListener=l.prototype.on,l.prototype.resume=function(){var t=this._readableState;return t.flowing||(V('resume'),t.flowing=!0,C(this,t)),this},l.prototype.pause=function(){return V('call pause flowing=%j',this._readableState.flowing),!1!==this._readableState.flowing&&(V('pause'),this._readableState.flowing=!1,this.emit('pause')),this},l.prototype.wrap=function(t){var a=this,r=this._readableState,o=!1;for(var s in t.on('end',function(){if(V('wrapped end'),r.decoder&&!r.ended){var t=r.decoder.end();t&&t.length&&a.push(t)}a.push(null)}),t.on('data',function(n){if((V('wrapped data'),r.decoder&&(n=r.decoder.write(n)),!(r.objectMode&&(null===n||void 0===n)))&&(r.objectMode||n&&n.length)){var i=a.push(n);i||(o=!0,t.pause())}}),t)void 0===this[s]&&'function'==typeof t[s]&&(this[s]=function(n){return function(){return t[n].apply(t,arguments)}}(s));for(var i=0;i<X.length;i++)t.on(X[i],this.emit.bind(this,X[i]));return this._read=function(a){V('wrapped _read',a),o&&(o=!1,t.resume())},this},l._fromList=A}).call(n,a(5),a(11))},function(t,n){var a={}.toString;t.exports=Array.isArray||function(t){return'[object Array]'==a.call(t)}},function(t,n,a){t.exports=a(104).EventEmitter},function(t,n,a){'use strict';function r(t,n){var a=this,r=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return r||i?(n?n(t):t&&(!this._writableState||!this._writableState.errorEmitted)&&s(o,this,t),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(t){!n&&t?(s(o,a,t),a._writableState&&(a._writableState.errorEmitted=!0)):n&&n(t)}),this)}function i(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function o(t,n){t.emit('error',n)}var s=a(74).nextTick;t.exports={destroy:r,undestroy:i}},function(t,n,a){'use strict';function r(t,n){var a=this._transformState;a.transforming=!1;var r=a.writecb;if(!r)return this.emit('error',new Error('write callback called multiple times'));a.writechunk=null,a.writecb=null,null!=n&&this.push(n),r(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function i(t){return this instanceof i?void(d.call(this,t),this._transformState={afterTransform:r.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&('function'==typeof t.transform&&(this._transform=t.transform),'function'==typeof t.flush&&(this._flush=t.flush)),this.on('prefinish',o)):new i(t)}function o(){var t=this;'function'==typeof this._flush?this._flush(function(n,a){s(t,n,a)}):s(this,null,null)}function s(t,n,a){if(n)return t.emit('error',n);if(null!=a&&t.push(a),t._writableState.length)throw new Error('Calling transform done when ws.length != 0');if(t._transformState.transforming)throw new Error('Calling transform done when still transforming');return t.push(null)}t.exports=i;var d=a(43),l=a(58);l.inherits=a(0),l.inherits(i,d),i.prototype.push=function(t,n){return this._transformState.needTransform=!1,d.prototype.push.call(this,t,n)},i.prototype._transform=function(t,n,a){throw new Error('_transform() is not implemented')},i.prototype._write=function(t,n,a){var r=this._transformState;if(r.writecb=a,r.writechunk=t,r.writeencoding=n,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},i.prototype._read=function(t){var n=this._transformState;null!==n.writechunk&&n.writecb&&!n.transforming?(n.transforming=!0,this._transform(n.writechunk,n.writeencoding,n.afterTransform)):n.needTransform=!0},i.prototype._destroy=function(t,n){var a=this;d.prototype._destroy.call(this,t,function(t){n(t),a.emit('close')})}},function(t,n,a){function r(t){if(!(this instanceof r))return new r(t);i.call(this,{encoding:'utf8'}),this._writableState.objectMode=!0;var n=this,a=new s({write:function(t,a,r){n.push(t),r&&r()},end:function(t){n.push(null),t&&t()}},t);this._transform=function(t,n,r){a.addTriple(t,r)},this._flush=function(t){a.end(t)}}var i=a(53).Transform,o=a(108),s=a(109);o.inherits(r,i),t.exports=r},function(t,n,a){'use strict';function r(t,n,a,r,g){function b(){g&&g(null,n)}function y(t){if('application/ld+json'!==r||'application/nquads'!==r||'application/n-quads'!==r)if(g)g(t,n);else throw new Error('Error trying to parse <'+a+'> as '+r+':\n'+t+':\n'+t.stack)}function w(t,a){t&&g(t,n);try{E.parse(a,v)}catch(t){g(t,n)}}function v(t,a,r){if(t&&g(t,n),a)T.push(a);else{for(var o=0;o<T.length;o++)x(n,T[o]);g(null,n)}}function x(t,n){var a=_(n.subject),r=_(n.predicate),i=_(n.object),o=null;n.graph&&(o=_(n.graph)),t.add(a,r,i,o)}function _(t){var n;if(d.Util.isLiteral(t)){n=d.Util.getLiteralValue(t);var a=d.Util.getLiteralLanguage(t),r=new c(d.Util.getLiteralType(t));return new s(n,a,r)}return d.Util.isIRI(t)?new c(t):d.Util.isBlank(t)?(n=t.substring(2,t.length),new i(n)):null}r=r||'text/turtle',r=r.split(';')[0];try{if('text/n3'===r||'text/turtle'===r){var k=l(n,n,a,a,null,null,'',null);k.loadBuf(t),b()}else if('application/rdf+xml'===r){var C=new f(n);C.parse(h.parseXML(t),a,n.sym(a)),b()}else if('application/xhtml+xml'===r)u(h.parseXML(t,{contentType:'application/xhtml+xml'}),n,a),b();else if('text/html'===r)u(h.parseXML(t,{contentType:'text/html'}),n,a),b();else if('application/sparql-update'===r)m(t,n,a),b();else if('application/ld+json'===r||'application/nquads'===r||'application/n-quads'===r){var E=d.Parser(),T=[];if('application/ld+json'===r){var A;try{A=JSON.parse(t)}catch(t){return g(t,null)}o.toRDF(A,{format:'application/nquads',base:a},w)}else w(null,t)}else throw new Error('Don\'t know how to parse '+r+' yet')}catch(t){y(t)}}t.exports=r;var i=a(41),o=a(149),s=a(50),d=a(151),l=a(79),c=a(10),u=a(112).parseRDFaDOM,f=a(113),m=a(161),h=a(32)},function(t,n,a){'use strict';function r(t,n,a){var r=['INSERT','DELETE','WHERE'],d=s('http://www.w3.org/ns/pim/patch#'),l=o(n,n,a,a,null,null,'',null),c={},u=function t(n,a,r,o,i){return'Line '+(a+1)+' of <'+n+'>: Bad syntax:\n   '+i+'\n   at: "'+r.slice(o,o+30)+'"'},f,i,m;f=0;var h=n.sym(a+'#query');for(c.query=h;!0;){if(i=l.skipSpace(t,f),0>i)return c;if(';'===t[i]){if(f=l.skipSpace(t,i+1),0>f)return c;i=f}var g=!1;for(m=0;m<r.length;m++){var b=r[m];if(t.slice(i,i+b.length)===b){if(f=l.skipSpace(t,i+b.length),0>f)throw u(l._thisDoc,l.lines,t,i+b.length,'found EOF, needed {...} after '+b);if(('INSERT'===b||'DELETE'===b)&&'DATA'===t.slice(f,f+4)){if(i=l.skipSpace(t,f+4),0>i)throw u(l._thisDoc,l.lines,t,f+4,'needed {...} after INSERT DATA '+b);f=i}var y=[];if(i=l.node(t,f,y),0>i)throw u(l._thisDoc,l.lines,t,f,'bad syntax or EOF in {...} after '+b);c[b.toLowerCase()]=y[0],n.add(h,d(b.toLowerCase()),y[0]),g=!0,f=i}}if(!g&&'@prefix'===t.slice(i,i+7)){if(f=l.directive(t,i),0>f)throw u(l._thisDoc,l.lines,t,f,'bad syntax or EOF after @prefix ');f=l.checkDot(t,f),g=!0}if(!g)throw u(l._thisDoc,l.lines,t,i,'Unknown syntax at start of statememt: \''+t.slice(i).slice(0,20)+'\'')}}t.exports=r;var o=a(79),s=a(59)},function(t,n,a){'use strict';Object.defineProperty(n,'__esModule',{value:!0});var r=a(274);Object.defineProperty(n,'login',{enumerable:!0,get:function t(){return r.login}}),Object.defineProperty(n,'popupLogin',{enumerable:!0,get:function t(){return r.popupLogin}}),Object.defineProperty(n,'currentSession',{enumerable:!0,get:function t(){return r.currentSession}}),Object.defineProperty(n,'logout',{enumerable:!0,get:function t(){return r.logout}}),Object.defineProperty(n,'fetch',{enumerable:!0,get:function t(){return r.fetch}})},function(t,n,a){t.exports=!a(38)&&!a(61)(function(){return 7!=Object.defineProperty(a(114)('div'),'a',{get:function(){return 7}}).a})},function(t,n,a){var r=a(46),o=a(54),s=a(279)(!1),i=a(119)('IE_PROTO');t.exports=function(t,n){var a=o(t),d=0,l=[],c;for(c in a)c!=i&&r(a,c)&&l.push(c);for(;n.length>d;)r(a,c=n[d++])&&(~s(l,c)||l.push(c));return l}},function(t,n,a){var r=a(63);t.exports=Object('z').propertyIsEnumerable(0)?Object:function(t){return'String'==r(t)?t.split(''):Object(t)}},function(t,n){},function(t,n,a){'use strict';var r=a(84),i=a(36),o=a(168),s=a(44),d=a(46),l=a(64),c=a(285),u=a(85),f=a(287),m=a(13)('iterator'),h=!([].keys&&'next'in[].keys()),g='@@iterator',b='keys',y='values',w=function(){return this};t.exports=function(t,n,a,v,x,_,k){c(a,n,v);var C=function(t){return!h&&t in S?S[t]:t===b?function n(){return new a(this,t)}:t===y?function n(){return new a(this,t)}:function n(){return new a(this,t)}},E=n+' Iterator',T=x==y,A=!1,S=t.prototype,I=S[m]||S[g]||x&&S[x],N=!h&&I||C(x),j=x?T?C('entries'):N:void 0,L='Array'==n?S.entries||I:I,R,M,D;if(L&&(D=f(L.call(new t)),D!==Object.prototype&&D.next&&(u(D,E,!0),!r&&!d(D,m)&&s(D,m,w))),T&&I&&I.name!==y&&(A=!0,N=function t(){return I.call(this)}),(!r||k)&&(h||A||!S[m])&&s(S,m,N),l[n]=N,l[E]=w,x)if(R={values:T?N:C(y),keys:_?N:C(b),entries:j},k)for(M in R)M in S||o(S,M,R[M]);else i(i.P+i.F*(h||A),n,R);return R}},function(t,n,a){t.exports=a(44)},function(t,n,a){var r=a(37),i=a(286),o=a(121),s=a(119)('IE_PROTO'),d=function(){},l='prototype',c=function(){var t=a(114)('iframe'),n=o.length,r='<',i='>',s;for(t.style.display='none',a(170).appendChild(t),t.src='javascript:',s=t.contentWindow.document,s.open(),s.write(r+'script'+i+'document.F=Object'+r+'/script'+i),s.close(),c=s.F;n--;)delete c[l][o[n]];return c()};t.exports=Object.create||function t(n,a){var o;return null===n?o=c():(d[l]=r(n),o=new d,d[l]=null,o[s]=n),void 0===a?o:i(o,a)}},function(t,n,a){var r=a(12).document;t.exports=r&&r.documentElement},function(t,n,a){a(288);for(var r=a(12),o=a(44),s=a(64),d=a(13)('toStringTag'),l='CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList'.split(','),c=0;c<l.length;c++){var i=l[c],u=r[i],f=u&&u.prototype;f&&!f[d]&&o(f,d,i),s[i]=s.Array}},function(t,n,a){var r=a(63),i=a(13)('toStringTag'),o='Arguments'==r(function(){return arguments}()),s=function(t,n){try{return t[n]}catch(t){}};t.exports=function(t){var n,a,d;return t===void 0?'Undefined':null===t?'Null':'string'==typeof(a=s(n=Object(t),i))?a:o?r(n):'Object'==(d=r(n))&&'function'==typeof n.callee?'Arguments':d}},function(t,n,a){var r=a(37);t.exports=function(t,n,a,i){try{return i?n(r(a)[0],a[1]):n(a)}catch(n){var o=t['return'];throw void 0!==o&&r(o.call(t)),n}}},function(t,n,a){var r=a(64),i=a(13)('iterator'),o=Array.prototype;t.exports=function(t){return t!==void 0&&(r.Array===t||o[i]===t)}},function(t,n,a){var r=a(172),i=a(13)('iterator'),o=a(64);t.exports=a(18).getIteratorMethod=function(t){if(t!=void 0)return t[i]||t['@@iterator']||o[r(t)]}},function(t,n,a){var r=a(37),i=a(80),o=a(13)('species');t.exports=function(t,n){var a=r(t).constructor,s;return a===void 0||(s=r(a)[o])==void 0?n:i(s)}},function(t,n,a){var r=a(60),i=a(294),o=a(170),s=a(114),d=a(12),l=d.process,c=d.setImmediate,u=d.clearImmediate,f=d.MessageChannel,m=d.Dispatch,h=0,g={},b='onreadystatechange',y=function(){var t=+this;if(g.hasOwnProperty(t)){var n=g[t];delete g[t],n()}},w=function(t){y.call(t.data)},v,x,_;c&&u||(c=function t(n){for(var a=[],r=1;arguments.length>r;)a.push(arguments[r++]);return g[++h]=function(){i('function'==typeof n?n:Function(n),a)},v(h),h},u=function t(n){delete g[n]},'process'==a(63)(l)?v=function(t){l.nextTick(r(y,t,1))}:m&&m.now?v=function(t){m.now(r(y,t,1))}:f?(x=new f,_=x.port2,x.port1.onmessage=w,v=r(_.postMessage,_,1)):d.addEventListener&&'function'==typeof postMessage&&!d.importScripts?(v=function(t){d.postMessage(t+'','*')},d.addEventListener('message',w,!1)):b in s('script')?v=function(t){o.appendChild(s('script'))[b]=function(){o.removeChild(this),y.call(t)}}:v=function(t){setTimeout(r(y,t,1),0)}),t.exports={set:c,clear:u}},function(t,n){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,n,a){var r=a(37),i=a(45),o=a(125);t.exports=function(t,n){if(r(t),i(n)&&n.constructor===t)return n;var a=o.f(t),s=a.resolve;return s(n),a.promise}},function(t,n,a){var r=a(13)('iterator'),i=!1;try{var o=[7][r]();o['return']=function(){i=!0},Array.from(o,function(){throw 2})}catch(t){}t.exports=function(t,n){if(!n&&!i)return!1;var a=!1;try{var o=[7],s=o[r]();s.next=function(){return{done:a=!0}},o[r]=function(){return s},t(o)}catch(t){}return a}},function(t,n,a){t.exports={default:a(305),__esModule:!0}},function(t,n,a){'use strict';function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,'__esModule',{value:!0}),n.combineHandlers=n.server=n.client=void 0;var i=a(6),o=r(i),s=a(7),d=r(s),l=a(47),c=r(l),u=a(183),f=r(u),m=a(86),h=r(m),g=a(185),b=r(g),y='solid-auth-client',w=function t(n){return(0,h.default)({},y,n)},v=function t(n){if(!n||'object'!==('undefined'==typeof n?'undefined':(0,f.default)(n)))return null;var a=n[y];return a&&'object'===('undefined'==typeof a?'undefined':(0,f.default)(a))?a:null},x=function t(n){var a=v(n);if(!a)return null;var r=a.id,i=a.ret;return null!=r&&'string'==typeof r&&a.hasOwnProperty('ret')?{id:r,ret:i}:null},_=function t(n){var a=v(n);if(!a)return null;var r=a.id,i=a.method,o=a.args;return null!=r&&'string'==typeof r&&'string'==typeof i&&Array.isArray(o)?{id:r,method:i,args:o}:null},k=n.client=function t(n,a){return function(t){return new c.default(function(r,i){var o=(0,b.default)(),s=function t(n){var i=n.data,s=n.origin,d=x(i);('*'===a||s===a)&&d&&d.id===o&&(r(d.ret),window.removeEventListener('message',t))};window.addEventListener('message',s),n.postMessage({"solid-auth-client":{id:o,method:t.method,args:t.args}},a)})}},C=n.server=function t(n,a){return function(t){var r=function(){var r=(0,d.default)(o.default.mark(function r(i){var s,d,l,c;return o.default.wrap(function r(o){for(;1;)switch(o.prev=o.next){case 0:if(s=i.data,d=i.origin,l=_(s),l){o.next=4;break}return o.abrupt('return');case 4:if(d===a){o.next=7;break}return console.warn('SECURITY WARNING: solid-auth-client is listening for messages from '+a+', '+('but received a message from '+d+'.  Ignoring the message.')),o.abrupt('return');case 7:return o.next=9,t(l);case 9:c=o.sent,c&&n.postMessage(w(c),a);case 11:case'end':return o.stop();}},r,void 0)}));return function t(n){return r.apply(this,arguments)}}(),i={start:function t(){return window.addEventListener('message',r),i},stop:function t(){return window.removeEventListener('message',r),i}};return i}},E=n.combineHandlers=function t(){for(var n=arguments.length,a=Array(n),r=0;r<n;r++)a[r]=arguments[r];return function(t){return a.map(function(n){return n(t)}).find(function(t){return null!==t})}}},function(t,n,a){'use strict';function r(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0;var i=a(306),o=r(i),s=a(308),d=r(s),l='function'==typeof d.default&&'symbol'==typeof o.default?function(t){return typeof t}:function(t){return t&&'function'==typeof d.default&&t.constructor===d.default&&t!==d.default.prototype?'symbol':typeof t};n.default='function'==typeof d.default&&'symbol'===l(o.default)?function(t){return'undefined'==typeof t?'undefined':l(t)}:function(t){return t&&'function'==typeof d.default&&t.constructor===d.default&&t!==d.default.prototype?'symbol':'undefined'==typeof t?'undefined':l(t)}},function(t,n,a){var r=a(164),i=a(121).concat('length','prototype');n.f=Object.getOwnPropertyNames||function t(n){return r(n,i)}},function(t,n,a){function r(t,n,a){var r=n&&a||0;'string'==typeof t&&(n='binary'===t?Array(16):null,t=null),t=t||{};var i=t.random||(t.rng||o)();if(i[6]=64|15&i[6],i[8]=128|63&i[8],n)for(var d=0;16>d;++d)n[r+d]=i[d];return n||s(i)}var o=a(318),s=a(319);t.exports=r},function(t,n,a){'use strict';Object.defineProperty(n,'__esModule',{value:!0});var r=/^[^\u0000-\u001F\u007F()<>@,;:\\"/?={}\[\]\u0020\u0009]+$/,i=n.isToken=function t(n){return'string'==typeof n&&r.test(n)},o=n.isScheme=i,s=n.quote=function t(n){return'"'+n.replace(/"/g,'\\"')+'"'},d=n.unquote=function t(n){return n.substr(1,n.length-2).replace(/\\"/g,'"')}},function(t,n,a){'use strict';t.exports=a(188)},function(t,n,a){(function(n){const r=a(130),i=a(39),{URL:o}=a(51),s=i.Headers?i.Headers:n.Headers,{JSONDocument:d}=a(19),{JWKSet:l}=a(65),c=a(336),u=a(337),f=a(341),m=a(205);class h extends d{static get schema(){return f}static from(t){let n=new h(t),a=n.validate();if(!a.valid)return Promise.reject(new Error(JSON.stringify(a)));let r=n.provider.jwks;return r?l.importKeys(r).then((t)=>(n.provider.jwks=t,n)):n.jwks().then(()=>n)}static register(t,n,a){let r=new h({provider:{url:t},defaults:Object.assign({},a.defaults),store:a.store});return Promise.resolve().then(()=>r.discover()).then(()=>r.jwks()).then(()=>r.register(n)).then(()=>r)}discover(){try{let t=this.provider.url;r(t,'RelyingParty provider must define "url"');let n=new o(t);return n.pathname='.well-known/openid-configuration',i(n.toString()).then(m('Error fetching openid configuration')).then((t)=>t.json().then((t)=>this.provider.configuration=t))}catch(t){return Promise.reject(t)}}register(t){try{let n=this.provider.configuration;r(n,'OpenID Configuration is not initialized.'),r(n.registration_endpoint,'OpenID Configuration is missing registration_endpoint.');let a=n.registration_endpoint,o='post',d=new s({"Content-Type":'application/json'}),l=this.defaults.register,c=JSON.stringify(Object.assign({},l,t));return i(a,{method:o,headers:d,body:c}).then(m('Error registering client')).then((t)=>t.json().then((t)=>this.registration=t))}catch(t){return Promise.reject(t)}}serialize(){return JSON.stringify(this)}jwks(){try{let t=this.provider.configuration;r(t,'OpenID Configuration is not initialized.'),r(t.jwks_uri,'OpenID Configuration is missing jwks_uri.');let n=t.jwks_uri;return i(n).then(m('Error resolving provider keys')).then((t)=>t.json().then((t)=>l.importKeys(t)).then((t)=>this.provider.jwks=t))}catch(t){return Promise.reject(t)}}createRequest(t,n){return c.create(this,t,n||this.store)}validateResponse(t,n){return n=n||this.store,t=t.match(/^http(s?):\/\//)?{rp:this,redirect:t,session:n}:{rp:this,body:t,session:n},u.validateResponse(t)}userinfo(){try{let t=this.provider.configuration;r(t,'OpenID Configuration is not initialized.'),r(t.userinfo_endpoint,'OpenID Configuration is missing userinfo_endpoint.');let n=t.userinfo_endpoint,a=this.store.access_token;r(a,'Missing access token.');let o=new s({"Content-Type":'application/json',Authorization:`Bearer ${a}`});return i(n,{headers:o}).then(m('Error fetching userinfo')).then((t)=>t.json())}catch(t){return Promise.reject(t)}}logout(){let t;try{r(this.provider,'OpenID Configuration is not initialized.'),t=this.provider.configuration,r(t,'OpenID Configuration is not initialized.'),r(t.end_session_endpoint,'OpenID Configuration is missing end_session_endpoint.')}catch(t){return Promise.reject(t)}this.clearSession();let n=t.end_session_endpoint,a='get';return i(n,{method:a}).then(m('Error logging out'))}clearSession(){let t=this.store;t&&delete t[g]}popTokenFor(t,n){return PoPToken.issueFor(t,n,this)}}const g='oidc.session.privateKey';h.SESSION_PRIVATE_KEY=g,t.exports=h}).call(n,a(5))},function(t,n,a){'use strict';function r(t,n){if(!(t instanceof n))throw new TypeError('Cannot call a class as a function')}var i=function(){function t(t,n){for(var a=0,r;a<n.length;a++)r=n[a],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}return function(n,a,r){return a&&t(n.prototype,a),r&&t(n,r),n}}(),o=/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s][0-2]\d:[0-5]\d:[0-5]\d(?:\.\d+)?(?:z|[+-]\d\d:\d\d)$/i,s=/^(?:[a-z][a-z0-9+-.]*)?(?:\:|\/)\/?[^\s]*$/i,d=/^[a-z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,l=/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,c=/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,u=/^[a-z](?:(?:[-0-9a-z]{0,61})?[0-9a-z])?(\.[a-z](?:(?:[-0-9a-z]{0,61})?[0-9a-z])?)*$/i,f=function(){function t(){r(this,t)}return i(t,[{key:'register',value:function t(n,a){if('string'!=typeof n)throw new Error('Format name must be a string');return'string'==typeof a&&(a=new RegExp(a)),this[n]=a}},{key:'resolve',value:function t(n){var a=this[n];if(!a)throw new Error('Unknown JSON Schema format.');return a}},{key:'test',value:function t(n,a){var r=this.resolve(n);return r.test(a)}}],[{key:'initialize',value:function n(){var a=new t;return a.register('date-time',o),a.register('uri',s),a.register('email',d),a.register('ipv4',l),a.register('ipv6',c),a.register('hostname',u),a}}]),t}();t.exports=f.initialize()},function(t,n,a){'use strict';function r(t,n){if(!(t instanceof n))throw new TypeError('Cannot call a class as a function')}var i='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&'function'==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?'symbol':typeof t},o=function(){function t(t,n){for(var a=0,r;a<n.length;a++)r=n[a],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}return function(n,a,r){return a&&t(n.prototype,a),r&&t(n,r),n}}(),s=function(){function t(n,a){r(this,t),Object.assign(this,a||{}),this.root=this.root||this,this.root.depth=this.root.depth||1,this.level>this.root.depth&&(this.root.depth=this.level),this.level=this.level||0,this.schema=n}return o(t,[{key:'compile',value:function t(){var n=this.root,a=this.depth,r=this.level,o='',s='';if(s+=this.default(),s+=this.properties(),s+=this.items(),s+=this.member(),s+=this.item(),n===this){for(var d=1;d<=this.root.depth;d++)o+=this.declaration(d);return'\n        options = options || {}\n\n        if (options.filter === false) {\n          Object.assign(target, JSON.parse(JSON.stringify(source)))\n        }\n\n        '+o+'\n        '+s+'\n      '}return s}},{key:'declaration',value:function t(n){return'\n      var target'+n+'\n      var source'+n+'\n      var count'+n+'\n    '}},{key:'default',value:function t(){var n=this.schema,a=this.level,r=this.key,i=this.index,o=n.default,s='';return n.hasOwnProperty('default')&&(r&&(s+='\n          target'+a+'[\''+r+'\'] = '+JSON.stringify(o)+'\n        '),i&&(s+='\n          target'+a+'['+i+'] = '+JSON.stringify(o)+'\n        '),1<a&&(s+='\n          count'+a+'++\n        '),s='\n        if (options.defaults !== false) {\n          '+s+'\n        }\n      '),s}},{key:'member',value:function t(){var n=this.schema,a=this.root,r=this.level,i=this.key,o=n.properties,s=n.additionalProperties,d=n.items,l=n.additionalItems,c='';return!i||o||s||d||l||(c+='\n        target'+r+'[\''+i+'\'] = source'+r+'[\''+i+'\']\n      ',1<r&&(c+='\n          count'+r+'++\n        '),c='\n        if (source'+r+'.hasOwnProperty(\''+i+'\')) {\n          '+c+'\n        }\n      '),c}},{key:'item',value:function t(){var n=this.schema,a=this.root,r=this.level,i=this.index,o=n.properties,s=n.additionalProperties,d=n.items,l=n.additionalItems,c='';return!i||o||s||d||l||(c+='\n        target'+r+'['+i+'] = source'+r+'['+i+']\n      ',1<r&&(c+='\n          count'+r+'++\n        '),c='\n        if ('+i+' < len) {\n          '+c+'\n        }\n      '),c}},{key:'properties',value:function n(){var a=this.schema,r=this.root,i=this.level,o=this.key,s=this.index,n=a.properties,d='';return n&&(Object.keys(n).forEach(function(a){var o=n[a],s=new t(o,{key:a,root:r,level:i+1});d+=s.compile()}),r===this?d='\n          if (typeof source === \'object\' && source !== null && !Array.isArray(source)) {\n            if (typeof target !== \'object\') {\n              throw new Error(\'?\')\n            }\n\n            source1 = source\n            target1 = target\n            count1 = 0\n\n            '+d+'\n          }\n        ':(s&&(d='\n            if ('+s+' < source'+i+'.length || typeof source'+i+'['+s+'] === \'object\') {\n\n              source'+(i+1)+' = source'+i+'['+s+'] || {}\n              count'+(i+1)+' = 0\n\n              if ('+s+' < target'+i+'.length || typeof target'+i+'['+s+'] !== \'object\') {\n                target'+(i+1)+' = {}\n                if ('+s+' < source'+i+'.length) {\n                  count'+(i+1)+'++\n                }\n              } else {\n                target'+(i+1)+' = target'+i+'['+s+']\n              }\n\n              '+d+'\n\n              if (count'+(i+1)+' > 0) {\n                target'+i+'['+s+'] = target'+(i+1)+'\n                count'+i+'++\n              }\n\n            } else {\n              target'+i+'['+s+'] = source'+i+'['+s+']\n              count'+i+'++\n            }\n          '),o&&(d='\n            if ((typeof source'+i+'[\''+o+'\'] === \'object\'\n                  && source'+i+'[\''+o+'\'] !== null\n                  && !Array.isArray(source'+i+'[\''+o+'\']))\n                || !source'+i+'.hasOwnProperty(\''+o+'\')) {\n\n              source'+(i+1)+' = source'+i+'[\''+o+'\'] || {}\n              count'+(i+1)+' = 0\n\n              if (!target'+i+'.hasOwnProperty(\''+o+'\')\n                  || typeof target'+i+'[\''+o+'\'] !== \'object\'\n                  || target'+i+'[\''+o+'\'] === null\n                  || Array.isArray(target'+i+'[\''+o+'\'])) {\n                target'+(i+1)+' = {}\n                if (source'+i+'.hasOwnProperty(\''+o+'\')) {\n                  count'+(i+1)+'++\n                }\n              } else {\n                target'+(i+1)+' = target'+i+'[\''+o+'\']\n                count'+(i+1)+'++\n              }\n\n              '+d+'\n\n              if (count'+(i+1)+' > 0) {\n                target'+i+'[\''+o+'\'] = target'+(i+1)+'\n                count'+i+'++\n              }\n\n            } else {\n              target'+i+'[\''+o+'\'] = source'+i+'[\''+o+'\']\n              count'+i+'++\n            }\n          '))),d}},{key:'additionalProperties',value:function t(){}},{key:'items',value:function n(){var a=this.schema,r=this.root,o=this.level,s=this.key,d=this.index,n=a.items,l='';if(n){if(Array.isArray(n));else if('object'===('undefined'==typeof n?'undefined':i(n))&&null!==n){var c='i'+(o+1),u=new t(n,{index:c,root:r,level:o+1});l+='\n          var sLen = source'+(o+1)+'.length || 0\n          var tLen = target'+(o+1)+'.length || 0\n          var len = 0\n\n          if (sLen > len) { len = sLen }\n          // THIS IS WRONG, CAUSED SIMPLE ARRAY INIT TO FAIL (OVERWRITE\n          // EXISTING TARGET VALUES WITH UNDEFINED WHEN SOURCE IS SHORTER THAN\n          // TARGET). LEAVING HERE UNTIL WE FINISH TESTING AND SEE WHY IT MIGHT\n          // HAVE BEEN HERE IN THE FIRST PLACE.\n          //\n          // if (tLen > len) { len = tLen }\n\n          for (var '+c+' = 0; '+c+' < len; '+c+'++) {\n            '+u.compile()+'\n          }\n        '}l=r===this?'\n          if (Array.isArray(source)) {\n            if (!Array.isArray(target)) {\n              throw new Error(\'?\')\n            }\n\n            source1 = source\n            target1 = target\n\n            '+l+'\n          }\n        ':'\n          if (Array.isArray(source'+o+'[\''+s+'\']) || !source'+o+'.hasOwnProperty(\''+s+'\')) {\n\n            source'+(o+1)+' = source'+o+'[\''+s+'\'] || []\n            count'+(o+1)+' = 0\n\n            if (!target'+o+'.hasOwnProperty(\''+s+'\') || !Array.isArray(target'+o+'[\''+s+'\'])) {\n              target'+(o+1)+' = []\n                if (source'+o+'.hasOwnProperty(\''+s+'\')) {\n                  count'+(o+1)+'++\n                }\n\n            } else {\n              target'+(o+1)+' = target'+o+'[\''+s+'\']\n              count'+(o+1)+'++\n            }\n\n            '+l+'\n\n            if (count'+(o+1)+' > 0) {\n              target'+o+'[\''+s+'\'] = target'+(o+1)+'\n              count'+o+'++\n            }\n\n          } else {\n            target'+o+'[\''+s+'\'] = source'+o+'[\''+s+'\']\n            count'+o+'++\n          }\n        '}return l}},{key:'additionalItems',value:function t(){}}],[{key:'compile',value:function n(a){var r=new t(a),i=r.compile();try{return new Function('target','source','options',i)}catch(t){console.log(t,t.stack)}}}]),t}();t.exports=s},function(t,n,a){'use strict';function r(t,n){if(!(t instanceof n))throw new TypeError('Cannot call a class as a function')}var i='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&'function'==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?'symbol':typeof t},o=function(){function t(t,n){for(var a=0,r;a<n.length;a++)r=n[a],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}return function(n,a,r){return a&&t(n.prototype,a),r&&t(n,r),n}}(),s=a(131),d=0,l=1,c=2,u=['add','remove','replace','move','copy','test'],f=function(){function t(n){r(this,t),this.ops=n||[]}return o(t,[{key:'apply',value:function t(n){var a=this;this.ops.forEach(function(t){var r=t.op;if(!r)throw new Error('Missing "op" in JSON Patch operation');if(-1===u.indexOf(r))throw new Error('Invalid "op" in JSON Patch operation');if(!t.path)throw new Error('Missing "path" in JSON Patch operation');a[r](t,n)})}},{key:'add',value:function t(n,a){if(void 0===n.value)throw new Error('Missing "value" in JSON Patch add operation');var r=new s(n.path,c);r.add(a,n.value)}},{key:'remove',value:function t(n,a){var r=new s(n.path);r.remove(a)}},{key:'replace',value:function t(n,a){if(void 0===n.value)throw new Error('Missing "value" in JSON Patch replace operation');var r=new s(n.path);r.replace(a,n.value)}},{key:'move',value:function t(n,a){if(void 0===n.from)throw new Error('Missing "from" in JSON Patch move operation');if(n.path.match(new RegExp('^'+n.from)))throw new Error('Invalid "from" in JSON Patch move operation');var r=new s(n.path),i=new s(n.from),o=i.get(a);i.remove(a),r.add(a,o)}},{key:'copy',value:function t(n,a){if(void 0===n.from)throw new Error('Missing "from" in JSON Patch copy operation');var r=new s(n.path),i=new s(n.from),o=i.get(a);r.add(a,o)}},{key:'test',value:function t(n,a){if(void 0===n.value)throw new Error('Missing "value" in JSON Patch test operation');var r=new s(n.path),o=r.get(a);switch(i(n.value)){default:if(o!==n.value)throw new Error('Mismatching JSON Patch test value');}}}]),t}();t.exports=f},function(t,n,a){'use strict';function r(t,n){if(!(t instanceof n))throw new TypeError('Cannot call a class as a function')}var i='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&'function'==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?'symbol':typeof t},o=function(){function t(t,n){for(var a=0,r;a<n.length;a++)r=n[a],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}return function(n,a,r){return a&&t(n.prototype,a),r&&t(n,r),n}}(),s=a(189),d=0,l=function(){function t(n){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};r(this,t),this.schema=n,Object.assign(this,a),this.address||(this.address=''),!0!==this.require&&(this.require=!1)}return o(t,null,[{key:'compile',value:function n(a){var r=new t(a),i='\n      // "cursor"\n      let value = data\n      let container\n      let stack = []\n      let top = -1\n\n      // error state\n      let valid = true\n      let errors = []\n\n      // complex schema state\n      let initialValidity\n      let anyValid\n      let notValid\n      let countOfValid\n      let initialErrorCount\n      let accumulatedErrorCount\n\n      // validation code\n      '+r.compile()+'\n\n      // validation result\n      return {\n        valid,\n        errors\n      }\n    ';return new Function('data',i)}},{key:'counter',get:function t(){return d++}}]),o(t,[{key:'compile',value:function t(){var n='';return this.require&&(n+=this.required()),n+=this.type(),n+=this.array(),n+=this.number(),n+=this.object(),n+=this.string(),n+=this.enum(),n+=this.anyOf(),n+=this.allOf(),n+=this.not(),n+=this.oneOf(),n}},{key:'push',value:function t(){return'\n      stack.push(value)\n      container = value\n      top++\n    '}},{key:'pop',value:function t(){return'\n      if (stack.length > 1) {\n        top--\n        stack.pop()\n      }\n\n      value = container = stack[top]\n    '}},{key:'type',value:function t(){var t=this.schema.type,n=this.address,a='';if(t){var r=Array.isArray(t)?t:[t],i=r.map(function(t){return'array'===t?'!Array.isArray(value)':'boolean'===t?'typeof value !== \'boolean\'':'integer'===t?'!Number.isInteger(value)':'null'===t?'value !== null':'number'===t?'typeof value !== \'number\'':'object'===t?'(typeof value !== \'object\' || Array.isArray(value) || value === null)':'string'===t?'typeof value !== \'string\'':void 0}).join(' && ');a+='\n      // '+n+' type checking\n      if (value !== undefined && '+i+') {\n        valid = false\n        errors.push({\n          keyword: \'type\',\n          message: \'invalid type\'\n        })\n      }\n      '}return a}},{key:'array',value:function t(){var n=['additionalItems','items','minItems','maxItems','uniqueItems'],a=this.validations(n),r='';return 0<a.length&&(r+='\n      /**\n       * Array validations\n       */\n      if (Array.isArray(value)) {\n      '+a+'\n      }\n      '),r}},{key:'number',value:function t(){var n=['minimum','maximum','multipleOf'],a=this.validations(n),r='';return 0<a.length&&(r+='\n      /**\n       * Number validations\n       */\n      if (typeof value === \'number\') {\n      '+a+'\n      }\n      '),r}},{key:'object',value:function t(){var n=['maxProperties','minProperties','additionalProperties','properties','patternProperties','dependencies','schemaDependencies','propertyDependencies'],a=this.validations(n),r='';return 0<a.length&&(r+='\n      /**\n       * Object validations\n       */\n      if (typeof value === \'object\' && value !== null && !Array.isArray(value)) {\n      '+a+'\n      }\n      '),r}},{key:'string',value:function t(){var n=['maxLength','minLength','pattern','format'],a=this.validations(n),r='';return 0<a.length&&(r+='\n      /**\n       * String validations\n       */\n      if (typeof value === \'string\') {\n      '+a+'\n      }\n      '),r}},{key:'validations',value:function t(n){var a=this,r=this.schema,i='',o=Object.keys(r).filter(function(t){return-1!==n.indexOf(t)});return o.forEach(function(t){i+=a[t]()}),i}},{key:'enum',value:function t(){var n=this.schema.enum,a=this.address,r=['value !== undefined'],o='';return n&&(n.forEach(function(t){switch('undefined'==typeof t?'undefined':i(t)){case'boolean':r.push('value !== '+t);break;case'number':r.push('value !== '+t);break;case'string':r.push('value !== "'+t+'"');break;case'object':null===t?r.push('value !== null'):r.push('\''+JSON.stringify(t)+'\' !== JSON.stringify(value)');break;default:throw new Error('Things are not well in the land of enum');}}),o+='\n      /**\n       * Validate "'+a+'" enum\n       */\n      if ('+r.join(' && ')+') {\n        valid = false\n        errors.push({\n          keyword: \'enum\',\n          message: JSON.stringify(value) + \' is not an enumerated value\'\n        })\n      }\n      '),o}},{key:'anyOf',value:function n(){var n=this.schema.anyOf,a=this.address,r='';return Array.isArray(n)&&(r+='\n        initialValidity = valid\n        initialErrorCount = errors.length\n        anyValid = false\n      ',n.forEach(function(n){var i=new t(n,{address:a});r+='\n        accumulatedErrorCount = errors.length\n        '+i.compile()+'\n        if (accumulatedErrorCount === errors.length) {\n          anyValid = true\n        }\n        '}),r+='\n          if (anyValid === true) {\n            valid = initialValidity\n            errors = errors.slice(0, initialErrorCount)\n          }\n      '),r}},{key:'allOf',value:function n(){var n=this.schema.allOf,a=this.address,r='';return Array.isArray(n)&&n.forEach(function(n){var i=new t(n,{address:a});r+='\n        '+i.compile()+'\n        '}),r}},{key:'oneOf',value:function n(){var n=this.schema.oneOf,a=this.address,r='';return Array.isArray(n)&&(r+='\n        /**\n         * Validate '+a+' oneOf\n         */\n        initialValidity = valid\n        initialErrorCount = errors.length\n        countOfValid = 0\n      ',n.forEach(function(n){var i=new t(n,{address:a});r+='\n        accumulatedErrorCount = errors.length\n        '+i.compile()+'\n        if (accumulatedErrorCount === errors.length) {\n          countOfValid += 1\n        }\n        '}),r+='\n          if (countOfValid === 1) {\n            valid = initialValidity\n            errors = errors.slice(0, initialErrorCount)\n          } else {\n            valid = false\n            errors.push({\n              keyword: \'oneOf\',\n              message: \'what is a reasonable error message for this case?\'\n            })\n          }\n      '),r}},{key:'not',value:function n(){var n=this.schema.not,a=this.address,r='';if('object'===('undefined'==typeof n?'undefined':i(n))&&null!==n&&!Array.isArray(n)){var o=n,s=new t(o,{address:a});r+='\n        /**\n         * NOT\n         */\n        if (value !== undefined) {\n          initialValidity = valid\n          initialErrorCount = errors.length\n          notValid = true\n\n          accumulatedErrorCount = errors.length\n\n          '+s.compile()+'\n\n          if (accumulatedErrorCount === errors.length) {\n            notValid = false\n          }\n\n          if (notValid === true) {\n            valid = initialValidity\n            errors = errors.slice(0, initialErrorCount)\n          } else {\n            valid = false\n            errors = errors.slice(0, initialErrorCount)\n            errors.push({\n              keyword: \'not\',\n              message: \'hmm...\'\n            })\n          }\n        }\n      '}return r}},{key:'properties',value:function n(){var a=this.schema,r=this.address,n=a.properties,o=a.required,s=this.push();return o=Array.isArray(o)?o:[],'object'===('undefined'==typeof n?'undefined':i(n))&&Object.keys(n).forEach(function(a){var i=n[a],d=-1!==o.indexOf(a),l=[r,a].filter(function(t){return!!t}).join('.'),c=new t(i,{address:l,require:d});s+='\n        value = container[\''+a+'\']\n        ',s+=c.compile()}),s+=this.pop(),s}},{key:'otherProperties',value:function t(){return'\n      /**\n       * Validate Other Properties\n       */\n      '+this.push()+'\n\n      for (let key in container) {\n        value = container[key]\n        matched = false\n\n        '+this.patternValidations()+'\n        '+this.additionalValidations()+'\n      }\n\n      '+this.pop()+'\n    '}},{key:'patternValidations',value:function n(){var a=this.schema.patternProperties,r='';return'object'===('undefined'==typeof a?'undefined':i(a))&&Object.keys(a).forEach(function(n){var i=a[n],o=new t(i);r+='\n          if (key.match(\''+n+'\')) {\n            matched = true\n            '+o.compile()+'\n          }\n        '}),r}},{key:'additionalValidations',value:function n(){var a=this.schema,r=a.properties,o=a.additionalProperties,s=this.address,d='',l='',c=['matched !== true'];if(Object.keys(r||{}).forEach(function(t){c.push('key !== \''+t+'\'')}),'object'===('undefined'==typeof o?'undefined':i(o))){var u=o,f=new t(u,{address:s+'[APKey]'});l+='\n        // validate additional properties\n        if ('+c.join(' && ')+') {\n          '+f.compile()+'\n        }\n      '}return!1===o&&(l+='\n        // validate non-presence of additional properties\n        if ('+c.join(' && ')+') {\n          valid = false\n          errors.push({\n            keyword: \'additionalProperties\',\n            message: key + \' is not a defined property\'\n          })\n        }\n      '),l}},{key:'patternProperties',value:function t(){var n='';return this.otherPropertiesCalled||(this.otherPropertiesCalled=!0,n+=this.otherProperties()),n}},{key:'additionalProperties',value:function t(){var n='';return this.otherPropertiesCalled||(this.otherPropertiesCalled=!0,n+=this.otherProperties()),n}},{key:'minProperties',value:function t(){var t=this.schema.minProperties,n=this.address;return'\n        // '+n+' min properties\n        if (Object.keys(value).length < '+t+') {\n          valid = false\n          errors.push({\n            keyword: \'minProperties\',\n            message: \'too few properties\'\n          })\n        }\n    '}},{key:'maxProperties',value:function t(){var t=this.schema.maxProperties,n=this.address;return'\n        // '+n+' max properties\n        if (Object.keys(value).length > '+t+') {\n          valid = false\n          errors.push({\n            keyword: \'maxProperties\',\n            message: \'too many properties\'\n          })\n        }\n    '}},{key:'dependencies',value:function n(){var n=this.schema.dependencies,a=this.address,r=this.push();return'object'===('undefined'==typeof n?'undefined':i(n))&&Object.keys(n).forEach(function(o){var s=n[o],d=[];if(Array.isArray(s))s.forEach(function(t){d.push('container[\''+t+'\'] === undefined')}),r+='\n            if (container[\''+o+'\'] !== undefined && ('+d.join(' || ')+')) {\n              valid = false\n              errors.push({\n                keyword: \'dependencies\',\n                message: \'unmet dependencies\'\n              })\n            }\n          ';else if('object'===('undefined'==typeof s?'undefined':i(s))){var l=s,c=new t(l,{address:a});r+='\n            if (container[\''+o+'\'] !== undefined) {\n              '+c.compile()+'\n            }\n          '}}),r+=this.pop(),r}},{key:'required',value:function t(){var n=this.schema.properties,a=this.address,r='';return r+='\n      // validate '+a+' presence\n      if (value === undefined) {\n        valid = false\n        errors.push({\n          keyword: \'required\',\n          message: \'is required\'\n        })\n      }\n    ',r}},{key:'additionalItems',value:function n(){var a=this.schema,r=a.items,n=a.additionalItems,o=this.address,s='';if(!1===n&&Array.isArray(r)&&(s+='\n        // don\'t allow additional items\n        if (value.length > '+r.length+') {\n          valid = false\n          errors.push({\n            keyword: \'additionalItems\',\n            message: \'additional items not allowed\'\n          })\n        }\n      '),'object'===('undefined'==typeof n?'undefined':i(n))&&null!==n&&Array.isArray(r)){var d=n,l=new t(d),c=t.counter;s+='\n        // additional items\n        '+this.push()+'\n\n        for (var i'+c+' = '+r.length+'; i'+c+' <= container.length; i'+c+'++) {\n          value = container[i'+c+']\n          '+l.compile()+'\n        }\n\n        '+this.pop()+'\n      '}return s}},{key:'items',value:function n(){var n=this.schema.items,a=this.address,r='';if(Array.isArray(n))r+=this.push(),n.forEach(function(n,i){var o=n,s=new t(o,{address:a+'['+i+']'});r+='\n          // item #'+i+'\n          value = container['+i+']\n          '+s.compile()+'\n        '}),r+=this.pop();else if('object'===('undefined'==typeof n?'undefined':i(n))&&null!==n){var o=n,s=new t(o),d=t.counter;r+='\n        // items\n        '+this.push()+'\n\n        for (var i'+d+' = 0; i'+d+' < container.length; i'+d+'++) {\n          // read array element\n          value = container[i'+d+']\n          '+s.compile()+'\n        }\n\n        '+this.pop()+'\n      '}return r}},{key:'minItems',value:function t(){var t=this.schema.minItems,n=this.address;return'\n        // '+n+' min items\n        if (value.length < '+t+') {\n          valid = false\n          errors.push({\n            keyword: \'minItems\',\n            message: \'too few properties\'\n          })\n        }\n    '}},{key:'maxItems',value:function t(){var t=this.schema.maxItems,n=this.address;return'\n        // '+n+' max items\n        if (value.length > '+t+') {\n          valid = false\n          errors.push({\n            keyword: \'maxItems\',\n            message: \'too many properties\'\n          })\n        }\n    '}},{key:'uniqueItems',value:function t(){var t=this.schema.uniqueItems,n=this.address,a='';return!0===t&&(a+='\n        // validate '+n+' unique items\n        let values = value.map(v => JSON.stringify(v)) // TODO: optimize\n        let set = new Set(values)\n        if (values.length !== set.size) {\n          valid = false\n          errors.push({\n            keyword: \'uniqueItems\',\n            message: \'items must be unique\'\n          })\n        }\n      '),a}},{key:'minLength',value:function t(){var t=this.schema.minLength,n=this.address;return'\n        // '+n+' validate minLength\n        if (Array.from(value).length < '+t+') {\n          valid = false\n          errors.push({\n            keyword: \'minLength\',\n            message: \'too short\'\n          })\n        }\n    '}},{key:'maxLength',value:function t(){var t=this.schema.maxLength,n=this.address;return'\n        // '+n+' validate maxLength\n        if (Array.from(value).length > '+t+') {\n          valid = false\n          errors.push({\n            keyword: \'maxLength\',\n            message: \'too long\'\n          })\n        }\n    '}},{key:'pattern',value:function t(){var t=this.schema.pattern,n=this.address;if(t)return'\n          // '+n+' validate pattern\n          if (!value.match(new RegExp(\''+t+'\'))) {\n            valid = false\n            errors.push({\n              keyword: \'pattern\',\n              message: \'does not match the required pattern\'\n            })\n          }\n      '}},{key:'format',value:function t(){var t=this.schema.format,n=this.address,a=s.resolve(t);if(a)return'\n      // '+n+' validate format\n      if (!value.match('+a+')) {\n        valid = false\n        errors.push({\n          keyword: \'format\',\n          message: \'is not "'+t+'" format\'\n        })\n      }\n      '}},{key:'minimum',value:function t(){var n=this.schema,t=n.minimum,a=n.exclusiveMinimum,r=this.address,i=!0===a?'<=':'<';return'\n        // '+r+' validate minimum\n        if (value '+i+' '+t+') {\n          valid = false\n          errors.push({\n            keyword: \'minimum\',\n            message: \'too small\'\n          })\n        }\n    '}},{key:'maximum',value:function t(){var n=this.schema,t=n.maximum,a=n.exclusiveMaximum,r=this.address,i=!0===a?'>=':'>';return'\n        // '+r+' validate maximum\n        if (value '+i+' '+t+') {\n          valid = false\n          errors.push({\n            keyword: \'maximum\',\n            message: \'too large\'\n          })\n        }\n    '}},{key:'multipleOf',value:function t(){var t=this.schema.multipleOf,n='';if('number'==typeof t){var a=t.toString().length,r=a-t.toFixed(0).length-1,i=0<r?_Mathpow(10,r):1,o;o=0<r?'(value * '+i+') % '+t*i+' !== 0':'value % '+t+' !== 0',n+='\n        if ('+o+') {\n          valid = false\n          errors.push({\n            keyword: \'multipleOf\',\n            message: \'must be a multiple of '+t+'\'\n          })\n        }\n      '}return n}}]),t}();t.exports=l},function(t,n,a){'use strict';(function(n){var r=n.TextEncoder?n.TextEncoder:a(330).TextEncoder;t.exports=r}).call(n,a(5))},function(t,n,a){'use strict';function r(t,n){if(!(t instanceof n))throw new TypeError('Cannot call a class as a function')}function i(t,n){if(!t)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return n&&('object'==typeof n||'function'==typeof n)?n:t}function o(t,n){if('function'!=typeof n&&null!==n)throw new TypeError('Super expression must either be null or a function, not '+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}var s=function(t){function n(t){r(this,n);var a=i(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return a.message=t+' is not a supported algorithm',a}return o(n,t),n}(Error);t.exports=s},function(t,n,a){'use strict';t.exports={DataError:a(196),NotSupportedError:a(194)}},function(t,n,a){'use strict';function r(t,n){if(!(t instanceof n))throw new TypeError('Cannot call a class as a function')}function i(t,n){if(!t)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return n&&('object'==typeof n||'function'==typeof n)?n:t}function o(t,n){if('function'!=typeof n&&null!==n)throw new TypeError('Super expression must either be null or a function, not '+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}var s=function(t){function n(t){return r(this,n),i(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t))}return o(n,t),n}(Error);t.exports=s},function(t,n,a){'use strict';function r(t,n){if(!(t instanceof n))throw new TypeError('Cannot call a class as a function')}function i(t,n){if(!t)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return n&&('object'==typeof n||'function'==typeof n)?n:t}function o(t,n){if('function'!=typeof n&&null!==n)throw new TypeError('Super expression must either be null or a function, not '+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}var s=function(){function t(t,n){for(var a=0,r;a<n.length;a++)r=n[a],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}return function(n,a,r){return a&&t(n.prototype,a),r&&t(n,r),n}}(),d=a(19),l=d.JSONDocument,c=a(90),u=a(132),f=function(t){function n(){return r(this,n),i(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return o(n,t),s(n,null,[{key:'importKey',value:function t(n){return u.importKey(n)}},{key:'schema',get:function t(){return c}}]),n}(l);t.exports=f},function(t,n,a){'use strict';var r=a(19),i=r.JSONSchema,o=a(90),s=new i({type:'object',properties:{keys:{type:'array',items:o}}});t.exports=s},function(t,n,a){'use strict';var r=a(200),i=a(201),o=a(202),s=a(19),d=s.JSONSchema,l=new d({type:'object',properties:{type:{type:'string',enum:['JWS','JWE']},segments:{type:'array'},header:o,protected:o,unprotected:o,iv:r,aad:r,ciphertext:r,tag:r,recipients:{type:'array',items:{type:'object',properties:{header:o,encrypted_key:r}}},payload:i,signatures:{type:'array',items:{type:'object',properties:{protected:o,header:o,signature:r,key:{type:'object'}}}},signature:r,verified:{type:'boolean',default:!1},key:{type:'object'},serialization:{type:'string',enum:['compact','json','flattened'],default:'compact'}}});t.exports=l},function(t,n,a){'use strict';var r=a(19),i=r.JSONSchema,o=new i({type:'string',format:'base64url'});t.exports=o},function(t,n,a){'use strict';var r=a(19),i=r.JSONSchema,o=new i({properties:{iss:{type:'string',format:'StringOrURI'},sub:{type:'string',format:'StringOrURI'},aud:{type:['array','string'],format:'StringOrURI',items:{format:'StringOrURI'}},exp:{type:'number',format:'NumericDate'},nbf:{type:'number',format:'NumericDate'},iat:{type:'number',format:'NumericDate'},jti:{type:'string'}}});t.exports=o},function(t,n,a){'use strict';var r=a(90),i=a(19),o=i.JSONSchema,s=new o({type:'object',properties:{typ:{type:'string'},cty:{type:'string',enum:['JWT']},alg:{type:'string',format:'StringOrURI'},jku:{type:'string',format:'URI'},kid:{type:'string'},x5u:{type:'string',format:'URI'},x5c:{type:'array',items:{type:'string',format:'base64'}},x5t:{type:'string',format:'base64url'},crit:{type:'array',items:{type:'string'},minItems:1},enc:{type:'string',format:'StringOrURI'},zip:{type:'string'}}});t.exports=s},function(t,n,a){'use strict';function r(t,n){if(!(t instanceof n))throw new TypeError('Cannot call a class as a function')}var i=function(){function t(t,n){var a=[],r=!0,i=!1,o;try{for(var s=t[Symbol.iterator](),d;!(r=(d=s.next()).done)&&(a.push(d.value),!(n&&a.length===n));r=!0);}catch(t){i=!0,o=t}finally{try{!r&&s['return']&&s['return']()}finally{if(i)throw o}}return a}return function(n,a){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return t(n,a);throw new TypeError('Invalid attempt to destructure non-iterable instance')}}(),o=function(){function t(t,n){for(var a=0,r;a<n.length;a++)r=n[a],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}return function(n,a,r){return a&&t(n.prototype,a),r&&t(n,r),n}}(),s=a(48),d=a(132),l=a(195),c=l.DataError,u=function(){function t(){r(this,t)}return o(t,null,[{key:'sign',value:function t(n){var a=s(JSON.stringify(n.payload));if('compact'===n.serialization){var r=n.key,i=n.header.alg,o=s(JSON.stringify(n.header)),l=o+'.'+a;return d.sign(i,r,l).then(function(t){return l+'.'+t})}return'json'===n.serialization,'flattened'===n.serialization,Promise.reject(new c('Unsupported serialization'))}},{key:'verify',value:function t(n){n.signatures;var a=n.key,r=n.signature,o=n.header.alg;if(n.signature){var s=i(n.segments,2),l=s[0],u=s[1],f=l+'.'+u;return'none'===o?Promise.reject(new c('Signature provided to verify with alg: none')):d.verify(o,a,r,f).then(function(t){return n.verified=t,t})}if('none'===o){if(!a&&!r)return n.verified=!0,Promise.resolve(!0);if(a)return Promise.reject(new c('Key provided to verify signature with alg: none'))}return Promise.reject(new c('Missing signature(s)'))}}]),t}();t.exports=u},function(t,n){class a{static encode(t){let n=[];return Object.keys(t).forEach(function(a){n.push(encodeURIComponent(a)+'='+encodeURIComponent(t[a]))}),n.join('&')}static decode(t){let n={};return t.split('&').forEach(function(t){let a=t.split('='),r=decodeURIComponent(a[0]),i=decodeURIComponent(a[1]);n[r]=i}),n}}t.exports=a},function(t,n,a){'use strict';function r(t='fetch error'){return(n)=>{if(200<=n.status&&300>n.status)return n;let a=`${t}: ${n.status} ${n.statusText}`,r=new Error(a);throw r.response=n,r.statusCode=n.status,r}}t.exports=r},function(t,n,a){'use strict';function r(t,n){if(!(t instanceof n))throw new TypeError('Cannot call a class as a function')}function i(t,n){if(!t)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return n&&('object'==typeof n||'function'==typeof n)?n:t}function o(t,n){if('function'!=typeof n&&null!==n)throw new TypeError('Super expression must either be null or a function, not '+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}var s=function(){function t(t,n){for(var a=0,r;a<n.length;a++)r=n[a],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}return function(n,a,r){return a&&t(n.prototype,a),r&&t(n,r),n}}(),d=a(51),l=d.URL,c=a(65),u=c.JWT,f=c.JWK,m=3600,h=function(t){function n(){return r(this,n),i(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return o(n,t),s(n,null,[{key:'issueFor',value:function t(a,r){if(!a)throw new Error('Cannot issue PoPToken - missing resource server URI');if(!r.sessionKey)throw new Error('Cannot issue PoPToken - missing session key');if(!r.idToken)throw new Error('Cannot issue PoPToken - missing id token');var i=JSON.parse(r.sessionKey);return f.importKey(i).then(function(t){var i={aud:new l(a).origin,key:t,iss:r.clientId,id_token:r.idToken};return n.issue(i)}).then(function(t){return t.encode()})}},{key:'issue',value:function t(a){var r=a.aud,i=a.iss,o=a.key,s=o.alg,d=a.iat||_Mathfloor(Date.now()/1e3),l=a.max||m,c=d+l,u={alg:s},f={iss:i,aud:r,exp:c,iat:d,id_token:a.id_token,token_type:'pop'},h=new n({header:u,payload:f,key:o.cryptoKey},{filter:!1});return h}}]),n}(u);t.exports=h},function(t,n,a){'use strict';function r(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(n[a]=t[a]);return n.default=t,n}Object.defineProperty(n,'__esModule',{value:!0}),n.requiresAuth=n.login=void 0,a(39);var i=a(88),o=r(i),s=n.login=function t(n){return fetch(n,{method:'HEAD',credentials:'include'}).then(function(t){return t.headers.get('user')}).then(function(t){return t?{authType:'WebID-TLS',idp:n,webId:t}:null})},d=n.requiresAuth=function t(n){if(401!==n.status)return!1;var a=n.headers.get('www-authenticate');if(!a)return!1;var r=o.parse(a);return'WebID-TLS'===r.scheme}},function(t,n,a){'use strict';function r(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0;var i=a(343),o=r(i);n.default=function(t){if(Array.isArray(t)){for(var n=0,a=Array(t.length);n<t.length;n++)a[n]=t[n];return a}return(0,o.default)(t)}},function(t,n,a){'use strict';function r(t,n){if(!(t instanceof n))throw new TypeError('Cannot call a class as a function')}var i=function(){function t(t,n){for(var a=0,r;a<n.length;a++)r=n[a],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}return function(n,a,r){return a&&t(n.prototype,a),r&&t(n,r),n}}(),o=a(78).namedNode,s=function(){function t(n,a){r(this,t),this.parent=n,this.via=a,this.connected=!1,this.pending={},this.subscribed={},this.socket={};try{this.socket=new WebSocket(a),this.socket.onopen=this.onOpen,this.socket.onclose=this.onClose,this.socket.onmessage=this.onMessage,this.socket.onerror=this.onError}catch(t){this.onError(t)}}return i(t,[{key:'_decode',value:function t(n){var a,o,i,s,r,d,l;for(o in s={},r=function(){var t,r,i,o;for(i=n.split('&'),o=[],(t=0,r=i.length);t<r;t++)a=i[t],o.push(a.split('='));return o}(),r)a=r[o],d=[decodeURIComponent(a[0]),decodeURIComponent(a[1])],i=d[0],l=d[1],null==s[i]&&(s[i]=[]),s[i].push(l);return s}},{key:'_send',value:function t(n,a,r){var i,o;return o=[n,a,r].join(' '),'function'==typeof(i=this.socket).send?i.send(o):void 0}},{key:'_subscribe',value:function t(n){return this._send('sub',n,''),this.subscribed[n]=!0,this.subscribed[n]}},{key:'onClose',value:function t(n){var a;for(a in this.connected=!1,this.subscribed)this.pending[a]=!0;return this.subscribed={},this.subscribed}},{key:'onError',value:function t(n){throw new Error('onError'+n)}},{key:'onMessage',value:function t(n){var a,r;return(r=n.data.split(' '),'ping'===r[0])?'function'==typeof(a=this.socket).send?a.send('pong '+r.slice(1).join(' ')):void 0:'pub'===r[0]?this.parent.onUpdate(r[1],this._decode(r[2])):void 0}},{key:'onOpen',value:function t(n){var a,r;for(r in this.connected=!0,a=[],this.pending)delete this.pending[r],a.push(this._subscribe(r));return a}},{key:'subscribe',value:function t(n){return this.connected?this._subscribe(n):(this.pending[n]=!0,this.pending[n])}}]),t}(),d=function(){function t(n){r(this,t),this.fetcher=n,this.graph={},this.via={},this.fetcher.addCallback('headers',this.onHeaders)}return i(t,[{key:'onHeaders',value:function t(n){var a,r,i;return null==n.headers||'undefined'==typeof WebSocket||null===WebSocket||(a=n.headers.etag,i=n.headers['updates-via'],r=n.uri,a&&i&&(this.graph[r]={etag:a,via:i},this.register(i,r)),!0)}},{key:'onUpdate',value:function t(n,a){return this.fetcher.refresh(o(n))}},{key:'register',value:function t(n,a){return null==this.via[n]&&(this.via[n]=new s(this,n)),this.via[n].subscribe(a)}}]),t}();t.exports.UpdatesSocket=s,t.exports.UpdatesVia=d},function(t,n,a){'use strict';var r=t.exports={},o={acl:r,icons:a(23),log:a(24),ns:a(14),store:a(20),widgets:a(26)},s=a(28),i=o.store;o.acl.adoptACLDefault=function(t,n,a,r){var i=o.store,s=o.ns.acl,d='/'===t.uri.slice(-1),l=i.each(void 0,s('defaultForNew'),a,r),c=[];l.map(function(n){c=c.concat(i.statementsMatching(n,s('agent'),void 0,r)).concat(i.statementsMatching(n,s('agentClass'),void 0,r)).concat(i.statementsMatching(n,s('agentGroup'),void 0,r)).concat(i.statementsMatching(n,s('origin'),void 0,r)).concat(i.statementsMatching(n,s('originClass'),void 0,r)).concat(i.statementsMatching(n,s('mode'),void 0,r)),c.push($rdf.st(n,s('accessTo'),t,r)),d&&c.push($rdf.st(n,s('defaultForNew'),t,r))});var u=$rdf.graph();return c.map(function(t){var a=function t(a){var i=r.uri.length;return $rdf.sym(a.uri.slice(0,i)===r.uri?n.uri+a.uri.slice(i):a.uri)};u.add(a(t.subject),a(t.predicate),a(t.object),$rdf.sym(n.uri))}),u},o.acl.readACL=function(t,n,r,a){r=r||o.store;var i=o.ns,s=a?i.acl('defaultForNew'):i.acl('accessTo'),d=o.ns.acl,l={agent:[],agentClass:[],agentGroup:[],origin:[],originClass:[]},c=r.each(void 0,s,t);for(var u in{agent:!0,agentClass:!0,agentGroup:!0,origin:!0,originClass:!0})c.map(function(t){r.each(t,d('mode')).map(function(n){r.each(t,d(u)).map(function(a){l[u][a.uri]||(l[u][a.uri]=[]),l[u][a.uri][n.uri]=t})})});return l},o.acl.sameACL=function(t,n){var a=function t(n,a){for(var r in{agent:!0,agentClass:!0,agentGroup:!0,origin:!0,originClass:!0})if(n[r])for(var i in n[r])for(var o in n[r][i])if(!a[r][i]||!a[r][i][o])return!1;return!0};return a(t,n)&&a(n,t)},o.acl.ACLunion=function(t){for(var n=t[0],r=1,i,a;r<t.length;r++)['agent','agentClass','agentGroup','origin','originClass'].map(function(o){if(i=t[r],i[o])for(a in i[o])for(var s in i[o][a])n[o][a]||(n[o][a]=[]),n[o][a][s]=!0});return n},o.acl.loadUnionACL=function(t,n){var a=[],r=function t(r){if(r.length){var i=r.shift().doc();o.acl.getACLorDefault(i,function(i,s,d,l,c,u){var f=!s;return i?void(a.push(f?o.widgets.readACL(c,u):o.widgets.readACL(d,l)),t(r.slice(1))):n(i,l)})}else n(!0,o.widgets.ACLunion(a))};r(t)},o.acl.ACLbyCombination=function(t){var n=[];return['agent','agentClass','agentGroup','origin','originClass'].map(function(a){for(var r in t[a]){var i=[];for(var o in t[a][r])i.push(o);i.sort(),i=i.join('\n'),n[i]||(n[i]=[]),n[i].push([a,r])}}),n},o.acl.makeACLGraph=function(t,n,a,r){var i=o.acl.ACLbyCombination(a);return o.acl.makeACLGraphbyCombo(t,n,i,r)},o.acl.makeACLGraphbyCombo=function(t,n,r,s,d,l){var c=o.ns.acl;for(var u in r){var f=u.split('\n'),m=f.map(function(t){return t.split('#')[1]}).join('');l&&!d&&(m+='Default');var h=t.sym(s.uri+'#'+m);t.add(h,o.ns.rdf('type'),c('Authorization'),s),d&&t.add(h,c('accessTo'),n,s),l&&t.add(h,c('defaultForNew'),n,s);for(var a=0;a<f.length;a++)t.add(h,c('mode'),t.sym(f[a]),s);var i=r[u];for(a=0;a<i.length;a++){var g=i[a][0],b=i[a][1];t.add(h,c(g),t.sym(b),s)}}},o.acl.ACLToString=function(t){return o.widgets.comboToString(o.widgets.ACLbyCombination(t))},o.acl.comboToString=function(t){var n='';for(var a in t){var r=a.split('\n'),d=r.map(function(t){return t.split('#')[1][0]}).join('');n+=d+':';for(var l=t[a],c=0;c<l.length;c++){var i=l[c][0],u=$rdf.sym(l[c][1]);n+='agent'===i?'@':'',n+=u.sameTerm(o.ns.foaf('Agent'))?'*':s.label(u),c<l.length-1&&(n+=',')}n+=';'}return'{'+n.slice(0,-1)+'}'},o.acl.makeACLString=function(t,n,a){var r=$rdf.graph();return o.widgets.makeACLGraph(r,t,n,a),$rdf.serialize(a,r,a.uri,'text/turtle')},o.acl.putACLObject=function(t,n,a,r,i){var s=o.widgets.ACLbyCombination(a);return o.widgets.putACLbyCombo(t,n,s,r,i)},o.acl.putACLbyCombo=function(t,n,a,r,i){var s=$rdf.graph();o.widgets.makeACLGraphbyCombo(s,n,a,r,!0),t.updater.put(r,s.statementsMatching(void 0,void 0,void 0,r),'text/turtle',function(s,d,l){d?(t.fetcher.unload(r),o.widgets.makeACLGraphbyCombo(t,n,a,r,!0),t.fetcher.requested[r.uri]='done',i(d)):i(d,l)})},o.acl.fixIndividualCardACL=function(t,n,a){var r=o.store.each(void 0,o.ns.vcard('hasMember'),t);r?o.widgets.fixIndividualACL(t,r,n,a):(n('This card is in no groups'),a(!0))},o.acl.fixIndividualACL=function(t,n,a,r){a=a||console.log;var i=t.doc();o.acl.getACLorDefault(i,function(d,l,c,u,f,m){if(!d)return r(!1,u);var h=l?o.widgets.readACL(c,u):o.widgets.readACL(f,m);o.widgets.loadUnionACL(n,function(n,d){return n?void(o.widgets.sameACL(d,h)?a('Nice - same ACL. no change '+s.label(t)+' '+i):(a('Group ACLs differ for '+s.label(t)+' '+i),o.widgets.putACLObject(o.store,c,d,u,r))):r(!1,d)})})},o.acl.setACL=function(t,n,a){var r=i.any(i.sym(t),i.sym('http://www.iana.org/assignments/link-relations/acl'));r?i.fetcher.webOperation('PUT',r.uri,{data:n,contentType:'text/turtle'}).then(a):i.fetcher.nowOrWhenFetched(t,void 0,function(r,o){if(!r)return a(r,'Gettting headers for ACL: '+o);var s=i.any(i.sym(t),i.sym('http://www.iana.org/assignments/link-relations/acl'));s?i.fetcher.webOperation('PUT',s.uri,{data:n,contentType:'text/turtle'}).then(a):a(!1,'No Link rel=ACL header for '+t)})},o.acl.getACLorDefault=function(t,n){o.acl.getACL(t,function(a,r,i,s){var d=o.store,l=o.ns.acl;if(!a)return n(!1,!1,r,s);var c=function a(r){'/'===r.slice(-1)&&(r=r.slice(0,-1));var s=r.lastIndexOf('/'),c=r.indexOf('/',r.indexOf('//')+2);r=r.slice(0,s+1);var u=$rdf.sym(r);o.acl.getACL(u,function(o,f,m){if(!o)return n(!1,!0,f,'( No ACL pointer '+r+' '+f+')'+m);if(403===f)return n(!1,!0,f,'( default ACL file FORBIDDEN. Stop.'+r+')');if(404===f){if(c>=s)return n(!1,!0,499,'Nothing to hold a default');a(r)}else{if(200!==f)return n(!1,!0,f,'Error status \''+f+'\' searching for default for '+u);var h=d.each(void 0,l('defaultForNew'),d.sym(r),m);if(!h.length)a(r);else{var g=d.sym(r);n(!0,!1,t,i,g,m)}}})};if(!a)return n(!1,!1,r,'Error accessing Access Control information for '+t+') '+s);return 404===r?void c(t.uri):403===r?n(!1,!1,r,'(Sharing not available to you)'+s):200===r?n(!0,!0,t,i):n(!1,!1,r,'Error '+r+' accessing Access Control information for '+t+': '+s)})},o.acl.getACL=function(t,n){o.store.fetcher.nowOrWhenFetched(t,void 0,function(a,r){if(!a)return n(a,'Can\'t get headers to find ACL for '+t+': '+r);var i=o.store,s=i.any(t,i.sym('http://www.iana.org/assignments/link-relations/acl'));if(!s)n(!1,900,'No Link rel=ACL header for '+t);else{if(o.store.fetcher.nonexistent[s.uri])return n(!0,404,s,'ACL file '+s+' does not exist.');o.store.fetcher.nowOrWhenFetched(s,void 0,function(t,a,r){t?n(!0,200,s):n(!0,r.status,s,'Can\'t read Access Control File '+s+': '+a)})}})}},function(t,n,a){'use strict';/*!
 * escape-html
 * Copyright(c) 2012-2013 TJ Holowaychuk
 * Copyright(c) 2015 Andreas Lubbe
 * Copyright(c) 2015 Tiancheng "Timothy" Gu
 * MIT Licensed
 */function r(t){var n=''+t,a=i.exec(n);if(!a)return n;var r='',o=0,s=0,d;for(o=a.index;o<n.length;o++){switch(n.charCodeAt(o)){case 34:d='&quot;';break;case 38:d='&amp;';break;case 39:d='&#39;';break;case 60:d='&lt;';break;case 62:d='&gt;';break;default:continue;}s!==o&&(r+=n.substring(s,o)),s=o+1,r+=d}return s===o?r:r+n.substring(s,o)}var i=/["'&<>]/;t.exports=r},function(t,n,a){'use strict';n.randomBytes=n.rng=n.pseudoRandomBytes=n.prng=a(55),n.createHash=n.Hash=a(66),n.createHmac=n.Hmac=a(215);var r=a(361),i=Object.keys(r),o=['sha1','sha224','sha256','sha384','sha512','md5','rmd160'].concat(i);n.getHashes=function(){return o};var s=a(217);n.pbkdf2=s.pbkdf2,n.pbkdf2Sync=s.pbkdf2Sync;var d=a(363);n.Cipher=d.Cipher,n.createCipher=d.createCipher,n.Cipheriv=d.Cipheriv,n.createCipheriv=d.createCipheriv,n.Decipher=d.Decipher,n.createDecipher=d.createDecipher,n.Decipheriv=d.Decipheriv,n.createDecipheriv=d.createDecipheriv,n.getCiphers=d.getCiphers,n.listCiphers=d.listCiphers;var l=a(382);n.DiffieHellmanGroup=l.DiffieHellmanGroup,n.createDiffieHellmanGroup=l.createDiffieHellmanGroup,n.getDiffieHellman=l.getDiffieHellman,n.createDiffieHellman=l.createDiffieHellman,n.DiffieHellman=l.DiffieHellman;var c=a(389);n.createSign=c.createSign,n.Sign=c.Sign,n.createVerify=c.createVerify,n.Verify=c.Verify,n.createECDH=a(433);var u=a(436);n.publicEncrypt=u.publicEncrypt,n.privateEncrypt=u.privateEncrypt,n.publicDecrypt=u.publicDecrypt,n.privateDecrypt=u.privateDecrypt;var f=a(440);n.randomFill=f.randomFill,n.randomFillSync=f.randomFillSync,n.createCredentials=function(){throw new Error('sorry, createCredentials is not implemented yet\nwe accept pull requests\nhttps://github.com/crypto-browserify/crypto-browserify')},n.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6}},function(t,n,a){function r(){this.init(),this._w=h,f.call(this,64,56)}function i(t,n,a){return a^t&(n^a)}function o(t,n,a){return t&n|a&(t|n)}function s(t){return(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10)}function l(t){return(t>>>6|t<<26)^(t>>>11|t<<21)^(t>>>25|t<<7)}function d(t){return(t>>>7|t<<25)^(t>>>18|t<<14)^t>>>3}function c(t){return(t>>>17|t<<15)^(t>>>19|t<<13)^t>>>10}var u=a(0),f=a(56),m=a(3).Buffer,y=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],h=Array(64);u(r,f),r.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},r.prototype._update=function(t){for(var n=this._w,r=0|this._a,a=0|this._b,u=0|this._c,m=0|this._d,b=0|this._e,w=0|this._f,f=0|this._g,g=0|this._h,h=0;16>h;++h)n[h]=t.readInt32BE(4*h);for(;64>h;++h)n[h]=0|c(n[h-2])+n[h-7]+d(n[h-15])+n[h-16];for(var v=0;64>v;++v){var x=0|g+l(b)+i(b,w,f)+y[v]+n[v],_=0|s(r)+o(r,a,u);g=f,f=w,w=b,b=0|m+x,m=u,u=a,a=r,r=0|x+_}this._a=0|r+this._a,this._b=0|a+this._b,this._c=0|u+this._c,this._d=0|m+this._d,this._e=0|b+this._e,this._f=0|w+this._f,this._g=0|f+this._g,this._h=0|g+this._h},r.prototype._hash=function(){var t=m.allocUnsafe(32);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t.writeInt32BE(this._h,28),t},t.exports=r},function(t,n,a){function r(){this.init(),this._w=w,g.call(this,128,112)}function i(t,n,a){return a^t&(n^a)}function o(t,n,a){return t&n|a&(t|n)}function s(t,n){return(t>>>28|n<<4)^(n>>>2|t<<30)^(n>>>7|t<<25)}function d(t,n){return(t>>>14|n<<18)^(t>>>18|n<<14)^(n>>>9|t<<23)}function l(t,n){return(t>>>1|n<<31)^(t>>>8|n<<24)^t>>>7}function c(t,n){return(t>>>1|n<<31)^(t>>>8|n<<24)^(t>>>7|n<<25)}function u(t,n){return(t>>>19|n<<13)^(n>>>29|t<<3)^t>>>6}function f(t,n){return(t>>>19|n<<13)^(n>>>29|t<<3)^(t>>>6|n<<26)}function m(t,n){return t>>>0<n>>>0?1:0}var h=a(0),g=a(56),b=a(3).Buffer,y=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],w=Array(160);h(r,g),r.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},r.prototype._update=function(t){for(var n=this._w,a=0|this._ah,r=0|this._bh,h=0|this._ch,g=0|this._dh,b=0|this._eh,w=0|this._fh,v=0|this._gh,x=0|this._hh,_=0|this._al,k=0|this._bl,C=0|this._cl,E=0|this._dl,T=0|this._el,A=0|this._fl,S=0|this._gl,I=0|this._hl,N=0;32>N;N+=2)n[N]=t.readInt32BE(4*N),n[N+1]=t.readInt32BE(4*N+4);for(;160>N;N+=2){var L=n[N-30],R=n[N-30+1],M=l(L,R),D=c(R,L);L=n[N-4],R=n[N-4+1];var P=u(L,R),O=f(R,L),B=n[N-14],U=n[N-14+1],F=n[N-32],q=n[N-32+1],z=0|D+U,H=0|M+B+m(z,D);z=0|z+O,H=0|H+P+m(z,O),z=0|z+q,H=0|H+F+m(z,q),n[N]=H,n[N+1]=z}for(var W=0;160>W;W+=2){H=n[W],z=n[W+1];var j=o(a,r,h),V=o(_,k,C),G=s(a,_),J=s(_,a),K=d(b,T),X=d(T,b),Y=y[W],Z=y[W+1],Q=i(b,w,v),ee=i(T,A,S),te=0|I+X,ne=0|x+K+m(te,I);te=0|te+ee,ne=0|ne+Q+m(te,ee),te=0|te+Z,ne=0|ne+Y+m(te,Z),te=0|te+z,ne=0|ne+H+m(te,z);var ae=0|J+V,re=0|G+j+m(ae,J);x=v,I=S,v=w,S=A,w=b,A=T,T=0|E+te,b=0|g+ne+m(T,E),g=h,E=C,h=r,C=k,r=a,k=_,_=0|te+ae,a=0|ne+re+m(_,te)}this._al=0|this._al+_,this._bl=0|this._bl+k,this._cl=0|this._cl+C,this._dl=0|this._dl+E,this._el=0|this._el+T,this._fl=0|this._fl+A,this._gl=0|this._gl+S,this._hl=0|this._hl+I,this._ah=0|this._ah+a+m(this._al,_),this._bh=0|this._bh+r+m(this._bl,k),this._ch=0|this._ch+h+m(this._cl,C),this._dh=0|this._dh+g+m(this._dl,E),this._eh=0|this._eh+b+m(this._el,T),this._fh=0|this._fh+w+m(this._fl,A),this._gh=0|this._gh+v+m(this._gl,S),this._hh=0|this._hh+x+m(this._hl,I)},r.prototype._hash=function(){function t(t,a,r){n.writeInt32BE(t,r),n.writeInt32BE(a,r+4)}var n=b.allocUnsafe(64);return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),t(this._gh,this._gl,48),t(this._hh,this._hl,56),n},t.exports=r},function(t,n,a){'use strict';function r(t,n){s.call(this,'digest'),'string'==typeof n&&(n=d.from(n));var a='sha512'===t||'sha384'===t?128:64;if(this._alg=t,this._key=n,n.length>a){var r='rmd160'===t?new c:u(t);n=r.update(n).digest()}else n.length<a&&(n=d.concat([n,f],a));for(var o=this._ipad=d.allocUnsafe(a),l=this._opad=d.allocUnsafe(a),m=0;m<a;m++)o[m]=54^n[m],l[m]=92^n[m];this._hash='rmd160'===t?new c:u(t),this._hash.update(o)}var i=a(0),o=a(360),s=a(40),d=a(3).Buffer,l=a(134),c=a(135),u=a(136),f=d.alloc(128);i(r,s),r.prototype._update=function(t){this._hash.update(t)},r.prototype._final=function(){var t=this._hash.digest(),n='rmd160'===this._alg?new c:u(this._alg);return n.update(this._opad).update(t).digest()},t.exports=function t(n,a){return n=n.toLowerCase(),'rmd160'===n||'ripemd160'===n?new r('rmd160',a):'md5'===n?new o(l,a):new r(n,a)}},function(t,n){t.exports={sha224WithRSAEncryption:{sign:'rsa',hash:'sha224',id:'302d300d06096086480165030402040500041c'},"RSA-SHA224":{sign:'ecdsa/rsa',hash:'sha224',id:'302d300d06096086480165030402040500041c'},sha256WithRSAEncryption:{sign:'rsa',hash:'sha256',id:'3031300d060960864801650304020105000420'},"RSA-SHA256":{sign:'ecdsa/rsa',hash:'sha256',id:'3031300d060960864801650304020105000420'},sha384WithRSAEncryption:{sign:'rsa',hash:'sha384',id:'3041300d060960864801650304020205000430'},"RSA-SHA384":{sign:'ecdsa/rsa',hash:'sha384',id:'3041300d060960864801650304020205000430'},sha512WithRSAEncryption:{sign:'rsa',hash:'sha512',id:'3051300d060960864801650304020305000440'},"RSA-SHA512":{sign:'ecdsa/rsa',hash:'sha512',id:'3051300d060960864801650304020305000440'},"RSA-SHA1":{sign:'rsa',hash:'sha1',id:'3021300906052b0e03021a05000414'},"ecdsa-with-SHA1":{sign:'ecdsa',hash:'sha1',id:''},sha256:{sign:'ecdsa',hash:'sha256',id:''},sha224:{sign:'ecdsa',hash:'sha224',id:''},sha384:{sign:'ecdsa',hash:'sha384',id:''},sha512:{sign:'ecdsa',hash:'sha512',id:''},"DSA-SHA":{sign:'dsa',hash:'sha1',id:''},"DSA-SHA1":{sign:'dsa',hash:'sha1',id:''},DSA:{sign:'dsa',hash:'sha1',id:''},"DSA-WITH-SHA224":{sign:'dsa',hash:'sha224',id:''},"DSA-SHA224":{sign:'dsa',hash:'sha224',id:''},"DSA-WITH-SHA256":{sign:'dsa',hash:'sha256',id:''},"DSA-SHA256":{sign:'dsa',hash:'sha256',id:''},"DSA-WITH-SHA384":{sign:'dsa',hash:'sha384',id:''},"DSA-SHA384":{sign:'dsa',hash:'sha384',id:''},"DSA-WITH-SHA512":{sign:'dsa',hash:'sha512',id:''},"DSA-SHA512":{sign:'dsa',hash:'sha512',id:''},"DSA-RIPEMD160":{sign:'dsa',hash:'rmd160',id:''},ripemd160WithRSA:{sign:'rsa',hash:'rmd160',id:'3021300906052b2403020105000414'},"RSA-RIPEMD160":{sign:'rsa',hash:'rmd160',id:'3021300906052b2403020105000414'},md5WithRSAEncryption:{sign:'rsa',hash:'md5',id:'3020300c06082a864886f70d020505000410'},"RSA-MD5":{sign:'rsa',hash:'md5',id:'3020300c06082a864886f70d020505000410'}}},function(t,n,a){n.pbkdf2=a(362),n.pbkdf2Sync=a(220)},function(t,n){var a=1073741823;t.exports=function(t,n){if('number'!=typeof t)throw new TypeError('Iterations not a number');if(0>t)throw new TypeError('Bad iterations');if('number'!=typeof n)throw new TypeError('Key length not a number');if(0>n||n>a||n!==n)throw new TypeError('Bad key length')}},function(t,n,a){(function(n){var a;if(n.browser)a='utf-8';else{var r=parseInt(n.version.split('.')[0].slice(1),10);a=6<=r?'utf-8':'binary'}t.exports=a}).call(n,a(11))},function(t,n,a){function r(t,n,a){var r=o(t),s='sha512'===t||'sha384'===t?128:64;n.length>s?n=r(n):n.length<s&&(n=f.concat([n,m],s));for(var d=f.allocUnsafe(s+h[t]),l=f.allocUnsafe(s+h[t]),c=0;c<s;c++)d[c]=54^n[c],l[c]=92^n[c];var i=f.allocUnsafe(s+a+4);d.copy(i,0,0,s),this.ipad1=i,this.ipad2=d,this.opad=l,this.alg=t,this.blocksize=s,this.hash=r,this.size=h[t]}function o(t){function n(n){return l(t).update(n).digest()}return'rmd160'===t||'ripemd160'===t?d:'md5'===t?s:n}function i(t,n,a,o,s){f.isBuffer(t)||(t=f.from(t,u)),f.isBuffer(n)||(n=f.from(n,u)),c(a,o),s=s||'sha1';var d=new r(s,t,n.length),m=f.allocUnsafe(o),g=f.allocUnsafe(n.length+4);n.copy(g,0,0,n.length);for(var b=0,y=h[s],w=_Mathceil(o/y),l=1;l<=w;l++){g.writeUInt32BE(l,n.length);for(var i=d.run(g,d.ipad1),v=i,x=1;x<a;x++){v=d.run(v,d.ipad2);for(var _=0;_<y;_++)i[_]^=v[_]}i.copy(m,b),b+=y}return m}var s=a(134),d=a(135),l=a(136),c=a(218),u=a(219),f=a(3).Buffer,m=f.alloc(128),h={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};r.prototype.run=function(t,n){t.copy(n,this.blocksize);var a=this.hash(n);return a.copy(this.opad,this.blocksize),this.hash(this.opad)},t.exports=i},function(t,n,a){function r(t){var n=t._cipher.encryptBlockRaw(t._prev);return i(t._prev),n}var o=a(67),s=a(3).Buffer,i=a(222),d=16;n.encrypt=function(t,n){var a=_Mathceil(n.length/d),l=t._cache.length;t._cache=s.concat([t._cache,s.allocUnsafe(a*d)]);for(var c=0;c<a;c++){var i=r(t),u=l+c*d;t._cache.writeUInt32BE(i[0],u+0),t._cache.writeUInt32BE(i[1],u+4),t._cache.writeUInt32BE(i[2],u+8),t._cache.writeUInt32BE(i[3],u+12)}var f=t._cache.slice(0,n.length);return t._cache=t._cache.slice(n.length),o(n,f)}},function(t,n){function a(t){for(var n=t.length,a;n--;)if(a=t.readUInt8(n),255===a)t.writeUInt8(0,n);else{a++,t.writeUInt8(a,n);break}}t.exports=a},function(t,n){t.exports={"aes-128-ecb":{cipher:'AES',key:128,iv:0,mode:'ECB',type:'block'},"aes-192-ecb":{cipher:'AES',key:192,iv:0,mode:'ECB',type:'block'},"aes-256-ecb":{cipher:'AES',key:256,iv:0,mode:'ECB',type:'block'},"aes-128-cbc":{cipher:'AES',key:128,iv:16,mode:'CBC',type:'block'},"aes-192-cbc":{cipher:'AES',key:192,iv:16,mode:'CBC',type:'block'},"aes-256-cbc":{cipher:'AES',key:256,iv:16,mode:'CBC',type:'block'},aes128:{cipher:'AES',key:128,iv:16,mode:'CBC',type:'block'},aes192:{cipher:'AES',key:192,iv:16,mode:'CBC',type:'block'},aes256:{cipher:'AES',key:256,iv:16,mode:'CBC',type:'block'},"aes-128-cfb":{cipher:'AES',key:128,iv:16,mode:'CFB',type:'stream'},"aes-192-cfb":{cipher:'AES',key:192,iv:16,mode:'CFB',type:'stream'},"aes-256-cfb":{cipher:'AES',key:256,iv:16,mode:'CFB',type:'stream'},"aes-128-cfb8":{cipher:'AES',key:128,iv:16,mode:'CFB8',type:'stream'},"aes-192-cfb8":{cipher:'AES',key:192,iv:16,mode:'CFB8',type:'stream'},"aes-256-cfb8":{cipher:'AES',key:256,iv:16,mode:'CFB8',type:'stream'},"aes-128-cfb1":{cipher:'AES',key:128,iv:16,mode:'CFB1',type:'stream'},"aes-192-cfb1":{cipher:'AES',key:192,iv:16,mode:'CFB1',type:'stream'},"aes-256-cfb1":{cipher:'AES',key:256,iv:16,mode:'CFB1',type:'stream'},"aes-128-ofb":{cipher:'AES',key:128,iv:16,mode:'OFB',type:'stream'},"aes-192-ofb":{cipher:'AES',key:192,iv:16,mode:'OFB',type:'stream'},"aes-256-ofb":{cipher:'AES',key:256,iv:16,mode:'OFB',type:'stream'},"aes-128-ctr":{cipher:'AES',key:128,iv:16,mode:'CTR',type:'stream'},"aes-192-ctr":{cipher:'AES',key:192,iv:16,mode:'CTR',type:'stream'},"aes-256-ctr":{cipher:'AES',key:256,iv:16,mode:'CTR',type:'stream'},"aes-128-gcm":{cipher:'AES',key:128,iv:12,mode:'GCM',type:'auth'},"aes-192-gcm":{cipher:'AES',key:192,iv:12,mode:'GCM',type:'auth'},"aes-256-gcm":{cipher:'AES',key:256,iv:12,mode:'GCM',type:'auth'}}},function(t,n,a){function r(t,n){var a=0;t.length!==n.length&&a++;for(var r=_Mathmin(t.length,n.length),o=0;o<r;++o)a+=t[o]^n[o];return a}function i(t,n,a){if(12===n.length)return t._finID=d.concat([n,d.from([0,0,0,1])]),d.concat([n,d.from([0,0,0,2])]);var r=new u(a),i=n.length,o=i%16;r.update(n),o&&(o=16-o,r.update(d.alloc(o,0))),r.update(d.alloc(8,0));var s=8*i,l=d.alloc(8);l.writeUIntBE(s,0,8),r.update(l),t._finID=r.state;var c=d.from(t._finID);return m(c),c}function o(t,n,a,r){l.call(this);var o=d.alloc(4,0);this._cipher=new s.AES(n);var c=this._cipher.encryptBlock(o);this._ghash=new u(c),a=i(this,a,c),this._prev=d.from(a),this._cache=d.allocUnsafe(0),this._secCache=d.allocUnsafe(0),this._decrypt=r,this._alen=0,this._len=0,this._mode=t,this._authTag=null,this._called=!1}var s=a(92),d=a(3).Buffer,l=a(40),c=a(0),u=a(373),f=a(67),m=a(222);c(o,l),o.prototype._update=function(t){if(!this._called&&this._alen){var n=16-this._alen%16;16>n&&(n=d.alloc(n,0),this._ghash.update(n))}this._called=!0;var a=this._mode.encrypt(this,t);return this._decrypt?this._ghash.update(t):this._ghash.update(a),this._len+=t.length,a},o.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error('Unsupported state or unable to authenticate data');var t=f(this._ghash.final(8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt&&r(t,this._authTag))throw new Error('Unsupported state or unable to authenticate data');this._authTag=t,this._cipher.scrub()},o.prototype.getAuthTag=function t(){if(this._decrypt||!d.isBuffer(this._authTag))throw new Error('Attempting to get auth tag in unsupported state');return this._authTag},o.prototype.setAuthTag=function t(n){if(!this._decrypt)throw new Error('Attempting to set auth tag in unsupported state');this._authTag=n},o.prototype.setAAD=function t(n){if(this._called)throw new Error('Attempting to set AAD in unsupported state');this._ghash.update(n),this._alen+=n.length},t.exports=o},function(t,n,a){function r(t,n,a,r){s.call(this),this._cipher=new i.AES(n),this._prev=o.from(a),this._cache=o.allocUnsafe(0),this._secCache=o.allocUnsafe(0),this._decrypt=r,this._mode=t}var i=a(92),o=a(3).Buffer,s=a(40),d=a(0);d(r,s),r.prototype._update=function(t){return this._mode.encrypt(this,t,this._decrypt)},r.prototype._final=function(){this._cipher.scrub()},t.exports=r},function(t,n,a){function r(){if(null!=E)return E;var t=1048576,n=[];n[0]=2;for(var a=1,r=3,i;r<t;r+=2){i=_Mathceil(Math.sqrt(r));for(var o=0;o<a&&n[o]<=i&&0!=r%n[o];o++);a!==o&&n[o]<=i||(n[a++]=r)}return E=n,n}function i(t){for(var n=r(),a=0;a<n.length;a++)if(0===t.modn(n[a]))return 0===t.cmpn(n[a]);return!0}function o(t){var n=l.mont(t);return 0===h.toRed(n).redPow(t.subn(1)).fromRed().cmpn(1)}function s(t,n){if(16>t)return 2===n||5===n?new l([140,123]):new l([140,39]);n=new l(n);for(var a,r;!0;){for(a=new l(d(_Mathceil(t/8)));a.bitLength()>t;)a.ishrn(1);if(a.isEven()&&a.iadd(m),a.testn(1)||a.iadd(h),!n.cmp(h))for(;a.mod(c).cmp(_);)a.iadd(k);else if(!n.cmp(g))for(;a.mod(w).cmp(v);)a.iadd(k);if(r=a.shrn(1),i(r)&&i(a)&&o(r)&&o(a)&&f.test(r)&&f.test(a))return a}}var d=a(55);t.exports=s,s.simpleSieve=i,s.fermatTest=o;var l=a(227),c=new l(24),u=a(228),f=new u,m=new l(1),h=new l(2),g=new l(5),b=new l(16),y=new l(8),w=new l(10),v=new l(3),x=new l(7),_=new l(11),k=new l(4),C=new l(12),E=null},function(t,n,a){(function(t){(function(t,n){'use strict';function o(t,n){if(!t)throw new Error(n||'Assertion failed')}function r(t,n){t.super_=n;var a=function(){};a.prototype=n.prototype,t.prototype=new a,t.prototype.constructor=t}function d(t,n,a){return d.isBN(t)?t:void(this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&(('le'===n||'be'===n)&&(a=n,n=10),this._init(t||0,n||10,a||'be')))}function s(t,n,a){for(var o=0,r=_Mathmin(t.length,a),s=n,i;s<r;s++)i=t.charCodeAt(s)-48,o<<=4,o|=49<=i&&54>=i?i-49+10:17<=i&&22>=i?i-17+10:15&i;return o}function l(t,n,a,o){for(var s=0,r=_Mathmin(t.length,a),d=n,i;d<r;d++)i=t.charCodeAt(d)-48,s*=o,s+=49<=i?i-49+10:17<=i?i-17+10:i;return s}function c(t){for(var n=Array(t.bitLength()),a=0;a<n.length;a++){var r=0|a/26,i=a%26;n[a]=(t.words[r]&1<<i)>>>i}return n}function i(t,n,o){o.negative=n.negative^t.negative;var s=0|t.length+n.length;o.length=s,s=0|s-1;var d=0|t.words[0],a=0|n.words[0],l=d*a,r=67108863&l,c=0|l/67108864;o.words[0]=r;for(var u=1;u<s;u++){for(var f=c>>>26,m=67108863&c,h=_Mathmin(u,n.length-1),g=_Mathmax(0,u-t.length+1),b;g<=h;g++)b=0|u-g,d=0|t.words[b],a=0|n.words[g],l=d*a+m,f+=0|l/67108864,m=67108863&l;o.words[u]=0|m,c=0|f}return 0==c?o.length--:o.words[u]=0|c,o.strip()}function u(t,n,o){o.negative=n.negative^t.negative,o.length=t.length+n.length;for(var s=0,d=0,l=0,c;l<o.length-1;l++){c=d,d=0;for(var u=67108863&s,f=_Mathmin(l,n.length-1),m=_Mathmax(0,l-t.length+1);m<=f;m++){var h=l-m,i=0|t.words[h],a=0|n.words[m],g=i*a,r=67108863&g;c=0|c+(0|g/67108864),r=0|r+u,u=67108863&r,c=0|c+(r>>>26),d+=c>>>26,c&=67108863}o.words[l]=u,s=c,c=d}return 0==s?o.length--:o.words[l]=s,o.strip()}function f(t,n,a){var r=new m;return r.mulp(t,n,a)}function m(t,n){this.x=t,this.y=n}function h(t,n){this.name=t,this.p=new d(n,16),this.n=this.p.bitLength(),this.k=new d(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function g(){h.call(this,'k256','ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f')}function b(){h.call(this,'p224','ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001')}function y(){h.call(this,'p192','ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff')}function w(){h.call(this,'25519','7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed')}function v(t){if('string'==typeof t){var n=d._prime(t);this.m=n.p,this.prime=n}else o(t.gtn(1),'modulus must be greater than 1'),this.m=t,this.prime=null}function x(t){v.call(this,t),this.shift=this.m.bitLength(),0!=this.shift%26&&(this.shift+=26-this.shift%26),this.r=new d(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}'object'==typeof t?t.exports=d:n.BN=d,d.BN=d,d.wordSize=26;var _;try{_=a(383).Buffer}catch(t){}d.isBN=function t(n){return!!(n instanceof d)||null!==n&&'object'==typeof n&&n.constructor.wordSize===d.wordSize&&Array.isArray(n.words)},d.max=function t(n,a){return 0<n.cmp(a)?n:a},d.min=function t(n,a){return 0>n.cmp(a)?n:a},d.prototype._init=function t(n,a,r){if('number'==typeof n)return this._initNumber(n,a,r);if('object'==typeof n)return this._initArray(n,a,r);'hex'===a&&(a=16),o(a===(0|a)&&2<=a&&36>=a),n=n.toString().replace(/\s+/g,'');var i=0;'-'===n[0]&&i++,16===a?this._parseHex(n,i):this._parseBase(n,a,i),'-'===n[0]&&(this.negative=1),this.strip();'le'!==r||this._initArray(this.toArray(),a,r)},d.prototype._initNumber=function t(n,a,r){0>n&&(this.negative=1,n=-n),67108864>n?(this.words=[67108863&n],this.length=1):4503599627370496>n?(this.words=[67108863&n,67108863&n/67108864],this.length=2):(o(9007199254740992>n),this.words=[67108863&n,67108863&n/67108864,1],this.length=3);'le'!==r||this._initArray(this.toArray(),a,r)},d.prototype._initArray=function t(n,a,r){if(o('number'==typeof n.length),0>=n.length)return this.words=[0],this.length=1,this;this.length=_Mathceil(n.length/3),this.words=Array(this.length);for(var s=0;s<this.length;s++)this.words[s]=0;var i=0,d,l;if('be'===r)for(s=n.length-1,d=0;0<=s;s-=3)l=n[s]|n[s-1]<<8|n[s-2]<<16,this.words[d]|=67108863&l<<i,this.words[d+1]=67108863&l>>>26-i,i+=24,26<=i&&(i-=26,d++);else if('le'===r)for(s=0,d=0;s<n.length;s+=3)l=n[s]|n[s+1]<<8|n[s+2]<<16,this.words[d]|=67108863&l<<i,this.words[d+1]=67108863&l>>>26-i,i+=24,26<=i&&(i-=26,d++);return this.strip()},d.prototype._parseHex=function t(n,a){this.length=_Mathceil((n.length-a)/6),this.words=Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var i=0,o,d;for(r=n.length-6,o=0;r>=a;r-=6)d=s(n,r,r+6),this.words[o]|=67108863&d<<i,this.words[o+1]|=4194303&d>>>26-i,i+=24,26<=i&&(i-=26,o++);r+6!==a&&(d=s(n,a,r+6),this.words[o]|=67108863&d<<i,this.words[o+1]|=4194303&d>>>26-i),this.strip()},d.prototype._parseBase=function t(n,a,r){this.words=[0],this.length=1;for(var o=0,s=1;67108863>=s;s*=a)o++;o--,s=0|s/a;for(var d=n.length-r,c=d%o,u=_Mathmin(d,d-c)+r,f=0,m=r;m<u;m+=o)f=l(n,m,m+o,a),this.imuln(s),67108864>this.words[0]+f?this.words[0]+=f:this._iaddn(f);if(0!=c){var i=1;for(f=l(n,m,n.length,a),m=0;m<c;m++)i*=a;this.imuln(i),67108864>this.words[0]+f?this.words[0]+=f:this._iaddn(f)}},d.prototype.copy=function t(n){n.words=Array(this.length);for(var a=0;a<this.length;a++)n.words[a]=this.words[a];n.length=this.length,n.negative=this.negative,n.red=this.red},d.prototype.clone=function t(){var n=new d(null);return this.copy(n),n},d.prototype._expand=function t(n){for(;this.length<n;)this.words[this.length++]=0;return this},d.prototype.strip=function t(){for(;1<this.length&&0===this.words[this.length-1];)this.length--;return this._normSign()},d.prototype._normSign=function t(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},d.prototype.inspect=function t(){return(this.red?'<BN-R: ':'<BN: ')+this.toString(16)+'>'};var k=['','0','00','000','0000','00000','000000','0000000','00000000','000000000','0000000000','00000000000','000000000000','0000000000000','00000000000000','000000000000000','0000000000000000','00000000000000000','000000000000000000','0000000000000000000','00000000000000000000','000000000000000000000','0000000000000000000000','00000000000000000000000','000000000000000000000000','0000000000000000000000000'],C=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],E=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,10000000,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64000000,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,24300000,28629151,33554432,39135393,45435424,52521875,60466176];d.prototype.toString=function t(n,a){n=n||10,a=0|a||1;var s;if(16===n||'hex'===n){s='';for(var d=0,l=0,u=0;u<this.length;u++){var i=this.words[u],f=(16777215&(i<<d|l)).toString(16);l=16777215&i>>>24-d,s=0!=l||u!==this.length-1?k[6-f.length]+f+s:f+s,d+=2,26<=d&&(d-=26,u--)}for(0!=l&&(s=l.toString(16)+s);0!=s.length%a;)s='0'+s;return 0!==this.negative&&(s='-'+s),s}if(n===(0|n)&&2<=n&&36>=n){var m=C[n],h=E[n];s='';var g=this.clone();for(g.negative=0;!g.isZero();){var c=g.modn(h).toString(n);g=g.idivn(h),s=g.isZero()?c+s:k[m-c.length]+c+s}for(this.isZero()&&(s='0'+s);0!=s.length%a;)s='0'+s;return 0!==this.negative&&(s='-'+s),s}o(!1,'Base should be between 2 and 36')},d.prototype.toNumber=function t(){var n=this.words[0];return 2===this.length?n+=67108864*this.words[1]:3===this.length&&1===this.words[2]?n+=4503599627370496+67108864*this.words[1]:2<this.length&&o(!1,'Number can only safely store up to 53 bits'),0===this.negative?n:-n},d.prototype.toJSON=function t(){return this.toString(16)},d.prototype.toBuffer=function t(n,a){return o('undefined'!=typeof _),this.toArrayLike(_,n,a)},d.prototype.toArray=function t(n,a){return this.toArrayLike(Array,n,a)},d.prototype.toArrayLike=function t(n,a,r){var s=this.byteLength(),d=r||_Mathmax(1,s);o(s<=d,'byte array longer than desired length'),o(0<d,'Requested array length <= 0'),this.strip();var l='le'===a,c=new n(d),u=this.clone(),f,m;if(!l){for(m=0;m<d-s;m++)c[m]=0;for(m=0;!u.isZero();m++)f=u.andln(255),u.iushrn(8),c[d-m-1]=f}else{for(m=0;!u.isZero();m++)f=u.andln(255),u.iushrn(8),c[m]=f;for(;m<d;m++)c[m]=0}return c},d.prototype._countBits=_Mathclz?function t(n){return 32-_Mathclz(n)}:function n(a){var i=a,t=0;return 4096<=i&&(t+=13,i>>>=13),64<=i&&(t+=7,i>>>=7),8<=i&&(t+=4,i>>>=4),2<=i&&(t+=2,i>>>=2),t+i},d.prototype._zeroBits=function n(a){if(0===a)return 26;var i=a,t=0;return 0==(8191&i)&&(t+=13,i>>>=13),0==(127&i)&&(t+=7,i>>>=7),0==(15&i)&&(t+=4,i>>>=4),0==(3&i)&&(t+=2,i>>>=2),0==(1&i)&&t++,t},d.prototype.bitLength=function t(){var n=this.words[this.length-1],a=this._countBits(n);return 26*(this.length-1)+a},d.prototype.zeroBits=function t(){if(this.isZero())return 0;for(var n=0,a=0,r;a<this.length&&(r=this._zeroBits(this.words[a]),n+=r,26===r);a++);return n},d.prototype.byteLength=function t(){return _Mathceil(this.bitLength()/8)},d.prototype.toTwos=function t(n){return 0===this.negative?this.clone():this.abs().inotn(n).iaddn(1)},d.prototype.fromTwos=function t(n){return this.testn(n-1)?this.notn(n).iaddn(1).ineg():this.clone()},d.prototype.isNeg=function t(){return 0!==this.negative},d.prototype.neg=function t(){return this.clone().ineg()},d.prototype.ineg=function t(){return this.isZero()||(this.negative^=1),this},d.prototype.iuor=function t(n){for(;this.length<n.length;)this.words[this.length++]=0;for(var a=0;a<n.length;a++)this.words[a]|=n.words[a];return this.strip()},d.prototype.ior=function t(n){return o(0==(this.negative|n.negative)),this.iuor(n)},d.prototype.or=function t(n){return this.length>n.length?this.clone().ior(n):n.clone().ior(this)},d.prototype.uor=function t(n){return this.length>n.length?this.clone().iuor(n):n.clone().iuor(this)},d.prototype.iuand=function t(n){var a;a=this.length>n.length?n:this;for(var r=0;r<a.length;r++)this.words[r]&=n.words[r];return this.length=a.length,this.strip()},d.prototype.iand=function t(n){return o(0==(this.negative|n.negative)),this.iuand(n)},d.prototype.and=function t(n){return this.length>n.length?this.clone().iand(n):n.clone().iand(this)},d.prototype.uand=function t(n){return this.length>n.length?this.clone().iuand(n):n.clone().iuand(this)},d.prototype.iuxor=function t(n){var r,a;this.length>n.length?(r=this,a=n):(r=n,a=this);for(var o=0;o<a.length;o++)this.words[o]=r.words[o]^a.words[o];if(this!==r)for(;o<r.length;o++)this.words[o]=r.words[o];return this.length=r.length,this.strip()},d.prototype.ixor=function t(n){return o(0==(this.negative|n.negative)),this.iuxor(n)},d.prototype.xor=function t(n){return this.length>n.length?this.clone().ixor(n):n.clone().ixor(this)},d.prototype.uxor=function t(n){return this.length>n.length?this.clone().iuxor(n):n.clone().iuxor(this)},d.prototype.inotn=function t(n){o('number'==typeof n&&0<=n);var a=0|_Mathceil(n/26),r=n%26;this._expand(a),0<r&&a--;for(var s=0;s<a;s++)this.words[s]=67108863&~this.words[s];return 0<r&&(this.words[s]=~this.words[s]&67108863>>26-r),this.strip()},d.prototype.notn=function t(n){return this.clone().inotn(n)},d.prototype.setn=function t(n,a){o('number'==typeof n&&0<=n);var r=0|n/26,i=n%26;return this._expand(r+1),a?this.words[r]|=1<<i:this.words[r]&=~(1<<i),this.strip()},d.prototype.iadd=function t(n){var o;if(0!==this.negative&&0===n.negative)return this.negative=0,o=this.isub(n),this.negative^=1,this._normSign();if(0===this.negative&&0!==n.negative)return n.negative=0,o=this.isub(n),n.negative=1,o._normSign();var r,a;this.length>n.length?(r=this,a=n):(r=n,a=this);for(var s=0,d=0;d<a.length;d++)o=(0|r.words[d])+(0|a.words[d])+s,this.words[d]=67108863&o,s=o>>>26;for(;0!=s&&d<r.length;d++)o=(0|r.words[d])+s,this.words[d]=67108863&o,s=o>>>26;if(this.length=r.length,0!=s)this.words[this.length]=s,this.length++;else if(r!==this)for(;d<r.length;d++)this.words[d]=r.words[d];return this},d.prototype.add=function t(n){var a;return 0!==n.negative&&0===this.negative?(n.negative=0,a=this.sub(n),n.negative^=1,a):0===n.negative&&0!==this.negative?(this.negative=0,a=n.sub(this),this.negative=1,a):this.length>n.length?this.clone().iadd(n):n.clone().iadd(this)},d.prototype.isub=function t(n){if(0!==n.negative){n.negative=0;var o=this.iadd(n);return n.negative=1,o._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(n),this.negative=1,this._normSign();var r=this.cmp(n);if(0===r)return this.negative=0,this.length=1,this.words[0]=0,this;var s,a;0<r?(s=this,a=n):(s=n,a=this);for(var d=0,l=0;l<a.length;l++)o=(0|s.words[l])-(0|a.words[l])+d,d=o>>26,this.words[l]=67108863&o;for(;0!=d&&l<s.length;l++)o=(0|s.words[l])+d,d=o>>26,this.words[l]=67108863&o;if(0==d&&l<s.length&&s!==this)for(;l<s.length;l++)this.words[l]=s.words[l];return this.length=_Mathmax(this.length,l),s!==this&&(this.negative=1),this.strip()},d.prototype.sub=function t(n){return this.clone().isub(n)};var T=function t(n,r,i){var s=n.words,a=r.words,d=i.words,o=0,l=0|s[0],c=8191&l,u=l>>>13,f=0|s[1],m=8191&f,h=f>>>13,g=0|s[2],b=8191&g,y=g>>>13,w=0|s[3],v=8191&w,x=w>>>13,_=0|s[4],k=8191&_,C=_>>>13,E=0|s[5],T=8191&E,A=E>>>13,S=0|s[6],I=8191&S,N=S>>>13,j=0|s[7],L=8191&j,R=j>>>13,M=0|s[8],D=8191&M,P=M>>>13,O=0|s[9],B=8191&O,U=O>>>13,F=0|a[0],q=8191&F,z=F>>>13,H=0|a[1],W=8191&H,V=H>>>13,G=0|a[2],J=8191&G,K=G>>>13,X=0|a[3],Y=8191&X,Z=X>>>13,Q=0|a[4],ee=8191&Q,te=Q>>>13,ne=0|a[5],ae=8191&ne,re=ne>>>13,ie=0|a[6],oe=8191&ie,se=ie>>>13,de=0|a[7],le=8191&de,pe=de>>>13,ce=0|a[8],ue=8191&ce,fe=ce>>>13,he=0|a[9],ge=8191&he,be=he>>>13,ye,we,ve;i.negative=n.negative^r.negative,i.length=19,ye=_Mathimul(c,q),we=_Mathimul(c,z),we=0|we+_Mathimul(u,q),ve=_Mathimul(u,z);var xe=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(xe>>>26),xe&=67108863,ye=_Mathimul(m,q),we=_Mathimul(m,z),we=0|we+_Mathimul(h,q),ve=_Mathimul(h,z),ye=0|ye+_Mathimul(c,W),we=0|we+_Mathimul(c,V),we=0|we+_Mathimul(u,W),ve=0|ve+_Mathimul(u,V);var _e=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(_e>>>26),_e&=67108863,ye=_Mathimul(b,q),we=_Mathimul(b,z),we=0|we+_Mathimul(y,q),ve=_Mathimul(y,z),ye=0|ye+_Mathimul(m,W),we=0|we+_Mathimul(m,V),we=0|we+_Mathimul(h,W),ve=0|ve+_Mathimul(h,V),ye=0|ye+_Mathimul(c,J),we=0|we+_Mathimul(c,K),we=0|we+_Mathimul(u,J),ve=0|ve+_Mathimul(u,K);var ke=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(ke>>>26),ke&=67108863,ye=_Mathimul(v,q),we=_Mathimul(v,z),we=0|we+_Mathimul(x,q),ve=_Mathimul(x,z),ye=0|ye+_Mathimul(b,W),we=0|we+_Mathimul(b,V),we=0|we+_Mathimul(y,W),ve=0|ve+_Mathimul(y,V),ye=0|ye+_Mathimul(m,J),we=0|we+_Mathimul(m,K),we=0|we+_Mathimul(h,J),ve=0|ve+_Mathimul(h,K),ye=0|ye+_Mathimul(c,Y),we=0|we+_Mathimul(c,Z),we=0|we+_Mathimul(u,Y),ve=0|ve+_Mathimul(u,Z);var Ce=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Ce>>>26),Ce&=67108863,ye=_Mathimul(k,q),we=_Mathimul(k,z),we=0|we+_Mathimul(C,q),ve=_Mathimul(C,z),ye=0|ye+_Mathimul(v,W),we=0|we+_Mathimul(v,V),we=0|we+_Mathimul(x,W),ve=0|ve+_Mathimul(x,V),ye=0|ye+_Mathimul(b,J),we=0|we+_Mathimul(b,K),we=0|we+_Mathimul(y,J),ve=0|ve+_Mathimul(y,K),ye=0|ye+_Mathimul(m,Y),we=0|we+_Mathimul(m,Z),we=0|we+_Mathimul(h,Y),ve=0|ve+_Mathimul(h,Z),ye=0|ye+_Mathimul(c,ee),we=0|we+_Mathimul(c,te),we=0|we+_Mathimul(u,ee),ve=0|ve+_Mathimul(u,te);var Ee=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Ee>>>26),Ee&=67108863,ye=_Mathimul(T,q),we=_Mathimul(T,z),we=0|we+_Mathimul(A,q),ve=_Mathimul(A,z),ye=0|ye+_Mathimul(k,W),we=0|we+_Mathimul(k,V),we=0|we+_Mathimul(C,W),ve=0|ve+_Mathimul(C,V),ye=0|ye+_Mathimul(v,J),we=0|we+_Mathimul(v,K),we=0|we+_Mathimul(x,J),ve=0|ve+_Mathimul(x,K),ye=0|ye+_Mathimul(b,Y),we=0|we+_Mathimul(b,Z),we=0|we+_Mathimul(y,Y),ve=0|ve+_Mathimul(y,Z),ye=0|ye+_Mathimul(m,ee),we=0|we+_Mathimul(m,te),we=0|we+_Mathimul(h,ee),ve=0|ve+_Mathimul(h,te),ye=0|ye+_Mathimul(c,ae),we=0|we+_Mathimul(c,re),we=0|we+_Mathimul(u,ae),ve=0|ve+_Mathimul(u,re);var Te=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Te>>>26),Te&=67108863,ye=_Mathimul(I,q),we=_Mathimul(I,z),we=0|we+_Mathimul(N,q),ve=_Mathimul(N,z),ye=0|ye+_Mathimul(T,W),we=0|we+_Mathimul(T,V),we=0|we+_Mathimul(A,W),ve=0|ve+_Mathimul(A,V),ye=0|ye+_Mathimul(k,J),we=0|we+_Mathimul(k,K),we=0|we+_Mathimul(C,J),ve=0|ve+_Mathimul(C,K),ye=0|ye+_Mathimul(v,Y),we=0|we+_Mathimul(v,Z),we=0|we+_Mathimul(x,Y),ve=0|ve+_Mathimul(x,Z),ye=0|ye+_Mathimul(b,ee),we=0|we+_Mathimul(b,te),we=0|we+_Mathimul(y,ee),ve=0|ve+_Mathimul(y,te),ye=0|ye+_Mathimul(m,ae),we=0|we+_Mathimul(m,re),we=0|we+_Mathimul(h,ae),ve=0|ve+_Mathimul(h,re),ye=0|ye+_Mathimul(c,oe),we=0|we+_Mathimul(c,se),we=0|we+_Mathimul(u,oe),ve=0|ve+_Mathimul(u,se);var Ae=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Ae>>>26),Ae&=67108863,ye=_Mathimul(L,q),we=_Mathimul(L,z),we=0|we+_Mathimul(R,q),ve=_Mathimul(R,z),ye=0|ye+_Mathimul(I,W),we=0|we+_Mathimul(I,V),we=0|we+_Mathimul(N,W),ve=0|ve+_Mathimul(N,V),ye=0|ye+_Mathimul(T,J),we=0|we+_Mathimul(T,K),we=0|we+_Mathimul(A,J),ve=0|ve+_Mathimul(A,K),ye=0|ye+_Mathimul(k,Y),we=0|we+_Mathimul(k,Z),we=0|we+_Mathimul(C,Y),ve=0|ve+_Mathimul(C,Z),ye=0|ye+_Mathimul(v,ee),we=0|we+_Mathimul(v,te),we=0|we+_Mathimul(x,ee),ve=0|ve+_Mathimul(x,te),ye=0|ye+_Mathimul(b,ae),we=0|we+_Mathimul(b,re),we=0|we+_Mathimul(y,ae),ve=0|ve+_Mathimul(y,re),ye=0|ye+_Mathimul(m,oe),we=0|we+_Mathimul(m,se),we=0|we+_Mathimul(h,oe),ve=0|ve+_Mathimul(h,se),ye=0|ye+_Mathimul(c,le),we=0|we+_Mathimul(c,pe),we=0|we+_Mathimul(u,le),ve=0|ve+_Mathimul(u,pe);var Se=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Se>>>26),Se&=67108863,ye=_Mathimul(D,q),we=_Mathimul(D,z),we=0|we+_Mathimul(P,q),ve=_Mathimul(P,z),ye=0|ye+_Mathimul(L,W),we=0|we+_Mathimul(L,V),we=0|we+_Mathimul(R,W),ve=0|ve+_Mathimul(R,V),ye=0|ye+_Mathimul(I,J),we=0|we+_Mathimul(I,K),we=0|we+_Mathimul(N,J),ve=0|ve+_Mathimul(N,K),ye=0|ye+_Mathimul(T,Y),we=0|we+_Mathimul(T,Z),we=0|we+_Mathimul(A,Y),ve=0|ve+_Mathimul(A,Z),ye=0|ye+_Mathimul(k,ee),we=0|we+_Mathimul(k,te),we=0|we+_Mathimul(C,ee),ve=0|ve+_Mathimul(C,te),ye=0|ye+_Mathimul(v,ae),we=0|we+_Mathimul(v,re),we=0|we+_Mathimul(x,ae),ve=0|ve+_Mathimul(x,re),ye=0|ye+_Mathimul(b,oe),we=0|we+_Mathimul(b,se),we=0|we+_Mathimul(y,oe),ve=0|ve+_Mathimul(y,se),ye=0|ye+_Mathimul(m,le),we=0|we+_Mathimul(m,pe),we=0|we+_Mathimul(h,le),ve=0|ve+_Mathimul(h,pe),ye=0|ye+_Mathimul(c,ue),we=0|we+_Mathimul(c,fe),we=0|we+_Mathimul(u,ue),ve=0|ve+_Mathimul(u,fe);var Ie=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Ie>>>26),Ie&=67108863,ye=_Mathimul(B,q),we=_Mathimul(B,z),we=0|we+_Mathimul(U,q),ve=_Mathimul(U,z),ye=0|ye+_Mathimul(D,W),we=0|we+_Mathimul(D,V),we=0|we+_Mathimul(P,W),ve=0|ve+_Mathimul(P,V),ye=0|ye+_Mathimul(L,J),we=0|we+_Mathimul(L,K),we=0|we+_Mathimul(R,J),ve=0|ve+_Mathimul(R,K),ye=0|ye+_Mathimul(I,Y),we=0|we+_Mathimul(I,Z),we=0|we+_Mathimul(N,Y),ve=0|ve+_Mathimul(N,Z),ye=0|ye+_Mathimul(T,ee),we=0|we+_Mathimul(T,te),we=0|we+_Mathimul(A,ee),ve=0|ve+_Mathimul(A,te),ye=0|ye+_Mathimul(k,ae),we=0|we+_Mathimul(k,re),we=0|we+_Mathimul(C,ae),ve=0|ve+_Mathimul(C,re),ye=0|ye+_Mathimul(v,oe),we=0|we+_Mathimul(v,se),we=0|we+_Mathimul(x,oe),ve=0|ve+_Mathimul(x,se),ye=0|ye+_Mathimul(b,le),we=0|we+_Mathimul(b,pe),we=0|we+_Mathimul(y,le),ve=0|ve+_Mathimul(y,pe),ye=0|ye+_Mathimul(m,ue),we=0|we+_Mathimul(m,fe),we=0|we+_Mathimul(h,ue),ve=0|ve+_Mathimul(h,fe),ye=0|ye+_Mathimul(c,ge),we=0|we+_Mathimul(c,be),we=0|we+_Mathimul(u,ge),ve=0|ve+_Mathimul(u,be);var Ne=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Ne>>>26),Ne&=67108863,ye=_Mathimul(B,W),we=_Mathimul(B,V),we=0|we+_Mathimul(U,W),ve=_Mathimul(U,V),ye=0|ye+_Mathimul(D,J),we=0|we+_Mathimul(D,K),we=0|we+_Mathimul(P,J),ve=0|ve+_Mathimul(P,K),ye=0|ye+_Mathimul(L,Y),we=0|we+_Mathimul(L,Z),we=0|we+_Mathimul(R,Y),ve=0|ve+_Mathimul(R,Z),ye=0|ye+_Mathimul(I,ee),we=0|we+_Mathimul(I,te),we=0|we+_Mathimul(N,ee),ve=0|ve+_Mathimul(N,te),ye=0|ye+_Mathimul(T,ae),we=0|we+_Mathimul(T,re),we=0|we+_Mathimul(A,ae),ve=0|ve+_Mathimul(A,re),ye=0|ye+_Mathimul(k,oe),we=0|we+_Mathimul(k,se),we=0|we+_Mathimul(C,oe),ve=0|ve+_Mathimul(C,se),ye=0|ye+_Mathimul(v,le),we=0|we+_Mathimul(v,pe),we=0|we+_Mathimul(x,le),ve=0|ve+_Mathimul(x,pe),ye=0|ye+_Mathimul(b,ue),we=0|we+_Mathimul(b,fe),we=0|we+_Mathimul(y,ue),ve=0|ve+_Mathimul(y,fe),ye=0|ye+_Mathimul(m,ge),we=0|we+_Mathimul(m,be),we=0|we+_Mathimul(h,ge),ve=0|ve+_Mathimul(h,be);var je=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(je>>>26),je&=67108863,ye=_Mathimul(B,J),we=_Mathimul(B,K),we=0|we+_Mathimul(U,J),ve=_Mathimul(U,K),ye=0|ye+_Mathimul(D,Y),we=0|we+_Mathimul(D,Z),we=0|we+_Mathimul(P,Y),ve=0|ve+_Mathimul(P,Z),ye=0|ye+_Mathimul(L,ee),we=0|we+_Mathimul(L,te),we=0|we+_Mathimul(R,ee),ve=0|ve+_Mathimul(R,te),ye=0|ye+_Mathimul(I,ae),we=0|we+_Mathimul(I,re),we=0|we+_Mathimul(N,ae),ve=0|ve+_Mathimul(N,re),ye=0|ye+_Mathimul(T,oe),we=0|we+_Mathimul(T,se),we=0|we+_Mathimul(A,oe),ve=0|ve+_Mathimul(A,se),ye=0|ye+_Mathimul(k,le),we=0|we+_Mathimul(k,pe),we=0|we+_Mathimul(C,le),ve=0|ve+_Mathimul(C,pe),ye=0|ye+_Mathimul(v,ue),we=0|we+_Mathimul(v,fe),we=0|we+_Mathimul(x,ue),ve=0|ve+_Mathimul(x,fe),ye=0|ye+_Mathimul(b,ge),we=0|we+_Mathimul(b,be),we=0|we+_Mathimul(y,ge),ve=0|ve+_Mathimul(y,be);var Le=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Le>>>26),Le&=67108863,ye=_Mathimul(B,Y),we=_Mathimul(B,Z),we=0|we+_Mathimul(U,Y),ve=_Mathimul(U,Z),ye=0|ye+_Mathimul(D,ee),we=0|we+_Mathimul(D,te),we=0|we+_Mathimul(P,ee),ve=0|ve+_Mathimul(P,te),ye=0|ye+_Mathimul(L,ae),we=0|we+_Mathimul(L,re),we=0|we+_Mathimul(R,ae),ve=0|ve+_Mathimul(R,re),ye=0|ye+_Mathimul(I,oe),we=0|we+_Mathimul(I,se),we=0|we+_Mathimul(N,oe),ve=0|ve+_Mathimul(N,se),ye=0|ye+_Mathimul(T,le),we=0|we+_Mathimul(T,pe),we=0|we+_Mathimul(A,le),ve=0|ve+_Mathimul(A,pe),ye=0|ye+_Mathimul(k,ue),we=0|we+_Mathimul(k,fe),we=0|we+_Mathimul(C,ue),ve=0|ve+_Mathimul(C,fe),ye=0|ye+_Mathimul(v,ge),we=0|we+_Mathimul(v,be),we=0|we+_Mathimul(x,ge),ve=0|ve+_Mathimul(x,be);var Re=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Re>>>26),Re&=67108863,ye=_Mathimul(B,ee),we=_Mathimul(B,te),we=0|we+_Mathimul(U,ee),ve=_Mathimul(U,te),ye=0|ye+_Mathimul(D,ae),we=0|we+_Mathimul(D,re),we=0|we+_Mathimul(P,ae),ve=0|ve+_Mathimul(P,re),ye=0|ye+_Mathimul(L,oe),we=0|we+_Mathimul(L,se),we=0|we+_Mathimul(R,oe),ve=0|ve+_Mathimul(R,se),ye=0|ye+_Mathimul(I,le),we=0|we+_Mathimul(I,pe),we=0|we+_Mathimul(N,le),ve=0|ve+_Mathimul(N,pe),ye=0|ye+_Mathimul(T,ue),we=0|we+_Mathimul(T,fe),we=0|we+_Mathimul(A,ue),ve=0|ve+_Mathimul(A,fe),ye=0|ye+_Mathimul(k,ge),we=0|we+_Mathimul(k,be),we=0|we+_Mathimul(C,ge),ve=0|ve+_Mathimul(C,be);var Me=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Me>>>26),Me&=67108863,ye=_Mathimul(B,ae),we=_Mathimul(B,re),we=0|we+_Mathimul(U,ae),ve=_Mathimul(U,re),ye=0|ye+_Mathimul(D,oe),we=0|we+_Mathimul(D,se),we=0|we+_Mathimul(P,oe),ve=0|ve+_Mathimul(P,se),ye=0|ye+_Mathimul(L,le),we=0|we+_Mathimul(L,pe),we=0|we+_Mathimul(R,le),ve=0|ve+_Mathimul(R,pe),ye=0|ye+_Mathimul(I,ue),we=0|we+_Mathimul(I,fe),we=0|we+_Mathimul(N,ue),ve=0|ve+_Mathimul(N,fe),ye=0|ye+_Mathimul(T,ge),we=0|we+_Mathimul(T,be),we=0|we+_Mathimul(A,ge),ve=0|ve+_Mathimul(A,be);var De=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(De>>>26),De&=67108863,ye=_Mathimul(B,oe),we=_Mathimul(B,se),we=0|we+_Mathimul(U,oe),ve=_Mathimul(U,se),ye=0|ye+_Mathimul(D,le),we=0|we+_Mathimul(D,pe),we=0|we+_Mathimul(P,le),ve=0|ve+_Mathimul(P,pe),ye=0|ye+_Mathimul(L,ue),we=0|we+_Mathimul(L,fe),we=0|we+_Mathimul(R,ue),ve=0|ve+_Mathimul(R,fe),ye=0|ye+_Mathimul(I,ge),we=0|we+_Mathimul(I,be),we=0|we+_Mathimul(N,ge),ve=0|ve+_Mathimul(N,be);var Pe=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Pe>>>26),Pe&=67108863,ye=_Mathimul(B,le),we=_Mathimul(B,pe),we=0|we+_Mathimul(U,le),ve=_Mathimul(U,pe),ye=0|ye+_Mathimul(D,ue),we=0|we+_Mathimul(D,fe),we=0|we+_Mathimul(P,ue),ve=0|ve+_Mathimul(P,fe),ye=0|ye+_Mathimul(L,ge),we=0|we+_Mathimul(L,be),we=0|we+_Mathimul(R,ge),ve=0|ve+_Mathimul(R,be);var Oe=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Oe>>>26),Oe&=67108863,ye=_Mathimul(B,ue),we=_Mathimul(B,fe),we=0|we+_Mathimul(U,ue),ve=_Mathimul(U,fe),ye=0|ye+_Mathimul(D,ge),we=0|we+_Mathimul(D,be),we=0|we+_Mathimul(P,ge),ve=0|ve+_Mathimul(P,be);var Be=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Be>>>26),Be&=67108863,ye=_Mathimul(B,ge),we=_Mathimul(B,be),we=0|we+_Mathimul(U,ge),ve=_Mathimul(U,be);var Ue=0|(0|o+ye)+((8191&we)<<13);return o=0|(0|ve+(we>>>13))+(Ue>>>26),Ue&=67108863,d[0]=xe,d[1]=_e,d[2]=ke,d[3]=Ce,d[4]=Ee,d[5]=Te,d[6]=Ae,d[7]=Se,d[8]=Ie,d[9]=Ne,d[10]=je,d[11]=Le,d[12]=Re,d[13]=Me,d[14]=De,d[15]=Pe,d[16]=Oe,d[17]=Be,d[18]=Ue,0!=o&&(d[19]=o,i.length++),i};_Mathimul||(T=i),d.prototype.mulTo=function t(n,a){var r=this.length+n.length,o;return o=10===this.length&&10===n.length?T(this,n,a):63>r?i(this,n,a):1024>r?u(this,n,a):f(this,n,a),o},m.prototype.makeRBT=function n(a){for(var r=Array(a),t=d.prototype._countBits(a)-1,o=0;o<a;o++)r[o]=this.revBin(o,t,a);return r},m.prototype.revBin=function t(n,a,r){if(0===n||n===r-1)return n;for(var o=0,s=0;s<a;s++)o|=(1&n)<<a-s-1,n>>=1;return o},m.prototype.permute=function t(n,a,r,o,s,d){for(var l=0;l<d;l++)o[l]=a[n[l]],s[l]=r[n[l]]},m.prototype.transform=function t(n,a,r,i,o,d){this.permute(d,n,a,r,i,o);for(var c=1;c<o;c<<=1)for(var s=c<<1,l=_Mathcos(2*_MathPI/s),u=_Mathsin(2*_MathPI/s),f=0;f<o;f+=s)for(var m=l,h=u,g=0;g<c;g++){var b=r[f+g],y=i[f+g],w=r[f+g+c],v=i[f+g+c],x=m*w-h*v;v=m*v+h*w,w=x,r[f+g]=b+w,i[f+g]=y+v,r[f+g+c]=b-w,i[f+g+c]=y-v,g!==s&&(x=l*m-u*h,h=l*h+u*m,m=x)}},m.prototype.guessLen13b=function t(a,n){var r=1|_Mathmax(n,a),o=1&r,s=0;for(r=0|r/2;r;r>>>=1)s++;return 1<<s+1+o},m.prototype.conjugate=function n(a,r,o){if(!(1>=o))for(var s=0,i;s<o/2;s++)i=a[s],a[s]=a[o-s-1],a[o-s-1]=i,i=r[s],r[s]=-r[o-s-1],r[o-s-1]=-i},m.prototype.normalize13b=function t(n,a){for(var r=0,o=0,i;o<a/2;o++)i=8192*_Mathround(n[2*o+1]/a)+_Mathround(n[2*o]/a)+r,n[o]=67108863&i,r=67108864>i?0:0|i/67108864;return n},m.prototype.convert13b=function t(n,a,r,s){for(var d=0,l=0;l<a;l++)d+=0|n[l],r[2*l]=8191&d,d>>>=13,r[2*l+1]=8191&d,d>>>=13;for(l=2*a;l<s;++l)r[l]=0;o(0==d),o(0==(-8192&d))},m.prototype.stub=function t(n){for(var a=Array(n),r=0;r<n;r++)a[r]=0;return a},m.prototype.mulp=function t(n,a,r){var o=2*this.guessLen13b(n.length,a.length),s=this.makeRBT(o),d=this.stub(o),l=Array(o),c=Array(o),u=Array(o),f=Array(o),m=Array(o),h=Array(o),g=r.words;g.length=o,this.convert13b(n.words,n.length,l,o),this.convert13b(a.words,a.length,f,o),this.transform(l,d,c,u,o,s),this.transform(f,d,m,h,o,s);for(var b=0,i;b<o;b++)i=c[b]*m[b]-u[b]*h[b],u[b]=c[b]*h[b]+u[b]*m[b],c[b]=i;return this.conjugate(c,u,o),this.transform(c,u,g,d,o,s),this.conjugate(g,d,o),this.normalize13b(g,o),r.negative=n.negative^a.negative,r.length=n.length+a.length,r.strip()},d.prototype.mul=function t(n){var a=new d(null);return a.words=Array(this.length+n.length),this.mulTo(n,a)},d.prototype.mulf=function t(n){var a=new d(null);return a.words=Array(this.length+n.length),f(this,n,a)},d.prototype.imul=function t(n){return this.clone().mulTo(n,this)},d.prototype.imuln=function t(n){o('number'==typeof n),o(67108864>n);for(var a=0,r=0;r<this.length;r++){var i=(0|this.words[r])*n,s=(67108863&i)+(67108863&a);a>>=26,a+=0|i/67108864,a+=s>>>26,this.words[r]=67108863&s}return 0!=a&&(this.words[r]=a,this.length++),this},d.prototype.muln=function t(n){return this.clone().imuln(n)},d.prototype.sqr=function t(){return this.mul(this)},d.prototype.isqr=function t(){return this.imul(this.clone())},d.prototype.pow=function t(n){var a=c(n);if(0===a.length)return new d(1);for(var r=this,o=0;o<a.length&&!(0!==a[o]);o++,r=r.sqr());if(++o<a.length)for(var i=r.sqr();o<a.length;o++,i=i.sqr())0!==a[o]&&(r=r.mul(i));return r},d.prototype.iushln=function t(n){o('number'==typeof n&&0<=n);var a=n%26,r=(n-a)/26,s=67108863>>>26-a<<26-a,d;if(0!=a){var i=0;for(d=0;d<this.length;d++){var l=this.words[d]&s,u=(0|this.words[d])-l<<a;this.words[d]=u|i,i=l>>>26-a}i&&(this.words[d]=i,this.length++)}if(0!=r){for(d=this.length-1;0<=d;d--)this.words[d+r]=this.words[d];for(d=0;d<r;d++)this.words[d]=0;this.length+=r}return this.strip()},d.prototype.ishln=function t(n){return o(0===this.negative),this.iushln(n)},d.prototype.iushrn=function t(n,a,d){o('number'==typeof n&&0<=n);var l;l=a?(a-a%26)/26:0;var c=n%26,r=_Mathmin((n-c)/26,this.length),s=67108863^67108863>>>c<<c,u=d;if(l-=r,l=_Mathmax(0,l),u){for(var f=0;f<r;f++)u.words[f]=this.words[f];u.length=r}if(0===r);else if(this.length>r)for(this.length-=r,f=0;f<this.length;f++)this.words[f]=this.words[f+r];else this.words[0]=0,this.length=1;var i=0;for(f=this.length-1;0<=f&&(0!=i||f>=l);f--){var m=0|this.words[f];this.words[f]=i<<26-c|m>>>c,i=m&s}return u&&0!=i&&(u.words[u.length++]=i),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},d.prototype.ishrn=function t(n,a,r){return o(0===this.negative),this.iushrn(n,a,r)},d.prototype.shln=function t(n){return this.clone().ishln(n)},d.prototype.ushln=function t(n){return this.clone().iushln(n)},d.prototype.shrn=function t(n){return this.clone().ishrn(n)},d.prototype.ushrn=function t(n){return this.clone().iushrn(n)},d.prototype.testn=function t(n){o('number'==typeof n&&0<=n);var a=n%26,r=(n-a)/26,i=1<<a;if(this.length<=r)return!1;var s=this.words[r];return!!(s&i)},d.prototype.imaskn=function t(n){o('number'==typeof n&&0<=n);var a=n%26,r=(n-a)/26;if(o(0===this.negative,'imaskn works only with positive numbers'),this.length<=r)return this;if(0!=a&&r++,this.length=_Mathmin(r,this.length),0!=a){var i=67108863^67108863>>>a<<a;this.words[this.length-1]&=i}return this.strip()},d.prototype.maskn=function t(n){return this.clone().imaskn(n)},d.prototype.iaddn=function t(n){return o('number'==typeof n),o(67108864>n),0>n?this.isubn(-n):0===this.negative?this._iaddn(n):1===this.length&&(0|this.words[0])<n?(this.words[0]=n-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(n),this.negative=1,this)},d.prototype._iaddn=function t(n){this.words[0]+=n;for(var a=0;a<this.length&&67108864<=this.words[a];a++)this.words[a]-=67108864,a===this.length-1?this.words[a+1]=1:this.words[a+1]++;return this.length=_Mathmax(this.length,a+1),this},d.prototype.isubn=function t(n){if(o('number'==typeof n),o(67108864>n),0>n)return this.iaddn(-n);if(0!==this.negative)return this.negative=0,this.iaddn(n),this.negative=1,this;if(this.words[0]-=n,1===this.length&&0>this.words[0])this.words[0]=-this.words[0],this.negative=1;else for(var a=0;a<this.length&&0>this.words[a];a++)this.words[a]+=67108864,this.words[a+1]-=1;return this.strip()},d.prototype.addn=function t(n){return this.clone().iaddn(n)},d.prototype.subn=function t(n){return this.clone().isubn(n)},d.prototype.iabs=function t(){return this.negative=0,this},d.prototype.abs=function t(){return this.clone().iabs()},d.prototype._ishlnsubmul=function t(n,a,r){var s=n.length+r,d;this._expand(s);var i=0,l;for(d=0;d<n.length;d++){l=(0|this.words[d+r])+i;var c=(0|n.words[d])*a;l-=67108863&c,i=(l>>26)-(0|c/67108864),this.words[d+r]=67108863&l}for(;d<this.length-r;d++)l=(0|this.words[d+r])+i,i=l>>26,this.words[d+r]=67108863&l;if(0==i)return this.strip();for(o(-1==i),i=0,d=0;d<this.length;d++)l=-(0|this.words[d])+i,i=l>>26,this.words[d]=67108863&l;return this.negative=1,this.strip()},d.prototype._wordDiv=function t(n,r){var o=this.length-n.length,s=this.clone(),l=n,c=0|l.words[l.length-1],u=this._countBits(c);o=26-u,0!=o&&(l=l.ushln(o),s.iushln(o),c=0|l.words[l.length-1]);var f=s.length-l.length,m;if('mod'!==r){m=new d(null),m.length=f+1,m.words=Array(m.length);for(var h=0;h<m.length;h++)m.words[h]=0}var i=s.clone()._ishlnsubmul(l,1,f);0===i.negative&&(s=i,m&&(m.words[f]=1));for(var g=f-1,b;0<=g;g--){for(b=67108864*(0|s.words[l.length+g])+(0|s.words[l.length+g-1]),b=_Mathmin(0|b/c,67108863),s._ishlnsubmul(l,b,g);0!==s.negative;)b--,s.negative=0,s._ishlnsubmul(l,1,g),s.isZero()||(s.negative^=1);m&&(m.words[g]=b)}return m&&m.strip(),s.strip(),'div'!==r&&0!=o&&s.iushrn(o),{div:m||null,mod:s}},d.prototype.divmod=function t(n,a,r){if(o(!n.isZero()),this.isZero())return{div:new d(0),mod:new d(0)};var i,s,l;return 0!==this.negative&&0===n.negative?(l=this.neg().divmod(n,a),'mod'!==a&&(i=l.div.neg()),'div'!==a&&(s=l.mod.neg(),r&&0!==s.negative&&s.iadd(n)),{div:i,mod:s}):0===this.negative&&0!==n.negative?(l=this.divmod(n.neg(),a),'mod'!==a&&(i=l.div.neg()),{div:i,mod:l.mod}):0==(this.negative&n.negative)?n.length>this.length||0>this.cmp(n)?{div:new d(0),mod:this}:1===n.length?'div'===a?{div:this.divn(n.words[0]),mod:null}:'mod'===a?{div:null,mod:new d(this.modn(n.words[0]))}:{div:this.divn(n.words[0]),mod:new d(this.modn(n.words[0]))}:this._wordDiv(n,a):(l=this.neg().divmod(n.neg(),a),'div'!==a&&(s=l.mod.neg(),r&&0!==s.negative&&s.isub(n)),{div:l.div,mod:s})},d.prototype.div=function t(n){return this.divmod(n,'div',!1).div},d.prototype.mod=function t(n){return this.divmod(n,'mod',!1).mod},d.prototype.umod=function t(n){return this.divmod(n,'mod',!0).mod},d.prototype.divRound=function t(n){var a=this.divmod(n);if(a.mod.isZero())return a.div;var r=0===a.div.negative?a.mod:a.mod.isub(n),i=n.ushrn(1),o=n.andln(1),s=r.cmp(i);return 0>s||1===o&&0===s?a.div:0===a.div.negative?a.div.iaddn(1):a.div.isubn(1)},d.prototype.modn=function t(n){o(67108863>=n);for(var a=67108864%n,r=0,s=this.length-1;0<=s;s--)r=(a*r+(0|this.words[s]))%n;return r},d.prototype.idivn=function t(n){o(67108863>=n);for(var a=0,r=this.length-1,i;0<=r;r--)i=(0|this.words[r])+67108864*a,this.words[r]=0|i/n,a=i%n;return this.strip()},d.prototype.divn=function t(n){return this.clone().idivn(n)},d.prototype.egcd=function t(n){o(0===n.negative),o(!n.isZero());var a=this,r=n.clone();a=0===a.negative?a.clone():a.umod(n);for(var s=new d(1),l=new d(0),c=new d(0),u=new d(1),f=0;a.isEven()&&r.isEven();)a.iushrn(1),r.iushrn(1),++f;for(var m=r.clone(),h=a.clone();!a.isZero();){for(var g=0,i=1;0==(a.words[0]&i)&&26>g;++g,i<<=1);if(0<g)for(a.iushrn(g);0<g--;)(s.isOdd()||l.isOdd())&&(s.iadd(m),l.isub(h)),s.iushrn(1),l.iushrn(1);for(var b=0,y=1;0==(r.words[0]&y)&&26>b;++b,y<<=1);if(0<b)for(r.iushrn(b);0<b--;)(c.isOdd()||u.isOdd())&&(c.iadd(m),u.isub(h)),c.iushrn(1),u.iushrn(1);0<=a.cmp(r)?(a.isub(r),s.isub(c),l.isub(u)):(r.isub(a),c.isub(s),u.isub(l))}return{a:c,b:u,gcd:r.iushln(f)}},d.prototype._invmp=function t(n){o(0===n.negative),o(!n.isZero());var r=this,a=n.clone();r=0===r.negative?r.clone():r.umod(n);for(var s=new d(1),l=new d(0),c=a.clone();0<r.cmpn(1)&&0<a.cmpn(1);){for(var u=0,i=1;0==(r.words[0]&i)&&26>u;++u,i<<=1);if(0<u)for(r.iushrn(u);0<u--;)s.isOdd()&&s.iadd(c),s.iushrn(1);for(var f=0,m=1;0==(a.words[0]&m)&&26>f;++f,m<<=1);if(0<f)for(a.iushrn(f);0<f--;)l.isOdd()&&l.iadd(c),l.iushrn(1);0<=r.cmp(a)?(r.isub(a),s.isub(l)):(a.isub(r),l.isub(s))}var h;return h=0===r.cmpn(1)?s:l,0>h.cmpn(0)&&h.iadd(n),h},d.prototype.gcd=function n(i){if(this.isZero())return i.abs();if(i.isZero())return this.abs();var o=this.clone(),a=i.clone();o.negative=0,a.negative=0;for(var s=0;o.isEven()&&a.isEven();s++)o.iushrn(1),a.iushrn(1);do{for(;o.isEven();)o.iushrn(1);for(;a.isEven();)a.iushrn(1);var d=o.cmp(a);if(0>d){var r=o;o=a,a=r}else if(0===d||0===a.cmpn(1))break;o.isub(a)}while(!0);return a.iushln(s)},d.prototype.invm=function t(n){return this.egcd(n).a.umod(n)},d.prototype.isEven=function t(){return 0==(1&this.words[0])},d.prototype.isOdd=function t(){return 1==(1&this.words[0])},d.prototype.andln=function t(n){return this.words[0]&n},d.prototype.bincn=function t(n){o('number'==typeof n);var a=n%26,r=(n-a)/26,s=1<<a;if(this.length<=r)return this._expand(r+1),this.words[r]|=s,this;for(var d=s,l=r,i;0!=d&&l<this.length;l++)i=0|this.words[l],i+=d,d=i>>>26,i&=67108863,this.words[l]=i;return 0!=d&&(this.words[l]=d,this.length++),this},d.prototype.isZero=function t(){return 1===this.length&&0===this.words[0]},d.prototype.cmpn=function t(n){var a=0>n;if(0!==this.negative&&!a)return-1;if(0===this.negative&&a)return 1;this.strip();var r;if(1<this.length)r=1;else{a&&(n=-n),o(67108863>=n,'Number is too big');var i=0|this.words[0];r=i===n?0:i<n?-1:1}return 0===this.negative?r:0|-r},d.prototype.cmp=function t(n){if(0!==this.negative&&0===n.negative)return-1;if(0===this.negative&&0!==n.negative)return 1;var a=this.ucmp(n);return 0===this.negative?a:0|-a},d.prototype.ucmp=function t(n){if(this.length>n.length)return 1;if(this.length<n.length)return-1;for(var r=0,o=this.length-1;0<=o;o--){var i=0|this.words[o],a=0|n.words[o];if(i!=a){i<a?r=-1:i>a&&(r=1);break}}return r},d.prototype.gtn=function t(n){return 1===this.cmpn(n)},d.prototype.gt=function t(n){return 1===this.cmp(n)},d.prototype.gten=function t(n){return 0<=this.cmpn(n)},d.prototype.gte=function t(n){return 0<=this.cmp(n)},d.prototype.ltn=function t(n){return-1===this.cmpn(n)},d.prototype.lt=function t(n){return-1===this.cmp(n)},d.prototype.lten=function t(n){return 0>=this.cmpn(n)},d.prototype.lte=function t(n){return 0>=this.cmp(n)},d.prototype.eqn=function t(n){return 0===this.cmpn(n)},d.prototype.eq=function t(n){return 0===this.cmp(n)},d.red=function t(n){return new v(n)},d.prototype.toRed=function t(n){return o(!this.red,'Already a number in reduction context'),o(0===this.negative,'red works only with positives'),n.convertTo(this)._forceRed(n)},d.prototype.fromRed=function t(){return o(this.red,'fromRed works only with numbers in reduction context'),this.red.convertFrom(this)},d.prototype._forceRed=function t(n){return this.red=n,this},d.prototype.forceRed=function t(n){return o(!this.red,'Already a number in reduction context'),this._forceRed(n)},d.prototype.redAdd=function t(n){return o(this.red,'redAdd works only with red numbers'),this.red.add(this,n)},d.prototype.redIAdd=function t(n){return o(this.red,'redIAdd works only with red numbers'),this.red.iadd(this,n)},d.prototype.redSub=function t(n){return o(this.red,'redSub works only with red numbers'),this.red.sub(this,n)},d.prototype.redISub=function t(n){return o(this.red,'redISub works only with red numbers'),this.red.isub(this,n)},d.prototype.redShl=function t(n){return o(this.red,'redShl works only with red numbers'),this.red.shl(this,n)},d.prototype.redMul=function t(n){return o(this.red,'redMul works only with red numbers'),this.red._verify2(this,n),this.red.mul(this,n)},d.prototype.redIMul=function t(n){return o(this.red,'redMul works only with red numbers'),this.red._verify2(this,n),this.red.imul(this,n)},d.prototype.redSqr=function t(){return o(this.red,'redSqr works only with red numbers'),this.red._verify1(this),this.red.sqr(this)},d.prototype.redISqr=function t(){return o(this.red,'redISqr works only with red numbers'),this.red._verify1(this),this.red.isqr(this)},d.prototype.redSqrt=function t(){return o(this.red,'redSqrt works only with red numbers'),this.red._verify1(this),this.red.sqrt(this)},d.prototype.redInvm=function t(){return o(this.red,'redInvm works only with red numbers'),this.red._verify1(this),this.red.invm(this)},d.prototype.redNeg=function t(){return o(this.red,'redNeg works only with red numbers'),this.red._verify1(this),this.red.neg(this)},d.prototype.redPow=function t(n){return o(this.red&&!n.red,'redPow(normalNum)'),this.red._verify1(this),this.red.pow(this,n)};var A={k256:null,p224:null,p192:null,p25519:null};h.prototype._tmp=function t(){var n=new d(null);return n.words=Array(_Mathceil(this.n/13)),n},h.prototype.ireduce=function t(n){var a=n,r;do this.split(a,this.tmp),a=this.imulK(a),a=a.iadd(this.tmp),r=a.bitLength();while(r>this.n);var i=r<this.n?-1:a.ucmp(this.p);return 0===i?(a.words[0]=0,a.length=1):0<i?a.isub(this.p):a.strip(),a},h.prototype.split=function t(n,a){n.iushrn(this.n,0,a)},h.prototype.imulK=function t(n){return n.imul(this.k)},r(g,h),g.prototype.split=function t(n,a){for(var r=4194303,o=_Mathmin(n.length,9),s=0;s<o;s++)a.words[s]=n.words[s];if(a.length=o,9>=n.length)return n.words[0]=0,void(n.length=1);var i=n.words[9];for(a.words[a.length++]=i&r,s=10;s<n.length;s++){var d=0|n.words[s];n.words[s-10]=(d&r)<<4|i>>>22,i=d}i>>>=22,n.words[s-10]=i,n.length-=0===i&&10<n.length?10:9},g.prototype.imulK=function t(n){n.words[n.length]=0,n.words[n.length+1]=0,n.length+=2;for(var a=0,r=0,i;r<n.length;r++)i=0|n.words[r],a+=977*i,n.words[r]=67108863&a,a=64*i+(0|a/67108864);return 0===n.words[n.length-1]&&(n.length--,0===n.words[n.length-1]&&n.length--),n},r(b,h),r(y,h),r(w,h),w.prototype.imulK=function t(n){for(var a=0,r=0;r<n.length;r++){var i=19*(0|n.words[r])+a,o=67108863&i;i>>>=26,n.words[r]=o,a=i}return 0!=a&&(n.words[n.length++]=a),n},d._prime=function t(n){if(A[n])return A[n];var t;if('k256'===n)t=new g;else if('p224'===n)t=new b;else if('p192'===n)t=new y;else if('p25519'===n)t=new w;else throw new Error('Unknown prime '+n);return A[n]=t,t},v.prototype._verify1=function t(n){o(0===n.negative,'red works only with positives'),o(n.red,'red works only with red numbers')},v.prototype._verify2=function t(n,a){o(0==(n.negative|a.negative),'red works only with positives'),o(n.red&&n.red===a.red,'red works only with red numbers')},v.prototype.imod=function t(n){return this.prime?this.prime.ireduce(n)._forceRed(this):n.umod(this.m)._forceRed(this)},v.prototype.neg=function t(n){return n.isZero()?n.clone():this.m.sub(n)._forceRed(this)},v.prototype.add=function t(n,a){this._verify2(n,a);var r=n.add(a);return 0<=r.cmp(this.m)&&r.isub(this.m),r._forceRed(this)},v.prototype.iadd=function t(n,a){this._verify2(n,a);var r=n.iadd(a);return 0<=r.cmp(this.m)&&r.isub(this.m),r},v.prototype.sub=function t(n,a){this._verify2(n,a);var r=n.sub(a);return 0>r.cmpn(0)&&r.iadd(this.m),r._forceRed(this)},v.prototype.isub=function t(n,a){this._verify2(n,a);var r=n.isub(a);return 0>r.cmpn(0)&&r.iadd(this.m),r},v.prototype.shl=function t(n,a){return this._verify1(n),this.imod(n.ushln(a))},v.prototype.imul=function t(n,a){return this._verify2(n,a),this.imod(n.imul(a))},v.prototype.mul=function t(n,a){return this._verify2(n,a),this.imod(n.mul(a))},v.prototype.isqr=function t(n){return this.imul(n,n.clone())},v.prototype.sqr=function t(n){return this.mul(n,n)},v.prototype.sqrt=function n(l){if(l.isZero())return l.clone();var a=this.m.andln(3);if(o(1==a%2),3===a){var u=this.m.add(new d(1)).iushrn(2);return this.pow(l,u)}for(var f=this.m.subn(1),h=0;!f.isZero()&&0===f.andln(1);)h++,f.iushrn(1);o(!f.isZero());var s=new d(1).toRed(this),g=s.redNeg(),y=this.m.subn(1).iushrn(1),w=this.m.bitLength();for(w=new d(2*w*w).toRed(this);0!==this.pow(w,y).cmp(g);)w.redIAdd(g);for(var v=this.pow(w,f),c=this.pow(l,f.addn(1).iushrn(1)),r=this.pow(l,f),t=h;0!==r.cmp(s);){for(var m=r,x=0;0!==m.cmp(s);x++)m=m.redSqr();o(x<t);var i=this.pow(v,new d(1).iushln(t-x-1));c=c.redMul(i),v=i.redSqr(),r=r.redMul(v),t=x}return c},v.prototype.invm=function t(n){var a=n._invmp(this.m);return 0===a.negative?this.imod(a):(a.negative=0,this.imod(a).redNeg())},v.prototype.pow=function t(n,a){if(a.isZero())return new d(1).toRed(this);if(0===a.cmpn(1))return n.clone();var r=4,o=Array(1<<r);o[0]=new d(1).toRed(this),o[1]=n;for(var s=2;s<o.length;s++)o[s]=this.mul(o[s-1],n);var i=o[0],l=0,c=0,u=a.bitLength()%26;for(0==u&&(u=26),s=a.length-1;0<=s;s--){for(var f=a.words[s],m=u-1,h;0<=m;m--){if(h=1&f>>m,i!==o[0]&&(i=this.sqr(i)),0==h&&0==l){c=0;continue}l<<=1,l|=h,c++,c!=r&&(0!==s||0!==m)||(i=this.mul(i,o[l]),c=0,l=0)}u=26}return i},v.prototype.convertTo=function t(n){var a=n.umod(this.m);return a===n?a.clone():a},v.prototype.convertFrom=function t(n){var a=n.clone();return a.red=null,a},d.mont=function t(n){return new x(n)},r(x,v),x.prototype.convertTo=function t(n){return this.imod(n.ushln(this.shift))},x.prototype.convertFrom=function t(n){var a=this.imod(n.mul(this.rinv));return a.red=null,a},x.prototype.imul=function n(r,a){if(r.isZero()||a.isZero())return r.words[0]=0,r.length=1,r;var i=r.imul(a),t=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=i.isub(t).iushrn(this.shift),s=o;return 0<=o.cmp(this.m)?s=o.isub(this.m):0>o.cmpn(0)&&(s=o.iadd(this.m)),s._forceRed(this)},x.prototype.mul=function n(r,a){if(r.isZero()||a.isZero())return new d(0)._forceRed(this);var i=r.mul(a),t=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=i.isub(t).iushrn(this.shift),s=o;return 0<=o.cmp(this.m)?s=o.isub(this.m):0>o.cmpn(0)&&(s=o.iadd(this.m)),s._forceRed(this)},x.prototype.invm=function t(n){var a=this.imod(n._invmp(this.m).mul(this.r2));return a._forceRed(this)}})('undefined'==typeof t||t,this)}).call(n,a(9)(t))},function(t,n,a){function r(t){this.rand=t||new i.Rand}var o=a(384),i=a(229);t.exports=r,r.create=function t(n){return new r(n)},r.prototype._randbelow=function t(r){var n=r.bitLength(),i=_Mathceil(n/8);do var s=new o(this.rand.generate(i));while(0<=s.cmp(r));return s},r.prototype._randrange=function t(n,a){var r=a.sub(n);return n.add(this._randbelow(r))},r.prototype.test=function t(r,n,l){var c=r.bitLength(),u=o.mont(r),f=new o(1).toRed(u);n||(n=_Mathmax(1,0|c/48));for(var m=r.subn(1),h=0;!m.testn(h);h++);for(var s=r.shrn(h),d=m.toRed(u),g=!0;0<n;n--){var b=this._randrange(new o(2),m);l&&l(b);var a=b.toRed(u).redPow(s);if(0!==a.cmp(f)&&0!==a.cmp(d)){for(var y=1;y<h;y++){if(a=a.redSqr(),0===a.cmp(f))return!1;if(0===a.cmp(d))break}if(y===h)return!1}}return g},r.prototype.getDivisor=function t(r,n){var l=r.bitLength(),c=o.mont(r),u=new o(1).toRed(c);n||(n=_Mathmax(1,0|l/48));for(var f=r.subn(1),m=0;!f.testn(m);m++);for(var s=r.shrn(m),d=f.toRed(c);0<n;n--){var h=this._randrange(new o(2),f),a=r.gcd(h);if(0!==a.cmpn(1))return a;var g=h.toRed(c).redPow(s);if(0!==g.cmp(u)&&0!==g.cmp(d)){for(var b=1;b<m;b++){if(g=g.redSqr(),0===g.cmp(u))return g.fromRed().subn(1).gcd(r);if(0===g.cmp(d))break}if(b===m)return g=g.redSqr(),g.fromRed().subn(1).gcd(r)}}return!1}},function(t,n,a){function i(t){this.rand=t}var o;if(t.exports=function t(n){return o||(o=new i(null)),o.generate(n)},t.exports.Rand=i,i.prototype.generate=function t(n){return this._rand(n)},i.prototype._rand=function t(a){if(this.rand.getBytes)return this.rand.getBytes(a);for(var n=new Uint8Array(a),r=0;r<n.length;r++)n[r]=this.rand.getByte();return n},'object'==typeof self)self.crypto&&self.crypto.getRandomValues?i.prototype._rand=function t(a){var n=new Uint8Array(a);return self.crypto.getRandomValues(n),n}:self.msCrypto&&self.msCrypto.getRandomValues?i.prototype._rand=function t(a){var n=new Uint8Array(a);return self.msCrypto.getRandomValues(n),n}:'object'==typeof window&&(i.prototype._rand=function(){throw new Error('Not implemented yet')});else try{var r=a(386);if('function'!=typeof r.randomBytes)throw new Error('Not supported');i.prototype._rand=function t(a){return r.randomBytes(a)}}catch(t){}},function(t,n,a){'use strict';function r(t,n){if(Array.isArray(t))return t.slice();if(!t)return[];var a=[];if('string'!=typeof t){for(var r=0;r<t.length;r++)a[r]=0|t[r];return a}if('hex'===n){t=t.replace(/[^a-z0-9]+/ig,''),0!=t.length%2&&(t='0'+t);for(var r=0;r<t.length;r+=2)a.push(parseInt(t[r]+t[r+1],16))}else for(var r=0;r<t.length;r++){var i=t.charCodeAt(r),o=i>>8,s=255&i;o?a.push(o,s):a.push(s)}return a}function o(t){return 1===t.length?'0'+t:t}function i(t){for(var n='',a=0;a<t.length;a++)n+=o(t[a].toString(16));return n}var s=n;s.toArray=r,s.zero2=o,s.toHex=i,s.encode=function t(n,a){return'hex'===a?i(n):n}},function(t,n,a){'use strict';function r(t,n,a,r){return 0===t?i(n,a,r):1===t||3===t?d(n,a,r):2===t?o(n,a,r):void 0}function i(t,n,a){return t&n^~t&a}function o(t,n,a){return t&n^t&a^n&a}function d(t,n,a){return t^n^a}function s(t){return m(t,2)^m(t,13)^m(t,22)}function l(t){return m(t,6)^m(t,11)^m(t,25)}function c(t){return m(t,7)^m(t,18)^t>>>3}function u(t){return m(t,17)^m(t,19)^t>>>10}var f=a(27),m=f.rotr32;n.ft_1=r,n.ch32=i,n.maj32=o,n.p32=d,n.s0_256=s,n.s1_256=l,n.g0_256=c,n.g1_256=u},function(t,n,a){'use strict';function r(){return this instanceof r?void(h.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=g,this.W=Array(64)):new r}var i=a(27),o=a(68),s=a(231),l=a(21),u=i.sum32,d=i.sum32_4,m=i.sum32_5,y=s.ch32,w=s.maj32,v=s.s0_256,x=s.s1_256,c=s.g0_256,f=s.g1_256,h=o.BlockHash,g=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];i.inherits(r,h),t.exports=r,r.blockSize=512,r.outSize=256,r.hmacStrength=192,r.padLength=64,r.prototype._update=function t(n,r){for(var o=this.W,s=0;16>s;s++)o[s]=n[r+s];for(;s<o.length;s++)o[s]=d(f(o[s-2]),o[s-7],c(o[s-15]),o[s-16]);var i=this.h[0],a=this.h[1],b=this.h[2],_=this.h[3],k=this.h[4],C=this.h[5],E=this.h[6],g=this.h[7];for(l(this.k.length===o.length),s=0;s<o.length;s++){var h=m(g,x(k),y(k,C,E),this.k[s],o[s]),T=u(v(i),w(i,a,b));g=E,E=C,C=k,k=u(_,h),_=b,b=a,a=i,i=u(h,T)}this.h[0]=u(this.h[0],i),this.h[1]=u(this.h[1],a),this.h[2]=u(this.h[2],b),this.h[3]=u(this.h[3],_),this.h[4]=u(this.h[4],k),this.h[5]=u(this.h[5],C),this.h[6]=u(this.h[6],E),this.h[7]=u(this.h[7],g)},r.prototype._digest=function t(n){return'hex'===n?i.toHex32(this.h,'big'):i.split32(this.h,'big')}},function(t,n,a){'use strict';function r(){return this instanceof r?void(L.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=R,this.W=Array(160)):new r}function o(t,n,a,i,o){var s=t&a^~t&o;return 0>s&&(s+=4294967296),s}function s(t,n,a,i,o,s){var d=n&i^~n&s;return 0>d&&(d+=4294967296),d}function d(t,n,a,i,o){var s=t&a^t&o^a&o;return 0>s&&(s+=4294967296),s}function l(t,n,a,i,o,s){var d=n&i^n&s^i&s;return 0>d&&(d+=4294967296),d}function c(t,n){var a=x(t,n,28),i=x(n,t,2),o=x(n,t,7),s=a^i^o;return 0>s&&(s+=4294967296),s}function u(t,n){var a=_(t,n,28),i=_(n,t,2),o=_(n,t,7),s=a^i^o;return 0>s&&(s+=4294967296),s}function f(t,n){var a=x(t,n,14),i=x(t,n,18),o=x(n,t,9),s=a^i^o;return 0>s&&(s+=4294967296),s}function m(t,n){var a=_(t,n,14),i=_(t,n,18),o=_(n,t,9),s=a^i^o;return 0>s&&(s+=4294967296),s}function h(t,n){var a=x(t,n,1),i=x(t,n,8),o=k(t,n,7),s=a^i^o;return 0>s&&(s+=4294967296),s}function g(t,n){var a=_(t,n,1),i=_(t,n,8),o=C(t,n,7),s=a^i^o;return 0>s&&(s+=4294967296),s}function b(t,n){var a=x(t,n,19),i=x(n,t,29),o=k(t,n,6),s=a^i^o;return 0>s&&(s+=4294967296),s}function y(t,n){var a=_(t,n,19),i=_(n,t,29),o=C(t,n,6),s=a^i^o;return 0>s&&(s+=4294967296),s}var i=a(27),w=a(68),v=a(21),x=i.rotr64_hi,_=i.rotr64_lo,k=i.shr64_hi,C=i.shr64_lo,E=i.sum64,T=i.sum64_hi,A=i.sum64_lo,S=i.sum64_4_hi,I=i.sum64_4_lo,N=i.sum64_5_hi,j=i.sum64_5_lo,L=w.BlockHash,R=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];i.inherits(r,L),t.exports=r,r.blockSize=1024,r.outSize=512,r.hmacStrength=192,r.padLength=128,r.prototype._prepareBlock=function t(n,a){for(var r=this.W,o=0;32>o;o++)r[o]=n[a+o];for(;o<r.length;o+=2){var i=b(r[o-4],r[o-3]),s=y(r[o-4],r[o-3]),d=r[o-14],l=r[o-13],c=h(r[o-30],r[o-29]),u=g(r[o-30],r[o-29]),f=r[o-32],m=r[o-31];r[o]=S(i,s,d,l,c,u,f,m),r[o+1]=I(i,s,d,l,c,u,f,m)}},r.prototype._update=function t(n,a){this._prepareBlock(n,a);var r=this.W,h=this.h[0],g=this.h[1],b=this.h[2],y=this.h[3],w=this.h[4],x=this.h[5],_=this.h[6],k=this.h[7],C=this.h[8],S=this.h[9],I=this.h[10],L=this.h[11],R=this.h[12],M=this.h[13],D=this.h[14],P=this.h[15];v(this.k.length===r.length);for(var O=0;O<r.length;O+=2){var i=D,B=P,U=f(C,S),F=m(C,S),q=o(C,S,I,L,R,M),z=s(C,S,I,L,R,M),H=this.k[O],W=this.k[O+1],V=r[O],G=r[O+1],J=N(i,B,U,F,q,z,H,W,V,G),K=j(i,B,U,F,q,z,H,W,V,G);i=c(h,g),B=u(h,g),U=d(h,g,b,y,w,x),F=l(h,g,b,y,w,x);var X=T(i,B,U,F),Y=A(i,B,U,F);D=R,P=M,R=I,M=L,I=C,L=S,C=T(_,k,J,K),S=A(k,k,J,K),_=w,k=x,w=b,x=y,b=h,y=g,h=T(J,K,X,Y),g=A(J,K,X,Y)}E(this.h,0,h,g),E(this.h,2,b,y),E(this.h,4,w,x),E(this.h,6,_,k),E(this.h,8,C,S),E(this.h,10,I,L),E(this.h,12,R,M),E(this.h,14,D,P)},r.prototype._digest=function t(n){return'hex'===n?i.toHex32(this.h,'big'):i.split32(this.h,'big')}},function(t,n,a){(function(t){(function(t,n){'use strict';function o(t,n){if(!t)throw new Error(n||'Assertion failed')}function r(t,n){t.super_=n;var a=function(){};a.prototype=n.prototype,t.prototype=new a,t.prototype.constructor=t}function d(t,n,a){return d.isBN(t)?t:void(this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&(('le'===n||'be'===n)&&(a=n,n=10),this._init(t||0,n||10,a||'be')))}function s(t,n,a){for(var o=0,r=_Mathmin(t.length,a),s=n,i;s<r;s++)i=t.charCodeAt(s)-48,o<<=4,o|=49<=i&&54>=i?i-49+10:17<=i&&22>=i?i-17+10:15&i;return o}function l(t,n,a,o){for(var s=0,r=_Mathmin(t.length,a),d=n,i;d<r;d++)i=t.charCodeAt(d)-48,s*=o,s+=49<=i?i-49+10:17<=i?i-17+10:i;return s}function c(t){for(var n=Array(t.bitLength()),a=0;a<n.length;a++){var r=0|a/26,i=a%26;n[a]=(t.words[r]&1<<i)>>>i}return n}function i(t,n,o){o.negative=n.negative^t.negative;var s=0|t.length+n.length;o.length=s,s=0|s-1;var d=0|t.words[0],a=0|n.words[0],l=d*a,r=67108863&l,c=0|l/67108864;o.words[0]=r;for(var u=1;u<s;u++){for(var f=c>>>26,m=67108863&c,h=_Mathmin(u,n.length-1),g=_Mathmax(0,u-t.length+1),b;g<=h;g++)b=0|u-g,d=0|t.words[b],a=0|n.words[g],l=d*a+m,f+=0|l/67108864,m=67108863&l;o.words[u]=0|m,c=0|f}return 0==c?o.length--:o.words[u]=0|c,o.strip()}function u(t,n,o){o.negative=n.negative^t.negative,o.length=t.length+n.length;for(var s=0,d=0,l=0,c;l<o.length-1;l++){c=d,d=0;for(var u=67108863&s,f=_Mathmin(l,n.length-1),m=_Mathmax(0,l-t.length+1);m<=f;m++){var h=l-m,i=0|t.words[h],a=0|n.words[m],g=i*a,r=67108863&g;c=0|c+(0|g/67108864),r=0|r+u,u=67108863&r,c=0|c+(r>>>26),d+=c>>>26,c&=67108863}o.words[l]=u,s=c,c=d}return 0==s?o.length--:o.words[l]=s,o.strip()}function f(t,n,a){var r=new m;return r.mulp(t,n,a)}function m(t,n){this.x=t,this.y=n}function h(t,n){this.name=t,this.p=new d(n,16),this.n=this.p.bitLength(),this.k=new d(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function g(){h.call(this,'k256','ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f')}function b(){h.call(this,'p224','ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001')}function y(){h.call(this,'p192','ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff')}function w(){h.call(this,'25519','7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed')}function v(t){if('string'==typeof t){var n=d._prime(t);this.m=n.p,this.prime=n}else o(t.gtn(1),'modulus must be greater than 1'),this.m=t,this.prime=null}function x(t){v.call(this,t),this.shift=this.m.bitLength(),0!=this.shift%26&&(this.shift+=26-this.shift%26),this.r=new d(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}'object'==typeof t?t.exports=d:n.BN=d,d.BN=d,d.wordSize=26;var _;try{_=a(415).Buffer}catch(t){}d.isBN=function t(n){return!!(n instanceof d)||null!==n&&'object'==typeof n&&n.constructor.wordSize===d.wordSize&&Array.isArray(n.words)},d.max=function t(n,a){return 0<n.cmp(a)?n:a},d.min=function t(n,a){return 0>n.cmp(a)?n:a},d.prototype._init=function t(n,a,r){if('number'==typeof n)return this._initNumber(n,a,r);if('object'==typeof n)return this._initArray(n,a,r);'hex'===a&&(a=16),o(a===(0|a)&&2<=a&&36>=a),n=n.toString().replace(/\s+/g,'');var i=0;'-'===n[0]&&i++,16===a?this._parseHex(n,i):this._parseBase(n,a,i),'-'===n[0]&&(this.negative=1),this.strip();'le'!==r||this._initArray(this.toArray(),a,r)},d.prototype._initNumber=function t(n,a,r){0>n&&(this.negative=1,n=-n),67108864>n?(this.words=[67108863&n],this.length=1):4503599627370496>n?(this.words=[67108863&n,67108863&n/67108864],this.length=2):(o(9007199254740992>n),this.words=[67108863&n,67108863&n/67108864,1],this.length=3);'le'!==r||this._initArray(this.toArray(),a,r)},d.prototype._initArray=function t(n,a,r){if(o('number'==typeof n.length),0>=n.length)return this.words=[0],this.length=1,this;this.length=_Mathceil(n.length/3),this.words=Array(this.length);for(var s=0;s<this.length;s++)this.words[s]=0;var i=0,d,l;if('be'===r)for(s=n.length-1,d=0;0<=s;s-=3)l=n[s]|n[s-1]<<8|n[s-2]<<16,this.words[d]|=67108863&l<<i,this.words[d+1]=67108863&l>>>26-i,i+=24,26<=i&&(i-=26,d++);else if('le'===r)for(s=0,d=0;s<n.length;s+=3)l=n[s]|n[s+1]<<8|n[s+2]<<16,this.words[d]|=67108863&l<<i,this.words[d+1]=67108863&l>>>26-i,i+=24,26<=i&&(i-=26,d++);return this.strip()},d.prototype._parseHex=function t(n,a){this.length=_Mathceil((n.length-a)/6),this.words=Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var i=0,o,d;for(r=n.length-6,o=0;r>=a;r-=6)d=s(n,r,r+6),this.words[o]|=67108863&d<<i,this.words[o+1]|=4194303&d>>>26-i,i+=24,26<=i&&(i-=26,o++);r+6!==a&&(d=s(n,a,r+6),this.words[o]|=67108863&d<<i,this.words[o+1]|=4194303&d>>>26-i),this.strip()},d.prototype._parseBase=function t(n,a,r){this.words=[0],this.length=1;for(var o=0,s=1;67108863>=s;s*=a)o++;o--,s=0|s/a;for(var d=n.length-r,c=d%o,u=_Mathmin(d,d-c)+r,f=0,m=r;m<u;m+=o)f=l(n,m,m+o,a),this.imuln(s),67108864>this.words[0]+f?this.words[0]+=f:this._iaddn(f);if(0!=c){var i=1;for(f=l(n,m,n.length,a),m=0;m<c;m++)i*=a;this.imuln(i),67108864>this.words[0]+f?this.words[0]+=f:this._iaddn(f)}},d.prototype.copy=function t(n){n.words=Array(this.length);for(var a=0;a<this.length;a++)n.words[a]=this.words[a];n.length=this.length,n.negative=this.negative,n.red=this.red},d.prototype.clone=function t(){var n=new d(null);return this.copy(n),n},d.prototype._expand=function t(n){for(;this.length<n;)this.words[this.length++]=0;return this},d.prototype.strip=function t(){for(;1<this.length&&0===this.words[this.length-1];)this.length--;return this._normSign()},d.prototype._normSign=function t(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},d.prototype.inspect=function t(){return(this.red?'<BN-R: ':'<BN: ')+this.toString(16)+'>'};var k=['','0','00','000','0000','00000','000000','0000000','00000000','000000000','0000000000','00000000000','000000000000','0000000000000','00000000000000','000000000000000','0000000000000000','00000000000000000','000000000000000000','0000000000000000000','00000000000000000000','000000000000000000000','0000000000000000000000','00000000000000000000000','000000000000000000000000','0000000000000000000000000'],C=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],E=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,10000000,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64000000,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,24300000,28629151,33554432,39135393,45435424,52521875,60466176];d.prototype.toString=function t(n,a){n=n||10,a=0|a||1;var s;if(16===n||'hex'===n){s='';for(var d=0,l=0,u=0;u<this.length;u++){var i=this.words[u],f=(16777215&(i<<d|l)).toString(16);l=16777215&i>>>24-d,s=0!=l||u!==this.length-1?k[6-f.length]+f+s:f+s,d+=2,26<=d&&(d-=26,u--)}for(0!=l&&(s=l.toString(16)+s);0!=s.length%a;)s='0'+s;return 0!==this.negative&&(s='-'+s),s}if(n===(0|n)&&2<=n&&36>=n){var m=C[n],h=E[n];s='';var g=this.clone();for(g.negative=0;!g.isZero();){var c=g.modn(h).toString(n);g=g.idivn(h),s=g.isZero()?c+s:k[m-c.length]+c+s}for(this.isZero()&&(s='0'+s);0!=s.length%a;)s='0'+s;return 0!==this.negative&&(s='-'+s),s}o(!1,'Base should be between 2 and 36')},d.prototype.toNumber=function t(){var n=this.words[0];return 2===this.length?n+=67108864*this.words[1]:3===this.length&&1===this.words[2]?n+=4503599627370496+67108864*this.words[1]:2<this.length&&o(!1,'Number can only safely store up to 53 bits'),0===this.negative?n:-n},d.prototype.toJSON=function t(){return this.toString(16)},d.prototype.toBuffer=function t(n,a){return o('undefined'!=typeof _),this.toArrayLike(_,n,a)},d.prototype.toArray=function t(n,a){return this.toArrayLike(Array,n,a)},d.prototype.toArrayLike=function t(n,a,r){var s=this.byteLength(),d=r||_Mathmax(1,s);o(s<=d,'byte array longer than desired length'),o(0<d,'Requested array length <= 0'),this.strip();var l='le'===a,c=new n(d),u=this.clone(),f,m;if(!l){for(m=0;m<d-s;m++)c[m]=0;for(m=0;!u.isZero();m++)f=u.andln(255),u.iushrn(8),c[d-m-1]=f}else{for(m=0;!u.isZero();m++)f=u.andln(255),u.iushrn(8),c[m]=f;for(;m<d;m++)c[m]=0}return c},d.prototype._countBits=_Mathclz?function t(n){return 32-_Mathclz(n)}:function n(a){var i=a,t=0;return 4096<=i&&(t+=13,i>>>=13),64<=i&&(t+=7,i>>>=7),8<=i&&(t+=4,i>>>=4),2<=i&&(t+=2,i>>>=2),t+i},d.prototype._zeroBits=function n(a){if(0===a)return 26;var i=a,t=0;return 0==(8191&i)&&(t+=13,i>>>=13),0==(127&i)&&(t+=7,i>>>=7),0==(15&i)&&(t+=4,i>>>=4),0==(3&i)&&(t+=2,i>>>=2),0==(1&i)&&t++,t},d.prototype.bitLength=function t(){var n=this.words[this.length-1],a=this._countBits(n);return 26*(this.length-1)+a},d.prototype.zeroBits=function t(){if(this.isZero())return 0;for(var n=0,a=0,r;a<this.length&&(r=this._zeroBits(this.words[a]),n+=r,26===r);a++);return n},d.prototype.byteLength=function t(){return _Mathceil(this.bitLength()/8)},d.prototype.toTwos=function t(n){return 0===this.negative?this.clone():this.abs().inotn(n).iaddn(1)},d.prototype.fromTwos=function t(n){return this.testn(n-1)?this.notn(n).iaddn(1).ineg():this.clone()},d.prototype.isNeg=function t(){return 0!==this.negative},d.prototype.neg=function t(){return this.clone().ineg()},d.prototype.ineg=function t(){return this.isZero()||(this.negative^=1),this},d.prototype.iuor=function t(n){for(;this.length<n.length;)this.words[this.length++]=0;for(var a=0;a<n.length;a++)this.words[a]|=n.words[a];return this.strip()},d.prototype.ior=function t(n){return o(0==(this.negative|n.negative)),this.iuor(n)},d.prototype.or=function t(n){return this.length>n.length?this.clone().ior(n):n.clone().ior(this)},d.prototype.uor=function t(n){return this.length>n.length?this.clone().iuor(n):n.clone().iuor(this)},d.prototype.iuand=function t(n){var a;a=this.length>n.length?n:this;for(var r=0;r<a.length;r++)this.words[r]&=n.words[r];return this.length=a.length,this.strip()},d.prototype.iand=function t(n){return o(0==(this.negative|n.negative)),this.iuand(n)},d.prototype.and=function t(n){return this.length>n.length?this.clone().iand(n):n.clone().iand(this)},d.prototype.uand=function t(n){return this.length>n.length?this.clone().iuand(n):n.clone().iuand(this)},d.prototype.iuxor=function t(n){var r,a;this.length>n.length?(r=this,a=n):(r=n,a=this);for(var o=0;o<a.length;o++)this.words[o]=r.words[o]^a.words[o];if(this!==r)for(;o<r.length;o++)this.words[o]=r.words[o];return this.length=r.length,this.strip()},d.prototype.ixor=function t(n){return o(0==(this.negative|n.negative)),this.iuxor(n)},d.prototype.xor=function t(n){return this.length>n.length?this.clone().ixor(n):n.clone().ixor(this)},d.prototype.uxor=function t(n){return this.length>n.length?this.clone().iuxor(n):n.clone().iuxor(this)},d.prototype.inotn=function t(n){o('number'==typeof n&&0<=n);var a=0|_Mathceil(n/26),r=n%26;this._expand(a),0<r&&a--;for(var s=0;s<a;s++)this.words[s]=67108863&~this.words[s];return 0<r&&(this.words[s]=~this.words[s]&67108863>>26-r),this.strip()},d.prototype.notn=function t(n){return this.clone().inotn(n)},d.prototype.setn=function t(n,a){o('number'==typeof n&&0<=n);var r=0|n/26,i=n%26;return this._expand(r+1),a?this.words[r]|=1<<i:this.words[r]&=~(1<<i),this.strip()},d.prototype.iadd=function t(n){var o;if(0!==this.negative&&0===n.negative)return this.negative=0,o=this.isub(n),this.negative^=1,this._normSign();if(0===this.negative&&0!==n.negative)return n.negative=0,o=this.isub(n),n.negative=1,o._normSign();var r,a;this.length>n.length?(r=this,a=n):(r=n,a=this);for(var s=0,d=0;d<a.length;d++)o=(0|r.words[d])+(0|a.words[d])+s,this.words[d]=67108863&o,s=o>>>26;for(;0!=s&&d<r.length;d++)o=(0|r.words[d])+s,this.words[d]=67108863&o,s=o>>>26;if(this.length=r.length,0!=s)this.words[this.length]=s,this.length++;else if(r!==this)for(;d<r.length;d++)this.words[d]=r.words[d];return this},d.prototype.add=function t(n){var a;return 0!==n.negative&&0===this.negative?(n.negative=0,a=this.sub(n),n.negative^=1,a):0===n.negative&&0!==this.negative?(this.negative=0,a=n.sub(this),this.negative=1,a):this.length>n.length?this.clone().iadd(n):n.clone().iadd(this)},d.prototype.isub=function t(n){if(0!==n.negative){n.negative=0;var o=this.iadd(n);return n.negative=1,o._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(n),this.negative=1,this._normSign();var r=this.cmp(n);if(0===r)return this.negative=0,this.length=1,this.words[0]=0,this;var s,a;0<r?(s=this,a=n):(s=n,a=this);for(var d=0,l=0;l<a.length;l++)o=(0|s.words[l])-(0|a.words[l])+d,d=o>>26,this.words[l]=67108863&o;for(;0!=d&&l<s.length;l++)o=(0|s.words[l])+d,d=o>>26,this.words[l]=67108863&o;if(0==d&&l<s.length&&s!==this)for(;l<s.length;l++)this.words[l]=s.words[l];return this.length=_Mathmax(this.length,l),s!==this&&(this.negative=1),this.strip()},d.prototype.sub=function t(n){return this.clone().isub(n)};var T=function t(n,r,i){var s=n.words,a=r.words,d=i.words,o=0,l=0|s[0],c=8191&l,u=l>>>13,f=0|s[1],m=8191&f,h=f>>>13,g=0|s[2],b=8191&g,y=g>>>13,w=0|s[3],v=8191&w,x=w>>>13,_=0|s[4],k=8191&_,C=_>>>13,E=0|s[5],T=8191&E,A=E>>>13,S=0|s[6],I=8191&S,N=S>>>13,j=0|s[7],L=8191&j,R=j>>>13,M=0|s[8],D=8191&M,P=M>>>13,O=0|s[9],B=8191&O,U=O>>>13,F=0|a[0],q=8191&F,z=F>>>13,H=0|a[1],W=8191&H,V=H>>>13,G=0|a[2],J=8191&G,K=G>>>13,X=0|a[3],Y=8191&X,Z=X>>>13,Q=0|a[4],ee=8191&Q,te=Q>>>13,ne=0|a[5],ae=8191&ne,re=ne>>>13,ie=0|a[6],oe=8191&ie,se=ie>>>13,de=0|a[7],le=8191&de,pe=de>>>13,ce=0|a[8],ue=8191&ce,fe=ce>>>13,he=0|a[9],ge=8191&he,be=he>>>13,ye,we,ve;i.negative=n.negative^r.negative,i.length=19,ye=_Mathimul(c,q),we=_Mathimul(c,z),we=0|we+_Mathimul(u,q),ve=_Mathimul(u,z);var xe=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(xe>>>26),xe&=67108863,ye=_Mathimul(m,q),we=_Mathimul(m,z),we=0|we+_Mathimul(h,q),ve=_Mathimul(h,z),ye=0|ye+_Mathimul(c,W),we=0|we+_Mathimul(c,V),we=0|we+_Mathimul(u,W),ve=0|ve+_Mathimul(u,V);var _e=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(_e>>>26),_e&=67108863,ye=_Mathimul(b,q),we=_Mathimul(b,z),we=0|we+_Mathimul(y,q),ve=_Mathimul(y,z),ye=0|ye+_Mathimul(m,W),we=0|we+_Mathimul(m,V),we=0|we+_Mathimul(h,W),ve=0|ve+_Mathimul(h,V),ye=0|ye+_Mathimul(c,J),we=0|we+_Mathimul(c,K),we=0|we+_Mathimul(u,J),ve=0|ve+_Mathimul(u,K);var ke=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(ke>>>26),ke&=67108863,ye=_Mathimul(v,q),we=_Mathimul(v,z),we=0|we+_Mathimul(x,q),ve=_Mathimul(x,z),ye=0|ye+_Mathimul(b,W),we=0|we+_Mathimul(b,V),we=0|we+_Mathimul(y,W),ve=0|ve+_Mathimul(y,V),ye=0|ye+_Mathimul(m,J),we=0|we+_Mathimul(m,K),we=0|we+_Mathimul(h,J),ve=0|ve+_Mathimul(h,K),ye=0|ye+_Mathimul(c,Y),we=0|we+_Mathimul(c,Z),we=0|we+_Mathimul(u,Y),ve=0|ve+_Mathimul(u,Z);var Ce=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Ce>>>26),Ce&=67108863,ye=_Mathimul(k,q),we=_Mathimul(k,z),we=0|we+_Mathimul(C,q),ve=_Mathimul(C,z),ye=0|ye+_Mathimul(v,W),we=0|we+_Mathimul(v,V),we=0|we+_Mathimul(x,W),ve=0|ve+_Mathimul(x,V),ye=0|ye+_Mathimul(b,J),we=0|we+_Mathimul(b,K),we=0|we+_Mathimul(y,J),ve=0|ve+_Mathimul(y,K),ye=0|ye+_Mathimul(m,Y),we=0|we+_Mathimul(m,Z),we=0|we+_Mathimul(h,Y),ve=0|ve+_Mathimul(h,Z),ye=0|ye+_Mathimul(c,ee),we=0|we+_Mathimul(c,te),we=0|we+_Mathimul(u,ee),ve=0|ve+_Mathimul(u,te);var Ee=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Ee>>>26),Ee&=67108863,ye=_Mathimul(T,q),we=_Mathimul(T,z),we=0|we+_Mathimul(A,q),ve=_Mathimul(A,z),ye=0|ye+_Mathimul(k,W),we=0|we+_Mathimul(k,V),we=0|we+_Mathimul(C,W),ve=0|ve+_Mathimul(C,V),ye=0|ye+_Mathimul(v,J),we=0|we+_Mathimul(v,K),we=0|we+_Mathimul(x,J),ve=0|ve+_Mathimul(x,K),ye=0|ye+_Mathimul(b,Y),we=0|we+_Mathimul(b,Z),we=0|we+_Mathimul(y,Y),ve=0|ve+_Mathimul(y,Z),ye=0|ye+_Mathimul(m,ee),we=0|we+_Mathimul(m,te),we=0|we+_Mathimul(h,ee),ve=0|ve+_Mathimul(h,te),ye=0|ye+_Mathimul(c,ae),we=0|we+_Mathimul(c,re),we=0|we+_Mathimul(u,ae),ve=0|ve+_Mathimul(u,re);var Te=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Te>>>26),Te&=67108863,ye=_Mathimul(I,q),we=_Mathimul(I,z),we=0|we+_Mathimul(N,q),ve=_Mathimul(N,z),ye=0|ye+_Mathimul(T,W),we=0|we+_Mathimul(T,V),we=0|we+_Mathimul(A,W),ve=0|ve+_Mathimul(A,V),ye=0|ye+_Mathimul(k,J),we=0|we+_Mathimul(k,K),we=0|we+_Mathimul(C,J),ve=0|ve+_Mathimul(C,K),ye=0|ye+_Mathimul(v,Y),we=0|we+_Mathimul(v,Z),we=0|we+_Mathimul(x,Y),ve=0|ve+_Mathimul(x,Z),ye=0|ye+_Mathimul(b,ee),we=0|we+_Mathimul(b,te),we=0|we+_Mathimul(y,ee),ve=0|ve+_Mathimul(y,te),ye=0|ye+_Mathimul(m,ae),we=0|we+_Mathimul(m,re),we=0|we+_Mathimul(h,ae),ve=0|ve+_Mathimul(h,re),ye=0|ye+_Mathimul(c,oe),we=0|we+_Mathimul(c,se),we=0|we+_Mathimul(u,oe),ve=0|ve+_Mathimul(u,se);var Ae=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Ae>>>26),Ae&=67108863,ye=_Mathimul(L,q),we=_Mathimul(L,z),we=0|we+_Mathimul(R,q),ve=_Mathimul(R,z),ye=0|ye+_Mathimul(I,W),we=0|we+_Mathimul(I,V),we=0|we+_Mathimul(N,W),ve=0|ve+_Mathimul(N,V),ye=0|ye+_Mathimul(T,J),we=0|we+_Mathimul(T,K),we=0|we+_Mathimul(A,J),ve=0|ve+_Mathimul(A,K),ye=0|ye+_Mathimul(k,Y),we=0|we+_Mathimul(k,Z),we=0|we+_Mathimul(C,Y),ve=0|ve+_Mathimul(C,Z),ye=0|ye+_Mathimul(v,ee),we=0|we+_Mathimul(v,te),we=0|we+_Mathimul(x,ee),ve=0|ve+_Mathimul(x,te),ye=0|ye+_Mathimul(b,ae),we=0|we+_Mathimul(b,re),we=0|we+_Mathimul(y,ae),ve=0|ve+_Mathimul(y,re),ye=0|ye+_Mathimul(m,oe),we=0|we+_Mathimul(m,se),we=0|we+_Mathimul(h,oe),ve=0|ve+_Mathimul(h,se),ye=0|ye+_Mathimul(c,le),we=0|we+_Mathimul(c,pe),we=0|we+_Mathimul(u,le),ve=0|ve+_Mathimul(u,pe);var Se=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Se>>>26),Se&=67108863,ye=_Mathimul(D,q),we=_Mathimul(D,z),we=0|we+_Mathimul(P,q),ve=_Mathimul(P,z),ye=0|ye+_Mathimul(L,W),we=0|we+_Mathimul(L,V),we=0|we+_Mathimul(R,W),ve=0|ve+_Mathimul(R,V),ye=0|ye+_Mathimul(I,J),we=0|we+_Mathimul(I,K),we=0|we+_Mathimul(N,J),ve=0|ve+_Mathimul(N,K),ye=0|ye+_Mathimul(T,Y),we=0|we+_Mathimul(T,Z),we=0|we+_Mathimul(A,Y),ve=0|ve+_Mathimul(A,Z),ye=0|ye+_Mathimul(k,ee),we=0|we+_Mathimul(k,te),we=0|we+_Mathimul(C,ee),ve=0|ve+_Mathimul(C,te),ye=0|ye+_Mathimul(v,ae),we=0|we+_Mathimul(v,re),we=0|we+_Mathimul(x,ae),ve=0|ve+_Mathimul(x,re),ye=0|ye+_Mathimul(b,oe),we=0|we+_Mathimul(b,se),we=0|we+_Mathimul(y,oe),ve=0|ve+_Mathimul(y,se),ye=0|ye+_Mathimul(m,le),we=0|we+_Mathimul(m,pe),we=0|we+_Mathimul(h,le),ve=0|ve+_Mathimul(h,pe),ye=0|ye+_Mathimul(c,ue),we=0|we+_Mathimul(c,fe),we=0|we+_Mathimul(u,ue),ve=0|ve+_Mathimul(u,fe);var Ie=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Ie>>>26),Ie&=67108863,ye=_Mathimul(B,q),we=_Mathimul(B,z),we=0|we+_Mathimul(U,q),ve=_Mathimul(U,z),ye=0|ye+_Mathimul(D,W),we=0|we+_Mathimul(D,V),we=0|we+_Mathimul(P,W),ve=0|ve+_Mathimul(P,V),ye=0|ye+_Mathimul(L,J),we=0|we+_Mathimul(L,K),we=0|we+_Mathimul(R,J),ve=0|ve+_Mathimul(R,K),ye=0|ye+_Mathimul(I,Y),we=0|we+_Mathimul(I,Z),we=0|we+_Mathimul(N,Y),ve=0|ve+_Mathimul(N,Z),ye=0|ye+_Mathimul(T,ee),we=0|we+_Mathimul(T,te),we=0|we+_Mathimul(A,ee),ve=0|ve+_Mathimul(A,te),ye=0|ye+_Mathimul(k,ae),we=0|we+_Mathimul(k,re),we=0|we+_Mathimul(C,ae),ve=0|ve+_Mathimul(C,re),ye=0|ye+_Mathimul(v,oe),we=0|we+_Mathimul(v,se),we=0|we+_Mathimul(x,oe),ve=0|ve+_Mathimul(x,se),ye=0|ye+_Mathimul(b,le),we=0|we+_Mathimul(b,pe),we=0|we+_Mathimul(y,le),ve=0|ve+_Mathimul(y,pe),ye=0|ye+_Mathimul(m,ue),we=0|we+_Mathimul(m,fe),we=0|we+_Mathimul(h,ue),ve=0|ve+_Mathimul(h,fe),ye=0|ye+_Mathimul(c,ge),we=0|we+_Mathimul(c,be),we=0|we+_Mathimul(u,ge),ve=0|ve+_Mathimul(u,be);var Ne=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Ne>>>26),Ne&=67108863,ye=_Mathimul(B,W),we=_Mathimul(B,V),we=0|we+_Mathimul(U,W),ve=_Mathimul(U,V),ye=0|ye+_Mathimul(D,J),we=0|we+_Mathimul(D,K),we=0|we+_Mathimul(P,J),ve=0|ve+_Mathimul(P,K),ye=0|ye+_Mathimul(L,Y),we=0|we+_Mathimul(L,Z),we=0|we+_Mathimul(R,Y),ve=0|ve+_Mathimul(R,Z),ye=0|ye+_Mathimul(I,ee),we=0|we+_Mathimul(I,te),we=0|we+_Mathimul(N,ee),ve=0|ve+_Mathimul(N,te),ye=0|ye+_Mathimul(T,ae),we=0|we+_Mathimul(T,re),we=0|we+_Mathimul(A,ae),ve=0|ve+_Mathimul(A,re),ye=0|ye+_Mathimul(k,oe),we=0|we+_Mathimul(k,se),we=0|we+_Mathimul(C,oe),ve=0|ve+_Mathimul(C,se),ye=0|ye+_Mathimul(v,le),we=0|we+_Mathimul(v,pe),we=0|we+_Mathimul(x,le),ve=0|ve+_Mathimul(x,pe),ye=0|ye+_Mathimul(b,ue),we=0|we+_Mathimul(b,fe),we=0|we+_Mathimul(y,ue),ve=0|ve+_Mathimul(y,fe),ye=0|ye+_Mathimul(m,ge),we=0|we+_Mathimul(m,be),we=0|we+_Mathimul(h,ge),ve=0|ve+_Mathimul(h,be);var je=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(je>>>26),je&=67108863,ye=_Mathimul(B,J),we=_Mathimul(B,K),we=0|we+_Mathimul(U,J),ve=_Mathimul(U,K),ye=0|ye+_Mathimul(D,Y),we=0|we+_Mathimul(D,Z),we=0|we+_Mathimul(P,Y),ve=0|ve+_Mathimul(P,Z),ye=0|ye+_Mathimul(L,ee),we=0|we+_Mathimul(L,te),we=0|we+_Mathimul(R,ee),ve=0|ve+_Mathimul(R,te),ye=0|ye+_Mathimul(I,ae),we=0|we+_Mathimul(I,re),we=0|we+_Mathimul(N,ae),ve=0|ve+_Mathimul(N,re),ye=0|ye+_Mathimul(T,oe),we=0|we+_Mathimul(T,se),we=0|we+_Mathimul(A,oe),ve=0|ve+_Mathimul(A,se),ye=0|ye+_Mathimul(k,le),we=0|we+_Mathimul(k,pe),we=0|we+_Mathimul(C,le),ve=0|ve+_Mathimul(C,pe),ye=0|ye+_Mathimul(v,ue),we=0|we+_Mathimul(v,fe),we=0|we+_Mathimul(x,ue),ve=0|ve+_Mathimul(x,fe),ye=0|ye+_Mathimul(b,ge),we=0|we+_Mathimul(b,be),we=0|we+_Mathimul(y,ge),ve=0|ve+_Mathimul(y,be);var Le=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Le>>>26),Le&=67108863,ye=_Mathimul(B,Y),we=_Mathimul(B,Z),we=0|we+_Mathimul(U,Y),ve=_Mathimul(U,Z),ye=0|ye+_Mathimul(D,ee),we=0|we+_Mathimul(D,te),we=0|we+_Mathimul(P,ee),ve=0|ve+_Mathimul(P,te),ye=0|ye+_Mathimul(L,ae),we=0|we+_Mathimul(L,re),we=0|we+_Mathimul(R,ae),ve=0|ve+_Mathimul(R,re),ye=0|ye+_Mathimul(I,oe),we=0|we+_Mathimul(I,se),we=0|we+_Mathimul(N,oe),ve=0|ve+_Mathimul(N,se),ye=0|ye+_Mathimul(T,le),we=0|we+_Mathimul(T,pe),we=0|we+_Mathimul(A,le),ve=0|ve+_Mathimul(A,pe),ye=0|ye+_Mathimul(k,ue),we=0|we+_Mathimul(k,fe),we=0|we+_Mathimul(C,ue),ve=0|ve+_Mathimul(C,fe),ye=0|ye+_Mathimul(v,ge),we=0|we+_Mathimul(v,be),we=0|we+_Mathimul(x,ge),ve=0|ve+_Mathimul(x,be);var Re=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Re>>>26),Re&=67108863,ye=_Mathimul(B,ee),we=_Mathimul(B,te),we=0|we+_Mathimul(U,ee),ve=_Mathimul(U,te),ye=0|ye+_Mathimul(D,ae),we=0|we+_Mathimul(D,re),we=0|we+_Mathimul(P,ae),ve=0|ve+_Mathimul(P,re),ye=0|ye+_Mathimul(L,oe),we=0|we+_Mathimul(L,se),we=0|we+_Mathimul(R,oe),ve=0|ve+_Mathimul(R,se),ye=0|ye+_Mathimul(I,le),we=0|we+_Mathimul(I,pe),we=0|we+_Mathimul(N,le),ve=0|ve+_Mathimul(N,pe),ye=0|ye+_Mathimul(T,ue),we=0|we+_Mathimul(T,fe),we=0|we+_Mathimul(A,ue),ve=0|ve+_Mathimul(A,fe),ye=0|ye+_Mathimul(k,ge),we=0|we+_Mathimul(k,be),we=0|we+_Mathimul(C,ge),ve=0|ve+_Mathimul(C,be);var Me=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Me>>>26),Me&=67108863,ye=_Mathimul(B,ae),we=_Mathimul(B,re),we=0|we+_Mathimul(U,ae),ve=_Mathimul(U,re),ye=0|ye+_Mathimul(D,oe),we=0|we+_Mathimul(D,se),we=0|we+_Mathimul(P,oe),ve=0|ve+_Mathimul(P,se),ye=0|ye+_Mathimul(L,le),we=0|we+_Mathimul(L,pe),we=0|we+_Mathimul(R,le),ve=0|ve+_Mathimul(R,pe),ye=0|ye+_Mathimul(I,ue),we=0|we+_Mathimul(I,fe),we=0|we+_Mathimul(N,ue),ve=0|ve+_Mathimul(N,fe),ye=0|ye+_Mathimul(T,ge),we=0|we+_Mathimul(T,be),we=0|we+_Mathimul(A,ge),ve=0|ve+_Mathimul(A,be);var De=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(De>>>26),De&=67108863,ye=_Mathimul(B,oe),we=_Mathimul(B,se),we=0|we+_Mathimul(U,oe),ve=_Mathimul(U,se),ye=0|ye+_Mathimul(D,le),we=0|we+_Mathimul(D,pe),we=0|we+_Mathimul(P,le),ve=0|ve+_Mathimul(P,pe),ye=0|ye+_Mathimul(L,ue),we=0|we+_Mathimul(L,fe),we=0|we+_Mathimul(R,ue),ve=0|ve+_Mathimul(R,fe),ye=0|ye+_Mathimul(I,ge),we=0|we+_Mathimul(I,be),we=0|we+_Mathimul(N,ge),ve=0|ve+_Mathimul(N,be);var Pe=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Pe>>>26),Pe&=67108863,ye=_Mathimul(B,le),we=_Mathimul(B,pe),we=0|we+_Mathimul(U,le),ve=_Mathimul(U,pe),ye=0|ye+_Mathimul(D,ue),we=0|we+_Mathimul(D,fe),we=0|we+_Mathimul(P,ue),ve=0|ve+_Mathimul(P,fe),ye=0|ye+_Mathimul(L,ge),we=0|we+_Mathimul(L,be),we=0|we+_Mathimul(R,ge),ve=0|ve+_Mathimul(R,be);var Oe=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Oe>>>26),Oe&=67108863,ye=_Mathimul(B,ue),we=_Mathimul(B,fe),we=0|we+_Mathimul(U,ue),ve=_Mathimul(U,fe),ye=0|ye+_Mathimul(D,ge),we=0|we+_Mathimul(D,be),we=0|we+_Mathimul(P,ge),ve=0|ve+_Mathimul(P,be);var Be=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Be>>>26),Be&=67108863,ye=_Mathimul(B,ge),we=_Mathimul(B,be),we=0|we+_Mathimul(U,ge),ve=_Mathimul(U,be);var Ue=0|(0|o+ye)+((8191&we)<<13);return o=0|(0|ve+(we>>>13))+(Ue>>>26),Ue&=67108863,d[0]=xe,d[1]=_e,d[2]=ke,d[3]=Ce,d[4]=Ee,d[5]=Te,d[6]=Ae,d[7]=Se,d[8]=Ie,d[9]=Ne,d[10]=je,d[11]=Le,d[12]=Re,d[13]=Me,d[14]=De,d[15]=Pe,d[16]=Oe,d[17]=Be,d[18]=Ue,0!=o&&(d[19]=o,i.length++),i};_Mathimul||(T=i),d.prototype.mulTo=function t(n,a){var r=this.length+n.length,o;return o=10===this.length&&10===n.length?T(this,n,a):63>r?i(this,n,a):1024>r?u(this,n,a):f(this,n,a),o},m.prototype.makeRBT=function n(a){for(var r=Array(a),t=d.prototype._countBits(a)-1,o=0;o<a;o++)r[o]=this.revBin(o,t,a);return r},m.prototype.revBin=function t(n,a,r){if(0===n||n===r-1)return n;for(var o=0,s=0;s<a;s++)o|=(1&n)<<a-s-1,n>>=1;return o},m.prototype.permute=function t(n,a,r,o,s,d){for(var l=0;l<d;l++)o[l]=a[n[l]],s[l]=r[n[l]]},m.prototype.transform=function t(n,a,r,i,o,d){this.permute(d,n,a,r,i,o);for(var c=1;c<o;c<<=1)for(var s=c<<1,l=_Mathcos(2*_MathPI/s),u=_Mathsin(2*_MathPI/s),f=0;f<o;f+=s)for(var m=l,h=u,g=0;g<c;g++){var b=r[f+g],y=i[f+g],w=r[f+g+c],v=i[f+g+c],x=m*w-h*v;v=m*v+h*w,w=x,r[f+g]=b+w,i[f+g]=y+v,r[f+g+c]=b-w,i[f+g+c]=y-v,g!==s&&(x=l*m-u*h,h=l*h+u*m,m=x)}},m.prototype.guessLen13b=function t(a,n){var r=1|_Mathmax(n,a),o=1&r,s=0;for(r=0|r/2;r;r>>>=1)s++;return 1<<s+1+o},m.prototype.conjugate=function n(a,r,o){if(!(1>=o))for(var s=0,i;s<o/2;s++)i=a[s],a[s]=a[o-s-1],a[o-s-1]=i,i=r[s],r[s]=-r[o-s-1],r[o-s-1]=-i},m.prototype.normalize13b=function t(n,a){for(var r=0,o=0,i;o<a/2;o++)i=8192*_Mathround(n[2*o+1]/a)+_Mathround(n[2*o]/a)+r,n[o]=67108863&i,r=67108864>i?0:0|i/67108864;return n},m.prototype.convert13b=function t(n,a,r,s){for(var d=0,l=0;l<a;l++)d+=0|n[l],r[2*l]=8191&d,d>>>=13,r[2*l+1]=8191&d,d>>>=13;for(l=2*a;l<s;++l)r[l]=0;o(0==d),o(0==(-8192&d))},m.prototype.stub=function t(n){for(var a=Array(n),r=0;r<n;r++)a[r]=0;return a},m.prototype.mulp=function t(n,a,r){var o=2*this.guessLen13b(n.length,a.length),s=this.makeRBT(o),d=this.stub(o),l=Array(o),c=Array(o),u=Array(o),f=Array(o),m=Array(o),h=Array(o),g=r.words;g.length=o,this.convert13b(n.words,n.length,l,o),this.convert13b(a.words,a.length,f,o),this.transform(l,d,c,u,o,s),this.transform(f,d,m,h,o,s);for(var b=0,i;b<o;b++)i=c[b]*m[b]-u[b]*h[b],u[b]=c[b]*h[b]+u[b]*m[b],c[b]=i;return this.conjugate(c,u,o),this.transform(c,u,g,d,o,s),this.conjugate(g,d,o),this.normalize13b(g,o),r.negative=n.negative^a.negative,r.length=n.length+a.length,r.strip()},d.prototype.mul=function t(n){var a=new d(null);return a.words=Array(this.length+n.length),this.mulTo(n,a)},d.prototype.mulf=function t(n){var a=new d(null);return a.words=Array(this.length+n.length),f(this,n,a)},d.prototype.imul=function t(n){return this.clone().mulTo(n,this)},d.prototype.imuln=function t(n){o('number'==typeof n),o(67108864>n);for(var a=0,r=0;r<this.length;r++){var i=(0|this.words[r])*n,s=(67108863&i)+(67108863&a);a>>=26,a+=0|i/67108864,a+=s>>>26,this.words[r]=67108863&s}return 0!=a&&(this.words[r]=a,this.length++),this},d.prototype.muln=function t(n){return this.clone().imuln(n)},d.prototype.sqr=function t(){return this.mul(this)},d.prototype.isqr=function t(){return this.imul(this.clone())},d.prototype.pow=function t(n){var a=c(n);if(0===a.length)return new d(1);for(var r=this,o=0;o<a.length&&!(0!==a[o]);o++,r=r.sqr());if(++o<a.length)for(var i=r.sqr();o<a.length;o++,i=i.sqr())0!==a[o]&&(r=r.mul(i));return r},d.prototype.iushln=function t(n){o('number'==typeof n&&0<=n);var a=n%26,r=(n-a)/26,s=67108863>>>26-a<<26-a,d;if(0!=a){var i=0;for(d=0;d<this.length;d++){var l=this.words[d]&s,u=(0|this.words[d])-l<<a;this.words[d]=u|i,i=l>>>26-a}i&&(this.words[d]=i,this.length++)}if(0!=r){for(d=this.length-1;0<=d;d--)this.words[d+r]=this.words[d];for(d=0;d<r;d++)this.words[d]=0;this.length+=r}return this.strip()},d.prototype.ishln=function t(n){return o(0===this.negative),this.iushln(n)},d.prototype.iushrn=function t(n,a,d){o('number'==typeof n&&0<=n);var l;l=a?(a-a%26)/26:0;var c=n%26,r=_Mathmin((n-c)/26,this.length),s=67108863^67108863>>>c<<c,u=d;if(l-=r,l=_Mathmax(0,l),u){for(var f=0;f<r;f++)u.words[f]=this.words[f];u.length=r}if(0===r);else if(this.length>r)for(this.length-=r,f=0;f<this.length;f++)this.words[f]=this.words[f+r];else this.words[0]=0,this.length=1;var i=0;for(f=this.length-1;0<=f&&(0!=i||f>=l);f--){var m=0|this.words[f];this.words[f]=i<<26-c|m>>>c,i=m&s}return u&&0!=i&&(u.words[u.length++]=i),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},d.prototype.ishrn=function t(n,a,r){return o(0===this.negative),this.iushrn(n,a,r)},d.prototype.shln=function t(n){return this.clone().ishln(n)},d.prototype.ushln=function t(n){return this.clone().iushln(n)},d.prototype.shrn=function t(n){return this.clone().ishrn(n)},d.prototype.ushrn=function t(n){return this.clone().iushrn(n)},d.prototype.testn=function t(n){o('number'==typeof n&&0<=n);var a=n%26,r=(n-a)/26,i=1<<a;if(this.length<=r)return!1;var s=this.words[r];return!!(s&i)},d.prototype.imaskn=function t(n){o('number'==typeof n&&0<=n);var a=n%26,r=(n-a)/26;if(o(0===this.negative,'imaskn works only with positive numbers'),this.length<=r)return this;if(0!=a&&r++,this.length=_Mathmin(r,this.length),0!=a){var i=67108863^67108863>>>a<<a;this.words[this.length-1]&=i}return this.strip()},d.prototype.maskn=function t(n){return this.clone().imaskn(n)},d.prototype.iaddn=function t(n){return o('number'==typeof n),o(67108864>n),0>n?this.isubn(-n):0===this.negative?this._iaddn(n):1===this.length&&(0|this.words[0])<n?(this.words[0]=n-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(n),this.negative=1,this)},d.prototype._iaddn=function t(n){this.words[0]+=n;for(var a=0;a<this.length&&67108864<=this.words[a];a++)this.words[a]-=67108864,a===this.length-1?this.words[a+1]=1:this.words[a+1]++;return this.length=_Mathmax(this.length,a+1),this},d.prototype.isubn=function t(n){if(o('number'==typeof n),o(67108864>n),0>n)return this.iaddn(-n);if(0!==this.negative)return this.negative=0,this.iaddn(n),this.negative=1,this;if(this.words[0]-=n,1===this.length&&0>this.words[0])this.words[0]=-this.words[0],this.negative=1;else for(var a=0;a<this.length&&0>this.words[a];a++)this.words[a]+=67108864,this.words[a+1]-=1;return this.strip()},d.prototype.addn=function t(n){return this.clone().iaddn(n)},d.prototype.subn=function t(n){return this.clone().isubn(n)},d.prototype.iabs=function t(){return this.negative=0,this},d.prototype.abs=function t(){return this.clone().iabs()},d.prototype._ishlnsubmul=function t(n,a,r){var s=n.length+r,d;this._expand(s);var i=0,l;for(d=0;d<n.length;d++){l=(0|this.words[d+r])+i;var c=(0|n.words[d])*a;l-=67108863&c,i=(l>>26)-(0|c/67108864),this.words[d+r]=67108863&l}for(;d<this.length-r;d++)l=(0|this.words[d+r])+i,i=l>>26,this.words[d+r]=67108863&l;if(0==i)return this.strip();for(o(-1==i),i=0,d=0;d<this.length;d++)l=-(0|this.words[d])+i,i=l>>26,this.words[d]=67108863&l;return this.negative=1,this.strip()},d.prototype._wordDiv=function t(n,r){var o=this.length-n.length,s=this.clone(),l=n,c=0|l.words[l.length-1],u=this._countBits(c);o=26-u,0!=o&&(l=l.ushln(o),s.iushln(o),c=0|l.words[l.length-1]);var f=s.length-l.length,m;if('mod'!==r){m=new d(null),m.length=f+1,m.words=Array(m.length);for(var h=0;h<m.length;h++)m.words[h]=0}var i=s.clone()._ishlnsubmul(l,1,f);0===i.negative&&(s=i,m&&(m.words[f]=1));for(var g=f-1,b;0<=g;g--){for(b=67108864*(0|s.words[l.length+g])+(0|s.words[l.length+g-1]),b=_Mathmin(0|b/c,67108863),s._ishlnsubmul(l,b,g);0!==s.negative;)b--,s.negative=0,s._ishlnsubmul(l,1,g),s.isZero()||(s.negative^=1);m&&(m.words[g]=b)}return m&&m.strip(),s.strip(),'div'!==r&&0!=o&&s.iushrn(o),{div:m||null,mod:s}},d.prototype.divmod=function t(n,a,r){if(o(!n.isZero()),this.isZero())return{div:new d(0),mod:new d(0)};var i,s,l;return 0!==this.negative&&0===n.negative?(l=this.neg().divmod(n,a),'mod'!==a&&(i=l.div.neg()),'div'!==a&&(s=l.mod.neg(),r&&0!==s.negative&&s.iadd(n)),{div:i,mod:s}):0===this.negative&&0!==n.negative?(l=this.divmod(n.neg(),a),'mod'!==a&&(i=l.div.neg()),{div:i,mod:l.mod}):0==(this.negative&n.negative)?n.length>this.length||0>this.cmp(n)?{div:new d(0),mod:this}:1===n.length?'div'===a?{div:this.divn(n.words[0]),mod:null}:'mod'===a?{div:null,mod:new d(this.modn(n.words[0]))}:{div:this.divn(n.words[0]),mod:new d(this.modn(n.words[0]))}:this._wordDiv(n,a):(l=this.neg().divmod(n.neg(),a),'div'!==a&&(s=l.mod.neg(),r&&0!==s.negative&&s.isub(n)),{div:l.div,mod:s})},d.prototype.div=function t(n){return this.divmod(n,'div',!1).div},d.prototype.mod=function t(n){return this.divmod(n,'mod',!1).mod},d.prototype.umod=function t(n){return this.divmod(n,'mod',!0).mod},d.prototype.divRound=function t(n){var a=this.divmod(n);if(a.mod.isZero())return a.div;var r=0===a.div.negative?a.mod:a.mod.isub(n),i=n.ushrn(1),o=n.andln(1),s=r.cmp(i);return 0>s||1===o&&0===s?a.div:0===a.div.negative?a.div.iaddn(1):a.div.isubn(1)},d.prototype.modn=function t(n){o(67108863>=n);for(var a=67108864%n,r=0,s=this.length-1;0<=s;s--)r=(a*r+(0|this.words[s]))%n;return r},d.prototype.idivn=function t(n){o(67108863>=n);for(var a=0,r=this.length-1,i;0<=r;r--)i=(0|this.words[r])+67108864*a,this.words[r]=0|i/n,a=i%n;return this.strip()},d.prototype.divn=function t(n){return this.clone().idivn(n)},d.prototype.egcd=function t(n){o(0===n.negative),o(!n.isZero());var a=this,r=n.clone();a=0===a.negative?a.clone():a.umod(n);for(var s=new d(1),l=new d(0),c=new d(0),u=new d(1),f=0;a.isEven()&&r.isEven();)a.iushrn(1),r.iushrn(1),++f;for(var m=r.clone(),h=a.clone();!a.isZero();){for(var g=0,i=1;0==(a.words[0]&i)&&26>g;++g,i<<=1);if(0<g)for(a.iushrn(g);0<g--;)(s.isOdd()||l.isOdd())&&(s.iadd(m),l.isub(h)),s.iushrn(1),l.iushrn(1);for(var b=0,y=1;0==(r.words[0]&y)&&26>b;++b,y<<=1);if(0<b)for(r.iushrn(b);0<b--;)(c.isOdd()||u.isOdd())&&(c.iadd(m),u.isub(h)),c.iushrn(1),u.iushrn(1);0<=a.cmp(r)?(a.isub(r),s.isub(c),l.isub(u)):(r.isub(a),c.isub(s),u.isub(l))}return{a:c,b:u,gcd:r.iushln(f)}},d.prototype._invmp=function t(n){o(0===n.negative),o(!n.isZero());var r=this,a=n.clone();r=0===r.negative?r.clone():r.umod(n);for(var s=new d(1),l=new d(0),c=a.clone();0<r.cmpn(1)&&0<a.cmpn(1);){for(var u=0,i=1;0==(r.words[0]&i)&&26>u;++u,i<<=1);if(0<u)for(r.iushrn(u);0<u--;)s.isOdd()&&s.iadd(c),s.iushrn(1);for(var f=0,m=1;0==(a.words[0]&m)&&26>f;++f,m<<=1);if(0<f)for(a.iushrn(f);0<f--;)l.isOdd()&&l.iadd(c),l.iushrn(1);0<=r.cmp(a)?(r.isub(a),s.isub(l)):(a.isub(r),l.isub(s))}var h;return h=0===r.cmpn(1)?s:l,0>h.cmpn(0)&&h.iadd(n),h},d.prototype.gcd=function n(i){if(this.isZero())return i.abs();if(i.isZero())return this.abs();var o=this.clone(),a=i.clone();o.negative=0,a.negative=0;for(var s=0;o.isEven()&&a.isEven();s++)o.iushrn(1),a.iushrn(1);do{for(;o.isEven();)o.iushrn(1);for(;a.isEven();)a.iushrn(1);var d=o.cmp(a);if(0>d){var r=o;o=a,a=r}else if(0===d||0===a.cmpn(1))break;o.isub(a)}while(!0);return a.iushln(s)},d.prototype.invm=function t(n){return this.egcd(n).a.umod(n)},d.prototype.isEven=function t(){return 0==(1&this.words[0])},d.prototype.isOdd=function t(){return 1==(1&this.words[0])},d.prototype.andln=function t(n){return this.words[0]&n},d.prototype.bincn=function t(n){o('number'==typeof n);var a=n%26,r=(n-a)/26,s=1<<a;if(this.length<=r)return this._expand(r+1),this.words[r]|=s,this;for(var d=s,l=r,i;0!=d&&l<this.length;l++)i=0|this.words[l],i+=d,d=i>>>26,i&=67108863,this.words[l]=i;return 0!=d&&(this.words[l]=d,this.length++),this},d.prototype.isZero=function t(){return 1===this.length&&0===this.words[0]},d.prototype.cmpn=function t(n){var a=0>n;if(0!==this.negative&&!a)return-1;if(0===this.negative&&a)return 1;this.strip();var r;if(1<this.length)r=1;else{a&&(n=-n),o(67108863>=n,'Number is too big');var i=0|this.words[0];r=i===n?0:i<n?-1:1}return 0===this.negative?r:0|-r},d.prototype.cmp=function t(n){if(0!==this.negative&&0===n.negative)return-1;if(0===this.negative&&0!==n.negative)return 1;var a=this.ucmp(n);return 0===this.negative?a:0|-a},d.prototype.ucmp=function t(n){if(this.length>n.length)return 1;if(this.length<n.length)return-1;for(var r=0,o=this.length-1;0<=o;o--){var i=0|this.words[o],a=0|n.words[o];if(i!=a){i<a?r=-1:i>a&&(r=1);break}}return r},d.prototype.gtn=function t(n){return 1===this.cmpn(n)},d.prototype.gt=function t(n){return 1===this.cmp(n)},d.prototype.gten=function t(n){return 0<=this.cmpn(n)},d.prototype.gte=function t(n){return 0<=this.cmp(n)},d.prototype.ltn=function t(n){return-1===this.cmpn(n)},d.prototype.lt=function t(n){return-1===this.cmp(n)},d.prototype.lten=function t(n){return 0>=this.cmpn(n)},d.prototype.lte=function t(n){return 0>=this.cmp(n)},d.prototype.eqn=function t(n){return 0===this.cmpn(n)},d.prototype.eq=function t(n){return 0===this.cmp(n)},d.red=function t(n){return new v(n)},d.prototype.toRed=function t(n){return o(!this.red,'Already a number in reduction context'),o(0===this.negative,'red works only with positives'),n.convertTo(this)._forceRed(n)},d.prototype.fromRed=function t(){return o(this.red,'fromRed works only with numbers in reduction context'),this.red.convertFrom(this)},d.prototype._forceRed=function t(n){return this.red=n,this},d.prototype.forceRed=function t(n){return o(!this.red,'Already a number in reduction context'),this._forceRed(n)},d.prototype.redAdd=function t(n){return o(this.red,'redAdd works only with red numbers'),this.red.add(this,n)},d.prototype.redIAdd=function t(n){return o(this.red,'redIAdd works only with red numbers'),this.red.iadd(this,n)},d.prototype.redSub=function t(n){return o(this.red,'redSub works only with red numbers'),this.red.sub(this,n)},d.prototype.redISub=function t(n){return o(this.red,'redISub works only with red numbers'),this.red.isub(this,n)},d.prototype.redShl=function t(n){return o(this.red,'redShl works only with red numbers'),this.red.shl(this,n)},d.prototype.redMul=function t(n){return o(this.red,'redMul works only with red numbers'),this.red._verify2(this,n),this.red.mul(this,n)},d.prototype.redIMul=function t(n){return o(this.red,'redMul works only with red numbers'),this.red._verify2(this,n),this.red.imul(this,n)},d.prototype.redSqr=function t(){return o(this.red,'redSqr works only with red numbers'),this.red._verify1(this),this.red.sqr(this)},d.prototype.redISqr=function t(){return o(this.red,'redISqr works only with red numbers'),this.red._verify1(this),this.red.isqr(this)},d.prototype.redSqrt=function t(){return o(this.red,'redSqrt works only with red numbers'),this.red._verify1(this),this.red.sqrt(this)},d.prototype.redInvm=function t(){return o(this.red,'redInvm works only with red numbers'),this.red._verify1(this),this.red.invm(this)},d.prototype.redNeg=function t(){return o(this.red,'redNeg works only with red numbers'),this.red._verify1(this),this.red.neg(this)},d.prototype.redPow=function t(n){return o(this.red&&!n.red,'redPow(normalNum)'),this.red._verify1(this),this.red.pow(this,n)};var A={k256:null,p224:null,p192:null,p25519:null};h.prototype._tmp=function t(){var n=new d(null);return n.words=Array(_Mathceil(this.n/13)),n},h.prototype.ireduce=function t(n){var a=n,r;do this.split(a,this.tmp),a=this.imulK(a),a=a.iadd(this.tmp),r=a.bitLength();while(r>this.n);var i=r<this.n?-1:a.ucmp(this.p);return 0===i?(a.words[0]=0,a.length=1):0<i?a.isub(this.p):a.strip(),a},h.prototype.split=function t(n,a){n.iushrn(this.n,0,a)},h.prototype.imulK=function t(n){return n.imul(this.k)},r(g,h),g.prototype.split=function t(n,a){for(var r=4194303,o=_Mathmin(n.length,9),s=0;s<o;s++)a.words[s]=n.words[s];if(a.length=o,9>=n.length)return n.words[0]=0,void(n.length=1);var i=n.words[9];for(a.words[a.length++]=i&r,s=10;s<n.length;s++){var d=0|n.words[s];n.words[s-10]=(d&r)<<4|i>>>22,i=d}i>>>=22,n.words[s-10]=i,n.length-=0===i&&10<n.length?10:9},g.prototype.imulK=function t(n){n.words[n.length]=0,n.words[n.length+1]=0,n.length+=2;for(var a=0,r=0,i;r<n.length;r++)i=0|n.words[r],a+=977*i,n.words[r]=67108863&a,a=64*i+(0|a/67108864);return 0===n.words[n.length-1]&&(n.length--,0===n.words[n.length-1]&&n.length--),n},r(b,h),r(y,h),r(w,h),w.prototype.imulK=function t(n){for(var a=0,r=0;r<n.length;r++){var i=19*(0|n.words[r])+a,o=67108863&i;i>>>=26,n.words[r]=o,a=i}return 0!=a&&(n.words[n.length++]=a),n},d._prime=function t(n){if(A[n])return A[n];var t;if('k256'===n)t=new g;else if('p224'===n)t=new b;else if('p192'===n)t=new y;else if('p25519'===n)t=new w;else throw new Error('Unknown prime '+n);return A[n]=t,t},v.prototype._verify1=function t(n){o(0===n.negative,'red works only with positives'),o(n.red,'red works only with red numbers')},v.prototype._verify2=function t(n,a){o(0==(n.negative|a.negative),'red works only with positives'),o(n.red&&n.red===a.red,'red works only with red numbers')},v.prototype.imod=function t(n){return this.prime?this.prime.ireduce(n)._forceRed(this):n.umod(this.m)._forceRed(this)},v.prototype.neg=function t(n){return n.isZero()?n.clone():this.m.sub(n)._forceRed(this)},v.prototype.add=function t(n,a){this._verify2(n,a);var r=n.add(a);return 0<=r.cmp(this.m)&&r.isub(this.m),r._forceRed(this)},v.prototype.iadd=function t(n,a){this._verify2(n,a);var r=n.iadd(a);return 0<=r.cmp(this.m)&&r.isub(this.m),r},v.prototype.sub=function t(n,a){this._verify2(n,a);var r=n.sub(a);return 0>r.cmpn(0)&&r.iadd(this.m),r._forceRed(this)},v.prototype.isub=function t(n,a){this._verify2(n,a);var r=n.isub(a);return 0>r.cmpn(0)&&r.iadd(this.m),r},v.prototype.shl=function t(n,a){return this._verify1(n),this.imod(n.ushln(a))},v.prototype.imul=function t(n,a){return this._verify2(n,a),this.imod(n.imul(a))},v.prototype.mul=function t(n,a){return this._verify2(n,a),this.imod(n.mul(a))},v.prototype.isqr=function t(n){return this.imul(n,n.clone())},v.prototype.sqr=function t(n){return this.mul(n,n)},v.prototype.sqrt=function n(l){if(l.isZero())return l.clone();var a=this.m.andln(3);if(o(1==a%2),3===a){var u=this.m.add(new d(1)).iushrn(2);return this.pow(l,u)}for(var f=this.m.subn(1),h=0;!f.isZero()&&0===f.andln(1);)h++,f.iushrn(1);o(!f.isZero());var s=new d(1).toRed(this),g=s.redNeg(),y=this.m.subn(1).iushrn(1),w=this.m.bitLength();for(w=new d(2*w*w).toRed(this);0!==this.pow(w,y).cmp(g);)w.redIAdd(g);for(var v=this.pow(w,f),c=this.pow(l,f.addn(1).iushrn(1)),r=this.pow(l,f),t=h;0!==r.cmp(s);){for(var m=r,x=0;0!==m.cmp(s);x++)m=m.redSqr();o(x<t);var i=this.pow(v,new d(1).iushln(t-x-1));c=c.redMul(i),v=i.redSqr(),r=r.redMul(v),t=x}return c},v.prototype.invm=function t(n){var a=n._invmp(this.m);return 0===a.negative?this.imod(a):(a.negative=0,this.imod(a).redNeg())},v.prototype.pow=function t(n,a){if(a.isZero())return new d(1).toRed(this);if(0===a.cmpn(1))return n.clone();var r=4,o=Array(1<<r);o[0]=new d(1).toRed(this),o[1]=n;for(var s=2;s<o.length;s++)o[s]=this.mul(o[s-1],n);var i=o[0],l=0,c=0,u=a.bitLength()%26;for(0==u&&(u=26),s=a.length-1;0<=s;s--){for(var f=a.words[s],m=u-1,h;0<=m;m--){if(h=1&f>>m,i!==o[0]&&(i=this.sqr(i)),0==h&&0==l){c=0;continue}l<<=1,l|=h,c++,c!=r&&(0!==s||0!==m)||(i=this.mul(i,o[l]),c=0,l=0)}u=26}return i},v.prototype.convertTo=function t(n){var a=n.umod(this.m);return a===n?a.clone():a},v.prototype.convertFrom=function t(n){var a=n.clone();return a.red=null,a},d.mont=function t(n){return new x(n)},r(x,v),x.prototype.convertTo=function t(n){return this.imod(n.ushln(this.shift))},x.prototype.convertFrom=function t(n){var a=this.imod(n.mul(this.rinv));return a.red=null,a},x.prototype.imul=function n(r,a){if(r.isZero()||a.isZero())return r.words[0]=0,r.length=1,r;var i=r.imul(a),t=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=i.isub(t).iushrn(this.shift),s=o;return 0<=o.cmp(this.m)?s=o.isub(this.m):0>o.cmpn(0)&&(s=o.iadd(this.m)),s._forceRed(this)},x.prototype.mul=function n(r,a){if(r.isZero()||a.isZero())return new d(0)._forceRed(this);var i=r.mul(a),t=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=i.isub(t).iushrn(this.shift),s=o;return 0<=o.cmp(this.m)?s=o.isub(this.m):0>o.cmpn(0)&&(s=o.iadd(this.m)),s._forceRed(this)},x.prototype.invm=function t(n){var a=this.imod(n._invmp(this.m).mul(this.r2));return a._forceRed(this)}})('undefined'==typeof t||t,this)}).call(n,a(9)(t))},function(t,n,a){function r(t,n){return s.call(this,n),d.isBuffer(t)?void(this.base=t,this.offset=0,this.length=t.length):void this.error('Input not Buffer')}function i(t,n){if(Array.isArray(t))this.length=0,this.value=t.map(function(t){return t instanceof i||(t=new i(t,n)),this.length+=t.length,t},this);else if('number'==typeof t){if(!(0<=t&&255>=t))return n.error('non-byte EncoderBuffer value');this.value=t,this.length=1}else if('string'==typeof t)this.value=t,this.length=d.byteLength(t);else if(d.isBuffer(t))this.value=t,this.length=t.length;else return n.error('Unsupported type: '+typeof t)}var o=a(0),s=a(70).Reporter,d=a(2).Buffer;o(r,s),n.DecoderBuffer=r,r.prototype.save=function t(){return{offset:this.offset,reporter:s.prototype.save.call(this)}},r.prototype.restore=function t(n){var a=new r(this.base);return a.offset=n.offset,a.length=this.offset,this.offset=n.offset,s.prototype.restore.call(this,n.reporter),a},r.prototype.isEmpty=function t(){return this.offset===this.length},r.prototype.readUInt8=function t(n){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(n||'DecoderBuffer overrun')},r.prototype.skip=function t(n,a){if(!(this.offset+n<=this.length))return this.error(a||'DecoderBuffer overrun');var i=new r(this.base);return i._reporterState=this._reporterState,i.offset=this.offset,i.length=this.offset+n,this.offset+=n,i},r.prototype.raw=function t(n){return this.base.slice(n?n.offset:this.offset,this.length)},n.EncoderBuffer=i,i.prototype.join=function t(n,a){return(n||(n=new d(this.length)),a||(a=0),0===this.length)?n:(Array.isArray(this.value)?this.value.forEach(function(t){t.join(n,a),a+=t.length}):('number'==typeof this.value?n[a]=this.value:'string'==typeof this.value?n.write(this.value,a):d.isBuffer(this.value)&&this.value.copy(n,a),a+=this.length),n)}},function(t,n,a){var r=n;r._reverse=function t(n){var a={};return Object.keys(n).forEach(function(t){(0|t)==t&&(t|=0);var r=n[t];a[r]=t}),a},r.der=a(424)},function(t,n,a){function r(t){this.enc='der',this.name=t.name,this.entity=t,this.tree=new i,this.tree._init(t.body)}function i(t){c.Node.call(this,'der',t)}function o(t,n){var a=t.readUInt8(n);if(t.isError(a))return a;var r=f.tagClass[a>>6],i=0==(32&a);if(31==(31&a)){var o=a;for(a=0;128==(128&o);){if(o=t.readUInt8(n),t.isError(o))return o;a<<=7,a|=127&o}}else a&=31;var s=f.tag[a];return{cls:r,primitive:i,tag:a,tagStr:s}}function s(t,n,a){var r=t.readUInt8(a);if(t.isError(r))return r;if(!n&&128===r)return null;if(0==(128&r))return r;var o=127&r;if(4<o)return t.error('length octect is too long');r=0;for(var s=0;s<o;s++){r<<=8;var i=t.readUInt8(a);if(t.isError(i))return i;r|=i}return r}var d=a(0),l=a(69),c=l.base,u=l.bignum,f=l.constants.der;;t.exports=r,r.prototype.decode=function t(n,a){return n instanceof c.DecoderBuffer||(n=new c.DecoderBuffer(n,a)),this.tree._decode(n,a)},d(i,c.Node),i.prototype._peekTag=function t(n,a,r){if(n.isEmpty())return!1;var i=n.save(),s=o(n,'Failed to peek tag: "'+a+'"');return n.isError(s)?s:(n.restore(i),s.tag===a||s.tagStr===a||s.tagStr+'of'===a||r)},i.prototype._decodeTag=function t(n,a,r){var i=o(n,'Failed to decode tag of "'+a+'"');if(n.isError(i))return i;var d=s(n,i.primitive,'Failed to get length of "'+a+'"');if(n.isError(d))return d;if(!r&&i.tag!==a&&i.tagStr!==a&&i.tagStr+'of'!==a)return n.error('Failed to match tag: "'+a+'"');if(i.primitive||null!==d)return n.skip(d,'Failed to match body of: "'+a+'"');var l=n.save(),c=this._skipUntilEnd(n,'Failed to skip indefinite length body: "'+this.tag+'"');return n.isError(c)?c:(d=n.offset-l.offset,n.restore(l),n.skip(d,'Failed to match body of: "'+a+'"'))},i.prototype._skipUntilEnd=function t(n,a){for(;!0;){var r=o(n,a);if(n.isError(r))return r;var i=s(n,r.primitive,a);if(n.isError(i))return i;var d;if(d=r.primitive||null!==i?n.skip(i):this._skipUntilEnd(n,a),n.isError(d))return d;if('end'===r.tagStr)break}},i.prototype._decodeList=function t(n,a,r,i){for(var o=[];!n.isEmpty();){var s=this._peekTag(n,'end');if(n.isError(s))return s;var d=r.decode(n,'der',i);if(n.isError(d)&&s)break;o.push(d)}return o},i.prototype._decodeStr=function t(n,a){if('bitstr'===a){var r=n.readUInt8();return n.isError(r)?r:{unused:r,data:n.raw()}}if('bmpstr'===a){var o=n.raw();if(1==o.length%2)return n.error('Decoding of string type: bmpstr length mismatch');for(var s='',d=0;d<o.length/2;d++)s+=_StringfromCharCode(o.readUInt16BE(2*d));return s}if('numstr'===a){var i=n.raw().toString('ascii');return this._isNumstr(i)?i:n.error('Decoding of string type: numstr unsupported characters')}if('octstr'===a)return n.raw();if('objDesc'===a)return n.raw();if('printstr'===a){var l=n.raw().toString('ascii');return this._isPrintstr(l)?l:n.error('Decoding of string type: printstr unsupported characters')}return /str$/.test(a)?n.raw().toString():n.error('Decoding of string type: '+a+' unsupported')},i.prototype._decodeObjid=function t(n,a,r){for(var i=[],o=0,s,d;!n.isEmpty();)d=n.readUInt8(),o<<=7,o|=127&d,0==(128&d)&&(i.push(o),o=0);128&d&&i.push(o);var l=0|i[0]/40,c=i[0]%40;if(s=r?i:[l,c].concat(i.slice(1)),a){var u=a[s.join(' ')];void 0===u&&(u=a[s.join('.')]),void 0!==u&&(s=u)}return s},i.prototype._decodeTime=function t(n,a){var r=n.raw().toString();if('gentime'===a)var i=0|r.slice(0,4),o=0|r.slice(4,6),s=0|r.slice(6,8),d=0|r.slice(8,10),l=0|r.slice(10,12),c=0|r.slice(12,14);else if('utctime'===a){var i=0|r.slice(0,2),o=0|r.slice(2,4),s=0|r.slice(4,6),d=0|r.slice(6,8),l=0|r.slice(8,10),c=0|r.slice(10,12);i=70>i?2e3+i:1900+i}else return n.error('Decoding '+a+' time is not supported yet');return Date.UTC(i,o-1,s,d,l,c,0)},i.prototype._decodeNull=function t(n){return null},i.prototype._decodeBool=function t(n){var a=n.readUInt8();return n.isError(a)?a:0!==a},i.prototype._decodeInt=function t(n,a){var r=n.raw(),i=new u(r);return a&&(i=a[i.toString(10)]||i),i},i.prototype._use=function t(n,a){return'function'==typeof n&&(n=n(a)),n._getDecoder('der').tree}},function(t,n,a){function r(t){this.enc='der',this.name=t.name,this.entity=t,this.tree=new i,this.tree._init(t.body)}function i(t){u.Node.call(this,'der',t)}function o(t){return 10>t?'0'+t:t}function s(t,n,a,r){var i;if('seqof'===t?t='seq':'setof'===t&&(t='set'),f.tagByName.hasOwnProperty(t))i=f.tagByName[t];else if('number'==typeof t&&(0|t)===t)i=t;else return r.error('Unknown tag: '+t);return 31<=i?r.error('Multi-octet tag encoding unsupported'):(n||(i|=32),i|=f.tagClassByName[a||'universal']<<6,i)}var d=a(0),l=a(2).Buffer,c=a(69),u=c.base,f=c.constants.der;;t.exports=r,r.prototype.encode=function t(n,a){return this.tree._encode(n,a).join()},d(i,u.Node),i.prototype._encodeComposite=function t(n,a,r,o){var d=s(n,a,r,this.reporter);if(128>o.length){var c=new l(2);return c[0]=d,c[1]=o.length,this._createEncoderBuffer([c,o])}for(var u=1,f=o.length;256<=f;f>>=8)u++;var c=new l(2+u);c[0]=d,c[1]=128|u;for(var f=1+u,i=o.length;0<i;f--,i>>=8)c[f]=255&i;return this._createEncoderBuffer([c,o])},i.prototype._encodeStr=function t(n,a){if('bitstr'===a)return this._createEncoderBuffer([0|n.unused,n.data]);if('bmpstr'===a){for(var r=new l(2*n.length),o=0;o<n.length;o++)r.writeUInt16BE(n.charCodeAt(o),2*o);return this._createEncoderBuffer(r)}return'numstr'===a?this._isNumstr(n)?this._createEncoderBuffer(n):this.reporter.error('Encoding of string type: numstr supports only digits and space'):'printstr'===a?this._isPrintstr(n)?this._createEncoderBuffer(n):this.reporter.error('Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark'):/str$/.test(a)?this._createEncoderBuffer(n):'objDesc'===a?this._createEncoderBuffer(n):this.reporter.error('Encoding of string type: '+a+' unsupported')},i.prototype._encodeObjid=function t(n,a,r){if('string'==typeof n){if(!a)return this.reporter.error('string objid given, but no values map found');if(!a.hasOwnProperty(n))return this.reporter.error('objid not found in values map');n=a[n].split(/[\s\.]+/g);for(var o=0;o<n.length;o++)n[o]|=0}else if(Array.isArray(n)){n=n.slice();for(var o=0;o<n.length;o++)n[o]|=0}if(!Array.isArray(n))return this.reporter.error('objid() should be either array or string, got: '+JSON.stringify(n));if(!r){if(40<=n[1])return this.reporter.error('Second objid identifier OOB');n.splice(0,2,40*n[0]+n[1])}for(var i=0,o=0,s;o<n.length;o++)for(s=n[o],i++;128<=s;s>>=7)i++;for(var d=new l(i),c=d.length-1,o=n.length-1,s;0<=o;o--)for(s=n[o],d[c--]=127&s;0<(s>>=7);)d[c--]=128|127&s;return this._createEncoderBuffer(d)},i.prototype._encodeTime=function t(n,a){var r=new Date(n),i;return'gentime'===a?i=[o(r.getFullYear()),o(r.getUTCMonth()+1),o(r.getUTCDate()),o(r.getUTCHours()),o(r.getUTCMinutes()),o(r.getUTCSeconds()),'Z'].join(''):'utctime'===a?i=[o(r.getFullYear()%100),o(r.getUTCMonth()+1),o(r.getUTCDate()),o(r.getUTCHours()),o(r.getUTCMinutes()),o(r.getUTCSeconds()),'Z'].join(''):this.reporter.error('Encoding '+a+' time is not supported yet'),this._encodeStr(i,'octstr')},i.prototype._encodeNull=function t(){return this._createEncoderBuffer('')},i.prototype._encodeInt=function t(n,a){if('string'==typeof n){if(!a)return this.reporter.error('String int or enum given, but no values map');if(!a.hasOwnProperty(n))return this.reporter.error('Values map doesn\'t contain: '+JSON.stringify(n));n=a[n]}if('number'!=typeof n&&!l.isBuffer(n)){var r=n.toArray();!n.sign&&128&r[0]&&r.unshift(0),n=new l(r)}if(l.isBuffer(n)){var o=n.length;0===n.length&&o++;var s=new l(o);return n.copy(s),0===n.length&&(s[0]=0),this._createEncoderBuffer(s)}if(128>n)return this._createEncoderBuffer(n);if(256>n)return this._createEncoderBuffer([0,n]);for(var o=1,d=n;256<=d;d>>=8)o++;for(var s=Array(o),d=s.length-1;0<=d;d--)s[d]=255&n,n>>=8;return 128&s[0]&&s.unshift(0),this._createEncoderBuffer(new l(s))},i.prototype._encodeBool=function t(n){return this._createEncoderBuffer(n?255:0)},i.prototype._use=function t(n,a){return'function'==typeof n&&(n=n(a)),n._getEncoder('der').tree},i.prototype._skipDefault=function t(n,a,r){var o=this._baseState,s;if(null===o['default'])return!1;var i=n.join();if(void 0===o.defaultBuffer&&(o.defaultBuffer=this._encodeValue(o['default'],a,r).join()),i.length!==o.defaultBuffer.length)return!1;for(s=0;s<i.length;s++)if(i[s]!==o.defaultBuffer[s])return!1;return!0}},function(t,n){t.exports={"1.3.132.0.10":'secp256k1',"1.3.132.0.33":'p224',"1.2.840.10045.3.1.1":'p192',"1.2.840.10045.3.1.7":'p256',"1.3.132.0.34":'p384',"1.3.132.0.35":'p521'}},function(t,n,a){(function(n){function r(t){var a=new n(4);return a.writeUInt32BE(t,0),a}var o=a(66);t.exports=function(a,s){for(var d=new n(''),t=0,i;d.length<s;)i=r(t++),d=n.concat([d,o('sha1').update(a).update(i).digest()]);return d.slice(0,s)}}).call(n,a(2).Buffer)},function(t,n){t.exports=function t(n,a){for(var r=n.length,o=-1;++o<r;)n[o]^=a[o];return n}},function(t,n,a){(function(n){function r(t,a){return new n(t.toRed(i.mont(a.modulus)).redPow(new i(a.publicExponent)).fromRed().toArray())}var i=a(142);t.exports=r}).call(n,a(2).Buffer)},function(t,n,a){'use strict';function r(t,n,a){var r=function t(n){n.preventDefault(),n.dataTransfer.dropEffect='copy'},i=function t(n){console.log('dragenter event dropEffect: '+n.dataTransfer.dropEffect),this.style.backgroundColor='#ccc',n.dataTransfer.dropEffect='link',console.log('dragenter event dropEffect 2: '+n.dataTransfer.dropEffect)},o=function t(n){console.log('dragleave event dropEffect: '+n.dataTransfer.dropEffect),this.style.backgroundColor='white'},s=function r(o){o.preventDefault&&o.preventDefault(),console.log('Drop event. dropEffect: '+o.dataTransfer.dropEffect),console.log('Drop event. types: '+(o.dataTransfer.types?o.dataTransfer.types.join(', '):'NOPE'));var s=null,d;if(o.dataTransfer.types){for(var l=0,t;l<o.dataTransfer.types.length;l++)if(t=o.dataTransfer.types[l],'text/uri-list'===t)s=o.dataTransfer.getData(t).split('\n'),console.log('Dropped text/uri-list: '+s);else if('text/plain'===t)d=o.dataTransfer.getData(t);else if('Files'===t&&a){for(var c=o.dataTransfer.files,u=0,i;c[u];u++)i=c[u],console.log('Filename: '+i.name+', type: '+(i.type||'n/a')+' size: '+i.size+' bytes, last modified: '+(i.lastModifiedDate?i.lastModifiedDate.toLocaleDateString():'n/a'));a(c)}null===s&&d&&'http'===d.slice(0,4)&&(s=d,console.log('Waring: Poor man\'s drop: using text for URI'))}else s=[o.dataTransfer.getData('Text')],console.log('WARNING non-standard drop event: '+s[0]);return console.log('Dropped URI list (2): '+s),s&&n(s),this.style.backgroundColor='white',!1},d=function t(n){n||console.log('@@@ addTargetListeners: ele '+n),n.addEventListener('dragover',r),n.addEventListener('dragenter',i),n.addEventListener('dragleave',o),n.addEventListener('drop',s)};d(t,n)}function i(t,n){t.setAttribute('draggable','true'),t.addEventListener('dragstart',function(a){t.style.fontWeight='bold',a.dataTransfer.setData('text/uri-list',n.uri),a.dataTransfer.setData('text/plain',n.uri),a.dataTransfer.setData('text/html',t.outerHTML),console.log('Dragstart: '+t+' -> '+n+'de: '+a.dataTransfer.dropEffect)},!1),t.addEventListener('drag',function(t){t.preventDefault(),t.stopPropagation()},!1),t.addEventListener('dragend',function(a){t.style.fontWeight='normal',console.log('Dragend dropeffect: '+a.dataTransfer.dropEffect),console.log('Dragend: '+t+' -> '+n)},!1)}t.exports={makeDropTarget:r,makeDraggable:i}},function(t,n,a){'use strict';var r=a(442);t.exports={Signup:a(443),login:r.login,currentUser:r.currentUser}},function(t,n,a){'use strict';t.exports={authEndpoint:'',fallbackAuthEndpoint:'https://databox.me/',signupEndpoint:'https://solid.github.io/solid-idps/',signupWindowHeight:600,signupWindowWidth:1024,key:'',cert:''}},function(t,n,a){'use strict';var r=t.exports={},o={acl:r,icons:a(29),log:a(25),ns:a(15),store:a(22),widgets:a(30)},s=a(31),i=o.store;o.acl.adoptACLDefault=function(t,n,a,r){var i=o.store,s=o.ns.acl,d=o.ns,l='/'===t.uri.slice(-1),c=i.each(void 0,s('defaultForNew'),a,r),u=[];c.map(function(n){u=u.concat(i.statementsMatching(n,s('agent'),void 0,r)).concat(i.statementsMatching(n,s('agentClass'),void 0,r)).concat(i.statementsMatching(n,s('agentGroup'),void 0,r)).concat(i.statementsMatching(n,s('origin'),void 0,r)).concat(i.statementsMatching(n,s('originClass'),void 0,r)).concat(i.statementsMatching(n,s('mode'),void 0,r)),u.push($rdf.st(n,s('accessTo'),t,r)),l&&u.push($rdf.st(n,s('defaultForNew'),t,r))});var f=$rdf.graph();return u.map(function(t){var a=function t(a){var i=r.uri.length;return $rdf.sym(a.uri.slice(0,i)==r.uri?n.uri+a.uri.slice(i):a.uri)};f.add(a(t.subject),a(t.predicate),a(t.object),$rdf.sym(n.uri))}),f},o.acl.readACL=function(t,n,r,a){var r=r||o.store,i=o.ns,s=a?i.acl('defaultForNew'):i.acl('accessTo'),d=o.ns.acl,l={agent:[],agentClass:[],agentGroup:[],origin:[],originClass:[]},c=r.each(void 0,s,t);for(var u in{agent:!0,agentClass:!0,agentGroup:!0,origin:!0,originClass:!0})c.map(function(t){r.each(t,d('mode')).map(function(n){r.each(t,d(u)).map(function(a){l[u][a.uri]||(l[u][a.uri]=[]),l[u][a.uri][n.uri]=t})})});return l},o.acl.sameACL=function(t,n){var a=function t(n,a){for(var r in{agent:!0,agentClass:!0,agentGroup:!0,origin:!0,originClass:!0})if(n[r])for(var i in n[r])for(var o in n[r][i])if(!a[r][i]||!a[r][i][o])return!1;return!0};return a(t,n)&&a(n,t)},o.acl.ACLunion=function(t){for(var n=t[0],r=1,i,a;r<t.length;r++)['agent','agentClass','agentGroup','origin','originClass'].map(function(o){if(i=t[r],i[o])for(a in i[o])for(var s in i[o][a])n[o][a]||(n[o][a]=[]),n[o][a][s]=!0});return n},o.acl.loadUnionACL=function(t,n){var a=[],r=function t(r){if(r.length){var i=r.shift().doc();o.acl.getACLorDefault(i,function(i,s,d,l,c,u){var f=!s;return i?void(a.push(f?o.widgets.readACL(c,u):o.widgets.readACL(d,l)),t(r.slice(1))):n(i,l)})}else n(!0,o.widgets.ACLunion(a))};r(t)},o.acl.ACLbyCombination=function(t){var n=[];return['agent','agentClass','agentGroup','origin','originClass'].map(function(a){for(var r in t[a]){var i=[];for(var o in t[a][r])i.push(o);i.sort(),i=i.join('\n'),n[i]||(n[i]=[]),n[i].push([a,r])}}),n},o.acl.makeACLGraph=function(t,n,a,r){var i=o.acl.ACLbyCombination(a);return o.acl.makeACLGraphbyCombo(t,n,i,r)},o.acl.makeACLGraphbyCombo=function(t,n,r,s,d,l){var c=o.ns.acl;for(var u in r){var f=u.split('\n'),m=f.map(function(t){return t.split('#')[1]}).join('');l&&!d&&(m+='Default');var h=t.sym(s.uri+'#'+m);t.add(h,o.ns.rdf('type'),c('Authorization'),s),d&&t.add(h,c('accessTo'),n,s),l&&t.add(h,c('defaultForNew'),n,s);for(var a=0;a<f.length;a++)t.add(h,c('mode'),t.sym(f[a]),s);var i=r[u];for(a=0;a<i.length;a++){var g=i[a][0],b=i[a][1];t.add(h,c(g),t.sym(b),s)}}},o.acl.ACLToString=function(t){return o.widgets.comboToString(o.widgets.ACLbyCombination(t))},o.acl.comboToString=function(t){var n='';for(var a in t){var r=a.split('\n'),d=r.map(function(t){return t.split('#')[1][0]}).join('');n+=d+':';for(var l=t[a],c=0;c<l.length;c++){var i=l[c][0],u=$rdf.sym(l[c][1]);n+='agent'===i?'@':'',n+=u.sameTerm(o.ns.foaf('Agent'))?'*':s.label(u),c<l.length-1&&(n+=',')}n+=';'}return'{'+n.slice(0,-1)+'}'},o.acl.makeACLString=function(t,n,a){var r=$rdf.graph();return o.widgets.makeACLGraph(r,t,n,a),$rdf.serialize(a,r,a.uri,'text/turtle')},o.acl.putACLObject=function(t,n,a,r,i){var s=o.widgets.ACLbyCombination(a);return o.widgets.putACLbyCombo(t,n,s,r,i)},o.acl.putACLbyCombo=function(t,n,a,r,i){var s=$rdf.graph();o.widgets.makeACLGraphbyCombo(s,n,a,r,!0),t.updater.put(r,s.statementsMatching(void 0,void 0,void 0,r),'text/turtle',function(s,d,l){d?(t.fetcher.unload(r),o.widgets.makeACLGraphbyCombo(t,n,a,r,!0),t.fetcher.requested[r.uri]='done',i(d)):i(d,l)})},o.acl.fixIndividualCardACL=function(t,n,a){var r=o.store.each(void 0,o.ns.vcard('hasMember'),t),i=t.doc();r?o.widgets.fixIndividualACL(t,r,n,a):(n('This card is in no groups'),a(!0))},o.acl.fixIndividualACL=function(t,n,a,r){a=a||console.log;var i=t.doc();o.acl.getACLorDefault(i,function(d,l,c,u,f,m){if(!d)return r(!1,u);var h=l?o.widgets.readACL(c,u):o.widgets.readACL(f,m);o.widgets.loadUnionACL(n,function(n,d){return n?void(o.widgets.sameACL(d,h)?a('Nice - same ACL. no change '+s.label(t)+' '+i):(a('Group ACLs differ for '+s.label(t)+' '+i),o.widgets.putACLObject(o.store,c,d,u,r))):r(!1,d)})})},o.acl.setACL=function(t,n,a){var r=i.any(i.sym(t),i.sym('http://www.iana.org/assignments/link-relations/acl'));r?i.fetcher.webOperation('PUT',r.uri,{data:n,contentType:'text/turtle'}).then(a):fetcher.nowOrWhenFetched(t,void 0,function(r,o){if(!r)return a(r,'Gettting headers for ACL: '+o);var s=i.any(i.sym(t),i.sym('http://www.iana.org/assignments/link-relations/acl'));s?i.fetcher.webOperation('PUT',s.uri,{data:n,contentType:'text/turtle'}).then(a):a(!1,'No Link rel=ACL header for '+t)})},o.acl.getACLorDefault=function(t,n){o.acl.getACL(t,function(r,s,d,l){var c=o.store,u=o.ns.acl,f,i,m,h,g;if(!r)return n(!1,!1,s,l);var a=function a(r){'/'===r.slice(-1)&&(r=r.slice(0,-1));var i=r.lastIndexOf('/'),s=r.indexOf('/',r.indexOf('//')+2);r=r.slice(0,i+1);var l=$rdf.sym(r);o.acl.getACL(l,function(o,f,m){if(!o)return n(!1,!0,f,'( No ACL pointer '+r+' '+f+')'+m);if(403===f)return n(!1,!0,f,'( default ACL file FORBIDDEN. Stop.'+r+')');if(404===f){if(s>=i)return n(!1,!0,499,'Nothing to hold a default');a(r)}else{if(200!==f)return n(!1,!0,f,'Error status \''+f+'\' searching for default for '+l);var h=c.each(void 0,u('defaultForNew'),c.sym(r),m);if(!h.length)a(r);else{var g=c.sym(r);n(!0,!1,t,d,g,m)}}})};if(!r)return n(!1,!1,s,'Error accessing Access Control information for '+t+') '+l);return 404===s?void a(t.uri):403===s?n(!1,!1,s,'(Sharing not available to you)'+l):200===s?n(!0,!0,t,d):n(!1,!1,s,'Error '+s+' accessing Access Control information for '+t+': '+l)})},o.acl.getACL=function(t,n){o.store.fetcher.nowOrWhenFetched(t,void 0,function(a,r){if(!a)return n(a,'Can\'t get headers to find ACL for '+t+': '+r);var i=o.store,s=i.any(t,i.sym('http://www.iana.org/assignments/link-relations/acl'));if(!s)n(!1,900,'No Link rel=ACL header for '+t);else{if(o.store.fetcher.nonexistent[s.uri])return n(!0,404,s,'ACL file '+s+' does not exist.');o.store.fetcher.nowOrWhenFetched(s,void 0,function(t,a,r){t?n(!0,200,s):n(!0,r.status,s,'Can\'t read Access Control File '+s+': '+a)})}})}},function(t,n,a){'use strict';function r(t,n,a){var r=function t(n){n.preventDefault(),n.dataTransfer.dropEffect='copy'},i=function t(n){console.log('dragenter event dropEffect: '+n.dataTransfer.dropEffect),this.style.backgroundColor='#ccc',n.dataTransfer.dropEffect='link',console.log('dragenter event dropEffect 2: '+n.dataTransfer.dropEffect)},o=function t(n){console.log('dragleave event dropEffect: '+n.dataTransfer.dropEffect),this.style.backgroundColor='white'},s=function r(o){o.preventDefault&&o.preventDefault(),console.log('Drop event. dropEffect: '+o.dataTransfer.dropEffect),console.log('Drop event. types: '+(o.dataTransfer.types?o.dataTransfer.types.join(', '):'NOPE'));var s=null,d=this,l;if(o.dataTransfer.types){for(var c=0,t;c<o.dataTransfer.types.length;c++)if(t=o.dataTransfer.types[c],'text/uri-list'===t)s=o.dataTransfer.getData(t).split('\n'),console.log('Dropped text/uri-list: '+s);else if('text/plain'===t)l=o.dataTransfer.getData(t);else if('Files'===t&&a){for(var u=o.dataTransfer.files,m=0,i;i=u[m];m++)console.log('Filename: '+i.name+', type: '+(i.type||'n/a')+' size: '+i.size+' bytes, last modified: '+(i.lastModifiedDate?i.lastModifiedDate.toLocaleDateString():'n/a'));a(u)}null===s&&l&&'http'===l.slice(0,4)&&(s=l,console.log('Waring: Poor man\'s drop: using text for URI'))}else s=[o.dataTransfer.getData('Text')],console.log('WARNING non-standard drop event: '+s[0]);return console.log('Dropped URI list (2): '+s),s&&n(s),this.style.backgroundColor='white',!1},d=function t(n){n||console.log('@@@ addTargetListeners: ele '+n),n.addEventListener('dragover',r),n.addEventListener('dragenter',i),n.addEventListener('dragleave',o),n.addEventListener('drop',s)};d(t,n)}function i(t,n){t.setAttribute('draggable','true'),t.addEventListener('dragstart',function(a){t.style.fontWeight='bold',a.dataTransfer.setData('text/uri-list',n.uri),a.dataTransfer.setData('text/plain',n.uri),a.dataTransfer.setData('text/html',t.outerHTML),console.log('Dragstart: '+t+' -> '+n+'de: '+a.dataTransfer.dropEffect)},!1),t.addEventListener('drag',function(t){t.preventDefault(),t.stopPropagation()},!1),t.addEventListener('dragend',function(a){t.style.fontWeight='normal',console.log('Dragend dropeffect: '+a.dataTransfer.dropEffect),console.log('Dragend: '+t+' -> '+n)},!1)}t.exports={makeDropTarget:r,makeDraggable:i}},function(t,n,a){'use strict';function r(t,n){var a=t.uri||t,r=a.indexOf('://');if(0>r)return!1;var i=a.indexOf('/',r+3);if(0>i)return!1;var o=a.slice(0,i+1);return o}function i(t,n){n&&(n.me=S.namedNode(t));var a;return t&&(a=t.uri||t),tabulator.preferences.set('me',a||''),a?S.namedNode(a):null}function o(){var t=w();if(t)return t;var n=tabulator.preferences.get('me');return n?S.sym(n):null}function s(t){var n=o();return n?Promise.resolve({me:n}):new Promise(function(n){var a=C(t.dom,function(a){n({me:i(a,t)})});t.div.appendChild(a)})}function d(t){if(t.publicProfile)return Promise.resolve(t);var n=L.store.fetcher,a;return s(t).then(function(t){var r=t.me;if(!r)throw new Error('Could not log in');return a=r.doc(),n.fetch(a)}).then(function(n){if(!n.ok)throw new Error(n.error);return t.publicProfile=a,t}).catch(function(n){var r='Cannot load profile '+a+' : '+n;return t.div.appendChild(I.errorMessageBlock(t.dom,r)),t})}function l(t){if(t.preferencesFile)return Promise.resolve(t);var n=L.store,a=t.statusArea||t.div||null,r=n.any(t.me,L.ns.space('preferencesFile')),i;return Promise.resolve().then(function(){if(!r){var o='Can\'t find a preferences file for user: '+t.me;throw I.errorMessageBlock(t.dom,o),new Error(o)}return t.preferencesFile=r,a&&(i=I.errorMessageBlock(t.dom,'(loading preferences '+r+')','straw'),a.appendChild(i)),n.fetcher.fetch(r)}).then(function(){return i&&i.parentNode.removeChild(i),t}).catch(function(t){throw new Error('Error loading preferences file. '+t)})}function c(t){var n=L.ns,a=L.store;return d(t).then(l).then(function(t){var r=t.me;t.index=t.index||{},t.index.private=a.each(r,n.solid('privateTypeIndex'),void 0,t.preferencesFile),t.index.public=a.each(r,n.solid('publicTypeIndex'),void 0,t.publicProfile);var i=t.index.private.concat(t.index.public);return 0===i.length?t:a.fetcher.load(i)}).then(function(){return t}).catch(function(n){throw N.complain(t,n),new Error('Error loading type indexes: '+n)})}function u(t){return new Promise(function(n,a){return c(t).then(function(t){var a=L.ns,r=L.store,i=t.me,o=function t(n,o){return new Promise(function(t,s){var l={private:n.preferencesFile,public:n.publicProfile}[o];if(0===n.index[o].length){d=S.sym(n.preferencesFile.dir().uri+o+'TypeIndex.ttl'),console.log('Linking to new fresh type index '+d);var c=[S.st(i,a.solid(o+'TypeIndex'),d,l)];L.store.updater.update([],c,function(a,i,l){return i?(n.index[o].push(d),console.log('Creating new fresh type index '+d),!window.confirm('Creating new list of things  '+d))?s(new Error('Cancelled by user: writing of '+d)):void r.fetcher.webOperation('PUT',d,{data:'# '+new Date+' Blank initial Type index\n'}).then(function(a){t(n)}).catch(function(t){s(new Error('Creating new index file '+t))}):s(new Error('Error saving type index link saving back '+a+': '+l))})}else t(n)})},s=[o(t,'private'),o(t,'public')],d;return Promise.all(s).then(function(){n(t)})})})}function f(t,n){var a=L.store,o=L.ns,i=L.store.fetcher,s=a.each(void 0,o.solid('forClass'),n),d=[],l=[];return c(t).then(function(t){for(var c=0;c<s.length;c++)d=d.concat(a.each(n,o.solid('instance'))),l=l.concat(a.each(n,o.solid('instanceContainer')));return l.length?i.load(l).then(function(){for(var t=0,n;t<l.length;t++)n=l[t],d=d.concat(a.each(n,o.ldp('contains')))}):void 0}).then(function(){return t.instances=d,t.containers=l,t}).catch(function(t){throw new Error('Error looking for instances of '+n+': '+t)})}function m(t,n,a){var i=L.store,o=L.ns,r=t.dom,s=r.createElement('div');return t.div.appendChild(s),u(t).then(function(t){s.innerHTML='<table><tbody><tr></tr><tr></tr></tbody></table>',s.setAttribute('style','font-size: 120%; text-align: right; padding: 1em; border: solid gray 0.05em;');var r=s.children[0].children[0],d=i.bnode(),l=function t(r){var s=i.each(void 0,o.solid('instance'),n).filter(function(t){return i.holds(t,o.solid('forClass'),a)}),d=s.length?s[0]:N.newThing(r);return[S.st(d,o.solid('instance'),n,r),S.st(d,o.solid('forClass'),a,r)]},c,u;return t.index.public&&0<t.index.public.length&&(c=t.index.public[0],u=l(c),r.children[0].appendChild(N.buildCheckboxForm(t.dom,L.store,'Public link to this '+t.noun,null,u,d,c))),t.index.private&&0<t.index.private.length&&(c=t.index.private[0],u=l(c),r.children[1].appendChild(N.buildCheckboxForm(t.dom,L.store,'Personal note of this '+t.noun,null,u,d,c))),t})}function h(t,n){var a=L.store,r=L.ns,o=t.dom,s=o.createElement('div');return t.div.appendChild(s),u(t).then(function(d){s.innerHTML='<table><tbody></tbody></table>',s.setAttribute('style','font-size: 120%; text-align: right; padding: 1em; border: solid #eee 0.5em;');var l=s.firstChild,c=[],u=[],f=['private','public'];f.forEach(function(i){n[i]&&(c=c.concat(t.index[i][0]),u=u.concat(a.statementsMatching(void 0,r.solid('instance'),void 0,t.index[i][0])))});for(var m=0;m<u.length;m++){var i=u[m],h=i.object,g=function t(n){a.updater.update([i],[],function(t,n,a){n?console.log('Removed from index: '+i.subject):console.log('Error: Cannot delete '+i+': '+a)})},b={deleteFunction:g},y=N.personTR(o,r.solid('instance'),h,b);l.appendChild(y)}return t})}function g(t,n,a){var r=L.store,i=r.any(r.sym(t),r.sym('http://www.iana.org/assignments/link-relations/acl'));return Promise.resolve().then(function(){return i?i:b(t).catch(function(n){throw new Error('Error fetching rel=ACL header for '+t+': '+n)})}).then(function(i){var o=y(t,n,i.uri,a);return r.fetcher.webOperation('PUT',i.uri,{data:o,contentType:'text/turtle'}).then(function(t){if(!t.ok)throw new Error('Error writing ACL text: '+t.error);return i})})}function b(t){var n=L.store,a=n.fetcher;return a.fetch(t).then(function(a){if(!a.ok)throw new Error('While fetching:'+a.error);var r=n.any(n.sym(t),n.sym('http://www.iana.org/assignments/link-relations/acl'));if(!r)throw new Error('No Link rel=ACL header for '+t);return r})}function y(t,n,r){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},o=i.public||[],s=S.graph(),d=S.Namespace('http://www.w3.org/ns/auth/acl#'),l=s.sym(r+'#a1'),a=s.sym(r),c=s.sym(t);if(s.add(l,L.ns.rdf('type'),d('Authorization'),a),s.add(l,d('accessTo'),c,a),i.defaultForNew&&s.add(l,d('defaultForNew'),c,a),s.add(l,d('agent'),n,a),s.add(l,d('mode'),d('Read'),a),s.add(l,d('mode'),d('Write'),a),s.add(l,d('mode'),d('Control'),a),o.length){l=s.sym(r+'#a2'),s.add(l,L.ns.rdf('type'),d('Authorization'),a),s.add(l,d('accessTo'),c,a),s.add(l,d('agentClass'),L.ns.foaf('Agent'),a);for(var u=0;u<o.length;u++)s.add(l,d('mode'),d(o[u]),a)}return S.serialize(a,s,r,'text/turtle')}function w(){if('undefined'!=typeof $SolidTestEnvironment&&$SolidTestEnvironment.username)return console.log('Assuming the user is '+$SolidTestEnvironment.username),S.sym($SolidTestEnvironment.username);if('webapp'===tabulator.mode&&'undefined'!=typeof document&&document.location&&'http://localhost'===(''+document.location).slice(0,16)){var t=document.getElementById('appTarget');if(!t)return null;var n=t.getAttribute('testID');return n?(console.log('Assuming user is '+n),S.sym(n)):null}return null}function v(t,n){var a=t.createElement('div'),r=t.createElement('p');a.appendChild(r),a.className='mildNotice',r.innerHTML='Enter your Web ID or pod uri',console.log('widgets.signInOrSignUpBox');var i=t.createElement('input');a.appendChild(i),i.setAttribute('type','text'),i.setAttribute('id','idpInput'),i.size=40;var o=t.createElement('input');a.appendChild(o),o.setAttribute('type','button'),o.setAttribute('value','Log in (old)'),o.setAttribute('style','padding: 1em; border-radius:0.5em; margin: 2em;'),o.addEventListener('click',function(){var t=w();if(t)return n(t.uri);var a=document.getElementById('idpInput');return a&&''!==a.value?j.login(a.value).then(x).then(function(t){return n(t)}):window&&window.location&&window.location.href?j.login(window.location.href).then(x).then(function(t){return n(t)}):void 0},!1);var s=t.createElement('input');a.appendChild(s),s.setAttribute('type','button'),s.setAttribute('value','Log in'),s.setAttribute('style','padding: 1em; border-radius:0.5em; margin: 2em;'),s.addEventListener('click',function(){var t=w();if(t)return n(t.uri);var a=document.getElementById('idpInput');return j.popupLogin({popupUri:R.popupUri}).then(function(t){var a=t.webId;n(a)})},!1);var d=t.createElement('input');return a.appendChild(d),d.setAttribute('type','button'),d.setAttribute('value','Sign Up'),d.setAttribute('style','padding: 1em; border-radius:0.5em; margin: 2em;'),d.addEventListener('click',function(t){var a=new A.Signup;a.signup().then(function(t){console.log('signInOrSignUpBox signed up '+t),n(t)})},!1),a}function x(t){var n=t?t.webId:null;return n&&i(n),n}function _(){return k()}function k(t){var n=o();return n?Promise.resolve(t?t(n):n):j.currentSession().then(x).catch(function(t){return console.log('Error fetching currentSession:',t),null}).then(function(n){var a=i(n);return a&&console.log('(Logged in as '+a+' by authentication)'),t?t(a):a})}function C(t,n){var a=o(),r=t.createElement('div'),i=function t(i){if(i){var o=i.uri||i;tabulator.preferences.set('me',o),a=S.sym(o),r.refresh(),n&&n(a.uri)}},s=function t(){tabulator.preferences.set('me','');var i='Your Web ID was '+a+'. It has been forgotten.';a=null;try{L.log.alert(i)}catch(t){try{window.alert(i)}catch(t){}}r.refresh(),n&&n(null)},d=function n(a){var r='Web ID logout';if(a){var i=L.store.any(a,L.ns.foaf('nick'))||L.store.any(a,L.ns.foaf('name'));i&&(r='Logout '+i.value)}var o=t.createElement('input');return o.className='WebIDCancelButton',o.setAttribute('type','button'),o.setAttribute('value',r),o.addEventListener('click',s,!1),o};return r.refresh=function(){var n=o(),a=n?n.uri:'';r.me!==a&&(N.clearElement(r),n?r.appendChild(d(n)):r.appendChild(v(t,i))),r.me=a},r.me='99999',r.refresh(),r}function E(t,n,a){var r=n.noun,i=n.appPathSegment,s=o(),c=L.store,u=t.createElement('div'),f={me:s,dom:t,div:u},m=function n(a){u.appendChild(I.errorMessageBlock(t,a))},h=function t(n){var a=c.any(n,L.ns.space('uriPrefix'));a=a?a.value:n.uri.split('#')[0],'/'!==a.slice(-1)&&(console.log(i+': No / at end of uriPrefix '+a),a+='/');var r=new Date;return a+=i+'/id'+r.getTime()+'/',a},g=function n(o){var s=o.me,d=o.preferencesFile,l=null,f=c.statementsMatching(s,L.ns.space('workspace'),void 0,d).map(function(t){return t.object}),g=c.each(s,L.ns.space('storage'));g.map(function(t){f=f.concat(c.each(t,L.ns.ldp('contains')))}),1===f.length?(m('Workspace used: '+f[0].uri),l=h(f[0])):0===f.length&&m('You don\'t seem to have any workspaces. You have '+g.length+' storages.');var b=t.createElement('table');b.setAttribute('style','border-collapse:separate; border-spacing: 0.5em;'),u.appendChild(b),u.appendChild(t.createElement('hr'));var y=u.appendChild(t.createElement('p'));y.textContent='Where would you like to store the data for the '+r+'?  Give the URL of the directory where you would like the data stored.';var w=u.appendChild(t.createElement('input'));w.setAttribute('type','text'),w.size=80,w.label='base URL',w.autocomplete='on',l&&(w.value=l),o.baseField=w,u.appendChild(t.createElement('br'));var v=u.appendChild(t.createElement('button'));v.textContent='Start new '+r+' at this URI',v.addEventListener('click',function(t){var n=w.value;'/'!==n.slice(-1)&&(n+='/'),a(null,n)}),f=f.filter(function(t){return!c.holds(t,L.ns.rdf('type'),L.ns.space('MasterWorkspace'))});for(var x='height: 3em; margin: 1em; padding: 1em white; border-radius: 0.3em;',_=x+'border: 0px;',k=0,i,C,E,T,A,S,I;k<f.length;k++){if(A=f[k],T=t.createElement('tr'),0===k&&(i=t.createElement('td'),i.setAttribute('rowspan',''+f.length+1),i.textContent='Chose a workspace for this:',i.setAttribute('style','vertical-align:middle;'),T.appendChild(i)),C=t.createElement('td'),S=c.any(A,L.ns.ui('style')),S)S=S.value;else{var N=function t(n){return n.split('').reduce(function(t,n){return t=(t<<5)-t+n.charCodeAt(0),t&t},0)},j='#'+(12632256|16777215&N(A.uri)).toString(16);S='color: black ; background-color: '+j+';'}C.setAttribute('style',_+S),T.target=A.uri;var R=c.any(A,L.ns.rdfs('label'));R||(R=A.uri.split('/').slice(-1)[0]||A.uri.split('/').slice(-2)[0]),C.textContent=R||'???',T.appendChild(C),0===k&&(E=t.createElement('td'),E.setAttribute('rowspan',''+f.length+1),E.setAttribute('style','width:50%;'),T.appendChild(E)),b.appendChild(T);var M=function t(n,a,r,i){n.addEventListener('click',function(t){E.textContent=a,E.setAttribute('style',r),E.appendChild(D(i))},!0)},D=function n(r){var i=t.createElement('button');i.textContent='Continue';var o=h(r);return w.value=o,i.addEventListener('click',function(t){i.disabled=!0,a(r,o),i.textContent='---->'},!0),i};I=c.any(A,L.ns.rdfs('comment')),I=I?I.value:'Use this workspace',M(C,I?I.value:'',_+S,A)}var P=t.createElement('tr');C=t.createElement('td'),C.setAttribute('style',x),C.textContent='+ Make a new workspace',P.appendChild(C),b.appendChild(P)};return d(f).then(l).then(g),u}function T(t,n,a){var r=function t(n,r){a(n,r)},i=t.createElement('div'),o=t.createElement('button');return o.setAttribute('type','button'),i.appendChild(o),o.innerHTML='Make new '+n.noun,o.addEventListener('click',function(a){i.appendChild(E(t,n,r))},!1),i.appendChild(o),i}var A=a(244),S=a(4),I=a(97),N=a(30),j=a(249),L={log:a(25),ns:a(15),store:a(22)},R=$SOLID_GLOBAL_config;t.exports={checkCurrentUser:_,checkUser:k,currentUser:o,findAppInstances:f,findOriginOwner:r,loadTypeIndexes:c,logIn:s,loginStatusBox:C,newAppInstance:T,offlineTestID:w,registrationControl:m,registrationList:h,selectWorkspace:E,setACLUserPublic:g,saveUser:i,solidAuthClient:j}},function(t,n,a){'use strict';Object.defineProperty(n,'__esModule',{value:!0});var r=a(458);Object.defineProperty(n,'login',{enumerable:!0,get:function t(){return r.login}}),Object.defineProperty(n,'popupLogin',{enumerable:!0,get:function t(){return r.popupLogin}}),Object.defineProperty(n,'currentSession',{enumerable:!0,get:function t(){return r.currentSession}}),Object.defineProperty(n,'logout',{enumerable:!0,get:function t(){return r.logout}}),Object.defineProperty(n,'fetch',{enumerable:!0,get:function t(){return r.fetch}})},function(t,n,a){'use strict';function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,'__esModule',{value:!0}),n.combineHandlers=n.server=n.client=void 0;var i=a(6),o=r(i),s=a(7),d=r(s),l=a(47),c=r(l),u=a(183),f=r(u),m=a(86),h=r(m),g=a(185),b=r(g),y='solid-auth-client',w=function t(n){return(0,h.default)({},y,n)},v=function t(n){if(!n||'object'!==('undefined'==typeof n?'undefined':(0,f.default)(n)))return null;var a=n[y];return a&&'object'===('undefined'==typeof a?'undefined':(0,f.default)(a))?a:null},x=function t(n){var a=v(n);if(!a)return null;var r=a.id,i=a.ret;return null!=r&&'string'==typeof r&&a.hasOwnProperty('ret')?{id:r,ret:i}:null},_=function t(n){var a=v(n);if(!a)return null;var r=a.id,i=a.method,o=a.args;return null!=r&&'string'==typeof r&&'string'==typeof i&&Array.isArray(o)?{id:r,method:i,args:o}:null},k=n.client=function t(n,a){return function(t){return new c.default(function(r,i){var o=(0,b.default)(),s=function t(n){var i=n.data,s=n.origin,d=x(i);s===a&&d&&d.id===o&&(r(d.ret),window.removeEventListener('message',t))};window.addEventListener('message',s),n.postMessage({"solid-auth-client":{id:o,method:t.method,args:t.args}},a)})}},C=n.server=function t(n,a){return function(t){var r=function(){var r=(0,d.default)(o.default.mark(function r(i){var s,d,l,c;return o.default.wrap(function r(o){for(;1;)switch(o.prev=o.next){case 0:if(s=i.data,d=i.origin,l=_(s),l){o.next=4;break}return o.abrupt('return');case 4:if(d===a){o.next=7;break}return console.warn('SECURITY WARNING: solid-auth-client is listening for messages from '+a+','+(' but received a message from '+d+'.')),o.abrupt('return');case 7:return o.next=9,t(l);case 9:c=o.sent,c&&n.postMessage(w(c),a);case 11:case'end':return o.stop();}},r,void 0)}));return function t(n){return r.apply(this,arguments)}}(),i={start:function t(){return window.addEventListener('message',r),i},stop:function t(){return window.removeEventListener('message',r),i}};return i}},E=n.combineHandlers=function t(){for(var n=arguments.length,a=Array(n),r=0;r<n;r++)a[r]=arguments[r];return function(t){return a.map(function(n){return n(t)}).find(function(t){return null!==t})}}},function(t,n,a){'use strict';function r(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(n[a]=t[a]);return n.default=t,n}Object.defineProperty(n,'__esModule',{value:!0}),n.requiresAuth=n.login=void 0,a(39);var i=a(88),o=r(i),s=n.login=function t(n){return fetch(n,{method:'HEAD',credentials:'include'}).then(function(t){return t.headers.get('user')}).then(function(t){return t?{authType:'WebID-TLS',idp:n,webId:t}:null})},d=n.requiresAuth=function t(n){if(401!==n.status)return!1;var a=n.headers.get('www-authenticate');if(!a)return!1;var r=o.parse(a);return'WebID-TLS'===r.scheme}},function(t,n,a){'use strict';/*!
 * mime-types
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */function r(t){if(!t||'string'!=typeof t)return!1;var n=u.exec(t),a=n&&l[n[1].toLowerCase()];return a&&a.charset?a.charset:n&&f.test(n[1])&&'UTF-8'}function i(t){if(!t||'string'!=typeof t)return!1;var a=-1===t.indexOf('/')?n.lookup(t):t;if(!a)return!1;if(-1===a.indexOf('charset')){var r=n.charset(a);r&&(a+='; charset='+r.toLowerCase())}return a}function o(t){if(!t||'string'!=typeof t)return!1;var a=u.exec(t),r=a&&n.extensions[a[1].toLowerCase()];return r&&r.length&&r[0]}function s(t){if(!t||'string'!=typeof t)return!1;var a=c('x.'+t).toLowerCase().substr(1);return!!a&&(n.types[a]||!1)}function d(t,n){var a=['nginx','apache',void 0,'iana'];Object.keys(l).forEach(function r(o){var s=l[o],d=s.extensions;if(d&&d.length){t[o]=d;for(var c=0,i;c<d.length;c++){if(i=d[c],n[i]){var u=a.indexOf(l[n[i]].source),f=a.indexOf(s.source);if('application/octet-stream'!==n[i]&&(u>f||u===f&&'application/'===n[i].substr(0,12)))continue}n[i]=o}}})}var l=a(471),c=a(473).extname,u=/^\s*([^;\s]*)(?:;|\s|$)/,f=/^text\//i;n.charset=r,n.charsets={lookup:r},n.contentType=i,n.extension=o,n.extensions=Object.create(null),n.lookup=s,n.types=Object.create(null),d(n.extensions,n.types)},function(t,n,a){t.exports=a(254)},function(t,n,a){'use strict';(function(n){function r(t){console.log(t.slice(0,-1))}n.dump=r;var i=a(99),o=i.rdf;n.$rdf=o,o.log=i.log;var s=a(451);'undefined'!=typeof window&&(window.UI=i,window.panes=s),s.UI=i,n.require=function t(n){if('mashlib'===n)return s;throw new Error('Cannot require (this is a Mashlib-specific require stub)')},t.exports=s}).call(n,a(5))},function(t,n,a){(function(a,r){var i,o;/*!
 * async
 * https://github.com/caolan/async
 *
 * Copyright 2010-2014 Caolan McMahon
 * Released under the MIT license
 */(function(){function s(t){var n=!1;return function(){if(n)throw new Error('Callback was already called.');n=!0,t.apply(l,arguments)}}var d={},l,c;l=this,null!=l&&(c=l.async),d.noConflict=function(){return l.async=c,d};var u=Object.prototype.toString,f=Array.isArray||function(t){return'[object Array]'===u.call(t)},m=function(t,n){for(var a=0;a<t.length;a+=1)n(t[a],a,t)},h=function(t,n){if(t.map)return t.map(n);var r=[];return m(t,function(t,o,i){r.push(n(t,o,i))}),r},g=function(t,n,r){return t.reduce?t.reduce(n,r):(m(t,function(t,o,i){r=n(r,t,o,i)}),r)},b=function(t){if(Object.keys)return Object.keys(t);var n=[];for(var a in t)t.hasOwnProperty(a)&&n.push(a);return n};'undefined'!=typeof a&&a.nextTick?(d.nextTick=a.nextTick,d.setImmediate='undefined'==typeof r?d.nextTick:function(t){r(t)}):'function'==typeof r?(d.nextTick=function(t){r(t)},d.setImmediate=d.nextTick):(d.nextTick=function(t){setTimeout(t,0)},d.setImmediate=d.nextTick),d.each=function(t,n,a){function r(n){n?(a(n),a=function(){}):(i+=1,i>=t.length&&a())}if(a=a||function(){},!t.length)return a();var i=0;m(t,function(t){n(t,s(r))})},d.forEach=d.each,d.eachSeries=function(t,n,a){if(a=a||function(){},!t.length)return a();var r=0,i=function(){n(t[r],function(n){n?(a(n),a=function(){}):(r+=1,r>=t.length?a():i())})};i()},d.forEachSeries=d.eachSeries,d.eachLimit=function(t,n,a,r){var i=y(n);i.apply(null,[t,a,r])},d.forEachLimit=d.eachLimit;var y=function(t){return function(n,a,r){if(r=r||function(){},!n.length||0>=t)return r();var i=0,o=0,s=0;(function d(){if(i>=n.length)return r();for(;s<t&&o<n.length;)o+=1,s+=1,a(n[o-1],function(t){t?(r(t),r=function(){}):(i+=1,s-=1,i>=n.length?r():d())})})()}},w=function(t){return function(){var n=Array.prototype.slice.call(arguments);return t.apply(null,[d.each].concat(n))}},v=function(t,n){return function(){var a=Array.prototype.slice.call(arguments);return n.apply(null,[y(t)].concat(a))}},x=function(t){return function(){var n=Array.prototype.slice.call(arguments);return t.apply(null,[d.eachSeries].concat(n))}},_=function(t,n,a,r){if(n=h(n,function(t,n){return{index:n,value:t}}),!r)t(n,function(t,n){a(t.value,function(t){n(t)})});else{var i=[];t(n,function(t,n){a(t.value,function(a,r){i[t.index]=r,n(a)})},function(t){r(t,i)})}};d.map=w(_),d.mapSeries=x(_),d.mapLimit=function(t,n,a,r){return k(n)(t,a,r)};var k=function(t){return v(t,_)};d.reduce=function(t,n,a,r){d.eachSeries(t,function(t,r){a(n,t,function(t,a){n=a,r(t)})},function(t){r(t,n)})},d.inject=d.reduce,d.foldl=d.reduce,d.reduceRight=function(t,n,a,r){var i=h(t,function(t){return t}).reverse();d.reduce(i,n,a,r)},d.foldr=d.reduceRight;var C=function(t,n,a,r){var i=[];n=h(n,function(t,n){return{index:n,value:t}}),t(n,function(t,n){a(t.value,function(a){a&&i.push(t),n()})},function(t){r(h(i.sort(function(t,n){return t.index-n.index}),function(t){return t.value}))})};d.filter=w(C),d.filterSeries=x(C),d.select=d.filter,d.selectSeries=d.filterSeries;var E=function(t,n,a,r){var i=[];n=h(n,function(t,n){return{index:n,value:t}}),t(n,function(t,n){a(t.value,function(a){a||i.push(t),n()})},function(t){r(h(i.sort(function(t,n){return t.index-n.index}),function(t){return t.value}))})};d.reject=w(E),d.rejectSeries=x(E);var T=function(t,n,a,r){t(n,function(t,n){a(t,function(a){a?(r(t),r=function(){}):n()})},function(t){r()})};d.detect=w(T),d.detectSeries=x(T),d.some=function(t,n,a){d.each(t,function(t,r){n(t,function(t){t&&(a(!0),a=function(){}),r()})},function(t){a(!1)})},d.any=d.some,d.every=function(t,n,a){d.each(t,function(t,r){n(t,function(t){t||(a(!1),a=function(){}),r()})},function(t){a(!0)})},d.all=d.every,d.sortBy=function(t,n,a){d.map(t,function(t,a){n(t,function(n,r){n?a(n):a(null,{value:t,criteria:r})})},function(t,n){if(t)return a(t);var r=function(t,n){var r=t.criteria,a=n.criteria;return r<a?-1:r>a?1:0};a(null,h(n.sort(r),function(t){return t.value}))})},d.auto=function(t,n){n=n||function(){};var a=b(t),r=a.length;if(!r)return n();var i={},o=[],s=function(t){o.unshift(t)},l=function(t){for(var n=0;n<o.length;n+=1)if(o[n]===t)return void o.splice(n,1)},c=function(){r--,m(o.slice(0),function(t){t()})};s(function(){if(!r){var t=n;n=function(){},t(null,i)}}),m(a,function(a){var r=f(t[a])?t[a]:[t[a]],o=function(t){var r=Array.prototype.slice.call(arguments,1);if(1>=r.length&&(r=r[0]),t){var o={};m(b(i),function(t){o[t]=i[t]}),o[a]=r,n(t,o),n=function(){}}else i[a]=r,d.setImmediate(c)},u=r.slice(0,_Mathabs(r.length-1))||[],h=function(){return g(u,function(t,n){return t&&i.hasOwnProperty(n)},!0)&&!i.hasOwnProperty(a)};if(h())r[r.length-1](o,i);else{var y=function(){h()&&(l(y),r[r.length-1](o,i))};s(y)}})},d.retry=function(t,n,a){var r=5,i=[];'function'==typeof t&&(a=n,n=t,t=r),t=parseInt(t,10)||r;var o=function(r,o){for(var s=function(t,n){return function(a){t(function(t,r){a(!t||n,{err:t,result:r})},o)}};t;)i.push(s(n,!(t-=1)));d.series(i,function(t,n){n=n[n.length-1],(r||a)(n.err,n.result)})};return a?o():o},d.waterfall=function(t,n){if(n=n||function(){},!f(t)){var a=new Error('First argument to waterfall must be an array of functions');return n(a)}if(!t.length)return n();var r=function(t){return function(a){if(a)n.apply(null,arguments),n=function(){};else{var i=Array.prototype.slice.call(arguments,1),o=t.next();o?i.push(r(o)):i.push(n),d.setImmediate(function(){t.apply(null,i)})}}};r(d.iterator(t))()};var A=function(t,n,a){if(a=a||function(){},f(n))t.map(n,function(t,n){t&&t(function(t){var a=Array.prototype.slice.call(arguments,1);1>=a.length&&(a=a[0]),n.call(null,t,a)})},a);else{var r={};t.each(b(n),function(t,a){n[t](function(n){var i=Array.prototype.slice.call(arguments,1);1>=i.length&&(i=i[0]),r[t]=i,a(n)})},function(t){a(t,r)})}};d.parallel=function(t,n){A({map:d.map,each:d.each},t,n)},d.parallelLimit=function(t,n,a){A({map:k(n),each:y(n)},t,a)},d.series=function(t,n){if(n=n||function(){},f(t))d.mapSeries(t,function(t,n){t&&t(function(t){var a=Array.prototype.slice.call(arguments,1);1>=a.length&&(a=a[0]),n.call(null,t,a)})},n);else{var a={};d.eachSeries(b(t),function(n,r){t[n](function(t){var i=Array.prototype.slice.call(arguments,1);1>=i.length&&(i=i[0]),a[n]=i,r(t)})},function(t){n(t,a)})}},d.iterator=function(t){var n=function(a){var r=function(){return t.length&&t[a].apply(null,arguments),r.next()};return r.next=function(){return a<t.length-1?n(a+1):null},r};return n(0)},d.apply=function(t){var n=Array.prototype.slice.call(arguments,1);return function(){return t.apply(null,n.concat(Array.prototype.slice.call(arguments)))}};var S=function(t,n,a,i){var o=[];t(n,function(t,n){a(t,function(t,a){o=o.concat(a||[]),n(t)})},function(t){i(t,o)})};d.concat=w(S),d.concatSeries=x(S),d.whilst=function(t,n,a){t()?n(function(r){return r?a(r):void d.whilst(t,n,a)}):a()},d.doWhilst=function(t,n,a){t(function(r){if(r)return a(r);var i=Array.prototype.slice.call(arguments,1);n.apply(null,i)?d.doWhilst(t,n,a):a()})},d.until=function(t,n,a){t()?a():n(function(r){return r?a(r):void d.until(t,n,a)})},d.doUntil=function(t,n,a){t(function(r){if(r)return a(r);var i=Array.prototype.slice.call(arguments,1);n.apply(null,i)?a():d.doUntil(t,n,a)})},d.queue=function(t,n){function a(t,n,a,r){return t.started||(t.started=!0),f(n)||(n=[n]),0==n.length?d.setImmediate(function(){t.drain&&t.drain()}):void m(n,function(n){var i={data:n,callback:'function'==typeof r?r:null};a?t.tasks.unshift(i):t.tasks.push(i),t.saturated&&t.tasks.length===t.concurrency&&t.saturated(),d.setImmediate(t.process)})}n===void 0&&(n=1);var r=0,i={tasks:[],concurrency:n,saturated:null,empty:null,drain:null,started:!1,paused:!1,push:function(t,n){a(i,t,!1,n)},kill:function(){i.drain=null,i.tasks=[]},unshift:function(t,n){a(i,t,!0,n)},process:function(){if(!i.paused&&r<i.concurrency&&i.tasks.length){var n=i.tasks.shift();i.empty&&0===i.tasks.length&&i.empty(),r+=1;var a=function(){r-=1,n.callback&&n.callback.apply(n,arguments),i.drain&&0===i.tasks.length+r&&i.drain(),i.process()},o=s(a);t(n.data,o)}},length:function(){return i.tasks.length},running:function(){return r},idle:function(){return 0===i.tasks.length+r},pause:function(){!0===i.paused||(i.paused=!0)},resume:function(){if(!1!==i.paused){i.paused=!1;for(var t=1;t<=i.concurrency;t++)d.setImmediate(i.process)}}};return i},d.priorityQueue=function(t,n){function a(t,n){return t.priority-n.priority}function r(t,n,a){for(var r=-1,i=t.length-1,o;r<i;)o=r+(i-r+1>>>1),0<=a(n,t[o])?r=o:i=o-1;return r}function i(t,n,i,o){return t.started||(t.started=!0),f(n)||(n=[n]),0==n.length?d.setImmediate(function(){t.drain&&t.drain()}):void m(n,function(n){var s={data:n,priority:i,callback:'function'==typeof o?o:null};t.tasks.splice(r(t.tasks,s,a)+1,0,s),t.saturated&&t.tasks.length===t.concurrency&&t.saturated(),d.setImmediate(t.process)})};var o=d.queue(t,n);return o.push=function(t,n,a){i(o,t,n,a)},delete o.unshift,o},d.cargo=function(t,n){var a=!1,r=[],i={tasks:r,payload:n,saturated:null,empty:null,drain:null,drained:!0,push:function(t,a){f(t)||(t=[t]),m(t,function(t){r.push({data:t,callback:'function'==typeof a?a:null}),i.drained=!1,i.saturated&&r.length===n&&i.saturated()}),d.setImmediate(i.process)},process:function o(){if(!a){if(0===r.length)return i.drain&&!i.drained&&i.drain(),void(i.drained=!0);var s='number'==typeof n?r.splice(0,n):r.splice(0,r.length),d=h(s,function(t){return t.data});i.empty&&i.empty(),a=!0,t(d,function(){a=!1;var t=arguments;m(s,function(n){n.callback&&n.callback.apply(null,t)}),o()})}},length:function(){return r.length},running:function(){return a}};return i};var I=function(t){return function(n){var a=Array.prototype.slice.call(arguments,1);n.apply(null,a.concat([function(n){var a=Array.prototype.slice.call(arguments,1);'undefined'!=typeof console&&(n?console.error&&console.error(n):console[t]&&m(a,function(n){console[t](n)}))}]))}};d.log=I('log'),d.dir=I('dir'),d.memoize=function(t,n){var a={},r={};n=n||function(t){return t};var i=function(){var i=Array.prototype.slice.call(arguments),o=i.pop(),s=n.apply(null,i);s in a?d.nextTick(function(){o.apply(null,a[s])}):s in r?r[s].push(o):(r[s]=[o],t.apply(null,i.concat([function(){a[s]=arguments;var t=r[s];delete r[s];for(var n=0,i=t.length;n<i;n++)t[n].apply(null,arguments)}])))};return i.memo=a,i.unmemoized=t,i},d.unmemoize=function(t){return function(){return(t.unmemoized||t).apply(null,arguments)}},d.times=function(t,n,a){for(var r=[],o=0;o<t;o++)r.push(o);return d.map(r,n,a)},d.timesSeries=function(t,n,a){for(var r=[],o=0;o<t;o++)r.push(o);return d.mapSeries(r,n,a)},d.seq=function(){var t=arguments;return function(){var n=this,a=Array.prototype.slice.call(arguments),r=a.pop();d.reduce(t,a,function(t,a,r){a.apply(n,t.concat([function(){var t=arguments[0],n=Array.prototype.slice.call(arguments,1);r(t,n)}]))},function(t,a){r.apply(n,[t].concat(a))})}},d.compose=function(){return d.seq.apply(null,Array.prototype.reverse.call(arguments))};var N=function(t,n){var a=function(){var a=this,r=Array.prototype.slice.call(arguments),i=r.pop();return t(n,function(t,n){t.apply(a,r.concat([n]))},i)};if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return a.apply(this,r)}return a};d.applyEach=w(N),d.applyEachSeries=x(N),d.forever=function(t,n){function a(r){if(r){if(n)return n(r);throw r}t(a)}a()},'undefined'!=typeof t&&t.exports?t.exports=d:!0?(i=[],o=function(){return d}.apply(n,i),!(o!==void 0&&(t.exports=o))):l.async=d})()}).call(n,a(11),a(57).setImmediate)},function(t,n,a){(function(t,n){(function(t,a){'use strict';function r(t){'function'!=typeof t&&(t=new Function(''+t));for(var n=Array(arguments.length-1),a=0;a<n.length;a++)n[a]=arguments[a+1];var r={callback:t,args:n};return g[h]=r,v(h),h++}function i(t){delete g[t]}function o(t){var n=t.callback,a=t.args;switch(a.length){case 0:n();break;case 1:n(a[0]);break;case 2:n(a[0],a[1]);break;case 3:n(a[0],a[1],a[2]);break;default:n.apply(void 0,a);}}function s(t){if(b)setTimeout(s,0,t);else{var n=g[t];if(n){b=!0;try{o(n)}finally{i(t),b=!1}}}}function d(){v=function(t){n.nextTick(function(){s(t)})}}function l(){if(t.postMessage&&!t.importScripts){var n=!0,a=t.onmessage;return t.onmessage=function(){n=!1},t.postMessage('','*'),t.onmessage=a,n}}function c(){var n='setImmediate$'+Math.random()+'$',a=function(a){a.source===t&&'string'==typeof a.data&&0===a.data.indexOf(n)&&s(+a.data.slice(n.length))};t.addEventListener?t.addEventListener('message',a,!1):t.attachEvent('onmessage',a),v=function(a){t.postMessage(n+a,'*')}}function u(){var t=new MessageChannel;t.port1.onmessage=function(t){var n=t.data;s(n)},v=function(n){t.port2.postMessage(n)}}function f(){var t=y.documentElement;v=function(n){var a=y.createElement('script');a.onreadystatechange=function(){s(n),a.onreadystatechange=null,t.removeChild(a),a=null},t.appendChild(a)}}function m(){v=function(t){setTimeout(s,0,t)}}if(!t.setImmediate){var h=1,g={},b=!1,y=t.document,w=Object.getPrototypeOf&&Object.getPrototypeOf(t),v;w=w&&w.setTimeout?w:t,'[object process]'==={}.toString.call(t.process)?d():l()?c():t.MessageChannel?u():y&&'onreadystatechange'in y.createElement('script')?f():m(),w.setImmediate=r,w.clearImmediate=i}})('undefined'==typeof self?'undefined'==typeof t?this:t:self)}).call(n,a(5),a(11))},function(t,n){},function(t,n){(function(n){t.exports=n}).call(n,{})},function(t,n,a){function r(t){return a(i(t))}function i(t){var n=o[t];if(!(n+1))throw new Error('Cannot find module \''+t+'\'.');return n}var o={"./N3Lexer":101,"./N3Lexer.js":101,"./N3Parser":102,"./N3Parser.js":102,"./N3Store":152,"./N3Store.js":152,"./N3StreamParser":153,"./N3StreamParser.js":153,"./N3StreamWriter":159,"./N3StreamWriter.js":159,"./N3Util":103,"./N3Util.js":103,"./N3Writer":109,"./N3Writer.js":109};;;r.keys=function t(){return Object.keys(o)},r.resolve=i,t.exports=r,r.id=259},function(t,n,a){'use strict';function r(t){var n=t.length;if(0<n%4)throw new Error('Invalid string. Length must be a multiple of 4');return'='===t[n-2]?2:'='===t[n-1]?1:0}function o(t){return 3*t.length/4-r(t)}function s(t){var n=t.length,a,i,o,s,d;s=r(t),d=new m(3*n/4-s),i=0<s?n-4:n;var l=0;for(a=0;a<i;a+=4)o=f[t.charCodeAt(a)]<<18|f[t.charCodeAt(a+1)]<<12|f[t.charCodeAt(a+2)]<<6|f[t.charCodeAt(a+3)],d[l++]=255&o>>16,d[l++]=255&o>>8,d[l++]=255&o;return 2===s?(o=f[t.charCodeAt(a)]<<2|f[t.charCodeAt(a+1)]>>4,d[l++]=255&o):1===s&&(o=f[t.charCodeAt(a)]<<10|f[t.charCodeAt(a+1)]<<4|f[t.charCodeAt(a+2)]>>2,d[l++]=255&o>>8,d[l++]=255&o),d}function d(t){return u[63&t>>18]+u[63&t>>12]+u[63&t>>6]+u[63&t]}function l(t,n,a){for(var r=[],o=n,i;o<a;o+=3)i=(16711680&t[o]<<16)+(65280&t[o+1]<<8)+(255&t[o+2]),r.push(d(i));return r.join('')}function c(t){for(var n=t.length,a=n%3,r='',o=[],s=16383,d=0,i=n-a,c;d<i;d+=s)o.push(l(t,d,d+s>i?i:d+s));return 1==a?(c=t[n-1],r+=u[c>>2],r+=u[63&c<<4],r+='=='):2==a&&(c=(t[n-2]<<8)+t[n-1],r+=u[c>>10],r+=u[63&c>>4],r+=u[63&c<<2],r+='='),o.push(r),o.join('')}n.byteLength=o,n.toByteArray=s,n.fromByteArray=c;for(var u=[],f=[],m='undefined'==typeof Uint8Array?Array:Uint8Array,h='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/',g=0,i=h.length;g<i;++g)u[g]=h[g],f[h.charCodeAt(g)]=g;f[45]=62,f[95]=63},function(t,n){n.read=function(t,n,a,r,o){var l=8*o-r-1,c=(1<<l)-1,u=c>>1,f=-7,h=a?o-1:0,i=a?-1:1,d=t[n+h],s,g;for(h+=i,s=d&(1<<-f)-1,d>>=-f,f+=l;0<f;s=256*s+t[n+h],h+=i,f-=8);for(g=s&(1<<-f)-1,s>>=-f,f+=r;0<f;g=256*g+t[n+h],h+=i,f-=8);if(0===s)s=1-u;else{if(s===c)return g?NaN:(d?-1:1)*Infinity;g+=_Mathpow(2,r),s-=u}return(d?-1:1)*g*_Mathpow(2,s-r)},n.write=function(t,n,a,r,o,l){var u=8*l-o-1,f=(1<<u)-1,h=f>>1,g=23===o?5.960464477539063e-8-6.617444900424222e-24:0,b=r?0:l-1,i=r?1:-1,d=0>n||0===n&&0>1/n?1:0,s,y,m;for(n=_Mathabs(n),isNaN(n)||n===Infinity?(y=isNaN(n)?1:0,s=f):(s=_Mathfloor(_Mathlog(n)/_MathLN),1>n*(m=_Mathpow(2,-s))&&(s--,m*=2),n+=1<=s+h?g/m:g*_Mathpow(2,1-h),2<=n*m&&(s++,m/=2),s+h>=f?(y=0,s=f):1<=s+h?(y=(n*m-1)*_Mathpow(2,o),s+=h):(y=n*_Mathpow(2,h-1)*_Mathpow(2,o),s=0));8<=o;t[a+b]=255&y,b+=i,y/=256,o-=8);for(s=s<<o|y,u+=o;0<u;t[a+b]=255&s,b+=i,s/=256,u-=8);t[a+b-i]|=128*d}},function(t,n){},function(t,n,a){'use strict';function r(t,n){if(!(t instanceof n))throw new TypeError('Cannot call a class as a function')}function o(t,n,a){t.copy(n,a)}var s=a(3).Buffer,i=a(264);t.exports=function(){function t(){r(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function t(n){var a={data:n,next:null};0<this.length?this.tail.next=a:this.head=a,this.tail=a,++this.length},t.prototype.unshift=function t(n){var a={data:n,next:this.head};0===this.length&&(this.tail=a),this.head=a,++this.length},t.prototype.shift=function t(){if(0!==this.length){var n=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,n}},t.prototype.clear=function t(){this.head=this.tail=null,this.length=0},t.prototype.join=function t(n){if(0===this.length)return'';for(var a=this.head,r=''+a.data;a=a.next;)r+=n+a.data;return r},t.prototype.concat=function t(a){if(0===this.length)return s.alloc(0);if(1===this.length)return this.head.data;for(var n=s.allocUnsafe(a>>>0),r=this.head,d=0;r;)o(r.data,n,d),d+=r.data.length,r=r.next;return n},t}(),i&&i.inspect&&i.inspect.custom&&(t.exports.prototype[i.inspect.custom]=function(){var t=i.inspect({length:this.length});return this.constructor.name+' '+t})},function(t,n){},function(t,n,a){(function(n){function a(t,n){function a(){if(!i){if(r('throwDeprecation'))throw new Error(n);else r('traceDeprecation')?console.trace(n):console.warn(n);i=!0}return t.apply(this,arguments)}if(r('noDeprecation'))return t;var i=!1;return a}function r(t){try{if(!n.localStorage)return!1}catch(t){return!1}var a=n.localStorage[t];return null!=a&&'true'===(a+'').toLowerCase()}t.exports=a}).call(n,a(5))},function(t,n,a){'use strict';function r(t){return this instanceof r?void i.call(this,t):new r(t)}t.exports=r;var i=a(158),o=a(58);o.inherits=a(0),o.inherits(r,i),r.prototype._transform=function(t,n,a){a(null,t)}},function(t,n,a){t.exports=a(106)},function(t,n,a){t.exports=a(43)},function(t,n,a){t.exports=a(105).Transform},function(t,n,a){t.exports=a(105).PassThrough},function(t,n){t.exports=function t(n){return n&&'object'==typeof n&&'function'==typeof n.copy&&'function'==typeof n.fill&&'function'==typeof n.readUInt8}},function(t,n){t.exports='function'==typeof Object.create?function t(n,a){n.super_=a,n.prototype=Object.create(a.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}})}:function t(n,a){n.super_=a;var r=function(){};r.prototype=a.prototype,n.prototype=new r,n.prototype.constructor=n}},function(t,n,a){'use strict';function r(t,n){if(!(t instanceof n))throw new TypeError('Cannot call a class as a function')}function i(t,n){if(!t)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return n&&('object'==typeof n||'function'==typeof n)?n:t}function o(t,n){if('function'!=typeof n&&null!==n)throw new TypeError('Super expression must either be null or a function, not '+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}var s=function(){function t(t,n){for(var a=0,r;a<n.length;a++)r=n[a],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}return function(n,a,r){return a&&t(n.prototype,a),r&&t(n,r),n}}(),d=a(17),l=function(t){function n(){r(this,n);var t=i(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return t.termType='DefaultGraph',t.value='',t}return o(n,t),s(n,[{key:'toCanonical',value:function t(){return this.value}}]),n}(d);t.exports=l},function(t,n,a){'use strict';function r(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(n[a]=t[a]);return n.default=t,n}function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,'__esModule',{value:!0}),n.logout=n.currentSession=n.popupLogin=n.login=n.fetch=void 0;var o=a(35),s=i(o),d=a(6),l=i(d),c=a(7),u=i(c),f=function(){var t=(0,u.default)(l.default.mark(function t(n,a){var r;return l.default.wrap(function t(i){for(;1;)switch(i.prev=i.next){case 0:if(0!==a.length){i.next=2;break}return i.abrupt('return',null);case 2:return i.prev=2,i.next=5,a[0]();case 5:if(r=i.sent,!r){i.next=8;break}return i.abrupt('return',(0,v.saveSession)(n)(r));case 8:i.next=13;break;case 10:i.prev=10,i.t0=i['catch'](2),console.error(i.t0);case 13:return i.abrupt('return',f(n,a.slice(1)));case 14:case'end':return i.stop();}},t,this,[[2,10]])}));return function n(a,r){return t.apply(this,arguments)}}(),m=n.login=function(){var t=(0,u.default)(l.default.mark(function t(n,a){var r,i;return l.default.wrap(function t(o){for(;1;)switch(o.prev=o.next){case 0:return a=(0,s.default)({},A(),a),o.next=3,C.login(n);case 3:if(r=o.sent,!r){o.next=6;break}return o.abrupt('return',(0,v.saveSession)(a.storage)(r));case 6:return o.next=8,T.login(n,a);case 8:return i=o.sent,o.abrupt('return',i);case 10:case'end':return o.stop();}},t,this)}));return function n(a,r){return t.apply(this,arguments)}}(),h=n.popupLogin=function(){var t=(0,u.default)(l.default.mark(function t(n){var a,r;return l.default.wrap(function t(i){for(;1;)switch(i.prev=i.next){case 0:if(n.popupUri){i.next=2;break}throw new Error('Must provide options.popupUri');case 2:return n.callbackUri||(n.callbackUri=n.popupUri),n=(0,s.default)({},A(),n),a=(0,w.openIdpSelector)(n),i.next=7,(0,w.startPopupServer)(n.storage,a,n);case 7:return r=i.sent,i.abrupt('return',r);case 9:case'end':return i.stop();}},t,this)}));return function n(a){return t.apply(this,arguments)}}(),g=n.currentSession=function(){var t=(0,u.default)(l.default.mark(function t(){var n=0<arguments.length&&arguments[0]!==void 0?arguments[0]:(0,x.defaultStorage)(),a;return l.default.wrap(function t(r){for(;1;)switch(r.prev=r.next){case 0:return r.next=2,(0,v.getSession)(n);case 2:if(a=r.sent,!a){r.next=5;break}return r.abrupt('return',a);case 5:return r.abrupt('return',f(n,[T.currentSession.bind(null,n)]));case 6:case'end':return r.stop();}},t,this)}));return function n(){return t.apply(this,arguments)}}(),b=n.logout=function(){var t=(0,u.default)(l.default.mark(function t(){var n=0<arguments.length&&arguments[0]!==void 0?arguments[0]:(0,x.defaultStorage)(),a;return l.default.wrap(function t(r){for(;1;)switch(r.prev=r.next){case 0:return r.next=2,(0,v.getSession)(n);case 2:if(a=r.sent,a){r.next=5;break}return r.abrupt('return');case 5:r.t0=a.authType,r.next='WebID-OIDC'===r.t0?8:'WebID-TLS'===r.t0?18:18;break;case 8:return r.prev=8,r.next=11,T.logout(n);case 11:r.next=17;break;case 13:r.prev=13,r.t1=r['catch'](8),console.warn('Error logging out:'),console.error(r.t1);case 17:return r.abrupt('break',19);case 18:return r.abrupt('break',19);case 19:return r.abrupt('return',(0,v.clearSession)(n));case 20:case'end':return r.stop();}},t,this,[[8,13]])}));return function n(){return t.apply(this,arguments)}}(),y=a(300),w=a(342),v=a(126),x=a(87),_=a(133),k=a(207),C=r(k),E=a(129),T=r(E),A=function t(){var n=(0,_.currentUrlNoParams)();return{callbackUri:n?n.split('#')[0]:null,popupUri:null,storage:(0,x.defaultStorage)()}},S=n.fetch=function t(n,a){return(0,y.authnFetch)((0,x.defaultStorage)())(n,a)}},function(t,n,a){t.exports={default:a(276),__esModule:!0}},function(t,n,a){a(277),t.exports=a(18).Object.assign},function(t,n,a){var r=a(36);r(r.S+r.F,'Object',{assign:a(278)})},function(t,n,a){'use strict';var r=a(81),i=a(122),o=a(83),s=a(123),d=a(165),l=Object.assign;t.exports=!l||a(61)(function(){var t={},n={},a=Symbol(),r='abcdefghijklmnopqrst';return t[a]=7,r.split('').forEach(function(t){n[t]=t}),7!=l({},t)[a]||Object.keys(l({},n)).join('')!=r})?function t(n,a){for(var l=s(n),c=arguments.length,u=1,f=i.f,m=o.f;c>u;)for(var h=d(arguments[u++]),g=f?r(h).concat(f(h)):r(h),b=g.length,y=0,w;b>y;)m.call(h,w=g[y++])&&(l[w]=h[w]);return l}:l},function(t,n,a){var r=a(54),i=a(117),o=a(280);t.exports=function(t){return function(n,a,s){var d=r(n),l=i(d.length),c=o(s,l),u;if(t&&a!=a){for(;l>c;)if(u=d[c++],u!=u)return!0;}else for(;l>c;c++)if((t||c in d)&&d[c]===a)return t||c||0;return!t&&-1}}},function(t,n,a){var r=a(118),i=_Mathmax,o=_Mathmin;t.exports=function(t,n){return t=r(t),0>t?i(t+n,0):o(t,n)}},function(t,n,a){var r=function(){return this}()||Function('return this')(),i=r.regeneratorRuntime&&0<=Object.getOwnPropertyNames(r).indexOf('regeneratorRuntime'),o=i&&r.regeneratorRuntime;if(r.regeneratorRuntime=void 0,t.exports=a(282),i)r.regeneratorRuntime=o;else try{delete r.regeneratorRuntime}catch(t){r.regeneratorRuntime=void 0}},function(t,n){!function(n){'use strict';function a(t,n,a,r){var o=n&&n.prototype instanceof i?n:i,s=Object.create(o.prototype),d=new h(r||[]);return s._invoke=c(t,a,d),s}function r(t,n,a){try{return{type:'normal',arg:t.call(n,a)}}catch(t){return{type:'throw',arg:t}}}function i(){}function o(){}function s(){}function d(t){['next','throw','return'].forEach(function(n){t[n]=function(t){return this._invoke(n,t)}})}function l(t){function n(a,i,o,s){var d=r(t[a],t,i);if('throw'===d.type)s(d.arg);else{var l=d.arg,c=l.value;return c&&'object'==typeof c&&w.call(c,'__await')?Promise.resolve(c.__await).then(function(t){n('next',t,o,s)},function(t){n('throw',t,o,s)}):Promise.resolve(c).then(function(t){l.value=t,o(l)},s)}}function a(t,a){function r(){return new Promise(function(r,i){n(t,a,r,i)})}return i=i?i.then(r,r):r()}var i;this._invoke=a}function c(t,n,a){var i=A;return function o(s,d){if(i==I)throw new Error('Generator is already running');if(i==N){if('throw'===s)throw d;return b()}for(a.method=s,a.arg=d;!0;){var l=a.delegate;if(l){var c=u(l,a);if(c){if(c===j)continue;return c}}if('next'===a.method)a.sent=a._sent=a.arg;else if('throw'===a.method){if(i==A)throw i=N,a.arg;a.dispatchException(a.arg)}else'return'===a.method&&a.abrupt('return',a.arg);i=I;var f=r(t,n,a);if('normal'===f.type){if(i=a.done?N:S,f.arg===j)continue;return{value:f.arg,done:a.done}}'throw'===f.type&&(i=N,a.method='throw',a.arg=f.arg)}}}function u(t,n){var a=t.iterator[n.method];if(void 0===a){if(n.delegate=null,'throw'===n.method){if(t.iterator.return&&(n.method='return',n.arg=void 0,u(t,n),'throw'===n.method))return j;n.method='throw',n.arg=new TypeError('The iterator does not provide a \'throw\' method')}return j}var i=r(a,t.iterator,n.arg);if('throw'===i.type)return n.method='throw',n.arg=i.arg,n.delegate=null,j;var o=i.arg;if(!o)return n.method='throw',n.arg=new TypeError('iterator result is not an object'),n.delegate=null,j;if(o.done)n[t.resultName]=o.value,n.next=t.nextLoc,'return'!==n.method&&(n.method='next',n.arg=void 0);else return o;return n.delegate=null,j}function f(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function m(t){var n=t.completion||{};n.type='normal',delete n.arg,t.completion=n}function h(t){this.tryEntries=[{tryLoc:'root'}],t.forEach(f,this),this.reset(!0)}function g(t){if(t){var n=t[x];if(n)return n.call(t);if('function'==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,r=function n(){for(;++a<t.length;)if(w.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=void 0,n.done=!0,n};return r.next=r}}return{next:b}}function b(){return{value:void 0,done:!0}}var y=Object.prototype,w=y.hasOwnProperty,v='function'==typeof Symbol?Symbol:{},x=v.iterator||'@@iterator',_=v.asyncIterator||'@@asyncIterator',k=v.toStringTag||'@@toStringTag',C='object'==typeof t,E=n.regeneratorRuntime,T;if(E)return void(C&&(t.exports=E));E=n.regeneratorRuntime=C?t.exports:{},E.wrap=a;var A='suspendedStart',S='suspendedYield',I='executing',N='completed',j={},L={};L[x]=function(){return this};var R=Object.getPrototypeOf,M=R&&R(R(g([])));M&&M!==y&&w.call(M,x)&&(L=M);var D=s.prototype=i.prototype=Object.create(L);o.prototype=D.constructor=s,s.constructor=o,s[k]=o.displayName='GeneratorFunction',E.isGeneratorFunction=function(t){var n='function'==typeof t&&t.constructor;return!!n&&(n===o||'GeneratorFunction'===(n.displayName||n.name))},E.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,!(k in t)&&(t[k]='GeneratorFunction')),t.prototype=Object.create(D),t},E.awrap=function(t){return{__await:t}},d(l.prototype),l.prototype[_]=function(){return this},E.AsyncIterator=l,E.async=function(t,n,r,i){var o=new l(a(t,n,r,i));return E.isGeneratorFunction(n)?o:o.next().then(function(t){return t.done?t.value:o.next()})},d(D),D[k]='Generator',D[x]=function(){return this},D.toString=function(){return'[object Generator]'},E.keys=function(t){var n=[];for(var a in t)n.push(a);return n.reverse(),function a(){for(;n.length;){var r=n.pop();if(r in t)return a.value=r,a.done=!1,a}return a.done=!0,a}},E.values=g,h.prototype={constructor:h,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method='next',this.arg=void 0,this.tryEntries.forEach(m),!t)for(var n in this)'t'===n.charAt(0)&&w.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0],n=t.completion;if('throw'===n.type)throw n.arg;return this.rval},dispatchException:function(t){function n(n,r){return o.type='throw',o.arg=t,a.next=n,r&&(a.method='next',a.arg=void 0),!!r}if(this.done)throw t;for(var a=this,r=this.tryEntries.length-1;0<=r;--r){var i=this.tryEntries[r],o=i.completion;if('root'===i.tryLoc)return n('end');if(i.tryLoc<=this.prev){var s=w.call(i,'catchLoc'),d=w.call(i,'finallyLoc');if(s&&d){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);}else if(!d)throw new Error('try statement without catch or finally');else if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}},abrupt:function(t,n){for(var a=this.tryEntries.length-1,r;0<=a;--a)if(r=this.tryEntries[a],r.tryLoc<=this.prev&&w.call(r,'finallyLoc')&&this.prev<r.finallyLoc){var i=r;break}i&&('break'===t||'continue'===t)&&i.tryLoc<=n&&n<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=n,i?(this.method='next',this.next=i.finallyLoc,j):this.complete(o)},complete:function(t,n){if('throw'===t.type)throw t.arg;return'break'===t.type||'continue'===t.type?this.next=t.arg:'return'===t.type?(this.rval=this.arg=t.arg,this.method='return',this.next='end'):'normal'===t.type&&n&&(this.next=n),j},finish:function(t){for(var n=this.tryEntries.length-1,a;0<=n;--n)if(a=this.tryEntries[n],a.finallyLoc===t)return this.complete(a.completion,a.afterLoc),m(a),j},catch:function(t){for(var n=this.tryEntries.length-1,a;0<=n;--n)if(a=this.tryEntries[n],a.tryLoc===t){var r=a.completion;if('throw'===r.type){var i=r.arg;m(a)}return i}throw new Error('illegal catch attempt')},delegateYield:function(t,n,a){return this.delegate={iterator:g(t),resultName:n,nextLoc:a},'next'===this.method&&(this.arg=void 0),j}}}(function(){return this}()||Function('return this')())},function(t,n,a){a(166),a(124),a(171),a(291),a(298),a(299),t.exports=a(18).Promise},function(t,n,a){var r=a(118),o=a(116);t.exports=function(t){return function(n,d){var c=o(n)+'',s=r(d),i=c.length,l,a;return 0>s||s>=i?t?'':void 0:(l=c.charCodeAt(s),55296>l||56319<l||s+1===i||56320>(a=c.charCodeAt(s+1))||57343<a?t?c.charAt(s):l:t?c.slice(s,s+2):(l-55296<<10)+(a-56320)+65536)}}},function(t,n,a){'use strict';var r=a(169),i=a(62),o=a(85),s={};a(44)(s,a(13)('iterator'),function(){return this}),t.exports=function(t,n,a){t.prototype=r(s,{next:i(1,a)}),o(t,n+' Iterator')}},function(t,n,a){var r=a(33),o=a(37),s=a(81);t.exports=a(38)?Object.defineProperties:function t(n,a){o(n);for(var d=s(a),l=d.length,c=0,i;l>c;)r.f(n,i=d[c++],a[i]);return n}},function(t,n,a){var r=a(46),i=a(123),o=a(119)('IE_PROTO'),s=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),r(t,o)?t[o]:'function'==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?s:null}},function(t,n,a){'use strict';var r=a(289),i=a(290),o=a(64),s=a(54);t.exports=a(167)(Array,'Array',function(t,n){this._t=s(t),this._i=0,this._k=n},function(){var t=this._t,n=this._k,a=this._i++;return!t||a>=t.length?(this._t=void 0,i(1)):'keys'==n?i(0,a):'values'==n?i(0,t[a]):i(0,[a,t[a]])},'values'),o.Arguments=o.Array,r('keys'),r('values'),r('entries')},function(t,n){t.exports=function(){}},function(t,n){t.exports=function(t,n){return{value:n,done:!!t}}},function(t,n,a){'use strict';var r=a(84),i=a(12),o=a(60),s=a(172),d=a(36),l=a(45),c=a(80),u=a(292),f=a(293),m=a(176),h=a(177).set,g=a(295)(),b=a(125),y=a(178),w=a(179),v='Promise',x=i.TypeError,_=i.process,k=i[v],C='process'==s(_),E=function(){},T=P=b.f,A=!!function(){try{var t=k.resolve(1),n=(t.constructor={})[a(13)('species')]=function(t){t(E,E)};return(C||'function'==typeof PromiseRejectionEvent)&&t.then(E)instanceof n}catch(t){}}(),S=function(t){var n;return l(t)&&'function'==typeof(n=t.then)&&n},I=function(t,n){if(!t._n){t._n=!0;var a=t._c;g(function(){for(var r=t._v,o=1==t._s,s=0,i=function(n){var a=o?n.ok:n.fail,i=n.resolve,s=n.reject,d=n.domain,l,c;try{a?(!o&&(2==t._h&&L(t),t._h=1),!0===a?l=r:(d&&d.enter(),l=a(r),d&&d.exit()),l===n.promise?s(x('Promise-chain cycle')):(c=S(l))?c.call(l,i,s):i(l)):s(r)}catch(t){s(t)}};a.length>s;)i(a[s++]);t._c=[],t._n=!1,n&&!t._h&&N(t)})}},N=function(t){h.call(i,function(){var n=t._v,a=j(t),r,o,s;if(a&&(r=y(function(){C?_.emit('unhandledRejection',n,t):(o=i.onunhandledrejection)?o({promise:t,reason:n}):(s=i.console)&&s.error&&s.error('Unhandled promise rejection',n)}),t._h=C||j(t)?2:1),t._a=void 0,a&&r.e)throw r.v})},j=function(t){return 1!==t._h&&0===(t._a||t._c).length},L=function(t){h.call(i,function(){var n;C?_.emit('rejectionHandled',t):(n=i.onrejectionhandled)&&n({promise:t,reason:t._v})})},R=function(t){var n=this;n._d||(n._d=!0,n=n._w||n,n._v=t,n._s=2,!n._a&&(n._a=n._c.slice()),I(n,!0))},M=function(t){var n=this,a;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw x('Promise can\'t be resolved itself');(a=S(t))?g(function(){var r={_w:n,_d:!1};try{a.call(t,o(M,r,1),o(R,r,1))}catch(t){R.call(r,t)}}):(n._v=t,n._s=1,I(n,!1))}catch(t){R.call({_w:n,_d:!1},t)}}},D,P,O,B;A||(k=function t(n){u(this,k,v,'_h'),c(n),D.call(this);try{n(o(M,this,1),o(R,this,1))}catch(t){R.call(this,t)}},D=function t(n){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},D.prototype=a(296)(k.prototype,{then:function t(n,a){var r=T(m(this,k));return r.ok='function'!=typeof n||n,r.fail='function'==typeof a&&a,r.domain=C?_.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&I(this,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),O=function(){var t=new D;this.promise=t,this.resolve=o(M,t,1),this.reject=o(R,t,1)},b.f=T=function(t){return t===k||t===B?new O(t):P(t)}),d(d.G+d.W+d.F*!A,{Promise:k}),a(85)(k,v),a(297)(v),B=a(18)[v],d(d.S+d.F*!A,v,{reject:function t(n){var a=T(this),r=a.reject;return r(n),a.promise}}),d(d.S+d.F*(r||!A),v,{resolve:function t(n){return w(r&&this===B?k:this,n)}}),d(d.S+d.F*!(A&&a(180)(function(t){k.all(t)['catch'](E)})),v,{all:function t(n){var a=this,r=T(a),i=r.resolve,o=r.reject,s=y(function(){var t=[],r=0,s=1;f(n,!1,function(n){var d=r++,l=!1;t.push(void 0),s++,a.resolve(n).then(function(n){l||(l=!0,t[d]=n,--s||i(t))},o)}),--s||i(t)});return s.e&&o(s.v),r.promise},race:function t(n){var a=this,r=T(a),i=r.reject,o=y(function(){f(n,!1,function(t){a.resolve(t).then(r.resolve,i)})});return o.e&&i(o.v),r.promise}})},function(t,n){t.exports=function(t,n,a,r){if(!(t instanceof n)||r!==void 0&&r in t)throw TypeError(a+': incorrect invocation!');return t}},function(t,n,a){var r=a(60),i=a(173),o=a(174),s=a(37),d=a(117),l=a(175),c={},u={},n=t.exports=function(t,n,a,m,h){var g=h?function(){return t}:l(t),b=r(a,m,n?2:1),f=0,y,w,v,x;if('function'!=typeof g)throw TypeError(t+' is not iterable!');if(o(g)){for(y=d(t.length);y>f;f++)if(x=n?b(s(w=t[f])[0],w[1]):b(t[f]),x===c||x===u)return x;}else for(v=g.call(t);!(w=v.next()).done;)if(x=i(v,b,w.value,n),x===c||x===u)return x};n.BREAK=c,n.RETURN=u},function(t,n){t.exports=function(t,n,a){var r=a===void 0;switch(n.length){case 0:return r?t():t.call(a);case 1:return r?t(n[0]):t.call(a,n[0]);case 2:return r?t(n[0],n[1]):t.call(a,n[0],n[1]);case 3:return r?t(n[0],n[1],n[2]):t.call(a,n[0],n[1],n[2]);case 4:return r?t(n[0],n[1],n[2],n[3]):t.call(a,n[0],n[1],n[2],n[3]);}return t.apply(a,n)}},function(t,n,a){var r=a(12),i=a(177).set,o=r.MutationObserver||r.WebKitMutationObserver,s=r.process,d=r.Promise,l='process'==a(63)(s);t.exports=function(){var t=function(){var t,r;for(l&&(t=s.domain)&&t.exit();n;){r=n.fn,n=n.next;try{r()}catch(t){throw n?c():a=void 0,t}}a=void 0,t&&t.enter()},n,a,c;if(l)c=function(){s.nextTick(t)};else if(o&&!(r.navigator&&r.navigator.standalone)){var u=!0,f=document.createTextNode('');new o(t).observe(f,{characterData:!0}),c=function(){f.data=u=!u}}else if(d&&d.resolve){var m=d.resolve();c=function(){m.then(t)}}else c=function(){i.call(r,t)};return function(t){var r={fn:t,next:void 0};a&&(a.next=r),n||(n=r,c()),a=r}}},function(t,n,a){var r=a(44);t.exports=function(t,n,a){for(var i in n)a&&t[i]?t[i]=n[i]:r(t,i,n[i]);return t}},function(t,n,a){'use strict';var r=a(12),i=a(18),o=a(33),s=a(38),d=a(13)('species');t.exports=function(t){var n='function'==typeof i[t]?i[t]:r[t];s&&n&&!n[d]&&o.f(n,d,{configurable:!0,get:function(){return this}})}},function(t,n,a){'use strict';var r=a(36),i=a(18),o=a(12),s=a(176),d=a(179);r(r.P+r.R,'Promise',{finally:function(t){var n=s(this,i.Promise||o.Promise),a='function'==typeof t;return this.then(a?function(a){return d(n,t()).then(function(){return a})}:t,a?function(a){return d(n,t()).then(function(){throw a})}:t)}})},function(t,n,a){'use strict';var r=a(36),i=a(125),o=a(178);r(r.S,'Promise',{try:function(t){var n=i.f(this),a=o(t);return(a.e?n.reject:n.resolve)(a.v),n.promise}})},function(t,n,a){'use strict';function r(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(n[a]=t[a]);return n.default=t,n}function i(t){return t&&t.__esModule?t:{default:t}}function o(t){var n=this;return function(){var a=(0,u.default)(l.default.mark(function a(r,i){var o,d,c,u;return l.default.wrap(function n(a){for(;1;)switch(a.prev=a.next){case 0:return i=i||{},a.next=3,(0,m.getSession)(t);case 3:return o=a.sent,a.next=6,s(t)(r);case 6:if(d=a.sent,!(o&&d)){a.next=9;break}return a.abrupt('return',b(o,r,i));case 9:return a.next=11,fetch(r,i);case 11:if(c=a.sent,401!==c.status){a.next=20;break}return a.next=15,(0,f.updateHostFromResponse)(t)(c);case 15:return a.next=17,s(t)(r);case 17:if(u=a.sent,!(o&&u)){a.next=20;break}return a.abrupt('return',b(o,r,i));case 20:return a.abrupt('return',c);case 21:case'end':return a.stop();}},a,n)}));return function(t,n){return a.apply(this,arguments)}}()}function s(t){var n=this;return function(){var a=(0,u.default)(l.default.mark(function a(r){var i,o;return l.default.wrap(function n(a){for(;1;)switch(a.prev=a.next){case 0:return a.next=2,(0,m.getSession)(t);case 2:if(i=a.sent,i){a.next=5;break}return a.abrupt('return',!1);case 5:return a.next=7,(0,f.getHost)(t)(r);case 7:return o=a.sent,a.abrupt('return',null!=o&&i.authType===o.authType);case 9:case'end':return a.stop();}},a,n)}));return function(t){return a.apply(this,arguments)}}()}Object.defineProperty(n,'__esModule',{value:!0});var d=a(6),l=i(d),c=a(7),u=i(c);n.authnFetch=o,a(39);var f=a(301),m=a(126),h=a(129),g=r(h),b=function(){var t=(0,u.default)(l.default.mark(function t(n,a,r){return l.default.wrap(function t(i){for(;1;)switch(i.prev=i.next){case 0:i.t0=n.authType,i.next='WebID-OIDC'===i.t0?3:'WebID-TLS'===i.t0?4:4;break;case 3:return i.abrupt('return',g.fetchWithCredentials(n)(a,r));case 4:return i.abrupt('return',fetch(a,r));case 5:case'end':return i.stop();}},t,void 0)}));return function n(a,r,i){return t.apply(this,arguments)}}()},function(t,n,a){'use strict';function r(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(n[a]=t[a]);return n.default=t,n}function i(t){return t&&t.__esModule?t:{default:t}}function o(t){var n=this;return function(){var a=(0,b.default)(h.default.mark(function a(r){var i,o,s,d;return h.default.wrap(function n(a){for(;1;)switch(a.prev=a.next){case 0:return i=C(r),a.next=3,(0,y.getSession)(t);case 3:if(o=a.sent,!(o&&C(o.idp)===i)){a.next=6;break}return a.abrupt('return',{url:i,authType:o.authType});case 6:return a.next=8,(0,w.getData)(t);case 8:if(s=a.sent,d=s.hosts,d){a.next=12;break}return a.abrupt('return',null);case 12:return a.abrupt('return',d[i]||null);case 13:case'end':return a.stop();}},a,n)}));return function(t){return a.apply(this,arguments)}}()}function s(t){var n=this;return function(){var a=(0,b.default)(h.default.mark(function a(r){var i=r.url,o=r.authType;return h.default.wrap(function n(a){for(;1;)switch(a.prev=a.next){case 0:return a.next=2,(0,w.updateStorage)(t,function(t){return(0,f.default)({},t,{hosts:(0,f.default)({},t.hosts,(0,c.default)({},i,{authType:o}))})});case 2:return a.abrupt('return',{url:i,authType:o});case 3:case'end':return a.stop();}},a,n)}));return function(t){return a.apply(this,arguments)}}()}function d(t){var n=this;return function(){var a=(0,b.default)(h.default.mark(function a(r){var i,o;return h.default.wrap(function n(a){for(;1;)switch(a.prev=a.next){case 0:if(i=void 0,i=x.requiresAuth(r)?'WebID-OIDC':k.requiresAuth(r)?'WebID-TLS':null,o=C(r.url),!i){a.next=6;break}return a.next=6,s(t)({url:o,authType:i});case 6:case'end':return a.stop();}},a,n)}));return function(t){return a.apply(this,arguments)}}()}Object.defineProperty(n,'__esModule',{value:!0}),n.hostNameFromRequestInfo=void 0;var l=a(86),c=i(l),u=a(35),f=i(u),m=a(6),h=i(m),g=a(7),b=i(g);n.getHost=o,n.saveHost=s,n.updateHostFromResponse=d;var y=a(126),w=a(87),v=a(129),x=r(v),_=a(207),k=r(_),C=n.hostNameFromRequestInfo=function t(n){var a=n instanceof URL?n:n instanceof Request?new URL(n.url):new URL(n);return a.host}},function(t,n,a){t.exports={default:a(303),__esModule:!0}},function(t,n,a){a(304);var r=a(18).Object;t.exports=function t(n,a,i){return r.defineProperty(n,a,i)}},function(t,n,a){var r=a(36);r(r.S+r.F*!a(38),'Object',{defineProperty:a(33).f})},function(t,n,a){var r=a(18),i=r.JSON||(r.JSON={stringify:JSON.stringify});t.exports=function t(n){return i.stringify.apply(i,arguments)}},function(t,n,a){t.exports={default:a(307),__esModule:!0}},function(t,n,a){a(124),a(171),t.exports=a(127).f('iterator')},function(t,n,a){t.exports={default:a(309),__esModule:!0}},function(t,n,a){a(310),a(166),a(316),a(317),t.exports=a(18).Symbol},function(t,n,a){'use strict';var r=a(12),o=a(46),i=a(38),s=a(36),d=a(168),l=a(311).KEY,c=a(61),u=a(120),f=a(85),m=a(82),h=a(13),g=a(127),b=a(128),y=a(312),w=a(313),v=a(37),x=a(45),_=a(54),C=a(115),E=a(62),T=a(169),A=a(314),S=a(315),I=a(33),N=a(81),L=S.f,R=I.f,M=A.f,D=r.Symbol,P=r.JSON,O=P&&P.stringify,B='prototype',U=h('_hidden'),F=h('toPrimitive'),q={}.propertyIsEnumerable,z=u('symbol-registry'),H=u('symbols'),W=u('op-symbols'),V=Object[B],G='function'==typeof D,J=r.QObject,K=!J||!J[B]||!J[B].findChild,X=i&&c(function(){return 7!=T(R({},'a',{get:function(){return R(this,'a',{value:7}).a}})).a})?function(t,n,a){var r=L(V,n);r&&delete V[n],R(t,n,a),r&&t!==V&&R(V,n,r)}:R,Y=function(t){var n=H[t]=T(D[B]);return n._k=t,n},Z=G&&'symbol'==typeof D.iterator?function(t){return'symbol'==typeof t}:function(t){return t instanceof D},Q=function t(n,a,r){return n===V&&Q(W,a,r),v(n),a=C(a,!0),v(r),o(H,a)?(r.enumerable?(o(n,U)&&n[U][a]&&(n[U][a]=!1),r=T(r,{enumerable:E(0,!1)})):(!o(n,U)&&R(n,U,E(1,{})),n[U][a]=!0),X(n,a,r)):R(n,a,r)},ee=function t(n,a){v(n);for(var r=y(a=_(a)),o=0,i=r.length,s;i>o;)Q(n,s=r[o++],a[s]);return n},te=function t(n,a){return a===void 0?T(n):ee(T(n),a)},ne=function t(n){var a=q.call(this,n=C(n,!0));return this===V&&o(H,n)&&!o(W,n)?!1:a||!o(this,n)||!o(H,n)||o(this,U)&&this[U][n]?a:!0},ae=function t(n,a){if(n=_(n),a=C(a,!0),n!==V||!o(H,a)||o(W,a)){var r=L(n,a);return r&&o(H,a)&&!(o(n,U)&&n[U][a])&&(r.enumerable=!0),r}},re=function t(n){for(var a=M(_(n)),r=[],s=0,i;a.length>s;)o(H,i=a[s++])||i==U||i==l||r.push(i);return r},ie=function t(n){for(var a=n===V,r=M(a?W:_(n)),s=[],d=0,i;r.length>d;)o(H,i=r[d++])&&(!a||o(V,i))&&s.push(H[i]);return s};G||(D=function t(){if(this instanceof D)throw TypeError('Symbol is not a constructor!');var n=m(0<arguments.length?arguments[0]:void 0),a=function(t){this===V&&a.call(W,t),o(this,U)&&o(this[U],n)&&(this[U][n]=!1),X(this,n,E(1,t))};return i&&K&&X(V,n,{configurable:!0,set:a}),Y(n)},d(D[B],'toString',function t(){return this._k}),S.f=ae,I.f=Q,a(184).f=A.f=re,a(83).f=ne,a(122).f=ie,i&&!a(84)&&d(V,'propertyIsEnumerable',ne,!0),g.f=function(t){return Y(h(t))}),s(s.G+s.W+s.F*!G,{Symbol:D});for(var oe=['hasInstance','isConcatSpreadable','iterator','match','replace','search','species','split','toPrimitive','toStringTag','unscopables'],se=0;oe.length>se;)h(oe[se++]);for(var j=N(h.store),de=0;j.length>de;)b(j[de++]);s(s.S+s.F*!G,'Symbol',{for:function(t){return o(z,t+='')?z[t]:z[t]=D(t)},keyFor:function t(n){if(!Z(n))throw TypeError(n+' is not a symbol!');for(var a in z)if(z[a]===n)return a},useSetter:function(){K=!0},useSimple:function(){K=!1}}),s(s.S+s.F*!G,'Object',{create:te,defineProperty:Q,defineProperties:ee,getOwnPropertyDescriptor:ae,getOwnPropertyNames:re,getOwnPropertySymbols:ie}),P&&s(s.S+s.F*(!G||c(function(){var t=D();return'[null]'!=O([t])||'{}'!=O({a:t})||'{}'!=O(Object(t))})),'JSON',{stringify:function t(n){for(var a=[n],r=1,i,o;arguments.length>r;)a.push(arguments[r++]);if(o=i=a[1],(x(i)||void 0!==n)&&!Z(n))return w(i)||(i=function(t,n){if('function'==typeof o&&(n=o.call(this,t,n)),!Z(n))return n}),a[1]=i,O.apply(P,a)}}),D[B][F]||a(44)(D[B],F,D[B].valueOf),f(D,'Symbol'),f(Math,'Math',!0),f(r.JSON,'JSON',!0)},function(t,n,a){var r=a(82)('meta'),i=a(45),o=a(46),s=a(33).f,d=0,l=Object.isExtensible||function(){return!0},c=!a(61)(function(){return l(Object.preventExtensions({}))}),u=function(t){s(t,r,{value:{i:'O'+ ++d,w:{}}})},f=function(t,n){if(!i(t))return'symbol'==typeof t?t:('string'==typeof t?'S':'P')+t;if(!o(t,r)){if(!l(t))return'F';if(!n)return'E';u(t)}return t[r].i},m=function(t,n){if(!o(t,r)){if(!l(t))return!0;if(!n)return!1;u(t)}return t[r].w},h=function(t){return c&&g.NEED&&l(t)&&!o(t,r)&&u(t),t},g=t.exports={KEY:r,NEED:!1,fastKey:f,getWeak:m,onFreeze:h}},function(t,n,a){var r=a(81),o=a(122),s=a(83);t.exports=function(t){var n=r(t),a=o.f;if(a)for(var d=a(t),l=s.f,c=0,i;d.length>c;)l.call(t,i=d[c++])&&n.push(i);return n}},function(t,n,a){var r=a(63);t.exports=Array.isArray||function t(n){return'Array'==r(n)}},function(t,n,a){var r=a(54),i=a(184).f,o={}.toString,s='object'==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],d=function(t){try{return i(t)}catch(t){return s.slice()}};t.exports.f=function t(n){return s&&'[object Window]'==o.call(n)?d(n):i(r(n))}},function(t,n,a){var r=a(83),i=a(62),o=a(54),s=a(115),d=a(46),l=a(163),c=Object.getOwnPropertyDescriptor;n.f=a(38)?c:function t(n,a){if(n=o(n),a=s(a,!0),l)try{return c(n,a)}catch(t){}return d(n,a)?i(!r.f.call(n,a),n[a]):void 0}},function(t,n,a){a(128)('asyncIterator')},function(t,n,a){a(128)('observable')},function(t,n){var a='undefined'!=typeof crypto&&crypto.getRandomValues.bind(crypto)||'undefined'!=typeof msCrypto&&msCrypto.getRandomValues.bind(msCrypto);if(a){var r=new Uint8Array(16);t.exports=function t(){return a(r),r}}else{var o=Array(16);t.exports=function t(){for(var n=0,a;16>n;n++)0==(3&n)&&(a=4294967296*Math.random()),o[n]=255&a>>>((3&n)<<3);return o}}},function(t,n){function a(t,n){var a=n||0,i=r;return i[t[a++]]+i[t[a++]]+i[t[a++]]+i[t[a++]]+'-'+i[t[a++]]+i[t[a++]]+'-'+i[t[a++]]+i[t[a++]]+'-'+i[t[a++]]+i[t[a++]]+'-'+i[t[a++]]+i[t[a++]]+i[t[a++]]+i[t[a++]]+i[t[a++]]+i[t[a++]]}for(var r=[],o=0;256>o;++o)r[o]=(o+256).toString(16).substr(1);t.exports=a},function(t,n,a){'use strict';function r(t){if(Array.isArray(t)){for(var n=0,a=Array(t.length);n<t.length;n++)a[n]=t[n];return a}return Array.from(t)}var i='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&'function'==typeof Symbol&&t.constructor===Symbol?'symbol':typeof t},o=function(){function t(t,n){var a=[],r=!0,i=!1,o;try{for(var s=t[Symbol.iterator](),d;!(r=(d=s.next()).done)&&(a.push(d.value),!(n&&a.length===n));r=!0);}catch(t){i=!0,o=t}finally{try{!r&&s['return']&&s['return']()}finally{if(i)throw o}}return a}return function(n,a){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return t(n,a);throw new TypeError('Invalid attempt to destructure non-iterable instance')}}();Object.defineProperty(n,'__esModule',{value:!0});var s=a(186),d=function t(n){return function(t){return n+'='+(t&&!(0,s.isToken)(t)?(0,s.quote)(t):t)}},l=function t(n){return n.reduce(function(t,n){var a=o(n,2),i=a[0],l=a[1],c=d(i);if(!(0,s.isToken)(i))throw new TypeError;return Array.isArray(l)?[].concat(r(t),r(l.map(c))):[].concat(r(t),[c(l)])},[])},c=function t(n,a){if(Array.isArray(n))return l(n);if('object'===('undefined'==typeof n?'undefined':i(n)))return t(Object.keys(n).map(function(t){return[t,n[t]]}),a);throw new TypeError};n.default=function(t,n,a){var o='string'==typeof t?{scheme:t,token:n,params:a}:t;if('object'!==('undefined'==typeof o?'undefined':i(o)))throw new TypeError;else if(!(0,s.isScheme)(o.scheme))throw new TypeError('Invalid scheme.');return[o.scheme].concat(r('undefined'==typeof o.token?[]:[o.token]),r('undefined'==typeof o.params?[]:c(o.params))).join(' ')}},function(t,n,a){'use strict';Object.defineProperty(n,'__esModule',{value:!0});var r=a(186),i=/((?:[a-zA-Z0-9._~+\/-]+=*(?:\s+|$))|[^\u0000-\u001F\u007F()<>@,;:\\"/?={}\[\]\u0020\u0009]+)(?:=([^\\"=\s,]+|"(?:[^"\\]|\\.)*"))?/g,o=function t(n,a){var i='"'===a.charAt(0)?(0,r.unquote)(a):a.trim();if(Array.isArray(n))return n.concat(i);return n?[n,i]:i},s=function t(n,a){for(var r=null,s=null,d={};null!==(r=i.exec(a));)r[2]?d[r[1]]=o(d[r[1]],r[2]):s=o(s,r[1]);return{scheme:n,params:d,token:s}};n.default=function(t){if('string'!=typeof t)throw new TypeError('Header value must be a string.');var n=t.indexOf(' '),a=t.substr(0,n);if(!(0,r.isScheme)(a))throw new TypeError('Invalid scheme '+a);return s(a,t.substr(n))}},function(t,n,a){'use strict';function r(t,n){if(!(t instanceof n))throw new TypeError('Cannot call a class as a function')}var i=function(){function t(t,n){for(var a=0,r;a<n.length;a++)r=n[a],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}return function(n,a,r){return a&&t(n.prototype,a),r&&t(n,r),n}}(),o=a(191),s=function(){function t(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};r(this,t),this.initialize(n,a)}return i(t,null,[{key:'schema',get:function t(){throw new Error('Schema must be defined by classes extending JSONDocument')}}]),i(t,[{key:'initialize',value:function t(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=this.constructor.schema;r.initialize(this,n,a)}},{key:'validate',value:function t(n){var a=this.constructor.schema;return(n||a).validate(this)}},{key:'patch',value:function t(n){var t=new o(n);t.apply(this)}},{key:'select',value:function t(){}},{key:'project',value:function t(n){return n.project(this)}}],[{key:'serialize',value:function t(n){return JSON.stringify(n)}},{key:'deserialize',value:function t(n){try{return JSON.parse(n)}catch(t){throw new Error('Failed to parse JSON')}}}]),t}();t.exports=s},function(t,n,a){'use strict';function r(t,n){if(!(t instanceof n))throw new TypeError('Cannot call a class as a function')}var i=function(){function t(t,n){for(var a=0,r;a<n.length;a++)r=n[a],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}return function(n,a,r){return a&&t(n.prototype,a),r&&t(n,r),n}}(),o=a(131),s=1,d=function(){function t(n){var a=this;r(this,t),Object.defineProperty(this,'mapping',{enumerable:!1,value:new Map}),Object.keys(n).forEach(function(t){var r=n[t];a.mapping.set(new o(t,s),new o(r,s))})}return i(t,[{key:'map',value:function t(n,a){this.mapping.forEach(function(t,r){r.add(n,t.get(a))})}},{key:'project',value:function t(n,a){this.mapping.forEach(function(t,r){t.add(a,r.get(n))})}}]),t}();t.exports=d},function(t,n,a){'use strict';function r(t,n,a){return n in t?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,t}function i(t,n){if(!(t instanceof n))throw new TypeError('Cannot call a class as a function')}var o='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&'function'==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?'symbol':typeof t},s=function(){function t(t,n){for(var a=0,r;a<n.length;a++)r=n[a],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}return function(n,a,r){return a&&t(n.prototype,a),r&&t(n,r),n}}(),d=a(190),l=a(192),c=function(){function t(n){i(this,t),Object.assign(this,n),Object.defineProperties(this,{initialize:{enumerable:!1,writeable:!1,value:d.compile(n)},validate:{enumerable:!1,writeable:!1,value:l.compile(n)}})}return s(t,[{key:'extend',value:function n(a){function i(t){return t&&'object'===('undefined'==typeof t?'undefined':o(t))&&null!==t&&!Array.isArray(t)}function s(t,n){var a=Object.assign({},t);return i(t)&&i(n)&&Object.keys(n).forEach(function(o){i(n[o])?o in t?a[o]=s(t[o],n[o]):Object.assign(a,r({},o,n[o])):Object.assign(a,r({},o,n[o]))}),a}var d=s(this,a);return new t(d)}}]),t}();t.exports=c},function(t,n,a){'use strict';(function(t){function r(n,a){return void 0===a&&(a='utf8'),t.isBuffer(n)?s(n.toString('base64')):s(new t(n,a).toString('base64'))}function i(n,a){return void 0===a&&(a='utf8'),new t(o(n),'base64').toString(a)}function o(t){return t=t.toString(),l.default(t).replace(/\-/g,'+').replace(/_/g,'/')}function s(t){return t.replace(/=/g,'').replace(/\+/g,'-').replace(/\//g,'_')}function d(n){return new t(o(n),'base64')}var l=a(326);;var c=r;c.encode=r,c.decode=i,c.toBase64=o,c.fromBase64=s,c.toBuffer=d,Object.defineProperty(n,'__esModule',{value:!0}),n.default=c}).call(n,a(2).Buffer)},function(t,n,a){'use strict';(function(t){function a(n){var a=4,r=n.length,i=r%a;if(!i)return n;var o=r,s=a-i,d=r+s,l=new t(d);for(l.write(n);s--;)l.write('=',o++);return l.toString()}Object.defineProperty(n,'__esModule',{value:!0}),n.default=a}).call(n,a(2).Buffer)},function(t,n,a){'use strict';var r=a(328),i=a(329),o=a(331),s=a(332),d=new s;d.define('HS256','sign',new i({name:'HMAC',hash:{name:'SHA-256'}})),d.define('HS384','sign',new i({name:'HMAC',hash:{name:'SHA-384'}})),d.define('HS512','sign',new i({name:'HMAC',hash:{name:'SHA-512'}})),d.define('RS256','sign',new o({name:'RSASSA-PKCS1-v1_5',hash:{name:'SHA-256'}})),d.define('RS384','sign',new o({name:'RSASSA-PKCS1-v1_5',hash:{name:'SHA-384'}})),d.define('RS512','sign',new o({name:'RSASSA-PKCS1-v1_5',hash:{name:'SHA-512'}})),d.define('none','sign',new r({})),d.define('HS256','verify',new i({name:'HMAC',hash:{name:'SHA-256'}})),d.define('HS384','verify',new i({name:'HMAC',hash:{name:'SHA-384'}})),d.define('HS512','verify',new i({name:'HMAC',hash:{name:'SHA-512'}})),d.define('RS256','verify',new o({name:'RSASSA-PKCS1-v1_5',hash:{name:'SHA-256'}})),d.define('RS384','verify',new o({name:'RSASSA-PKCS1-v1_5',hash:{name:'SHA-384'}})),d.define('RS512','verify',new o({name:'RSASSA-PKCS1-v1_5',hash:{name:'SHA-512'}})),d.define('none','verify',new r({})),d.define('RS256','importKey',new o({name:'RSASSA-PKCS1-v1_5',hash:{name:'SHA-256'}})),d.define('RS384','importKey',new o({name:'RSASSA-PKCS1-v1_5',hash:{name:'SHA-384'}})),d.define('RS512','importKey',new o({name:'RSASSA-PKCS1-v1_5',hash:{name:'SHA-512'}})),t.exports=d},function(t,n,a){'use strict';function r(t,n){if(!(t instanceof n))throw new TypeError('Cannot call a class as a function')}var i=function(){function t(t,n){for(var a=0,r;a<n.length;a++)r=n[a],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}return function(n,a,r){return a&&t(n.prototype,a),r&&t(n,r),n}}(),o=function(){function t(){r(this,t)}return i(t,[{key:'sign',value:function t(){return Promise.resolve('')}},{key:'verify',value:function t(){}}]),t}();t.exports=o},function(t,n,a){'use strict';(function(n){function r(t,n){if(!(t instanceof n))throw new TypeError('Cannot call a class as a function')}var i=function(){function t(t,n){for(var a=0,r;a<n.length;a++)r=n[a],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}return function(n,a,r){return a&&t(n.prototype,a),r&&t(n,r),n}}(),o=a(48),s=a(89),d=a(193),l=function(){function t(n){r(this,t),this.params=n}return i(t,[{key:'sign',value:function t(a,r){var i=this.params;return r=new d().encode(r),s.subtle.sign(i,a,r).then(function(t){return o(n.from(t))})}},{key:'verify',value:function t(n,a,r){var i=this.params;return'string'==typeof a&&(a=Uint8Array.from(o.toBuffer(a))),'string'==typeof r&&(r=new d().encode(r)),s.subtle.verify(i,n,a,r)}},{key:'assertSufficientKeyLength',value:function t(n){if(n.length<this.bitlength)throw new Error('The key is too short.')}}]),t}();t.exports=l}).call(n,a(2).Buffer)},function(t,n){t.exports=__WEBPACK_EXTERNAL_MODULE_330__},function(t,n,a){'use strict';(function(n){function r(t,n){if(!(t instanceof n))throw new TypeError('Cannot call a class as a function')}var i=function(){function t(t,n){for(var a=0,r;a<n.length;a++)r=n[a],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}return function(n,a,r){return a&&t(n.prototype,a),r&&t(n,r),n}}(),o=a(48),s=a(89),d=a(193),l=function(){function t(n){r(this,t),this.params=n}return i(t,[{key:'sign',value:function t(a,r){var i=this.params;return r=new d().encode(r),s.subtle.sign(i,a,r).then(function(t){return o(n.from(t))})}},{key:'verify',value:function t(n,a,r){var i=this.params;return'string'==typeof a&&(a=Uint8Array.from(o.toBuffer(a))),'string'==typeof r&&(r=new d().encode(r)),s.subtle.verify(i,n,a,r)}},{key:'importKey',value:function t(n){var a=Object.assign({},n),r=this.params,i=n.key_ops||[];return('sig'===n.use&&i.push('verify'),'enc'===n.use)?Promise.resolve(n):(n.key_ops&&(i=n.key_ops),s.subtle.importKey('jwk',a,r,!0,i).then(function(t){return Object.defineProperty(a,'cryptoKey',{enumerable:!1,value:t}),a}))}}]),t}();t.exports=l}).call(n,a(2).Buffer)},function(t,n,a){'use strict';function r(t,n){if(!(t instanceof n))throw new TypeError('Cannot call a class as a function')}var i=function(){function t(t,n){for(var a=0,r;a<n.length;a++)r=n[a],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}return function(n,a,r){return a&&t(n.prototype,a),r&&t(n,r),n}}(),o=a(194),s=['sign','verify','encrypt','decrypt','importKey'],d=function(){function t(){var n=this;r(this,t),s.forEach(function(t){n[t]={}})}return i(t,[{key:'define',value:function t(n,a,r){var i=this[a];i[n]=r}},{key:'normalize',value:function t(n,a){var r=this[n];if(!r)return new SyntaxError;var i=r[a];return i?i:new o(a)}}],[{key:'operations',get:function t(){return s}}]),t}();t.exports=d},function(t,n,a){'use strict';var r=a(19),i=r.Formats;i.register('StringOrURI',/(?:)/),i.register('NumericDate',/(?:)/),i.register('URI',/(?:)/),i.register('url',/(?:)/),i.register('base64',/(?:)/),i.register('base64url',/(?:)/),i.register('MediaType',/(?:)/)},function(t,n,a){'use strict';function r(t,n){if(!(t instanceof n))throw new TypeError('Cannot call a class as a function')}function i(t,n){if(!t)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return n&&('object'==typeof n||'function'==typeof n)?n:t}function o(t,n){if('function'!=typeof n&&null!==n)throw new TypeError('Super expression must either be null or a function, not '+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}var s=function(){function t(t,n){for(var a=0,r;a<n.length;a++)r=n[a],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}return function(n,a,r){return a&&t(n.prototype,a),r&&t(n,r),n}}(),d=a(19),l=d.JSONDocument,c=a(198),u=a(197),f=function(t){function n(){return r(this,n),i(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return o(n,t),s(n,null,[{key:'importKeys',value:function t(a){var r=this.schema.validate(a);if(!r.valid)return Promise.reject(new Error('Invalid JWKSet: '+JSON.stringify(r,null,2)));if(!a.keys)return Promise.reject(new Error('Cannot import JWKSet: keys property is empty'));var i,o;try{i=new n(a),o=a.keys.map(function(t){return u.importKey(t)})}catch(t){return Promise.reject(t)}return Promise.all(o).then(function(t){return i.keys=t,i})}},{key:'schema',get:function t(){return c}}]),n}(l);t.exports=f},function(t,n,a){'use strict';function r(t,n){if(!(t instanceof n))throw new TypeError('Cannot call a class as a function')}function i(t,n){if(!t)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return n&&('object'==typeof n||'function'==typeof n)?n:t}function o(t,n){if('function'!=typeof n&&null!==n)throw new TypeError('Super expression must either be null or a function, not '+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}var s='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&'function'==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?'symbol':typeof t},d=function(){function t(t,n){for(var a=0,r;a<n.length;a++)r=n[a],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}return function(n,a,r){return a&&t(n.prototype,a),r&&t(n,r),n}}(),l=a(48),c=a(19),u=c.JSONDocument,f=a(199),m=a(203),h=a(196),g=function(t){function n(){return r(this,n),i(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return o(n,t),d(n,[{key:'isJWE',value:function t(){return!!this.header.enc}},{key:'resolveKeys',value:function t(n){var a=this.header.kid,r,i;if(Array.isArray(n)&&(r=n),n.keys&&(r=n.keys),n.keys||'object'!==('undefined'==typeof n?'undefined':s(n))||(r=[n]),!r)throw new h('Invalid JWK argument');return i=a?r.find(function(t){return t.kid===a}):r.find(function(t){return'sig'===t.use}),!!i&&(this.key=i.cryptoKey,!0)}},{key:'encode',value:function t(){var n=this.validate();if(!n.valid)return Promise.reject(n);var a=this;return this.isJWE()?JWE.encrypt(a):m.sign(a)}},{key:'verify',value:function t(){var n=this.validate();return n.valid?m.verify(this):Promise.reject(n)}}],[{key:'decode',value:function t(n){var a=this,r;if('string'!=typeof n)throw new h('JWT must be a string');if(n.startsWith('{')){try{n=JSON.parse(n,function(){})}catch(t){throw new h('Invalid JWT serialization')}n.serialization=n.signatures||n.recipients?'json':'flattened',r=new a(n,{filter:!1})}else try{var i='compact',o=n.split('.'),s=o.length;if(3!==s&&5!==s)throw new Error('Malformed JWT');var d=JSON.parse(l.decode(o[0]));if(3===s){var c='JWS',u=JSON.parse(l.decode(o[1])),f=o[2];r=new a({type:c,segments:o,header:d,payload:u,signature:f,serialization:i},{filter:!1})}5===s}catch(t){throw new h('Invalid JWT compact serialization')}return r}},{key:'encode',value:function t(a,r,i){var o=new n(a,r);return o.encode(i)}},{key:'verify',value:function t(a,r){var i=n.decode(r);return i.key=a,i.verify().then(function(t){return i})}},{key:'schema',get:function t(){return f}}]),n}(u);t.exports=g},function(t,n,a){(function(n){const r=a(130),i=a(48),o=a(89),{JWT:s}=a(65),d=a(204),{URL:l}=a(51);class c{static create(t,a,s){const{provider:u,defaults:f,registration:m}=t;let h,g,b,y;return Promise.resolve().then(()=>(r(u.configuration,'RelyingParty provider OpenID Configuration is missing'),r(f.authenticate,'RelyingParty default authentication parameters are missing'),r(m,'RelyingParty client registration is missing'),h=u.configuration.issuer,g=u.configuration.authorization_endpoint,b={client_id:m.client_id},y=Object.assign(f.authenticate,b,a),r(h,'Missing issuer in provider OpenID Configuration'),r(g,'Missing authorization_endpoint in provider OpenID Configuration'),r(y.scope,'Missing scope parameter in authentication request'),r(y.response_type,'Missing response_type parameter in authentication request'),r(y.client_id,'Missing client_id parameter in authentication request'),r(y.redirect_uri,'Missing redirect_uri parameter in authentication request'),y.state=Array.from(o.getRandomValues(new Uint8Array(16))),y.nonce=Array.from(o.getRandomValues(new Uint8Array(16))),Promise.all([o.subtle.digest({name:'SHA-256'},new Uint8Array(y.state)),o.subtle.digest({name:'SHA-256'},new Uint8Array(y.nonce))]))).then((t)=>{let a=i(n.from(t[0])),r=i(n.from(t[1])),o=`${h}/requestHistory/${a}`;s[o]=JSON.stringify(y),y.state=a,y.nonce=r}).then(()=>c.generateSessionKeys()).then((t)=>{c.storeSessionKeys(t,y,s)}).then(()=>{if(u.configuration.request_parameter_supported)return c.encodeRequestParams(y).then((t)=>{y=t})}).then(()=>{let t=new l(g);return t.search=d.encode(y),t.href})}static generateSessionKeys(){return o.subtle.generateKey({name:'RSASSA-PKCS1-v1_5',modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:'SHA-256'}},!0,['sign','verify']).then((t)=>Promise.all([o.subtle.exportKey('jwk',t.publicKey),o.subtle.exportKey('jwk',t.privateKey)])).then((t)=>{let[n,a]=t;return{public:n,private:a}})}static storeSessionKeys(t,n,a){a['oidc.session.privateKey']=JSON.stringify(t.private),n.key=t.public}static encodeRequestParams(t){const n=['scope','client_id','response_type','state'],a=Object.keys(t).filter((t)=>!n.includes(t));let r={};a.forEach((n)=>{r[n]=t[n]});let i=new s({header:{alg:'none'},payload:r},{filter:!1});return i.encode().then((n)=>{let a={scope:t.scope,client_id:t.client_id,response_type:t.response_type,request:n,state:t.state};return a})}}t.exports=c}).call(n,a(2).Buffer)},function(t,n,a){(function(n,r){const{URL:i}=a(51),o=a(130),s=a(89),d=a(48),l=a(39),c=l.Headers?l.Headers:n.Headers,u=a(204),f=a(338),m=a(340),h=a(205);class g{static validateResponse(t){return Promise.resolve(t).then(this.parseResponse).then(this.matchRequest).then(this.validateStateParam).then(this.errorResponse).then(this.validateResponseMode).then(this.validateResponseParams).then(this.exchangeAuthorizationCode).then(this.validateIDToken).then(m.fromAuthResponse)}static parseResponse(t){let{redirect:n,body:a}=t;if(n&&a||!n&&!a)throw new Error('Invalid response mode');if(n){let a=new i(n),{search:r,hash:o}=a;if(r&&o||!r&&!o)throw new Error('Invalid response mode');r&&(t.params=u.decode(r.substring(1)),t.mode='query'),o&&(t.params=u.decode(o.substring(1)),t.mode='fragment')}return a&&(t.params=u.decode(a),t.mode='form_post'),t}static matchRequest(t){let{rp:n,params:a,session:r}=t,i=a.state,o=n.provider.configuration.issuer;if(!i)throw new Error('Missing state parameter in authentication response');let s=`${o}/requestHistory/${i}`,d=r[s];if(!d)throw new Error('Mismatching state parameter in authentication response');return t.request=JSON.parse(d),t}static validateStateParam(t){let n=new Uint8Array(t.request.state),a=t.params.state;return s.subtle.digest({name:'SHA-256'},n).then((n)=>{if(a!==d(r.from(n)))throw new Error('Mismatching state parameter in authentication response');return t})}static errorResponse(t){let n=t.params.error;return n?Promise.reject(n):Promise.resolve(t)}static validateResponseMode(t){if('code'!==t.request.response_type&&'query'===t.mode)throw new Error('Invalid response mode');return t}static validateResponseParams(t){let{request:n,params:a}=t,r=n.response_type.split(' ');return r.includes('code')&&o(a.code,'Missing authorization code in authentication response'),r.includes('id_token')&&o(a.id_token,'Missing id_token in authentication response'),r.includes('token')&&(o(a.access_token,'Missing access_token in authentication response'),o(a.token_type,'Missing token_type in authentication response')),t}static exchangeAuthorizationCode(t){let{rp:n,params:a,request:i}=t,s=a.code;if(!s||'code'!==i.response_type)return Promise.resolve(t);let{provider:d,registration:f}=n,m=f.client_id,g=f.client_secret;if(!g)return Promise.reject(new Error('Client cannot exchange authorization code because it is not a confidential client'));let b=d.configuration.token_endpoint,y='POST',w=new c({"Content-Type":'application/x-www-form-urlencoded'}),v={grant_type:'authorization_code',code:s,redirect_uri:i.redirect_uri},x=f.token_endpoint_auth_method||'client_secret_basic';if('client_secret_basic'===x){let t=new r(`${m}:${g}`).toString('base64');w.set('Authorization',`Basic ${t}`)}'client_secret_post'===x&&(v.client_id=m,v.client_secret=g);let _=u.encode(v);return l(b,{method:y,headers:w,body:_}).then(h('Error exchanging authorization code')).then((t)=>t.json()).then((n)=>(o(n.access_token,'Missing access_token in token response'),o(n.token_type,'Missing token_type in token response'),o(n.id_token,'Missing id_token in token response'),t.params=Object.assign(t.params,n),t))}static validateIDToken(t){return t.params.id_token?Promise.resolve(t).then(g.decryptIDToken).then(g.decodeIDToken).then(g.validateIssuer).then(g.validateAudience).then(g.resolveKeys).then(g.verifySignature).then(g.validateExpires).then(g.verifyNonce).then(g.validateAcr).then(g.validateAuthTime).then(g.validateAccessTokenHash).then(g.validateAuthorizationCodeHash):Promise.resolve(t)}static decryptIDToken(t){return Promise.resolve(t)}static decodeIDToken(t){let n=t.params.id_token;return n&&(t.decoded=f.decode(n)),t}static validateIssuer(t){let n=t.rp.provider.configuration,a=t.decoded.payload;if(a.iss!==n.issuer)throw new Error('Mismatching issuer in ID Token');return t}static validateAudience(t){let n=t.rp.registration,{aud:a,azp:r}=t.decoded.payload;if('string'==typeof a&&a!==n.client_id)throw new Error('Mismatching audience in id_token');if(Array.isArray(a)&&!a.includes(n.client_id))throw new Error('Mismatching audience in id_token');if(Array.isArray(a)&&!r)throw new Error('Missing azp claim in id_token');if(r&&r!==n.client_id)throw new Error('Mismatching azp claim in id_token');return t}static resolveKeys(t){let n=t.rp,a=n.provider,r=t.decoded;return Promise.resolve(a.jwks).then((t)=>t?t:n.jwks()).then((n)=>{if(r.resolveKeys(n))return Promise.resolve(t);throw new Error('Cannot resolve signing key for ID Token')})}static verifySignature(t){let n=t.decoded.header.alg,a=t.rp.registration,r=a.id_token_signed_response_alg||'RS256';if(n!==r)throw new Error(`Expected ID Token to be signed with ${r}`);return t.decoded.verify().then((n)=>{if(!n)throw new Error('Invalid ID Token signature');return t})}static validateExpires(t){let n=t.decoded.payload.exp;if(n<=_Mathfloor(Date.now()/1e3))throw new Error('Expired ID Token');return t}static verifyNonce(t){let n=new Uint8Array(t.request.nonce),a=t.decoded.payload.nonce;if(!a)throw new Error('Missing nonce in ID Token');return s.subtle.digest({name:'SHA-256'},n).then((n)=>{if(a!==d(r.from(n)))throw new Error('Mismatching nonce in ID Token');return t})}static validateAcr(t){return t}static validateAuthTime(t){return t}static validateAccessTokenHash(t){return t}static validateAuthorizationCodeHash(t){return t}}t.exports=g}).call(n,a(5),a(2).Buffer)},function(t,n,a){const{JWT:r}=a(65),i=a(339);class o extends r{static get schema(){return i}}t.exports=o},function(t,n,a){const{JWTSchema:r}=a(65),i=r.extend({properties:{header:{},payload:{properties:{iss:{type:'string',format:'url'},sub:{type:'string',maxLength:255},auth_time:{type:'integer',format:'NumericDate'},nonce:{type:'string'},acr:{type:'string'},amr:{type:'array',items:{type:'string'}},azp:{type:'string',format:'StringOrURI'}},required:['iss','sub','aud','exp','iat']}}});t.exports=i},function(t,n,a){'use strict';class r{constructor(t){this.idp=t.idp,this.clientId=t.clientId,this.sessionKey=t.sessionKey,this.decoded=t.decoded,this.accessToken=t.accessToken,this.idToken=t.idToken}static fromAuthResponse(t){const n=a(188),i=t.decoded.payload,o=t.rp.registration,s=t.session[n.SESSION_PRIVATE_KEY];let d={sessionKey:s,idp:i.iss,clientId:o.client_id,decoded:t.decoded,accessToken:t.params.access_token,idToken:t.params.id_token};return new r(d)}}t.exports=r},function(t,n,a){const{JSONSchema:r}=a(19),i=new r({type:'object',properties:{provider:{type:'object',properties:{name:{type:'string'},url:{type:'string',format:'uri'},configuration:{},jwks:{}},required:['url']},defaults:{type:'object',properties:{authenticate:{type:'object',properties:{redirect_uri:{type:'string',format:'uri'},response_type:{type:'string',default:'id_token token',enum:['code','token','id_token token','id_token token code']},display:{type:'string',default:'page',enum:['page','popup']},scope:{type:['string','array'],default:['openid']}}},register:{}}},registration:{},store:{type:'object',default:{}}}});t.exports=i},function(t,n,a){'use strict';function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,'__esModule',{value:!0}),n.openIdpSelector=n.startPopupServer=n.appOriginHandler=n.loginHandler=n.storageHandler=void 0;var i=a(47),o=r(i),s=a(208),d=r(s),l=a(182),c=a(133),u=function t(n,a,r){return(0,l.combineHandlers)(f(n),m(a,r),h)},f=n.storageHandler=function t(n){return function(t){var a=t.id,r=t.method,i=t.args;return'storage/getItem'===r?n.getItem.apply(n,(0,d.default)(i)).then(function(t){return{id:a,ret:t}}):'storage/setItem'===r?n.setItem.apply(n,(0,d.default)(i)).then(function(){return{id:a,ret:null}}):'storage/removeItem'===r?n.removeItem.apply(n,(0,d.default)(i)).then(function(){return{id:a,ret:null}}):null}},m=n.loginHandler=function t(n,a){return function(t){var r=t.id,i=t.method,s=t.args;return'getLoginOptions'===i?o.default.resolve({id:r,ret:{popupUri:n.popupUri,callbackUri:n.callbackUri}}):'foundSession'===i?(a(s[0]),o.default.resolve({id:r,ret:null})):null}},h=n.appOriginHandler=function t(n){var a=n.id,r=n.method;return'getAppOrigin'===r?o.default.resolve({id:a,ret:window.location.origin}):null},g=n.startPopupServer=function t(n,a,r){return new o.default(function(t,i){if(!(r.popupUri&&r.callbackUri))return i(new Error('Cannot serve a popup without both "options.popupUri" and "options.callbackUri"'));var o=(0,l.server)(a,(0,c.originOf)(r.popupUri))(u(n,r,function(n){o.stop(),t(n)}));o.start()})},b=n.openIdpSelector=function t(n){if(!(n.popupUri&&n.callbackUri))throw new Error('Cannot open IDP select UI.  Must provide both "options.popupUri" and "options.callbackUri".');var a=650,r=400,i=window.open(n.popupUri,'_blank','width='+a+',height='+r+',left='+(window.innerWidth-a)/2+',top='+(window.innerHeight-r)/2);return i}},function(t,n,a){t.exports={default:a(344),__esModule:!0}},function(t,n,a){a(124),a(345),t.exports=a(18).Array.from},function(t,n,a){'use strict';var r=a(60),i=a(36),o=a(123),s=a(173),d=a(174),l=a(117),c=a(346),u=a(175);i(i.S+i.F*!a(180)(function(t){Array.from(t)}),'Array',{from:function t(n){var a=o(n),i='function'==typeof this?this:Array,f=arguments.length,m=1<f?arguments[1]:void 0,h=void 0!==m,g=0,b=u(a),y,w,v,x;if(h&&(m=r(m,2<f?arguments[2]:void 0,2)),void 0!=b&&!(i==Array&&d(b)))for(x=b.call(a),w=new i;!(v=x.next()).done;g++)c(w,g,h?s(x,m,[v.value,g],!0):v.value);else for(y=l(a.length),w=new i(y);y>g;g++)c(w,g,h?m(a[g],g):a[g]);return w.length=g,w}})},function(t,n,a){'use strict';var r=a(33),i=a(62);t.exports=function(t,n,a){n in t?r.f(t,n,i(0,a)):t[n]=a}},function(t,n,a){'use strict';function r(t,n){if(!(t instanceof n))throw new TypeError('Cannot call a class as a function')}function i(t,n){if(!t)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return n&&('object'==typeof n||'function'==typeof n)?n:t}function o(t,n){if('function'!=typeof n&&null!==n)throw new TypeError('Super expression must either be null or a function, not '+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}var s=function(){function t(t,n){for(var a=0,r;a<n.length;a++)r=n[a],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}return function(n,a,r){return a&&t(n.prototype,a),r&&t(n,r),n}}(),d=a(17),l=function(t){function n(){r(this,n);var t=i(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return t.termType=n.termType,t}return o(n,t),s(n,[{key:'toString',value:function t(){return'()'}}]),n}(d);l.termType='empty',t.exports=l},function(t,n,a){'use strict';var r=function(){return{parseJSON:function t(n,a,r){var i={},o=r.sym(a),s,d,l;for(var c in n){0===c.indexOf('_:')?i[c]?s=i[c]:(s=r.bnode(c),i[c]=s):s=r.sym(c);var u=n[c];for(var f in u){var m=u[f];for(var h in d=r.sym(f),m){var g=m[h];if('uri'===g.type)l=r.sym(g.value),r.add(s,d,l,o);else if('BlankNode'===g.type)i[g.value]?l=i[g.value]:(l=r.bnode(g.value),i[g.value]=l),r.add(s,d,l,o);else if('Literal'===g.type)l=g.datatype?r.literal(g.value,void 0,r.sym(g.datatype)):g.lang?r.literal(g.value,g.lang):r.literal(g.value),r.add(s,d,l,o);else throw new Error('error: unexpected termtype: '+h.type)}}}}}}();t.exports=r},function(t,n,a){'use strict';function r(t){function n(t){for(var n=d()+'SELECT ',a=0;a<t.vars.length;a++)n+=t.vars[a]+' ';return n+='\n',n}function a(t){var n='',a=t.statements;for(var r in a)i.debug('Found statement: '+a),n+=d()+a[r]+'\n';return n}function r(t){var n='';for(var a in t.constraints){var r=t.constraints[a];n+=d()+'FILTER ( '+r.describe(a)+' ) \n'}return n}function o(t){for(var n='',s=0;s<t.optional.length;s++)i.debug('Found optional query'),n+=d()+'OPTIONAL { \n',c++,n+=a(t.optional[s]),n+=r(t.optional[s]),n+=o(t.optional[s]),c--,n+=d()+'}\n';return n}function s(t){var n=d()+'WHERE \n{ \n';return c++,n+=a(t),n+=r(t),n+=o(t),c--,n+='}',n}function d(){for(var t='',n=0;n<c;n++)t+='    ';return t}function l(t){return n(t)+s(t.pat)}var c=0;return l(t)}var i=a(42);t.exports=r},function(t,n,a){'use strict';function r(t,n,r){function a(t){if(O[t])return O[t];var n=r.variable(t);return O[t]=n,n}function s(t){return'string'==typeof t&&t.match(/[^ \n\t]/)}function d(t){return'string'==typeof t&&t.match(/^[\?\$]/)}function l(t){return'string'==typeof t?t.replace(/^&lt;/,'<').replace(/&gt;$/,'>'):t}function c(t){return'string'==typeof t&&t.match(/^<[^>]*>$/)}function u(t){return'string'==typeof t&&(t.match(/^_:/)||t.match(/^$/))}function f(t){return'string'==typeof t&&t.match(/:$/)}function m(t){return'string'==typeof t&&t.match(/^:|^[^_][^:]*:/)}function h(t){var n=t.split(':');return n[0]}function g(t){var n=t.split(':');return n[1]}function y(t){return c(t)?t.slice(1,t.length-1):t}function b(t){var n=-1===t.indexOf('\'')?null:t.indexOf('\''),i=-1===t.indexOf('"')?null:t.indexOf('"');if(!n&&!i){var s=[,];return s[0]=t,s}var a=[,,],d,l;if(!n||i&&i<n)d='"',l=i;else if(!i||n&&n<i)d='\'',l=n;else return o.error('SQARQL QUERY OOPS!'),a;a[0]=t.slice(0,l);var c=t.slice(l+1).indexOf(d);if(-1===c)return o.error('SPARQL parsing error: no matching parentheses in literal '+t),t;var u;return t.slice(c+l+2).match(/^\^\^/)?(u=t.slice(c+l+2).indexOf(' '),a[1]=r.literal(t.slice(l+1,l+1+c),'',r.sym(y(t.slice(l+4+c,l+2+c+u)))),a=a.concat(b(t.slice(c+l+3+u)))):t.slice(c+l+2).match(/^@/)?(u=t.slice(c+l+2).indexOf(' '),a[1]=r.literal(t.slice(l+1,l+1+c),t.slice(l+3+c,l+2+c+u),null),a=a.concat(b(t.slice(c+l+2+u)))):(a[1]=r.literal(t.slice(l+1,l+1+c),'',null),o.info('Literal found: '+a[1]),a=a.concat(b(t.slice(c+l+2)))),a}function w(t){t=t.replace(/\(/g,' ( ').replace(/\)/g,' ) ').replace(/</g,' <').replace(/>/g,'> ').replace(/{/g,' { ').replace(/}/g,' } ').replace(/[\t\n\r]/g,' ').replace(/; /g,' ; ').replace(/\. /g,' . ').replace(/, /g,' , '),o.info('New str into spaceDelimit: \n'+t);var n=[],a=t.split(' ');for(var r in a)s(a[r])&&(n=n.concat(a[r]));return n}function v(t){for(var n=t,a=0;a<n.length;a++)if('a'===n[a]&&(n[a]='<http://www.w3.org/1999/02/22-rdf-syntax-ns#type>'),'is'===n[a]&&'of'===n[a+2]){n.splice(a,1),n.splice(a+1,1);var r=n[a-1];n[a-1]=n[a+1],n[a+1]=r}return n}function _(t){for(var n=[],i=0;i<t.length;i++){if('string'!=typeof t[i]){n[i]=t[i];continue}t[i]=l(t[i]),d(t[i])?n[i]=a(t[i].slice(1)):u(t[i])?(o.info(t[i]+' was identified as a bnode.'),n[i]=r.bnode()):c(t[i])?(o.info(t[i]+' was identified as a symbol.'),n[i]=r.sym(y(t[i]))):m(t[i])?(o.info(t[i]+' was identified as a prefixed symbol'),F[h(t[i])]?n[i]=r.sym(t[i]=F[h(t[i])]+g(t[i])):(o.error('SPARQL error: '+t[i]+' with prefix '+h(t[i])+' does not have a correct prefix entry.'),n[i]=t[i])):n[i]=t[i]}return n}function k(t){var n=b(t),a=[];for(var r in n)a='string'==typeof n[r]?a.concat(w(n[r])):a.concat(n[r]);return a=v(a),o.info('SPARQL Tokens: '+a),a}function C(t,n){for(var a=0;a<n.length;a++)if('string'==typeof n[a]&&n[a].toLowerCase()===t.toLowerCase())return a;return null}function E(t,n){for(var a=[],r=0;r<n.length;r++)'string'==typeof n[r]&&n[r].toLowerCase()===t.toLowerCase()&&a.push(r);return a}function T(t,n){for(var r in o.info('SPARQL vars: '+t),t)if(d(t[r])){o.info('Added '+t[r]+' to query variables from SPARQL');var i=a(t[r].slice(1));n.vars.push(i),i.label=t[r].slice(1)}else o.warn('Incorrect SPARQL variable in SELECT: '+t[r])}function A(t){var n=E('PREFIX',t),r=[];for(var s in n){var i=t[n[s]+1],a=t[n[s]+2];if(!f(i))o.error('Invalid SPARQL prefix: '+i);else if(!c(a))o.error('Invalid SPARQL symbol: '+a);else{o.info('Prefix found: '+i+' -> '+a);var d=h(i),l=y(a);r[d]=l}}return r}function S(t,n,a){o.info('Looking for a close bracket of type '+a+' in '+t);for(var r=0,s=0;s<t.length;s++)if(t[s]===n&&r++,t[s]===a&&r--,0>r)return s;return o.error('Statement had no close parenthesis in SPARQL query'),0}function I(t){return this.describe=function(n){return n+' > '+t.toNT()},this.test=function(n){return n.value.match(/[0-9]+(\.[0-9]+)?([eE][+-]?[0-9]+)?/)?parseFloat(n.value)>parseFloat(t):n.toNT()>t.toNT()},this}function N(t){return this.describe=function(n){return n+' < '+t.toNT()},this.test=function(n){return n.value.match(/[0-9]+(\.[0-9]+)?([eE][+-]?[0-9]+)?/)?parseFloat(n.value)<parseFloat(t):n.toNT()<t.toNT()},this}function j(t){return this.describe=function(n){return n+' = '+t.toNT()},this.test=function(n){return t.sameTerm(n)},this}function L(t){this.describe=function(n){return'REGEXP( \''+t+'\' , '+n+' )'},this.test=function(n){var a=t,r=new RegExp(a);return!!n.value&&r.test(n.value)}}function R(t,n){3===t.length&&'Variable'===t[0].termType&&('NamedNode'===t[2].termType||'Literal'===t[2].termType)?'='===t[1]?(o.debug('Constraint added: '+t),n.constraints[t[0]]=new j(t[2])):'>'===t[1]?(o.debug('Constraint added: '+t),n.constraints[t[0]]=new j(t[2])):'<'===t[1]?(o.debug('Constraint added: '+t),n.constraints[t[0]]=new j(t[2])):o.warn('I don\'t know how to handle the constraint: '+t):6===t.length&&'string'==typeof t[0]&&'regexp'===t[0].toLowerCase()&&'('===t[1]&&')'===t[5]&&','===t[3]&&'Variable'===t[4].termType&&'Literal'===t[2].termType&&(o.debug('Constraint added: '+t),n.constraints[t[4]]=new L(t[2].value))}function M(t,n){o.debug('Optional query: '+t+' not yet implemented.');var a=r.formula();D(t,a),n.optional.push(a)}function D(t,n){var a=_(t),r;o.debug('WHERE: '+a);for(var i;C('OPTIONAL',a);)i=C('OPTIONAL',a),o.debug('OPT: '+i+' '+a[i]+' in '+a),'{'!==a[i+1]&&o.warn('Bad optional opening bracket in word '+i),r=S(a.slice(i+2),'{','}'),-1===r?o.error('No matching bracket in word '+i):(M(a.slice(i+2,i+2+r),n),i=C('OPTIONAL',a),r=S(a.slice(i+2),'{','}'),a.splice(i,r+3));for(o.debug('WHERE after optionals: '+a);C('FILTER',a);){var s=C('FILTER',a);'('!==a[s+1]&&o.warn('Bad filter opening bracket in word '+s),r=S(a.slice(s+2),'(',')'),-1===r?o.error('No matching bracket in word '+s):(R(a.slice(s+2,s+2+r),n),s=C('FILTER',a),r=S(a.slice(s+2),'(',')'),a.splice(s,r+3))}o.debug('WHERE after filters and optionals: '+a),P(a,n)}function P(t,n){var a=[,];a[0]=-1;for(var r=a.concat(E('.',t)),i=[],s=0;s<r.length-1;s++)i[s]=t.slice(r[s]+1,r[s+1]);for(s in i){o.info('s+p+o '+s+' = '+i[s]);var d=i[s][0];i[s].splice(0,1);var l=a.concat(E(';',i[s]));l.push(i[s].length);for(var c=[],u=0;u<l.length-1;u++)c[u]=i[s].slice(l[u]+1,l[u+1]);for(s in c){o.info('p+o '+s+' = '+i[s]);var f=c[s][0];c[s].splice(0,1);var m=a.concat(E(',',c[s]));m.push(c[s].length);var h=[];for(u=0;u<m.length-1;u++)h[u]=c[s].slice(m[u]+1,m[u+1]);for(s in h){var g=h[s][0];o.info('Subj='+d+' Pred='+f+' Obj='+g),n.add(d,f,g)}}}}var O=[];o.info('SPARQL input: \n'+t);var B=new i,U=k(t),F=A(U);F.rdf||(F.rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns#'),F.rdfs||(F.rdfs='http://www.w3.org/2000/01/rdf-schema#');var q=C('SELECT',U),z=C('WHERE',U);if(0>q||0>z||q>z)return o.error('Invalid or nonexistent SELECT and WHERE tags in SPARQL query'),!1;if(T(U.slice(q+1,z),B),D(U.slice(z+2,U.length-1),B.pat),n)return B;for(var H in B.pat.statements){var x=B.pat.statements[H];'NamedNode'===x.subject.termType&&r.fetcher&&r.fetcher.lookUpThing(x.subject,'sparql:'+x.subject),'NamedNode'===x.object.termType&&r.fetcher&&r.fetcher.lookUpThing(x.object,'sparql:'+x.object)}return B}var o=a(42),i=a(77).Query;t.exports=r},function(t,n,a){'use strict';function r(t){return t&&t.__esModule?t:{default:t}}function i(t,n){if(!(t instanceof n))throw new TypeError('Cannot call a class as a function')}var o='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&'function'==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?'symbol':typeof t},s=function(){function t(t,n){for(var a=0,r;a<n.length;a++)r=n[a],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}return function(n,a,r){return a&&t(n.prototype,a),r&&t(n,r),n}}(),d=a(72),l=r(d),c=a(16).docpart,u=a(111),f=a(78).namedNode,m=a(59),h=a(110),g=a(16).join,b=a(32),y=function(){function t(n){if(i(this,t),this.store=n,n.updater)throw new Error('You can\'t have two UpdateManagers for the same store');n.fetcher||(n.fetcher=new u(n)),n.updater=this,this.ifps={},this.fps={},this.ns={},this.ns.link=m('http://www.w3.org/2007/ont/link#'),this.ns.http=m('http://www.w3.org/2007/ont/http#'),this.ns.httph=m('http://www.w3.org/2007/ont/httph#'),this.ns.ldp=m('http://www.w3.org/ns/ldp#'),this.ns.rdf=m('http://www.w3.org/1999/02/22-rdf-syntax-ns#'),this.ns.rdfs=m('http://www.w3.org/2000/01/rdf-schema#'),this.ns.rdf=m('http://www.w3.org/1999/02/22-rdf-syntax-ns#'),this.ns.owl=m('http://www.w3.org/2002/07/owl#'),this.patchControl=[]}return s(t,[{key:'patchControlFor',value:function t(n){return this.patchControl[n.uri]||(this.patchControl[n.uri]=[]),this.patchControl[n.uri]}},{key:'editable',value:function t(n,a){if(!n)return!1;if(a||(a=this.store),'file:///'===n.slice(0,8)){if(a.holds(a.sym(n),f('http://www.w3.org/1999/02/22-rdf-syntax-ns#type'),f('http://www.w3.org/2007/ont/link#MachineEditableDocument')))return'LOCALFILE';var o=a.statementsMatching(a.sym(n));return console.log('sparql.editable: Not MachineEditableDocument file '+n+'\n'),console.log(o.map(function(t){return t.toNT()}).join('\n')),!1}var s=!1,d=a.each(void 0,this.ns.link('requestedURI'),c(n)),l;if(a.holds(f(n),this.ns.rdf('type'),this.ns.ldp('Resource')))return'SPARQL';for(var u=0,r,i;u<d.length;u++)if(l=d[u],void 0!==l){var m=a.any(l,this.ns.link('response'));if(void 0!==l){var h=a.each(m,this.ns.httph('accept-patch'));if(h.length)for(r=0;r<h.length;r++)if(i=h[r].value.trim(),0<=i.indexOf('application/sparql-update'))return'SPARQL';var g=a.each(m,this.ns.httph('ms-author-via'));if(g.length)for(r=0;r<g.length;r++){if(i=g[r].value.trim(),0<=i.indexOf('SPARQL'))return'SPARQL';if(0<=i.indexOf('DAV'))return'DAV'}var b=a.each(m,this.ns.http('status'));if(b.length)for(r=0;r<b.length;r++)(200===b[r]||404===b[r])&&(s=!0)}else console.log('sparql.editable: No response for '+n+'\n')}if(0===d.length)console.log('sparql.editable: No request for '+n+'\n');else if(s)return!1;console.log('sparql.editable: inconclusive for '+n+'\n')}},{key:'anonymize',value:function t(n){return'_:'===n.toNT().substr(0,2)&&this.mentioned(n)?'?'+n.toNT().substr(2):n.toNT()}},{key:'anonymizeNT',value:function t(n){return this.anonymize(n.subject)+' '+this.anonymize(n.predicate)+' '+this.anonymize(n.object)+' .'}},{key:'statementBnodes',value:function t(n){return[n.subject,n.predicate,n.object].filter(function(t){return t.isBlank})}},{key:'statementArrayBnodes',value:function t(n){for(var a=[],r=0;r<n.length;r++)a=a.concat(this.statementBnodes(n[r]));a.sort();for(var i=[],o=0;o<a.length;o++)0!==o&&a[o].sameTerm(a[o-1])||i.push(a[o]);return i}},{key:'cacheIfps',value:function t(){this.ifps={};for(var n=this.store.each(void 0,this.ns.rdf('type'),this.ns.owl('InverseFunctionalProperty')),a=0;a<n.length;a++)this.ifps[n[a].uri]=!0;for(this.fps={},n=this.store.each(void 0,this.ns.rdf('type'),this.ns.owl('FunctionalProperty')),a=0;a<n.length;a++)this.fps[n[a].uri]=!0}},{key:'bnodeContext2',value:function t(n,a,r){for(var o=this.store.statementsMatching(void 0,void 0,n,a),s=0,i,d;s<o.length;s++)if(this.fps[o[s].predicate.uri]){if(i=o[s].subject,!i.isBlank)return[o[s]];if(r&&(d=this.bnodeContext2(i,a,r-1),d))return d.concat([o[s]])}for(o=this.store.statementsMatching(n,void 0,void 0,a),s=0;s<o.length;s++)if(this.ifps[o[s].predicate.uri]){if(i=o[s].object,!i.isBlank)return[o[s]];if(r&&(d=this.bnodeContext2(i,a,r-1),d))return d.concat([o[s]])}return null}},{key:'bnodeContext1',value:function t(n,a){for(var r=0,i;3>r;r++)if(i=this.bnodeContext2(n,a,r),null!==i)return i;return this.store.connectedStatements(n,a)}},{key:'mentioned',value:function t(n){return 0!==this.store.statementsMatching(n).length||0!==this.store.statementsMatching(void 0,n).length||0!==this.store.statementsMatching(void 0,void 0,n).length}},{key:'bnodeContext',value:function t(n,a){var r=[];if(n.length){this.cacheIfps();for(var o=0,i;o<n.length;o++)i=n[o],this.mentioned(i)&&(r=r.concat(this.bnodeContext1(i,a)))}return r}},{key:'statementContext',value:function t(n){var a=this.statementBnodes(n);return this.bnodeContext(a,n.why)}},{key:'contextWhere',value:function t(n){var a=this;return n&&0!==n.length?'WHERE { '+n.map(function(t){return a.anonymizeNT(t)}).join('\n')+' }\n':''}},{key:'fire',value:function t(n,a,r){var i=this;return Promise.resolve().then(function(){if(!n)throw new Error('No URI given for remote editing operation: '+a);console.log('sparql: sending update to <'+n+'>');var t={noMeta:!0,contentType:'application/sparql-update',body:a};return i.store.fetcher.webOperation('PATCH',n,t)}).then(function(t){if(!t.ok){var i='sparql: update failed for <'+n+'> status='+t.status+', '+t.statusText+'\n   for query: '+a;throw console.log(i),new Error(i)}console.log('sparql: update Ok for <'+n+'>'),r(n,t.ok,t.responseText,t)}).catch(function(t){r(n,!1,t.message,t)})}},{key:'update_statement',value:function t(n){if(!n||n.why){var a=this,r=this.statementContext(n);return{statement:n?[n.subject,n.predicate,n.object,n.why]:void 0,statementNT:n?this.anonymizeNT(n):void 0,where:a.contextWhere(r),set_object:function t(n,r){var i=this.where;i+='DELETE DATA { '+this.statementNT+' } ;\n',i+='INSERT DATA { '+this.anonymize(this.statement[0])+' '+this.anonymize(this.statement[1])+' '+this.anonymize(n)+'  . }\n',a.fire(this.statement[3].uri,i,r)}}}}},{key:'insert_statement',value:function t(n,a){var r=n instanceof Array?n[0]:n,o=this.contextWhere(this.statementContext(r));if(n instanceof Array){for(var s='',d=0;d<n.length;d++)s+=n[d]+'\n';o+='INSERT DATA { '+s+' }\n'}else o+='INSERT DATA { '+this.anonymize(n.subject)+' '+this.anonymize(n.predicate)+' '+this.anonymize(n.object)+'  . }\n';this.fire(r.why.uri,o,a)}},{key:'delete_statement',value:function t(n,a){var r=n instanceof Array?n[0]:n,o=this.contextWhere(this.statementContext(r));if(n instanceof Array){for(var s='',d=0;d<n.length;d++)s+=n[d]+'\n';o+='DELETE DATA { '+s+' }\n'}else o+='DELETE DATA { '+this.anonymize(n.subject)+' '+this.anonymize(n.predicate)+' '+this.anonymize(n.object)+'  . }\n';this.fire(r.why.uri,o,a)}},{key:'requestDownstreamAction',value:function t(n,a){var r=this.patchControlFor(n);if(!r.pendingUpstream)a(n);else if(!r.downstreamAction)r.downstreamAction=a;else if(''+r.downstreamAction!=''+a)throw new Error('Can\'t wait for > 1 different downstream actions')}},{key:'clearUpstreamCount',value:function t(n){var a=this.patchControlFor(n);a.upstreamCount=0}},{key:'getUpdatesVia',value:function t(n){var a=this.store.fetcher.getHeader(n,'updates-via');return a&&a.length?a[0].trim():null}},{key:'addDownstreamChangeListener',value:function t(n,a){var r=this,i=this.patchControlFor(n);i.downstreamChangeListeners||(i.downstreamChangeListeners=[]),i.downstreamChangeListeners.push(a),this.setRefreshHandler(n,function(t){r.reloadAndSync(t)})}},{key:'reloadAndSync',value:function t(n){var a=this.patchControlFor(n),r=this;if(a.reloading)return void console.log('   Already reloading - stop');a.reloading=!0;var o=1e3,i=function t(){console.log('try reload - timeout = '+o),r.reload(r.store,n,function(r,s,d){if(a.reloading=!1,!r)0===d.status?(console.log('Network error refreshing the data. Retrying in '+o/1e3),a.reloading=!0,o*=2,setTimeout(t,o)):console.log('Error '+d.status+'refreshing the data:'+s+'. Stopped'+n);else if(a.downstreamChangeListeners)for(var l=0;l<a.downstreamChangeListeners.length;l++)console.log('        Calling downstream listener '+l),a.downstreamChangeListeners[l]()})};i()}},{key:'setRefreshHandler',value:function t(n,a){var r=this.getUpdatesVia(n),i=a,o=this,s=this,d=1500,l=0;if(!r)return console.log('Server doies not support live updates thoughUpdates-Via :-('),!1;r=g(r,n.uri),r=r.replace(/^http:/,'ws:').replace(/^https:/,'wss:'),console.log('Web socket URI '+r);var c=function t(){var a;if('undefined'!=typeof WebSocket)a=new WebSocket(r);else if('undefined'!=typeof Services)a=Services.wm.getMostRecentWindow('navigator:browser').WebSocket(r);else if('undefined'!=typeof window&&window.WebSocket)a=window.WebSocket(r);else return void console.log('Live update disabled, as WebSocket not supported by platform :-(');a.onopen=function(){console.log('    websocket open'),d=1500,this.send('sub '+n.uri),l&&(console.log('Web socket has been down, better check for any news.'),s.requestDownstreamAction(n,i))};var c=o.patchControlFor(n);c.upstreamCount=0,a.onerror=function t(n){console.log('Error on Websocket:',n)},a.onclose=function(n){console.log('*** Websocket closed with code '+n.code+', reason \''+n.reason+'\' clean = '+n.clean),d*=2,l+=1,console.log('Retrying in '+d+'ms'),setTimeout(function(){console.log('Trying websocket again'),t()},d)},a.onmessage=function(t){if(t.data&&'pub'===t.data.slice(0,3)){if('upstreamCount'in c&&(c.upstreamCount-=1,0<=c.upstreamCount))return void console.log('just an echo: '+c.upstreamCount);console.log('Assume a real downstream change: '+c.upstreamCount+' -> 0'),c.upstreamCount=0,o.requestDownstreamAction(n,i)}}};return c(),!0}},{key:'update',value:function t(n,a,r){try{var s=this.store,d=n?n instanceof l.default?n.statements:n instanceof Array?n:[n]:[],c=a?a instanceof l.default?a.statements:a instanceof Array?a:[a]:[];if(!(d instanceof Array))throw new Error('Type Error '+('undefined'==typeof d?'undefined':o(d))+': '+d);if(!(c instanceof Array))throw new Error('Type Error '+('undefined'==typeof c?'undefined':o(c))+': '+c);if(0===d.length&&0===c.length)return r(null,!0);var u=d.length?d[0].why:c[0].why;if(!u){var f='Error patching: statement does not specify which document to patch:'+d[0]+', '+c[0];throw console.log(f),new Error(f)}var m=this.patchControlFor(u),h=Date.now(),g=['subject','predicate','object','why'],b=['insert','delete'],y={delete:d,insert:c};b.map(function(t){y[t].map(function(t){if(!u.sameTerm(t.why))throw new Error('update: destination '+u+' inconsistent with delete quad '+t.why);g.map(function(n){if('undefined'==typeof t[n])throw new Error('update: undefined '+n+' of statement.')})})});var w=this.editable(u.uri,s);if(!w)throw new Error('Can\'t make changes in uneditable '+u);var v;if(0<=w.indexOf('SPARQL')){var i=[];d.length&&(i=this.statementArrayBnodes(d)),c.length&&(i=i.concat(this.statementArrayBnodes(c)));var x=this.bnodeContext(i,u),_=this.contextWhere(x),k='';if(_.length){if(d.length){for(k+='DELETE { ',v=0;v<d.length;v++)k+=this.anonymizeNT(d[v])+'\n';k+=' }\n'}if(c.length){for(k+='INSERT { ',v=0;v<c.length;v++)k+=this.anonymizeNT(c[v])+'\n';k+=' }\n'}k+=_}else{if(d.length){for(k+='DELETE DATA { ',v=0;v<d.length;v++)k+=this.anonymizeNT(d[v])+'\n';k+=' } \n'}if(c.length){for(d.length&&(k+=' ; '),k+='INSERT DATA { ',v=0;v<c.length;v++)k+=this.anonymizeNT(c[v])+'\n';k+=' }\n'}}m.pendingUpstream=m.pendingUpstream?m.pendingUpstream+1:1,'upstreamCount'in m&&(m.upstreamCount+=1,console.log('upstream count up to : '+m.upstreamCount)),this.fire(u.uri,k,function(t,n,a,o){if(o.elapsedTimeMs=Date.now()-h,console.log(0?'FAILURE '+o.status+' elapsed '+o.elapsedTimeMs+'ms':'success'),n){try{s.remove(d)}catch(t){n=!1,a='Remote Ok BUT error deleting '+d.length+' from store!!! '+t}for(var l=0;l<c.length;l++)s.add(c[l].subject,c[l].predicate,c[l].object,u)}if(r(t,n,a,o),m.pendingUpstream-=1,0===m.pendingUpstream&&m.downstreamAction){var i=m.downstreamAction;delete m.downstreamAction,console.log('delayed downstream action:'),i(u)}})}else if(0<=w.indexOf('DAV'))this.updateDav(u,d,c,r);else if(0<=w.indexOf('LOCALFILE'))try{this.updateLocalFile(u,d,c,r)}catch(t){r(u.uri,!1,'Exception trying to write back file <'+u.uri+'>\n')}else throw new Error('Unhandled edit method: \''+w+'\' for '+u)}catch(t){r(void 0,!1,'Exception in update: '+t+'\n'+$rdf.Util.stackString(t))}}},{key:'updateDav',value:function t(n,a,r,o){var s=this.store,d=s.any(n,this.ns.link('request'));if(!d)throw new Error('No record of our HTTP GET request for document: '+n);var l=s.any(d,this.ns.link('response'));if(!l)return null;var c=s.the(l,this.ns.httph('content-type')).value,u=s.statementsMatching(void 0,void 0,void 0,n).slice(),f;for(f=0;f<a.length;f++)b.RDFArrayRemove(u,a[f]);for(f=0;f<r.length;f++)u.push(r[f]);var i=this.serialize(n.uri,u,c),m=s.the(l,this.ns.httph('content-location')),h;m&&(h=g(m.value,h));var y={contentType:c,noMeta:!0,body:i};return s.fetcher.webOperation('PUT',h,y).then(function(t){if(!t.ok)throw new Error(t.error);for(var d=0;d<a.length;d++)s.remove(a[d]);for(d=0;d<r.length;d++)s.add(r[d].subject,r[d].predicate,r[d].object,n);o(n.uri,t.ok,t.responseText,t)}).catch(function(t){o(n.uri,!1,t.message,t)})}},{key:'updateLocalFile',value:function t(n,a,r,o){var s=this.store;console.log('Writing back to local file\n');var d=s.statementsMatching(void 0,void 0,void 0,n).slice(),l;for(l=0;l<a.length;l++)b.RDFArrayRemove(d,a[l]);for(l=0;l<r.length;l++)d.push(r[l]);var i=n.uri.lastIndexOf('.');if(1>i)throw new Error('Rewriting file: No filename extension: '+n.uri);var c=n.uri.slice(i+1),f=u.CONTENT_TYPE_BY_EXT[c];if(!f)throw new Error('File extension .'+c+' not supported for data write');var m=this.serialize(n.uri,d,f);console.log('Writing back: <<<'+m+'>>>');var h=n.uri.slice(7),g=Components.classes['@mozilla.org/file/local;1'].createInstance(Components.interfaces.nsILocalFile);if(g.initWithPath(h),!g.exists())throw new Error('Rewriting file <'+n.uri+'> but it does not exist!');var y=Components.classes['@mozilla.org/network/file-output-stream;1'].createInstance(Components.interfaces.nsIFileOutputStream);for(y.init(g,42,parseInt('0666',8),0),y.write(m,m.length),y.close(),l=0;l<a.length;l++)s.remove(a[l]);for(l=0;l<r.length;l++)s.add(r[l].subject,r[l].predicate,r[l].object,n);o(n.uri,!0,'')}},{key:'serialize',value:function t(n,a,r){var i=this.store,o;if('string'==typeof a)return a;var s=h(i);switch(s.suggestNamespaces(i.namespaces),s.setBase(n),r){case'text/xml':case'application/rdf+xml':o=s.statementsToXML(a);break;case'text/n3':case'text/turtle':case'application/x-turtle':case'application/n3':o=s.statementsToN3(a);break;default:throw new Error('Content-type '+r+' not supported for data serialization');}return o}},{key:'put',value:function t(n,a,r,i){var o=this,s=this.store,d;return Promise.resolve().then(function(){return d=o.serialize(n.uri,a,r),s.fetcher.webOperation('PUT',n.uri,{contentType:r,body:d})}).then(function(t){return t.ok?void(delete s.fetcher.nonexistent[n.uri],delete s.fetcher.requested[n.uri],'string'!=typeof a&&a.map(function(t){s.addStatement(t)}),i(n.uri,t.ok,'',t)):i(n.uri,t.ok,t.error,t)}).catch(function(t){i(n.uri,!1,t.message)})}},{key:'reload',value:function t(n,a,r){var i=Date.now(),o={force:!0,noMeta:!0,clearPreviousData:!0};n.fetcher.nowOrWhenFetched(a.uri,o,function(t,n,o){if(!t)console.log('    ERROR reloading data: '+n),r(!1,'Error reloading data: '+n,o);else if(o.onErrorWasCalled||200!==o.status)console.log('    Non-HTTP error reloading data! onErrorWasCalled='+o.onErrorWasCalled+' status: '+o.status),r(!1,'Non-HTTP error reloading data: '+n,o);else{var s=Date.now()-i;a.reloadTimeTotal||(a.reloadTimeTotal=0),a.reloadTimeCount||(a.reloadTimeCount=0),a.reloadTimeTotal+=s,a.reloadTimeCount+=1,console.log('    Fetch took '+s+'ms, av. of '+a.reloadTimeCount+' = '+a.reloadTimeTotal/a.reloadTimeCount+'ms.'),r(!0)}})}}]),t}();t.exports=y},function(t,n,a){'use strict';function r(t){return t&&t.__esModule?t:{default:t}}function i(t,n){return Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(n)}}))}function o(t,n){if(!(t instanceof n))throw new TypeError('Cannot call a class as a function')}function s(t,n,a){var r=E.default.any(t,n);return r?r.value:a}function d(t,n){var a=n.toDel,r=n.toIns;return new Promise(function(t,n){E.default.updater.update(a,r,function(a,r,i){return r?void t():n(new Error('PATCH failed for resource <'+a+'>: '+i))})})}function l(t){return{groupIndex:E.default.any(t,k.default.vcard('groupIndex')),groupContainer:E.default.sym(t.dir().uri+'Group/')}}Object.defineProperty(n,'__esModule',{value:!0}),n.GroupBuilder=n.Group=n.GroupPicker=n.PeoplePicker=void 0;var c=function(){function t(t,n){for(var a=0,r;a<n.length;a++)r=n[a],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}return function(n,a,r){return a&&t(n.prototype,a),r&&t(n,r),n}}(),u=i(['\n        To add someone to this group, drag and drop their WebID URL onto the box.\n      '],['\n        To add someone to this group, drag and drop their WebID URL onto the box.\n      ']),f=a(211),m=r(f),h=a(353),g=r(h),b=a(4),y=r(b),w=a(243),v=a(95),x=a(23),_=a(14),k=r(_),C=a(20),E=r(C),T=n.PeoplePicker=function(){function t(n,a,r,i){o(this,t),this.options=i||{},this.element=n,this.typeIndex=a,this.groupPickedCb=r,this.selectedgroup=this.options.selectedgroup,this.onSelectGroup=this.onSelectGroup.bind(this)}return c(t,[{key:'render',value:function t(){var n=this,a=document.createElement('div');if(a.style.maxWidth='350px',a.style.minHeight='200px',a.style.outline='1px solid black',a.style.display='flex',this.selectedgroup){a.style.flexDirection='column';var r=document.createElement('div');new S(r,this.selectedgroup).render();var i=document.createElement('button');i.textContent=(0,m.default)('Change group'),i.addEventListener('click',function(t){n.selectedgroup=null,n.render()}),a.appendChild(r),a.appendChild(i)}else this.findAddressBook(this.typeIndex).then(function(t){var r=t.book,i=document.createElement('button');i.textContent=(0,m.default)('Pick an existing group'),i.style.margin='auto',i.addEventListener('click',function(t){new A(a,r,n.onSelectGroup).render()});var o=document.createElement('button');o.textContent=(0,m.default)('Create a new group'),o.style.margin='auto',o.addEventListener('click',function(t){n.createNewGroup(r).then(function(t){var a=t.group;new I(n.element,r,a,n.onSelectGroup).render()}).catch(function(t){n.element.appendChild((0,v.errorMessageBlock)(document,(0,m.default)('Error creating a new group. ('+t+')')))})}),a.appendChild(i),a.appendChild(o),n.element.innerHTML='',n.element.appendChild(a)}).catch(function(t){n.element.appendChild((0,v.errorMessageBlock)(document,(0,m.default)('Could find your groups. ('+t+')')))});return this.element.innerHTML='',this.element.appendChild(a),this}},{key:'findAddressBook',value:function t(n){return new Promise(function(t,a){E.default.fetcher.nowOrWhenFetched(n,function(r,i){if(!r)return a(i);var o=E.default.any(null,k.default.solid('forClass'),k.default.vcard('AddressBook'));if(!o)return a(new Error('no address book registered in the solid type index '+n));var s=E.default.any(o,k.default.solid('instance'));return s?void E.default.fetcher.load(s).then(function(n){return t({book:s})}).catch(function(t){return a(new Error('Could not load address book '+t))}):a(new Error('incomplete address book registration'))})})}},{key:'createNewGroup',value:function t(n){var a=l(n),r=a.groupIndex,i=a.groupContainer,o=y.default.sym(''+i.uri+g.default.v4().slice(0,8)+'.ttl#this'),s=this.options.defaultNewGroupName||'Untitled Group',c=[o.doc(),r].map(function(t){var a=y.default.st(o,k.default.rdf('type'),k.default.vcard('Group'),t),i=y.default.st(o,k.default.vcard('fn'),s,o.doc(),t),l=y.default.st(n,k.default.vcard('includesGroup'),o,t),c=t.equals(r)?[a,i,l]:[a,i];return d(t.uri,{toIns:c}).then(function(){c.forEach(function(t){E.default.add(t)})})});return Promise.all(c).then(function(){return{group:o}}).catch(function(t){throw console.log('Could not create new group.  PATCH failed '+t),new Error('Couldn\'t create new group.  PATCH failed for ('+(t.xhr?t.xhr.responseURL:'')+' )')})}},{key:'onSelectGroup',value:function t(n){this.selectedgroup=n,this.groupPickedCb(n),this.render()}}]),t}(),A=n.GroupPicker=function(){function t(n,a,r){o(this,t),this.element=n,this.book=a,this.onSelectGroup=r}return c(t,[{key:'render',value:function t(){var n=this;return this.loadGroups().then(function(t){var a=document.createElement('div');a.style.display='flex',a.style.flexDirection='column',t.forEach(function(t){var r=document.createElement('button');r.addEventListener('click',n.handleClickGroup(t)),new S(r,t).render(),a.appendChild(r)}),n.element.innerHTML='',n.element.appendChild(a)}).catch(function(t){n.element.appendChild((0,v.errorMessageBlock)(document,(0,m.default)('There was an error loading your groups. ('+t+')')))}),this}},{key:'loadGroups',value:function t(){var n=this;return new Promise(function(t,a){var r=l(n.book),i=r.groupIndex;E.default.fetcher.nowOrWhenFetched(i,function(r,i){if(!r)return a(i);var o=E.default.each(n.book,k.default.vcard('includesGroup'));return t(o)})})}},{key:'handleClickGroup',value:function t(n){var a=this;return function(t){a.onSelectGroup(n)}}}]),t}(),S=n.Group=function(){function t(n,a){o(this,t),this.element=n,this.group=a}return c(t,[{key:'render',value:function t(){var n=document.createElement('div');return n.textContent=(0,m.default)(s(this.group,k.default.vcard('fn'),'['+this.group.value+']')),this.element.innerHTML='',this.element.appendChild(n),this}}]),t}(),I=n.GroupBuilder=function(){function t(n,a,r,i,s){o(this,t),this.element=n,this.book=a,this.group=r,this.onGroupChanged=function(t,n,a){s&&s(t,n,a)},this.groupChangedCb=s,this.doneBuildingCb=i}return c(t,[{key:'refresh',value:function t(){}},{key:'render',value:function t(){var n=this,a=document.createElement('div');a.style.maxWidth='350px',a.style.minHeight='200px',a.style.outline='1px solid black',a.style.display='flex',a.style.flexDirection='column',(0,w.makeDropTarget)(a,function(t){t.map(function(t){n.add(t).catch(function(t){n.element.appendChild((0,v.errorMessageBlock)(document,(0,m.default)('Could not add the given WebId. ('+t+')')))})})});var r=document.createElement('input');r.type='text',r.value=s(this.group,k.default.vcard('fn'),'Untitled Group'),r.addEventListener('change',function(t){n.setGroupName(t.target.value).catch(function(t){n.element.appendChild((0,v.errorMessageBlock)(document,'Error changing group name. ('+t+')'))})});var i=document.createElement('label');if(i.textContent=(0,m.default)('Group Name:'),i.appendChild(r),a.appendChild(i),E.default.any(this.group,k.default.vcard('hasMember')))E.default.match(this.group,k.default.vcard('hasMember')).forEach(function(t){var r=t.object,i=document.createElement('div');new N(i,r,n.handleRemove(r)).render(),a.appendChild(i)});else{var o=document.createElement('p');o.textContent=(0,m.default)(u),a.appendChild(o)}var d=document.createElement('button');return d.textContent=(0,m.default)('Done'),d.addEventListener('click',function(t){n.doneBuildingCb(n.group)}),a.appendChild(d),this.element.innerHTML='',this.element.appendChild(a),this}},{key:'add',value:function t(n){var a=this;return new Promise(function(t,r){E.default.fetcher.nowOrWhenFetched(n,function(i,o){if(!i)return a.onGroupChanged(o),r(o);var s=y.default.namedNode(n),d=E.default.any(s,k.default.rdf('type'));return d&&d.equals(k.default.foaf('Person'))?t(s):r(new Error('Only people supported right now. (tried to add something of type '+d.value+')'))})}).then(function(t){var n=y.default.st(a.group,k.default.vcard('hasMember'),t);return E.default.holdsStatement(n)?t:d(a.group.doc().uri,{toIns:[n]}).then(function(){n.why=a.group.doc(),E.default.add(n),a.onGroupChanged(null,'added',t),a.render()})})}},{key:'handleRemove',value:function t(n){var a=this;return function(t){var r=y.default.st(a.group,k.default.vcard('hasMember'),n);return d(a.group.doc().uri,{toDel:[r]}).then(function(){return E.default.remove(r),a.onGroupChanged(null,'removed',n),a.render(),!0}).catch(function(t){var a=E.default.any(n,k.default.foaf('name')),r=a&&a.value?'Could not remove '+a.value+'. ('+t+')':'Could not remove '+n.value+'. ('+t+')';throw new Error(r)})}}},{key:'setGroupName',value:function t(n){var a=this,r=l(this.book),i=r.groupIndex,o=[this.group.doc(),i].map(function(t){var r=E.default.match(a.group,k.default.vcard('fn'),null,t),i=y.default.st(a.group,k.default.vcard('fn'),y.default.literal(n));return d(t.value,{toDel:r,toIns:[i]}).then(function(n){E.default.removeStatements(r),i.why=t,E.default.add(i)})});return Promise.all(o)}}]),t}(),N=function(){function t(n,a,r){o(this,t),this.webIdNode=a,this.element=n,this.handleRemove=r}return c(t,[{key:'render',value:function t(){var n=this,a=document.createElement('div');a.style.display='flex';var r=s(this.webIdNode,k.default.foaf('img'),x.iconBase+'noun_15059.svg'),i=document.createElement('img');i.src=(0,m.default)(r),i.width='50',i.height='50',i.style.margin='5px';var o=s(this.webIdNode,k.default.foaf('name'),'['+this.webIdNode+']'),d=document.createElement('span');d.innerHTML=(0,m.default)(o),d.style.flexGrow='1',d.style.margin='auto 0';var l=document.createElement('button');return l.textContent='Remove',l.addEventListener('click',function(t){return n.handleRemove().catch(function(t){n.element.appendChild((0,v.errorMessageBlock)(document,(0,m.default)(''+t)))})}),l.style.margin='5px',a.appendChild(i),a.appendChild(d),a.appendChild(l),this.element.innerHTML='',this.element.appendChild(a),this}}]),t}()},function(t,n,a){(function(r){var o;(function(s){'use strict';function d(){var t=s.crypto||s.msCrypto;if(!h&&t&&t.getRandomValues)try{var n=new Uint8Array(16);y=h=function a(){return t.getRandomValues(n),n},h()}catch(t){}if(!h){var a=Array(16);g=h=function(){for(var t=0,n;16>t;t++)0==(3&t)&&(n=4294967296*Math.random()),a[t]=255&n>>>((3&t)<<3);return a},'undefined'!=typeof console&&console.warn&&console.warn('[SECURITY] node-uuid: crypto not usable, falling back to insecure Math.random()')}}function l(){if(!0)try{var t=a(212).randomBytes;b=h=t&&function(){return t(16)},h()}catch(t){}}function c(t,n,a){var r=n&&a||0,i=0;for(n=n||[],t.toLowerCase().replace(/[0-9a-f]{2}/g,function(t){16>i&&(n[r+i++]=_[t])});16>i;)n[r+i++]=0;return n}function u(t,n){var a=n||0,r=x;return r[t[a++]]+r[t[a++]]+r[t[a++]]+r[t[a++]]+'-'+r[t[a++]]+r[t[a++]]+'-'+r[t[a++]]+r[t[a++]]+'-'+r[t[a++]]+r[t[a++]]+'-'+r[t[a++]]+r[t[a++]]+r[t[a++]]+r[t[a++]]+r[t[a++]]+r[t[a++]]}function f(t,a,r){var o=a&&r||0,i=a||[];t=t||{};var s=null==t.clockseq?E:t.clockseq,d=null==t.msecs?new Date().getTime():t.msecs,l=null==t.nsecs?A+1:t.nsecs,c=d-T+(l-A)/1e4;if(0>c&&null==t.clockseq&&(s=16383&s+1),(0>c||d>T)&&null==t.nsecs&&(l=0),1e4<=l)throw new Error('uuid.v1(): Can\'t create more than 10M uuids/sec');T=d,A=l,E=s,d+=1.22192928e13;var f=(1e4*(268435455&d)+l)%4294967296;i[o++]=255&f>>>24,i[o++]=255&f>>>16,i[o++]=255&f>>>8,i[o++]=255&f;var m=268435455&1e4*(d/4294967296);i[o++]=255&m>>>8,i[o++]=255&m,i[o++]=16|15&m>>>24,i[o++]=255&m>>>16,i[o++]=128|s>>>8,i[o++]=255&s;for(var h=t.node||C,g=0;6>g;g++)i[o+g]=h[g];return a?a:u(i)}function m(t,n,a){var r=n&&a||0;'string'==typeof t&&(n='binary'===t?new v(16):null,t=null),t=t||{};var i=t.random||(t.rng||h)();if(i[6]=64|15&i[6],i[8]=128|63&i[8],n)for(var o=0;16>o;o++)n[r+o]=i[o];return n||u(i)}var h,g,b,y,w;s?d():l();for(var v='function'==typeof r?r:Array,x=[],_={},k=0;256>k;k++)x[k]=(k+256).toString(16).substr(1),_[x[k]]=k;var i=h(),C=[1|i[0],i[1],i[2],i[3],i[4],i[5]],E=16383&(i[6]<<8|i[7]),T=0,A=0,S=m;S.v1=f,S.v4=m,S.parse=c,S.unparse=u,S.BufferClass=v,S._rng=h,S._mathRNG=g,S._nodeRNG=b,S._whatwgRNG=y,'undefined'!=typeof t&&t.exports?t.exports=S:!0?(o=function(){return S}.call(n,a,n,t),!(o!==void 0&&(t.exports=o))):(w=s.uuid,S.noConflict=function(){return s.uuid=w,S},s.uuid=S)})('undefined'==typeof window?null:window)}).call(n,a(2).Buffer)},function(t,n,a){'use strict';(function(n){function a(t){if(0!=t.length%r){var a=t.length+(r-t.length%r);t=n.concat([t,i],a)}for(var o=Array(t.length>>>2),s=0,d=0;s<t.length;s+=r,d++)o[d]=t.readInt32LE(s);return o}var r=4,i=new n(r);i.fill(0);var o=8,s=16;t.exports=function t(r,d){var l=d(a(r),r.length*o);r=new n(s);for(var c=0;c<l.length;c++)r.writeInt32LE(l[c],c<<2,!0);return r}}).call(n,a(2).Buffer)},function(t,n,a){'use strict';(function(n){function r(t){i.call(this),this._block=new n(t),this._blockSize=t,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}var i=a(53).Transform,o=a(0);o(r,i),r.prototype._transform=function(t,a,r){var i=null;try{'buffer'!==a&&(t=new n(t,a)),this.update(t)}catch(t){i=t}r(i)},r.prototype._flush=function(t){var n=null;try{this.push(this._digest())}catch(t){n=t}t(n)},r.prototype.update=function(t,a){if(!n.isBuffer(t)&&'string'!=typeof t)throw new TypeError('Data must be a string or a buffer');if(this._finalized)throw new Error('Digest already called');n.isBuffer(t)||(t=new n(t,a||'binary'));for(var r=this._block,o=0;this._blockOffset+t.length-o>=this._blockSize;){for(var s=this._blockOffset;s<this._blockSize;)r[s++]=t[o++];this._update(),this._blockOffset=0}for(;o<t.length;)r[this._blockOffset++]=t[o++];for(var i=0,d=8*t.length;0<d;++i)this._length[i]+=d,d=0|this._length[i]/4294967296,0<d&&(this._length[i]-=4294967296*d);return this},r.prototype._update=function(t){throw new Error('_update is not implemented')},r.prototype.digest=function(t){if(this._finalized)throw new Error('Digest already called');this._finalized=!0;var n=this._digest();return void 0!==t&&(n=n.toString(t)),n},r.prototype._digest=function(){throw new Error('_digest is not implemented')},t.exports=r}).call(n,a(2).Buffer)},function(t,n,a){function r(){this.init(),this._w=f,d.call(this,64,56)}function i(t){return t<<5|t>>>27}function o(t){return t<<30|t>>>2}function l(t,n,a,r){return 0===t?n&a|~n&r:2===t?n&a|n&r|a&r:n^a^r}var s=a(0),d=a(56),c=a(3).Buffer,u=[1518500249,1859775393,-1894007588,-899497514],f=Array(80);s(r,d),r.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},r.prototype._update=function(n){for(var r=this._w,f=0|this._a,a=0|this._b,m=0|this._c,c=0|this._d,d=0|this._e,h=0;16>h;++h)r[h]=n.readInt32BE(4*h);for(;80>h;++h)r[h]=r[h-3]^r[h-8]^r[h-14]^r[h-16];for(var g=0;80>g;++g){var b=~~(g/20),s=0|i(f)+l(b,a,m,c)+d+r[g]+u[b];d=c,c=m,m=o(a),a=f,f=s}this._a=0|f+this._a,this._b=0|a+this._b,this._c=0|m+this._c,this._d=0|c+this._d,this._e=0|d+this._e},r.prototype._hash=function(){var t=c.allocUnsafe(20);return t.writeInt32BE(0|this._a,0),t.writeInt32BE(0|this._b,4),t.writeInt32BE(0|this._c,8),t.writeInt32BE(0|this._d,12),t.writeInt32BE(0|this._e,16),t},t.exports=r},function(t,n,a){function r(){this.init(),this._w=m,d.call(this,64,56)}function o(t){return t<<1|t>>>31}function i(t){return t<<5|t>>>27}function l(t){return t<<30|t>>>2}function u(t,n,a,r){return 0===t?n&a|~n&r:2===t?n&a|n&r|a&r:n^a^r}var s=a(0),d=a(56),c=a(3).Buffer,f=[1518500249,1859775393,-1894007588,-899497514],m=Array(80);s(r,d),r.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},r.prototype._update=function(n){for(var r=this._w,m=0|this._a,a=0|this._b,h=0|this._c,c=0|this._d,d=0|this._e,g=0;16>g;++g)r[g]=n.readInt32BE(4*g);for(;80>g;++g)r[g]=o(r[g-3]^r[g-8]^r[g-14]^r[g-16]);for(var b=0;80>b;++b){var y=~~(b/20),s=0|i(m)+u(y,a,h,c)+d+r[b]+f[y];d=c,c=h,h=l(a),a=m,m=s}this._a=0|m+this._a,this._b=0|a+this._b,this._c=0|h+this._c,this._d=0|c+this._d,this._e=0|d+this._e},r.prototype._hash=function(){var t=c.allocUnsafe(20);return t.writeInt32BE(0|this._a,0),t.writeInt32BE(0|this._b,4),t.writeInt32BE(0|this._c,8),t.writeInt32BE(0|this._d,12),t.writeInt32BE(0|this._e,16),t},t.exports=r},function(t,n,a){function r(){this.init(),this._w=l,s.call(this,64,56)}var i=a(0),o=a(213),s=a(56),d=a(3).Buffer,l=Array(64);i(r,o),r.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},r.prototype._hash=function(){var t=d.allocUnsafe(28);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t},t.exports=r},function(t,n,a){function r(){this.init(),this._w=l,s.call(this,128,112)}var i=a(0),o=a(214),s=a(56),d=a(3).Buffer,l=Array(160);i(r,o),r.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},r.prototype._hash=function(){function t(t,a,r){n.writeInt32BE(t,r),n.writeInt32BE(a,r+4)}var n=d.allocUnsafe(48);return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),n},t.exports=r},function(t,n,a){'use strict';function r(t,n){s.call(this,'digest'),'string'==typeof n&&(n=o.from(n)),this._alg=t,this._key=n,n.length>l?n=t(n):n.length<l&&(n=o.concat([n,d],l));for(var a=this._ipad=o.allocUnsafe(l),r=this._opad=o.allocUnsafe(l),c=0;c<l;c++)a[c]=54^n[c],r[c]=92^n[c];this._hash=[a]}var i=a(0),o=a(3).Buffer,s=a(40),d=o.alloc(128),l=64;i(r,s),r.prototype._update=function(t){this._hash.push(t)},r.prototype._final=function(){var t=this._alg(o.concat(this._hash));return this._alg(o.concat([this._opad,t]))},t.exports=r},function(t,n,a){t.exports=a(216)},function(t,n,a){(function(n,r){function i(t){if(n.process&&!n.process.browser)return Promise.resolve(!1);if(!f||!f.importKey||!f.deriveBits)return Promise.resolve(!1);if(void 0!==h[t])return h[t];g=g||u.alloc(8);var a=o(g,g,10,128,t).then(function(){return!0}).catch(function(){return!1});return h[t]=a,a}function o(t,n,a,r,i){return f.importKey('raw',t,{name:'PBKDF2'},!1,['deriveBits']).then(function(t){return f.deriveBits({name:'PBKDF2',salt:n,iterations:a,hash:{name:i}},t,r<<3)}).then(function(t){return u.from(t)})}function s(t,n){t.then(function(t){r.nextTick(function(){n(null,t)})},function(t){r.nextTick(function(){n(t)})})}var d=a(218),l=a(219),c=a(220),u=a(3).Buffer,f=n.crypto&&n.crypto.subtle,m={sha:'SHA-1',"sha-1":'SHA-1',sha1:'SHA-1',sha256:'SHA-256',"sha-256":'SHA-256',sha384:'SHA-384',"sha-384":'SHA-384',"sha-512":'SHA-512',sha512:'SHA-512'},h=[],g;t.exports=function(t,a,f,h,g,b){if(u.isBuffer(t)||(t=u.from(t,l)),u.isBuffer(a)||(a=u.from(a,l)),d(f,h),'function'==typeof g&&(b=g,g=void 0),'function'!=typeof b)throw new Error('No callback provided to pbkdf2');g=g||'sha1';var y=m[g.toLowerCase()];return y&&'function'==typeof n.Promise?void s(i(y).then(function(n){return n?o(t,a,f,h,y):c(t,a,f,h,g)}),b):r.nextTick(function(){var n;try{n=c(t,a,f,h,g)}catch(t){return b(t)}b(null,n)})}}).call(n,a(5),a(11))},function(t,n,a){function r(t,n){var a,r;if(t=t.toLowerCase(),m[t])a=m[t].key,r=m[t].iv;else if(f[t])a=8*f[t].key,r=f[t].iv;else throw new TypeError('invalid suite type');var i=l(n,!1,a,r);return o(t,i.key,i.iv)}function i(t,n){var a,r;if(t=t.toLowerCase(),m[t])a=m[t].key,r=m[t].iv;else if(f[t])a=8*f[t].key,r=f[t].iv;else throw new TypeError('invalid suite type');var i=l(n,!1,a,r);return s(t,i.key,i.iv)}function o(t,n,a){if(t=t.toLowerCase(),m[t])return c.createCipheriv(t,n,a);if(f[t])return new u({key:n,iv:a,mode:t});throw new TypeError('invalid suite type')}function s(t,n,a){if(t=t.toLowerCase(),m[t])return c.createDecipheriv(t,n,a);if(f[t])return new u({key:n,iv:a,mode:t,decrypt:!0});throw new TypeError('invalid suite type')}function d(){return Object.keys(f).concat(c.getCiphers())}var l=a(91),c=a(137),u=a(375),f=a(381),m=a(138);n.createCipher=n.Cipher=r,n.createCipheriv=n.Cipheriv=o,n.createDecipher=n.Decipher=i,n.createDecipheriv=n.Decipheriv=s,n.listCiphers=n.getCiphers=d},function(t,n,a){'use strict';(function(n){function r(){c.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function i(t,a){return t<<a|t>>>32-a}function o(t,n,a,r,o,d,l){return 0|i(0|t+(n&a|~n&r)+o+d,l)+n}function s(t,n,a,r,o,l,c){return 0|i(0|t+(n&r|a&~r)+o+l,c)+n}function l(t,n,a,r,o,d,l){return 0|i(0|t+(n^a^r)+o+d,l)+n}function u(t,n,a,r,o,l,c){return 0|i(0|t+(a^(n|~r))+o+l,c)+n}var d=a(0),c=a(365),f=Array(16);d(r,c),r.prototype._update=function(){for(var t=f,n=0;16>n;++n)t[n]=this._block.readInt32LE(4*n);var r=this._a,a=this._b,i=this._c,c=this._d;r=o(r,a,i,c,t[0],3614090360,7),c=o(c,r,a,i,t[1],3905402710,12),i=o(i,c,r,a,t[2],606105819,17),a=o(a,i,c,r,t[3],3250441966,22),r=o(r,a,i,c,t[4],4118548399,7),c=o(c,r,a,i,t[5],1200080426,12),i=o(i,c,r,a,t[6],2821735955,17),a=o(a,i,c,r,t[7],4249261313,22),r=o(r,a,i,c,t[8],1770035416,7),c=o(c,r,a,i,t[9],2336552879,12),i=o(i,c,r,a,t[10],4294925233,17),a=o(a,i,c,r,t[11],2304563134,22),r=o(r,a,i,c,t[12],1804603682,7),c=o(c,r,a,i,t[13],4254626195,12),i=o(i,c,r,a,t[14],2792965006,17),a=o(a,i,c,r,t[15],1236535329,22),r=s(r,a,i,c,t[1],4129170786,5),c=s(c,r,a,i,t[6],3225465664,9),i=s(i,c,r,a,t[11],643717713,14),a=s(a,i,c,r,t[0],3921069994,20),r=s(r,a,i,c,t[5],3593408605,5),c=s(c,r,a,i,t[10],38016083,9),i=s(i,c,r,a,t[15],3634488961,14),a=s(a,i,c,r,t[4],3889429448,20),r=s(r,a,i,c,t[9],568446438,5),c=s(c,r,a,i,t[14],3275163606,9),i=s(i,c,r,a,t[3],4107603335,14),a=s(a,i,c,r,t[8],1163531501,20),r=s(r,a,i,c,t[13],2850285829,5),c=s(c,r,a,i,t[2],4243563512,9),i=s(i,c,r,a,t[7],1735328473,14),a=s(a,i,c,r,t[12],2368359562,20),r=l(r,a,i,c,t[5],4294588738,4),c=l(c,r,a,i,t[8],2272392833,11),i=l(i,c,r,a,t[11],1839030562,16),a=l(a,i,c,r,t[14],4259657740,23),r=l(r,a,i,c,t[1],2763975236,4),c=l(c,r,a,i,t[4],1272893353,11),i=l(i,c,r,a,t[7],4139469664,16),a=l(a,i,c,r,t[10],3200236656,23),r=l(r,a,i,c,t[13],681279174,4),c=l(c,r,a,i,t[0],3936430074,11),i=l(i,c,r,a,t[3],3572445317,16),a=l(a,i,c,r,t[6],76029189,23),r=l(r,a,i,c,t[9],3654602809,4),c=l(c,r,a,i,t[12],3873151461,11),i=l(i,c,r,a,t[15],530742520,16),a=l(a,i,c,r,t[2],3299628645,23),r=u(r,a,i,c,t[0],4096336452,6),c=u(c,r,a,i,t[7],1126891415,10),i=u(i,c,r,a,t[14],2878612391,15),a=u(a,i,c,r,t[5],4237533241,21),r=u(r,a,i,c,t[12],1700485571,6),c=u(c,r,a,i,t[3],2399980690,10),i=u(i,c,r,a,t[10],4293915773,15),a=u(a,i,c,r,t[1],2240044497,21),r=u(r,a,i,c,t[8],1873313359,6),c=u(c,r,a,i,t[15],4264355552,10),i=u(i,c,r,a,t[6],2734768916,15),a=u(a,i,c,r,t[13],1309151649,21),r=u(r,a,i,c,t[4],4149444226,6),c=u(c,r,a,i,t[11],3174756917,10),i=u(i,c,r,a,t[2],718787259,15),a=u(a,i,c,r,t[9],3951481745,21),this._a=0|this._a+r,this._b=0|this._b+a,this._c=0|this._c+i,this._d=0|this._d+c},r.prototype._digest=function(){this._block[this._blockOffset++]=128,56<this._blockOffset&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=new n(16);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t},t.exports=r}).call(n,a(2).Buffer)},function(t,n,a){'use strict';function r(t,n){if(!o.isBuffer(t)&&'string'!=typeof t)throw new TypeError(n+' must be a string or a buffer')}function i(t){s.call(this),this._block=o.allocUnsafe(t),this._blockSize=t,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}var o=a(3).Buffer,s=a(53).Transform,d=a(0);d(i,s),i.prototype._transform=function(t,n,a){var r=null;try{this.update(t,n)}catch(t){r=t}a(r)},i.prototype._flush=function(t){var n=null;try{this.push(this.digest())}catch(t){n=t}t(n)},i.prototype.update=function(t,n){if(r(t,'Data'),this._finalized)throw new Error('Digest already called');o.isBuffer(t)||(t=o.from(t,n));for(var a=this._block,s=0;this._blockOffset+t.length-s>=this._blockSize;){for(var d=this._blockOffset;d<this._blockSize;)a[d++]=t[s++];this._update(),this._blockOffset=0}for(;s<t.length;)a[this._blockOffset++]=t[s++];for(var i=0,l=8*t.length;0<l;++i)this._length[i]+=l,l=0|this._length[i]/4294967296,0<l&&(this._length[i]-=4294967296*l);return this},i.prototype._update=function(){throw new Error('_update is not implemented')},i.prototype.digest=function(t){if(this._finalized)throw new Error('Digest already called');this._finalized=!0;var n=this._digest();t!==void 0&&(n=n.toString(t)),this._block.fill(0),this._blockOffset=0;for(var a=0;4>a;++a)this._length[a]=0;return n},i.prototype._digest=function(){throw new Error('_digest is not implemented')},t.exports=i},function(t,n,a){function r(t,n,a){f.call(this),this._cache=new i,this._cipher=new m.AES(n),this._prev=c.from(a),this._mode=t,this._autopadding=!0}function i(){this.cache=c.allocUnsafe(0)}function o(t,n,a){var i=d[t.toLowerCase()];if(!i)throw new TypeError('invalid suite type');if('string'==typeof n&&(n=c.from(n)),n.length!==i.key/8)throw new TypeError('invalid key length '+n.length);if('string'==typeof a&&(a=c.from(a)),'GCM'!==i.mode&&a.length!==i.iv)throw new TypeError('invalid iv length '+a.length);return'stream'===i.type?new u(i.module,n,a):'auth'===i.type?new l(i.module,n,a):new r(i.module,n,a)}function s(t,n){var a=d[t.toLowerCase()];if(!a)throw new TypeError('invalid suite type');var r=h(n,!1,a.key,a.iv);return o(t,r.key,r.iv)}var d=a(138),l=a(224),c=a(3).Buffer,u=a(225),f=a(40),m=a(92),h=a(91),g=a(0);g(r,f),r.prototype._update=function(t){this._cache.add(t);for(var n=[],a,r;a=this._cache.get();)r=this._mode.encrypt(this,a),n.push(r);return c.concat(n)};var b=c.alloc(16,16);r.prototype._final=function(){var t=this._cache.flush();if(this._autopadding)return t=this._mode.encrypt(this,t),this._cipher.scrub(),t;if(!t.equals(b))throw this._cipher.scrub(),new Error('data not multiple of block length')},r.prototype.setAutoPadding=function(t){return this._autopadding=!!t,this},i.prototype.add=function(t){this.cache=c.concat([this.cache,t])},i.prototype.get=function(){if(15<this.cache.length){var t=this.cache.slice(0,16);return this.cache=this.cache.slice(16),t}return null},i.prototype.flush=function(){for(var t=16-this.cache.length,n=c.allocUnsafe(t),a=-1;++a<t;)n.writeUInt8(t,a);return c.concat([this.cache,n])},n.createCipheriv=o,n.createCipher=s},function(t,n){n.encrypt=function(t,n){return t._cipher.encryptBlock(n)},n.decrypt=function(t,n){return t._cipher.decryptBlock(n)}},function(t,n,a){var r=a(67);n.encrypt=function(t,n){var a=r(n,t._prev);return t._prev=t._cipher.encryptBlock(a),t._prev},n.decrypt=function(t,n){var a=t._prev;t._prev=n;var i=t._cipher.decryptBlock(n);return r(i,a)}},function(t,n,a){function r(t,n,a){var r=n.length,s=o(n,t._cache);return t._cache=t._cache.slice(r),t._prev=i.concat([t._prev,a?n:s]),s}var i=a(3).Buffer,o=a(67);n.encrypt=function(t,n,a){for(var o=i.allocUnsafe(0),s;n.length;)if(0===t._cache.length&&(t._cache=t._cipher.encryptBlock(t._prev),t._prev=i.allocUnsafe(0)),t._cache.length<=n.length)s=t._cache.length,o=i.concat([o,r(t,n.slice(0,s),a)]),n=n.slice(s);else{o=i.concat([o,r(t,n,a)]);break}return o}},function(t,n,a){function r(t,n,a){var r=t._cipher.encryptBlock(t._prev),i=r[0]^n;return t._prev=o.concat([t._prev.slice(1),o.from([a?n:i])]),i}var o=a(3).Buffer;n.encrypt=function(t,n,a){for(var s=n.length,d=o.allocUnsafe(s),l=-1;++l<s;)d[l]=r(t,n[l],a);return d}},function(t,n,a){function r(t,n,a){for(var r=-1,i=8,s=0,d,l,c;++r<i;)d=t._cipher.encryptBlock(t._prev),l=n&1<<7-r?128:0,c=d[0]^l,s+=(128&c)>>r%8,t._prev=o(t._prev,a?l:c);return s}function o(t,n){var a=t.length,r=-1,i=s.allocUnsafe(t.length);for(t=s.concat([t,s.from([n])]);++r<a;)i[r]=t[r]<<1|t[r+1]>>7;return i}var s=a(3).Buffer;n.encrypt=function(t,n,a){for(var o=n.length,d=s.allocUnsafe(o),l=-1;++l<o;)d[l]=r(t,n[l],a);return d}},function(t,n,a){(function(t){function r(t){return t._prev=t._cipher.encryptBlock(t._prev),t._prev}var i=a(67);n.encrypt=function(n,a){for(;n._cache.length<a.length;)n._cache=t.concat([n._cache,r(n)]);var o=n._cache.slice(0,a.length);return n._cache=n._cache.slice(a.length),i(a,o)}}).call(n,a(2).Buffer)},function(t,n,a){function r(t){return[t.readUInt32BE(0),t.readUInt32BE(4),t.readUInt32BE(8),t.readUInt32BE(12)]}function o(t){var n=s.allocUnsafe(16);return n.writeUInt32BE(t[0]>>>0,0),n.writeUInt32BE(t[1]>>>0,4),n.writeUInt32BE(t[2]>>>0,8),n.writeUInt32BE(t[3]>>>0,12),n}function i(t){this.h=t,this.state=s.alloc(16,0),this.cache=s.allocUnsafe(0)}var s=a(3).Buffer,d=s.alloc(16,0);i.prototype.ghash=function(t){for(var n=-1;++n<t.length;)this.state[n]^=t[n];this._multiply()},i.prototype._multiply=function(){for(var t=r(this.h),n=[0,0,0,0],a=-1,i,s,d;128>++a;){for(s=0!=(this.state[~~(a/8)]&1<<7-a%8),s&&(n[0]^=t[0],n[1]^=t[1],n[2]^=t[2],n[3]^=t[3]),d=0!=(1&t[3]),i=3;0<i;i--)t[i]=t[i]>>>1|(1&t[i-1])<<31;t[0]>>>=1,d&&(t[0]^=-520093696)}this.state=o(n)},i.prototype.update=function(t){this.cache=s.concat([this.cache,t]);for(var n;16<=this.cache.length;)n=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(n)},i.prototype.final=function(t,n){return this.cache.length&&this.ghash(s.concat([this.cache,d],16)),this.ghash(o([0,t,0,n])),this.state},t.exports=i},function(t,n,a){function r(t,n,a){m.call(this),this._cache=new i,this._last=void 0,this._cipher=new h.AES(n),this._prev=c.from(a),this._mode=t,this._autopadding=!0}function i(){this.cache=c.allocUnsafe(0)}function o(t){for(var n=t[15],a=-1;++a<n;)if(t[a+(16-n)]!==n)throw new Error('unable to decrypt data');return 16===n?void 0:t.slice(0,16-n)}function s(t,n,a){var i=u[t.toLowerCase()];if(!i)throw new TypeError('invalid suite type');if('string'==typeof a&&(a=c.from(a)),'GCM'!==i.mode&&a.length!==i.iv)throw new TypeError('invalid iv length '+a.length);if('string'==typeof n&&(n=c.from(n)),n.length!==i.key/8)throw new TypeError('invalid key length '+n.length);return'stream'===i.type?new f(i.module,n,a,!0):'auth'===i.type?new l(i.module,n,a,!0):new r(i.module,n,a)}function d(t,n){var a=u[t.toLowerCase()];if(!a)throw new TypeError('invalid suite type');var r=g(n,!1,a.key,a.iv);return s(t,r.key,r.iv)}var l=a(224),c=a(3).Buffer,u=a(138),f=a(225),m=a(40),h=a(92),g=a(91),b=a(0);b(r,m),r.prototype._update=function(t){this._cache.add(t);for(var n=[],a,r;a=this._cache.get(this._autopadding);)r=this._mode.decrypt(this,a),n.push(r);return c.concat(n)},r.prototype._final=function(){var t=this._cache.flush();if(this._autopadding)return o(this._mode.decrypt(this,t));if(t)throw new Error('data not multiple of block length')},r.prototype.setAutoPadding=function(t){return this._autopadding=!!t,this},i.prototype.add=function(t){this.cache=c.concat([this.cache,t])},i.prototype.get=function(t){var n;if(t){if(16<this.cache.length)return n=this.cache.slice(0,16),this.cache=this.cache.slice(16),n;}else if(16<=this.cache.length)return n=this.cache.slice(0,16),this.cache=this.cache.slice(16),n;return null},i.prototype.flush=function(){if(this.cache.length)return this.cache},n.createDecipher=d,n.createDecipheriv=s},function(t,n,a){(function(n){function r(t){i.call(this);var a=t.mode.toLowerCase(),r=d[a],o;o=t.decrypt?'decrypt':'encrypt';var s=t.key;('des-ede'===a||'des-ede-cbc'===a)&&(s=n.concat([s,s.slice(0,8)]));var l=t.iv;this._des=r.create({key:s,iv:l,type:o})}var i=a(40),o=a(139),s=a(0),d={"des-ede3-cbc":o.CBC.instantiate(o.EDE),"des-ede3":o.EDE,"des-ede-cbc":o.CBC.instantiate(o.EDE),"des-ede":o.EDE,"des-cbc":o.CBC.instantiate(o.DES),"des-ecb":o.DES};d.des=d['des-cbc'],d.des3=d['des-ede3-cbc'],t.exports=r,s(r,i),r.prototype._update=function(t){return new n(this._des.update(t))},r.prototype._final=function(){return new n(this._des.final())}}).call(n,a(2).Buffer)},function(t,n,a){'use strict';n.readUInt32BE=function t(n,a){var r=n[0+a]<<24|n[1+a]<<16|n[2+a]<<8|n[3+a];return r>>>0},n.writeUInt32BE=function t(n,a,r){n[0+r]=a>>>24,n[1+r]=255&a>>>16,n[2+r]=255&a>>>8,n[3+r]=255&a},n.ip=function t(n,a,r,o){for(var s=0,d=0,l=6;0<=l;l-=2){for(var i=0;24>=i;i+=8)s<<=1,s|=1&a>>>i+l;for(var i=0;24>=i;i+=8)s<<=1,s|=1&n>>>i+l}for(var l=6;0<=l;l-=2){for(var i=1;25>=i;i+=8)d<<=1,d|=1&a>>>i+l;for(var i=1;25>=i;i+=8)d<<=1,d|=1&n>>>i+l}r[o+0]=s>>>0,r[o+1]=d>>>0},n.rip=function t(n,a,r,o){for(var s=0,d=0,l=0;4>l;l++)for(var i=24;0<=i;i-=8)s<<=1,s|=1&a>>>i+l,s<<=1,s|=1&n>>>i+l;for(var l=4;8>l;l++)for(var i=24;0<=i;i-=8)d<<=1,d|=1&a>>>i+l,d<<=1,d|=1&n>>>i+l;r[o+0]=s>>>0,r[o+1]=d>>>0},n.pc1=function t(n,a,r,o){for(var s=0,d=0,l=7;5<=l;l--){for(var i=0;24>=i;i+=8)s<<=1,s|=1&a>>i+l;for(var i=0;24>=i;i+=8)s<<=1,s|=1&n>>i+l}for(var i=0;24>=i;i+=8)s<<=1,s|=1&a>>i+l;for(var l=1;3>=l;l++){for(var i=0;24>=i;i+=8)d<<=1,d|=1&a>>i+l;for(var i=0;24>=i;i+=8)d<<=1,d|=1&n>>i+l}for(var i=0;24>=i;i+=8)d<<=1,d|=1&n>>i+l;r[o+0]=s>>>0,r[o+1]=d>>>0},n.r28shl=function t(n,a){return 268435455&n<<a|n>>>28-a};var r=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];n.pc2=function t(n,a,o,s){for(var d=0,l=0,c=r.length>>>1,u=0;u<c;u++)d<<=1,d|=1&n>>>r[u];for(var u=c;u<r.length;u++)l<<=1,l|=1&a>>>r[u];o[s+0]=d>>>0,o[s+1]=l>>>0},n.expand=function t(n,a,r){var o=0,s=0;o=(1&n)<<5|n>>>27;for(var d=23;15<=d;d-=4)o<<=6,o|=63&n>>>d;for(var d=11;3<=d;d-=4)s|=63&n>>>d,s<<=6;s|=(31&n)<<1|n>>>31,a[r+0]=o>>>0,a[r+1]=s>>>0};var o=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];n.substitute=function t(n,a){for(var r=0,s=0;4>s;s++){var i=63&n>>>18-6*s,d=o[64*s+i];r<<=4,r|=d}for(var s=0;4>s;s++){var i=63&a>>>18-6*s,d=o[256+64*s+i];r<<=4,r|=d}return r>>>0};var s=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];n.permute=function t(n){for(var a=0,r=0;r<s.length;r++)a<<=1,a|=1&n>>>s[r];return a>>>0},n.padSplit=function t(n,a,r){for(var o=n.toString(2);o.length<a;)o='0'+o;for(var s=[],d=0;d<a;d+=r)s.push(o.slice(d,d+r));return s.join(' ')}},function(t,n,a){'use strict';function r(t){this.options=t,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=Array(this.blockSize),this.bufferOff=0}var i=a(21);t.exports=r,r.prototype._init=function t(){},r.prototype.update=function t(n){return 0===n.length?[]:'decrypt'===this.type?this._updateDecrypt(n):this._updateEncrypt(n)},r.prototype._buffer=function t(n,a){for(var r=_Mathmin(this.buffer.length-this.bufferOff,n.length-a),o=0;o<r;o++)this.buffer[this.bufferOff+o]=n[a+o];return this.bufferOff+=r,r},r.prototype._flushBuffer=function t(n,a){return this._update(this.buffer,0,n,a),this.bufferOff=0,this.blockSize},r.prototype._updateEncrypt=function t(n){var a=0,r=0,i=0|(this.bufferOff+n.length)/this.blockSize,o=Array(i*this.blockSize);0!==this.bufferOff&&(a+=this._buffer(n,a),this.bufferOff===this.buffer.length&&(r+=this._flushBuffer(o,r)));for(var s=n.length-(n.length-a)%this.blockSize;a<s;a+=this.blockSize)this._update(n,a,o,r),r+=this.blockSize;for(;a<n.length;a++,this.bufferOff++)this.buffer[this.bufferOff]=n[a];return o},r.prototype._updateDecrypt=function t(n){for(var a=0,r=0,i=_Mathceil((this.bufferOff+n.length)/this.blockSize)-1,o=Array(i*this.blockSize);0<i;i--)a+=this._buffer(n,a),r+=this._flushBuffer(o,r);return a+=this._buffer(n,a),o},r.prototype.final=function t(n){var a;n&&(a=this.update(n));var r;return r='encrypt'===this.type?this._finalEncrypt():this._finalDecrypt(),a?a.concat(r):r},r.prototype._pad=function t(n,a){if(0===a)return!1;for(;a<n.length;)n[a++]=0;return!0},r.prototype._finalEncrypt=function t(){if(!this._pad(this.buffer,this.bufferOff))return[];var n=Array(this.blockSize);return this._update(this.buffer,0,n,0),n},r.prototype._unpad=function t(n){return n},r.prototype._finalDecrypt=function t(){i.equal(this.bufferOff,this.blockSize,'Not enough data to decrypt');var n=Array(this.blockSize);return this._flushBuffer(n,0),this._unpad(n)}},function(t,n,a){'use strict';function r(){this.tmp=[,,],this.keys=null}function i(t){l.call(this,t);var n=new r;this._desState=n,this.deriveKeys(n,t.key)}var o=a(21),s=a(0),d=a(139),c=d.utils,l=d.Cipher;s(i,l),t.exports=i,i.create=function t(n){return new i(n)};var u=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];i.prototype.deriveKeys=function t(n,a){n.keys=Array(32),o.equal(a.length,this.blockSize,'Invalid key length');var r=c.readUInt32BE(a,0),s=c.readUInt32BE(a,4);c.pc1(r,s,n.tmp,0),r=n.tmp[0],s=n.tmp[1];for(var d=0,i;d<n.keys.length;d+=2)i=u[d>>>1],r=c.r28shl(r,i),s=c.r28shl(s,i),c.pc2(r,s,n.keys,d)},i.prototype._update=function t(n,a,i,o){var s=this._desState,d=c.readUInt32BE(n,a),l=c.readUInt32BE(n,a+4);c.ip(d,l,s.tmp,0),d=s.tmp[0],l=s.tmp[1],'encrypt'===this.type?this._encrypt(s,d,l,s.tmp,0):this._decrypt(s,d,l,s.tmp,0),d=s.tmp[0],l=s.tmp[1],c.writeUInt32BE(i,d,o),c.writeUInt32BE(i,l,o+4)},i.prototype._pad=function t(n,a){for(var r=n.length-a,o=a;o<n.length;o++)n[o]=r;return!0},i.prototype._unpad=function t(n){for(var a=n[n.length-1],r=n.length-a;r<n.length;r++)o.equal(n[r],a);return n.slice(0,n.length-a)},i.prototype._encrypt=function n(a,o,d,u,m){for(var h=o,l=d,r=0;r<a.keys.length;r+=2){var i=a.keys[r],g=a.keys[r+1];c.expand(l,a.tmp,0),i^=a.tmp[0],g^=a.tmp[1];var b=c.substitute(i,g),s=c.permute(b),f=l;l=(h^s)>>>0,h=f}c.rip(l,h,u,m)},i.prototype._decrypt=function n(a,o,d,u,m){for(var h=d,l=o,r=a.keys.length-2;0<=r;r-=2){var i=a.keys[r],g=a.keys[r+1];c.expand(h,a.tmp,0),i^=a.tmp[0],g^=a.tmp[1];var b=c.substitute(i,g),s=c.permute(b),f=h;h=(l^s)>>>0,l=f}c.rip(h,l,u,m)}},function(t,n,a){'use strict';function r(t){o.equal(t.length,8,'Invalid IV length'),this.iv=Array(8);for(var n=0;n<this.iv.length;n++)this.iv[n]=t[n]}function i(t){function n(n){t.call(this,n),this._cbcInit()}s(n,t);for(var a=Object.keys(d),r=0,i;r<a.length;r++)i=a[r],n.prototype[i]=d[i];return n.create=function t(a){return new n(a)},n}var o=a(21),s=a(0),d={};n.instantiate=i,d._cbcInit=function t(){var n=new r(this.options.iv);this._cbcState=n},d._update=function t(n,a,r,o){var s=this._cbcState,d=this.constructor.super_.prototype,l=s.iv;if('encrypt'===this.type){for(var c=0;c<this.blockSize;c++)l[c]^=n[a+c];d._update.call(this,l,0,r,o);for(var c=0;c<this.blockSize;c++)l[c]=r[o+c]}else{d._update.call(this,n,a,r,o);for(var c=0;c<this.blockSize;c++)r[o+c]^=l[c];for(var c=0;c<this.blockSize;c++)l[c]=n[a+c]}}},function(t,n,a){'use strict';function r(t,n){o.equal(n.length,24,'Invalid key length');var a=n.slice(0,8),r=n.slice(8,16),i=n.slice(16,24);this.ciphers='encrypt'===t?[c.create({type:'encrypt',key:a}),c.create({type:'decrypt',key:r}),c.create({type:'encrypt',key:i})]:[c.create({type:'decrypt',key:i}),c.create({type:'encrypt',key:r}),c.create({type:'decrypt',key:a})]}function i(t){l.call(this,t);var n=new r(this.type,this.options.key);this._edeState=n}var o=a(21),s=a(0),d=a(139),l=d.Cipher,c=d.DES;s(i,l),t.exports=i,i.create=function t(n){return new i(n)},i.prototype._update=function t(n,a,r,i){var o=this._edeState;o.ciphers[0]._update(n,a,r,i),o.ciphers[1]._update(r,i,r,i),o.ciphers[2]._update(r,i,r,i)},i.prototype._pad=c.prototype._pad,i.prototype._unpad=c.prototype._unpad},function(t,n){n['des-ecb']={key:8,iv:0},n['des-cbc']=n.des={key:8,iv:8},n['des-ede3-cbc']=n.des3={key:24,iv:8},n['des-ede3']={key:24,iv:0},n['des-ede-cbc']={key:16,iv:8},n['des-ede']={key:16,iv:0}},function(t,n,a){(function(t){function r(n){var a=new t(s[n].prime,'hex'),r=new t(s[n].gen,'hex');return new d(a,r)}function i(n,a,r,s){return t.isBuffer(a)||void 0===l[a]?i(n,'binary',a,r):(a=a||'binary',s=s||'binary',r=r||new t([2]),t.isBuffer(r)||(r=new t(r,s)),'number'==typeof n)?new d(o(n,r),r,!0):(t.isBuffer(n)||(n=new t(n,a)),new d(n,r,!0))}var o=a(226),s=a(387),d=a(388),l={binary:!0,hex:!0,base64:!0};n.DiffieHellmanGroup=n.createDiffieHellmanGroup=n.getDiffieHellman=r,n.createDiffieHellman=n.DiffieHellman=i}).call(n,a(2).Buffer)},function(t,n){},function(t,n,a){(function(t){(function(t,n){'use strict';function o(t,n){if(!t)throw new Error(n||'Assertion failed')}function r(t,n){t.super_=n;var a=function(){};a.prototype=n.prototype,t.prototype=new a,t.prototype.constructor=t}function d(t,n,a){return d.isBN(t)?t:void(this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&(('le'===n||'be'===n)&&(a=n,n=10),this._init(t||0,n||10,a||'be')))}function s(t,n,a){for(var o=0,r=_Mathmin(t.length,a),s=n,i;s<r;s++)i=t.charCodeAt(s)-48,o<<=4,o|=49<=i&&54>=i?i-49+10:17<=i&&22>=i?i-17+10:15&i;return o}function l(t,n,a,o){for(var s=0,r=_Mathmin(t.length,a),d=n,i;d<r;d++)i=t.charCodeAt(d)-48,s*=o,s+=49<=i?i-49+10:17<=i?i-17+10:i;return s}function c(t){for(var n=Array(t.bitLength()),a=0;a<n.length;a++){var r=0|a/26,i=a%26;n[a]=(t.words[r]&1<<i)>>>i}return n}function i(t,n,o){o.negative=n.negative^t.negative;var s=0|t.length+n.length;o.length=s,s=0|s-1;var d=0|t.words[0],a=0|n.words[0],l=d*a,r=67108863&l,c=0|l/67108864;o.words[0]=r;for(var u=1;u<s;u++){for(var f=c>>>26,m=67108863&c,h=_Mathmin(u,n.length-1),g=_Mathmax(0,u-t.length+1),b;g<=h;g++)b=0|u-g,d=0|t.words[b],a=0|n.words[g],l=d*a+m,f+=0|l/67108864,m=67108863&l;o.words[u]=0|m,c=0|f}return 0==c?o.length--:o.words[u]=0|c,o.strip()}function u(t,n,o){o.negative=n.negative^t.negative,o.length=t.length+n.length;for(var s=0,d=0,l=0,c;l<o.length-1;l++){c=d,d=0;for(var u=67108863&s,f=_Mathmin(l,n.length-1),m=_Mathmax(0,l-t.length+1);m<=f;m++){var h=l-m,i=0|t.words[h],a=0|n.words[m],g=i*a,r=67108863&g;c=0|c+(0|g/67108864),r=0|r+u,u=67108863&r,c=0|c+(r>>>26),d+=c>>>26,c&=67108863}o.words[l]=u,s=c,c=d}return 0==s?o.length--:o.words[l]=s,o.strip()}function f(t,n,a){var r=new m;return r.mulp(t,n,a)}function m(t,n){this.x=t,this.y=n}function h(t,n){this.name=t,this.p=new d(n,16),this.n=this.p.bitLength(),this.k=new d(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function g(){h.call(this,'k256','ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f')}function b(){h.call(this,'p224','ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001')}function y(){h.call(this,'p192','ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff')}function w(){h.call(this,'25519','7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed')}function v(t){if('string'==typeof t){var n=d._prime(t);this.m=n.p,this.prime=n}else o(t.gtn(1),'modulus must be greater than 1'),this.m=t,this.prime=null}function x(t){v.call(this,t),this.shift=this.m.bitLength(),0!=this.shift%26&&(this.shift+=26-this.shift%26),this.r=new d(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}'object'==typeof t?t.exports=d:n.BN=d,d.BN=d,d.wordSize=26;var _;try{_=a(385).Buffer}catch(t){}d.isBN=function t(n){return!!(n instanceof d)||null!==n&&'object'==typeof n&&n.constructor.wordSize===d.wordSize&&Array.isArray(n.words)},d.max=function t(n,a){return 0<n.cmp(a)?n:a},d.min=function t(n,a){return 0>n.cmp(a)?n:a},d.prototype._init=function t(n,a,r){if('number'==typeof n)return this._initNumber(n,a,r);if('object'==typeof n)return this._initArray(n,a,r);'hex'===a&&(a=16),o(a===(0|a)&&2<=a&&36>=a),n=n.toString().replace(/\s+/g,'');var i=0;'-'===n[0]&&i++,16===a?this._parseHex(n,i):this._parseBase(n,a,i),'-'===n[0]&&(this.negative=1),this.strip();'le'!==r||this._initArray(this.toArray(),a,r)},d.prototype._initNumber=function t(n,a,r){0>n&&(this.negative=1,n=-n),67108864>n?(this.words=[67108863&n],this.length=1):4503599627370496>n?(this.words=[67108863&n,67108863&n/67108864],this.length=2):(o(9007199254740992>n),this.words=[67108863&n,67108863&n/67108864,1],this.length=3);'le'!==r||this._initArray(this.toArray(),a,r)},d.prototype._initArray=function t(n,a,r){if(o('number'==typeof n.length),0>=n.length)return this.words=[0],this.length=1,this;this.length=_Mathceil(n.length/3),this.words=Array(this.length);for(var s=0;s<this.length;s++)this.words[s]=0;var i=0,d,l;if('be'===r)for(s=n.length-1,d=0;0<=s;s-=3)l=n[s]|n[s-1]<<8|n[s-2]<<16,this.words[d]|=67108863&l<<i,this.words[d+1]=67108863&l>>>26-i,i+=24,26<=i&&(i-=26,d++);else if('le'===r)for(s=0,d=0;s<n.length;s+=3)l=n[s]|n[s+1]<<8|n[s+2]<<16,this.words[d]|=67108863&l<<i,this.words[d+1]=67108863&l>>>26-i,i+=24,26<=i&&(i-=26,d++);return this.strip()},d.prototype._parseHex=function t(n,a){this.length=_Mathceil((n.length-a)/6),this.words=Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var i=0,o,d;for(r=n.length-6,o=0;r>=a;r-=6)d=s(n,r,r+6),this.words[o]|=67108863&d<<i,this.words[o+1]|=4194303&d>>>26-i,i+=24,26<=i&&(i-=26,o++);r+6!==a&&(d=s(n,a,r+6),this.words[o]|=67108863&d<<i,this.words[o+1]|=4194303&d>>>26-i),this.strip()},d.prototype._parseBase=function t(n,a,r){this.words=[0],this.length=1;for(var o=0,s=1;67108863>=s;s*=a)o++;o--,s=0|s/a;for(var d=n.length-r,c=d%o,u=_Mathmin(d,d-c)+r,f=0,m=r;m<u;m+=o)f=l(n,m,m+o,a),this.imuln(s),67108864>this.words[0]+f?this.words[0]+=f:this._iaddn(f);if(0!=c){var i=1;for(f=l(n,m,n.length,a),m=0;m<c;m++)i*=a;this.imuln(i),67108864>this.words[0]+f?this.words[0]+=f:this._iaddn(f)}},d.prototype.copy=function t(n){n.words=Array(this.length);for(var a=0;a<this.length;a++)n.words[a]=this.words[a];n.length=this.length,n.negative=this.negative,n.red=this.red},d.prototype.clone=function t(){var n=new d(null);return this.copy(n),n},d.prototype._expand=function t(n){for(;this.length<n;)this.words[this.length++]=0;return this},d.prototype.strip=function t(){for(;1<this.length&&0===this.words[this.length-1];)this.length--;return this._normSign()},d.prototype._normSign=function t(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},d.prototype.inspect=function t(){return(this.red?'<BN-R: ':'<BN: ')+this.toString(16)+'>'};var k=['','0','00','000','0000','00000','000000','0000000','00000000','000000000','0000000000','00000000000','000000000000','0000000000000','00000000000000','000000000000000','0000000000000000','00000000000000000','000000000000000000','0000000000000000000','00000000000000000000','000000000000000000000','0000000000000000000000','00000000000000000000000','000000000000000000000000','0000000000000000000000000'],C=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],E=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,10000000,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64000000,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,24300000,28629151,33554432,39135393,45435424,52521875,60466176];d.prototype.toString=function t(n,a){n=n||10,a=0|a||1;var s;if(16===n||'hex'===n){s='';for(var d=0,l=0,u=0;u<this.length;u++){var i=this.words[u],f=(16777215&(i<<d|l)).toString(16);l=16777215&i>>>24-d,s=0!=l||u!==this.length-1?k[6-f.length]+f+s:f+s,d+=2,26<=d&&(d-=26,u--)}for(0!=l&&(s=l.toString(16)+s);0!=s.length%a;)s='0'+s;return 0!==this.negative&&(s='-'+s),s}if(n===(0|n)&&2<=n&&36>=n){var m=C[n],h=E[n];s='';var g=this.clone();for(g.negative=0;!g.isZero();){var c=g.modn(h).toString(n);g=g.idivn(h),s=g.isZero()?c+s:k[m-c.length]+c+s}for(this.isZero()&&(s='0'+s);0!=s.length%a;)s='0'+s;return 0!==this.negative&&(s='-'+s),s}o(!1,'Base should be between 2 and 36')},d.prototype.toNumber=function t(){var n=this.words[0];return 2===this.length?n+=67108864*this.words[1]:3===this.length&&1===this.words[2]?n+=4503599627370496+67108864*this.words[1]:2<this.length&&o(!1,'Number can only safely store up to 53 bits'),0===this.negative?n:-n},d.prototype.toJSON=function t(){return this.toString(16)},d.prototype.toBuffer=function t(n,a){return o('undefined'!=typeof _),this.toArrayLike(_,n,a)},d.prototype.toArray=function t(n,a){return this.toArrayLike(Array,n,a)},d.prototype.toArrayLike=function t(n,a,r){var s=this.byteLength(),d=r||_Mathmax(1,s);o(s<=d,'byte array longer than desired length'),o(0<d,'Requested array length <= 0'),this.strip();var l='le'===a,c=new n(d),u=this.clone(),f,m;if(!l){for(m=0;m<d-s;m++)c[m]=0;for(m=0;!u.isZero();m++)f=u.andln(255),u.iushrn(8),c[d-m-1]=f}else{for(m=0;!u.isZero();m++)f=u.andln(255),u.iushrn(8),c[m]=f;for(;m<d;m++)c[m]=0}return c},d.prototype._countBits=_Mathclz?function t(n){return 32-_Mathclz(n)}:function n(a){var i=a,t=0;return 4096<=i&&(t+=13,i>>>=13),64<=i&&(t+=7,i>>>=7),8<=i&&(t+=4,i>>>=4),2<=i&&(t+=2,i>>>=2),t+i},d.prototype._zeroBits=function n(a){if(0===a)return 26;var i=a,t=0;return 0==(8191&i)&&(t+=13,i>>>=13),0==(127&i)&&(t+=7,i>>>=7),0==(15&i)&&(t+=4,i>>>=4),0==(3&i)&&(t+=2,i>>>=2),0==(1&i)&&t++,t},d.prototype.bitLength=function t(){var n=this.words[this.length-1],a=this._countBits(n);return 26*(this.length-1)+a},d.prototype.zeroBits=function t(){if(this.isZero())return 0;for(var n=0,a=0,r;a<this.length&&(r=this._zeroBits(this.words[a]),n+=r,26===r);a++);return n},d.prototype.byteLength=function t(){return _Mathceil(this.bitLength()/8)},d.prototype.toTwos=function t(n){return 0===this.negative?this.clone():this.abs().inotn(n).iaddn(1)},d.prototype.fromTwos=function t(n){return this.testn(n-1)?this.notn(n).iaddn(1).ineg():this.clone()},d.prototype.isNeg=function t(){return 0!==this.negative},d.prototype.neg=function t(){return this.clone().ineg()},d.prototype.ineg=function t(){return this.isZero()||(this.negative^=1),this},d.prototype.iuor=function t(n){for(;this.length<n.length;)this.words[this.length++]=0;for(var a=0;a<n.length;a++)this.words[a]|=n.words[a];return this.strip()},d.prototype.ior=function t(n){return o(0==(this.negative|n.negative)),this.iuor(n)},d.prototype.or=function t(n){return this.length>n.length?this.clone().ior(n):n.clone().ior(this)},d.prototype.uor=function t(n){return this.length>n.length?this.clone().iuor(n):n.clone().iuor(this)},d.prototype.iuand=function t(n){var a;a=this.length>n.length?n:this;for(var r=0;r<a.length;r++)this.words[r]&=n.words[r];return this.length=a.length,this.strip()},d.prototype.iand=function t(n){return o(0==(this.negative|n.negative)),this.iuand(n)},d.prototype.and=function t(n){return this.length>n.length?this.clone().iand(n):n.clone().iand(this)},d.prototype.uand=function t(n){return this.length>n.length?this.clone().iuand(n):n.clone().iuand(this)},d.prototype.iuxor=function t(n){var r,a;this.length>n.length?(r=this,a=n):(r=n,a=this);for(var o=0;o<a.length;o++)this.words[o]=r.words[o]^a.words[o];if(this!==r)for(;o<r.length;o++)this.words[o]=r.words[o];return this.length=r.length,this.strip()},d.prototype.ixor=function t(n){return o(0==(this.negative|n.negative)),this.iuxor(n)},d.prototype.xor=function t(n){return this.length>n.length?this.clone().ixor(n):n.clone().ixor(this)},d.prototype.uxor=function t(n){return this.length>n.length?this.clone().iuxor(n):n.clone().iuxor(this)},d.prototype.inotn=function t(n){o('number'==typeof n&&0<=n);var a=0|_Mathceil(n/26),r=n%26;this._expand(a),0<r&&a--;for(var s=0;s<a;s++)this.words[s]=67108863&~this.words[s];return 0<r&&(this.words[s]=~this.words[s]&67108863>>26-r),this.strip()},d.prototype.notn=function t(n){return this.clone().inotn(n)},d.prototype.setn=function t(n,a){o('number'==typeof n&&0<=n);var r=0|n/26,i=n%26;return this._expand(r+1),a?this.words[r]|=1<<i:this.words[r]&=~(1<<i),this.strip()},d.prototype.iadd=function t(n){var o;if(0!==this.negative&&0===n.negative)return this.negative=0,o=this.isub(n),this.negative^=1,this._normSign();if(0===this.negative&&0!==n.negative)return n.negative=0,o=this.isub(n),n.negative=1,o._normSign();var r,a;this.length>n.length?(r=this,a=n):(r=n,a=this);for(var s=0,d=0;d<a.length;d++)o=(0|r.words[d])+(0|a.words[d])+s,this.words[d]=67108863&o,s=o>>>26;for(;0!=s&&d<r.length;d++)o=(0|r.words[d])+s,this.words[d]=67108863&o,s=o>>>26;if(this.length=r.length,0!=s)this.words[this.length]=s,this.length++;else if(r!==this)for(;d<r.length;d++)this.words[d]=r.words[d];return this},d.prototype.add=function t(n){var a;return 0!==n.negative&&0===this.negative?(n.negative=0,a=this.sub(n),n.negative^=1,a):0===n.negative&&0!==this.negative?(this.negative=0,a=n.sub(this),this.negative=1,a):this.length>n.length?this.clone().iadd(n):n.clone().iadd(this)},d.prototype.isub=function t(n){if(0!==n.negative){n.negative=0;var o=this.iadd(n);return n.negative=1,o._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(n),this.negative=1,this._normSign();var r=this.cmp(n);if(0===r)return this.negative=0,this.length=1,this.words[0]=0,this;var s,a;0<r?(s=this,a=n):(s=n,a=this);for(var d=0,l=0;l<a.length;l++)o=(0|s.words[l])-(0|a.words[l])+d,d=o>>26,this.words[l]=67108863&o;for(;0!=d&&l<s.length;l++)o=(0|s.words[l])+d,d=o>>26,this.words[l]=67108863&o;if(0==d&&l<s.length&&s!==this)for(;l<s.length;l++)this.words[l]=s.words[l];return this.length=_Mathmax(this.length,l),s!==this&&(this.negative=1),this.strip()},d.prototype.sub=function t(n){return this.clone().isub(n)};var T=function t(n,r,i){var s=n.words,a=r.words,d=i.words,o=0,l=0|s[0],c=8191&l,u=l>>>13,f=0|s[1],m=8191&f,h=f>>>13,g=0|s[2],b=8191&g,y=g>>>13,w=0|s[3],v=8191&w,x=w>>>13,_=0|s[4],k=8191&_,C=_>>>13,E=0|s[5],T=8191&E,A=E>>>13,S=0|s[6],I=8191&S,N=S>>>13,j=0|s[7],L=8191&j,R=j>>>13,M=0|s[8],D=8191&M,P=M>>>13,O=0|s[9],B=8191&O,U=O>>>13,F=0|a[0],q=8191&F,z=F>>>13,H=0|a[1],W=8191&H,V=H>>>13,G=0|a[2],J=8191&G,K=G>>>13,X=0|a[3],Y=8191&X,Z=X>>>13,Q=0|a[4],ee=8191&Q,te=Q>>>13,ne=0|a[5],ae=8191&ne,re=ne>>>13,ie=0|a[6],oe=8191&ie,se=ie>>>13,de=0|a[7],le=8191&de,pe=de>>>13,ce=0|a[8],ue=8191&ce,fe=ce>>>13,he=0|a[9],ge=8191&he,be=he>>>13,ye,we,ve;i.negative=n.negative^r.negative,i.length=19,ye=_Mathimul(c,q),we=_Mathimul(c,z),we=0|we+_Mathimul(u,q),ve=_Mathimul(u,z);var xe=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(xe>>>26),xe&=67108863,ye=_Mathimul(m,q),we=_Mathimul(m,z),we=0|we+_Mathimul(h,q),ve=_Mathimul(h,z),ye=0|ye+_Mathimul(c,W),we=0|we+_Mathimul(c,V),we=0|we+_Mathimul(u,W),ve=0|ve+_Mathimul(u,V);var _e=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(_e>>>26),_e&=67108863,ye=_Mathimul(b,q),we=_Mathimul(b,z),we=0|we+_Mathimul(y,q),ve=_Mathimul(y,z),ye=0|ye+_Mathimul(m,W),we=0|we+_Mathimul(m,V),we=0|we+_Mathimul(h,W),ve=0|ve+_Mathimul(h,V),ye=0|ye+_Mathimul(c,J),we=0|we+_Mathimul(c,K),we=0|we+_Mathimul(u,J),ve=0|ve+_Mathimul(u,K);var ke=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(ke>>>26),ke&=67108863,ye=_Mathimul(v,q),we=_Mathimul(v,z),we=0|we+_Mathimul(x,q),ve=_Mathimul(x,z),ye=0|ye+_Mathimul(b,W),we=0|we+_Mathimul(b,V),we=0|we+_Mathimul(y,W),ve=0|ve+_Mathimul(y,V),ye=0|ye+_Mathimul(m,J),we=0|we+_Mathimul(m,K),we=0|we+_Mathimul(h,J),ve=0|ve+_Mathimul(h,K),ye=0|ye+_Mathimul(c,Y),we=0|we+_Mathimul(c,Z),we=0|we+_Mathimul(u,Y),ve=0|ve+_Mathimul(u,Z);var Ce=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Ce>>>26),Ce&=67108863,ye=_Mathimul(k,q),we=_Mathimul(k,z),we=0|we+_Mathimul(C,q),ve=_Mathimul(C,z),ye=0|ye+_Mathimul(v,W),we=0|we+_Mathimul(v,V),we=0|we+_Mathimul(x,W),ve=0|ve+_Mathimul(x,V),ye=0|ye+_Mathimul(b,J),we=0|we+_Mathimul(b,K),we=0|we+_Mathimul(y,J),ve=0|ve+_Mathimul(y,K),ye=0|ye+_Mathimul(m,Y),we=0|we+_Mathimul(m,Z),we=0|we+_Mathimul(h,Y),ve=0|ve+_Mathimul(h,Z),ye=0|ye+_Mathimul(c,ee),we=0|we+_Mathimul(c,te),we=0|we+_Mathimul(u,ee),ve=0|ve+_Mathimul(u,te);var Ee=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Ee>>>26),Ee&=67108863,ye=_Mathimul(T,q),we=_Mathimul(T,z),we=0|we+_Mathimul(A,q),ve=_Mathimul(A,z),ye=0|ye+_Mathimul(k,W),we=0|we+_Mathimul(k,V),we=0|we+_Mathimul(C,W),ve=0|ve+_Mathimul(C,V),ye=0|ye+_Mathimul(v,J),we=0|we+_Mathimul(v,K),we=0|we+_Mathimul(x,J),ve=0|ve+_Mathimul(x,K),ye=0|ye+_Mathimul(b,Y),we=0|we+_Mathimul(b,Z),we=0|we+_Mathimul(y,Y),ve=0|ve+_Mathimul(y,Z),ye=0|ye+_Mathimul(m,ee),we=0|we+_Mathimul(m,te),we=0|we+_Mathimul(h,ee),ve=0|ve+_Mathimul(h,te),ye=0|ye+_Mathimul(c,ae),we=0|we+_Mathimul(c,re),we=0|we+_Mathimul(u,ae),ve=0|ve+_Mathimul(u,re);var Te=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Te>>>26),Te&=67108863,ye=_Mathimul(I,q),we=_Mathimul(I,z),we=0|we+_Mathimul(N,q),ve=_Mathimul(N,z),ye=0|ye+_Mathimul(T,W),we=0|we+_Mathimul(T,V),we=0|we+_Mathimul(A,W),ve=0|ve+_Mathimul(A,V),ye=0|ye+_Mathimul(k,J),we=0|we+_Mathimul(k,K),we=0|we+_Mathimul(C,J),ve=0|ve+_Mathimul(C,K),ye=0|ye+_Mathimul(v,Y),we=0|we+_Mathimul(v,Z),we=0|we+_Mathimul(x,Y),ve=0|ve+_Mathimul(x,Z),ye=0|ye+_Mathimul(b,ee),we=0|we+_Mathimul(b,te),we=0|we+_Mathimul(y,ee),ve=0|ve+_Mathimul(y,te),ye=0|ye+_Mathimul(m,ae),we=0|we+_Mathimul(m,re),we=0|we+_Mathimul(h,ae),ve=0|ve+_Mathimul(h,re),ye=0|ye+_Mathimul(c,oe),we=0|we+_Mathimul(c,se),we=0|we+_Mathimul(u,oe),ve=0|ve+_Mathimul(u,se);var Ae=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Ae>>>26),Ae&=67108863,ye=_Mathimul(L,q),we=_Mathimul(L,z),we=0|we+_Mathimul(R,q),ve=_Mathimul(R,z),ye=0|ye+_Mathimul(I,W),we=0|we+_Mathimul(I,V),we=0|we+_Mathimul(N,W),ve=0|ve+_Mathimul(N,V),ye=0|ye+_Mathimul(T,J),we=0|we+_Mathimul(T,K),we=0|we+_Mathimul(A,J),ve=0|ve+_Mathimul(A,K),ye=0|ye+_Mathimul(k,Y),we=0|we+_Mathimul(k,Z),we=0|we+_Mathimul(C,Y),ve=0|ve+_Mathimul(C,Z),ye=0|ye+_Mathimul(v,ee),we=0|we+_Mathimul(v,te),we=0|we+_Mathimul(x,ee),ve=0|ve+_Mathimul(x,te),ye=0|ye+_Mathimul(b,ae),we=0|we+_Mathimul(b,re),we=0|we+_Mathimul(y,ae),ve=0|ve+_Mathimul(y,re),ye=0|ye+_Mathimul(m,oe),we=0|we+_Mathimul(m,se),we=0|we+_Mathimul(h,oe),ve=0|ve+_Mathimul(h,se),ye=0|ye+_Mathimul(c,le),we=0|we+_Mathimul(c,pe),we=0|we+_Mathimul(u,le),ve=0|ve+_Mathimul(u,pe);var Se=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Se>>>26),Se&=67108863,ye=_Mathimul(D,q),we=_Mathimul(D,z),we=0|we+_Mathimul(P,q),ve=_Mathimul(P,z),ye=0|ye+_Mathimul(L,W),we=0|we+_Mathimul(L,V),we=0|we+_Mathimul(R,W),ve=0|ve+_Mathimul(R,V),ye=0|ye+_Mathimul(I,J),we=0|we+_Mathimul(I,K),we=0|we+_Mathimul(N,J),ve=0|ve+_Mathimul(N,K),ye=0|ye+_Mathimul(T,Y),we=0|we+_Mathimul(T,Z),we=0|we+_Mathimul(A,Y),ve=0|ve+_Mathimul(A,Z),ye=0|ye+_Mathimul(k,ee),we=0|we+_Mathimul(k,te),we=0|we+_Mathimul(C,ee),ve=0|ve+_Mathimul(C,te),ye=0|ye+_Mathimul(v,ae),we=0|we+_Mathimul(v,re),we=0|we+_Mathimul(x,ae),ve=0|ve+_Mathimul(x,re),ye=0|ye+_Mathimul(b,oe),we=0|we+_Mathimul(b,se),we=0|we+_Mathimul(y,oe),ve=0|ve+_Mathimul(y,se),ye=0|ye+_Mathimul(m,le),we=0|we+_Mathimul(m,pe),we=0|we+_Mathimul(h,le),ve=0|ve+_Mathimul(h,pe),ye=0|ye+_Mathimul(c,ue),we=0|we+_Mathimul(c,fe),we=0|we+_Mathimul(u,ue),ve=0|ve+_Mathimul(u,fe);var Ie=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Ie>>>26),Ie&=67108863,ye=_Mathimul(B,q),we=_Mathimul(B,z),we=0|we+_Mathimul(U,q),ve=_Mathimul(U,z),ye=0|ye+_Mathimul(D,W),we=0|we+_Mathimul(D,V),we=0|we+_Mathimul(P,W),ve=0|ve+_Mathimul(P,V),ye=0|ye+_Mathimul(L,J),we=0|we+_Mathimul(L,K),we=0|we+_Mathimul(R,J),ve=0|ve+_Mathimul(R,K),ye=0|ye+_Mathimul(I,Y),we=0|we+_Mathimul(I,Z),we=0|we+_Mathimul(N,Y),ve=0|ve+_Mathimul(N,Z),ye=0|ye+_Mathimul(T,ee),we=0|we+_Mathimul(T,te),we=0|we+_Mathimul(A,ee),ve=0|ve+_Mathimul(A,te),ye=0|ye+_Mathimul(k,ae),we=0|we+_Mathimul(k,re),we=0|we+_Mathimul(C,ae),ve=0|ve+_Mathimul(C,re),ye=0|ye+_Mathimul(v,oe),we=0|we+_Mathimul(v,se),we=0|we+_Mathimul(x,oe),ve=0|ve+_Mathimul(x,se),ye=0|ye+_Mathimul(b,le),we=0|we+_Mathimul(b,pe),we=0|we+_Mathimul(y,le),ve=0|ve+_Mathimul(y,pe),ye=0|ye+_Mathimul(m,ue),we=0|we+_Mathimul(m,fe),we=0|we+_Mathimul(h,ue),ve=0|ve+_Mathimul(h,fe),ye=0|ye+_Mathimul(c,ge),we=0|we+_Mathimul(c,be),we=0|we+_Mathimul(u,ge),ve=0|ve+_Mathimul(u,be);var Ne=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Ne>>>26),Ne&=67108863,ye=_Mathimul(B,W),we=_Mathimul(B,V),we=0|we+_Mathimul(U,W),ve=_Mathimul(U,V),ye=0|ye+_Mathimul(D,J),we=0|we+_Mathimul(D,K),we=0|we+_Mathimul(P,J),ve=0|ve+_Mathimul(P,K),ye=0|ye+_Mathimul(L,Y),we=0|we+_Mathimul(L,Z),we=0|we+_Mathimul(R,Y),ve=0|ve+_Mathimul(R,Z),ye=0|ye+_Mathimul(I,ee),we=0|we+_Mathimul(I,te),we=0|we+_Mathimul(N,ee),ve=0|ve+_Mathimul(N,te),ye=0|ye+_Mathimul(T,ae),we=0|we+_Mathimul(T,re),we=0|we+_Mathimul(A,ae),ve=0|ve+_Mathimul(A,re),ye=0|ye+_Mathimul(k,oe),we=0|we+_Mathimul(k,se),we=0|we+_Mathimul(C,oe),ve=0|ve+_Mathimul(C,se),ye=0|ye+_Mathimul(v,le),we=0|we+_Mathimul(v,pe),we=0|we+_Mathimul(x,le),ve=0|ve+_Mathimul(x,pe),ye=0|ye+_Mathimul(b,ue),we=0|we+_Mathimul(b,fe),we=0|we+_Mathimul(y,ue),ve=0|ve+_Mathimul(y,fe),ye=0|ye+_Mathimul(m,ge),we=0|we+_Mathimul(m,be),we=0|we+_Mathimul(h,ge),ve=0|ve+_Mathimul(h,be);var je=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(je>>>26),je&=67108863,ye=_Mathimul(B,J),we=_Mathimul(B,K),we=0|we+_Mathimul(U,J),ve=_Mathimul(U,K),ye=0|ye+_Mathimul(D,Y),we=0|we+_Mathimul(D,Z),we=0|we+_Mathimul(P,Y),ve=0|ve+_Mathimul(P,Z),ye=0|ye+_Mathimul(L,ee),we=0|we+_Mathimul(L,te),we=0|we+_Mathimul(R,ee),ve=0|ve+_Mathimul(R,te),ye=0|ye+_Mathimul(I,ae),we=0|we+_Mathimul(I,re),we=0|we+_Mathimul(N,ae),ve=0|ve+_Mathimul(N,re),ye=0|ye+_Mathimul(T,oe),we=0|we+_Mathimul(T,se),we=0|we+_Mathimul(A,oe),ve=0|ve+_Mathimul(A,se),ye=0|ye+_Mathimul(k,le),we=0|we+_Mathimul(k,pe),we=0|we+_Mathimul(C,le),ve=0|ve+_Mathimul(C,pe),ye=0|ye+_Mathimul(v,ue),we=0|we+_Mathimul(v,fe),we=0|we+_Mathimul(x,ue),ve=0|ve+_Mathimul(x,fe),ye=0|ye+_Mathimul(b,ge),we=0|we+_Mathimul(b,be),we=0|we+_Mathimul(y,ge),ve=0|ve+_Mathimul(y,be);var Le=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Le>>>26),Le&=67108863,ye=_Mathimul(B,Y),we=_Mathimul(B,Z),we=0|we+_Mathimul(U,Y),ve=_Mathimul(U,Z),ye=0|ye+_Mathimul(D,ee),we=0|we+_Mathimul(D,te),we=0|we+_Mathimul(P,ee),ve=0|ve+_Mathimul(P,te),ye=0|ye+_Mathimul(L,ae),we=0|we+_Mathimul(L,re),we=0|we+_Mathimul(R,ae),ve=0|ve+_Mathimul(R,re),ye=0|ye+_Mathimul(I,oe),we=0|we+_Mathimul(I,se),we=0|we+_Mathimul(N,oe),ve=0|ve+_Mathimul(N,se),ye=0|ye+_Mathimul(T,le),we=0|we+_Mathimul(T,pe),we=0|we+_Mathimul(A,le),ve=0|ve+_Mathimul(A,pe),ye=0|ye+_Mathimul(k,ue),we=0|we+_Mathimul(k,fe),we=0|we+_Mathimul(C,ue),ve=0|ve+_Mathimul(C,fe),ye=0|ye+_Mathimul(v,ge),we=0|we+_Mathimul(v,be),we=0|we+_Mathimul(x,ge),ve=0|ve+_Mathimul(x,be);var Re=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Re>>>26),Re&=67108863,ye=_Mathimul(B,ee),we=_Mathimul(B,te),we=0|we+_Mathimul(U,ee),ve=_Mathimul(U,te),ye=0|ye+_Mathimul(D,ae),we=0|we+_Mathimul(D,re),we=0|we+_Mathimul(P,ae),ve=0|ve+_Mathimul(P,re),ye=0|ye+_Mathimul(L,oe),we=0|we+_Mathimul(L,se),we=0|we+_Mathimul(R,oe),ve=0|ve+_Mathimul(R,se),ye=0|ye+_Mathimul(I,le),we=0|we+_Mathimul(I,pe),we=0|we+_Mathimul(N,le),ve=0|ve+_Mathimul(N,pe),ye=0|ye+_Mathimul(T,ue),we=0|we+_Mathimul(T,fe),we=0|we+_Mathimul(A,ue),ve=0|ve+_Mathimul(A,fe),ye=0|ye+_Mathimul(k,ge),we=0|we+_Mathimul(k,be),we=0|we+_Mathimul(C,ge),ve=0|ve+_Mathimul(C,be);var Me=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Me>>>26),Me&=67108863,ye=_Mathimul(B,ae),we=_Mathimul(B,re),we=0|we+_Mathimul(U,ae),ve=_Mathimul(U,re),ye=0|ye+_Mathimul(D,oe),we=0|we+_Mathimul(D,se),we=0|we+_Mathimul(P,oe),ve=0|ve+_Mathimul(P,se),ye=0|ye+_Mathimul(L,le),we=0|we+_Mathimul(L,pe),we=0|we+_Mathimul(R,le),ve=0|ve+_Mathimul(R,pe),ye=0|ye+_Mathimul(I,ue),we=0|we+_Mathimul(I,fe),we=0|we+_Mathimul(N,ue),ve=0|ve+_Mathimul(N,fe),ye=0|ye+_Mathimul(T,ge),we=0|we+_Mathimul(T,be),we=0|we+_Mathimul(A,ge),ve=0|ve+_Mathimul(A,be);var De=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(De>>>26),De&=67108863,ye=_Mathimul(B,oe),we=_Mathimul(B,se),we=0|we+_Mathimul(U,oe),ve=_Mathimul(U,se),ye=0|ye+_Mathimul(D,le),we=0|we+_Mathimul(D,pe),we=0|we+_Mathimul(P,le),ve=0|ve+_Mathimul(P,pe),ye=0|ye+_Mathimul(L,ue),we=0|we+_Mathimul(L,fe),we=0|we+_Mathimul(R,ue),ve=0|ve+_Mathimul(R,fe),ye=0|ye+_Mathimul(I,ge),we=0|we+_Mathimul(I,be),we=0|we+_Mathimul(N,ge),ve=0|ve+_Mathimul(N,be);var Pe=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Pe>>>26),Pe&=67108863,ye=_Mathimul(B,le),we=_Mathimul(B,pe),we=0|we+_Mathimul(U,le),ve=_Mathimul(U,pe),ye=0|ye+_Mathimul(D,ue),we=0|we+_Mathimul(D,fe),we=0|we+_Mathimul(P,ue),ve=0|ve+_Mathimul(P,fe),ye=0|ye+_Mathimul(L,ge),we=0|we+_Mathimul(L,be),we=0|we+_Mathimul(R,ge),ve=0|ve+_Mathimul(R,be);var Oe=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Oe>>>26),Oe&=67108863,ye=_Mathimul(B,ue),we=_Mathimul(B,fe),we=0|we+_Mathimul(U,ue),ve=_Mathimul(U,fe),ye=0|ye+_Mathimul(D,ge),we=0|we+_Mathimul(D,be),we=0|we+_Mathimul(P,ge),ve=0|ve+_Mathimul(P,be);var Be=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Be>>>26),Be&=67108863,ye=_Mathimul(B,ge),we=_Mathimul(B,be),we=0|we+_Mathimul(U,ge),ve=_Mathimul(U,be);var Ue=0|(0|o+ye)+((8191&we)<<13);return o=0|(0|ve+(we>>>13))+(Ue>>>26),Ue&=67108863,d[0]=xe,d[1]=_e,d[2]=ke,d[3]=Ce,d[4]=Ee,d[5]=Te,d[6]=Ae,d[7]=Se,d[8]=Ie,d[9]=Ne,d[10]=je,d[11]=Le,d[12]=Re,d[13]=Me,d[14]=De,d[15]=Pe,d[16]=Oe,d[17]=Be,d[18]=Ue,0!=o&&(d[19]=o,i.length++),i};_Mathimul||(T=i),d.prototype.mulTo=function t(n,a){var r=this.length+n.length,o;return o=10===this.length&&10===n.length?T(this,n,a):63>r?i(this,n,a):1024>r?u(this,n,a):f(this,n,a),o},m.prototype.makeRBT=function n(a){for(var r=Array(a),t=d.prototype._countBits(a)-1,o=0;o<a;o++)r[o]=this.revBin(o,t,a);return r},m.prototype.revBin=function t(n,a,r){if(0===n||n===r-1)return n;for(var o=0,s=0;s<a;s++)o|=(1&n)<<a-s-1,n>>=1;return o},m.prototype.permute=function t(n,a,r,o,s,d){for(var l=0;l<d;l++)o[l]=a[n[l]],s[l]=r[n[l]]},m.prototype.transform=function t(n,a,r,i,o,d){this.permute(d,n,a,r,i,o);for(var c=1;c<o;c<<=1)for(var s=c<<1,l=_Mathcos(2*_MathPI/s),u=_Mathsin(2*_MathPI/s),f=0;f<o;f+=s)for(var m=l,h=u,g=0;g<c;g++){var b=r[f+g],y=i[f+g],w=r[f+g+c],v=i[f+g+c],x=m*w-h*v;v=m*v+h*w,w=x,r[f+g]=b+w,i[f+g]=y+v,r[f+g+c]=b-w,i[f+g+c]=y-v,g!==s&&(x=l*m-u*h,h=l*h+u*m,m=x)}},m.prototype.guessLen13b=function t(a,n){var r=1|_Mathmax(n,a),o=1&r,s=0;for(r=0|r/2;r;r>>>=1)s++;return 1<<s+1+o},m.prototype.conjugate=function n(a,r,o){if(!(1>=o))for(var s=0,i;s<o/2;s++)i=a[s],a[s]=a[o-s-1],a[o-s-1]=i,i=r[s],r[s]=-r[o-s-1],r[o-s-1]=-i},m.prototype.normalize13b=function t(n,a){for(var r=0,o=0,i;o<a/2;o++)i=8192*_Mathround(n[2*o+1]/a)+_Mathround(n[2*o]/a)+r,n[o]=67108863&i,r=67108864>i?0:0|i/67108864;return n},m.prototype.convert13b=function t(n,a,r,s){for(var d=0,l=0;l<a;l++)d+=0|n[l],r[2*l]=8191&d,d>>>=13,r[2*l+1]=8191&d,d>>>=13;for(l=2*a;l<s;++l)r[l]=0;o(0==d),o(0==(-8192&d))},m.prototype.stub=function t(n){for(var a=Array(n),r=0;r<n;r++)a[r]=0;return a},m.prototype.mulp=function t(n,a,r){var o=2*this.guessLen13b(n.length,a.length),s=this.makeRBT(o),d=this.stub(o),l=Array(o),c=Array(o),u=Array(o),f=Array(o),m=Array(o),h=Array(o),g=r.words;g.length=o,this.convert13b(n.words,n.length,l,o),this.convert13b(a.words,a.length,f,o),this.transform(l,d,c,u,o,s),this.transform(f,d,m,h,o,s);for(var b=0,i;b<o;b++)i=c[b]*m[b]-u[b]*h[b],u[b]=c[b]*h[b]+u[b]*m[b],c[b]=i;return this.conjugate(c,u,o),this.transform(c,u,g,d,o,s),this.conjugate(g,d,o),this.normalize13b(g,o),r.negative=n.negative^a.negative,r.length=n.length+a.length,r.strip()},d.prototype.mul=function t(n){var a=new d(null);return a.words=Array(this.length+n.length),this.mulTo(n,a)},d.prototype.mulf=function t(n){var a=new d(null);return a.words=Array(this.length+n.length),f(this,n,a)},d.prototype.imul=function t(n){return this.clone().mulTo(n,this)},d.prototype.imuln=function t(n){o('number'==typeof n),o(67108864>n);for(var a=0,r=0;r<this.length;r++){var i=(0|this.words[r])*n,s=(67108863&i)+(67108863&a);a>>=26,a+=0|i/67108864,a+=s>>>26,this.words[r]=67108863&s}return 0!=a&&(this.words[r]=a,this.length++),this},d.prototype.muln=function t(n){return this.clone().imuln(n)},d.prototype.sqr=function t(){return this.mul(this)},d.prototype.isqr=function t(){return this.imul(this.clone())},d.prototype.pow=function t(n){var a=c(n);if(0===a.length)return new d(1);for(var r=this,o=0;o<a.length&&!(0!==a[o]);o++,r=r.sqr());if(++o<a.length)for(var i=r.sqr();o<a.length;o++,i=i.sqr())0!==a[o]&&(r=r.mul(i));return r},d.prototype.iushln=function t(n){o('number'==typeof n&&0<=n);var a=n%26,r=(n-a)/26,s=67108863>>>26-a<<26-a,d;if(0!=a){var i=0;for(d=0;d<this.length;d++){var l=this.words[d]&s,u=(0|this.words[d])-l<<a;this.words[d]=u|i,i=l>>>26-a}i&&(this.words[d]=i,this.length++)}if(0!=r){for(d=this.length-1;0<=d;d--)this.words[d+r]=this.words[d];for(d=0;d<r;d++)this.words[d]=0;this.length+=r}return this.strip()},d.prototype.ishln=function t(n){return o(0===this.negative),this.iushln(n)},d.prototype.iushrn=function t(n,a,d){o('number'==typeof n&&0<=n);var l;l=a?(a-a%26)/26:0;var c=n%26,r=_Mathmin((n-c)/26,this.length),s=67108863^67108863>>>c<<c,u=d;if(l-=r,l=_Mathmax(0,l),u){for(var f=0;f<r;f++)u.words[f]=this.words[f];u.length=r}if(0===r);else if(this.length>r)for(this.length-=r,f=0;f<this.length;f++)this.words[f]=this.words[f+r];else this.words[0]=0,this.length=1;var i=0;for(f=this.length-1;0<=f&&(0!=i||f>=l);f--){var m=0|this.words[f];this.words[f]=i<<26-c|m>>>c,i=m&s}return u&&0!=i&&(u.words[u.length++]=i),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},d.prototype.ishrn=function t(n,a,r){return o(0===this.negative),this.iushrn(n,a,r)},d.prototype.shln=function t(n){return this.clone().ishln(n)},d.prototype.ushln=function t(n){return this.clone().iushln(n)},d.prototype.shrn=function t(n){return this.clone().ishrn(n)},d.prototype.ushrn=function t(n){return this.clone().iushrn(n)},d.prototype.testn=function t(n){o('number'==typeof n&&0<=n);var a=n%26,r=(n-a)/26,i=1<<a;if(this.length<=r)return!1;var s=this.words[r];return!!(s&i)},d.prototype.imaskn=function t(n){o('number'==typeof n&&0<=n);var a=n%26,r=(n-a)/26;if(o(0===this.negative,'imaskn works only with positive numbers'),this.length<=r)return this;if(0!=a&&r++,this.length=_Mathmin(r,this.length),0!=a){var i=67108863^67108863>>>a<<a;this.words[this.length-1]&=i}return this.strip()},d.prototype.maskn=function t(n){return this.clone().imaskn(n)},d.prototype.iaddn=function t(n){return o('number'==typeof n),o(67108864>n),0>n?this.isubn(-n):0===this.negative?this._iaddn(n):1===this.length&&(0|this.words[0])<n?(this.words[0]=n-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(n),this.negative=1,this)},d.prototype._iaddn=function t(n){this.words[0]+=n;for(var a=0;a<this.length&&67108864<=this.words[a];a++)this.words[a]-=67108864,a===this.length-1?this.words[a+1]=1:this.words[a+1]++;return this.length=_Mathmax(this.length,a+1),this},d.prototype.isubn=function t(n){if(o('number'==typeof n),o(67108864>n),0>n)return this.iaddn(-n);if(0!==this.negative)return this.negative=0,this.iaddn(n),this.negative=1,this;if(this.words[0]-=n,1===this.length&&0>this.words[0])this.words[0]=-this.words[0],this.negative=1;else for(var a=0;a<this.length&&0>this.words[a];a++)this.words[a]+=67108864,this.words[a+1]-=1;return this.strip()},d.prototype.addn=function t(n){return this.clone().iaddn(n)},d.prototype.subn=function t(n){return this.clone().isubn(n)},d.prototype.iabs=function t(){return this.negative=0,this},d.prototype.abs=function t(){return this.clone().iabs()},d.prototype._ishlnsubmul=function t(n,a,r){var s=n.length+r,d;this._expand(s);var i=0,l;for(d=0;d<n.length;d++){l=(0|this.words[d+r])+i;var c=(0|n.words[d])*a;l-=67108863&c,i=(l>>26)-(0|c/67108864),this.words[d+r]=67108863&l}for(;d<this.length-r;d++)l=(0|this.words[d+r])+i,i=l>>26,this.words[d+r]=67108863&l;if(0==i)return this.strip();for(o(-1==i),i=0,d=0;d<this.length;d++)l=-(0|this.words[d])+i,i=l>>26,this.words[d]=67108863&l;return this.negative=1,this.strip()},d.prototype._wordDiv=function t(n,r){var o=this.length-n.length,s=this.clone(),l=n,c=0|l.words[l.length-1],u=this._countBits(c);o=26-u,0!=o&&(l=l.ushln(o),s.iushln(o),c=0|l.words[l.length-1]);var f=s.length-l.length,m;if('mod'!==r){m=new d(null),m.length=f+1,m.words=Array(m.length);for(var h=0;h<m.length;h++)m.words[h]=0}var i=s.clone()._ishlnsubmul(l,1,f);0===i.negative&&(s=i,m&&(m.words[f]=1));for(var g=f-1,b;0<=g;g--){for(b=67108864*(0|s.words[l.length+g])+(0|s.words[l.length+g-1]),b=_Mathmin(0|b/c,67108863),s._ishlnsubmul(l,b,g);0!==s.negative;)b--,s.negative=0,s._ishlnsubmul(l,1,g),s.isZero()||(s.negative^=1);m&&(m.words[g]=b)}return m&&m.strip(),s.strip(),'div'!==r&&0!=o&&s.iushrn(o),{div:m||null,mod:s}},d.prototype.divmod=function t(n,a,r){if(o(!n.isZero()),this.isZero())return{div:new d(0),mod:new d(0)};var i,s,l;return 0!==this.negative&&0===n.negative?(l=this.neg().divmod(n,a),'mod'!==a&&(i=l.div.neg()),'div'!==a&&(s=l.mod.neg(),r&&0!==s.negative&&s.iadd(n)),{div:i,mod:s}):0===this.negative&&0!==n.negative?(l=this.divmod(n.neg(),a),'mod'!==a&&(i=l.div.neg()),{div:i,mod:l.mod}):0==(this.negative&n.negative)?n.length>this.length||0>this.cmp(n)?{div:new d(0),mod:this}:1===n.length?'div'===a?{div:this.divn(n.words[0]),mod:null}:'mod'===a?{div:null,mod:new d(this.modn(n.words[0]))}:{div:this.divn(n.words[0]),mod:new d(this.modn(n.words[0]))}:this._wordDiv(n,a):(l=this.neg().divmod(n.neg(),a),'div'!==a&&(s=l.mod.neg(),r&&0!==s.negative&&s.isub(n)),{div:l.div,mod:s})},d.prototype.div=function t(n){return this.divmod(n,'div',!1).div},d.prototype.mod=function t(n){return this.divmod(n,'mod',!1).mod},d.prototype.umod=function t(n){return this.divmod(n,'mod',!0).mod},d.prototype.divRound=function t(n){var a=this.divmod(n);if(a.mod.isZero())return a.div;var r=0===a.div.negative?a.mod:a.mod.isub(n),i=n.ushrn(1),o=n.andln(1),s=r.cmp(i);return 0>s||1===o&&0===s?a.div:0===a.div.negative?a.div.iaddn(1):a.div.isubn(1)},d.prototype.modn=function t(n){o(67108863>=n);for(var a=67108864%n,r=0,s=this.length-1;0<=s;s--)r=(a*r+(0|this.words[s]))%n;return r},d.prototype.idivn=function t(n){o(67108863>=n);for(var a=0,r=this.length-1,i;0<=r;r--)i=(0|this.words[r])+67108864*a,this.words[r]=0|i/n,a=i%n;return this.strip()},d.prototype.divn=function t(n){return this.clone().idivn(n)},d.prototype.egcd=function t(n){o(0===n.negative),o(!n.isZero());var a=this,r=n.clone();a=0===a.negative?a.clone():a.umod(n);for(var s=new d(1),l=new d(0),c=new d(0),u=new d(1),f=0;a.isEven()&&r.isEven();)a.iushrn(1),r.iushrn(1),++f;for(var m=r.clone(),h=a.clone();!a.isZero();){for(var g=0,i=1;0==(a.words[0]&i)&&26>g;++g,i<<=1);if(0<g)for(a.iushrn(g);0<g--;)(s.isOdd()||l.isOdd())&&(s.iadd(m),l.isub(h)),s.iushrn(1),l.iushrn(1);for(var b=0,y=1;0==(r.words[0]&y)&&26>b;++b,y<<=1);if(0<b)for(r.iushrn(b);0<b--;)(c.isOdd()||u.isOdd())&&(c.iadd(m),u.isub(h)),c.iushrn(1),u.iushrn(1);0<=a.cmp(r)?(a.isub(r),s.isub(c),l.isub(u)):(r.isub(a),c.isub(s),u.isub(l))}return{a:c,b:u,gcd:r.iushln(f)}},d.prototype._invmp=function t(n){o(0===n.negative),o(!n.isZero());var r=this,a=n.clone();r=0===r.negative?r.clone():r.umod(n);for(var s=new d(1),l=new d(0),c=a.clone();0<r.cmpn(1)&&0<a.cmpn(1);){for(var u=0,i=1;0==(r.words[0]&i)&&26>u;++u,i<<=1);if(0<u)for(r.iushrn(u);0<u--;)s.isOdd()&&s.iadd(c),s.iushrn(1);for(var f=0,m=1;0==(a.words[0]&m)&&26>f;++f,m<<=1);if(0<f)for(a.iushrn(f);0<f--;)l.isOdd()&&l.iadd(c),l.iushrn(1);0<=r.cmp(a)?(r.isub(a),s.isub(l)):(a.isub(r),l.isub(s))}var h;return h=0===r.cmpn(1)?s:l,0>h.cmpn(0)&&h.iadd(n),h},d.prototype.gcd=function n(i){if(this.isZero())return i.abs();if(i.isZero())return this.abs();var o=this.clone(),a=i.clone();o.negative=0,a.negative=0;for(var s=0;o.isEven()&&a.isEven();s++)o.iushrn(1),a.iushrn(1);do{for(;o.isEven();)o.iushrn(1);for(;a.isEven();)a.iushrn(1);var d=o.cmp(a);if(0>d){var r=o;o=a,a=r}else if(0===d||0===a.cmpn(1))break;o.isub(a)}while(!0);return a.iushln(s)},d.prototype.invm=function t(n){return this.egcd(n).a.umod(n)},d.prototype.isEven=function t(){return 0==(1&this.words[0])},d.prototype.isOdd=function t(){return 1==(1&this.words[0])},d.prototype.andln=function t(n){return this.words[0]&n},d.prototype.bincn=function t(n){o('number'==typeof n);var a=n%26,r=(n-a)/26,s=1<<a;if(this.length<=r)return this._expand(r+1),this.words[r]|=s,this;for(var d=s,l=r,i;0!=d&&l<this.length;l++)i=0|this.words[l],i+=d,d=i>>>26,i&=67108863,this.words[l]=i;return 0!=d&&(this.words[l]=d,this.length++),this},d.prototype.isZero=function t(){return 1===this.length&&0===this.words[0]},d.prototype.cmpn=function t(n){var a=0>n;if(0!==this.negative&&!a)return-1;if(0===this.negative&&a)return 1;this.strip();var r;if(1<this.length)r=1;else{a&&(n=-n),o(67108863>=n,'Number is too big');var i=0|this.words[0];r=i===n?0:i<n?-1:1}return 0===this.negative?r:0|-r},d.prototype.cmp=function t(n){if(0!==this.negative&&0===n.negative)return-1;if(0===this.negative&&0!==n.negative)return 1;var a=this.ucmp(n);return 0===this.negative?a:0|-a},d.prototype.ucmp=function t(n){if(this.length>n.length)return 1;if(this.length<n.length)return-1;for(var r=0,o=this.length-1;0<=o;o--){var i=0|this.words[o],a=0|n.words[o];if(i!=a){i<a?r=-1:i>a&&(r=1);break}}return r},d.prototype.gtn=function t(n){return 1===this.cmpn(n)},d.prototype.gt=function t(n){return 1===this.cmp(n)},d.prototype.gten=function t(n){return 0<=this.cmpn(n)},d.prototype.gte=function t(n){return 0<=this.cmp(n)},d.prototype.ltn=function t(n){return-1===this.cmpn(n)},d.prototype.lt=function t(n){return-1===this.cmp(n)},d.prototype.lten=function t(n){return 0>=this.cmpn(n)},d.prototype.lte=function t(n){return 0>=this.cmp(n)},d.prototype.eqn=function t(n){return 0===this.cmpn(n)},d.prototype.eq=function t(n){return 0===this.cmp(n)},d.red=function t(n){return new v(n)},d.prototype.toRed=function t(n){return o(!this.red,'Already a number in reduction context'),o(0===this.negative,'red works only with positives'),n.convertTo(this)._forceRed(n)},d.prototype.fromRed=function t(){return o(this.red,'fromRed works only with numbers in reduction context'),this.red.convertFrom(this)},d.prototype._forceRed=function t(n){return this.red=n,this},d.prototype.forceRed=function t(n){return o(!this.red,'Already a number in reduction context'),this._forceRed(n)},d.prototype.redAdd=function t(n){return o(this.red,'redAdd works only with red numbers'),this.red.add(this,n)},d.prototype.redIAdd=function t(n){return o(this.red,'redIAdd works only with red numbers'),this.red.iadd(this,n)},d.prototype.redSub=function t(n){return o(this.red,'redSub works only with red numbers'),this.red.sub(this,n)},d.prototype.redISub=function t(n){return o(this.red,'redISub works only with red numbers'),this.red.isub(this,n)},d.prototype.redShl=function t(n){return o(this.red,'redShl works only with red numbers'),this.red.shl(this,n)},d.prototype.redMul=function t(n){return o(this.red,'redMul works only with red numbers'),this.red._verify2(this,n),this.red.mul(this,n)},d.prototype.redIMul=function t(n){return o(this.red,'redMul works only with red numbers'),this.red._verify2(this,n),this.red.imul(this,n)},d.prototype.redSqr=function t(){return o(this.red,'redSqr works only with red numbers'),this.red._verify1(this),this.red.sqr(this)},d.prototype.redISqr=function t(){return o(this.red,'redISqr works only with red numbers'),this.red._verify1(this),this.red.isqr(this)},d.prototype.redSqrt=function t(){return o(this.red,'redSqrt works only with red numbers'),this.red._verify1(this),this.red.sqrt(this)},d.prototype.redInvm=function t(){return o(this.red,'redInvm works only with red numbers'),this.red._verify1(this),this.red.invm(this)},d.prototype.redNeg=function t(){return o(this.red,'redNeg works only with red numbers'),this.red._verify1(this),this.red.neg(this)},d.prototype.redPow=function t(n){return o(this.red&&!n.red,'redPow(normalNum)'),this.red._verify1(this),this.red.pow(this,n)};var A={k256:null,p224:null,p192:null,p25519:null};h.prototype._tmp=function t(){var n=new d(null);return n.words=Array(_Mathceil(this.n/13)),n},h.prototype.ireduce=function t(n){var a=n,r;do this.split(a,this.tmp),a=this.imulK(a),a=a.iadd(this.tmp),r=a.bitLength();while(r>this.n);var i=r<this.n?-1:a.ucmp(this.p);return 0===i?(a.words[0]=0,a.length=1):0<i?a.isub(this.p):a.strip(),a},h.prototype.split=function t(n,a){n.iushrn(this.n,0,a)},h.prototype.imulK=function t(n){return n.imul(this.k)},r(g,h),g.prototype.split=function t(n,a){for(var r=4194303,o=_Mathmin(n.length,9),s=0;s<o;s++)a.words[s]=n.words[s];if(a.length=o,9>=n.length)return n.words[0]=0,void(n.length=1);var i=n.words[9];for(a.words[a.length++]=i&r,s=10;s<n.length;s++){var d=0|n.words[s];n.words[s-10]=(d&r)<<4|i>>>22,i=d}i>>>=22,n.words[s-10]=i,n.length-=0===i&&10<n.length?10:9},g.prototype.imulK=function t(n){n.words[n.length]=0,n.words[n.length+1]=0,n.length+=2;for(var a=0,r=0,i;r<n.length;r++)i=0|n.words[r],a+=977*i,n.words[r]=67108863&a,a=64*i+(0|a/67108864);return 0===n.words[n.length-1]&&(n.length--,0===n.words[n.length-1]&&n.length--),n},r(b,h),r(y,h),r(w,h),w.prototype.imulK=function t(n){for(var a=0,r=0;r<n.length;r++){var i=19*(0|n.words[r])+a,o=67108863&i;i>>>=26,n.words[r]=o,a=i}return 0!=a&&(n.words[n.length++]=a),n},d._prime=function t(n){if(A[n])return A[n];var t;if('k256'===n)t=new g;else if('p224'===n)t=new b;else if('p192'===n)t=new y;else if('p25519'===n)t=new w;else throw new Error('Unknown prime '+n);return A[n]=t,t},v.prototype._verify1=function t(n){o(0===n.negative,'red works only with positives'),o(n.red,'red works only with red numbers')},v.prototype._verify2=function t(n,a){o(0==(n.negative|a.negative),'red works only with positives'),o(n.red&&n.red===a.red,'red works only with red numbers')},v.prototype.imod=function t(n){return this.prime?this.prime.ireduce(n)._forceRed(this):n.umod(this.m)._forceRed(this)},v.prototype.neg=function t(n){return n.isZero()?n.clone():this.m.sub(n)._forceRed(this)},v.prototype.add=function t(n,a){this._verify2(n,a);var r=n.add(a);return 0<=r.cmp(this.m)&&r.isub(this.m),r._forceRed(this)},v.prototype.iadd=function t(n,a){this._verify2(n,a);var r=n.iadd(a);return 0<=r.cmp(this.m)&&r.isub(this.m),r},v.prototype.sub=function t(n,a){this._verify2(n,a);var r=n.sub(a);return 0>r.cmpn(0)&&r.iadd(this.m),r._forceRed(this)},v.prototype.isub=function t(n,a){this._verify2(n,a);var r=n.isub(a);return 0>r.cmpn(0)&&r.iadd(this.m),r},v.prototype.shl=function t(n,a){return this._verify1(n),this.imod(n.ushln(a))},v.prototype.imul=function t(n,a){return this._verify2(n,a),this.imod(n.imul(a))},v.prototype.mul=function t(n,a){return this._verify2(n,a),this.imod(n.mul(a))},v.prototype.isqr=function t(n){return this.imul(n,n.clone())},v.prototype.sqr=function t(n){return this.mul(n,n)},v.prototype.sqrt=function n(l){if(l.isZero())return l.clone();var a=this.m.andln(3);if(o(1==a%2),3===a){var u=this.m.add(new d(1)).iushrn(2);return this.pow(l,u)}for(var f=this.m.subn(1),h=0;!f.isZero()&&0===f.andln(1);)h++,f.iushrn(1);o(!f.isZero());var s=new d(1).toRed(this),g=s.redNeg(),y=this.m.subn(1).iushrn(1),w=this.m.bitLength();for(w=new d(2*w*w).toRed(this);0!==this.pow(w,y).cmp(g);)w.redIAdd(g);for(var v=this.pow(w,f),c=this.pow(l,f.addn(1).iushrn(1)),r=this.pow(l,f),t=h;0!==r.cmp(s);){for(var m=r,x=0;0!==m.cmp(s);x++)m=m.redSqr();o(x<t);var i=this.pow(v,new d(1).iushln(t-x-1));c=c.redMul(i),v=i.redSqr(),r=r.redMul(v),t=x}return c},v.prototype.invm=function t(n){var a=n._invmp(this.m);return 0===a.negative?this.imod(a):(a.negative=0,this.imod(a).redNeg())},v.prototype.pow=function t(n,a){if(a.isZero())return new d(1).toRed(this);if(0===a.cmpn(1))return n.clone();var r=4,o=Array(1<<r);o[0]=new d(1).toRed(this),o[1]=n;for(var s=2;s<o.length;s++)o[s]=this.mul(o[s-1],n);var i=o[0],l=0,c=0,u=a.bitLength()%26;for(0==u&&(u=26),s=a.length-1;0<=s;s--){for(var f=a.words[s],m=u-1,h;0<=m;m--){if(h=1&f>>m,i!==o[0]&&(i=this.sqr(i)),0==h&&0==l){c=0;continue}l<<=1,l|=h,c++,c!=r&&(0!==s||0!==m)||(i=this.mul(i,o[l]),c=0,l=0)}u=26}return i},v.prototype.convertTo=function t(n){var a=n.umod(this.m);return a===n?a.clone():a},v.prototype.convertFrom=function t(n){var a=n.clone();return a.red=null,a},d.mont=function t(n){return new x(n)},r(x,v),x.prototype.convertTo=function t(n){return this.imod(n.ushln(this.shift))},x.prototype.convertFrom=function t(n){var a=this.imod(n.mul(this.rinv));return a.red=null,a},x.prototype.imul=function n(r,a){if(r.isZero()||a.isZero())return r.words[0]=0,r.length=1,r;var i=r.imul(a),t=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=i.isub(t).iushrn(this.shift),s=o;return 0<=o.cmp(this.m)?s=o.isub(this.m):0>o.cmpn(0)&&(s=o.iadd(this.m)),s._forceRed(this)},x.prototype.mul=function n(r,a){if(r.isZero()||a.isZero())return new d(0)._forceRed(this);var i=r.mul(a),t=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=i.isub(t).iushrn(this.shift),s=o;return 0<=o.cmp(this.m)?s=o.isub(this.m):0>o.cmpn(0)&&(s=o.iadd(this.m)),s._forceRed(this)},x.prototype.invm=function t(n){var a=this.imod(n._invmp(this.m).mul(this.r2));return a._forceRed(this)}})('undefined'==typeof t||t,this)}).call(n,a(9)(t))},function(t,n){},function(t,n){},function(t,n){t.exports={modp1:{gen:'02',prime:'ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff'},modp2:{gen:'02',prime:'ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff'},modp5:{gen:'02',prime:'ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff'},modp14:{gen:'02',prime:'ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff'},modp15:{gen:'02',prime:'ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff'},modp16:{gen:'02',prime:'ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff'},modp17:{gen:'02',prime:'ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff'},modp18:{gen:'02',prime:'ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff'}}},function(t,n,a){(function(n){function r(t,a){return a=a||'utf8',n.isBuffer(t)||(t=new n(t,a)),this._pub=new l(t),this}function i(t,a){return a=a||'utf8',n.isBuffer(t)||(t=new n(t,a)),this._priv=new l(t),this}function o(t,n){var a=n.toString('hex'),r=[a,t.toString(16)].join('_');if(r in v)return v[r];var i=0;if(t.isEven()||!y.simpleSieve||!y.fermatTest(t)||!u.test(t))return i+=1,i+='02'===a||'05'===a?8:4,v[r]=i,i;u.test(t.shrn(1))||(i+=2);var o;return'02'===a?t.mod(f).cmp(m)&&(i+=8):'05'===a?(o=t.mod(h),o.cmp(g)&&o.cmp(b)&&(i+=8)):i+=4,v[r]=i,i}function s(t,n,a){this.setGenerator(n),this.__prime=new l(t),this._prime=l.mont(this.__prime),this._primeLen=t.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,a?(this.setPublicKey=r,this.setPrivateKey=i):this._primeCode=8}function d(t,a){var r=new n(t.toArray());return a?r.toString(a):r}var l=a(227),c=a(228),u=new c,f=new l(24),m=new l(11),h=new l(10),g=new l(3),b=new l(7),y=a(226),w=a(55);t.exports=s;var v={};Object.defineProperty(s.prototype,'verifyError',{enumerable:!0,get:function(){return'number'!=typeof this._primeCode&&(this._primeCode=o(this.__prime,this.__gen)),this._primeCode}}),s.prototype.generateKeys=function(){return this._priv||(this._priv=new l(w(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},s.prototype.computeSecret=function(t){t=new l(t),t=t.toRed(this._prime);var a=t.redPow(this._priv).fromRed(),r=new n(a.toArray()),i=this.getPrime();if(r.length<i.length){var o=new n(i.length-r.length);o.fill(0),r=n.concat([o,r])}return r},s.prototype.getPublicKey=function t(n){return d(this._pub,n)},s.prototype.getPrivateKey=function t(n){return d(this._priv,n)},s.prototype.getPrime=function(t){return d(this.__prime,t)},s.prototype.getGenerator=function(t){return d(this._gen,t)},s.prototype.setGenerator=function(t,a){return a=a||'utf8',n.isBuffer(t)||(t=new n(t,a)),this.__gen=t,this._gen=new l(t),this}}).call(n,a(2).Buffer)},function(t,n,a){(function(n){function r(t){l.Writable.call(this);var n=m[t];if(!n)throw new Error('Unknown message digest');this._hashType=n.hash,this._hash=d(n.hash),this._tag=n.id,this._signType=n.sign}function i(t){l.Writable.call(this);var n=m[t];if(!n)throw new Error('Unknown message digest');this._hash=d(n.hash),this._tag=n.id,this._signType=n.sign}function o(t){return new r(t)}function s(t){return new i(t)}var d=a(66),l=a(53),c=a(0),u=a(390),f=a(432),m=a(216);Object.keys(m).forEach(function(t){m[t].id=new n(m[t].id,'hex'),m[t.toLowerCase()]=m[t]}),c(r,l.Writable),r.prototype._write=function t(n,a,r){this._hash.update(n),r()},r.prototype.update=function t(a,r){return'string'==typeof a&&(a=new n(a,r)),this._hash.update(a),this},r.prototype.sign=function t(n,a){this.end();var r=this._hash.digest(),i=u(r,n,this._hashType,this._signType,this._tag);return a?i.toString(a):i},c(i,l.Writable),i.prototype._write=function t(n,a,r){this._hash.update(n),r()},i.prototype.update=function t(a,r){return'string'==typeof a&&(a=new n(a,r)),this._hash.update(a),this},i.prototype.verify=function t(a,r,i){'string'==typeof r&&(r=new n(r,i)),this.end();var o=this._hash.digest();return f(r,o,a,this._signType,this._tag)},t.exports={Sign:o,Verify:s,createSign:o,createVerify:s}}).call(n,a(2).Buffer)},function(t,n,a){(function(n){function r(t,a,r,s,d){var l=y(a);if(l.curve){if('ecdsa'!==s&&'ecdsa/rsa'!==s)throw new Error('wrong private key type');return i(t,l)}if('dsa'===l.type){if('dsa'!==s)throw new Error('wrong private key type');return o(t,l,r)}if('rsa'!==s&&'ecdsa/rsa'!==s)throw new Error('wrong private key type');t=n.concat([d,t]);for(var c=l.modulus.byteLength(),u=[0,1];t.length+u.length+1<c;)u.push(255);u.push(0);for(var f=-1;++f<t.length;)u.push(t[f]);var m=h(u,l);return m}function i(t,a){var r=w[a.curve.join('.')];if(!r)throw new Error('unknown curve '+a.curve.join('.'));var i=new g(r),o=i.keyFromPrivate(a.privateKey),s=o.sign(t);return new n(s.toDER())}function o(t,n,a){for(var i=n.params.priv_key,o=n.params.p,m=n.params.q,h=n.params.g,g=new b(0),r=c(t,m).mod(m),y=!1,s=l(i,m,t,a),w;!1==y;)w=u(m,s,a),g=f(h,w,o,m),y=w.invm(m).imul(r.add(i.mul(g))).mod(m),0===y.cmpn(0)&&(y=!1,g=new b(0));return d(g,y)}function d(t,a){t=t.toArray(),a=a.toArray(),128&t[0]&&(t=[0].concat(t)),128&a[0]&&(a=[0].concat(a));var r=t.length+a.length+4,i=[48,r,2,t.length];return i=i.concat(t,[2,a.length],a),new n(i)}function l(t,a,r,i){if(t=new n(t.toArray()),t.length<a.byteLength()){var o=new n(a.byteLength()-t.length);o.fill(0),t=n.concat([o,t])}var d=r.length,l=s(r,a),c=new n(d);c.fill(1);var u=new n(d);return u.fill(0),u=m(i,u).update(c).update(new n([0])).update(t).update(l).digest(),c=m(i,u).update(c).digest(),u=m(i,u).update(c).update(new n([1])).update(t).update(l).digest(),c=m(i,u).update(c).digest(),{k:u,v:c}}function c(t,n){var a=new b(t),r=(t.length<<3)-n.bitLength();return 0<r&&a.ishrn(r),a}function s(t,a){t=c(t,a),t=t.mod(a);var r=new n(t.toArray());if(r.length<a.byteLength()){var i=new n(a.byteLength()-r.length);i.fill(0),r=n.concat([i,r])}return r}function u(a,r,i){var o,t;do{for(o=new n(0);8*o.length<a.bitLength();)r.v=m(i,r.k).update(r.v).digest(),o=n.concat([o,r.v]);t=c(o,a),r.k=m(i,r.k).update(r.v).update(new n([0])).digest(),r.v=m(i,r.k).update(r.v).digest()}while(-1!==t.cmp(a));return t}function f(t,n,a,r){return t.toRed(b.mont(a)).redPow(n).fromRed().mod(r)}var m=a(215),h=a(140),g=a(8).ec,b=a(234),y=a(94),w=a(239);t.exports=r,t.exports.getKey=l,t.exports.makeKey=u}).call(n,a(2).Buffer)},function(t,n,a){(function(t){(function(t,n){'use strict';function o(t,n){if(!t)throw new Error(n||'Assertion failed')}function r(t,n){t.super_=n;var a=function(){};a.prototype=n.prototype,t.prototype=new a,t.prototype.constructor=t}function d(t,n,a){return d.isBN(t)?t:void(this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&(('le'===n||'be'===n)&&(a=n,n=10),this._init(t||0,n||10,a||'be')))}function s(t,n,a){for(var o=0,r=_Mathmin(t.length,a),s=n,i;s<r;s++)i=t.charCodeAt(s)-48,o<<=4,o|=49<=i&&54>=i?i-49+10:17<=i&&22>=i?i-17+10:15&i;return o}function l(t,n,a,o){for(var s=0,r=_Mathmin(t.length,a),d=n,i;d<r;d++)i=t.charCodeAt(d)-48,s*=o,s+=49<=i?i-49+10:17<=i?i-17+10:i;return s}function c(t){for(var n=Array(t.bitLength()),a=0;a<n.length;a++){var r=0|a/26,i=a%26;n[a]=(t.words[r]&1<<i)>>>i}return n}function i(t,n,o){o.negative=n.negative^t.negative;var s=0|t.length+n.length;o.length=s,s=0|s-1;var d=0|t.words[0],a=0|n.words[0],l=d*a,r=67108863&l,c=0|l/67108864;o.words[0]=r;for(var u=1;u<s;u++){for(var f=c>>>26,m=67108863&c,h=_Mathmin(u,n.length-1),g=_Mathmax(0,u-t.length+1),b;g<=h;g++)b=0|u-g,d=0|t.words[b],a=0|n.words[g],l=d*a+m,f+=0|l/67108864,m=67108863&l;o.words[u]=0|m,c=0|f}return 0==c?o.length--:o.words[u]=0|c,o.strip()}function u(t,n,o){o.negative=n.negative^t.negative,o.length=t.length+n.length;for(var s=0,d=0,l=0,c;l<o.length-1;l++){c=d,d=0;for(var u=67108863&s,f=_Mathmin(l,n.length-1),m=_Mathmax(0,l-t.length+1);m<=f;m++){var h=l-m,i=0|t.words[h],a=0|n.words[m],g=i*a,r=67108863&g;c=0|c+(0|g/67108864),r=0|r+u,u=67108863&r,c=0|c+(r>>>26),d+=c>>>26,c&=67108863}o.words[l]=u,s=c,c=d}return 0==s?o.length--:o.words[l]=s,o.strip()}function f(t,n,a){var r=new m;return r.mulp(t,n,a)}function m(t,n){this.x=t,this.y=n}function h(t,n){this.name=t,this.p=new d(n,16),this.n=this.p.bitLength(),this.k=new d(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function g(){h.call(this,'k256','ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f')}function b(){h.call(this,'p224','ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001')}function y(){h.call(this,'p192','ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff')}function w(){h.call(this,'25519','7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed')}function v(t){if('string'==typeof t){var n=d._prime(t);this.m=n.p,this.prime=n}else o(t.gtn(1),'modulus must be greater than 1'),this.m=t,this.prime=null}function x(t){v.call(this,t),this.shift=this.m.bitLength(),0!=this.shift%26&&(this.shift+=26-this.shift%26),this.r=new d(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}'object'==typeof t?t.exports=d:n.BN=d,d.BN=d,d.wordSize=26;var _;try{_=a(392).Buffer}catch(t){}d.isBN=function t(n){return!!(n instanceof d)||null!==n&&'object'==typeof n&&n.constructor.wordSize===d.wordSize&&Array.isArray(n.words)},d.max=function t(n,a){return 0<n.cmp(a)?n:a},d.min=function t(n,a){return 0>n.cmp(a)?n:a},d.prototype._init=function t(n,a,r){if('number'==typeof n)return this._initNumber(n,a,r);if('object'==typeof n)return this._initArray(n,a,r);'hex'===a&&(a=16),o(a===(0|a)&&2<=a&&36>=a),n=n.toString().replace(/\s+/g,'');var i=0;'-'===n[0]&&i++,16===a?this._parseHex(n,i):this._parseBase(n,a,i),'-'===n[0]&&(this.negative=1),this.strip();'le'!==r||this._initArray(this.toArray(),a,r)},d.prototype._initNumber=function t(n,a,r){0>n&&(this.negative=1,n=-n),67108864>n?(this.words=[67108863&n],this.length=1):4503599627370496>n?(this.words=[67108863&n,67108863&n/67108864],this.length=2):(o(9007199254740992>n),this.words=[67108863&n,67108863&n/67108864,1],this.length=3);'le'!==r||this._initArray(this.toArray(),a,r)},d.prototype._initArray=function t(n,a,r){if(o('number'==typeof n.length),0>=n.length)return this.words=[0],this.length=1,this;this.length=_Mathceil(n.length/3),this.words=Array(this.length);for(var s=0;s<this.length;s++)this.words[s]=0;var i=0,d,l;if('be'===r)for(s=n.length-1,d=0;0<=s;s-=3)l=n[s]|n[s-1]<<8|n[s-2]<<16,this.words[d]|=67108863&l<<i,this.words[d+1]=67108863&l>>>26-i,i+=24,26<=i&&(i-=26,d++);else if('le'===r)for(s=0,d=0;s<n.length;s+=3)l=n[s]|n[s+1]<<8|n[s+2]<<16,this.words[d]|=67108863&l<<i,this.words[d+1]=67108863&l>>>26-i,i+=24,26<=i&&(i-=26,d++);return this.strip()},d.prototype._parseHex=function t(n,a){this.length=_Mathceil((n.length-a)/6),this.words=Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var i=0,o,d;for(r=n.length-6,o=0;r>=a;r-=6)d=s(n,r,r+6),this.words[o]|=67108863&d<<i,this.words[o+1]|=4194303&d>>>26-i,i+=24,26<=i&&(i-=26,o++);r+6!==a&&(d=s(n,a,r+6),this.words[o]|=67108863&d<<i,this.words[o+1]|=4194303&d>>>26-i),this.strip()},d.prototype._parseBase=function t(n,a,r){this.words=[0],this.length=1;for(var o=0,s=1;67108863>=s;s*=a)o++;o--,s=0|s/a;for(var d=n.length-r,c=d%o,u=_Mathmin(d,d-c)+r,f=0,m=r;m<u;m+=o)f=l(n,m,m+o,a),this.imuln(s),67108864>this.words[0]+f?this.words[0]+=f:this._iaddn(f);if(0!=c){var i=1;for(f=l(n,m,n.length,a),m=0;m<c;m++)i*=a;this.imuln(i),67108864>this.words[0]+f?this.words[0]+=f:this._iaddn(f)}},d.prototype.copy=function t(n){n.words=Array(this.length);for(var a=0;a<this.length;a++)n.words[a]=this.words[a];n.length=this.length,n.negative=this.negative,n.red=this.red},d.prototype.clone=function t(){var n=new d(null);return this.copy(n),n},d.prototype._expand=function t(n){for(;this.length<n;)this.words[this.length++]=0;return this},d.prototype.strip=function t(){for(;1<this.length&&0===this.words[this.length-1];)this.length--;return this._normSign()},d.prototype._normSign=function t(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},d.prototype.inspect=function t(){return(this.red?'<BN-R: ':'<BN: ')+this.toString(16)+'>'};var k=['','0','00','000','0000','00000','000000','0000000','00000000','000000000','0000000000','00000000000','000000000000','0000000000000','00000000000000','000000000000000','0000000000000000','00000000000000000','000000000000000000','0000000000000000000','00000000000000000000','000000000000000000000','0000000000000000000000','00000000000000000000000','000000000000000000000000','0000000000000000000000000'],C=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],E=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,10000000,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64000000,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,24300000,28629151,33554432,39135393,45435424,52521875,60466176];d.prototype.toString=function t(n,a){n=n||10,a=0|a||1;var s;if(16===n||'hex'===n){s='';for(var d=0,l=0,u=0;u<this.length;u++){var i=this.words[u],f=(16777215&(i<<d|l)).toString(16);l=16777215&i>>>24-d,s=0!=l||u!==this.length-1?k[6-f.length]+f+s:f+s,d+=2,26<=d&&(d-=26,u--)}for(0!=l&&(s=l.toString(16)+s);0!=s.length%a;)s='0'+s;return 0!==this.negative&&(s='-'+s),s}if(n===(0|n)&&2<=n&&36>=n){var m=C[n],h=E[n];s='';var g=this.clone();for(g.negative=0;!g.isZero();){var c=g.modn(h).toString(n);g=g.idivn(h),s=g.isZero()?c+s:k[m-c.length]+c+s}for(this.isZero()&&(s='0'+s);0!=s.length%a;)s='0'+s;return 0!==this.negative&&(s='-'+s),s}o(!1,'Base should be between 2 and 36')},d.prototype.toNumber=function t(){var n=this.words[0];return 2===this.length?n+=67108864*this.words[1]:3===this.length&&1===this.words[2]?n+=4503599627370496+67108864*this.words[1]:2<this.length&&o(!1,'Number can only safely store up to 53 bits'),0===this.negative?n:-n},d.prototype.toJSON=function t(){return this.toString(16)},d.prototype.toBuffer=function t(n,a){return o('undefined'!=typeof _),this.toArrayLike(_,n,a)},d.prototype.toArray=function t(n,a){return this.toArrayLike(Array,n,a)},d.prototype.toArrayLike=function t(n,a,r){var s=this.byteLength(),d=r||_Mathmax(1,s);o(s<=d,'byte array longer than desired length'),o(0<d,'Requested array length <= 0'),this.strip();var l='le'===a,c=new n(d),u=this.clone(),f,m;if(!l){for(m=0;m<d-s;m++)c[m]=0;for(m=0;!u.isZero();m++)f=u.andln(255),u.iushrn(8),c[d-m-1]=f}else{for(m=0;!u.isZero();m++)f=u.andln(255),u.iushrn(8),c[m]=f;for(;m<d;m++)c[m]=0}return c},d.prototype._countBits=_Mathclz?function t(n){return 32-_Mathclz(n)}:function n(a){var i=a,t=0;return 4096<=i&&(t+=13,i>>>=13),64<=i&&(t+=7,i>>>=7),8<=i&&(t+=4,i>>>=4),2<=i&&(t+=2,i>>>=2),t+i},d.prototype._zeroBits=function n(a){if(0===a)return 26;var i=a,t=0;return 0==(8191&i)&&(t+=13,i>>>=13),0==(127&i)&&(t+=7,i>>>=7),0==(15&i)&&(t+=4,i>>>=4),0==(3&i)&&(t+=2,i>>>=2),0==(1&i)&&t++,t},d.prototype.bitLength=function t(){var n=this.words[this.length-1],a=this._countBits(n);return 26*(this.length-1)+a},d.prototype.zeroBits=function t(){if(this.isZero())return 0;for(var n=0,a=0,r;a<this.length&&(r=this._zeroBits(this.words[a]),n+=r,26===r);a++);return n},d.prototype.byteLength=function t(){return _Mathceil(this.bitLength()/8)},d.prototype.toTwos=function t(n){return 0===this.negative?this.clone():this.abs().inotn(n).iaddn(1)},d.prototype.fromTwos=function t(n){return this.testn(n-1)?this.notn(n).iaddn(1).ineg():this.clone()},d.prototype.isNeg=function t(){return 0!==this.negative},d.prototype.neg=function t(){return this.clone().ineg()},d.prototype.ineg=function t(){return this.isZero()||(this.negative^=1),this},d.prototype.iuor=function t(n){for(;this.length<n.length;)this.words[this.length++]=0;for(var a=0;a<n.length;a++)this.words[a]|=n.words[a];return this.strip()},d.prototype.ior=function t(n){return o(0==(this.negative|n.negative)),this.iuor(n)},d.prototype.or=function t(n){return this.length>n.length?this.clone().ior(n):n.clone().ior(this)},d.prototype.uor=function t(n){return this.length>n.length?this.clone().iuor(n):n.clone().iuor(this)},d.prototype.iuand=function t(n){var a;a=this.length>n.length?n:this;for(var r=0;r<a.length;r++)this.words[r]&=n.words[r];return this.length=a.length,this.strip()},d.prototype.iand=function t(n){return o(0==(this.negative|n.negative)),this.iuand(n)},d.prototype.and=function t(n){return this.length>n.length?this.clone().iand(n):n.clone().iand(this)},d.prototype.uand=function t(n){return this.length>n.length?this.clone().iuand(n):n.clone().iuand(this)},d.prototype.iuxor=function t(n){var r,a;this.length>n.length?(r=this,a=n):(r=n,a=this);for(var o=0;o<a.length;o++)this.words[o]=r.words[o]^a.words[o];if(this!==r)for(;o<r.length;o++)this.words[o]=r.words[o];return this.length=r.length,this.strip()},d.prototype.ixor=function t(n){return o(0==(this.negative|n.negative)),this.iuxor(n)},d.prototype.xor=function t(n){return this.length>n.length?this.clone().ixor(n):n.clone().ixor(this)},d.prototype.uxor=function t(n){return this.length>n.length?this.clone().iuxor(n):n.clone().iuxor(this)},d.prototype.inotn=function t(n){o('number'==typeof n&&0<=n);var a=0|_Mathceil(n/26),r=n%26;this._expand(a),0<r&&a--;for(var s=0;s<a;s++)this.words[s]=67108863&~this.words[s];return 0<r&&(this.words[s]=~this.words[s]&67108863>>26-r),this.strip()},d.prototype.notn=function t(n){return this.clone().inotn(n)},d.prototype.setn=function t(n,a){o('number'==typeof n&&0<=n);var r=0|n/26,i=n%26;return this._expand(r+1),a?this.words[r]|=1<<i:this.words[r]&=~(1<<i),this.strip()},d.prototype.iadd=function t(n){var o;if(0!==this.negative&&0===n.negative)return this.negative=0,o=this.isub(n),this.negative^=1,this._normSign();if(0===this.negative&&0!==n.negative)return n.negative=0,o=this.isub(n),n.negative=1,o._normSign();var r,a;this.length>n.length?(r=this,a=n):(r=n,a=this);for(var s=0,d=0;d<a.length;d++)o=(0|r.words[d])+(0|a.words[d])+s,this.words[d]=67108863&o,s=o>>>26;for(;0!=s&&d<r.length;d++)o=(0|r.words[d])+s,this.words[d]=67108863&o,s=o>>>26;if(this.length=r.length,0!=s)this.words[this.length]=s,this.length++;else if(r!==this)for(;d<r.length;d++)this.words[d]=r.words[d];return this},d.prototype.add=function t(n){var a;return 0!==n.negative&&0===this.negative?(n.negative=0,a=this.sub(n),n.negative^=1,a):0===n.negative&&0!==this.negative?(this.negative=0,a=n.sub(this),this.negative=1,a):this.length>n.length?this.clone().iadd(n):n.clone().iadd(this)},d.prototype.isub=function t(n){if(0!==n.negative){n.negative=0;var o=this.iadd(n);return n.negative=1,o._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(n),this.negative=1,this._normSign();var r=this.cmp(n);if(0===r)return this.negative=0,this.length=1,this.words[0]=0,this;var s,a;0<r?(s=this,a=n):(s=n,a=this);for(var d=0,l=0;l<a.length;l++)o=(0|s.words[l])-(0|a.words[l])+d,d=o>>26,this.words[l]=67108863&o;for(;0!=d&&l<s.length;l++)o=(0|s.words[l])+d,d=o>>26,this.words[l]=67108863&o;if(0==d&&l<s.length&&s!==this)for(;l<s.length;l++)this.words[l]=s.words[l];return this.length=_Mathmax(this.length,l),s!==this&&(this.negative=1),this.strip()},d.prototype.sub=function t(n){return this.clone().isub(n)};var T=function t(n,r,i){var s=n.words,a=r.words,d=i.words,o=0,l=0|s[0],c=8191&l,u=l>>>13,f=0|s[1],m=8191&f,h=f>>>13,g=0|s[2],b=8191&g,y=g>>>13,w=0|s[3],v=8191&w,x=w>>>13,_=0|s[4],k=8191&_,C=_>>>13,E=0|s[5],T=8191&E,A=E>>>13,S=0|s[6],I=8191&S,N=S>>>13,j=0|s[7],L=8191&j,R=j>>>13,M=0|s[8],D=8191&M,P=M>>>13,O=0|s[9],B=8191&O,U=O>>>13,F=0|a[0],q=8191&F,z=F>>>13,H=0|a[1],W=8191&H,V=H>>>13,G=0|a[2],J=8191&G,K=G>>>13,X=0|a[3],Y=8191&X,Z=X>>>13,Q=0|a[4],ee=8191&Q,te=Q>>>13,ne=0|a[5],ae=8191&ne,re=ne>>>13,ie=0|a[6],oe=8191&ie,se=ie>>>13,de=0|a[7],le=8191&de,pe=de>>>13,ce=0|a[8],ue=8191&ce,fe=ce>>>13,he=0|a[9],ge=8191&he,be=he>>>13,ye,we,ve;i.negative=n.negative^r.negative,i.length=19,ye=_Mathimul(c,q),we=_Mathimul(c,z),we=0|we+_Mathimul(u,q),ve=_Mathimul(u,z);var xe=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(xe>>>26),xe&=67108863,ye=_Mathimul(m,q),we=_Mathimul(m,z),we=0|we+_Mathimul(h,q),ve=_Mathimul(h,z),ye=0|ye+_Mathimul(c,W),we=0|we+_Mathimul(c,V),we=0|we+_Mathimul(u,W),ve=0|ve+_Mathimul(u,V);var _e=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(_e>>>26),_e&=67108863,ye=_Mathimul(b,q),we=_Mathimul(b,z),we=0|we+_Mathimul(y,q),ve=_Mathimul(y,z),ye=0|ye+_Mathimul(m,W),we=0|we+_Mathimul(m,V),we=0|we+_Mathimul(h,W),ve=0|ve+_Mathimul(h,V),ye=0|ye+_Mathimul(c,J),we=0|we+_Mathimul(c,K),we=0|we+_Mathimul(u,J),ve=0|ve+_Mathimul(u,K);var ke=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(ke>>>26),ke&=67108863,ye=_Mathimul(v,q),we=_Mathimul(v,z),we=0|we+_Mathimul(x,q),ve=_Mathimul(x,z),ye=0|ye+_Mathimul(b,W),we=0|we+_Mathimul(b,V),we=0|we+_Mathimul(y,W),ve=0|ve+_Mathimul(y,V),ye=0|ye+_Mathimul(m,J),we=0|we+_Mathimul(m,K),we=0|we+_Mathimul(h,J),ve=0|ve+_Mathimul(h,K),ye=0|ye+_Mathimul(c,Y),we=0|we+_Mathimul(c,Z),we=0|we+_Mathimul(u,Y),ve=0|ve+_Mathimul(u,Z);var Ce=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Ce>>>26),Ce&=67108863,ye=_Mathimul(k,q),we=_Mathimul(k,z),we=0|we+_Mathimul(C,q),ve=_Mathimul(C,z),ye=0|ye+_Mathimul(v,W),we=0|we+_Mathimul(v,V),we=0|we+_Mathimul(x,W),ve=0|ve+_Mathimul(x,V),ye=0|ye+_Mathimul(b,J),we=0|we+_Mathimul(b,K),we=0|we+_Mathimul(y,J),ve=0|ve+_Mathimul(y,K),ye=0|ye+_Mathimul(m,Y),we=0|we+_Mathimul(m,Z),we=0|we+_Mathimul(h,Y),ve=0|ve+_Mathimul(h,Z),ye=0|ye+_Mathimul(c,ee),we=0|we+_Mathimul(c,te),we=0|we+_Mathimul(u,ee),ve=0|ve+_Mathimul(u,te);var Ee=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Ee>>>26),Ee&=67108863,ye=_Mathimul(T,q),we=_Mathimul(T,z),we=0|we+_Mathimul(A,q),ve=_Mathimul(A,z),ye=0|ye+_Mathimul(k,W),we=0|we+_Mathimul(k,V),we=0|we+_Mathimul(C,W),ve=0|ve+_Mathimul(C,V),ye=0|ye+_Mathimul(v,J),we=0|we+_Mathimul(v,K),we=0|we+_Mathimul(x,J),ve=0|ve+_Mathimul(x,K),ye=0|ye+_Mathimul(b,Y),we=0|we+_Mathimul(b,Z),we=0|we+_Mathimul(y,Y),ve=0|ve+_Mathimul(y,Z),ye=0|ye+_Mathimul(m,ee),we=0|we+_Mathimul(m,te),we=0|we+_Mathimul(h,ee),ve=0|ve+_Mathimul(h,te),ye=0|ye+_Mathimul(c,ae),we=0|we+_Mathimul(c,re),we=0|we+_Mathimul(u,ae),ve=0|ve+_Mathimul(u,re);var Te=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Te>>>26),Te&=67108863,ye=_Mathimul(I,q),we=_Mathimul(I,z),we=0|we+_Mathimul(N,q),ve=_Mathimul(N,z),ye=0|ye+_Mathimul(T,W),we=0|we+_Mathimul(T,V),we=0|we+_Mathimul(A,W),ve=0|ve+_Mathimul(A,V),ye=0|ye+_Mathimul(k,J),we=0|we+_Mathimul(k,K),we=0|we+_Mathimul(C,J),ve=0|ve+_Mathimul(C,K),ye=0|ye+_Mathimul(v,Y),we=0|we+_Mathimul(v,Z),we=0|we+_Mathimul(x,Y),ve=0|ve+_Mathimul(x,Z),ye=0|ye+_Mathimul(b,ee),we=0|we+_Mathimul(b,te),we=0|we+_Mathimul(y,ee),ve=0|ve+_Mathimul(y,te),ye=0|ye+_Mathimul(m,ae),we=0|we+_Mathimul(m,re),we=0|we+_Mathimul(h,ae),ve=0|ve+_Mathimul(h,re),ye=0|ye+_Mathimul(c,oe),we=0|we+_Mathimul(c,se),we=0|we+_Mathimul(u,oe),ve=0|ve+_Mathimul(u,se);var Ae=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Ae>>>26),Ae&=67108863,ye=_Mathimul(L,q),we=_Mathimul(L,z),we=0|we+_Mathimul(R,q),ve=_Mathimul(R,z),ye=0|ye+_Mathimul(I,W),we=0|we+_Mathimul(I,V),we=0|we+_Mathimul(N,W),ve=0|ve+_Mathimul(N,V),ye=0|ye+_Mathimul(T,J),we=0|we+_Mathimul(T,K),we=0|we+_Mathimul(A,J),ve=0|ve+_Mathimul(A,K),ye=0|ye+_Mathimul(k,Y),we=0|we+_Mathimul(k,Z),we=0|we+_Mathimul(C,Y),ve=0|ve+_Mathimul(C,Z),ye=0|ye+_Mathimul(v,ee),we=0|we+_Mathimul(v,te),we=0|we+_Mathimul(x,ee),ve=0|ve+_Mathimul(x,te),ye=0|ye+_Mathimul(b,ae),we=0|we+_Mathimul(b,re),we=0|we+_Mathimul(y,ae),ve=0|ve+_Mathimul(y,re),ye=0|ye+_Mathimul(m,oe),we=0|we+_Mathimul(m,se),we=0|we+_Mathimul(h,oe),ve=0|ve+_Mathimul(h,se),ye=0|ye+_Mathimul(c,le),we=0|we+_Mathimul(c,pe),we=0|we+_Mathimul(u,le),ve=0|ve+_Mathimul(u,pe);var Se=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Se>>>26),Se&=67108863,ye=_Mathimul(D,q),we=_Mathimul(D,z),we=0|we+_Mathimul(P,q),ve=_Mathimul(P,z),ye=0|ye+_Mathimul(L,W),we=0|we+_Mathimul(L,V),we=0|we+_Mathimul(R,W),ve=0|ve+_Mathimul(R,V),ye=0|ye+_Mathimul(I,J),we=0|we+_Mathimul(I,K),we=0|we+_Mathimul(N,J),ve=0|ve+_Mathimul(N,K),ye=0|ye+_Mathimul(T,Y),we=0|we+_Mathimul(T,Z),we=0|we+_Mathimul(A,Y),ve=0|ve+_Mathimul(A,Z),ye=0|ye+_Mathimul(k,ee),we=0|we+_Mathimul(k,te),we=0|we+_Mathimul(C,ee),ve=0|ve+_Mathimul(C,te),ye=0|ye+_Mathimul(v,ae),we=0|we+_Mathimul(v,re),we=0|we+_Mathimul(x,ae),ve=0|ve+_Mathimul(x,re),ye=0|ye+_Mathimul(b,oe),we=0|we+_Mathimul(b,se),we=0|we+_Mathimul(y,oe),ve=0|ve+_Mathimul(y,se),ye=0|ye+_Mathimul(m,le),we=0|we+_Mathimul(m,pe),we=0|we+_Mathimul(h,le),ve=0|ve+_Mathimul(h,pe),ye=0|ye+_Mathimul(c,ue),we=0|we+_Mathimul(c,fe),we=0|we+_Mathimul(u,ue),ve=0|ve+_Mathimul(u,fe);var Ie=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Ie>>>26),Ie&=67108863,ye=_Mathimul(B,q),we=_Mathimul(B,z),we=0|we+_Mathimul(U,q),ve=_Mathimul(U,z),ye=0|ye+_Mathimul(D,W),we=0|we+_Mathimul(D,V),we=0|we+_Mathimul(P,W),ve=0|ve+_Mathimul(P,V),ye=0|ye+_Mathimul(L,J),we=0|we+_Mathimul(L,K),we=0|we+_Mathimul(R,J),ve=0|ve+_Mathimul(R,K),ye=0|ye+_Mathimul(I,Y),we=0|we+_Mathimul(I,Z),we=0|we+_Mathimul(N,Y),ve=0|ve+_Mathimul(N,Z),ye=0|ye+_Mathimul(T,ee),we=0|we+_Mathimul(T,te),we=0|we+_Mathimul(A,ee),ve=0|ve+_Mathimul(A,te),ye=0|ye+_Mathimul(k,ae),we=0|we+_Mathimul(k,re),we=0|we+_Mathimul(C,ae),ve=0|ve+_Mathimul(C,re),ye=0|ye+_Mathimul(v,oe),we=0|we+_Mathimul(v,se),we=0|we+_Mathimul(x,oe),ve=0|ve+_Mathimul(x,se),ye=0|ye+_Mathimul(b,le),we=0|we+_Mathimul(b,pe),we=0|we+_Mathimul(y,le),ve=0|ve+_Mathimul(y,pe),ye=0|ye+_Mathimul(m,ue),we=0|we+_Mathimul(m,fe),we=0|we+_Mathimul(h,ue),ve=0|ve+_Mathimul(h,fe),ye=0|ye+_Mathimul(c,ge),we=0|we+_Mathimul(c,be),we=0|we+_Mathimul(u,ge),ve=0|ve+_Mathimul(u,be);var Ne=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Ne>>>26),Ne&=67108863,ye=_Mathimul(B,W),we=_Mathimul(B,V),we=0|we+_Mathimul(U,W),ve=_Mathimul(U,V),ye=0|ye+_Mathimul(D,J),we=0|we+_Mathimul(D,K),we=0|we+_Mathimul(P,J),ve=0|ve+_Mathimul(P,K),ye=0|ye+_Mathimul(L,Y),we=0|we+_Mathimul(L,Z),we=0|we+_Mathimul(R,Y),ve=0|ve+_Mathimul(R,Z),ye=0|ye+_Mathimul(I,ee),we=0|we+_Mathimul(I,te),we=0|we+_Mathimul(N,ee),ve=0|ve+_Mathimul(N,te),ye=0|ye+_Mathimul(T,ae),we=0|we+_Mathimul(T,re),we=0|we+_Mathimul(A,ae),ve=0|ve+_Mathimul(A,re),ye=0|ye+_Mathimul(k,oe),we=0|we+_Mathimul(k,se),we=0|we+_Mathimul(C,oe),ve=0|ve+_Mathimul(C,se),ye=0|ye+_Mathimul(v,le),we=0|we+_Mathimul(v,pe),we=0|we+_Mathimul(x,le),ve=0|ve+_Mathimul(x,pe),ye=0|ye+_Mathimul(b,ue),we=0|we+_Mathimul(b,fe),we=0|we+_Mathimul(y,ue),ve=0|ve+_Mathimul(y,fe),ye=0|ye+_Mathimul(m,ge),we=0|we+_Mathimul(m,be),we=0|we+_Mathimul(h,ge),ve=0|ve+_Mathimul(h,be);var je=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(je>>>26),je&=67108863,ye=_Mathimul(B,J),we=_Mathimul(B,K),we=0|we+_Mathimul(U,J),ve=_Mathimul(U,K),ye=0|ye+_Mathimul(D,Y),we=0|we+_Mathimul(D,Z),we=0|we+_Mathimul(P,Y),ve=0|ve+_Mathimul(P,Z),ye=0|ye+_Mathimul(L,ee),we=0|we+_Mathimul(L,te),we=0|we+_Mathimul(R,ee),ve=0|ve+_Mathimul(R,te),ye=0|ye+_Mathimul(I,ae),we=0|we+_Mathimul(I,re),we=0|we+_Mathimul(N,ae),ve=0|ve+_Mathimul(N,re),ye=0|ye+_Mathimul(T,oe),we=0|we+_Mathimul(T,se),we=0|we+_Mathimul(A,oe),ve=0|ve+_Mathimul(A,se),ye=0|ye+_Mathimul(k,le),we=0|we+_Mathimul(k,pe),we=0|we+_Mathimul(C,le),ve=0|ve+_Mathimul(C,pe),ye=0|ye+_Mathimul(v,ue),we=0|we+_Mathimul(v,fe),we=0|we+_Mathimul(x,ue),ve=0|ve+_Mathimul(x,fe),ye=0|ye+_Mathimul(b,ge),we=0|we+_Mathimul(b,be),we=0|we+_Mathimul(y,ge),ve=0|ve+_Mathimul(y,be);var Le=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Le>>>26),Le&=67108863,ye=_Mathimul(B,Y),we=_Mathimul(B,Z),we=0|we+_Mathimul(U,Y),ve=_Mathimul(U,Z),ye=0|ye+_Mathimul(D,ee),we=0|we+_Mathimul(D,te),we=0|we+_Mathimul(P,ee),ve=0|ve+_Mathimul(P,te),ye=0|ye+_Mathimul(L,ae),we=0|we+_Mathimul(L,re),we=0|we+_Mathimul(R,ae),ve=0|ve+_Mathimul(R,re),ye=0|ye+_Mathimul(I,oe),we=0|we+_Mathimul(I,se),we=0|we+_Mathimul(N,oe),ve=0|ve+_Mathimul(N,se),ye=0|ye+_Mathimul(T,le),we=0|we+_Mathimul(T,pe),we=0|we+_Mathimul(A,le),ve=0|ve+_Mathimul(A,pe),ye=0|ye+_Mathimul(k,ue),we=0|we+_Mathimul(k,fe),we=0|we+_Mathimul(C,ue),ve=0|ve+_Mathimul(C,fe),ye=0|ye+_Mathimul(v,ge),we=0|we+_Mathimul(v,be),we=0|we+_Mathimul(x,ge),ve=0|ve+_Mathimul(x,be);var Re=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Re>>>26),Re&=67108863,ye=_Mathimul(B,ee),we=_Mathimul(B,te),we=0|we+_Mathimul(U,ee),ve=_Mathimul(U,te),ye=0|ye+_Mathimul(D,ae),we=0|we+_Mathimul(D,re),we=0|we+_Mathimul(P,ae),ve=0|ve+_Mathimul(P,re),ye=0|ye+_Mathimul(L,oe),we=0|we+_Mathimul(L,se),we=0|we+_Mathimul(R,oe),ve=0|ve+_Mathimul(R,se),ye=0|ye+_Mathimul(I,le),we=0|we+_Mathimul(I,pe),we=0|we+_Mathimul(N,le),ve=0|ve+_Mathimul(N,pe),ye=0|ye+_Mathimul(T,ue),we=0|we+_Mathimul(T,fe),we=0|we+_Mathimul(A,ue),ve=0|ve+_Mathimul(A,fe),ye=0|ye+_Mathimul(k,ge),we=0|we+_Mathimul(k,be),we=0|we+_Mathimul(C,ge),ve=0|ve+_Mathimul(C,be);var Me=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Me>>>26),Me&=67108863,ye=_Mathimul(B,ae),we=_Mathimul(B,re),we=0|we+_Mathimul(U,ae),ve=_Mathimul(U,re),ye=0|ye+_Mathimul(D,oe),we=0|we+_Mathimul(D,se),we=0|we+_Mathimul(P,oe),ve=0|ve+_Mathimul(P,se),ye=0|ye+_Mathimul(L,le),we=0|we+_Mathimul(L,pe),we=0|we+_Mathimul(R,le),ve=0|ve+_Mathimul(R,pe),ye=0|ye+_Mathimul(I,ue),we=0|we+_Mathimul(I,fe),we=0|we+_Mathimul(N,ue),ve=0|ve+_Mathimul(N,fe),ye=0|ye+_Mathimul(T,ge),we=0|we+_Mathimul(T,be),we=0|we+_Mathimul(A,ge),ve=0|ve+_Mathimul(A,be);var De=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(De>>>26),De&=67108863,ye=_Mathimul(B,oe),we=_Mathimul(B,se),we=0|we+_Mathimul(U,oe),ve=_Mathimul(U,se),ye=0|ye+_Mathimul(D,le),we=0|we+_Mathimul(D,pe),we=0|we+_Mathimul(P,le),ve=0|ve+_Mathimul(P,pe),ye=0|ye+_Mathimul(L,ue),we=0|we+_Mathimul(L,fe),we=0|we+_Mathimul(R,ue),ve=0|ve+_Mathimul(R,fe),ye=0|ye+_Mathimul(I,ge),we=0|we+_Mathimul(I,be),we=0|we+_Mathimul(N,ge),ve=0|ve+_Mathimul(N,be);var Pe=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Pe>>>26),Pe&=67108863,ye=_Mathimul(B,le),we=_Mathimul(B,pe),we=0|we+_Mathimul(U,le),ve=_Mathimul(U,pe),ye=0|ye+_Mathimul(D,ue),we=0|we+_Mathimul(D,fe),we=0|we+_Mathimul(P,ue),ve=0|ve+_Mathimul(P,fe),ye=0|ye+_Mathimul(L,ge),we=0|we+_Mathimul(L,be),we=0|we+_Mathimul(R,ge),ve=0|ve+_Mathimul(R,be);var Oe=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Oe>>>26),Oe&=67108863,ye=_Mathimul(B,ue),we=_Mathimul(B,fe),we=0|we+_Mathimul(U,ue),ve=_Mathimul(U,fe),ye=0|ye+_Mathimul(D,ge),we=0|we+_Mathimul(D,be),we=0|we+_Mathimul(P,ge),ve=0|ve+_Mathimul(P,be);var Be=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Be>>>26),Be&=67108863,ye=_Mathimul(B,ge),we=_Mathimul(B,be),we=0|we+_Mathimul(U,ge),ve=_Mathimul(U,be);var Ue=0|(0|o+ye)+((8191&we)<<13);return o=0|(0|ve+(we>>>13))+(Ue>>>26),Ue&=67108863,d[0]=xe,d[1]=_e,d[2]=ke,d[3]=Ce,d[4]=Ee,d[5]=Te,d[6]=Ae,d[7]=Se,d[8]=Ie,d[9]=Ne,d[10]=je,d[11]=Le,d[12]=Re,d[13]=Me,d[14]=De,d[15]=Pe,d[16]=Oe,d[17]=Be,d[18]=Ue,0!=o&&(d[19]=o,i.length++),i};_Mathimul||(T=i),d.prototype.mulTo=function t(n,a){var r=this.length+n.length,o;return o=10===this.length&&10===n.length?T(this,n,a):63>r?i(this,n,a):1024>r?u(this,n,a):f(this,n,a),o},m.prototype.makeRBT=function n(a){for(var r=Array(a),t=d.prototype._countBits(a)-1,o=0;o<a;o++)r[o]=this.revBin(o,t,a);return r},m.prototype.revBin=function t(n,a,r){if(0===n||n===r-1)return n;for(var o=0,s=0;s<a;s++)o|=(1&n)<<a-s-1,n>>=1;return o},m.prototype.permute=function t(n,a,r,o,s,d){for(var l=0;l<d;l++)o[l]=a[n[l]],s[l]=r[n[l]]},m.prototype.transform=function t(n,a,r,i,o,d){this.permute(d,n,a,r,i,o);for(var c=1;c<o;c<<=1)for(var s=c<<1,l=_Mathcos(2*_MathPI/s),u=_Mathsin(2*_MathPI/s),f=0;f<o;f+=s)for(var m=l,h=u,g=0;g<c;g++){var b=r[f+g],y=i[f+g],w=r[f+g+c],v=i[f+g+c],x=m*w-h*v;v=m*v+h*w,w=x,r[f+g]=b+w,i[f+g]=y+v,r[f+g+c]=b-w,i[f+g+c]=y-v,g!==s&&(x=l*m-u*h,h=l*h+u*m,m=x)}},m.prototype.guessLen13b=function t(a,n){var r=1|_Mathmax(n,a),o=1&r,s=0;for(r=0|r/2;r;r>>>=1)s++;return 1<<s+1+o},m.prototype.conjugate=function n(a,r,o){if(!(1>=o))for(var s=0,i;s<o/2;s++)i=a[s],a[s]=a[o-s-1],a[o-s-1]=i,i=r[s],r[s]=-r[o-s-1],r[o-s-1]=-i},m.prototype.normalize13b=function t(n,a){for(var r=0,o=0,i;o<a/2;o++)i=8192*_Mathround(n[2*o+1]/a)+_Mathround(n[2*o]/a)+r,n[o]=67108863&i,r=67108864>i?0:0|i/67108864;return n},m.prototype.convert13b=function t(n,a,r,s){for(var d=0,l=0;l<a;l++)d+=0|n[l],r[2*l]=8191&d,d>>>=13,r[2*l+1]=8191&d,d>>>=13;for(l=2*a;l<s;++l)r[l]=0;o(0==d),o(0==(-8192&d))},m.prototype.stub=function t(n){for(var a=Array(n),r=0;r<n;r++)a[r]=0;return a},m.prototype.mulp=function t(n,a,r){var o=2*this.guessLen13b(n.length,a.length),s=this.makeRBT(o),d=this.stub(o),l=Array(o),c=Array(o),u=Array(o),f=Array(o),m=Array(o),h=Array(o),g=r.words;g.length=o,this.convert13b(n.words,n.length,l,o),this.convert13b(a.words,a.length,f,o),this.transform(l,d,c,u,o,s),this.transform(f,d,m,h,o,s);for(var b=0,i;b<o;b++)i=c[b]*m[b]-u[b]*h[b],u[b]=c[b]*h[b]+u[b]*m[b],c[b]=i;return this.conjugate(c,u,o),this.transform(c,u,g,d,o,s),this.conjugate(g,d,o),this.normalize13b(g,o),r.negative=n.negative^a.negative,r.length=n.length+a.length,r.strip()},d.prototype.mul=function t(n){var a=new d(null);return a.words=Array(this.length+n.length),this.mulTo(n,a)},d.prototype.mulf=function t(n){var a=new d(null);return a.words=Array(this.length+n.length),f(this,n,a)},d.prototype.imul=function t(n){return this.clone().mulTo(n,this)},d.prototype.imuln=function t(n){o('number'==typeof n),o(67108864>n);for(var a=0,r=0;r<this.length;r++){var i=(0|this.words[r])*n,s=(67108863&i)+(67108863&a);a>>=26,a+=0|i/67108864,a+=s>>>26,this.words[r]=67108863&s}return 0!=a&&(this.words[r]=a,this.length++),this},d.prototype.muln=function t(n){return this.clone().imuln(n)},d.prototype.sqr=function t(){return this.mul(this)},d.prototype.isqr=function t(){return this.imul(this.clone())},d.prototype.pow=function t(n){var a=c(n);if(0===a.length)return new d(1);for(var r=this,o=0;o<a.length&&!(0!==a[o]);o++,r=r.sqr());if(++o<a.length)for(var i=r.sqr();o<a.length;o++,i=i.sqr())0!==a[o]&&(r=r.mul(i));return r},d.prototype.iushln=function t(n){o('number'==typeof n&&0<=n);var a=n%26,r=(n-a)/26,s=67108863>>>26-a<<26-a,d;if(0!=a){var i=0;for(d=0;d<this.length;d++){var l=this.words[d]&s,u=(0|this.words[d])-l<<a;this.words[d]=u|i,i=l>>>26-a}i&&(this.words[d]=i,this.length++)}if(0!=r){for(d=this.length-1;0<=d;d--)this.words[d+r]=this.words[d];for(d=0;d<r;d++)this.words[d]=0;this.length+=r}return this.strip()},d.prototype.ishln=function t(n){return o(0===this.negative),this.iushln(n)},d.prototype.iushrn=function t(n,a,d){o('number'==typeof n&&0<=n);var l;l=a?(a-a%26)/26:0;var c=n%26,r=_Mathmin((n-c)/26,this.length),s=67108863^67108863>>>c<<c,u=d;if(l-=r,l=_Mathmax(0,l),u){for(var f=0;f<r;f++)u.words[f]=this.words[f];u.length=r}if(0===r);else if(this.length>r)for(this.length-=r,f=0;f<this.length;f++)this.words[f]=this.words[f+r];else this.words[0]=0,this.length=1;var i=0;for(f=this.length-1;0<=f&&(0!=i||f>=l);f--){var m=0|this.words[f];this.words[f]=i<<26-c|m>>>c,i=m&s}return u&&0!=i&&(u.words[u.length++]=i),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},d.prototype.ishrn=function t(n,a,r){return o(0===this.negative),this.iushrn(n,a,r)},d.prototype.shln=function t(n){return this.clone().ishln(n)},d.prototype.ushln=function t(n){return this.clone().iushln(n)},d.prototype.shrn=function t(n){return this.clone().ishrn(n)},d.prototype.ushrn=function t(n){return this.clone().iushrn(n)},d.prototype.testn=function t(n){o('number'==typeof n&&0<=n);var a=n%26,r=(n-a)/26,i=1<<a;if(this.length<=r)return!1;var s=this.words[r];return!!(s&i)},d.prototype.imaskn=function t(n){o('number'==typeof n&&0<=n);var a=n%26,r=(n-a)/26;if(o(0===this.negative,'imaskn works only with positive numbers'),this.length<=r)return this;if(0!=a&&r++,this.length=_Mathmin(r,this.length),0!=a){var i=67108863^67108863>>>a<<a;this.words[this.length-1]&=i}return this.strip()},d.prototype.maskn=function t(n){return this.clone().imaskn(n)},d.prototype.iaddn=function t(n){return o('number'==typeof n),o(67108864>n),0>n?this.isubn(-n):0===this.negative?this._iaddn(n):1===this.length&&(0|this.words[0])<n?(this.words[0]=n-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(n),this.negative=1,this)},d.prototype._iaddn=function t(n){this.words[0]+=n;for(var a=0;a<this.length&&67108864<=this.words[a];a++)this.words[a]-=67108864,a===this.length-1?this.words[a+1]=1:this.words[a+1]++;return this.length=_Mathmax(this.length,a+1),this},d.prototype.isubn=function t(n){if(o('number'==typeof n),o(67108864>n),0>n)return this.iaddn(-n);if(0!==this.negative)return this.negative=0,this.iaddn(n),this.negative=1,this;if(this.words[0]-=n,1===this.length&&0>this.words[0])this.words[0]=-this.words[0],this.negative=1;else for(var a=0;a<this.length&&0>this.words[a];a++)this.words[a]+=67108864,this.words[a+1]-=1;return this.strip()},d.prototype.addn=function t(n){return this.clone().iaddn(n)},d.prototype.subn=function t(n){return this.clone().isubn(n)},d.prototype.iabs=function t(){return this.negative=0,this},d.prototype.abs=function t(){return this.clone().iabs()},d.prototype._ishlnsubmul=function t(n,a,r){var s=n.length+r,d;this._expand(s);var i=0,l;for(d=0;d<n.length;d++){l=(0|this.words[d+r])+i;var c=(0|n.words[d])*a;l-=67108863&c,i=(l>>26)-(0|c/67108864),this.words[d+r]=67108863&l}for(;d<this.length-r;d++)l=(0|this.words[d+r])+i,i=l>>26,this.words[d+r]=67108863&l;if(0==i)return this.strip();for(o(-1==i),i=0,d=0;d<this.length;d++)l=-(0|this.words[d])+i,i=l>>26,this.words[d]=67108863&l;return this.negative=1,this.strip()},d.prototype._wordDiv=function t(n,r){var o=this.length-n.length,s=this.clone(),l=n,c=0|l.words[l.length-1],u=this._countBits(c);o=26-u,0!=o&&(l=l.ushln(o),s.iushln(o),c=0|l.words[l.length-1]);var f=s.length-l.length,m;if('mod'!==r){m=new d(null),m.length=f+1,m.words=Array(m.length);for(var h=0;h<m.length;h++)m.words[h]=0}var i=s.clone()._ishlnsubmul(l,1,f);0===i.negative&&(s=i,m&&(m.words[f]=1));for(var g=f-1,b;0<=g;g--){for(b=67108864*(0|s.words[l.length+g])+(0|s.words[l.length+g-1]),b=_Mathmin(0|b/c,67108863),s._ishlnsubmul(l,b,g);0!==s.negative;)b--,s.negative=0,s._ishlnsubmul(l,1,g),s.isZero()||(s.negative^=1);m&&(m.words[g]=b)}return m&&m.strip(),s.strip(),'div'!==r&&0!=o&&s.iushrn(o),{div:m||null,mod:s}},d.prototype.divmod=function t(n,a,r){if(o(!n.isZero()),this.isZero())return{div:new d(0),mod:new d(0)};var i,s,l;return 0!==this.negative&&0===n.negative?(l=this.neg().divmod(n,a),'mod'!==a&&(i=l.div.neg()),'div'!==a&&(s=l.mod.neg(),r&&0!==s.negative&&s.iadd(n)),{div:i,mod:s}):0===this.negative&&0!==n.negative?(l=this.divmod(n.neg(),a),'mod'!==a&&(i=l.div.neg()),{div:i,mod:l.mod}):0==(this.negative&n.negative)?n.length>this.length||0>this.cmp(n)?{div:new d(0),mod:this}:1===n.length?'div'===a?{div:this.divn(n.words[0]),mod:null}:'mod'===a?{div:null,mod:new d(this.modn(n.words[0]))}:{div:this.divn(n.words[0]),mod:new d(this.modn(n.words[0]))}:this._wordDiv(n,a):(l=this.neg().divmod(n.neg(),a),'div'!==a&&(s=l.mod.neg(),r&&0!==s.negative&&s.isub(n)),{div:l.div,mod:s})},d.prototype.div=function t(n){return this.divmod(n,'div',!1).div},d.prototype.mod=function t(n){return this.divmod(n,'mod',!1).mod},d.prototype.umod=function t(n){return this.divmod(n,'mod',!0).mod},d.prototype.divRound=function t(n){var a=this.divmod(n);if(a.mod.isZero())return a.div;var r=0===a.div.negative?a.mod:a.mod.isub(n),i=n.ushrn(1),o=n.andln(1),s=r.cmp(i);return 0>s||1===o&&0===s?a.div:0===a.div.negative?a.div.iaddn(1):a.div.isubn(1)},d.prototype.modn=function t(n){o(67108863>=n);for(var a=67108864%n,r=0,s=this.length-1;0<=s;s--)r=(a*r+(0|this.words[s]))%n;return r},d.prototype.idivn=function t(n){o(67108863>=n);for(var a=0,r=this.length-1,i;0<=r;r--)i=(0|this.words[r])+67108864*a,this.words[r]=0|i/n,a=i%n;return this.strip()},d.prototype.divn=function t(n){return this.clone().idivn(n)},d.prototype.egcd=function t(n){o(0===n.negative),o(!n.isZero());var a=this,r=n.clone();a=0===a.negative?a.clone():a.umod(n);for(var s=new d(1),l=new d(0),c=new d(0),u=new d(1),f=0;a.isEven()&&r.isEven();)a.iushrn(1),r.iushrn(1),++f;for(var m=r.clone(),h=a.clone();!a.isZero();){for(var g=0,i=1;0==(a.words[0]&i)&&26>g;++g,i<<=1);if(0<g)for(a.iushrn(g);0<g--;)(s.isOdd()||l.isOdd())&&(s.iadd(m),l.isub(h)),s.iushrn(1),l.iushrn(1);for(var b=0,y=1;0==(r.words[0]&y)&&26>b;++b,y<<=1);if(0<b)for(r.iushrn(b);0<b--;)(c.isOdd()||u.isOdd())&&(c.iadd(m),u.isub(h)),c.iushrn(1),u.iushrn(1);0<=a.cmp(r)?(a.isub(r),s.isub(c),l.isub(u)):(r.isub(a),c.isub(s),u.isub(l))}return{a:c,b:u,gcd:r.iushln(f)}},d.prototype._invmp=function t(n){o(0===n.negative),o(!n.isZero());var r=this,a=n.clone();r=0===r.negative?r.clone():r.umod(n);for(var s=new d(1),l=new d(0),c=a.clone();0<r.cmpn(1)&&0<a.cmpn(1);){for(var u=0,i=1;0==(r.words[0]&i)&&26>u;++u,i<<=1);if(0<u)for(r.iushrn(u);0<u--;)s.isOdd()&&s.iadd(c),s.iushrn(1);for(var f=0,m=1;0==(a.words[0]&m)&&26>f;++f,m<<=1);if(0<f)for(a.iushrn(f);0<f--;)l.isOdd()&&l.iadd(c),l.iushrn(1);0<=r.cmp(a)?(r.isub(a),s.isub(l)):(a.isub(r),l.isub(s))}var h;return h=0===r.cmpn(1)?s:l,0>h.cmpn(0)&&h.iadd(n),h},d.prototype.gcd=function n(i){if(this.isZero())return i.abs();if(i.isZero())return this.abs();var o=this.clone(),a=i.clone();o.negative=0,a.negative=0;for(var s=0;o.isEven()&&a.isEven();s++)o.iushrn(1),a.iushrn(1);do{for(;o.isEven();)o.iushrn(1);for(;a.isEven();)a.iushrn(1);var d=o.cmp(a);if(0>d){var r=o;o=a,a=r}else if(0===d||0===a.cmpn(1))break;o.isub(a)}while(!0);return a.iushln(s)},d.prototype.invm=function t(n){return this.egcd(n).a.umod(n)},d.prototype.isEven=function t(){return 0==(1&this.words[0])},d.prototype.isOdd=function t(){return 1==(1&this.words[0])},d.prototype.andln=function t(n){return this.words[0]&n},d.prototype.bincn=function t(n){o('number'==typeof n);var a=n%26,r=(n-a)/26,s=1<<a;if(this.length<=r)return this._expand(r+1),this.words[r]|=s,this;for(var d=s,l=r,i;0!=d&&l<this.length;l++)i=0|this.words[l],i+=d,d=i>>>26,i&=67108863,this.words[l]=i;return 0!=d&&(this.words[l]=d,this.length++),this},d.prototype.isZero=function t(){return 1===this.length&&0===this.words[0]},d.prototype.cmpn=function t(n){var a=0>n;if(0!==this.negative&&!a)return-1;if(0===this.negative&&a)return 1;this.strip();var r;if(1<this.length)r=1;else{a&&(n=-n),o(67108863>=n,'Number is too big');var i=0|this.words[0];r=i===n?0:i<n?-1:1}return 0===this.negative?r:0|-r},d.prototype.cmp=function t(n){if(0!==this.negative&&0===n.negative)return-1;if(0===this.negative&&0!==n.negative)return 1;var a=this.ucmp(n);return 0===this.negative?a:0|-a},d.prototype.ucmp=function t(n){if(this.length>n.length)return 1;if(this.length<n.length)return-1;for(var r=0,o=this.length-1;0<=o;o--){var i=0|this.words[o],a=0|n.words[o];if(i!=a){i<a?r=-1:i>a&&(r=1);break}}return r},d.prototype.gtn=function t(n){return 1===this.cmpn(n)},d.prototype.gt=function t(n){return 1===this.cmp(n)},d.prototype.gten=function t(n){return 0<=this.cmpn(n)},d.prototype.gte=function t(n){return 0<=this.cmp(n)},d.prototype.ltn=function t(n){return-1===this.cmpn(n)},d.prototype.lt=function t(n){return-1===this.cmp(n)},d.prototype.lten=function t(n){return 0>=this.cmpn(n)},d.prototype.lte=function t(n){return 0>=this.cmp(n)},d.prototype.eqn=function t(n){return 0===this.cmpn(n)},d.prototype.eq=function t(n){return 0===this.cmp(n)},d.red=function t(n){return new v(n)},d.prototype.toRed=function t(n){return o(!this.red,'Already a number in reduction context'),o(0===this.negative,'red works only with positives'),n.convertTo(this)._forceRed(n)},d.prototype.fromRed=function t(){return o(this.red,'fromRed works only with numbers in reduction context'),this.red.convertFrom(this)},d.prototype._forceRed=function t(n){return this.red=n,this},d.prototype.forceRed=function t(n){return o(!this.red,'Already a number in reduction context'),this._forceRed(n)},d.prototype.redAdd=function t(n){return o(this.red,'redAdd works only with red numbers'),this.red.add(this,n)},d.prototype.redIAdd=function t(n){return o(this.red,'redIAdd works only with red numbers'),this.red.iadd(this,n)},d.prototype.redSub=function t(n){return o(this.red,'redSub works only with red numbers'),this.red.sub(this,n)},d.prototype.redISub=function t(n){return o(this.red,'redISub works only with red numbers'),this.red.isub(this,n)},d.prototype.redShl=function t(n){return o(this.red,'redShl works only with red numbers'),this.red.shl(this,n)},d.prototype.redMul=function t(n){return o(this.red,'redMul works only with red numbers'),this.red._verify2(this,n),this.red.mul(this,n)},d.prototype.redIMul=function t(n){return o(this.red,'redMul works only with red numbers'),this.red._verify2(this,n),this.red.imul(this,n)},d.prototype.redSqr=function t(){return o(this.red,'redSqr works only with red numbers'),this.red._verify1(this),this.red.sqr(this)},d.prototype.redISqr=function t(){return o(this.red,'redISqr works only with red numbers'),this.red._verify1(this),this.red.isqr(this)},d.prototype.redSqrt=function t(){return o(this.red,'redSqrt works only with red numbers'),this.red._verify1(this),this.red.sqrt(this)},d.prototype.redInvm=function t(){return o(this.red,'redInvm works only with red numbers'),this.red._verify1(this),this.red.invm(this)},d.prototype.redNeg=function t(){return o(this.red,'redNeg works only with red numbers'),this.red._verify1(this),this.red.neg(this)},d.prototype.redPow=function t(n){return o(this.red&&!n.red,'redPow(normalNum)'),this.red._verify1(this),this.red.pow(this,n)};var A={k256:null,p224:null,p192:null,p25519:null};h.prototype._tmp=function t(){var n=new d(null);return n.words=Array(_Mathceil(this.n/13)),n},h.prototype.ireduce=function t(n){var a=n,r;do this.split(a,this.tmp),a=this.imulK(a),a=a.iadd(this.tmp),r=a.bitLength();while(r>this.n);var i=r<this.n?-1:a.ucmp(this.p);return 0===i?(a.words[0]=0,a.length=1):0<i?a.isub(this.p):a.strip(),a},h.prototype.split=function t(n,a){n.iushrn(this.n,0,a)},h.prototype.imulK=function t(n){return n.imul(this.k)},r(g,h),g.prototype.split=function t(n,a){for(var r=4194303,o=_Mathmin(n.length,9),s=0;s<o;s++)a.words[s]=n.words[s];if(a.length=o,9>=n.length)return n.words[0]=0,void(n.length=1);var i=n.words[9];for(a.words[a.length++]=i&r,s=10;s<n.length;s++){var d=0|n.words[s];n.words[s-10]=(d&r)<<4|i>>>22,i=d}i>>>=22,n.words[s-10]=i,n.length-=0===i&&10<n.length?10:9},g.prototype.imulK=function t(n){n.words[n.length]=0,n.words[n.length+1]=0,n.length+=2;for(var a=0,r=0,i;r<n.length;r++)i=0|n.words[r],a+=977*i,n.words[r]=67108863&a,a=64*i+(0|a/67108864);return 0===n.words[n.length-1]&&(n.length--,0===n.words[n.length-1]&&n.length--),n},r(b,h),r(y,h),r(w,h),w.prototype.imulK=function t(n){for(var a=0,r=0;r<n.length;r++){var i=19*(0|n.words[r])+a,o=67108863&i;i>>>=26,n.words[r]=o,a=i}return 0!=a&&(n.words[n.length++]=a),n},d._prime=function t(n){if(A[n])return A[n];var t;if('k256'===n)t=new g;else if('p224'===n)t=new b;else if('p192'===n)t=new y;else if('p25519'===n)t=new w;else throw new Error('Unknown prime '+n);return A[n]=t,t},v.prototype._verify1=function t(n){o(0===n.negative,'red works only with positives'),o(n.red,'red works only with red numbers')},v.prototype._verify2=function t(n,a){o(0==(n.negative|a.negative),'red works only with positives'),o(n.red&&n.red===a.red,'red works only with red numbers')},v.prototype.imod=function t(n){return this.prime?this.prime.ireduce(n)._forceRed(this):n.umod(this.m)._forceRed(this)},v.prototype.neg=function t(n){return n.isZero()?n.clone():this.m.sub(n)._forceRed(this)},v.prototype.add=function t(n,a){this._verify2(n,a);var r=n.add(a);return 0<=r.cmp(this.m)&&r.isub(this.m),r._forceRed(this)},v.prototype.iadd=function t(n,a){this._verify2(n,a);var r=n.iadd(a);return 0<=r.cmp(this.m)&&r.isub(this.m),r},v.prototype.sub=function t(n,a){this._verify2(n,a);var r=n.sub(a);return 0>r.cmpn(0)&&r.iadd(this.m),r._forceRed(this)},v.prototype.isub=function t(n,a){this._verify2(n,a);var r=n.isub(a);return 0>r.cmpn(0)&&r.iadd(this.m),r},v.prototype.shl=function t(n,a){return this._verify1(n),this.imod(n.ushln(a))},v.prototype.imul=function t(n,a){return this._verify2(n,a),this.imod(n.imul(a))},v.prototype.mul=function t(n,a){return this._verify2(n,a),this.imod(n.mul(a))},v.prototype.isqr=function t(n){return this.imul(n,n.clone())},v.prototype.sqr=function t(n){return this.mul(n,n)},v.prototype.sqrt=function n(l){if(l.isZero())return l.clone();var a=this.m.andln(3);if(o(1==a%2),3===a){var u=this.m.add(new d(1)).iushrn(2);return this.pow(l,u)}for(var f=this.m.subn(1),h=0;!f.isZero()&&0===f.andln(1);)h++,f.iushrn(1);o(!f.isZero());var s=new d(1).toRed(this),g=s.redNeg(),y=this.m.subn(1).iushrn(1),w=this.m.bitLength();for(w=new d(2*w*w).toRed(this);0!==this.pow(w,y).cmp(g);)w.redIAdd(g);for(var v=this.pow(w,f),c=this.pow(l,f.addn(1).iushrn(1)),r=this.pow(l,f),t=h;0!==r.cmp(s);){for(var m=r,x=0;0!==m.cmp(s);x++)m=m.redSqr();o(x<t);var i=this.pow(v,new d(1).iushln(t-x-1));c=c.redMul(i),v=i.redSqr(),r=r.redMul(v),t=x}return c},v.prototype.invm=function t(n){var a=n._invmp(this.m);return 0===a.negative?this.imod(a):(a.negative=0,this.imod(a).redNeg())},v.prototype.pow=function t(n,a){if(a.isZero())return new d(1).toRed(this);if(0===a.cmpn(1))return n.clone();var r=4,o=Array(1<<r);o[0]=new d(1).toRed(this),o[1]=n;for(var s=2;s<o.length;s++)o[s]=this.mul(o[s-1],n);var i=o[0],l=0,c=0,u=a.bitLength()%26;for(0==u&&(u=26),s=a.length-1;0<=s;s--){for(var f=a.words[s],m=u-1,h;0<=m;m--){if(h=1&f>>m,i!==o[0]&&(i=this.sqr(i)),0==h&&0==l){c=0;continue}l<<=1,l|=h,c++,c!=r&&(0!==s||0!==m)||(i=this.mul(i,o[l]),c=0,l=0)}u=26}return i},v.prototype.convertTo=function t(n){var a=n.umod(this.m);return a===n?a.clone():a},v.prototype.convertFrom=function t(n){var a=n.clone();return a.red=null,a},d.mont=function t(n){return new x(n)},r(x,v),x.prototype.convertTo=function t(n){return this.imod(n.ushln(this.shift))},x.prototype.convertFrom=function t(n){var a=this.imod(n.mul(this.rinv));return a.red=null,a},x.prototype.imul=function n(r,a){if(r.isZero()||a.isZero())return r.words[0]=0,r.length=1,r;var i=r.imul(a),t=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=i.isub(t).iushrn(this.shift),s=o;return 0<=o.cmp(this.m)?s=o.isub(this.m):0>o.cmpn(0)&&(s=o.iadd(this.m)),s._forceRed(this)},x.prototype.mul=function n(r,a){if(r.isZero()||a.isZero())return new d(0)._forceRed(this);var i=r.mul(a),t=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=i.isub(t).iushrn(this.shift),s=o;return 0<=o.cmp(this.m)?s=o.isub(this.m):0>o.cmpn(0)&&(s=o.iadd(this.m)),s._forceRed(this)},x.prototype.invm=function t(n){var a=this.imod(n._invmp(this.m).mul(this.r2));return a._forceRed(this)}})('undefined'==typeof t||t,this)}).call(n,a(9)(t))},function(t,n){},function(t,n){t.exports={_args:[['elliptic@6.4.0','/home/travis/build/linkeddata/mashlib']],_from:'elliptic@6.4.0',_id:'elliptic@6.4.0',_inBundle:!1,_integrity:'sha1-ysmvh2LIWDYYcAPI3+GT5eLq5d8=',_location:'/elliptic',_phantomChildren:{},_requested:{type:'version',registry:!0,raw:'elliptic@6.4.0',name:'elliptic',escapedName:'elliptic',rawSpec:'6.4.0',saveSpec:null,fetchSpec:'6.4.0'},_requiredBy:['/@trust/keyto','/browserify-sign','/create-ecdh'],_resolved:'https://registry.npmjs.org/elliptic/-/elliptic-6.4.0.tgz',_spec:'6.4.0',_where:'/home/travis/build/linkeddata/mashlib',author:{name:'Fedor Indutny',email:'fedor@indutny.com'},bugs:{url:'https://github.com/indutny/elliptic/issues'},dependencies:{"bn.js":'^4.4.0',brorand:'^1.0.1',"hash.js":'^1.0.0',"hmac-drbg":'^1.0.0',inherits:'^2.0.1',"minimalistic-assert":'^1.0.0',"minimalistic-crypto-utils":'^1.0.0'},description:'EC cryptography',devDependencies:{brfs:'^1.4.3',coveralls:'^2.11.3',grunt:'^0.4.5',"grunt-browserify":'^5.0.0',"grunt-cli":'^1.2.0',"grunt-contrib-connect":'^1.0.0',"grunt-contrib-copy":'^1.0.0',"grunt-contrib-uglify":'^1.0.1',"grunt-mocha-istanbul":'^3.0.1',"grunt-saucelabs":'^8.6.2',istanbul:'^0.4.2',jscs:'^2.9.0',jshint:'^2.6.0',mocha:'^2.1.0'},files:['lib'],homepage:'https://github.com/indutny/elliptic',keywords:['EC','Elliptic','curve','Cryptography'],license:'MIT',main:'lib/elliptic.js',name:'elliptic',repository:{type:'git',url:'git+ssh://git@github.com/indutny/elliptic.git'},scripts:{jscs:'jscs benchmarks/*.js lib/*.js lib/**/*.js lib/**/**/*.js test/index.js',jshint:'jscs benchmarks/*.js lib/*.js lib/**/*.js lib/**/**/*.js test/index.js',lint:'npm run jscs && npm run jshint',test:'npm run lint && npm run unit',unit:'istanbul test _mocha --reporter=spec test/index.js',version:'grunt dist && git add dist/'},version:'6.4.0'}},function(t,n,a){'use strict';function r(t,n){for(var a=[],r=1<<n+1,o=t.clone();0<=o.cmpn(1);){var s;if(o.isOdd()){var d=o.andln(r-1);s=d>(r>>1)-1?(r>>1)-d:d,o.isubn(s)}else s=0;a.push(s);for(var l=0!==o.cmpn(0)&&0===o.andln(r-1)?n+1:1,c=1;c<l;c++)a.push(0);o.iushrn(l)}return a}function i(t,n){var a=[[],[]];t=t.clone(),n=n.clone();for(var r=0,i=0;0<t.cmpn(-r)||0<n.cmpn(-i);){var o=3&t.andln(3)+r,s=3&n.andln(3)+i;3==o&&(o=-1),3==s&&(s=-1);var d;if(0==(1&o))d=0;else{var l=7&t.andln(7)+r;d=(3==l||5==l)&&2==s?-o:o}a[0].push(d);var c;if(0==(1&s))c=0;else{var l=7&n.andln(7)+i;c=(3==l||5==l)&&2==o?-s:s}a[1].push(c),2*r===d+1&&(r=1-r),2*i===c+1&&(i=1-i),t.iushrn(1),n.iushrn(1)}return a}function o(t,n,a){var r='_'+n;t.prototype[n]=function t(){return this[r]===void 0?this[r]=a.call(this):this[r]}}function s(t){return'string'==typeof t?l.toArray(t,'hex'):t}function d(t){return new c(t,'hex','le')}var l=n,c=a(34),u=a(21),f=a(230);l.assert=u,l.toArray=f.toArray,l.zero2=f.zero2,l.toHex=f.toHex,l.encode=f.encode,l.getNAF=r,l.getJSF=i,l.cachedProperty=o,l.parseBytes=s,l.intFromLE=d},function(t,n){},function(t,n,a){'use strict';function r(t,n){this.type=t,this.p=new o(n.p,16),this.red=n.prime?o.red(n.prime):o.mont(this.p),this.zero=new o(0).toRed(this.red),this.one=new o(1).toRed(this.red),this.two=new o(2).toRed(this.red),this.n=n.n&&new o(n.n,16),this.g=n.g&&this.pointFromJSON(n.g,n.gRed),this._wnafT1=[,,,,],this._wnafT2=[,,,,],this._wnafT3=[,,,,],this._wnafT4=[,,,,];var a=this.n&&this.p.div(this.n);!a||0<a.cmpn(100)?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function i(t,n){this.curve=t,this.type=n,this.precomputed=null}var o=a(34),s=a(8),d=s.utils,l=d.getNAF,c=d.getJSF,u=d.assert;t.exports=r,r.prototype.point=function t(){throw new Error('Not implemented')},r.prototype.validate=function t(){throw new Error('Not implemented')},r.prototype._fixedNafMul=function t(n,r){u(n.precomputed);var o=n._getDoubles(),s=l(r,1),d=(1<<o.step+1)-(0==o.step%2?2:1);d/=3;for(var c=[],f=0,m;f<s.length;f+=o.step){m=0;for(var r=f+o.step-1;r>=f;r--)m=(m<<1)+s[r];c.push(m)}for(var h=this.jpoint(null,null,null),a=this.jpoint(null,null,null),g=d;0<g;g--){for(var f=0,m;f<c.length;f++)m=c[f],m===g?a=a.mixedAdd(o.points[f]):m===-g&&(a=a.mixedAdd(o.points[f].neg()));h=h.add(a)}return h.toP()},r.prototype._wnafMul=function t(n,a){var r=4,o=n._getNAFPoints(r);r=o.wnd;for(var s=o.points,d=l(a,r),c=this.jpoint(null,null,null),f=d.length-1;0<=f;f--){for(var a=0;0<=f&&0===d[f];f--)a++;if(0<=f&&a++,c=c.dblp(a),0>f)break;var i=d[f];u(0!==i),c='affine'===n.type?0<i?c.mixedAdd(s[i-1>>1]):c.mixedAdd(s[-i-1>>1].neg()):0<i?c.add(s[i-1>>1]):c.add(s[-i-1>>1].neg())}return'affine'===n.type?c.toP():c},r.prototype._wnafMulAdd=function t(n,r,o,s,d){for(var u=this._wnafT1,f=this._wnafT2,m=this._wnafT3,h=0,g=0;g<s;g++){var i=r[g],y=i._getNAFPoints(n);u[g]=y.wnd,f[g]=y.points}for(var g=s-1;1<=g;g-=2){var w=g-1,a=g;if(1!==u[w]||1!==u[a]){m[w]=l(o[w],u[w]),m[a]=l(o[a],u[a]),h=_Mathmax(m[w].length,h),h=_Mathmax(m[a].length,h);continue}var b=[r[w],null,null,r[a]];0===r[w].y.cmp(r[a].y)?(b[1]=r[w].add(r[a]),b[2]=r[w].toJ().mixedAdd(r[a].neg())):0===r[w].y.cmp(r[a].y.redNeg())?(b[1]=r[w].toJ().mixedAdd(r[a]),b[2]=r[w].add(r[a].neg())):(b[1]=r[w].toJ().mixedAdd(r[a]),b[2]=r[w].toJ().mixedAdd(r[a].neg()));var v=[-3,-1,-5,-7,0,7,5,1,3],x=c(o[w],o[a]);h=_Mathmax(x[0].length,h),m[w]=Array(h),m[a]=Array(h);for(var _=0;_<h;_++){var C=0|x[0][_],E=0|x[1][_];m[w][_]=v[3*(C+1)+(E+1)],m[a][_]=0,f[w]=b}}for(var T=this.jpoint(null,null,null),A=this._wnafT4,g=h,S;0<=g;g--){for(S=0;0<=g;){for(var k=!0,_=0;_<s;_++)A[_]=0|m[_][g],0!==A[_]&&(k=!1);if(!k)break;S++,g--}if(0<=g&&S++,T=T.dblp(S),0>g)break;for(var _=0;_<s;_++){var I=A[_],i;if(0===I)continue;else 0<I?i=f[_][I-1>>1]:0>I&&(i=f[_][-I-1>>1].neg());T='affine'===i.type?T.mixedAdd(i):T.add(i)}}for(var g=0;g<s;g++)f[g]=null;return d?T:T.toP()},r.BasePoint=i,i.prototype.eq=function t(){throw new Error('Not implemented')},i.prototype.validate=function t(){return this.curve.validate(this)},r.prototype.decodePoint=function t(n,a){n=d.toArray(n,a);var r=this.p.byteLength();if((4===n[0]||6===n[0]||7===n[0])&&n.length-1==2*r){6===n[0]?u(0==n[n.length-1]%2):7===n[0]&&u(1==n[n.length-1]%2);var i=this.point(n.slice(1,1+r),n.slice(1+r,1+2*r));return i}if((2===n[0]||3===n[0])&&n.length-1===r)return this.pointFromX(n.slice(1,1+r),3===n[0]);throw new Error('Unknown point format')},i.prototype.encodeCompressed=function t(n){return this.encode(n,!0)},i.prototype._encode=function t(n){var a=this.curve.p.byteLength(),r=this.getX().toArray('be',a);return n?[this.getY().isEven()?2:3].concat(r):[4].concat(r,this.getY().toArray('be',a))},i.prototype.encode=function t(n,a){return d.encode(this._encode(a),n)},i.prototype.precompute=function t(n){if(this.precomputed)return this;var a={doubles:null,naf:null,beta:null};return a.naf=this._getNAFPoints(8),a.doubles=this._getDoubles(4,n),a.beta=this._getBeta(),this.precomputed=a,this},i.prototype._hasDoubles=function t(n){if(!this.precomputed)return!1;var a=this.precomputed.doubles;return!!a&&a.points.length>=_Mathceil((n.bitLength()+1)/a.step)},i.prototype._getDoubles=function t(n,a){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var r=[this],o=this,s=0;s<a;s+=n){for(var i=0;i<n;i++)o=o.dbl();r.push(o)}return{step:n,points:r}},i.prototype._getNAFPoints=function t(n){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var a=[this],r=(1<<n)-1,o=1==r?null:this.dbl(),s=1;s<r;s++)a[s]=a[s-1].add(o);return{wnd:n,points:a}},i.prototype._getBeta=function t(){return null},i.prototype.dblp=function t(n){for(var a=this,r=0;r<n;r++)a=a.dbl();return a}},function(t,n,a){'use strict';function r(t){u.call(this,'short',t),this.a=new l(t.a,16).toRed(this.red),this.b=new l(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(t),this._endoWnafT1=[,,,,],this._endoWnafT2=[,,,,]}function i(t,n,a,r){u.BasePoint.call(this,t,'affine'),null===n&&null===a?(this.x=null,this.y=null,this.inf=!0):(this.x=new l(n,16),this.y=new l(a,16),r&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),!this.x.red&&(this.x=this.x.toRed(this.curve.red)),!this.y.red&&(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function o(t,n,a,r){u.BasePoint.call(this,t,'jacobian'),null===n&&null===a&&null===r?(this.x=this.curve.one,this.y=this.curve.one,this.z=new l(0)):(this.x=new l(n,16),this.y=new l(a,16),this.z=new l(r,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}var s=a(93),d=a(8),l=a(34),c=a(0),u=s.base,f=d.utils.assert;c(r,u),t.exports=r,r.prototype._getEndomorphism=function t(n){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var a,r;if(n.beta)a=new l(n.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);a=0>i[0].cmp(i[1])?i[0]:i[1],a=a.toRed(this.red)}if(n.lambda)r=new l(n.lambda,16);else{var o=this._getEndoRoots(this.n);0===this.g.mul(o[0]).x.cmp(this.g.x.redMul(a))?r=o[0]:(r=o[1],f(0===this.g.mul(r).x.cmp(this.g.x.redMul(a))))}var s;return s=n.basis?n.basis.map(function(t){return{a:new l(t.a,16),b:new l(t.b,16)}}):this._getEndoBasis(r),{beta:a,lambda:r,basis:s}}},r.prototype._getEndoRoots=function t(n){var a=n===this.p?this.red:l.mont(n),r=new l(2).toRed(a).redInvm(),i=r.redNeg(),o=new l(3).toRed(a).redNeg().redSqrt().redMul(r),s=i.redAdd(o).fromRed(),d=i.redSub(o).fromRed();return[s,d]},r.prototype._getEndoBasis=function t(n){for(var a=this.n.ushrn(_Mathfloor(this.n.bitLength()/2)),o=n,s=this.n.clone(),d=new l(1),c=new l(0),u=new l(0),f=new l(1),m=0,i,h,g,b,w,v,_,k,r,x;0!==o.cmpn(0);){x=s.div(o),k=s.sub(x.mul(o)),r=u.sub(x.mul(d));var C=f.sub(x.mul(c));if(!g&&0>k.cmp(a))i=_.neg(),h=d,g=k.neg(),b=r;else if(g&&2==++m)break;_=k,s=o,o=k,u=d,d=r,f=c,c=C}w=k.neg(),v=r;var y=g.sqr().add(b.sqr()),E=w.sqr().add(v.sqr());return 0<=E.cmp(y)&&(w=i,v=h),g.negative&&(g=g.neg(),b=b.neg()),w.negative&&(w=w.neg(),v=v.neg()),[{a:g,b:b},{a:w,b:v}]},r.prototype._endoSplit=function t(n){var a=this.endo.basis,r=a[0],i=a[1],o=i.b.mul(n).divRound(this.n),s=r.b.neg().mul(n).divRound(this.n),d=o.mul(r.a),l=s.mul(i.a),c=o.mul(r.b),u=s.mul(i.b),f=n.sub(d).sub(l),m=c.add(u).neg();return{k1:f,k2:m}},r.prototype.pointFromX=function t(n,a){n=new l(n,16),n.red||(n=n.toRed(this.red));var r=n.redSqr().redMul(n).redIAdd(n.redMul(this.a)).redIAdd(this.b),i=r.redSqrt();if(0!==i.redSqr().redSub(r).cmp(this.zero))throw new Error('invalid point');var o=i.fromRed().isOdd();return(a&&!o||!a&&o)&&(i=i.redNeg()),this.point(n,i)},r.prototype.validate=function t(n){if(n.inf)return!0;var a=n.x,r=n.y,i=this.a.redMul(a),o=a.redSqr().redMul(a).redIAdd(i).redIAdd(this.b);return 0===r.redSqr().redISub(o).cmpn(0)},r.prototype._endoWnafMulAdd=function t(n,a,r){for(var o=this._endoWnafT1,s=this._endoWnafT2,d=0;d<n.length;d++){var i=this._endoSplit(a[d]),l=n[d],c=l._getBeta();i.k1.negative&&(i.k1.ineg(),l=l.neg(!0)),i.k2.negative&&(i.k2.ineg(),c=c.neg(!0)),o[2*d]=l,o[2*d+1]=c,s[2*d]=i.k1,s[2*d+1]=i.k2}for(var u=this._wnafMulAdd(1,o,s,2*d,r),f=0;f<2*d;f++)o[f]=null,s[f]=null;return u},c(i,u.BasePoint),r.prototype.point=function t(n,a,r){return new i(this,n,a,r)},r.prototype.pointFromJSON=function t(n,a){return i.fromJSON(this,n,a)},i.prototype._getBeta=function t(){if(this.curve.endo){var n=this.precomputed;if(n&&n.beta)return n.beta;var a=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(n){var r=this.curve,i=function(t){return r.point(t.x.redMul(r.endo.beta),t.y)};n.beta=a,a.precomputed={beta:null,naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(i)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(i)}}}return a}},i.prototype.toJSON=function t(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},i.fromJSON=function t(n,a,r){function i(t){return n.point(t[0],t[1],r)}'string'==typeof a&&(a=JSON.parse(a));var o=n.point(a[0],a[1],r);if(!a[2])return o;var s=a[2];return o.precomputed={beta:null,doubles:s.doubles&&{step:s.doubles.step,points:[o].concat(s.doubles.points.map(i))},naf:s.naf&&{wnd:s.naf.wnd,points:[o].concat(s.naf.points.map(i))}},o},i.prototype.inspect=function t(){return this.isInfinity()?'<EC Point Infinity>':'<EC Point x: '+this.x.fromRed().toString(16,2)+' y: '+this.y.fromRed().toString(16,2)+'>'},i.prototype.isInfinity=function t(){return this.inf},i.prototype.add=function t(n){if(this.inf)return n;if(n.inf)return this;if(this.eq(n))return this.dbl();if(this.neg().eq(n))return this.curve.point(null,null);if(0===this.x.cmp(n.x))return this.curve.point(null,null);var a=this.y.redSub(n.y);0!==a.cmpn(0)&&(a=a.redMul(this.x.redSub(n.x).redInvm()));var r=a.redSqr().redISub(this.x).redISub(n.x),i=a.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,i)},i.prototype.dbl=function t(){if(this.inf)return this;var n=this.y.redAdd(this.y);if(0===n.cmpn(0))return this.curve.point(null,null);var r=this.curve.a,a=this.x.redSqr(),i=n.redInvm(),o=a.redAdd(a).redIAdd(a).redIAdd(r).redMul(i),s=o.redSqr().redISub(this.x.redAdd(this.x)),d=o.redMul(this.x.redSub(s)).redISub(this.y);return this.curve.point(s,d)},i.prototype.getX=function t(){return this.x.fromRed()},i.prototype.getY=function t(){return this.y.fromRed()},i.prototype.mul=function t(n){return n=new l(n,16),this._hasDoubles(n)?this.curve._fixedNafMul(this,n):this.curve.endo?this.curve._endoWnafMulAdd([this],[n]):this.curve._wnafMul(this,n)},i.prototype.mulAdd=function t(n,a,r){var i=[this,a],o=[n,r];return this.curve.endo?this.curve._endoWnafMulAdd(i,o):this.curve._wnafMulAdd(1,i,o,2)},i.prototype.jmulAdd=function t(n,a,r){var i=[this,a],o=[n,r];return this.curve.endo?this.curve._endoWnafMulAdd(i,o,!0):this.curve._wnafMulAdd(1,i,o,2,!0)},i.prototype.eq=function t(n){return this===n||this.inf===n.inf&&(this.inf||0===this.x.cmp(n.x)&&0===this.y.cmp(n.y))},i.prototype.neg=function t(n){if(this.inf)return this;var a=this.curve.point(this.x,this.y.redNeg());if(n&&this.precomputed){var r=this.precomputed,i=function(t){return t.neg()};a.precomputed={naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(i)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(i)}}}return a},i.prototype.toJ=function t(){if(this.inf)return this.curve.jpoint(null,null,null);var n=this.curve.jpoint(this.x,this.y,this.curve.one);return n},c(o,u.BasePoint),r.prototype.jpoint=function t(n,a,r){return new o(this,n,a,r)},o.prototype.toP=function t(){if(this.isInfinity())return this.curve.point(null,null);var n=this.z.redInvm(),a=n.redSqr(),r=this.x.redMul(a),i=this.y.redMul(a).redMul(n);return this.curve.point(r,i)},o.prototype.neg=function t(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},o.prototype.add=function t(n){if(this.isInfinity())return n;if(n.isInfinity())return this;var a=n.z.redSqr(),i=this.z.redSqr(),o=this.x.redMul(a),s=n.x.redMul(i),d=this.y.redMul(a.redMul(n.z)),l=n.y.redMul(i.redMul(this.z)),c=o.redSub(s),u=d.redSub(l);if(0===c.cmpn(0))return 0===u.cmpn(0)?this.dbl():this.curve.jpoint(null,null,null);var r=c.redSqr(),f=r.redMul(c),m=o.redMul(r),h=u.redSqr().redIAdd(f).redISub(m).redISub(m),g=u.redMul(m.redISub(h)).redISub(d.redMul(f)),b=this.z.redMul(n.z).redMul(c);return this.curve.jpoint(h,g,b)},o.prototype.mixedAdd=function t(n){if(this.isInfinity())return n.toJ();if(n.isInfinity())return this;var a=this.z.redSqr(),i=this.x,o=n.x.redMul(a),s=this.y,d=n.y.redMul(a).redMul(this.z),l=i.redSub(o),c=s.redSub(d);if(0===l.cmpn(0))return 0===c.cmpn(0)?this.dbl():this.curve.jpoint(null,null,null);var r=l.redSqr(),u=r.redMul(l),f=i.redMul(r),m=c.redSqr().redIAdd(u).redISub(f).redISub(f),h=c.redMul(f.redISub(m)).redISub(s.redMul(u)),g=this.z.redMul(l);return this.curve.jpoint(m,h,g)},o.prototype.dblp=function t(n){if(0===n)return this;if(this.isInfinity())return this;if(!n)return this.dbl();if(this.curve.zeroA||this.curve.threeA){for(var o=this,r=0;r<n;r++)o=o.dbl();return o}for(var i=this.curve.a,a=this.curve.tinv,s=this.x,d=this.y,l=this.z,u=l.redSqr().redSqr(),f=d.redAdd(d),r=0;r<n;r++){var m=s.redSqr(),h=f.redSqr(),g=h.redSqr(),b=m.redAdd(m).redIAdd(m).redIAdd(i.redMul(u)),c=s.redMul(h),y=b.redSqr().redISub(c.redAdd(c)),w=c.redISub(y),v=b.redMul(w);v=v.redIAdd(v).redISub(g);var x=f.redMul(l);r+1<n&&(u=u.redMul(g)),s=y,l=x,f=v}return this.curve.jpoint(s,f.redMul(a),l)},o.prototype.dbl=function t(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},o.prototype._zeroDbl=function n(){var r,i,o;if(this.zOne){var l=this.x.redSqr(),u=this.y.redSqr(),h=u.redSqr(),g=this.x.redAdd(u).redSqr().redISub(l).redISub(h);g=g.redIAdd(g);var s=l.redAdd(l).redIAdd(l),m=s.redSqr().redISub(g).redISub(g),t=h.redIAdd(h);t=t.redIAdd(t),t=t.redIAdd(t),r=m,i=s.redMul(g.redISub(m)).redISub(t),o=this.y.redAdd(this.y)}else{var y=this.x.redSqr(),a=this.y.redSqr(),b=a.redSqr(),c=this.x.redAdd(a).redSqr().redISub(y).redISub(b);c=c.redIAdd(c);var d=y.redAdd(y).redIAdd(y),w=d.redSqr(),f=b.redIAdd(b);f=f.redIAdd(f),f=f.redIAdd(f),r=w.redISub(c).redISub(c),i=d.redMul(c.redISub(r)).redISub(f),o=this.y.redMul(this.z),o=o.redIAdd(o)}return this.curve.jpoint(r,i,o)},o.prototype._threeDbl=function n(){var a,r,i;if(this.zOne){var o=this.x.redSqr(),d=this.y.redSqr(),l=d.redSqr(),c=this.x.redAdd(d).redSqr().redISub(o).redISub(l);c=c.redIAdd(c);var s=o.redAdd(o).redIAdd(o).redIAdd(this.curve.a),u=s.redSqr().redISub(c).redISub(c);a=u;var t=l.redIAdd(l);t=t.redIAdd(t),t=t.redIAdd(t),r=s.redMul(c.redISub(u)).redISub(t),i=this.y.redAdd(this.y)}else{var f=this.z.redSqr(),m=this.y.redSqr(),h=this.x.redMul(m),g=this.x.redSub(f).redMul(this.x.redAdd(f));g=g.redAdd(g).redIAdd(g);var b=h.redIAdd(h);b=b.redIAdd(b);var y=b.redAdd(b);a=g.redSqr().redISub(y),i=this.y.redAdd(this.z).redSqr().redISub(m).redISub(f);var w=m.redSqr();w=w.redIAdd(w),w=w.redIAdd(w),w=w.redIAdd(w),r=g.redMul(b.redISub(a)).redISub(w)}return this.curve.jpoint(a,r,i)},o.prototype._dbl=function t(){var n=this.curve.a,a=this.x,r=this.y,i=this.z,o=i.redSqr().redSqr(),s=a.redSqr(),d=r.redSqr(),l=s.redAdd(s).redIAdd(s).redIAdd(n.redMul(o)),c=a.redAdd(a);c=c.redIAdd(c);var u=c.redMul(d),f=l.redSqr().redISub(u.redAdd(u)),m=u.redISub(f),h=d.redSqr();h=h.redIAdd(h),h=h.redIAdd(h),h=h.redIAdd(h);var g=l.redMul(m).redISub(h),b=r.redAdd(r).redMul(i);return this.curve.jpoint(f,g,b)},o.prototype.trpl=function n(){if(!this.curve.zeroA)return this.dbl().add(this);var a=this.x.redSqr(),r=this.y.redSqr(),i=this.z.redSqr(),o=r.redSqr(),s=a.redAdd(a).redIAdd(a),d=s.redSqr(),l=this.x.redAdd(r).redSqr().redISub(a).redISub(o);l=l.redIAdd(l),l=l.redAdd(l).redIAdd(l),l=l.redISub(d);var c=l.redSqr(),f=o.redIAdd(o);f=f.redIAdd(f),f=f.redIAdd(f),f=f.redIAdd(f);var t=s.redIAdd(l).redSqr().redISub(d).redISub(c).redISub(f),u=r.redMul(t);u=u.redIAdd(u),u=u.redIAdd(u);var m=this.x.redMul(c).redISub(u);m=m.redIAdd(m),m=m.redIAdd(m);var h=this.y.redMul(t.redMul(f.redISub(t)).redISub(l.redMul(c)));h=h.redIAdd(h),h=h.redIAdd(h),h=h.redIAdd(h);var g=this.z.redAdd(l).redSqr().redISub(i).redISub(c);return this.curve.jpoint(m,h,g)},o.prototype.mul=function t(n,a){return n=new l(n,a),this.curve._wnafMul(this,n)},o.prototype.eq=function t(n){if('affine'===n.type)return this.eq(n.toJ());if(this===n)return!0;var a=this.z.redSqr(),r=n.z.redSqr();if(0!==this.x.redMul(r).redISub(n.x.redMul(a)).cmpn(0))return!1;var i=a.redMul(this.z),o=r.redMul(n.z);return 0===this.y.redMul(o).redISub(n.y.redMul(i)).cmpn(0)},o.prototype.eqXToP=function n(a){var r=this.z.redSqr(),i=a.toRed(this.curve.red).redMul(r);if(0===this.x.cmp(i))return!0;for(var o=a.clone(),s=this.curve.redN.redMul(r);;){if(o.iadd(this.curve.n),0<=o.cmp(this.curve.p))return!1;if(i.redIAdd(s),0===this.x.cmp(i))return!0}return!1},o.prototype.inspect=function t(){return this.isInfinity()?'<EC JPoint Infinity>':'<EC JPoint x: '+this.x.toString(16,2)+' y: '+this.y.toString(16,2)+' z: '+this.z.toString(16,2)+'>'},o.prototype.isInfinity=function t(){return 0===this.z.cmpn(0)}},function(t,n,a){'use strict';function r(t){l.call(this,'mont',t),this.a=new s(t.a,16).toRed(this.red),this.b=new s(t.b,16).toRed(this.red),this.i4=new s(4).toRed(this.red).redInvm(),this.two=new s(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function i(t,n,a){l.BasePoint.call(this,t,'projective'),null===n&&null===a?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new s(n,16),this.z=new s(a,16),!this.x.red&&(this.x=this.x.toRed(this.curve.red)),!this.z.red&&(this.z=this.z.toRed(this.curve.red)))}var o=a(93),s=a(34),d=a(0),l=o.base,c=a(8),u=c.utils;d(r,l),t.exports=r,r.prototype.validate=function t(n){var a=n.normalize().x,r=a.redSqr(),i=r.redMul(a).redAdd(r.redMul(this.a)).redAdd(a),o=i.redSqrt();return 0===o.redSqr().cmp(i)},d(i,l.BasePoint),r.prototype.decodePoint=function t(n,a){return this.point(u.toArray(n,a),1)},r.prototype.point=function t(n,a){return new i(this,n,a)},r.prototype.pointFromJSON=function t(n){return i.fromJSON(this,n)},i.prototype.precompute=function t(){},i.prototype._encode=function t(){return this.getX().toArray('be',this.curve.p.byteLength())},i.fromJSON=function t(n,a){return new i(n,a[0],a[1]||n.one)},i.prototype.inspect=function t(){return this.isInfinity()?'<EC Point Infinity>':'<EC Point x: '+this.x.fromRed().toString(16,2)+' z: '+this.z.fromRed().toString(16,2)+'>'},i.prototype.isInfinity=function t(){return 0===this.z.cmpn(0)},i.prototype.dbl=function t(){var n=this.x.redAdd(this.z),a=n.redSqr(),r=this.x.redSub(this.z),i=r.redSqr(),o=a.redSub(i),s=a.redMul(i),d=o.redMul(i.redAdd(this.curve.a24.redMul(o)));return this.curve.point(s,d)},i.prototype.add=function t(){throw new Error('Not supported on Montgomery curve')},i.prototype.diffAdd=function t(n,r){var i=this.x.redAdd(this.z),a=this.x.redSub(this.z),o=n.x.redAdd(n.z),s=n.x.redSub(n.z),d=s.redMul(i),l=o.redMul(a),c=r.z.redMul(d.redAdd(l).redSqr()),u=r.x.redMul(d.redISub(l).redSqr());return this.curve.point(c,u)},i.prototype.mul=function n(r){for(var o=r.clone(),t=this,a=this.curve.point(null,null),s=this,d=[];0!==o.cmpn(0);o.iushrn(1))d.push(o.andln(1));for(var l=d.length-1;0<=l;l--)0===d[l]?(t=t.diffAdd(a,s),a=a.dbl()):(a=t.diffAdd(a,s),t=t.dbl());return a},i.prototype.mulAdd=function t(){throw new Error('Not supported on Montgomery curve')},i.prototype.jumlAdd=function t(){throw new Error('Not supported on Montgomery curve')},i.prototype.eq=function t(n){return 0===this.getX().cmp(n.getX())},i.prototype.normalize=function t(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},i.prototype.getX=function t(){return this.normalize(),this.x.fromRed()}},function(t,n,a){'use strict';function r(t){this.twisted=1!=(0|t.a),this.mOneA=this.twisted&&-1==(0|t.a),this.extended=this.mOneA,c.call(this,'edwards',t),this.a=new d(t.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new d(t.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new d(t.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),u(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1==(0|t.c)}function i(n,a,r,i,o){c.BasePoint.call(this,n,'projective'),null===a&&null===r&&null===i?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new d(a,16),this.y=new d(r,16),this.z=i?new d(i,16):this.curve.one,this.t=o&&new d(o,16),!this.x.red&&(this.x=this.x.toRed(this.curve.red)),!this.y.red&&(this.y=this.y.toRed(this.curve.red)),!this.z.red&&(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),!this.zOne&&(this.t=this.t.redMul(this.z.redInvm()))))}var o=a(93),s=a(8),d=a(34),l=a(0),c=o.base,u=s.utils.assert;l(r,c),t.exports=r,r.prototype._mulA=function t(n){return this.mOneA?n.redNeg():this.a.redMul(n)},r.prototype._mulC=function t(n){return this.oneC?n:this.c.redMul(n)},r.prototype.jpoint=function n(a,r,i,o){return this.point(a,r,i,o)},r.prototype.pointFromX=function t(n,a){n=new d(n,16),n.red||(n=n.toRed(this.red));var r=n.redSqr(),i=this.c2.redSub(this.a.redMul(r)),o=this.one.redSub(this.c2.redMul(this.d).redMul(r)),s=i.redMul(o.redInvm()),l=s.redSqrt();if(0!==l.redSqr().redSub(s).cmp(this.zero))throw new Error('invalid point');var c=l.fromRed().isOdd();return(a&&!c||!a&&c)&&(l=l.redNeg()),this.point(n,l)},r.prototype.pointFromY=function t(n,a){n=new d(n,16),n.red||(n=n.toRed(this.red));var r=n.redSqr(),i=r.redSub(this.one),o=r.redMul(this.d).redAdd(this.one),s=i.redMul(o.redInvm());if(0===s.cmp(this.zero))if(a)throw new Error('invalid point');else return this.point(this.zero,n);var l=s.redSqrt();if(0!==l.redSqr().redSub(s).cmp(this.zero))throw new Error('invalid point');return l.isOdd()!==a&&(l=l.redNeg()),this.point(l,n)},r.prototype.validate=function t(n){if(n.isInfinity())return!0;n.normalize();var a=n.x.redSqr(),r=n.y.redSqr(),i=a.redMul(this.a).redAdd(r),o=this.c2.redMul(this.one.redAdd(this.d.redMul(a).redMul(r)));return 0===i.cmp(o)},l(i,c.BasePoint),r.prototype.pointFromJSON=function t(n){return i.fromJSON(this,n)},r.prototype.point=function n(a,r,o,s){return new i(this,a,r,o,s)},i.fromJSON=function t(n,a){return new i(n,a[0],a[1],a[2])},i.prototype.inspect=function t(){return this.isInfinity()?'<EC Point Infinity>':'<EC Point x: '+this.x.fromRed().toString(16,2)+' y: '+this.y.fromRed().toString(16,2)+' z: '+this.z.fromRed().toString(16,2)+'>'},i.prototype.isInfinity=function t(){return 0===this.x.cmpn(0)&&0===this.y.cmp(this.z)},i.prototype._extDbl=function t(){var n=this.x.redSqr(),a=this.y.redSqr(),r=this.z.redSqr();r=r.redIAdd(r);var i=this.curve._mulA(n),o=this.x.redAdd(this.y).redSqr().redISub(n).redISub(a),s=i.redAdd(a),d=s.redSub(r),l=i.redSub(a),c=o.redMul(d),u=s.redMul(l),f=o.redMul(l),m=d.redMul(s);return this.curve.point(c,u,m,f)},i.prototype._projDbl=function t(){var n=this.x.redAdd(this.y).redSqr(),a=this.x.redSqr(),r=this.y.redSqr(),i,o,s;if(this.curve.twisted){var d=this.curve._mulA(a),l=d.redAdd(r);if(this.zOne)i=n.redSub(a).redSub(r).redMul(l.redSub(this.curve.two)),o=l.redMul(d.redSub(r)),s=l.redSqr().redSub(l).redSub(l);else{var c=this.z.redSqr(),u=l.redSub(c).redISub(c);i=n.redSub(a).redISub(r).redMul(u),o=l.redMul(d.redSub(r)),s=l.redMul(u)}}else{var d=a.redAdd(r),c=this.curve._mulC(this.c.redMul(this.z)).redSqr(),u=d.redSub(c).redSub(c);i=this.curve._mulC(n.redISub(d)).redMul(u),o=this.curve._mulC(d).redMul(a.redISub(r)),s=d.redMul(u)}return this.curve.point(i,o,s)},i.prototype.dbl=function t(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},i.prototype._extAdd=function t(n){var r=this.y.redSub(this.x).redMul(n.y.redSub(n.x)),a=this.y.redAdd(this.x).redMul(n.y.redAdd(n.x)),i=this.t.redMul(this.curve.dd).redMul(n.t),o=this.z.redMul(n.z.redAdd(n.z)),s=a.redSub(r),d=o.redSub(i),l=o.redAdd(i),c=a.redAdd(r),u=s.redMul(d),f=l.redMul(c),m=s.redMul(c),h=d.redMul(l);return this.curve.point(u,f,h,m)},i.prototype._projAdd=function t(n){var r=this.z.redMul(n.z),a=r.redSqr(),i=this.x.redMul(n.x),o=this.y.redMul(n.y),s=this.curve.d.redMul(i).redMul(o),d=a.redSub(s),l=a.redAdd(s),c=this.x.redAdd(this.y).redMul(n.x.redAdd(n.y)).redISub(i).redISub(o),u=r.redMul(d).redMul(c),f,m;return this.curve.twisted?(f=r.redMul(l).redMul(o.redSub(this.curve._mulA(i))),m=d.redMul(l)):(f=r.redMul(l).redMul(o.redSub(i)),m=this.curve._mulC(d).redMul(l)),this.curve.point(u,f,m)},i.prototype.add=function t(n){return this.isInfinity()?n:n.isInfinity()?this:this.curve.extended?this._extAdd(n):this._projAdd(n)},i.prototype.mul=function t(n){return this._hasDoubles(n)?this.curve._fixedNafMul(this,n):this.curve._wnafMul(this,n)},i.prototype.mulAdd=function t(n,a,r){return this.curve._wnafMulAdd(1,[this,a],[n,r],2,!1)},i.prototype.jmulAdd=function t(n,a,r){return this.curve._wnafMulAdd(1,[this,a],[n,r],2,!0)},i.prototype.normalize=function t(){if(this.zOne)return this;var n=this.z.redInvm();return this.x=this.x.redMul(n),this.y=this.y.redMul(n),this.t&&(this.t=this.t.redMul(n)),this.z=this.curve.one,this.zOne=!0,this},i.prototype.neg=function t(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},i.prototype.getX=function t(){return this.normalize(),this.x.fromRed()},i.prototype.getY=function t(){return this.normalize(),this.y.fromRed()},i.prototype.eq=function t(n){return this===n||0===this.getX().cmp(n.getX())&&0===this.getY().cmp(n.getY())},i.prototype.eqXToP=function n(a){var r=a.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(r))return!0;for(var i=a.clone(),o=this.curve.redN.redMul(this.z);;){if(i.iadd(this.curve.n),0<=i.cmp(this.curve.p))return!1;if(r.redIAdd(o),0===this.x.cmp(r))return!0}return!1},i.prototype.toP=i.prototype.normalize,i.prototype.mixedAdd=i.prototype.add},function(t,n,a){'use strict';function r(t){this.curve='short'===t.type?new d.curve.short(t):'edwards'===t.type?new d.curve.edwards(t):new d.curve.mont(t),this.g=this.curve.g,this.n=this.curve.n,this.hash=t.hash,l(this.g.validate(),'Invalid curve'),l(this.g.mul(this.n).isInfinity(),'Invalid curve, G*N != O')}function i(t,n){Object.defineProperty(o,t,{configurable:!0,enumerable:!0,get:function(){var a=new r(n);return Object.defineProperty(o,t,{configurable:!0,enumerable:!0,value:a}),a}})}var o=n,s=a(141),d=a(8),l=d.utils.assert;o.PresetCurve=r,i('p192',{type:'short',prime:'p192',p:'ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff',a:'ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc',b:'64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1',n:'ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831',hash:s.sha256,gRed:!1,g:['188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012','07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811']}),i('p224',{type:'short',prime:'p224',p:'ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001',a:'ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe',b:'b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4',n:'ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d',hash:s.sha256,gRed:!1,g:['b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21','bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34']}),i('p256',{type:'short',prime:null,p:'ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff',a:'ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc',b:'5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b',n:'ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551',hash:s.sha256,gRed:!1,g:['6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296','4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5']}),i('p384',{type:'short',prime:null,p:'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff',a:'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc',b:'b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef',n:'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973',hash:s.sha384,gRed:!1,g:['aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7','3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f']}),i('p521',{type:'short',prime:null,p:'000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff',a:'000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc',b:'00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00',n:'000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409',hash:s.sha512,gRed:!1,g:['000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66','00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650']}),i('curve25519',{type:'mont',prime:'p25519',p:'7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed',a:'76d06',b:'1',n:'1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed',hash:s.sha256,gRed:!1,g:['9']}),i('ed25519',{type:'edwards',prime:'p25519',p:'7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed',a:'-1',c:'1',d:'52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3',n:'1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed',hash:s.sha256,gRed:!1,g:['216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a','6666666666666666666666666666666666666666666666666666666666666658']});var c;try{c=a(407)}catch(t){c=void 0}i('secp256k1',{type:'short',prime:'k256',p:'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f',a:'0',b:'7',n:'ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141',h:'1',hash:s.sha256,beta:'7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee',lambda:'5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72',basis:[{a:'3086d221a7d46bcde86c90e49284eb15',b:'-e4437ed6010e88286f547fa90abfe4c3'},{a:'114ca50f7a8e2f3f657c1108d9d44cfd8',b:'3086d221a7d46bcde86c90e49284eb15'}],gRed:!1,g:['79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798','483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8',c]})},function(t,n,a){'use strict';n.sha1=a(402),n.sha224=a(403),n.sha256=a(232),n.sha384=a(404),n.sha512=a(233)},function(t,n,a){'use strict';function r(){return this instanceof r?void(d.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=Array(80)):new r}var i=a(27),o=a(68),s=a(231),l=i.rotl32,u=i.sum32,f=i.sum32_5,m=s.ft_1,d=o.BlockHash,h=[1518500249,1859775393,2400959708,3395469782];i.inherits(r,d),t.exports=r,r.blockSize=512,r.outSize=160,r.hmacStrength=80,r.padLength=64,r.prototype._update=function n(r,o){for(var g=this.W,y=0;16>y;y++)g[y]=r[o+y];for(;y<g.length;y++)g[y]=l(g[y-3]^g[y-8]^g[y-14]^g[y-16],1);var i=this.h[0],a=this.h[1],b=this.h[2],c=this.h[3],d=this.h[4];for(y=0;y<g.length;y++){var w=~~(y/20),s=f(l(i,5),m(w,a,b,c),d,g[y],h[w]);d=c,c=b,b=l(a,30),a=i,i=s}this.h[0]=u(this.h[0],i),this.h[1]=u(this.h[1],a),this.h[2]=u(this.h[2],b),this.h[3]=u(this.h[3],c),this.h[4]=u(this.h[4],d)},r.prototype._digest=function t(n){return'hex'===n?i.toHex32(this.h,'big'):i.split32(this.h,'big')}},function(t,n,a){'use strict';function r(){return this instanceof r?void(o.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]):new r}var i=a(27),o=a(232);i.inherits(r,o),t.exports=r,r.blockSize=512,r.outSize=224,r.hmacStrength=192,r.padLength=64,r.prototype._digest=function t(n){return'hex'===n?i.toHex32(this.h.slice(0,7),'big'):i.split32(this.h.slice(0,7),'big')}},function(t,n,a){'use strict';function r(){return this instanceof r?void(o.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]):new r}var i=a(27),o=a(233);i.inherits(r,o),t.exports=r,r.blockSize=1024,r.outSize=384,r.hmacStrength=192,r.padLength=128,r.prototype._digest=function t(n){return'hex'===n?i.toHex32(this.h.slice(0,12),'big'):i.split32(this.h.slice(0,12),'big')}},function(t,n,a){'use strict';function i(){return this instanceof i?void(b.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian='little'):new i}function o(t,n,a,r){return 15>=t?n^a^r:31>=t?n&a|~n&r:47>=t?(n|~a)^r:63>=t?n&r|a&~r:n^(a|~r)}function d(t){return 15>=t?0:31>=t?1518500249:47>=t?1859775393:63>=t?2400959708:2840853838}function l(t){return 15>=t?1352829926:31>=t?1548603684:47>=t?1836072691:63>=t?2053994217:0}var c=a(27),u=a(68),f=c.rotl32,m=c.sum32,h=c.sum32_3,g=c.sum32_4,b=u.BlockHash;c.inherits(i,b),n.ripemd160=i,i.blockSize=512,i.outSize=160,i.hmacStrength=192,i.padLength=64,i.prototype._update=function t(n,a){for(var i=this.h[0],c=this.h[1],u=this.h[2],b=this.h[3],v=this.h[4],x=i,_=c,k=u,C=b,E=v,A=0,S;80>A;A++)S=m(f(g(i,o(A,c,u,b),n[y[A]+a],d(A)),w[A]),v),i=v,v=b,b=f(u,10),u=c,c=S,S=m(f(g(x,o(79-A,_,k,C),n[r[A]+a],l(A)),s[A]),E),x=E,E=C,C=f(k,10),k=_,_=S;S=h(this.h[1],u,C),this.h[1]=h(this.h[2],b,E),this.h[2]=h(this.h[3],v,x),this.h[3]=h(this.h[4],i,_),this.h[4]=h(this.h[0],c,k),this.h[0]=S},i.prototype._digest=function t(n){return'hex'===n?c.toHex32(this.h,'little'):c.split32(this.h,'little')};var y=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],r=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],w=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],s=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},function(t,n,a){'use strict';function r(t,n,a){return this instanceof r?void(this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(i.toArray(n,a))):new r(t,n,a)}var i=a(27),o=a(21);t.exports=r,r.prototype._init=function t(n){n.length>this.blockSize&&(n=new this.Hash().update(n).digest()),o(n.length<=this.blockSize);for(var a=n.length;a<this.blockSize;a++)n.push(0);for(a=0;a<n.length;a++)n[a]^=54;for(this.inner=new this.Hash().update(n),a=0;a<n.length;a++)n[a]^=106;this.outer=new this.Hash().update(n)},r.prototype.update=function t(n,a){return this.inner.update(n,a),this},r.prototype.digest=function t(n){return this.outer.update(this.inner.digest()),this.outer.digest(n)}},function(t,n){t.exports={doubles:{step:4,points:[['e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a','f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821'],['8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508','11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf'],['175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739','d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695'],['363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640','4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9'],['8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c','4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36'],['723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda','96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f'],['eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa','5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999'],['100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0','cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09'],['e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d','9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d'],['feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d','e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088'],['da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1','9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d'],['53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0','5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8'],['8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047','10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a'],['385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862','283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453'],['6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7','7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160'],['3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd','56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0'],['85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83','7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6'],['948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a','53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589'],['6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8','bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17'],['e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d','4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda'],['e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725','7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd'],['213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754','4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2'],['4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c','17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6'],['fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6','6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f'],['76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39','c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01'],['c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891','893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3'],['d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b','febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f'],['b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03','2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7'],['e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d','eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78'],['a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070','7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1'],['90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4','e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150'],['8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da','662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82'],['e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11','1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc'],['8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e','efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b'],['e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41','2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51'],['b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef','67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45'],['d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8','db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120'],['324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d','648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84'],['4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96','35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d'],['9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd','ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d'],['6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5','9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8'],['a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266','40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8'],['7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71','34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac'],['928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac','c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f'],['85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751','1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962'],['ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e','493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907'],['827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241','c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec'],['eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3','be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d'],['e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f','4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414'],['1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19','aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd'],['146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be','b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0'],['fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9','6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811'],['da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2','8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1'],['a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13','7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c'],['174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c','ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73'],['959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba','2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd'],['d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151','e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405'],['64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073','d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589'],['8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458','38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e'],['13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b','69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27'],['bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366','d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1'],['8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa','40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482'],['8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0','620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945'],['dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787','7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573'],['f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e','ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82']]},naf:{wnd:7,points:[['f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9','388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672'],['2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4','d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6'],['5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc','6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da'],['acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe','cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37'],['774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb','d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b'],['f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8','ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81'],['d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e','581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58'],['defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34','4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77'],['2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c','85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a'],['352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5','321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c'],['2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f','2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67'],['9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714','73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402'],['daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729','a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55'],['c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db','2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482'],['6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4','e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82'],['1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5','b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396'],['605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479','2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49'],['62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d','80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf'],['80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f','1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a'],['7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb','d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7'],['d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9','eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933'],['49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963','758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a'],['77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74','958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6'],['f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530','e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37'],['463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b','5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e'],['f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247','cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6'],['caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1','cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476'],['2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120','4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40'],['7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435','91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61'],['754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18','673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683'],['e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8','59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5'],['186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb','3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b'],['df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f','55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417'],['5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143','efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868'],['290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba','e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a'],['af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45','f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6'],['766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a','744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996'],['59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e','c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e'],['f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8','e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d'],['7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c','30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2'],['948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519','e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e'],['7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab','100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437'],['3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca','ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311'],['d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf','8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4'],['1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610','68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575'],['733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4','f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d'],['15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c','d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d'],['a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940','edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629'],['e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980','a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06'],['311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3','66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374'],['34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf','9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee'],['f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63','4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1'],['d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448','fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b'],['32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf','5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661'],['7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5','8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6'],['ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6','8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e'],['16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5','5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d'],['eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99','f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc'],['78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51','f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4'],['494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5','42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c'],['a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5','204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b'],['c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997','4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913'],['841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881','73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154'],['5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5','39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865'],['36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66','d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc'],['336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726','ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224'],['8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede','6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e'],['1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94','60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6'],['85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31','3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511'],['29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51','b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b'],['a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252','ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2'],['4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5','cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c'],['d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b','6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3'],['ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4','322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d'],['af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f','6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700'],['e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889','2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4'],['591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246','b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196'],['11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984','998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4'],['3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a','b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257'],['cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030','bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13'],['c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197','6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096'],['c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593','c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38'],['a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef','21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f'],['347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38','60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448'],['da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a','49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a'],['c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111','5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4'],['4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502','7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437'],['3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea','be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7'],['cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26','8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d'],['b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986','39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a'],['d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e','62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54'],['48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4','25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77'],['dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda','ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517'],['6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859','cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10'],['e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f','f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125'],['eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c','6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e'],['13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942','fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1'],['ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a','1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2'],['b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80','5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423'],['ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d','438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8'],['8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1','cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758'],['52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63','c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375'],['e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352','6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d'],['7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193','ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec'],['5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00','9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0'],['32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58','ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c'],['e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7','d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4'],['8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8','c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f'],['4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e','67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649'],['3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d','cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826'],['674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b','299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5'],['d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f','f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87'],['30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6','462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b'],['be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297','62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc'],['93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a','7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c'],['b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c','ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f'],['d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52','4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a'],['d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb','bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46'],['463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065','bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f'],['7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917','603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03'],['74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9','cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08'],['30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3','553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8'],['9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57','712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373'],['176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66','ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3'],['75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8','9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8'],['809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721','9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1'],['1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180','4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9']]}}},function(t,n,a){'use strict';function r(t){return this instanceof r?void('string'==typeof t&&(l(s.curves.hasOwnProperty(t),'Unknown curve '+t),t=s.curves[t]),t instanceof s.curves.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash):new r(t)}var i=a(34),o=a(409),s=a(8),d=s.utils,l=d.assert,c=a(410),u=a(411);t.exports=r,r.prototype.keyPair=function t(n){return new c(this,n)},r.prototype.keyFromPrivate=function t(n,a){return c.fromPrivate(this,n,a)},r.prototype.keyFromPublic=function t(n,a){return c.fromPublic(this,n,a)},r.prototype.genKeyPair=function t(n){n||(n={});var a=new o({hash:this.hash,pers:n.pers,persEnc:n.persEnc||'utf8',entropy:n.entropy||s.rand(this.hash.hmacStrength),entropyEnc:n.entropy&&n.entropyEnc||'utf8',nonce:this.n.toArray()}),r=this.n.byteLength(),d=this.n.sub(new i(2));do{var l=new i(a.generate(r));if(0<l.cmp(d))continue;return l.iaddn(1),this.keyFromPrivate(l)}while(!0)},r.prototype._truncateToN=function t(n,a){var r=8*n.byteLength()-this.n.bitLength();return 0<r&&(n=n.ushrn(r)),!a&&0<=n.cmp(this.n)?n.sub(this.n):n},r.prototype.sign=function t(n,a,d,l){'object'==typeof d&&(l=d,d=null),l||(l={}),a=this.keyFromPrivate(a,d),n=this._truncateToN(new i(n,16));for(var c=this.n.byteLength(),f=a.getPrivate().toArray('be',c),m=n.toArray('be',c),h=new o({hash:this.hash,entropy:f,nonce:m,pers:l.pers,persEnc:l.persEnc||'utf8'}),g=this.n.sub(new i(1)),b=0,y;!0;b++)if(y=l.k?l.k(b):new i(h.generate(this.n.byteLength())),y=this._truncateToN(y,!0),!(0>=y.cmpn(1)||0<=y.cmp(g))){var w=this.g.mul(y);if(!w.isInfinity()){var v=w.getX(),x=v.umod(this.n);if(0!==x.cmpn(0)){var _=y.invm(this.n).mul(x.mul(a.getPrivate()).iadd(n));if(_=_.umod(this.n),0!==_.cmpn(0)){var k=(w.getY().isOdd()?1:0)|(0===v.cmp(x)?0:2);return l.canonical&&0<_.cmp(this.nh)&&(_=this.n.sub(_),k^=1),new u({r:x,s:_,recoveryParam:k})}}}}},r.prototype.verify=function t(n,a,o,d){n=this._truncateToN(new i(n,16)),o=this.keyFromPublic(o,d),a=new u(a,'hex');var l=a.r,r=a.s;if(0>l.cmpn(1)||0<=l.cmp(this.n))return!1;if(0>r.cmpn(1)||0<=r.cmp(this.n))return!1;var s=r.invm(this.n),c=s.mul(n).umod(this.n),f=s.mul(l).umod(this.n);if(!this.curve._maxwellTrick){var m=this.g.mulAdd(c,o.getPublic(),f);return!m.isInfinity()&&0===m.getX().umod(this.n).cmp(l)}var m=this.g.jmulAdd(c,o.getPublic(),f);return!m.isInfinity()&&m.eqXToP(l)},r.prototype.recoverPubKey=function(t,a,o,d){l((3&o)===o,'The recovery param is more than two bits'),a=new u(a,d);var c=this.n,n=new i(t),f=a.r,r=a.s,s=1&o,m=o>>1;if(0<=f.cmp(this.curve.p.umod(this.curve.n))&&m)throw new Error('Unable to find sencond key candinate');f=m?this.curve.pointFromX(f.add(this.curve.n),s):this.curve.pointFromX(f,s);var h=a.r.invm(c),g=c.sub(n).mul(h).umod(c),b=r.mul(h).umod(c);return this.g.mulAdd(g,f,b)},r.prototype.getKeyRecoveryParam=function(t,n,a,r){if(n=new u(n,r),null!==n.recoveryParam)return n.recoveryParam;for(var o=0;4>o;o++){var i;try{i=this.recoverPubKey(t,n,o)}catch(t){continue}if(i.eq(a))return o}throw new Error('Unable to find valid recovery factor')}},function(t,n,a){'use strict';function r(t){if(!(this instanceof r))return new r(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var n=o.toArray(t.entropy,t.entropyEnc||'hex'),a=o.toArray(t.nonce,t.nonceEnc||'hex'),i=o.toArray(t.pers,t.persEnc||'hex');s(n.length>=this.minEntropy/8,'Not enough entropy. Minimum is: '+this.minEntropy+' bits'),this._init(n,a,i)}var i=a(141),o=a(230),s=a(21);t.exports=r,r.prototype._init=function t(n,a,r){var o=n.concat(a).concat(r);this.K=Array(this.outLen/8),this.V=Array(this.outLen/8);for(var s=0;s<this.V.length;s++)this.K[s]=0,this.V[s]=1;this._update(o),this._reseed=1,this.reseedInterval=281474976710656},r.prototype._hmac=function t(){return new i.hmac(this.hash,this.K)},r.prototype._update=function t(n){var a=this._hmac().update(this.V).update([0]);n&&(a=a.update(n)),this.K=a.digest(),this.V=this._hmac().update(this.V).digest();n&&(this.K=this._hmac().update(this.V).update([1]).update(n).digest(),this.V=this._hmac().update(this.V).digest())},r.prototype.reseed=function t(n,a,r,i){'string'!=typeof a&&(i=r,r=a,a=null),n=o.toArray(n,a),r=o.toArray(r,i),s(n.length>=this.minEntropy/8,'Not enough entropy. Minimum is: '+this.minEntropy+' bits'),this._update(n.concat(r||[])),this._reseed=1},r.prototype.generate=function t(n,a,r,i){if(this._reseed>this.reseedInterval)throw new Error('Reseed is required');'string'!=typeof a&&(i=r,r=a,a=null),r&&(r=o.toArray(r,i||'hex'),this._update(r));for(var s=[];s.length<n;)this.V=this._hmac().update(this.V).digest(),s=s.concat(this.V);var d=s.slice(0,n);return this._update(r),this._reseed++,o.encode(d,a)}},function(t,n,a){'use strict';function r(t,n){this.ec=t,this.priv=null,this.pub=null,n.priv&&this._importPrivate(n.priv,n.privEnc),n.pub&&this._importPublic(n.pub,n.pubEnc)}var i=a(34),o=a(8),s=o.utils,d=s.assert;t.exports=r,r.fromPublic=function t(n,a,i){return a instanceof r?a:new r(n,{pub:a,pubEnc:i})},r.fromPrivate=function t(n,a,i){return a instanceof r?a:new r(n,{priv:a,privEnc:i})},r.prototype.validate=function t(){var n=this.getPublic();return n.isInfinity()?{result:!1,reason:'Invalid public key'}:n.validate()?n.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:'Public key * N != O'}:{result:!1,reason:'Public key is not a point'}},r.prototype.getPublic=function t(n,a){return'string'==typeof n&&(a=n,n=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),a?this.pub.encode(a,n):this.pub},r.prototype.getPrivate=function t(n){return'hex'===n?this.priv.toString(16,2):this.priv},r.prototype._importPrivate=function t(n,a){this.priv=new i(n,a||16),this.priv=this.priv.umod(this.ec.curve.n)},r.prototype._importPublic=function t(n,a){return n.x||n.y?('mont'===this.ec.curve.type?d(n.x,'Need x coordinate'):('short'===this.ec.curve.type||'edwards'===this.ec.curve.type)&&d(n.x&&n.y,'Need both x and y coordinate'),void(this.pub=this.ec.curve.point(n.x,n.y))):void(this.pub=this.ec.curve.decodePoint(n,a))},r.prototype.derive=function t(n){return n.mul(this.priv).getX()},r.prototype.sign=function t(n,a,r){return this.ec.sign(n,this,a,r)},r.prototype.verify=function t(n,a){return this.ec.verify(n,a,this)},r.prototype.inspect=function t(){return'<Key priv: '+(this.priv&&this.priv.toString(16,2))+' pub: '+(this.pub&&this.pub.inspect())+' >'}},function(t,n,a){'use strict';function r(t,n){return t instanceof r?t:void(this._importDER(t,n)||(f(t.r&&t.s,'Signature without r or s'),this.r=new c(t.r,16),this.s=new c(t.s,16),this.recoveryParam=void 0===t.recoveryParam?null:t.recoveryParam))}function i(){this.place=0}function o(t,n){var a=t[n.place++];if(!(128&a))return a;for(var r=15&a,o=0,s=0,i=n.place;s<r;s++,i++)o<<=8,o|=t[i];return n.place=i,o}function d(t){for(var n=0,a=t.length-1;!t[n]&&!(128&t[n+1])&&n<a;)n++;return 0==n?t:t.slice(n)}function l(t,n){if(128>n)return void t.push(n);var a=1+(_Mathlog(n)/_MathLN>>>3);for(t.push(128|a);--a;)t.push(255&n>>>(a<<3));t.push(n)}var c=a(34),s=a(8),u=s.utils,f=u.assert;t.exports=r,r.prototype._importDER=function t(n,a){n=u.toArray(n,a);var d=new i;if(48!==n[d.place++])return!1;var l=o(n,d);if(l+d.place!==n.length)return!1;if(2!==n[d.place++])return!1;var f=o(n,d),m=n.slice(d.place,f+d.place);if(d.place+=f,2!==n[d.place++])return!1;var r=o(n,d);if(n.length!==r+d.place)return!1;var h=n.slice(d.place,r+d.place);return 0===m[0]&&128&m[1]&&(m=m.slice(1)),0===h[0]&&128&h[1]&&(h=h.slice(1)),this.r=new c(m),this.s=new c(h),this.recoveryParam=null,!0},r.prototype.toDER=function t(n){var a=this.r.toArray(),r=this.s.toArray();for(128&a[0]&&(a=[0].concat(a)),128&r[0]&&(r=[0].concat(r)),a=d(a),r=d(r);!r[0]&&!(128&r[1]);)r=r.slice(1);var i=[2];l(i,a.length),i=i.concat(a),i.push(2),l(i,r.length);var o=i.concat(r),s=[48];return l(s,o.length),s=s.concat(o),u.encode(s,n)}},function(t,n,a){'use strict';function r(t){if(d('ed25519'===t,'only tested with ed25519 so far'),!(this instanceof r))return new r(t);var t=o.curves[t].curve;this.curve=t,this.g=t.g,this.g.precompute(t.n.bitLength()+1),this.pointClass=t.point().constructor,this.encodingLength=_Mathceil(t.n.bitLength()/8),this.hash=i.sha512}var i=a(141),o=a(8),s=o.utils,d=s.assert,l=s.parseBytes,c=a(413),u=a(414);t.exports=r,r.prototype.sign=function t(n,a){n=l(n);var i=this.keyFromSecret(a),o=this.hashInt(i.messagePrefix(),n),r=this.g.mul(o),s=this.encodePoint(r),d=this.hashInt(s,i.pubBytes(),n).mul(i.priv()),c=o.add(d).umod(this.curve.n);return this.makeSignature({R:r,S:c,Rencoded:s})},r.prototype.verify=function t(n,a,r){n=l(n),a=this.makeSignature(a);var i=this.keyFromPublic(r),o=this.hashInt(a.Rencoded(),i.pubBytes(),n),s=this.g.mul(a.S()),d=a.R().add(i.pub().mul(o));return d.eq(s)},r.prototype.hashInt=function t(){for(var n=this.hash(),a=0;a<arguments.length;a++)n.update(arguments[a]);return s.intFromLE(n.digest()).umod(this.curve.n)},r.prototype.keyFromPublic=function t(n){return c.fromPublic(this,n)},r.prototype.keyFromSecret=function t(n){return c.fromSecret(this,n)},r.prototype.makeSignature=function t(n){return n instanceof u?n:new u(this,n)},r.prototype.encodePoint=function t(n){var a=n.getY().toArray('le',this.encodingLength);return a[this.encodingLength-1]|=n.getX().isOdd()?128:0,a},r.prototype.decodePoint=function t(n){n=s.parseBytes(n);var a=n.length-1,r=n.slice(0,a).concat(-129&n[a]),i=0!=(128&n[a]),o=s.intFromLE(r);return this.curve.pointFromY(o,i)},r.prototype.encodeInt=function t(n){return n.toArray('le',this.encodingLength)},r.prototype.decodeInt=function t(n){return s.intFromLE(n)},r.prototype.isPoint=function t(n){return n instanceof this.pointClass}},function(t,n,a){'use strict';function r(t,n){this.eddsa=t,this._secret=d(n.secret),t.isPoint(n.pub)?this._pub=n.pub:this._pubBytes=d(n.pub)}var i=a(8),o=i.utils,s=o.assert,d=o.parseBytes,l=o.cachedProperty;r.fromPublic=function t(n,a){return a instanceof r?a:new r(n,{pub:a})},r.fromSecret=function t(n,a){return a instanceof r?a:new r(n,{secret:a})},r.prototype.secret=function t(){return this._secret},l(r,'pubBytes',function t(){return this.eddsa.encodePoint(this.pub())}),l(r,'pub',function t(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),l(r,'privBytes',function t(){var n=this.eddsa,r=this.hash(),i=n.encodingLength-1,o=r.slice(0,n.encodingLength);return o[0]&=248,o[i]&=127,o[i]|=64,o}),l(r,'priv',function t(){return this.eddsa.decodeInt(this.privBytes())}),l(r,'hash',function t(){return this.eddsa.hash().update(this.secret()).digest()}),l(r,'messagePrefix',function t(){return this.hash().slice(this.eddsa.encodingLength)}),r.prototype.sign=function t(n){return s(this._secret,'KeyPair can only verify'),this.eddsa.sign(n,this)},r.prototype.verify=function t(n,a){return this.eddsa.verify(n,a,this)},r.prototype.getSecret=function t(n){return s(this._secret,'KeyPair is public only'),o.encode(this.secret(),n)},r.prototype.getPublic=function t(n){return o.encode(this.pubBytes(),n)},t.exports=r},function(t,n,a){'use strict';function r(t,n){this.eddsa=t,'object'!=typeof n&&(n=c(n)),Array.isArray(n)&&(n={R:n.slice(0,t.encodingLength),S:n.slice(t.encodingLength)}),d(n.R&&n.S,'Signature without R or S'),t.isPoint(n.R)&&(this._R=n.R),n.S instanceof i&&(this._S=n.S),this._Rencoded=Array.isArray(n.R)?n.R:n.Rencoded,this._Sencoded=Array.isArray(n.S)?n.S:n.Sencoded}var i=a(34),o=a(8),s=o.utils,d=s.assert,l=s.cachedProperty,c=s.parseBytes;l(r,'S',function t(){return this.eddsa.decodeInt(this.Sencoded())}),l(r,'R',function t(){return this.eddsa.decodePoint(this.Rencoded())}),l(r,'Rencoded',function t(){return this.eddsa.encodePoint(this.R())}),l(r,'Sencoded',function t(){return this.eddsa.encodeInt(this.S())}),r.prototype.toBytes=function t(){return this.Rencoded().concat(this.Sencoded())},r.prototype.toHex=function t(){return s.encode(this.toBytes(),'hex').toUpperCase()},t.exports=r},function(t,n){},function(t,n,a){'use strict';var r=a(69);n.certificate=a(429);var i=r.define('RSAPrivateKey',function(){this.seq().obj(this.key('version').int(),this.key('modulus').int(),this.key('publicExponent').int(),this.key('privateExponent').int(),this.key('prime1').int(),this.key('prime2').int(),this.key('exponent1').int(),this.key('exponent2').int(),this.key('coefficient').int())});n.RSAPrivateKey=i;var o=r.define('RSAPublicKey',function(){this.seq().obj(this.key('modulus').int(),this.key('publicExponent').int())});n.RSAPublicKey=o;var s=r.define('SubjectPublicKeyInfo',function(){this.seq().obj(this.key('algorithm').use(d),this.key('subjectPublicKey').bitstr())});n.PublicKey=s;var d=r.define('AlgorithmIdentifier',function(){this.seq().obj(this.key('algorithm').objid(),this.key('none').null_().optional(),this.key('curve').objid().optional(),this.key('params').seq().obj(this.key('p').int(),this.key('q').int(),this.key('g').int()).optional())}),l=r.define('PrivateKeyInfo',function(){this.seq().obj(this.key('version').int(),this.key('algorithm').use(d),this.key('subjectPrivateKey').octstr())});n.PrivateKey=l;var c=r.define('EncryptedPrivateKeyInfo',function(){this.seq().obj(this.key('algorithm').seq().obj(this.key('id').objid(),this.key('decrypt').seq().obj(this.key('kde').seq().obj(this.key('id').objid(),this.key('kdeparams').seq().obj(this.key('salt').octstr(),this.key('iters').int())),this.key('cipher').seq().obj(this.key('algo').objid(),this.key('iv').octstr()))),this.key('subjectPrivateKey').octstr())});n.EncryptedPrivateKey=c;var u=r.define('DSAPrivateKey',function(){this.seq().obj(this.key('version').int(),this.key('p').int(),this.key('q').int(),this.key('g').int(),this.key('pub_key').int(),this.key('priv_key').int())});n.DSAPrivateKey=u,n.DSAparam=r.define('DSAparam',function(){this.int()});var f=r.define('ECPrivateKey',function(){this.seq().obj(this.key('version').int(),this.key('privateKey').octstr(),this.key('parameters').optional().explicit(0).use(m),this.key('publicKey').optional().explicit(1).bitstr())});n.ECPrivateKey=f;var m=r.define('ECParameters',function(){this.choice({namedCurve:this.objid()})});n.signature=r.define('signature',function(){this.seq().obj(this.key('r').int(),this.key('s').int())})},function(t,n,a){(function(t){(function(t,n){'use strict';function o(t,n){if(!t)throw new Error(n||'Assertion failed')}function r(t,n){t.super_=n;var a=function(){};a.prototype=n.prototype,t.prototype=new a,t.prototype.constructor=t}function d(t,n,a){return d.isBN(t)?t:void(this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&(('le'===n||'be'===n)&&(a=n,n=10),this._init(t||0,n||10,a||'be')))}function s(t,n,a){for(var o=0,r=_Mathmin(t.length,a),s=n,i;s<r;s++)i=t.charCodeAt(s)-48,o<<=4,o|=49<=i&&54>=i?i-49+10:17<=i&&22>=i?i-17+10:15&i;return o}function l(t,n,a,o){for(var s=0,r=_Mathmin(t.length,a),d=n,i;d<r;d++)i=t.charCodeAt(d)-48,s*=o,s+=49<=i?i-49+10:17<=i?i-17+10:i;return s}function c(t){for(var n=Array(t.bitLength()),a=0;a<n.length;a++){var r=0|a/26,i=a%26;n[a]=(t.words[r]&1<<i)>>>i}return n}function i(t,n,o){o.negative=n.negative^t.negative;var s=0|t.length+n.length;o.length=s,s=0|s-1;var d=0|t.words[0],a=0|n.words[0],l=d*a,r=67108863&l,c=0|l/67108864;o.words[0]=r;for(var u=1;u<s;u++){for(var f=c>>>26,m=67108863&c,h=_Mathmin(u,n.length-1),g=_Mathmax(0,u-t.length+1),b;g<=h;g++)b=0|u-g,d=0|t.words[b],a=0|n.words[g],l=d*a+m,f+=0|l/67108864,m=67108863&l;o.words[u]=0|m,c=0|f}return 0==c?o.length--:o.words[u]=0|c,o.strip()}function u(t,n,o){o.negative=n.negative^t.negative,o.length=t.length+n.length;for(var s=0,d=0,l=0,c;l<o.length-1;l++){c=d,d=0;for(var u=67108863&s,f=_Mathmin(l,n.length-1),m=_Mathmax(0,l-t.length+1);m<=f;m++){var h=l-m,i=0|t.words[h],a=0|n.words[m],g=i*a,r=67108863&g;c=0|c+(0|g/67108864),r=0|r+u,u=67108863&r,c=0|c+(r>>>26),d+=c>>>26,c&=67108863}o.words[l]=u,s=c,c=d}return 0==s?o.length--:o.words[l]=s,o.strip()}function f(t,n,a){var r=new m;return r.mulp(t,n,a)}function m(t,n){this.x=t,this.y=n}function h(t,n){this.name=t,this.p=new d(n,16),this.n=this.p.bitLength(),this.k=new d(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function g(){h.call(this,'k256','ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f')}function b(){h.call(this,'p224','ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001')}function y(){h.call(this,'p192','ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff')}function w(){h.call(this,'25519','7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed')}function v(t){if('string'==typeof t){var n=d._prime(t);this.m=n.p,this.prime=n}else o(t.gtn(1),'modulus must be greater than 1'),this.m=t,this.prime=null}function x(t){v.call(this,t),this.shift=this.m.bitLength(),0!=this.shift%26&&(this.shift+=26-this.shift%26),this.r=new d(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}'object'==typeof t?t.exports=d:n.BN=d,d.BN=d,d.wordSize=26;var _;try{_=a(418).Buffer}catch(t){}d.isBN=function t(n){return!!(n instanceof d)||null!==n&&'object'==typeof n&&n.constructor.wordSize===d.wordSize&&Array.isArray(n.words)},d.max=function t(n,a){return 0<n.cmp(a)?n:a},d.min=function t(n,a){return 0>n.cmp(a)?n:a},d.prototype._init=function t(n,a,r){if('number'==typeof n)return this._initNumber(n,a,r);if('object'==typeof n)return this._initArray(n,a,r);'hex'===a&&(a=16),o(a===(0|a)&&2<=a&&36>=a),n=n.toString().replace(/\s+/g,'');var i=0;'-'===n[0]&&i++,16===a?this._parseHex(n,i):this._parseBase(n,a,i),'-'===n[0]&&(this.negative=1),this.strip();'le'!==r||this._initArray(this.toArray(),a,r)},d.prototype._initNumber=function t(n,a,r){0>n&&(this.negative=1,n=-n),67108864>n?(this.words=[67108863&n],this.length=1):4503599627370496>n?(this.words=[67108863&n,67108863&n/67108864],this.length=2):(o(9007199254740992>n),this.words=[67108863&n,67108863&n/67108864,1],this.length=3);'le'!==r||this._initArray(this.toArray(),a,r)},d.prototype._initArray=function t(n,a,r){if(o('number'==typeof n.length),0>=n.length)return this.words=[0],this.length=1,this;this.length=_Mathceil(n.length/3),this.words=Array(this.length);for(var s=0;s<this.length;s++)this.words[s]=0;var i=0,d,l;if('be'===r)for(s=n.length-1,d=0;0<=s;s-=3)l=n[s]|n[s-1]<<8|n[s-2]<<16,this.words[d]|=67108863&l<<i,this.words[d+1]=67108863&l>>>26-i,i+=24,26<=i&&(i-=26,d++);else if('le'===r)for(s=0,d=0;s<n.length;s+=3)l=n[s]|n[s+1]<<8|n[s+2]<<16,this.words[d]|=67108863&l<<i,this.words[d+1]=67108863&l>>>26-i,i+=24,26<=i&&(i-=26,d++);return this.strip()},d.prototype._parseHex=function t(n,a){this.length=_Mathceil((n.length-a)/6),this.words=Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var i=0,o,d;for(r=n.length-6,o=0;r>=a;r-=6)d=s(n,r,r+6),this.words[o]|=67108863&d<<i,this.words[o+1]|=4194303&d>>>26-i,i+=24,26<=i&&(i-=26,o++);r+6!==a&&(d=s(n,a,r+6),this.words[o]|=67108863&d<<i,this.words[o+1]|=4194303&d>>>26-i),this.strip()},d.prototype._parseBase=function t(n,a,r){this.words=[0],this.length=1;for(var o=0,s=1;67108863>=s;s*=a)o++;o--,s=0|s/a;for(var d=n.length-r,c=d%o,u=_Mathmin(d,d-c)+r,f=0,m=r;m<u;m+=o)f=l(n,m,m+o,a),this.imuln(s),67108864>this.words[0]+f?this.words[0]+=f:this._iaddn(f);if(0!=c){var i=1;for(f=l(n,m,n.length,a),m=0;m<c;m++)i*=a;this.imuln(i),67108864>this.words[0]+f?this.words[0]+=f:this._iaddn(f)}},d.prototype.copy=function t(n){n.words=Array(this.length);for(var a=0;a<this.length;a++)n.words[a]=this.words[a];n.length=this.length,n.negative=this.negative,n.red=this.red},d.prototype.clone=function t(){var n=new d(null);return this.copy(n),n},d.prototype._expand=function t(n){for(;this.length<n;)this.words[this.length++]=0;return this},d.prototype.strip=function t(){for(;1<this.length&&0===this.words[this.length-1];)this.length--;return this._normSign()},d.prototype._normSign=function t(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},d.prototype.inspect=function t(){return(this.red?'<BN-R: ':'<BN: ')+this.toString(16)+'>'};var k=['','0','00','000','0000','00000','000000','0000000','00000000','000000000','0000000000','00000000000','000000000000','0000000000000','00000000000000','000000000000000','0000000000000000','00000000000000000','000000000000000000','0000000000000000000','00000000000000000000','000000000000000000000','0000000000000000000000','00000000000000000000000','000000000000000000000000','0000000000000000000000000'],C=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],E=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,10000000,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64000000,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,24300000,28629151,33554432,39135393,45435424,52521875,60466176];d.prototype.toString=function t(n,a){n=n||10,a=0|a||1;var s;if(16===n||'hex'===n){s='';for(var d=0,l=0,u=0;u<this.length;u++){var i=this.words[u],f=(16777215&(i<<d|l)).toString(16);l=16777215&i>>>24-d,s=0!=l||u!==this.length-1?k[6-f.length]+f+s:f+s,d+=2,26<=d&&(d-=26,u--)}for(0!=l&&(s=l.toString(16)+s);0!=s.length%a;)s='0'+s;return 0!==this.negative&&(s='-'+s),s}if(n===(0|n)&&2<=n&&36>=n){var m=C[n],h=E[n];s='';var g=this.clone();for(g.negative=0;!g.isZero();){var c=g.modn(h).toString(n);g=g.idivn(h),s=g.isZero()?c+s:k[m-c.length]+c+s}for(this.isZero()&&(s='0'+s);0!=s.length%a;)s='0'+s;return 0!==this.negative&&(s='-'+s),s}o(!1,'Base should be between 2 and 36')},d.prototype.toNumber=function t(){var n=this.words[0];return 2===this.length?n+=67108864*this.words[1]:3===this.length&&1===this.words[2]?n+=4503599627370496+67108864*this.words[1]:2<this.length&&o(!1,'Number can only safely store up to 53 bits'),0===this.negative?n:-n},d.prototype.toJSON=function t(){return this.toString(16)},d.prototype.toBuffer=function t(n,a){return o('undefined'!=typeof _),this.toArrayLike(_,n,a)},d.prototype.toArray=function t(n,a){return this.toArrayLike(Array,n,a)},d.prototype.toArrayLike=function t(n,a,r){var s=this.byteLength(),d=r||_Mathmax(1,s);o(s<=d,'byte array longer than desired length'),o(0<d,'Requested array length <= 0'),this.strip();var l='le'===a,c=new n(d),u=this.clone(),f,m;if(!l){for(m=0;m<d-s;m++)c[m]=0;for(m=0;!u.isZero();m++)f=u.andln(255),u.iushrn(8),c[d-m-1]=f}else{for(m=0;!u.isZero();m++)f=u.andln(255),u.iushrn(8),c[m]=f;for(;m<d;m++)c[m]=0}return c},d.prototype._countBits=_Mathclz?function t(n){return 32-_Mathclz(n)}:function n(a){var i=a,t=0;return 4096<=i&&(t+=13,i>>>=13),64<=i&&(t+=7,i>>>=7),8<=i&&(t+=4,i>>>=4),2<=i&&(t+=2,i>>>=2),t+i},d.prototype._zeroBits=function n(a){if(0===a)return 26;var i=a,t=0;return 0==(8191&i)&&(t+=13,i>>>=13),0==(127&i)&&(t+=7,i>>>=7),0==(15&i)&&(t+=4,i>>>=4),0==(3&i)&&(t+=2,i>>>=2),0==(1&i)&&t++,t},d.prototype.bitLength=function t(){var n=this.words[this.length-1],a=this._countBits(n);return 26*(this.length-1)+a},d.prototype.zeroBits=function t(){if(this.isZero())return 0;for(var n=0,a=0,r;a<this.length&&(r=this._zeroBits(this.words[a]),n+=r,26===r);a++);return n},d.prototype.byteLength=function t(){return _Mathceil(this.bitLength()/8)},d.prototype.toTwos=function t(n){return 0===this.negative?this.clone():this.abs().inotn(n).iaddn(1)},d.prototype.fromTwos=function t(n){return this.testn(n-1)?this.notn(n).iaddn(1).ineg():this.clone()},d.prototype.isNeg=function t(){return 0!==this.negative},d.prototype.neg=function t(){return this.clone().ineg()},d.prototype.ineg=function t(){return this.isZero()||(this.negative^=1),this},d.prototype.iuor=function t(n){for(;this.length<n.length;)this.words[this.length++]=0;for(var a=0;a<n.length;a++)this.words[a]|=n.words[a];return this.strip()},d.prototype.ior=function t(n){return o(0==(this.negative|n.negative)),this.iuor(n)},d.prototype.or=function t(n){return this.length>n.length?this.clone().ior(n):n.clone().ior(this)},d.prototype.uor=function t(n){return this.length>n.length?this.clone().iuor(n):n.clone().iuor(this)},d.prototype.iuand=function t(n){var a;a=this.length>n.length?n:this;for(var r=0;r<a.length;r++)this.words[r]&=n.words[r];return this.length=a.length,this.strip()},d.prototype.iand=function t(n){return o(0==(this.negative|n.negative)),this.iuand(n)},d.prototype.and=function t(n){return this.length>n.length?this.clone().iand(n):n.clone().iand(this)},d.prototype.uand=function t(n){return this.length>n.length?this.clone().iuand(n):n.clone().iuand(this)},d.prototype.iuxor=function t(n){var r,a;this.length>n.length?(r=this,a=n):(r=n,a=this);for(var o=0;o<a.length;o++)this.words[o]=r.words[o]^a.words[o];if(this!==r)for(;o<r.length;o++)this.words[o]=r.words[o];return this.length=r.length,this.strip()},d.prototype.ixor=function t(n){return o(0==(this.negative|n.negative)),this.iuxor(n)},d.prototype.xor=function t(n){return this.length>n.length?this.clone().ixor(n):n.clone().ixor(this)},d.prototype.uxor=function t(n){return this.length>n.length?this.clone().iuxor(n):n.clone().iuxor(this)},d.prototype.inotn=function t(n){o('number'==typeof n&&0<=n);var a=0|_Mathceil(n/26),r=n%26;this._expand(a),0<r&&a--;for(var s=0;s<a;s++)this.words[s]=67108863&~this.words[s];return 0<r&&(this.words[s]=~this.words[s]&67108863>>26-r),this.strip()},d.prototype.notn=function t(n){return this.clone().inotn(n)},d.prototype.setn=function t(n,a){o('number'==typeof n&&0<=n);var r=0|n/26,i=n%26;return this._expand(r+1),a?this.words[r]|=1<<i:this.words[r]&=~(1<<i),this.strip()},d.prototype.iadd=function t(n){var o;if(0!==this.negative&&0===n.negative)return this.negative=0,o=this.isub(n),this.negative^=1,this._normSign();if(0===this.negative&&0!==n.negative)return n.negative=0,o=this.isub(n),n.negative=1,o._normSign();var r,a;this.length>n.length?(r=this,a=n):(r=n,a=this);for(var s=0,d=0;d<a.length;d++)o=(0|r.words[d])+(0|a.words[d])+s,this.words[d]=67108863&o,s=o>>>26;for(;0!=s&&d<r.length;d++)o=(0|r.words[d])+s,this.words[d]=67108863&o,s=o>>>26;if(this.length=r.length,0!=s)this.words[this.length]=s,this.length++;else if(r!==this)for(;d<r.length;d++)this.words[d]=r.words[d];return this},d.prototype.add=function t(n){var a;return 0!==n.negative&&0===this.negative?(n.negative=0,a=this.sub(n),n.negative^=1,a):0===n.negative&&0!==this.negative?(this.negative=0,a=n.sub(this),this.negative=1,a):this.length>n.length?this.clone().iadd(n):n.clone().iadd(this)},d.prototype.isub=function t(n){if(0!==n.negative){n.negative=0;var o=this.iadd(n);return n.negative=1,o._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(n),this.negative=1,this._normSign();var r=this.cmp(n);if(0===r)return this.negative=0,this.length=1,this.words[0]=0,this;var s,a;0<r?(s=this,a=n):(s=n,a=this);for(var d=0,l=0;l<a.length;l++)o=(0|s.words[l])-(0|a.words[l])+d,d=o>>26,this.words[l]=67108863&o;for(;0!=d&&l<s.length;l++)o=(0|s.words[l])+d,d=o>>26,this.words[l]=67108863&o;if(0==d&&l<s.length&&s!==this)for(;l<s.length;l++)this.words[l]=s.words[l];return this.length=_Mathmax(this.length,l),s!==this&&(this.negative=1),this.strip()},d.prototype.sub=function t(n){return this.clone().isub(n)};var T=function t(n,r,i){var s=n.words,a=r.words,d=i.words,o=0,l=0|s[0],c=8191&l,u=l>>>13,f=0|s[1],m=8191&f,h=f>>>13,g=0|s[2],b=8191&g,y=g>>>13,w=0|s[3],v=8191&w,x=w>>>13,_=0|s[4],k=8191&_,C=_>>>13,E=0|s[5],T=8191&E,A=E>>>13,S=0|s[6],I=8191&S,N=S>>>13,j=0|s[7],L=8191&j,R=j>>>13,M=0|s[8],D=8191&M,P=M>>>13,O=0|s[9],B=8191&O,U=O>>>13,F=0|a[0],q=8191&F,z=F>>>13,H=0|a[1],W=8191&H,V=H>>>13,G=0|a[2],J=8191&G,K=G>>>13,X=0|a[3],Y=8191&X,Z=X>>>13,Q=0|a[4],ee=8191&Q,te=Q>>>13,ne=0|a[5],ae=8191&ne,re=ne>>>13,ie=0|a[6],oe=8191&ie,se=ie>>>13,de=0|a[7],le=8191&de,pe=de>>>13,ce=0|a[8],ue=8191&ce,fe=ce>>>13,he=0|a[9],ge=8191&he,be=he>>>13,ye,we,ve;i.negative=n.negative^r.negative,i.length=19,ye=_Mathimul(c,q),we=_Mathimul(c,z),we=0|we+_Mathimul(u,q),ve=_Mathimul(u,z);var xe=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(xe>>>26),xe&=67108863,ye=_Mathimul(m,q),we=_Mathimul(m,z),we=0|we+_Mathimul(h,q),ve=_Mathimul(h,z),ye=0|ye+_Mathimul(c,W),we=0|we+_Mathimul(c,V),we=0|we+_Mathimul(u,W),ve=0|ve+_Mathimul(u,V);var _e=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(_e>>>26),_e&=67108863,ye=_Mathimul(b,q),we=_Mathimul(b,z),we=0|we+_Mathimul(y,q),ve=_Mathimul(y,z),ye=0|ye+_Mathimul(m,W),we=0|we+_Mathimul(m,V),we=0|we+_Mathimul(h,W),ve=0|ve+_Mathimul(h,V),ye=0|ye+_Mathimul(c,J),we=0|we+_Mathimul(c,K),we=0|we+_Mathimul(u,J),ve=0|ve+_Mathimul(u,K);var ke=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(ke>>>26),ke&=67108863,ye=_Mathimul(v,q),we=_Mathimul(v,z),we=0|we+_Mathimul(x,q),ve=_Mathimul(x,z),ye=0|ye+_Mathimul(b,W),we=0|we+_Mathimul(b,V),we=0|we+_Mathimul(y,W),ve=0|ve+_Mathimul(y,V),ye=0|ye+_Mathimul(m,J),we=0|we+_Mathimul(m,K),we=0|we+_Mathimul(h,J),ve=0|ve+_Mathimul(h,K),ye=0|ye+_Mathimul(c,Y),we=0|we+_Mathimul(c,Z),we=0|we+_Mathimul(u,Y),ve=0|ve+_Mathimul(u,Z);var Ce=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Ce>>>26),Ce&=67108863,ye=_Mathimul(k,q),we=_Mathimul(k,z),we=0|we+_Mathimul(C,q),ve=_Mathimul(C,z),ye=0|ye+_Mathimul(v,W),we=0|we+_Mathimul(v,V),we=0|we+_Mathimul(x,W),ve=0|ve+_Mathimul(x,V),ye=0|ye+_Mathimul(b,J),we=0|we+_Mathimul(b,K),we=0|we+_Mathimul(y,J),ve=0|ve+_Mathimul(y,K),ye=0|ye+_Mathimul(m,Y),we=0|we+_Mathimul(m,Z),we=0|we+_Mathimul(h,Y),ve=0|ve+_Mathimul(h,Z),ye=0|ye+_Mathimul(c,ee),we=0|we+_Mathimul(c,te),we=0|we+_Mathimul(u,ee),ve=0|ve+_Mathimul(u,te);var Ee=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Ee>>>26),Ee&=67108863,ye=_Mathimul(T,q),we=_Mathimul(T,z),we=0|we+_Mathimul(A,q),ve=_Mathimul(A,z),ye=0|ye+_Mathimul(k,W),we=0|we+_Mathimul(k,V),we=0|we+_Mathimul(C,W),ve=0|ve+_Mathimul(C,V),ye=0|ye+_Mathimul(v,J),we=0|we+_Mathimul(v,K),we=0|we+_Mathimul(x,J),ve=0|ve+_Mathimul(x,K),ye=0|ye+_Mathimul(b,Y),we=0|we+_Mathimul(b,Z),we=0|we+_Mathimul(y,Y),ve=0|ve+_Mathimul(y,Z),ye=0|ye+_Mathimul(m,ee),we=0|we+_Mathimul(m,te),we=0|we+_Mathimul(h,ee),ve=0|ve+_Mathimul(h,te),ye=0|ye+_Mathimul(c,ae),we=0|we+_Mathimul(c,re),we=0|we+_Mathimul(u,ae),ve=0|ve+_Mathimul(u,re);var Te=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Te>>>26),Te&=67108863,ye=_Mathimul(I,q),we=_Mathimul(I,z),we=0|we+_Mathimul(N,q),ve=_Mathimul(N,z),ye=0|ye+_Mathimul(T,W),we=0|we+_Mathimul(T,V),we=0|we+_Mathimul(A,W),ve=0|ve+_Mathimul(A,V),ye=0|ye+_Mathimul(k,J),we=0|we+_Mathimul(k,K),we=0|we+_Mathimul(C,J),ve=0|ve+_Mathimul(C,K),ye=0|ye+_Mathimul(v,Y),we=0|we+_Mathimul(v,Z),we=0|we+_Mathimul(x,Y),ve=0|ve+_Mathimul(x,Z),ye=0|ye+_Mathimul(b,ee),we=0|we+_Mathimul(b,te),we=0|we+_Mathimul(y,ee),ve=0|ve+_Mathimul(y,te),ye=0|ye+_Mathimul(m,ae),we=0|we+_Mathimul(m,re),we=0|we+_Mathimul(h,ae),ve=0|ve+_Mathimul(h,re),ye=0|ye+_Mathimul(c,oe),we=0|we+_Mathimul(c,se),we=0|we+_Mathimul(u,oe),ve=0|ve+_Mathimul(u,se);var Ae=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Ae>>>26),Ae&=67108863,ye=_Mathimul(L,q),we=_Mathimul(L,z),we=0|we+_Mathimul(R,q),ve=_Mathimul(R,z),ye=0|ye+_Mathimul(I,W),we=0|we+_Mathimul(I,V),we=0|we+_Mathimul(N,W),ve=0|ve+_Mathimul(N,V),ye=0|ye+_Mathimul(T,J),we=0|we+_Mathimul(T,K),we=0|we+_Mathimul(A,J),ve=0|ve+_Mathimul(A,K),ye=0|ye+_Mathimul(k,Y),we=0|we+_Mathimul(k,Z),we=0|we+_Mathimul(C,Y),ve=0|ve+_Mathimul(C,Z),ye=0|ye+_Mathimul(v,ee),we=0|we+_Mathimul(v,te),we=0|we+_Mathimul(x,ee),ve=0|ve+_Mathimul(x,te),ye=0|ye+_Mathimul(b,ae),we=0|we+_Mathimul(b,re),we=0|we+_Mathimul(y,ae),ve=0|ve+_Mathimul(y,re),ye=0|ye+_Mathimul(m,oe),we=0|we+_Mathimul(m,se),we=0|we+_Mathimul(h,oe),ve=0|ve+_Mathimul(h,se),ye=0|ye+_Mathimul(c,le),we=0|we+_Mathimul(c,pe),we=0|we+_Mathimul(u,le),ve=0|ve+_Mathimul(u,pe);var Se=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Se>>>26),Se&=67108863,ye=_Mathimul(D,q),we=_Mathimul(D,z),we=0|we+_Mathimul(P,q),ve=_Mathimul(P,z),ye=0|ye+_Mathimul(L,W),we=0|we+_Mathimul(L,V),we=0|we+_Mathimul(R,W),ve=0|ve+_Mathimul(R,V),ye=0|ye+_Mathimul(I,J),we=0|we+_Mathimul(I,K),we=0|we+_Mathimul(N,J),ve=0|ve+_Mathimul(N,K),ye=0|ye+_Mathimul(T,Y),we=0|we+_Mathimul(T,Z),we=0|we+_Mathimul(A,Y),ve=0|ve+_Mathimul(A,Z),ye=0|ye+_Mathimul(k,ee),we=0|we+_Mathimul(k,te),we=0|we+_Mathimul(C,ee),ve=0|ve+_Mathimul(C,te),ye=0|ye+_Mathimul(v,ae),we=0|we+_Mathimul(v,re),we=0|we+_Mathimul(x,ae),ve=0|ve+_Mathimul(x,re),ye=0|ye+_Mathimul(b,oe),we=0|we+_Mathimul(b,se),we=0|we+_Mathimul(y,oe),ve=0|ve+_Mathimul(y,se),ye=0|ye+_Mathimul(m,le),we=0|we+_Mathimul(m,pe),we=0|we+_Mathimul(h,le),ve=0|ve+_Mathimul(h,pe),ye=0|ye+_Mathimul(c,ue),we=0|we+_Mathimul(c,fe),we=0|we+_Mathimul(u,ue),ve=0|ve+_Mathimul(u,fe);var Ie=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Ie>>>26),Ie&=67108863,ye=_Mathimul(B,q),we=_Mathimul(B,z),we=0|we+_Mathimul(U,q),ve=_Mathimul(U,z),ye=0|ye+_Mathimul(D,W),we=0|we+_Mathimul(D,V),we=0|we+_Mathimul(P,W),ve=0|ve+_Mathimul(P,V),ye=0|ye+_Mathimul(L,J),we=0|we+_Mathimul(L,K),we=0|we+_Mathimul(R,J),ve=0|ve+_Mathimul(R,K),ye=0|ye+_Mathimul(I,Y),we=0|we+_Mathimul(I,Z),we=0|we+_Mathimul(N,Y),ve=0|ve+_Mathimul(N,Z),ye=0|ye+_Mathimul(T,ee),we=0|we+_Mathimul(T,te),we=0|we+_Mathimul(A,ee),ve=0|ve+_Mathimul(A,te),ye=0|ye+_Mathimul(k,ae),we=0|we+_Mathimul(k,re),we=0|we+_Mathimul(C,ae),ve=0|ve+_Mathimul(C,re),ye=0|ye+_Mathimul(v,oe),we=0|we+_Mathimul(v,se),we=0|we+_Mathimul(x,oe),ve=0|ve+_Mathimul(x,se),ye=0|ye+_Mathimul(b,le),we=0|we+_Mathimul(b,pe),we=0|we+_Mathimul(y,le),ve=0|ve+_Mathimul(y,pe),ye=0|ye+_Mathimul(m,ue),we=0|we+_Mathimul(m,fe),we=0|we+_Mathimul(h,ue),ve=0|ve+_Mathimul(h,fe),ye=0|ye+_Mathimul(c,ge),we=0|we+_Mathimul(c,be),we=0|we+_Mathimul(u,ge),ve=0|ve+_Mathimul(u,be);var Ne=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Ne>>>26),Ne&=67108863,ye=_Mathimul(B,W),we=_Mathimul(B,V),we=0|we+_Mathimul(U,W),ve=_Mathimul(U,V),ye=0|ye+_Mathimul(D,J),we=0|we+_Mathimul(D,K),we=0|we+_Mathimul(P,J),ve=0|ve+_Mathimul(P,K),ye=0|ye+_Mathimul(L,Y),we=0|we+_Mathimul(L,Z),we=0|we+_Mathimul(R,Y),ve=0|ve+_Mathimul(R,Z),ye=0|ye+_Mathimul(I,ee),we=0|we+_Mathimul(I,te),we=0|we+_Mathimul(N,ee),ve=0|ve+_Mathimul(N,te),ye=0|ye+_Mathimul(T,ae),we=0|we+_Mathimul(T,re),we=0|we+_Mathimul(A,ae),ve=0|ve+_Mathimul(A,re),ye=0|ye+_Mathimul(k,oe),we=0|we+_Mathimul(k,se),we=0|we+_Mathimul(C,oe),ve=0|ve+_Mathimul(C,se),ye=0|ye+_Mathimul(v,le),we=0|we+_Mathimul(v,pe),we=0|we+_Mathimul(x,le),ve=0|ve+_Mathimul(x,pe),ye=0|ye+_Mathimul(b,ue),we=0|we+_Mathimul(b,fe),we=0|we+_Mathimul(y,ue),ve=0|ve+_Mathimul(y,fe),ye=0|ye+_Mathimul(m,ge),we=0|we+_Mathimul(m,be),we=0|we+_Mathimul(h,ge),ve=0|ve+_Mathimul(h,be);var je=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(je>>>26),je&=67108863,ye=_Mathimul(B,J),we=_Mathimul(B,K),we=0|we+_Mathimul(U,J),ve=_Mathimul(U,K),ye=0|ye+_Mathimul(D,Y),we=0|we+_Mathimul(D,Z),we=0|we+_Mathimul(P,Y),ve=0|ve+_Mathimul(P,Z),ye=0|ye+_Mathimul(L,ee),we=0|we+_Mathimul(L,te),we=0|we+_Mathimul(R,ee),ve=0|ve+_Mathimul(R,te),ye=0|ye+_Mathimul(I,ae),we=0|we+_Mathimul(I,re),we=0|we+_Mathimul(N,ae),ve=0|ve+_Mathimul(N,re),ye=0|ye+_Mathimul(T,oe),we=0|we+_Mathimul(T,se),we=0|we+_Mathimul(A,oe),ve=0|ve+_Mathimul(A,se),ye=0|ye+_Mathimul(k,le),we=0|we+_Mathimul(k,pe),we=0|we+_Mathimul(C,le),ve=0|ve+_Mathimul(C,pe),ye=0|ye+_Mathimul(v,ue),we=0|we+_Mathimul(v,fe),we=0|we+_Mathimul(x,ue),ve=0|ve+_Mathimul(x,fe),ye=0|ye+_Mathimul(b,ge),we=0|we+_Mathimul(b,be),we=0|we+_Mathimul(y,ge),ve=0|ve+_Mathimul(y,be);var Le=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Le>>>26),Le&=67108863,ye=_Mathimul(B,Y),we=_Mathimul(B,Z),we=0|we+_Mathimul(U,Y),ve=_Mathimul(U,Z),ye=0|ye+_Mathimul(D,ee),we=0|we+_Mathimul(D,te),we=0|we+_Mathimul(P,ee),ve=0|ve+_Mathimul(P,te),ye=0|ye+_Mathimul(L,ae),we=0|we+_Mathimul(L,re),we=0|we+_Mathimul(R,ae),ve=0|ve+_Mathimul(R,re),ye=0|ye+_Mathimul(I,oe),we=0|we+_Mathimul(I,se),we=0|we+_Mathimul(N,oe),ve=0|ve+_Mathimul(N,se),ye=0|ye+_Mathimul(T,le),we=0|we+_Mathimul(T,pe),we=0|we+_Mathimul(A,le),ve=0|ve+_Mathimul(A,pe),ye=0|ye+_Mathimul(k,ue),we=0|we+_Mathimul(k,fe),we=0|we+_Mathimul(C,ue),ve=0|ve+_Mathimul(C,fe),ye=0|ye+_Mathimul(v,ge),we=0|we+_Mathimul(v,be),we=0|we+_Mathimul(x,ge),ve=0|ve+_Mathimul(x,be);var Re=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Re>>>26),Re&=67108863,ye=_Mathimul(B,ee),we=_Mathimul(B,te),we=0|we+_Mathimul(U,ee),ve=_Mathimul(U,te),ye=0|ye+_Mathimul(D,ae),we=0|we+_Mathimul(D,re),we=0|we+_Mathimul(P,ae),ve=0|ve+_Mathimul(P,re),ye=0|ye+_Mathimul(L,oe),we=0|we+_Mathimul(L,se),we=0|we+_Mathimul(R,oe),ve=0|ve+_Mathimul(R,se),ye=0|ye+_Mathimul(I,le),we=0|we+_Mathimul(I,pe),we=0|we+_Mathimul(N,le),ve=0|ve+_Mathimul(N,pe),ye=0|ye+_Mathimul(T,ue),we=0|we+_Mathimul(T,fe),we=0|we+_Mathimul(A,ue),ve=0|ve+_Mathimul(A,fe),ye=0|ye+_Mathimul(k,ge),we=0|we+_Mathimul(k,be),we=0|we+_Mathimul(C,ge),ve=0|ve+_Mathimul(C,be);var Me=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Me>>>26),Me&=67108863,ye=_Mathimul(B,ae),we=_Mathimul(B,re),we=0|we+_Mathimul(U,ae),ve=_Mathimul(U,re),ye=0|ye+_Mathimul(D,oe),we=0|we+_Mathimul(D,se),we=0|we+_Mathimul(P,oe),ve=0|ve+_Mathimul(P,se),ye=0|ye+_Mathimul(L,le),we=0|we+_Mathimul(L,pe),we=0|we+_Mathimul(R,le),ve=0|ve+_Mathimul(R,pe),ye=0|ye+_Mathimul(I,ue),we=0|we+_Mathimul(I,fe),we=0|we+_Mathimul(N,ue),ve=0|ve+_Mathimul(N,fe),ye=0|ye+_Mathimul(T,ge),we=0|we+_Mathimul(T,be),we=0|we+_Mathimul(A,ge),ve=0|ve+_Mathimul(A,be);var De=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(De>>>26),De&=67108863,ye=_Mathimul(B,oe),we=_Mathimul(B,se),we=0|we+_Mathimul(U,oe),ve=_Mathimul(U,se),ye=0|ye+_Mathimul(D,le),we=0|we+_Mathimul(D,pe),we=0|we+_Mathimul(P,le),ve=0|ve+_Mathimul(P,pe),ye=0|ye+_Mathimul(L,ue),we=0|we+_Mathimul(L,fe),we=0|we+_Mathimul(R,ue),ve=0|ve+_Mathimul(R,fe),ye=0|ye+_Mathimul(I,ge),we=0|we+_Mathimul(I,be),we=0|we+_Mathimul(N,ge),ve=0|ve+_Mathimul(N,be);var Pe=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Pe>>>26),Pe&=67108863,ye=_Mathimul(B,le),we=_Mathimul(B,pe),we=0|we+_Mathimul(U,le),ve=_Mathimul(U,pe),ye=0|ye+_Mathimul(D,ue),we=0|we+_Mathimul(D,fe),we=0|we+_Mathimul(P,ue),ve=0|ve+_Mathimul(P,fe),ye=0|ye+_Mathimul(L,ge),we=0|we+_Mathimul(L,be),we=0|we+_Mathimul(R,ge),ve=0|ve+_Mathimul(R,be);var Oe=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Oe>>>26),Oe&=67108863,ye=_Mathimul(B,ue),we=_Mathimul(B,fe),we=0|we+_Mathimul(U,ue),ve=_Mathimul(U,fe),ye=0|ye+_Mathimul(D,ge),we=0|we+_Mathimul(D,be),we=0|we+_Mathimul(P,ge),ve=0|ve+_Mathimul(P,be);var Be=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Be>>>26),Be&=67108863,ye=_Mathimul(B,ge),we=_Mathimul(B,be),we=0|we+_Mathimul(U,ge),ve=_Mathimul(U,be);var Ue=0|(0|o+ye)+((8191&we)<<13);return o=0|(0|ve+(we>>>13))+(Ue>>>26),Ue&=67108863,d[0]=xe,d[1]=_e,d[2]=ke,d[3]=Ce,d[4]=Ee,d[5]=Te,d[6]=Ae,d[7]=Se,d[8]=Ie,d[9]=Ne,d[10]=je,d[11]=Le,d[12]=Re,d[13]=Me,d[14]=De,d[15]=Pe,d[16]=Oe,d[17]=Be,d[18]=Ue,0!=o&&(d[19]=o,i.length++),i};_Mathimul||(T=i),d.prototype.mulTo=function t(n,a){var r=this.length+n.length,o;return o=10===this.length&&10===n.length?T(this,n,a):63>r?i(this,n,a):1024>r?u(this,n,a):f(this,n,a),o},m.prototype.makeRBT=function n(a){for(var r=Array(a),t=d.prototype._countBits(a)-1,o=0;o<a;o++)r[o]=this.revBin(o,t,a);return r},m.prototype.revBin=function t(n,a,r){if(0===n||n===r-1)return n;for(var o=0,s=0;s<a;s++)o|=(1&n)<<a-s-1,n>>=1;return o},m.prototype.permute=function t(n,a,r,o,s,d){for(var l=0;l<d;l++)o[l]=a[n[l]],s[l]=r[n[l]]},m.prototype.transform=function t(n,a,r,i,o,d){this.permute(d,n,a,r,i,o);for(var c=1;c<o;c<<=1)for(var s=c<<1,l=_Mathcos(2*_MathPI/s),u=_Mathsin(2*_MathPI/s),f=0;f<o;f+=s)for(var m=l,h=u,g=0;g<c;g++){var b=r[f+g],y=i[f+g],w=r[f+g+c],v=i[f+g+c],x=m*w-h*v;v=m*v+h*w,w=x,r[f+g]=b+w,i[f+g]=y+v,r[f+g+c]=b-w,i[f+g+c]=y-v,g!==s&&(x=l*m-u*h,h=l*h+u*m,m=x)}},m.prototype.guessLen13b=function t(a,n){var r=1|_Mathmax(n,a),o=1&r,s=0;for(r=0|r/2;r;r>>>=1)s++;return 1<<s+1+o},m.prototype.conjugate=function n(a,r,o){if(!(1>=o))for(var s=0,i;s<o/2;s++)i=a[s],a[s]=a[o-s-1],a[o-s-1]=i,i=r[s],r[s]=-r[o-s-1],r[o-s-1]=-i},m.prototype.normalize13b=function t(n,a){for(var r=0,o=0,i;o<a/2;o++)i=8192*_Mathround(n[2*o+1]/a)+_Mathround(n[2*o]/a)+r,n[o]=67108863&i,r=67108864>i?0:0|i/67108864;return n},m.prototype.convert13b=function t(n,a,r,s){for(var d=0,l=0;l<a;l++)d+=0|n[l],r[2*l]=8191&d,d>>>=13,r[2*l+1]=8191&d,d>>>=13;for(l=2*a;l<s;++l)r[l]=0;o(0==d),o(0==(-8192&d))},m.prototype.stub=function t(n){for(var a=Array(n),r=0;r<n;r++)a[r]=0;return a},m.prototype.mulp=function t(n,a,r){var o=2*this.guessLen13b(n.length,a.length),s=this.makeRBT(o),d=this.stub(o),l=Array(o),c=Array(o),u=Array(o),f=Array(o),m=Array(o),h=Array(o),g=r.words;g.length=o,this.convert13b(n.words,n.length,l,o),this.convert13b(a.words,a.length,f,o),this.transform(l,d,c,u,o,s),this.transform(f,d,m,h,o,s);for(var b=0,i;b<o;b++)i=c[b]*m[b]-u[b]*h[b],u[b]=c[b]*h[b]+u[b]*m[b],c[b]=i;return this.conjugate(c,u,o),this.transform(c,u,g,d,o,s),this.conjugate(g,d,o),this.normalize13b(g,o),r.negative=n.negative^a.negative,r.length=n.length+a.length,r.strip()},d.prototype.mul=function t(n){var a=new d(null);return a.words=Array(this.length+n.length),this.mulTo(n,a)},d.prototype.mulf=function t(n){var a=new d(null);return a.words=Array(this.length+n.length),f(this,n,a)},d.prototype.imul=function t(n){return this.clone().mulTo(n,this)},d.prototype.imuln=function t(n){o('number'==typeof n),o(67108864>n);for(var a=0,r=0;r<this.length;r++){var i=(0|this.words[r])*n,s=(67108863&i)+(67108863&a);a>>=26,a+=0|i/67108864,a+=s>>>26,this.words[r]=67108863&s}return 0!=a&&(this.words[r]=a,this.length++),this},d.prototype.muln=function t(n){return this.clone().imuln(n)},d.prototype.sqr=function t(){return this.mul(this)},d.prototype.isqr=function t(){return this.imul(this.clone())},d.prototype.pow=function t(n){var a=c(n);if(0===a.length)return new d(1);for(var r=this,o=0;o<a.length&&!(0!==a[o]);o++,r=r.sqr());if(++o<a.length)for(var i=r.sqr();o<a.length;o++,i=i.sqr())0!==a[o]&&(r=r.mul(i));return r},d.prototype.iushln=function t(n){o('number'==typeof n&&0<=n);var a=n%26,r=(n-a)/26,s=67108863>>>26-a<<26-a,d;if(0!=a){var i=0;for(d=0;d<this.length;d++){var l=this.words[d]&s,u=(0|this.words[d])-l<<a;this.words[d]=u|i,i=l>>>26-a}i&&(this.words[d]=i,this.length++)}if(0!=r){for(d=this.length-1;0<=d;d--)this.words[d+r]=this.words[d];for(d=0;d<r;d++)this.words[d]=0;this.length+=r}return this.strip()},d.prototype.ishln=function t(n){return o(0===this.negative),this.iushln(n)},d.prototype.iushrn=function t(n,a,d){o('number'==typeof n&&0<=n);var l;l=a?(a-a%26)/26:0;var c=n%26,r=_Mathmin((n-c)/26,this.length),s=67108863^67108863>>>c<<c,u=d;if(l-=r,l=_Mathmax(0,l),u){for(var f=0;f<r;f++)u.words[f]=this.words[f];u.length=r}if(0===r);else if(this.length>r)for(this.length-=r,f=0;f<this.length;f++)this.words[f]=this.words[f+r];else this.words[0]=0,this.length=1;var i=0;for(f=this.length-1;0<=f&&(0!=i||f>=l);f--){var m=0|this.words[f];this.words[f]=i<<26-c|m>>>c,i=m&s}return u&&0!=i&&(u.words[u.length++]=i),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},d.prototype.ishrn=function t(n,a,r){return o(0===this.negative),this.iushrn(n,a,r)},d.prototype.shln=function t(n){return this.clone().ishln(n)},d.prototype.ushln=function t(n){return this.clone().iushln(n)},d.prototype.shrn=function t(n){return this.clone().ishrn(n)},d.prototype.ushrn=function t(n){return this.clone().iushrn(n)},d.prototype.testn=function t(n){o('number'==typeof n&&0<=n);var a=n%26,r=(n-a)/26,i=1<<a;if(this.length<=r)return!1;var s=this.words[r];return!!(s&i)},d.prototype.imaskn=function t(n){o('number'==typeof n&&0<=n);var a=n%26,r=(n-a)/26;if(o(0===this.negative,'imaskn works only with positive numbers'),this.length<=r)return this;if(0!=a&&r++,this.length=_Mathmin(r,this.length),0!=a){var i=67108863^67108863>>>a<<a;this.words[this.length-1]&=i}return this.strip()},d.prototype.maskn=function t(n){return this.clone().imaskn(n)},d.prototype.iaddn=function t(n){return o('number'==typeof n),o(67108864>n),0>n?this.isubn(-n):0===this.negative?this._iaddn(n):1===this.length&&(0|this.words[0])<n?(this.words[0]=n-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(n),this.negative=1,this)},d.prototype._iaddn=function t(n){this.words[0]+=n;for(var a=0;a<this.length&&67108864<=this.words[a];a++)this.words[a]-=67108864,a===this.length-1?this.words[a+1]=1:this.words[a+1]++;return this.length=_Mathmax(this.length,a+1),this},d.prototype.isubn=function t(n){if(o('number'==typeof n),o(67108864>n),0>n)return this.iaddn(-n);if(0!==this.negative)return this.negative=0,this.iaddn(n),this.negative=1,this;if(this.words[0]-=n,1===this.length&&0>this.words[0])this.words[0]=-this.words[0],this.negative=1;else for(var a=0;a<this.length&&0>this.words[a];a++)this.words[a]+=67108864,this.words[a+1]-=1;return this.strip()},d.prototype.addn=function t(n){return this.clone().iaddn(n)},d.prototype.subn=function t(n){return this.clone().isubn(n)},d.prototype.iabs=function t(){return this.negative=0,this},d.prototype.abs=function t(){return this.clone().iabs()},d.prototype._ishlnsubmul=function t(n,a,r){var s=n.length+r,d;this._expand(s);var i=0,l;for(d=0;d<n.length;d++){l=(0|this.words[d+r])+i;var c=(0|n.words[d])*a;l-=67108863&c,i=(l>>26)-(0|c/67108864),this.words[d+r]=67108863&l}for(;d<this.length-r;d++)l=(0|this.words[d+r])+i,i=l>>26,this.words[d+r]=67108863&l;if(0==i)return this.strip();for(o(-1==i),i=0,d=0;d<this.length;d++)l=-(0|this.words[d])+i,i=l>>26,this.words[d]=67108863&l;return this.negative=1,this.strip()},d.prototype._wordDiv=function t(n,r){var o=this.length-n.length,s=this.clone(),l=n,c=0|l.words[l.length-1],u=this._countBits(c);o=26-u,0!=o&&(l=l.ushln(o),s.iushln(o),c=0|l.words[l.length-1]);var f=s.length-l.length,m;if('mod'!==r){m=new d(null),m.length=f+1,m.words=Array(m.length);for(var h=0;h<m.length;h++)m.words[h]=0}var i=s.clone()._ishlnsubmul(l,1,f);0===i.negative&&(s=i,m&&(m.words[f]=1));for(var g=f-1,b;0<=g;g--){for(b=67108864*(0|s.words[l.length+g])+(0|s.words[l.length+g-1]),b=_Mathmin(0|b/c,67108863),s._ishlnsubmul(l,b,g);0!==s.negative;)b--,s.negative=0,s._ishlnsubmul(l,1,g),s.isZero()||(s.negative^=1);m&&(m.words[g]=b)}return m&&m.strip(),s.strip(),'div'!==r&&0!=o&&s.iushrn(o),{div:m||null,mod:s}},d.prototype.divmod=function t(n,a,r){if(o(!n.isZero()),this.isZero())return{div:new d(0),mod:new d(0)};var i,s,l;return 0!==this.negative&&0===n.negative?(l=this.neg().divmod(n,a),'mod'!==a&&(i=l.div.neg()),'div'!==a&&(s=l.mod.neg(),r&&0!==s.negative&&s.iadd(n)),{div:i,mod:s}):0===this.negative&&0!==n.negative?(l=this.divmod(n.neg(),a),'mod'!==a&&(i=l.div.neg()),{div:i,mod:l.mod}):0==(this.negative&n.negative)?n.length>this.length||0>this.cmp(n)?{div:new d(0),mod:this}:1===n.length?'div'===a?{div:this.divn(n.words[0]),mod:null}:'mod'===a?{div:null,mod:new d(this.modn(n.words[0]))}:{div:this.divn(n.words[0]),mod:new d(this.modn(n.words[0]))}:this._wordDiv(n,a):(l=this.neg().divmod(n.neg(),a),'div'!==a&&(s=l.mod.neg(),r&&0!==s.negative&&s.isub(n)),{div:l.div,mod:s})},d.prototype.div=function t(n){return this.divmod(n,'div',!1).div},d.prototype.mod=function t(n){return this.divmod(n,'mod',!1).mod},d.prototype.umod=function t(n){return this.divmod(n,'mod',!0).mod},d.prototype.divRound=function t(n){var a=this.divmod(n);if(a.mod.isZero())return a.div;var r=0===a.div.negative?a.mod:a.mod.isub(n),i=n.ushrn(1),o=n.andln(1),s=r.cmp(i);return 0>s||1===o&&0===s?a.div:0===a.div.negative?a.div.iaddn(1):a.div.isubn(1)},d.prototype.modn=function t(n){o(67108863>=n);for(var a=67108864%n,r=0,s=this.length-1;0<=s;s--)r=(a*r+(0|this.words[s]))%n;return r},d.prototype.idivn=function t(n){o(67108863>=n);for(var a=0,r=this.length-1,i;0<=r;r--)i=(0|this.words[r])+67108864*a,this.words[r]=0|i/n,a=i%n;return this.strip()},d.prototype.divn=function t(n){return this.clone().idivn(n)},d.prototype.egcd=function t(n){o(0===n.negative),o(!n.isZero());var a=this,r=n.clone();a=0===a.negative?a.clone():a.umod(n);for(var s=new d(1),l=new d(0),c=new d(0),u=new d(1),f=0;a.isEven()&&r.isEven();)a.iushrn(1),r.iushrn(1),++f;for(var m=r.clone(),h=a.clone();!a.isZero();){for(var g=0,i=1;0==(a.words[0]&i)&&26>g;++g,i<<=1);if(0<g)for(a.iushrn(g);0<g--;)(s.isOdd()||l.isOdd())&&(s.iadd(m),l.isub(h)),s.iushrn(1),l.iushrn(1);for(var b=0,y=1;0==(r.words[0]&y)&&26>b;++b,y<<=1);if(0<b)for(r.iushrn(b);0<b--;)(c.isOdd()||u.isOdd())&&(c.iadd(m),u.isub(h)),c.iushrn(1),u.iushrn(1);0<=a.cmp(r)?(a.isub(r),s.isub(c),l.isub(u)):(r.isub(a),c.isub(s),u.isub(l))}return{a:c,b:u,gcd:r.iushln(f)}},d.prototype._invmp=function t(n){o(0===n.negative),o(!n.isZero());var r=this,a=n.clone();r=0===r.negative?r.clone():r.umod(n);for(var s=new d(1),l=new d(0),c=a.clone();0<r.cmpn(1)&&0<a.cmpn(1);){for(var u=0,i=1;0==(r.words[0]&i)&&26>u;++u,i<<=1);if(0<u)for(r.iushrn(u);0<u--;)s.isOdd()&&s.iadd(c),s.iushrn(1);for(var f=0,m=1;0==(a.words[0]&m)&&26>f;++f,m<<=1);if(0<f)for(a.iushrn(f);0<f--;)l.isOdd()&&l.iadd(c),l.iushrn(1);0<=r.cmp(a)?(r.isub(a),s.isub(l)):(a.isub(r),l.isub(s))}var h;return h=0===r.cmpn(1)?s:l,0>h.cmpn(0)&&h.iadd(n),h},d.prototype.gcd=function n(i){if(this.isZero())return i.abs();if(i.isZero())return this.abs();var o=this.clone(),a=i.clone();o.negative=0,a.negative=0;for(var s=0;o.isEven()&&a.isEven();s++)o.iushrn(1),a.iushrn(1);do{for(;o.isEven();)o.iushrn(1);for(;a.isEven();)a.iushrn(1);var d=o.cmp(a);if(0>d){var r=o;o=a,a=r}else if(0===d||0===a.cmpn(1))break;o.isub(a)}while(!0);return a.iushln(s)},d.prototype.invm=function t(n){return this.egcd(n).a.umod(n)},d.prototype.isEven=function t(){return 0==(1&this.words[0])},d.prototype.isOdd=function t(){return 1==(1&this.words[0])},d.prototype.andln=function t(n){return this.words[0]&n},d.prototype.bincn=function t(n){o('number'==typeof n);var a=n%26,r=(n-a)/26,s=1<<a;if(this.length<=r)return this._expand(r+1),this.words[r]|=s,this;for(var d=s,l=r,i;0!=d&&l<this.length;l++)i=0|this.words[l],i+=d,d=i>>>26,i&=67108863,this.words[l]=i;return 0!=d&&(this.words[l]=d,this.length++),this},d.prototype.isZero=function t(){return 1===this.length&&0===this.words[0]},d.prototype.cmpn=function t(n){var a=0>n;if(0!==this.negative&&!a)return-1;if(0===this.negative&&a)return 1;this.strip();var r;if(1<this.length)r=1;else{a&&(n=-n),o(67108863>=n,'Number is too big');var i=0|this.words[0];r=i===n?0:i<n?-1:1}return 0===this.negative?r:0|-r},d.prototype.cmp=function t(n){if(0!==this.negative&&0===n.negative)return-1;if(0===this.negative&&0!==n.negative)return 1;var a=this.ucmp(n);return 0===this.negative?a:0|-a},d.prototype.ucmp=function t(n){if(this.length>n.length)return 1;if(this.length<n.length)return-1;for(var r=0,o=this.length-1;0<=o;o--){var i=0|this.words[o],a=0|n.words[o];if(i!=a){i<a?r=-1:i>a&&(r=1);break}}return r},d.prototype.gtn=function t(n){return 1===this.cmpn(n)},d.prototype.gt=function t(n){return 1===this.cmp(n)},d.prototype.gten=function t(n){return 0<=this.cmpn(n)},d.prototype.gte=function t(n){return 0<=this.cmp(n)},d.prototype.ltn=function t(n){return-1===this.cmpn(n)},d.prototype.lt=function t(n){return-1===this.cmp(n)},d.prototype.lten=function t(n){return 0>=this.cmpn(n)},d.prototype.lte=function t(n){return 0>=this.cmp(n)},d.prototype.eqn=function t(n){return 0===this.cmpn(n)},d.prototype.eq=function t(n){return 0===this.cmp(n)},d.red=function t(n){return new v(n)},d.prototype.toRed=function t(n){return o(!this.red,'Already a number in reduction context'),o(0===this.negative,'red works only with positives'),n.convertTo(this)._forceRed(n)},d.prototype.fromRed=function t(){return o(this.red,'fromRed works only with numbers in reduction context'),this.red.convertFrom(this)},d.prototype._forceRed=function t(n){return this.red=n,this},d.prototype.forceRed=function t(n){return o(!this.red,'Already a number in reduction context'),this._forceRed(n)},d.prototype.redAdd=function t(n){return o(this.red,'redAdd works only with red numbers'),this.red.add(this,n)},d.prototype.redIAdd=function t(n){return o(this.red,'redIAdd works only with red numbers'),this.red.iadd(this,n)},d.prototype.redSub=function t(n){return o(this.red,'redSub works only with red numbers'),this.red.sub(this,n)},d.prototype.redISub=function t(n){return o(this.red,'redISub works only with red numbers'),this.red.isub(this,n)},d.prototype.redShl=function t(n){return o(this.red,'redShl works only with red numbers'),this.red.shl(this,n)},d.prototype.redMul=function t(n){return o(this.red,'redMul works only with red numbers'),this.red._verify2(this,n),this.red.mul(this,n)},d.prototype.redIMul=function t(n){return o(this.red,'redMul works only with red numbers'),this.red._verify2(this,n),this.red.imul(this,n)},d.prototype.redSqr=function t(){return o(this.red,'redSqr works only with red numbers'),this.red._verify1(this),this.red.sqr(this)},d.prototype.redISqr=function t(){return o(this.red,'redISqr works only with red numbers'),this.red._verify1(this),this.red.isqr(this)},d.prototype.redSqrt=function t(){return o(this.red,'redSqrt works only with red numbers'),this.red._verify1(this),this.red.sqrt(this)},d.prototype.redInvm=function t(){return o(this.red,'redInvm works only with red numbers'),this.red._verify1(this),this.red.invm(this)},d.prototype.redNeg=function t(){return o(this.red,'redNeg works only with red numbers'),this.red._verify1(this),this.red.neg(this)},d.prototype.redPow=function t(n){return o(this.red&&!n.red,'redPow(normalNum)'),this.red._verify1(this),this.red.pow(this,n)};var A={k256:null,p224:null,p192:null,p25519:null};h.prototype._tmp=function t(){var n=new d(null);return n.words=Array(_Mathceil(this.n/13)),n},h.prototype.ireduce=function t(n){var a=n,r;do this.split(a,this.tmp),a=this.imulK(a),a=a.iadd(this.tmp),r=a.bitLength();while(r>this.n);var i=r<this.n?-1:a.ucmp(this.p);return 0===i?(a.words[0]=0,a.length=1):0<i?a.isub(this.p):a.strip(),a},h.prototype.split=function t(n,a){n.iushrn(this.n,0,a)},h.prototype.imulK=function t(n){return n.imul(this.k)},r(g,h),g.prototype.split=function t(n,a){for(var r=4194303,o=_Mathmin(n.length,9),s=0;s<o;s++)a.words[s]=n.words[s];if(a.length=o,9>=n.length)return n.words[0]=0,void(n.length=1);var i=n.words[9];for(a.words[a.length++]=i&r,s=10;s<n.length;s++){var d=0|n.words[s];n.words[s-10]=(d&r)<<4|i>>>22,i=d}i>>>=22,n.words[s-10]=i,n.length-=0===i&&10<n.length?10:9},g.prototype.imulK=function t(n){n.words[n.length]=0,n.words[n.length+1]=0,n.length+=2;for(var a=0,r=0,i;r<n.length;r++)i=0|n.words[r],a+=977*i,n.words[r]=67108863&a,a=64*i+(0|a/67108864);return 0===n.words[n.length-1]&&(n.length--,0===n.words[n.length-1]&&n.length--),n},r(b,h),r(y,h),r(w,h),w.prototype.imulK=function t(n){for(var a=0,r=0;r<n.length;r++){var i=19*(0|n.words[r])+a,o=67108863&i;i>>>=26,n.words[r]=o,a=i}return 0!=a&&(n.words[n.length++]=a),n},d._prime=function t(n){if(A[n])return A[n];var t;if('k256'===n)t=new g;else if('p224'===n)t=new b;else if('p192'===n)t=new y;else if('p25519'===n)t=new w;else throw new Error('Unknown prime '+n);return A[n]=t,t},v.prototype._verify1=function t(n){o(0===n.negative,'red works only with positives'),o(n.red,'red works only with red numbers')},v.prototype._verify2=function t(n,a){o(0==(n.negative|a.negative),'red works only with positives'),o(n.red&&n.red===a.red,'red works only with red numbers')},v.prototype.imod=function t(n){return this.prime?this.prime.ireduce(n)._forceRed(this):n.umod(this.m)._forceRed(this)},v.prototype.neg=function t(n){return n.isZero()?n.clone():this.m.sub(n)._forceRed(this)},v.prototype.add=function t(n,a){this._verify2(n,a);var r=n.add(a);return 0<=r.cmp(this.m)&&r.isub(this.m),r._forceRed(this)},v.prototype.iadd=function t(n,a){this._verify2(n,a);var r=n.iadd(a);return 0<=r.cmp(this.m)&&r.isub(this.m),r},v.prototype.sub=function t(n,a){this._verify2(n,a);var r=n.sub(a);return 0>r.cmpn(0)&&r.iadd(this.m),r._forceRed(this)},v.prototype.isub=function t(n,a){this._verify2(n,a);var r=n.isub(a);return 0>r.cmpn(0)&&r.iadd(this.m),r},v.prototype.shl=function t(n,a){return this._verify1(n),this.imod(n.ushln(a))},v.prototype.imul=function t(n,a){return this._verify2(n,a),this.imod(n.imul(a))},v.prototype.mul=function t(n,a){return this._verify2(n,a),this.imod(n.mul(a))},v.prototype.isqr=function t(n){return this.imul(n,n.clone())},v.prototype.sqr=function t(n){return this.mul(n,n)},v.prototype.sqrt=function n(l){if(l.isZero())return l.clone();var a=this.m.andln(3);if(o(1==a%2),3===a){var u=this.m.add(new d(1)).iushrn(2);return this.pow(l,u)}for(var f=this.m.subn(1),h=0;!f.isZero()&&0===f.andln(1);)h++,f.iushrn(1);o(!f.isZero());var s=new d(1).toRed(this),g=s.redNeg(),y=this.m.subn(1).iushrn(1),w=this.m.bitLength();for(w=new d(2*w*w).toRed(this);0!==this.pow(w,y).cmp(g);)w.redIAdd(g);for(var v=this.pow(w,f),c=this.pow(l,f.addn(1).iushrn(1)),r=this.pow(l,f),t=h;0!==r.cmp(s);){for(var m=r,x=0;0!==m.cmp(s);x++)m=m.redSqr();o(x<t);var i=this.pow(v,new d(1).iushln(t-x-1));c=c.redMul(i),v=i.redSqr(),r=r.redMul(v),t=x}return c},v.prototype.invm=function t(n){var a=n._invmp(this.m);return 0===a.negative?this.imod(a):(a.negative=0,this.imod(a).redNeg())},v.prototype.pow=function t(n,a){if(a.isZero())return new d(1).toRed(this);if(0===a.cmpn(1))return n.clone();var r=4,o=Array(1<<r);o[0]=new d(1).toRed(this),o[1]=n;for(var s=2;s<o.length;s++)o[s]=this.mul(o[s-1],n);var i=o[0],l=0,c=0,u=a.bitLength()%26;for(0==u&&(u=26),s=a.length-1;0<=s;s--){for(var f=a.words[s],m=u-1,h;0<=m;m--){if(h=1&f>>m,i!==o[0]&&(i=this.sqr(i)),0==h&&0==l){c=0;continue}l<<=1,l|=h,c++,c!=r&&(0!==s||0!==m)||(i=this.mul(i,o[l]),c=0,l=0)}u=26}return i},v.prototype.convertTo=function t(n){var a=n.umod(this.m);return a===n?a.clone():a},v.prototype.convertFrom=function t(n){var a=n.clone();return a.red=null,a},d.mont=function t(n){return new x(n)},r(x,v),x.prototype.convertTo=function t(n){return this.imod(n.ushln(this.shift))},x.prototype.convertFrom=function t(n){var a=this.imod(n.mul(this.rinv));return a.red=null,a},x.prototype.imul=function n(r,a){if(r.isZero()||a.isZero())return r.words[0]=0,r.length=1,r;var i=r.imul(a),t=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=i.isub(t).iushrn(this.shift),s=o;return 0<=o.cmp(this.m)?s=o.isub(this.m):0>o.cmpn(0)&&(s=o.iadd(this.m)),s._forceRed(this)},x.prototype.mul=function n(r,a){if(r.isZero()||a.isZero())return new d(0)._forceRed(this);var i=r.mul(a),t=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=i.isub(t).iushrn(this.shift),s=o;return 0<=o.cmp(this.m)?s=o.isub(this.m):0>o.cmpn(0)&&(s=o.iadd(this.m)),s._forceRed(this)},x.prototype.invm=function t(n){var a=this.imod(n._invmp(this.m).mul(this.r2));return a._forceRed(this)}})('undefined'==typeof t||t,this)}).call(n,a(9)(t))},function(t,n){},function(t,n,a){function r(t,n){this.name=t,this.body=n,this.decoders={},this.encoders={}}var i=a(69),o=a(0),s=n;s.define=function t(n,a){return new r(n,a)};;r.prototype._createNamed=function t(n){var r;try{r=a(420).runInThisContext('(function '+this.name+'(entity) {\n  this._initNamed(entity);\n})')}catch(t){r=function(t){this._initNamed(t)}}return o(r,n),r.prototype._initNamed=function t(a){n.call(this,a)},new r(this)},r.prototype._getDecoder=function t(n){return n=n||'der',this.decoders.hasOwnProperty(n)||(this.decoders[n]=this._createNamed(i.decoders[n])),this.decoders[n]},r.prototype.decode=function t(n,a,r){return this._getDecoder(a).decode(n,r)},r.prototype._getEncoder=function t(n){return n=n||'der',this.encoders.hasOwnProperty(n)||(this.encoders[n]=this._createNamed(i.encoders[n])),this.encoders[n]},r.prototype.encode=function t(n,a,r){return this._getEncoder(a).encode(n,r)}},function(module,exports,__webpack_require__){function Context(){}var indexOf=__webpack_require__(421),Object_keys=function(t){if(Object.keys)return Object.keys(t);var n=[];for(var a in t)n.push(a);return n},forEach=function(t,n){if(t.forEach)return t.forEach(n);for(var a=0;a<t.length;a++)n(t[a],a,t)},defineProp=function(){try{return Object.defineProperty({},'_',{}),function(t,n,a){Object.defineProperty(t,n,{writable:!0,enumerable:!1,configurable:!0,value:a})}}catch(t){return function(t,n,a){t[n]=a}}}(),globals=['Array','Boolean','Date','Error','EvalError','Function','Infinity','JSON','Math','NaN','Number','Object','RangeError','ReferenceError','RegExp','String','SyntaxError','TypeError','URIError','decodeURI','decodeURIComponent','encodeURI','encodeURIComponent','escape','eval','isFinite','isNaN','parseFloat','parseInt','undefined','unescape'];Context.prototype={};var Script=exports.Script=function t(n){return this instanceof Script?void(this.code=n):new Script(n)};Script.prototype.runInContext=function(t){if(!(t instanceof Context))throw new TypeError('needs a \'context\' argument.');var n=document.createElement('iframe');n.style||(n.style={}),n.style.display='none',document.body.appendChild(n);var a=n.contentWindow,r=a.eval,i=a.execScript;!r&&i&&(i.call(a,'null'),r=a.eval),forEach(Object_keys(t),function(n){a[n]=t[n]}),forEach(globals,function(n){t[n]&&(a[n]=t[n])});var o=Object_keys(a),s=r.call(a,this.code);return forEach(Object_keys(a),function(n){(n in t||-1===indexOf(o,n))&&(t[n]=a[n])}),forEach(globals,function(n){n in t||defineProp(t,n,a[n])}),document.body.removeChild(n),s},Script.prototype.runInThisContext=function(){return eval(this.code)},Script.prototype.runInNewContext=function(t){var n=Script.createContext(t),a=this.runInContext(n);return forEach(Object_keys(n),function(a){t[a]=n[a]}),a},forEach(Object_keys(Script.prototype),function(t){exports[t]=Script[t]=function(n){var a=Script(n);return a[t].apply(a,[].slice.call(arguments,1))}}),exports.createScript=function(t){return exports.Script(t)},exports.createContext=Script.createContext=function(t){var n=new Context;return'object'==typeof t&&forEach(Object_keys(t),function(a){n[a]=t[a]}),n}},function(t,n){var a=[].indexOf;t.exports=function(t,n){if(a)return t.indexOf(n);for(var r=0;r<t.length;++r)if(t[r]===n)return r;return-1}},function(t,n,a){function r(t){this._reporterState={obj:null,path:[],options:t||{},errors:[]}}function i(t,n){this.path=t,this.rethrow(n)}var o=a(0);n.Reporter=r,r.prototype.isError=function t(n){return n instanceof i},r.prototype.save=function t(){var n=this._reporterState;return{obj:n.obj,pathLen:n.path.length}},r.prototype.restore=function t(n){var a=this._reporterState;a.obj=n.obj,a.path=a.path.slice(0,n.pathLen)},r.prototype.enterKey=function t(n){return this._reporterState.path.push(n)},r.prototype.exitKey=function t(n){var a=this._reporterState;a.path=a.path.slice(0,n-1)},r.prototype.leaveKey=function t(n,a,r){var i=this._reporterState;this.exitKey(n),null!==i.obj&&(i.obj[a]=r)},r.prototype.path=function t(){return this._reporterState.path.join('/')},r.prototype.enterObject=function t(){var n=this._reporterState,a=n.obj;return n.obj={},a},r.prototype.leaveObject=function t(n){var a=this._reporterState,r=a.obj;return a.obj=n,r},r.prototype.error=function t(n){var a=this._reporterState,r=n instanceof i,o;if(o=r?n:new i(a.path.map(function(t){return'['+JSON.stringify(t)+']'}).join(''),n.message||n,n.stack),!a.options.partial)throw o;return r||a.errors.push(o),o},r.prototype.wrapResult=function t(n){var a=this._reporterState;return a.options.partial?{result:this.isError(n)?null:n,errors:a.errors}:n};;o(i,Error),i.prototype.rethrow=function t(n){if(this.message=n+' at: '+(this.path||'(shallow)'),Error.captureStackTrace&&Error.captureStackTrace(this,i),!this.stack)try{throw new Error(this.message)}catch(t){this.stack=t.stack}return this}},function(t,n,a){function r(t,n){var a={};this._baseState=a,a.enc=t,a.parent=n||null,a.children=null,a.tag=null,a.args=null,a.reverseArgs=null,a.choice=null,a.optional=!1,a.any=!1,a.obj=!1,a.use=null,a.useDecoder=null,a.key=null,a['default']=null,a.explicit=null,a.implicit=null,a.contains=null,a.parent||(a.children=[],this._wrap())}var i=a(70).Reporter,o=a(70).EncoderBuffer,s=a(70).DecoderBuffer,d=a(21),l=['seq','seqof','set','setof','objid','bool','gentime','utctime','null_','enum','int','objDesc','bitstr','bmpstr','charstr','genstr','graphstr','ia5str','iso646str','numstr','octstr','printstr','t61str','unistr','utf8str','videostr'],c=['key','obj','use','optional','explicit','implicit','def','choice','any','contains'].concat(l),u=['_peekTag','_decodeTag','_use','_decodeStr','_decodeObjid','_decodeTime','_decodeNull','_decodeInt','_decodeBool','_decodeList','_encodeComposite','_encodeStr','_encodeObjid','_encodeTime','_encodeNull','_encodeInt','_encodeBool'];t.exports=r;var f=['enc','parent','children','tag','args','reverseArgs','choice','optional','any','obj','use','alteredUse','key','default','explicit','implicit','contains'];r.prototype.clone=function t(){var n=this._baseState,a={};f.forEach(function(t){a[t]=n[t]});var r=new this.constructor(a.parent);return r._baseState=a,r},r.prototype._wrap=function t(){var n=this._baseState;c.forEach(function(t){this[t]=function a(){var r=new this.constructor(this);return n.children.push(r),r[t].apply(r,arguments)}},this)},r.prototype._init=function t(n){var a=this._baseState;d(null===a.parent),n.call(this),a.children=a.children.filter(function(t){return t._baseState.parent===this},this),d.equal(a.children.length,1,'Root node can have only one child')},r.prototype._useArgs=function t(n){var a=this._baseState,r=n.filter(function(t){return t instanceof this.constructor},this);n=n.filter(function(t){return!(t instanceof this.constructor)},this),0!==r.length&&(d(null===a.children),a.children=r,r.forEach(function(t){t._baseState.parent=this},this)),0!==n.length&&(d(null===a.args),a.args=n,a.reverseArgs=n.map(function(t){if('object'!=typeof t||t.constructor!==Object)return t;var n={};return Object.keys(t).forEach(function(a){a==(0|a)&&(a|=0);var r=t[a];n[r]=a}),n}))},u.forEach(function(t){r.prototype[t]=function n(){var a=this._baseState;throw new Error(t+' not implemented for encoding: '+a.enc)}}),l.forEach(function(t){r.prototype[t]=function n(){var a=this._baseState,r=Array.prototype.slice.call(arguments);return d(null===a.tag),a.tag=t,this._useArgs(r),this}}),r.prototype.use=function t(n){d(n);var a=this._baseState;return d(null===a.use),a.use=n,this},r.prototype.optional=function t(){var n=this._baseState;return n.optional=!0,this},r.prototype.def=function t(n){var a=this._baseState;return d(null===a['default']),a['default']=n,a.optional=!0,this},r.prototype.explicit=function t(n){var a=this._baseState;return d(null===a.explicit&&null===a.implicit),a.explicit=n,this},r.prototype.implicit=function t(n){var a=this._baseState;return d(null===a.explicit&&null===a.implicit),a.implicit=n,this},r.prototype.obj=function t(){var n=this._baseState,a=Array.prototype.slice.call(arguments);return n.obj=!0,0!==a.length&&this._useArgs(a),this},r.prototype.key=function t(n){var a=this._baseState;return d(null===a.key),a.key=n,this},r.prototype.any=function t(){var n=this._baseState;return n.any=!0,this},r.prototype.choice=function t(n){var a=this._baseState;return d(null===a.choice),a.choice=n,this._useArgs(Object.keys(n).map(function(t){return n[t]})),this},r.prototype.contains=function t(n){var a=this._baseState;return d(null===a.use),a.contains=n,this},r.prototype._decode=function t(n,a){var r=this._baseState;if(null===r.parent)return n.wrapResult(r.children[0]._decode(n,a));var i=r['default'],o=!0,d=null;if(null!==r.key&&(d=n.enterKey(r.key)),r.optional){var l=null;if(null===r.explicit?null===r.implicit?null!==r.tag&&(l=r.tag):l=r.implicit:l=r.explicit,null===l&&!r.any){var c=n.save();try{null===r.choice?this._decodeGeneric(r.tag,n,a):this._decodeChoice(n,a),o=!0}catch(t){o=!1}n.restore(c)}else if(o=this._peekTag(n,l,r.any),n.isError(o))return o}var u;if(r.obj&&o&&(u=n.enterObject()),o){if(null!==r.explicit){var f=this._decodeTag(n,r.explicit);if(n.isError(f))return f;n=f}var m=n.offset;if(null===r.use&&null===r.choice){if(r.any)var c=n.save();var h=this._decodeTag(n,null===r.implicit?r.tag:r.implicit,r.any);if(n.isError(h))return h;r.any?i=n.raw(c):n=h}if(a&&a.track&&null!==r.tag&&a.track(n.path(),m,n.length,'tagged'),a&&a.track&&null!==r.tag&&a.track(n.path(),n.offset,n.length,'content'),i=r.any?i:null===r.choice?this._decodeGeneric(r.tag,n,a):this._decodeChoice(n,a),n.isError(i))return i;if(r.any||null!==r.choice||null===r.children||r.children.forEach(function t(r){r._decode(n,a)}),r.contains&&('octstr'===r.tag||'bitstr'===r.tag)){var g=new s(i);i=this._getUse(r.contains,n._reporterState.obj)._decode(g,a)}}return r.obj&&o&&(i=n.leaveObject(u)),null!==r.key&&(null!==i||!0===o)?n.leaveKey(d,r.key,i):null!==d&&n.exitKey(d),i},r.prototype._decodeGeneric=function t(n,a,r){var i=this._baseState;if('seq'===n||'set'===n)return null;return'seqof'===n||'setof'===n?this._decodeList(a,n,i.args[0],r):/str$/.test(n)?this._decodeStr(a,n,r):'objid'===n&&i.args?this._decodeObjid(a,i.args[0],i.args[1],r):'objid'===n?this._decodeObjid(a,null,null,r):'gentime'===n||'utctime'===n?this._decodeTime(a,n,r):'null_'===n?this._decodeNull(a,r):'bool'===n?this._decodeBool(a,r):'objDesc'===n?this._decodeStr(a,n,r):'int'===n||'enum'===n?this._decodeInt(a,i.args&&i.args[0],r):null===i.use?a.error('unknown tag: '+n):this._getUse(i.use,a._reporterState.obj)._decode(a,r)},r.prototype._getUse=function t(n,a){var r=this._baseState;return r.useDecoder=this._use(n,a),d(null===r.useDecoder._baseState.parent),r.useDecoder=r.useDecoder._baseState.children[0],r.implicit!==r.useDecoder._baseState.implicit&&(r.useDecoder=r.useDecoder.clone(),r.useDecoder._baseState.implicit=r.implicit),r.useDecoder},r.prototype._decodeChoice=function t(n,a){var r=this._baseState,i=null,o=!1;return Object.keys(r.choice).some(function(t){var s=n.save(),d=r.choice[t];try{var l=d._decode(n,a);if(n.isError(l))return!1;i={type:t,value:l},o=!0}catch(t){return n.restore(s),!1}return!0},this),o?i:n.error('Choice not matched')},r.prototype._createEncoderBuffer=function t(n){return new o(n,this.reporter)},r.prototype._encode=function t(n,a,r){var i=this._baseState;if(null===i['default']||i['default']!==n){var o=this._encodeValue(n,a,r);return void 0===o||this._skipDefault(o,a,r)?void 0:o}},r.prototype._encodeValue=function t(n,a,r){var o=this._baseState;if(null===o.parent)return o.children[0]._encode(n,a||new i);var s=null;if(this.reporter=a,o.optional&&void 0===n)if(null!==o['default'])n=o['default'];else return;var d=null,l=!1;if(o.any)s=this._createEncoderBuffer(n);else if(o.choice)s=this._encodeChoice(n,a);else if(o.contains)d=this._getUse(o.contains,r)._encode(n,a),l=!0;else if(o.children)d=o.children.map(function(t){if('null_'===t._baseState.tag)return t._encode(null,a,n);if(null===t._baseState.key)return a.error('Child should have a key');var r=a.enterKey(t._baseState.key);if('object'!=typeof n)return a.error('Child expected, but input is not object');var i=t._encode(n[t._baseState.key],a,n);return a.leaveKey(r),i},this).filter(function(t){return t}),d=this._createEncoderBuffer(d);else if('seqof'===o.tag||'setof'===o.tag){if(!(o.args&&1===o.args.length))return a.error('Too many args for : '+o.tag);if(!Array.isArray(n))return a.error('seqof/setof, but data is not Array');var c=this.clone();c._baseState.implicit=null,d=this._createEncoderBuffer(n.map(function(t){var r=this._baseState;return this._getUse(r.args[0],n)._encode(t,a)},c))}else null===o.use?(d=this._encodePrimitive(o.tag,n),l=!0):s=this._getUse(o.use,r)._encode(n,a);var s;if(!o.any&&null===o.choice){var u=null===o.implicit?o.tag:o.implicit,f=null===o.implicit?'universal':'context';null===u?null===o.use&&a.error('Tag could be omitted only for .use()'):null===o.use&&(s=this._encodeComposite(u,l,f,d))}return null!==o.explicit&&(s=this._encodeComposite(o.explicit,!1,'context',s)),s},r.prototype._encodeChoice=function t(n,a){var r=this._baseState,i=r.choice[n.type];return i||d(!1,n.type+' not found in '+JSON.stringify(Object.keys(r.choice))),i._encode(n.value,a)},r.prototype._encodePrimitive=function t(n,a){var r=this._baseState;if(/str$/.test(n))return this._encodeStr(a,n);if('objid'===n&&r.args)return this._encodeObjid(a,r.reverseArgs[0],r.args[1]);if('objid'===n)return this._encodeObjid(a,null,null);if('gentime'===n||'utctime'===n)return this._encodeTime(a,n);if('null_'===n)return this._encodeNull();if('int'===n||'enum'===n)return this._encodeInt(a,r.args&&r.reverseArgs[0]);if('bool'===n)return this._encodeBool(a);if('objDesc'===n)return this._encodeStr(a,n);throw new Error('Unsupported tag: '+n)},r.prototype._isNumstr=function t(n){return /^[0-9 ]*$/.test(n)},r.prototype._isPrintstr=function t(n){return /^[A-Za-z0-9 '\(\)\+,\-\.\/:=\?]*$/.test(n)}},function(t,n,a){var r=a(236);n.tagClass={0:'universal',1:'application',2:'context',3:'private'},n.tagClassByName=r._reverse(n.tagClass),n.tag={0:'end',1:'bool',2:'int',3:'bitstr',4:'octstr',5:'null_',6:'objid',7:'objDesc',8:'external',9:'real',10:'enum',11:'embed',12:'utf8str',13:'relativeOid',16:'seq',17:'set',18:'numstr',19:'printstr',20:'t61str',21:'videostr',22:'ia5str',23:'utctime',24:'gentime',25:'graphstr',26:'iso646str',27:'genstr',28:'unistr',29:'charstr',30:'bmpstr'},n.tagByName=r._reverse(n.tag)},function(t,n,a){var r=n;r.der=a(237),r.pem=a(426)},function(t,n,a){function r(t){s.call(this,t),this.enc='pem'}var i=a(0),o=a(2).Buffer,s=a(237);;i(r,s),t.exports=r,r.prototype.decode=function t(n,a){for(var r=n.toString().split(/[\r\n]+/g),d=a.label.toUpperCase(),l=/^-----(BEGIN|END) ([^-]+)-----$/,c=-1,u=-1,f=0,i;f<r.length;f++)if(i=r[f].match(l),null!==i&&i[2]===d)if(-1==c){if('BEGIN'!==i[1])break;c=f}else{if('END'!==i[1])break;u=f;break}if(-1===c||-1===u)throw new Error('PEM section not found for: '+d);var m=r.slice(c+1,u).join('');m.replace(/[^a-z0-9\+\/=]+/gi,'');var h=new o(m,'base64');return s.prototype.decode.call(this,h,a)}},function(t,n,a){var r=n;r.der=a(238),r.pem=a(428)},function(t,n,a){function r(t){o.call(this,t),this.enc='pem'}var i=a(0),o=a(238);;i(r,o),t.exports=r,r.prototype.encode=function t(n,a){for(var r=o.prototype.encode.call(this,n),s=r.toString('base64'),d=['-----BEGIN '+a.label+'-----'],l=0;l<s.length;l+=64)d.push(s.slice(l,l+64));return d.push('-----END '+a.label+'-----'),d.join('\n')}},function(t,n,a){'use strict';var r=a(69),i=r.define('Time',function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})}),o=r.define('AttributeTypeValue',function(){this.seq().obj(this.key('type').objid(),this.key('value').any())}),s=r.define('AlgorithmIdentifier',function(){this.seq().obj(this.key('algorithm').objid(),this.key('parameters').optional())}),d=r.define('SubjectPublicKeyInfo',function(){this.seq().obj(this.key('algorithm').use(s),this.key('subjectPublicKey').bitstr())}),l=r.define('RelativeDistinguishedName',function(){this.setof(o)}),c=r.define('RDNSequence',function(){this.seqof(l)}),u=r.define('Name',function(){this.choice({rdnSequence:this.use(c)})}),f=r.define('Validity',function(){this.seq().obj(this.key('notBefore').use(i),this.key('notAfter').use(i))}),m=r.define('Extension',function(){this.seq().obj(this.key('extnID').objid(),this.key('critical').bool().def(!1),this.key('extnValue').octstr())}),h=r.define('TBSCertificate',function(){this.seq().obj(this.key('version').explicit(0).int(),this.key('serialNumber').int(),this.key('signature').use(s),this.key('issuer').use(u),this.key('validity').use(f),this.key('subject').use(u),this.key('subjectPublicKeyInfo').use(d),this.key('issuerUniqueID').implicit(1).bitstr().optional(),this.key('subjectUniqueID').implicit(2).bitstr().optional(),this.key('extensions').explicit(3).seqof(m).optional())}),g=r.define('X509Certificate',function(){this.seq().obj(this.key('tbsCertificate').use(h),this.key('signatureAlgorithm').use(s),this.key('signatureValue').bitstr())});t.exports=g},function(t,n){t.exports={"2.16.840.1.101.3.4.1.1":'aes-128-ecb',"2.16.840.1.101.3.4.1.2":'aes-128-cbc',"2.16.840.1.101.3.4.1.3":'aes-128-ofb',"2.16.840.1.101.3.4.1.4":'aes-128-cfb',"2.16.840.1.101.3.4.1.21":'aes-192-ecb',"2.16.840.1.101.3.4.1.22":'aes-192-cbc',"2.16.840.1.101.3.4.1.23":'aes-192-ofb',"2.16.840.1.101.3.4.1.24":'aes-192-cfb',"2.16.840.1.101.3.4.1.41":'aes-256-ecb',"2.16.840.1.101.3.4.1.42":'aes-256-cbc',"2.16.840.1.101.3.4.1.43":'aes-256-ofb',"2.16.840.1.101.3.4.1.44":'aes-256-cfb'}},function(t,n,a){(function(n){var r=/Proc-Type: 4,ENCRYPTED\n\r?DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)\n\r?\n\r?([0-9A-z\n\r\+\/\=]+)\n\r?/m,i=/^-----BEGIN ((?:.* KEY)|CERTIFICATE)-----\n/m,o=/^-----BEGIN ((?:.* KEY)|CERTIFICATE)-----\n\r?([0-9A-z\n\r\+\/\=]+)\n\r?-----END \1-----$/m,s=a(91),d=a(137);t.exports=function(t,a){var l=t.toString(),c=l.match(r),u;if(!c){var f=l.match(o);u=new n(f[2].replace(/\r?\n/g,''),'base64')}else{var m='aes'+c[1],h=new n(c[2],'hex'),g=new n(c[3].replace(/\r?\n/g,''),'base64'),b=s(a,h.slice(0,8),parseInt(c[1],10)).key,y=[],w=d.createDecipheriv(m,b,h);y.push(w.update(g)),y.push(w.final()),u=n.concat(y)}var v=l.match(i)[1];return{tag:v,data:u}}}).call(n,a(2).Buffer)},function(t,n,a){(function(n){function r(t,a,r,s,d){var u=c(r);if('ec'===u.type){if('ecdsa'!==s&&'ecdsa/rsa'!==s)throw new Error('wrong public key type');return i(t,a,u)}if('dsa'===u.type){if('dsa'!==s)throw new Error('wrong public key type');return o(t,a,u)}if('rsa'!==s&&'ecdsa/rsa'!==s)throw new Error('wrong public key type');a=n.concat([d,a]);for(var f=u.modulus.byteLength(),m=[1],h=0;a.length+m.length+2<f;)m.push(255),h++;m.push(0);for(var g=-1;++g<a.length;)m.push(a[g]);m=new n(m);var b=l.mont(u.modulus);t=new l(t).toRed(b),t=t.redPow(new l(u.publicExponent)),t=new n(t.fromRed().toArray());var y=8>h?1:0;for(f=_Mathmin(t.length,m.length),t.length!==m.length&&(y=1),g=-1;++g<f;)y|=t[g]^m[g];return 0==y}function i(t,n,a){var r=u[a.data.algorithm.curve.join('.')];if(!r)throw new Error('unknown curve '+a.data.algorithm.curve.join('.'));var i=new s(r),o=a.data.subjectPrivateKey.data;return i.verify(n,t,o)}function o(t,n,a){var i=a.data.p,o=a.data.q,u=a.data.g,f=a.data.pub_key,m=c.signature.decode(t,'der'),h=m.s,s=m.r;d(h,o),d(s,o);var r=l.mont(i),g=h.invm(o),b=u.toRed(r).redPow(new l(n).mul(g).mod(o)).fromRed().mul(f.toRed(r).redPow(s.mul(g).mod(o)).fromRed()).mod(i).mod(o);return 0===b.cmp(s)}function d(t,n){if(0>=t.cmpn(0))throw new Error('invalid sig');if(t.cmp(n)>=n)throw new Error('invalid sig')}var l=a(234),s=a(8).ec,c=a(94),u=a(239);t.exports=r}).call(n,a(2).Buffer)},function(t,n,a){(function(n){function r(t){this.curveType=d[t],this.curveType||(this.curveType={name:t}),this.curve=new o.ec(this.curveType.name),this.keys=void 0}function i(t,a,r){Array.isArray(t)||(t=t.toArray());var i=new n(t);if(r&&i.length<r){var o=new n(r-i.length);o.fill(0),i=n.concat([o,i])}return a?i.toString(a):i}var o=a(8),s=a(434);t.exports=function t(n){return new r(n)};var d={secp256k1:{name:'secp256k1',byteLength:32},secp224r1:{name:'p224',byteLength:28},prime256v1:{name:'p256',byteLength:32},prime192v1:{name:'p192',byteLength:24},ed25519:{name:'ed25519',byteLength:32},secp384r1:{name:'p384',byteLength:48},secp521r1:{name:'p521',byteLength:66}};d.p224=d.secp224r1,d.p256=d.secp256r1=d.prime256v1,d.p192=d.secp192r1=d.prime192v1,d.p384=d.secp384r1,d.p521=d.secp521r1,r.prototype.generateKeys=function(t,n){return this.keys=this.curve.genKeyPair(),this.getPublicKey(t,n)},r.prototype.computeSecret=function(t,a,r){a=a||'utf8',n.isBuffer(t)||(t=new n(t,a));var o=this.curve.keyFromPublic(t).getPublic(),s=o.mul(this.keys.getPrivate()).getX();return i(s,r,this.curveType.byteLength)},r.prototype.getPublicKey=function(t,n){var a=this.keys.getPublic('compressed'===n,!0);return'hybrid'===n&&(a[a.length-1]%2?a[0]=7:a[0]=6),i(a,t)},r.prototype.getPrivateKey=function(t){return i(this.keys.getPrivate(),t)},r.prototype.setPublicKey=function(t,a){return a=a||'utf8',n.isBuffer(t)||(t=new n(t,a)),this.keys._importPublic(t),this},r.prototype.setPrivateKey=function(t,a){a=a||'utf8',n.isBuffer(t)||(t=new n(t,a));var r=new s(t);return r=r.toString(16),this.keys._importPrivate(r),this}}).call(n,a(2).Buffer)},function(t,n,a){(function(t){(function(t,n){'use strict';function o(t,n){if(!t)throw new Error(n||'Assertion failed')}function r(t,n){t.super_=n;var a=function(){};a.prototype=n.prototype,t.prototype=new a,t.prototype.constructor=t}function d(t,n,a){return d.isBN(t)?t:void(this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&(('le'===n||'be'===n)&&(a=n,n=10),this._init(t||0,n||10,a||'be')))}function s(t,n,a){for(var o=0,r=_Mathmin(t.length,a),s=n,i;s<r;s++)i=t.charCodeAt(s)-48,o<<=4,o|=49<=i&&54>=i?i-49+10:17<=i&&22>=i?i-17+10:15&i;return o}function l(t,n,a,o){for(var s=0,r=_Mathmin(t.length,a),d=n,i;d<r;d++)i=t.charCodeAt(d)-48,s*=o,s+=49<=i?i-49+10:17<=i?i-17+10:i;return s}function c(t){for(var n=Array(t.bitLength()),a=0;a<n.length;a++){var r=0|a/26,i=a%26;n[a]=(t.words[r]&1<<i)>>>i}return n}function i(t,n,o){o.negative=n.negative^t.negative;var s=0|t.length+n.length;o.length=s,s=0|s-1;var d=0|t.words[0],a=0|n.words[0],l=d*a,r=67108863&l,c=0|l/67108864;o.words[0]=r;for(var u=1;u<s;u++){for(var f=c>>>26,m=67108863&c,h=_Mathmin(u,n.length-1),g=_Mathmax(0,u-t.length+1),b;g<=h;g++)b=0|u-g,d=0|t.words[b],a=0|n.words[g],l=d*a+m,f+=0|l/67108864,m=67108863&l;o.words[u]=0|m,c=0|f}return 0==c?o.length--:o.words[u]=0|c,o.strip()}function u(t,n,o){o.negative=n.negative^t.negative,o.length=t.length+n.length;for(var s=0,d=0,l=0,c;l<o.length-1;l++){c=d,d=0;for(var u=67108863&s,f=_Mathmin(l,n.length-1),m=_Mathmax(0,l-t.length+1);m<=f;m++){var h=l-m,i=0|t.words[h],a=0|n.words[m],g=i*a,r=67108863&g;c=0|c+(0|g/67108864),r=0|r+u,u=67108863&r,c=0|c+(r>>>26),d+=c>>>26,c&=67108863}o.words[l]=u,s=c,c=d}return 0==s?o.length--:o.words[l]=s,o.strip()}function f(t,n,a){var r=new m;return r.mulp(t,n,a)}function m(t,n){this.x=t,this.y=n}function h(t,n){this.name=t,this.p=new d(n,16),this.n=this.p.bitLength(),this.k=new d(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function g(){h.call(this,'k256','ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f')}function b(){h.call(this,'p224','ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001')}function y(){h.call(this,'p192','ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff')}function w(){h.call(this,'25519','7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed')}function v(t){if('string'==typeof t){var n=d._prime(t);this.m=n.p,this.prime=n}else o(t.gtn(1),'modulus must be greater than 1'),this.m=t,this.prime=null}function x(t){v.call(this,t),this.shift=this.m.bitLength(),0!=this.shift%26&&(this.shift+=26-this.shift%26),this.r=new d(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}'object'==typeof t?t.exports=d:n.BN=d,d.BN=d,d.wordSize=26;var _;try{_=a(435).Buffer}catch(t){}d.isBN=function t(n){return!!(n instanceof d)||null!==n&&'object'==typeof n&&n.constructor.wordSize===d.wordSize&&Array.isArray(n.words)},d.max=function t(n,a){return 0<n.cmp(a)?n:a},d.min=function t(n,a){return 0>n.cmp(a)?n:a},d.prototype._init=function t(n,a,r){if('number'==typeof n)return this._initNumber(n,a,r);if('object'==typeof n)return this._initArray(n,a,r);'hex'===a&&(a=16),o(a===(0|a)&&2<=a&&36>=a),n=n.toString().replace(/\s+/g,'');var i=0;'-'===n[0]&&i++,16===a?this._parseHex(n,i):this._parseBase(n,a,i),'-'===n[0]&&(this.negative=1),this.strip();'le'!==r||this._initArray(this.toArray(),a,r)},d.prototype._initNumber=function t(n,a,r){0>n&&(this.negative=1,n=-n),67108864>n?(this.words=[67108863&n],this.length=1):4503599627370496>n?(this.words=[67108863&n,67108863&n/67108864],this.length=2):(o(9007199254740992>n),this.words=[67108863&n,67108863&n/67108864,1],this.length=3);'le'!==r||this._initArray(this.toArray(),a,r)},d.prototype._initArray=function t(n,a,r){if(o('number'==typeof n.length),0>=n.length)return this.words=[0],this.length=1,this;this.length=_Mathceil(n.length/3),this.words=Array(this.length);for(var s=0;s<this.length;s++)this.words[s]=0;var i=0,d,l;if('be'===r)for(s=n.length-1,d=0;0<=s;s-=3)l=n[s]|n[s-1]<<8|n[s-2]<<16,this.words[d]|=67108863&l<<i,this.words[d+1]=67108863&l>>>26-i,i+=24,26<=i&&(i-=26,d++);else if('le'===r)for(s=0,d=0;s<n.length;s+=3)l=n[s]|n[s+1]<<8|n[s+2]<<16,this.words[d]|=67108863&l<<i,this.words[d+1]=67108863&l>>>26-i,i+=24,26<=i&&(i-=26,d++);return this.strip()},d.prototype._parseHex=function t(n,a){this.length=_Mathceil((n.length-a)/6),this.words=Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var i=0,o,d;for(r=n.length-6,o=0;r>=a;r-=6)d=s(n,r,r+6),this.words[o]|=67108863&d<<i,this.words[o+1]|=4194303&d>>>26-i,i+=24,26<=i&&(i-=26,o++);r+6!==a&&(d=s(n,a,r+6),this.words[o]|=67108863&d<<i,this.words[o+1]|=4194303&d>>>26-i),this.strip()},d.prototype._parseBase=function t(n,a,r){this.words=[0],this.length=1;for(var o=0,s=1;67108863>=s;s*=a)o++;o--,s=0|s/a;for(var d=n.length-r,c=d%o,u=_Mathmin(d,d-c)+r,f=0,m=r;m<u;m+=o)f=l(n,m,m+o,a),this.imuln(s),67108864>this.words[0]+f?this.words[0]+=f:this._iaddn(f);if(0!=c){var i=1;for(f=l(n,m,n.length,a),m=0;m<c;m++)i*=a;this.imuln(i),67108864>this.words[0]+f?this.words[0]+=f:this._iaddn(f)}},d.prototype.copy=function t(n){n.words=Array(this.length);for(var a=0;a<this.length;a++)n.words[a]=this.words[a];n.length=this.length,n.negative=this.negative,n.red=this.red},d.prototype.clone=function t(){var n=new d(null);return this.copy(n),n},d.prototype._expand=function t(n){for(;this.length<n;)this.words[this.length++]=0;return this},d.prototype.strip=function t(){for(;1<this.length&&0===this.words[this.length-1];)this.length--;return this._normSign()},d.prototype._normSign=function t(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},d.prototype.inspect=function t(){return(this.red?'<BN-R: ':'<BN: ')+this.toString(16)+'>'};var k=['','0','00','000','0000','00000','000000','0000000','00000000','000000000','0000000000','00000000000','000000000000','0000000000000','00000000000000','000000000000000','0000000000000000','00000000000000000','000000000000000000','0000000000000000000','00000000000000000000','000000000000000000000','0000000000000000000000','00000000000000000000000','000000000000000000000000','0000000000000000000000000'],C=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],E=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,10000000,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64000000,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,24300000,28629151,33554432,39135393,45435424,52521875,60466176];d.prototype.toString=function t(n,a){n=n||10,a=0|a||1;var s;if(16===n||'hex'===n){s='';for(var d=0,l=0,u=0;u<this.length;u++){var i=this.words[u],f=(16777215&(i<<d|l)).toString(16);l=16777215&i>>>24-d,s=0!=l||u!==this.length-1?k[6-f.length]+f+s:f+s,d+=2,26<=d&&(d-=26,u--)}for(0!=l&&(s=l.toString(16)+s);0!=s.length%a;)s='0'+s;return 0!==this.negative&&(s='-'+s),s}if(n===(0|n)&&2<=n&&36>=n){var m=C[n],h=E[n];s='';var g=this.clone();for(g.negative=0;!g.isZero();){var c=g.modn(h).toString(n);g=g.idivn(h),s=g.isZero()?c+s:k[m-c.length]+c+s}for(this.isZero()&&(s='0'+s);0!=s.length%a;)s='0'+s;return 0!==this.negative&&(s='-'+s),s}o(!1,'Base should be between 2 and 36')},d.prototype.toNumber=function t(){var n=this.words[0];return 2===this.length?n+=67108864*this.words[1]:3===this.length&&1===this.words[2]?n+=4503599627370496+67108864*this.words[1]:2<this.length&&o(!1,'Number can only safely store up to 53 bits'),0===this.negative?n:-n},d.prototype.toJSON=function t(){return this.toString(16)},d.prototype.toBuffer=function t(n,a){return o('undefined'!=typeof _),this.toArrayLike(_,n,a)},d.prototype.toArray=function t(n,a){return this.toArrayLike(Array,n,a)},d.prototype.toArrayLike=function t(n,a,r){var s=this.byteLength(),d=r||_Mathmax(1,s);o(s<=d,'byte array longer than desired length'),o(0<d,'Requested array length <= 0'),this.strip();var l='le'===a,c=new n(d),u=this.clone(),f,m;if(!l){for(m=0;m<d-s;m++)c[m]=0;for(m=0;!u.isZero();m++)f=u.andln(255),u.iushrn(8),c[d-m-1]=f}else{for(m=0;!u.isZero();m++)f=u.andln(255),u.iushrn(8),c[m]=f;for(;m<d;m++)c[m]=0}return c},d.prototype._countBits=_Mathclz?function t(n){return 32-_Mathclz(n)}:function n(a){var i=a,t=0;return 4096<=i&&(t+=13,i>>>=13),64<=i&&(t+=7,i>>>=7),8<=i&&(t+=4,i>>>=4),2<=i&&(t+=2,i>>>=2),t+i},d.prototype._zeroBits=function n(a){if(0===a)return 26;var i=a,t=0;return 0==(8191&i)&&(t+=13,i>>>=13),0==(127&i)&&(t+=7,i>>>=7),0==(15&i)&&(t+=4,i>>>=4),0==(3&i)&&(t+=2,i>>>=2),0==(1&i)&&t++,t},d.prototype.bitLength=function t(){var n=this.words[this.length-1],a=this._countBits(n);return 26*(this.length-1)+a},d.prototype.zeroBits=function t(){if(this.isZero())return 0;for(var n=0,a=0,r;a<this.length&&(r=this._zeroBits(this.words[a]),n+=r,26===r);a++);return n},d.prototype.byteLength=function t(){return _Mathceil(this.bitLength()/8)},d.prototype.toTwos=function t(n){return 0===this.negative?this.clone():this.abs().inotn(n).iaddn(1)},d.prototype.fromTwos=function t(n){return this.testn(n-1)?this.notn(n).iaddn(1).ineg():this.clone()},d.prototype.isNeg=function t(){return 0!==this.negative},d.prototype.neg=function t(){return this.clone().ineg()},d.prototype.ineg=function t(){return this.isZero()||(this.negative^=1),this},d.prototype.iuor=function t(n){for(;this.length<n.length;)this.words[this.length++]=0;for(var a=0;a<n.length;a++)this.words[a]|=n.words[a];return this.strip()},d.prototype.ior=function t(n){return o(0==(this.negative|n.negative)),this.iuor(n)},d.prototype.or=function t(n){return this.length>n.length?this.clone().ior(n):n.clone().ior(this)},d.prototype.uor=function t(n){return this.length>n.length?this.clone().iuor(n):n.clone().iuor(this)},d.prototype.iuand=function t(n){var a;a=this.length>n.length?n:this;for(var r=0;r<a.length;r++)this.words[r]&=n.words[r];return this.length=a.length,this.strip()},d.prototype.iand=function t(n){return o(0==(this.negative|n.negative)),this.iuand(n)},d.prototype.and=function t(n){return this.length>n.length?this.clone().iand(n):n.clone().iand(this)},d.prototype.uand=function t(n){return this.length>n.length?this.clone().iuand(n):n.clone().iuand(this)},d.prototype.iuxor=function t(n){var r,a;this.length>n.length?(r=this,a=n):(r=n,a=this);for(var o=0;o<a.length;o++)this.words[o]=r.words[o]^a.words[o];if(this!==r)for(;o<r.length;o++)this.words[o]=r.words[o];return this.length=r.length,this.strip()},d.prototype.ixor=function t(n){return o(0==(this.negative|n.negative)),this.iuxor(n)},d.prototype.xor=function t(n){return this.length>n.length?this.clone().ixor(n):n.clone().ixor(this)},d.prototype.uxor=function t(n){return this.length>n.length?this.clone().iuxor(n):n.clone().iuxor(this)},d.prototype.inotn=function t(n){o('number'==typeof n&&0<=n);var a=0|_Mathceil(n/26),r=n%26;this._expand(a),0<r&&a--;for(var s=0;s<a;s++)this.words[s]=67108863&~this.words[s];return 0<r&&(this.words[s]=~this.words[s]&67108863>>26-r),this.strip()},d.prototype.notn=function t(n){return this.clone().inotn(n)},d.prototype.setn=function t(n,a){o('number'==typeof n&&0<=n);var r=0|n/26,i=n%26;return this._expand(r+1),a?this.words[r]|=1<<i:this.words[r]&=~(1<<i),this.strip()},d.prototype.iadd=function t(n){var o;if(0!==this.negative&&0===n.negative)return this.negative=0,o=this.isub(n),this.negative^=1,this._normSign();if(0===this.negative&&0!==n.negative)return n.negative=0,o=this.isub(n),n.negative=1,o._normSign();var r,a;this.length>n.length?(r=this,a=n):(r=n,a=this);for(var s=0,d=0;d<a.length;d++)o=(0|r.words[d])+(0|a.words[d])+s,this.words[d]=67108863&o,s=o>>>26;for(;0!=s&&d<r.length;d++)o=(0|r.words[d])+s,this.words[d]=67108863&o,s=o>>>26;if(this.length=r.length,0!=s)this.words[this.length]=s,this.length++;else if(r!==this)for(;d<r.length;d++)this.words[d]=r.words[d];return this},d.prototype.add=function t(n){var a;return 0!==n.negative&&0===this.negative?(n.negative=0,a=this.sub(n),n.negative^=1,a):0===n.negative&&0!==this.negative?(this.negative=0,a=n.sub(this),this.negative=1,a):this.length>n.length?this.clone().iadd(n):n.clone().iadd(this)},d.prototype.isub=function t(n){if(0!==n.negative){n.negative=0;var o=this.iadd(n);return n.negative=1,o._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(n),this.negative=1,this._normSign();var r=this.cmp(n);if(0===r)return this.negative=0,this.length=1,this.words[0]=0,this;var s,a;0<r?(s=this,a=n):(s=n,a=this);for(var d=0,l=0;l<a.length;l++)o=(0|s.words[l])-(0|a.words[l])+d,d=o>>26,this.words[l]=67108863&o;for(;0!=d&&l<s.length;l++)o=(0|s.words[l])+d,d=o>>26,this.words[l]=67108863&o;if(0==d&&l<s.length&&s!==this)for(;l<s.length;l++)this.words[l]=s.words[l];return this.length=_Mathmax(this.length,l),s!==this&&(this.negative=1),this.strip()},d.prototype.sub=function t(n){return this.clone().isub(n)};var T=function t(n,r,i){var s=n.words,a=r.words,d=i.words,o=0,l=0|s[0],c=8191&l,u=l>>>13,f=0|s[1],m=8191&f,h=f>>>13,g=0|s[2],b=8191&g,y=g>>>13,w=0|s[3],v=8191&w,x=w>>>13,_=0|s[4],k=8191&_,C=_>>>13,E=0|s[5],T=8191&E,A=E>>>13,S=0|s[6],I=8191&S,N=S>>>13,j=0|s[7],L=8191&j,R=j>>>13,M=0|s[8],D=8191&M,P=M>>>13,O=0|s[9],B=8191&O,U=O>>>13,F=0|a[0],q=8191&F,z=F>>>13,H=0|a[1],W=8191&H,V=H>>>13,G=0|a[2],J=8191&G,K=G>>>13,X=0|a[3],Y=8191&X,Z=X>>>13,Q=0|a[4],ee=8191&Q,te=Q>>>13,ne=0|a[5],ae=8191&ne,re=ne>>>13,ie=0|a[6],oe=8191&ie,se=ie>>>13,de=0|a[7],le=8191&de,pe=de>>>13,ce=0|a[8],ue=8191&ce,fe=ce>>>13,he=0|a[9],ge=8191&he,be=he>>>13,ye,we,ve;i.negative=n.negative^r.negative,i.length=19,ye=_Mathimul(c,q),we=_Mathimul(c,z),we=0|we+_Mathimul(u,q),ve=_Mathimul(u,z);var xe=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(xe>>>26),xe&=67108863,ye=_Mathimul(m,q),we=_Mathimul(m,z),we=0|we+_Mathimul(h,q),ve=_Mathimul(h,z),ye=0|ye+_Mathimul(c,W),we=0|we+_Mathimul(c,V),we=0|we+_Mathimul(u,W),ve=0|ve+_Mathimul(u,V);var _e=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(_e>>>26),_e&=67108863,ye=_Mathimul(b,q),we=_Mathimul(b,z),we=0|we+_Mathimul(y,q),ve=_Mathimul(y,z),ye=0|ye+_Mathimul(m,W),we=0|we+_Mathimul(m,V),we=0|we+_Mathimul(h,W),ve=0|ve+_Mathimul(h,V),ye=0|ye+_Mathimul(c,J),we=0|we+_Mathimul(c,K),we=0|we+_Mathimul(u,J),ve=0|ve+_Mathimul(u,K);var ke=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(ke>>>26),ke&=67108863,ye=_Mathimul(v,q),we=_Mathimul(v,z),we=0|we+_Mathimul(x,q),ve=_Mathimul(x,z),ye=0|ye+_Mathimul(b,W),we=0|we+_Mathimul(b,V),we=0|we+_Mathimul(y,W),ve=0|ve+_Mathimul(y,V),ye=0|ye+_Mathimul(m,J),we=0|we+_Mathimul(m,K),we=0|we+_Mathimul(h,J),ve=0|ve+_Mathimul(h,K),ye=0|ye+_Mathimul(c,Y),we=0|we+_Mathimul(c,Z),we=0|we+_Mathimul(u,Y),ve=0|ve+_Mathimul(u,Z);var Ce=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Ce>>>26),Ce&=67108863,ye=_Mathimul(k,q),we=_Mathimul(k,z),we=0|we+_Mathimul(C,q),ve=_Mathimul(C,z),ye=0|ye+_Mathimul(v,W),we=0|we+_Mathimul(v,V),we=0|we+_Mathimul(x,W),ve=0|ve+_Mathimul(x,V),ye=0|ye+_Mathimul(b,J),we=0|we+_Mathimul(b,K),we=0|we+_Mathimul(y,J),ve=0|ve+_Mathimul(y,K),ye=0|ye+_Mathimul(m,Y),we=0|we+_Mathimul(m,Z),we=0|we+_Mathimul(h,Y),ve=0|ve+_Mathimul(h,Z),ye=0|ye+_Mathimul(c,ee),we=0|we+_Mathimul(c,te),we=0|we+_Mathimul(u,ee),ve=0|ve+_Mathimul(u,te);var Ee=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Ee>>>26),Ee&=67108863,ye=_Mathimul(T,q),we=_Mathimul(T,z),we=0|we+_Mathimul(A,q),ve=_Mathimul(A,z),ye=0|ye+_Mathimul(k,W),we=0|we+_Mathimul(k,V),we=0|we+_Mathimul(C,W),ve=0|ve+_Mathimul(C,V),ye=0|ye+_Mathimul(v,J),we=0|we+_Mathimul(v,K),we=0|we+_Mathimul(x,J),ve=0|ve+_Mathimul(x,K),ye=0|ye+_Mathimul(b,Y),we=0|we+_Mathimul(b,Z),we=0|we+_Mathimul(y,Y),ve=0|ve+_Mathimul(y,Z),ye=0|ye+_Mathimul(m,ee),we=0|we+_Mathimul(m,te),we=0|we+_Mathimul(h,ee),ve=0|ve+_Mathimul(h,te),ye=0|ye+_Mathimul(c,ae),we=0|we+_Mathimul(c,re),we=0|we+_Mathimul(u,ae),ve=0|ve+_Mathimul(u,re);var Te=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Te>>>26),Te&=67108863,ye=_Mathimul(I,q),we=_Mathimul(I,z),we=0|we+_Mathimul(N,q),ve=_Mathimul(N,z),ye=0|ye+_Mathimul(T,W),we=0|we+_Mathimul(T,V),we=0|we+_Mathimul(A,W),ve=0|ve+_Mathimul(A,V),ye=0|ye+_Mathimul(k,J),we=0|we+_Mathimul(k,K),we=0|we+_Mathimul(C,J),ve=0|ve+_Mathimul(C,K),ye=0|ye+_Mathimul(v,Y),we=0|we+_Mathimul(v,Z),we=0|we+_Mathimul(x,Y),ve=0|ve+_Mathimul(x,Z),ye=0|ye+_Mathimul(b,ee),we=0|we+_Mathimul(b,te),we=0|we+_Mathimul(y,ee),ve=0|ve+_Mathimul(y,te),ye=0|ye+_Mathimul(m,ae),we=0|we+_Mathimul(m,re),we=0|we+_Mathimul(h,ae),ve=0|ve+_Mathimul(h,re),ye=0|ye+_Mathimul(c,oe),we=0|we+_Mathimul(c,se),we=0|we+_Mathimul(u,oe),ve=0|ve+_Mathimul(u,se);var Ae=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Ae>>>26),Ae&=67108863,ye=_Mathimul(L,q),we=_Mathimul(L,z),we=0|we+_Mathimul(R,q),ve=_Mathimul(R,z),ye=0|ye+_Mathimul(I,W),we=0|we+_Mathimul(I,V),we=0|we+_Mathimul(N,W),ve=0|ve+_Mathimul(N,V),ye=0|ye+_Mathimul(T,J),we=0|we+_Mathimul(T,K),we=0|we+_Mathimul(A,J),ve=0|ve+_Mathimul(A,K),ye=0|ye+_Mathimul(k,Y),we=0|we+_Mathimul(k,Z),we=0|we+_Mathimul(C,Y),ve=0|ve+_Mathimul(C,Z),ye=0|ye+_Mathimul(v,ee),we=0|we+_Mathimul(v,te),we=0|we+_Mathimul(x,ee),ve=0|ve+_Mathimul(x,te),ye=0|ye+_Mathimul(b,ae),we=0|we+_Mathimul(b,re),we=0|we+_Mathimul(y,ae),ve=0|ve+_Mathimul(y,re),ye=0|ye+_Mathimul(m,oe),we=0|we+_Mathimul(m,se),we=0|we+_Mathimul(h,oe),ve=0|ve+_Mathimul(h,se),ye=0|ye+_Mathimul(c,le),we=0|we+_Mathimul(c,pe),we=0|we+_Mathimul(u,le),ve=0|ve+_Mathimul(u,pe);var Se=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Se>>>26),Se&=67108863,ye=_Mathimul(D,q),we=_Mathimul(D,z),we=0|we+_Mathimul(P,q),ve=_Mathimul(P,z),ye=0|ye+_Mathimul(L,W),we=0|we+_Mathimul(L,V),we=0|we+_Mathimul(R,W),ve=0|ve+_Mathimul(R,V),ye=0|ye+_Mathimul(I,J),we=0|we+_Mathimul(I,K),we=0|we+_Mathimul(N,J),ve=0|ve+_Mathimul(N,K),ye=0|ye+_Mathimul(T,Y),we=0|we+_Mathimul(T,Z),we=0|we+_Mathimul(A,Y),ve=0|ve+_Mathimul(A,Z),ye=0|ye+_Mathimul(k,ee),we=0|we+_Mathimul(k,te),we=0|we+_Mathimul(C,ee),ve=0|ve+_Mathimul(C,te),ye=0|ye+_Mathimul(v,ae),we=0|we+_Mathimul(v,re),we=0|we+_Mathimul(x,ae),ve=0|ve+_Mathimul(x,re),ye=0|ye+_Mathimul(b,oe),we=0|we+_Mathimul(b,se),we=0|we+_Mathimul(y,oe),ve=0|ve+_Mathimul(y,se),ye=0|ye+_Mathimul(m,le),we=0|we+_Mathimul(m,pe),we=0|we+_Mathimul(h,le),ve=0|ve+_Mathimul(h,pe),ye=0|ye+_Mathimul(c,ue),we=0|we+_Mathimul(c,fe),we=0|we+_Mathimul(u,ue),ve=0|ve+_Mathimul(u,fe);var Ie=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Ie>>>26),Ie&=67108863,ye=_Mathimul(B,q),we=_Mathimul(B,z),we=0|we+_Mathimul(U,q),ve=_Mathimul(U,z),ye=0|ye+_Mathimul(D,W),we=0|we+_Mathimul(D,V),we=0|we+_Mathimul(P,W),ve=0|ve+_Mathimul(P,V),ye=0|ye+_Mathimul(L,J),we=0|we+_Mathimul(L,K),we=0|we+_Mathimul(R,J),ve=0|ve+_Mathimul(R,K),ye=0|ye+_Mathimul(I,Y),we=0|we+_Mathimul(I,Z),we=0|we+_Mathimul(N,Y),ve=0|ve+_Mathimul(N,Z),ye=0|ye+_Mathimul(T,ee),we=0|we+_Mathimul(T,te),we=0|we+_Mathimul(A,ee),ve=0|ve+_Mathimul(A,te),ye=0|ye+_Mathimul(k,ae),we=0|we+_Mathimul(k,re),we=0|we+_Mathimul(C,ae),ve=0|ve+_Mathimul(C,re),ye=0|ye+_Mathimul(v,oe),we=0|we+_Mathimul(v,se),we=0|we+_Mathimul(x,oe),ve=0|ve+_Mathimul(x,se),ye=0|ye+_Mathimul(b,le),we=0|we+_Mathimul(b,pe),we=0|we+_Mathimul(y,le),ve=0|ve+_Mathimul(y,pe),ye=0|ye+_Mathimul(m,ue),we=0|we+_Mathimul(m,fe),we=0|we+_Mathimul(h,ue),ve=0|ve+_Mathimul(h,fe),ye=0|ye+_Mathimul(c,ge),we=0|we+_Mathimul(c,be),we=0|we+_Mathimul(u,ge),ve=0|ve+_Mathimul(u,be);var Ne=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Ne>>>26),Ne&=67108863,ye=_Mathimul(B,W),we=_Mathimul(B,V),we=0|we+_Mathimul(U,W),ve=_Mathimul(U,V),ye=0|ye+_Mathimul(D,J),we=0|we+_Mathimul(D,K),we=0|we+_Mathimul(P,J),ve=0|ve+_Mathimul(P,K),ye=0|ye+_Mathimul(L,Y),we=0|we+_Mathimul(L,Z),we=0|we+_Mathimul(R,Y),ve=0|ve+_Mathimul(R,Z),ye=0|ye+_Mathimul(I,ee),we=0|we+_Mathimul(I,te),we=0|we+_Mathimul(N,ee),ve=0|ve+_Mathimul(N,te),ye=0|ye+_Mathimul(T,ae),we=0|we+_Mathimul(T,re),we=0|we+_Mathimul(A,ae),ve=0|ve+_Mathimul(A,re),ye=0|ye+_Mathimul(k,oe),we=0|we+_Mathimul(k,se),we=0|we+_Mathimul(C,oe),ve=0|ve+_Mathimul(C,se),ye=0|ye+_Mathimul(v,le),we=0|we+_Mathimul(v,pe),we=0|we+_Mathimul(x,le),ve=0|ve+_Mathimul(x,pe),ye=0|ye+_Mathimul(b,ue),we=0|we+_Mathimul(b,fe),we=0|we+_Mathimul(y,ue),ve=0|ve+_Mathimul(y,fe),ye=0|ye+_Mathimul(m,ge),we=0|we+_Mathimul(m,be),we=0|we+_Mathimul(h,ge),ve=0|ve+_Mathimul(h,be);var je=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(je>>>26),je&=67108863,ye=_Mathimul(B,J),we=_Mathimul(B,K),we=0|we+_Mathimul(U,J),ve=_Mathimul(U,K),ye=0|ye+_Mathimul(D,Y),we=0|we+_Mathimul(D,Z),we=0|we+_Mathimul(P,Y),ve=0|ve+_Mathimul(P,Z),ye=0|ye+_Mathimul(L,ee),we=0|we+_Mathimul(L,te),we=0|we+_Mathimul(R,ee),ve=0|ve+_Mathimul(R,te),ye=0|ye+_Mathimul(I,ae),we=0|we+_Mathimul(I,re),we=0|we+_Mathimul(N,ae),ve=0|ve+_Mathimul(N,re),ye=0|ye+_Mathimul(T,oe),we=0|we+_Mathimul(T,se),we=0|we+_Mathimul(A,oe),ve=0|ve+_Mathimul(A,se),ye=0|ye+_Mathimul(k,le),we=0|we+_Mathimul(k,pe),we=0|we+_Mathimul(C,le),ve=0|ve+_Mathimul(C,pe),ye=0|ye+_Mathimul(v,ue),we=0|we+_Mathimul(v,fe),we=0|we+_Mathimul(x,ue),ve=0|ve+_Mathimul(x,fe),ye=0|ye+_Mathimul(b,ge),we=0|we+_Mathimul(b,be),we=0|we+_Mathimul(y,ge),ve=0|ve+_Mathimul(y,be);var Le=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Le>>>26),Le&=67108863,ye=_Mathimul(B,Y),we=_Mathimul(B,Z),we=0|we+_Mathimul(U,Y),ve=_Mathimul(U,Z),ye=0|ye+_Mathimul(D,ee),we=0|we+_Mathimul(D,te),we=0|we+_Mathimul(P,ee),ve=0|ve+_Mathimul(P,te),ye=0|ye+_Mathimul(L,ae),we=0|we+_Mathimul(L,re),we=0|we+_Mathimul(R,ae),ve=0|ve+_Mathimul(R,re),ye=0|ye+_Mathimul(I,oe),we=0|we+_Mathimul(I,se),we=0|we+_Mathimul(N,oe),ve=0|ve+_Mathimul(N,se),ye=0|ye+_Mathimul(T,le),we=0|we+_Mathimul(T,pe),we=0|we+_Mathimul(A,le),ve=0|ve+_Mathimul(A,pe),ye=0|ye+_Mathimul(k,ue),we=0|we+_Mathimul(k,fe),we=0|we+_Mathimul(C,ue),ve=0|ve+_Mathimul(C,fe),ye=0|ye+_Mathimul(v,ge),we=0|we+_Mathimul(v,be),we=0|we+_Mathimul(x,ge),ve=0|ve+_Mathimul(x,be);var Re=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Re>>>26),Re&=67108863,ye=_Mathimul(B,ee),we=_Mathimul(B,te),we=0|we+_Mathimul(U,ee),ve=_Mathimul(U,te),ye=0|ye+_Mathimul(D,ae),we=0|we+_Mathimul(D,re),we=0|we+_Mathimul(P,ae),ve=0|ve+_Mathimul(P,re),ye=0|ye+_Mathimul(L,oe),we=0|we+_Mathimul(L,se),we=0|we+_Mathimul(R,oe),ve=0|ve+_Mathimul(R,se),ye=0|ye+_Mathimul(I,le),we=0|we+_Mathimul(I,pe),we=0|we+_Mathimul(N,le),ve=0|ve+_Mathimul(N,pe),ye=0|ye+_Mathimul(T,ue),we=0|we+_Mathimul(T,fe),we=0|we+_Mathimul(A,ue),ve=0|ve+_Mathimul(A,fe),ye=0|ye+_Mathimul(k,ge),we=0|we+_Mathimul(k,be),we=0|we+_Mathimul(C,ge),ve=0|ve+_Mathimul(C,be);var Me=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Me>>>26),Me&=67108863,ye=_Mathimul(B,ae),we=_Mathimul(B,re),we=0|we+_Mathimul(U,ae),ve=_Mathimul(U,re),ye=0|ye+_Mathimul(D,oe),we=0|we+_Mathimul(D,se),we=0|we+_Mathimul(P,oe),ve=0|ve+_Mathimul(P,se),ye=0|ye+_Mathimul(L,le),we=0|we+_Mathimul(L,pe),we=0|we+_Mathimul(R,le),ve=0|ve+_Mathimul(R,pe),ye=0|ye+_Mathimul(I,ue),we=0|we+_Mathimul(I,fe),we=0|we+_Mathimul(N,ue),ve=0|ve+_Mathimul(N,fe),ye=0|ye+_Mathimul(T,ge),we=0|we+_Mathimul(T,be),we=0|we+_Mathimul(A,ge),ve=0|ve+_Mathimul(A,be);var De=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(De>>>26),De&=67108863,ye=_Mathimul(B,oe),we=_Mathimul(B,se),we=0|we+_Mathimul(U,oe),ve=_Mathimul(U,se),ye=0|ye+_Mathimul(D,le),we=0|we+_Mathimul(D,pe),we=0|we+_Mathimul(P,le),ve=0|ve+_Mathimul(P,pe),ye=0|ye+_Mathimul(L,ue),we=0|we+_Mathimul(L,fe),we=0|we+_Mathimul(R,ue),ve=0|ve+_Mathimul(R,fe),ye=0|ye+_Mathimul(I,ge),we=0|we+_Mathimul(I,be),we=0|we+_Mathimul(N,ge),ve=0|ve+_Mathimul(N,be);var Pe=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Pe>>>26),Pe&=67108863,ye=_Mathimul(B,le),we=_Mathimul(B,pe),we=0|we+_Mathimul(U,le),ve=_Mathimul(U,pe),ye=0|ye+_Mathimul(D,ue),we=0|we+_Mathimul(D,fe),we=0|we+_Mathimul(P,ue),ve=0|ve+_Mathimul(P,fe),ye=0|ye+_Mathimul(L,ge),we=0|we+_Mathimul(L,be),we=0|we+_Mathimul(R,ge),ve=0|ve+_Mathimul(R,be);var Oe=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Oe>>>26),Oe&=67108863,ye=_Mathimul(B,ue),we=_Mathimul(B,fe),we=0|we+_Mathimul(U,ue),ve=_Mathimul(U,fe),ye=0|ye+_Mathimul(D,ge),we=0|we+_Mathimul(D,be),we=0|we+_Mathimul(P,ge),ve=0|ve+_Mathimul(P,be);var Be=0|(0|o+ye)+((8191&we)<<13);o=0|(0|ve+(we>>>13))+(Be>>>26),Be&=67108863,ye=_Mathimul(B,ge),we=_Mathimul(B,be),we=0|we+_Mathimul(U,ge),ve=_Mathimul(U,be);var Ue=0|(0|o+ye)+((8191&we)<<13);return o=0|(0|ve+(we>>>13))+(Ue>>>26),Ue&=67108863,d[0]=xe,d[1]=_e,d[2]=ke,d[3]=Ce,d[4]=Ee,d[5]=Te,d[6]=Ae,d[7]=Se,d[8]=Ie,d[9]=Ne,d[10]=je,d[11]=Le,d[12]=Re,d[13]=Me,d[14]=De,d[15]=Pe,d[16]=Oe,d[17]=Be,d[18]=Ue,0!=o&&(d[19]=o,i.length++),i};_Mathimul||(T=i),d.prototype.mulTo=function t(n,a){var r=this.length+n.length,o;return o=10===this.length&&10===n.length?T(this,n,a):63>r?i(this,n,a):1024>r?u(this,n,a):f(this,n,a),o},m.prototype.makeRBT=function n(a){for(var r=Array(a),t=d.prototype._countBits(a)-1,o=0;o<a;o++)r[o]=this.revBin(o,t,a);return r},m.prototype.revBin=function t(n,a,r){if(0===n||n===r-1)return n;for(var o=0,s=0;s<a;s++)o|=(1&n)<<a-s-1,n>>=1;return o},m.prototype.permute=function t(n,a,r,o,s,d){for(var l=0;l<d;l++)o[l]=a[n[l]],s[l]=r[n[l]]},m.prototype.transform=function t(n,a,r,i,o,d){this.permute(d,n,a,r,i,o);for(var c=1;c<o;c<<=1)for(var s=c<<1,l=_Mathcos(2*_MathPI/s),u=_Mathsin(2*_MathPI/s),f=0;f<o;f+=s)for(var m=l,h=u,g=0;g<c;g++){var b=r[f+g],y=i[f+g],w=r[f+g+c],v=i[f+g+c],x=m*w-h*v;v=m*v+h*w,w=x,r[f+g]=b+w,i[f+g]=y+v,r[f+g+c]=b-w,i[f+g+c]=y-v,g!==s&&(x=l*m-u*h,h=l*h+u*m,m=x)}},m.prototype.guessLen13b=function t(a,n){var r=1|_Mathmax(n,a),o=1&r,s=0;for(r=0|r/2;r;r>>>=1)s++;return 1<<s+1+o},m.prototype.conjugate=function n(a,r,o){if(!(1>=o))for(var s=0,i;s<o/2;s++)i=a[s],a[s]=a[o-s-1],a[o-s-1]=i,i=r[s],r[s]=-r[o-s-1],r[o-s-1]=-i},m.prototype.normalize13b=function t(n,a){for(var r=0,o=0,i;o<a/2;o++)i=8192*_Mathround(n[2*o+1]/a)+_Mathround(n[2*o]/a)+r,n[o]=67108863&i,r=67108864>i?0:0|i/67108864;return n},m.prototype.convert13b=function t(n,a,r,s){for(var d=0,l=0;l<a;l++)d+=0|n[l],r[2*l]=8191&d,d>>>=13,r[2*l+1]=8191&d,d>>>=13;for(l=2*a;l<s;++l)r[l]=0;o(0==d),o(0==(-8192&d))},m.prototype.stub=function t(n){for(var a=Array(n),r=0;r<n;r++)a[r]=0;return a},m.prototype.mulp=function t(n,a,r){var o=2*this.guessLen13b(n.length,a.length),s=this.makeRBT(o),d=this.stub(o),l=Array(o),c=Array(o),u=Array(o),f=Array(o),m=Array(o),h=Array(o),g=r.words;g.length=o,this.convert13b(n.words,n.length,l,o),this.convert13b(a.words,a.length,f,o),this.transform(l,d,c,u,o,s),this.transform(f,d,m,h,o,s);for(var b=0,i;b<o;b++)i=c[b]*m[b]-u[b]*h[b],u[b]=c[b]*h[b]+u[b]*m[b],c[b]=i;return this.conjugate(c,u,o),this.transform(c,u,g,d,o,s),this.conjugate(g,d,o),this.normalize13b(g,o),r.negative=n.negative^a.negative,r.length=n.length+a.length,r.strip()},d.prototype.mul=function t(n){var a=new d(null);return a.words=Array(this.length+n.length),this.mulTo(n,a)},d.prototype.mulf=function t(n){var a=new d(null);return a.words=Array(this.length+n.length),f(this,n,a)},d.prototype.imul=function t(n){return this.clone().mulTo(n,this)},d.prototype.imuln=function t(n){o('number'==typeof n),o(67108864>n);for(var a=0,r=0;r<this.length;r++){var i=(0|this.words[r])*n,s=(67108863&i)+(67108863&a);a>>=26,a+=0|i/67108864,a+=s>>>26,this.words[r]=67108863&s}return 0!=a&&(this.words[r]=a,this.length++),this},d.prototype.muln=function t(n){return this.clone().imuln(n)},d.prototype.sqr=function t(){return this.mul(this)},d.prototype.isqr=function t(){return this.imul(this.clone())},d.prototype.pow=function t(n){var a=c(n);if(0===a.length)return new d(1);for(var r=this,o=0;o<a.length&&!(0!==a[o]);o++,r=r.sqr());if(++o<a.length)for(var i=r.sqr();o<a.length;o++,i=i.sqr())0!==a[o]&&(r=r.mul(i));return r},d.prototype.iushln=function t(n){o('number'==typeof n&&0<=n);var a=n%26,r=(n-a)/26,s=67108863>>>26-a<<26-a,d;if(0!=a){var i=0;for(d=0;d<this.length;d++){var l=this.words[d]&s,u=(0|this.words[d])-l<<a;this.words[d]=u|i,i=l>>>26-a}i&&(this.words[d]=i,this.length++)}if(0!=r){for(d=this.length-1;0<=d;d--)this.words[d+r]=this.words[d];for(d=0;d<r;d++)this.words[d]=0;this.length+=r}return this.strip()},d.prototype.ishln=function t(n){return o(0===this.negative),this.iushln(n)},d.prototype.iushrn=function t(n,a,d){o('number'==typeof n&&0<=n);var l;l=a?(a-a%26)/26:0;var c=n%26,r=_Mathmin((n-c)/26,this.length),s=67108863^67108863>>>c<<c,u=d;if(l-=r,l=_Mathmax(0,l),u){for(var f=0;f<r;f++)u.words[f]=this.words[f];u.length=r}if(0===r);else if(this.length>r)for(this.length-=r,f=0;f<this.length;f++)this.words[f]=this.words[f+r];else this.words[0]=0,this.length=1;var i=0;for(f=this.length-1;0<=f&&(0!=i||f>=l);f--){var m=0|this.words[f];this.words[f]=i<<26-c|m>>>c,i=m&s}return u&&0!=i&&(u.words[u.length++]=i),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},d.prototype.ishrn=function t(n,a,r){return o(0===this.negative),this.iushrn(n,a,r)},d.prototype.shln=function t(n){return this.clone().ishln(n)},d.prototype.ushln=function t(n){return this.clone().iushln(n)},d.prototype.shrn=function t(n){return this.clone().ishrn(n)},d.prototype.ushrn=function t(n){return this.clone().iushrn(n)},d.prototype.testn=function t(n){o('number'==typeof n&&0<=n);var a=n%26,r=(n-a)/26,i=1<<a;if(this.length<=r)return!1;var s=this.words[r];return!!(s&i)},d.prototype.imaskn=function t(n){o('number'==typeof n&&0<=n);var a=n%26,r=(n-a)/26;if(o(0===this.negative,'imaskn works only with positive numbers'),this.length<=r)return this;if(0!=a&&r++,this.length=_Mathmin(r,this.length),0!=a){var i=67108863^67108863>>>a<<a;this.words[this.length-1]&=i}return this.strip()},d.prototype.maskn=function t(n){return this.clone().imaskn(n)},d.prototype.iaddn=function t(n){return o('number'==typeof n),o(67108864>n),0>n?this.isubn(-n):0===this.negative?this._iaddn(n):1===this.length&&(0|this.words[0])<n?(this.words[0]=n-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(n),this.negative=1,this)},d.prototype._iaddn=function t(n){this.words[0]+=n;for(var a=0;a<this.length&&67108864<=this.words[a];a++)this.words[a]-=67108864,a===this.length-1?this.words[a+1]=1:this.words[a+1]++;return this.length=_Mathmax(this.length,a+1),this},d.prototype.isubn=function t(n){if(o('number'==typeof n),o(67108864>n),0>n)return this.iaddn(-n);if(0!==this.negative)return this.negative=0,this.iaddn(n),this.negative=1,this;if(this.words[0]-=n,1===this.length&&0>this.words[0])this.words[0]=-this.words[0],this.negative=1;else for(var a=0;a<this.length&&0>this.words[a];a++)this.words[a]+=67108864,this.words[a+1]-=1;return this.strip()},d.prototype.addn=function t(n){return this.clone().iaddn(n)},d.prototype.subn=function t(n){return this.clone().isubn(n)},d.prototype.iabs=function t(){return this.negative=0,this},d.prototype.abs=function t(){return this.clone().iabs()},d.prototype._ishlnsubmul=function t(n,a,r){var s=n.length+r,d;this._expand(s);var i=0,l;for(d=0;d<n.length;d++){l=(0|this.words[d+r])+i;var c=(0|n.words[d])*a;l-=67108863&c,i=(l>>26)-(0|c/67108864),this.words[d+r]=67108863&l}for(;d<this.length-r;d++)l=(0|this.words[d+r])+i,i=l>>26,this.words[d+r]=67108863&l;if(0==i)return this.strip();for(o(-1==i),i=0,d=0;d<this.length;d++)l=-(0|this.words[d])+i,i=l>>26,this.words[d]=67108863&l;return this.negative=1,this.strip()},d.prototype._wordDiv=function t(n,r){var o=this.length-n.length,s=this.clone(),l=n,c=0|l.words[l.length-1],u=this._countBits(c);o=26-u,0!=o&&(l=l.ushln(o),s.iushln(o),c=0|l.words[l.length-1]);var f=s.length-l.length,m;if('mod'!==r){m=new d(null),m.length=f+1,m.words=Array(m.length);for(var h=0;h<m.length;h++)m.words[h]=0}var i=s.clone()._ishlnsubmul(l,1,f);0===i.negative&&(s=i,m&&(m.words[f]=1));for(var g=f-1,b;0<=g;g--){for(b=67108864*(0|s.words[l.length+g])+(0|s.words[l.length+g-1]),b=_Mathmin(0|b/c,67108863),s._ishlnsubmul(l,b,g);0!==s.negative;)b--,s.negative=0,s._ishlnsubmul(l,1,g),s.isZero()||(s.negative^=1);m&&(m.words[g]=b)}return m&&m.strip(),s.strip(),'div'!==r&&0!=o&&s.iushrn(o),{div:m||null,mod:s}},d.prototype.divmod=function t(n,a,r){if(o(!n.isZero()),this.isZero())return{div:new d(0),mod:new d(0)};var i,s,l;return 0!==this.negative&&0===n.negative?(l=this.neg().divmod(n,a),'mod'!==a&&(i=l.div.neg()),'div'!==a&&(s=l.mod.neg(),r&&0!==s.negative&&s.iadd(n)),{div:i,mod:s}):0===this.negative&&0!==n.negative?(l=this.divmod(n.neg(),a),'mod'!==a&&(i=l.div.neg()),{div:i,mod:l.mod}):0==(this.negative&n.negative)?n.length>this.length||0>this.cmp(n)?{div:new d(0),mod:this}:1===n.length?'div'===a?{div:this.divn(n.words[0]),mod:null}:'mod'===a?{div:null,mod:new d(this.modn(n.words[0]))}:{div:this.divn(n.words[0]),mod:new d(this.modn(n.words[0]))}:this._wordDiv(n,a):(l=this.neg().divmod(n.neg(),a),'div'!==a&&(s=l.mod.neg(),r&&0!==s.negative&&s.isub(n)),{div:l.div,mod:s})},d.prototype.div=function t(n){return this.divmod(n,'div',!1).div},d.prototype.mod=function t(n){return this.divmod(n,'mod',!1).mod},d.prototype.umod=function t(n){return this.divmod(n,'mod',!0).mod},d.prototype.divRound=function t(n){var a=this.divmod(n);if(a.mod.isZero())return a.div;var r=0===a.div.negative?a.mod:a.mod.isub(n),i=n.ushrn(1),o=n.andln(1),s=r.cmp(i);return 0>s||1===o&&0===s?a.div:0===a.div.negative?a.div.iaddn(1):a.div.isubn(1)},d.prototype.modn=function t(n){o(67108863>=n);for(var a=67108864%n,r=0,s=this.length-1;0<=s;s--)r=(a*r+(0|this.words[s]))%n;return r},d.prototype.idivn=function t(n){o(67108863>=n);for(var a=0,r=this.length-1,i;0<=r;r--)i=(0|this.words[r])+67108864*a,this.words[r]=0|i/n,a=i%n;return this.strip()},d.prototype.divn=function t(n){return this.clone().idivn(n)},d.prototype.egcd=function t(n){o(0===n.negative),o(!n.isZero());var a=this,r=n.clone();a=0===a.negative?a.clone():a.umod(n);for(var s=new d(1),l=new d(0),c=new d(0),u=new d(1),f=0;a.isEven()&&r.isEven();)a.iushrn(1),r.iushrn(1),++f;for(var m=r.clone(),h=a.clone();!a.isZero();){for(var g=0,i=1;0==(a.words[0]&i)&&26>g;++g,i<<=1);if(0<g)for(a.iushrn(g);0<g--;)(s.isOdd()||l.isOdd())&&(s.iadd(m),l.isub(h)),s.iushrn(1),l.iushrn(1);for(var b=0,y=1;0==(r.words[0]&y)&&26>b;++b,y<<=1);if(0<b)for(r.iushrn(b);0<b--;)(c.isOdd()||u.isOdd())&&(c.iadd(m),u.isub(h)),c.iushrn(1),u.iushrn(1);0<=a.cmp(r)?(a.isub(r),s.isub(c),l.isub(u)):(r.isub(a),c.isub(s),u.isub(l))}return{a:c,b:u,gcd:r.iushln(f)}},d.prototype._invmp=function t(n){o(0===n.negative),o(!n.isZero());var r=this,a=n.clone();r=0===r.negative?r.clone():r.umod(n);for(var s=new d(1),l=new d(0),c=a.clone();0<r.cmpn(1)&&0<a.cmpn(1);){for(var u=0,i=1;0==(r.words[0]&i)&&26>u;++u,i<<=1);if(0<u)for(r.iushrn(u);0<u--;)s.isOdd()&&s.iadd(c),s.iushrn(1);for(var f=0,m=1;0==(a.words[0]&m)&&26>f;++f,m<<=1);if(0<f)for(a.iushrn(f);0<f--;)l.isOdd()&&l.iadd(c),l.iushrn(1);0<=r.cmp(a)?(r.isub(a),s.isub(l)):(a.isub(r),l.isub(s))}var h;return h=0===r.cmpn(1)?s:l,0>h.cmpn(0)&&h.iadd(n),h},d.prototype.gcd=function n(i){if(this.isZero())return i.abs();if(i.isZero())return this.abs();var o=this.clone(),a=i.clone();o.negative=0,a.negative=0;for(var s=0;o.isEven()&&a.isEven();s++)o.iushrn(1),a.iushrn(1);do{for(;o.isEven();)o.iushrn(1);for(;a.isEven();)a.iushrn(1);var d=o.cmp(a);if(0>d){var r=o;o=a,a=r}else if(0===d||0===a.cmpn(1))break;o.isub(a)}while(!0);return a.iushln(s)},d.prototype.invm=function t(n){return this.egcd(n).a.umod(n)},d.prototype.isEven=function t(){return 0==(1&this.words[0])},d.prototype.isOdd=function t(){return 1==(1&this.words[0])},d.prototype.andln=function t(n){return this.words[0]&n},d.prototype.bincn=function t(n){o('number'==typeof n);var a=n%26,r=(n-a)/26,s=1<<a;if(this.length<=r)return this._expand(r+1),this.words[r]|=s,this;for(var d=s,l=r,i;0!=d&&l<this.length;l++)i=0|this.words[l],i+=d,d=i>>>26,i&=67108863,this.words[l]=i;return 0!=d&&(this.words[l]=d,this.length++),this},d.prototype.isZero=function t(){return 1===this.length&&0===this.words[0]},d.prototype.cmpn=function t(n){var a=0>n;if(0!==this.negative&&!a)return-1;if(0===this.negative&&a)return 1;this.strip();var r;if(1<this.length)r=1;else{a&&(n=-n),o(67108863>=n,'Number is too big');var i=0|this.words[0];r=i===n?0:i<n?-1:1}return 0===this.negative?r:0|-r},d.prototype.cmp=function t(n){if(0!==this.negative&&0===n.negative)return-1;if(0===this.negative&&0!==n.negative)return 1;var a=this.ucmp(n);return 0===this.negative?a:0|-a},d.prototype.ucmp=function t(n){if(this.length>n.length)return 1;if(this.length<n.length)return-1;for(var r=0,o=this.length-1;0<=o;o--){var i=0|this.words[o],a=0|n.words[o];if(i!=a){i<a?r=-1:i>a&&(r=1);break}}return r},d.prototype.gtn=function t(n){return 1===this.cmpn(n)},d.prototype.gt=function t(n){return 1===this.cmp(n)},d.prototype.gten=function t(n){return 0<=this.cmpn(n)},d.prototype.gte=function t(n){return 0<=this.cmp(n)},d.prototype.ltn=function t(n){return-1===this.cmpn(n)},d.prototype.lt=function t(n){return-1===this.cmp(n)},d.prototype.lten=function t(n){return 0>=this.cmpn(n)},d.prototype.lte=function t(n){return 0>=this.cmp(n)},d.prototype.eqn=function t(n){return 0===this.cmpn(n)},d.prototype.eq=function t(n){return 0===this.cmp(n)},d.red=function t(n){return new v(n)},d.prototype.toRed=function t(n){return o(!this.red,'Already a number in reduction context'),o(0===this.negative,'red works only with positives'),n.convertTo(this)._forceRed(n)},d.prototype.fromRed=function t(){return o(this.red,'fromRed works only with numbers in reduction context'),this.red.convertFrom(this)},d.prototype._forceRed=function t(n){return this.red=n,this},d.prototype.forceRed=function t(n){return o(!this.red,'Already a number in reduction context'),this._forceRed(n)},d.prototype.redAdd=function t(n){return o(this.red,'redAdd works only with red numbers'),this.red.add(this,n)},d.prototype.redIAdd=function t(n){return o(this.red,'redIAdd works only with red numbers'),this.red.iadd(this,n)},d.prototype.redSub=function t(n){return o(this.red,'redSub works only with red numbers'),this.red.sub(this,n)},d.prototype.redISub=function t(n){return o(this.red,'redISub works only with red numbers'),this.red.isub(this,n)},d.prototype.redShl=function t(n){return o(this.red,'redShl works only with red numbers'),this.red.shl(this,n)},d.prototype.redMul=function t(n){return o(this.red,'redMul works only with red numbers'),this.red._verify2(this,n),this.red.mul(this,n)},d.prototype.redIMul=function t(n){return o(this.red,'redMul works only with red numbers'),this.red._verify2(this,n),this.red.imul(this,n)},d.prototype.redSqr=function t(){return o(this.red,'redSqr works only with red numbers'),this.red._verify1(this),this.red.sqr(this)},d.prototype.redISqr=function t(){return o(this.red,'redISqr works only with red numbers'),this.red._verify1(this),this.red.isqr(this)},d.prototype.redSqrt=function t(){return o(this.red,'redSqrt works only with red numbers'),this.red._verify1(this),this.red.sqrt(this)},d.prototype.redInvm=function t(){return o(this.red,'redInvm works only with red numbers'),this.red._verify1(this),this.red.invm(this)},d.prototype.redNeg=function t(){return o(this.red,'redNeg works only with red numbers'),this.red._verify1(this),this.red.neg(this)},d.prototype.redPow=function t(n){return o(this.red&&!n.red,'redPow(normalNum)'),this.red._verify1(this),this.red.pow(this,n)};var A={k256:null,p224:null,p192:null,p25519:null};h.prototype._tmp=function t(){var n=new d(null);return n.words=Array(_Mathceil(this.n/13)),n},h.prototype.ireduce=function t(n){var a=n,r;do this.split(a,this.tmp),a=this.imulK(a),a=a.iadd(this.tmp),r=a.bitLength();while(r>this.n);var i=r<this.n?-1:a.ucmp(this.p);return 0===i?(a.words[0]=0,a.length=1):0<i?a.isub(this.p):a.strip(),a},h.prototype.split=function t(n,a){n.iushrn(this.n,0,a)},h.prototype.imulK=function t(n){return n.imul(this.k)},r(g,h),g.prototype.split=function t(n,a){for(var r=4194303,o=_Mathmin(n.length,9),s=0;s<o;s++)a.words[s]=n.words[s];if(a.length=o,9>=n.length)return n.words[0]=0,void(n.length=1);var i=n.words[9];for(a.words[a.length++]=i&r,s=10;s<n.length;s++){var d=0|n.words[s];n.words[s-10]=(d&r)<<4|i>>>22,i=d}i>>>=22,n.words[s-10]=i,n.length-=0===i&&10<n.length?10:9},g.prototype.imulK=function t(n){n.words[n.length]=0,n.words[n.length+1]=0,n.length+=2;for(var a=0,r=0,i;r<n.length;r++)i=0|n.words[r],a+=977*i,n.words[r]=67108863&a,a=64*i+(0|a/67108864);return 0===n.words[n.length-1]&&(n.length--,0===n.words[n.length-1]&&n.length--),n},r(b,h),r(y,h),r(w,h),w.prototype.imulK=function t(n){for(var a=0,r=0;r<n.length;r++){var i=19*(0|n.words[r])+a,o=67108863&i;i>>>=26,n.words[r]=o,a=i}return 0!=a&&(n.words[n.length++]=a),n},d._prime=function t(n){if(A[n])return A[n];var t;if('k256'===n)t=new g;else if('p224'===n)t=new b;else if('p192'===n)t=new y;else if('p25519'===n)t=new w;else throw new Error('Unknown prime '+n);return A[n]=t,t},v.prototype._verify1=function t(n){o(0===n.negative,'red works only with positives'),o(n.red,'red works only with red numbers')},v.prototype._verify2=function t(n,a){o(0==(n.negative|a.negative),'red works only with positives'),o(n.red&&n.red===a.red,'red works only with red numbers')},v.prototype.imod=function t(n){return this.prime?this.prime.ireduce(n)._forceRed(this):n.umod(this.m)._forceRed(this)},v.prototype.neg=function t(n){return n.isZero()?n.clone():this.m.sub(n)._forceRed(this)},v.prototype.add=function t(n,a){this._verify2(n,a);var r=n.add(a);return 0<=r.cmp(this.m)&&r.isub(this.m),r._forceRed(this)},v.prototype.iadd=function t(n,a){this._verify2(n,a);var r=n.iadd(a);return 0<=r.cmp(this.m)&&r.isub(this.m),r},v.prototype.sub=function t(n,a){this._verify2(n,a);var r=n.sub(a);return 0>r.cmpn(0)&&r.iadd(this.m),r._forceRed(this)},v.prototype.isub=function t(n,a){this._verify2(n,a);var r=n.isub(a);return 0>r.cmpn(0)&&r.iadd(this.m),r},v.prototype.shl=function t(n,a){return this._verify1(n),this.imod(n.ushln(a))},v.prototype.imul=function t(n,a){return this._verify2(n,a),this.imod(n.imul(a))},v.prototype.mul=function t(n,a){return this._verify2(n,a),this.imod(n.mul(a))},v.prototype.isqr=function t(n){return this.imul(n,n.clone())},v.prototype.sqr=function t(n){return this.mul(n,n)},v.prototype.sqrt=function n(l){if(l.isZero())return l.clone();var a=this.m.andln(3);if(o(1==a%2),3===a){var u=this.m.add(new d(1)).iushrn(2);return this.pow(l,u)}for(var f=this.m.subn(1),h=0;!f.isZero()&&0===f.andln(1);)h++,f.iushrn(1);o(!f.isZero());var s=new d(1).toRed(this),g=s.redNeg(),y=this.m.subn(1).iushrn(1),w=this.m.bitLength();for(w=new d(2*w*w).toRed(this);0!==this.pow(w,y).cmp(g);)w.redIAdd(g);for(var v=this.pow(w,f),c=this.pow(l,f.addn(1).iushrn(1)),r=this.pow(l,f),t=h;0!==r.cmp(s);){for(var m=r,x=0;0!==m.cmp(s);x++)m=m.redSqr();o(x<t);var i=this.pow(v,new d(1).iushln(t-x-1));c=c.redMul(i),v=i.redSqr(),r=r.redMul(v),t=x}return c},v.prototype.invm=function t(n){var a=n._invmp(this.m);return 0===a.negative?this.imod(a):(a.negative=0,this.imod(a).redNeg())},v.prototype.pow=function t(n,a){if(a.isZero())return new d(1).toRed(this);if(0===a.cmpn(1))return n.clone();var r=4,o=Array(1<<r);o[0]=new d(1).toRed(this),o[1]=n;for(var s=2;s<o.length;s++)o[s]=this.mul(o[s-1],n);var i=o[0],l=0,c=0,u=a.bitLength()%26;for(0==u&&(u=26),s=a.length-1;0<=s;s--){for(var f=a.words[s],m=u-1,h;0<=m;m--){if(h=1&f>>m,i!==o[0]&&(i=this.sqr(i)),0==h&&0==l){c=0;continue}l<<=1,l|=h,c++,c!=r&&(0!==s||0!==m)||(i=this.mul(i,o[l]),c=0,l=0)}u=26}return i},v.prototype.convertTo=function t(n){var a=n.umod(this.m);return a===n?a.clone():a},v.prototype.convertFrom=function t(n){var a=n.clone();return a.red=null,a},d.mont=function t(n){return new x(n)},r(x,v),x.prototype.convertTo=function t(n){return this.imod(n.ushln(this.shift))},x.prototype.convertFrom=function t(n){var a=this.imod(n.mul(this.rinv));return a.red=null,a},x.prototype.imul=function n(r,a){if(r.isZero()||a.isZero())return r.words[0]=0,r.length=1,r;var i=r.imul(a),t=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=i.isub(t).iushrn(this.shift),s=o;return 0<=o.cmp(this.m)?s=o.isub(this.m):0>o.cmpn(0)&&(s=o.iadd(this.m)),s._forceRed(this)},x.prototype.mul=function n(r,a){if(r.isZero()||a.isZero())return new d(0)._forceRed(this);var i=r.mul(a),t=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=i.isub(t).iushrn(this.shift),s=o;return 0<=o.cmp(this.m)?s=o.isub(this.m):0>o.cmpn(0)&&(s=o.iadd(this.m)),s._forceRed(this)},x.prototype.invm=function t(n){var a=this.imod(n._invmp(this.m).mul(this.r2));return a._forceRed(this)}})('undefined'==typeof t||t,this)}).call(n,a(9)(t))},function(t,n){},function(t,n,a){n.publicEncrypt=a(437),n.privateDecrypt=a(439),n.privateEncrypt=function t(a,r){return n.publicEncrypt(a,r,!0)},n.publicDecrypt=function t(a,r){return n.privateDecrypt(a,r,!0)}},function(t,n,a){(function(n){function r(t,a){var r=t.modulus.byteLength(),i=a.length,o=l('sha1').update(new n('')).digest(),s=o.length,m=2*s;if(i>r-m-2)throw new Error('message too long');var h=new n(r-i-m-2);h.fill(0);var g=r-s-1,b=d(s),y=u(n.concat([o,h,new n([1]),a],g),c(b,g)),w=u(b,c(y,s));return new f(n.concat([new n([0]),w,y],r))}function i(t,a,r){var i=a.length,s=t.modulus.byteLength();if(i>s-11)throw new Error('message too long');var d;return r?(d=new n(s-i-3),d.fill(255)):d=o(s-i-3),new f(n.concat([new n([0,r?1:2]),d,new n([0]),a],s))}function o(t,a){for(var r=new n(t),o=0,i=d(2*t),s=0,l;o<t;)s===i.length&&(i=d(2*t),s=0),l=i[s++],l&&(r[o++]=l);return r}var s=a(94),d=a(55),l=a(66),c=a(240),u=a(241),f=a(142),m=a(242),h=a(140),g={RSA_PKCS1_OAEP_PADDING:4,RSA_PKCS1_PADDIN:1,RSA_NO_PADDING:3};t.exports=function t(n,a,o){var d;d=n.padding?n.padding:o?1:4;var l=s(n),c;if(4===d)c=r(l,a);else if(1===d)c=i(l,a,o);else if(3!==d)throw new Error('unknown padding');else if(c=new f(a),0<=c.cmp(l.modulus))throw new Error('data too long for modulus');return o?h(c,l):m(c,l)}}).call(n,a(2).Buffer)},function(t,n){},function(t,n,a){(function(r){function n(t,a){var s=t.modulus,n=t.modulus.byteLength(),c=a.length,u=f('sha1').update(new r('')).digest(),m=u.length,h=2*m;if(0!==a[0])throw new Error('decryption error');var g=a.slice(1,m+1),b=a.slice(m+1),y=l(g,d(b,m)),w=l(b,d(y,n-m-1));if(o(u,w.slice(0,m)))throw new Error('decryption error');for(var v=m;0===w[v];)v++;if(1!==w[v++])throw new Error('decryption error');return w.slice(v)}function i(t,n,a){for(var r=n.slice(0,2),o=2,i=0;0!==n[o++];)if(o>=n.length){i++;break}var s=n.slice(2,o-1),d=n.slice(o-1,o);if(('0002'!==r.toString('hex')&&!a||'0001'!==r.toString('hex')&&a)&&i++,8>s.length&&i++,i)throw new Error('decryption error');return n.slice(o)}function o(t,n){t=new r(t),n=new r(n);var a=0,o=t.length;t.length!==n.length&&(a++,o=_Mathmin(t.length,n.length));for(var s=-1;++s<o;)a+=t[s]^n[s];return a}var s=a(94),d=a(240),l=a(241),c=a(142),u=a(140),f=a(66),m=a(242);t.exports=function t(a,o,d){var l;l=a.padding?a.padding:d?1:4;var f=s(a),h=f.modulus.byteLength();if(o.length>h||0<=new c(o).cmp(f.modulus))throw new Error('decryption error');var g;g=d?m(new c(o),f):u(o,f);var b=new r(h-g.length);if(b.fill(0),g=r.concat([b,g],h),4===l)return n(f,g);if(1===l)return i(f,g,d);if(3===l)return g;throw new Error('unknown padding')}}).call(n,a(2).Buffer)},function(t,n,a){'use strict';(function(t,r){function i(){throw new Error('secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11')}function o(t,n){if('number'!=typeof t||t!==t)throw new TypeError('offset must be a number');if(t>b||0>t)throw new TypeError('offset must be a uint32');if(t>h||t>n)throw new RangeError('offset out of range')}function s(t,n,a){if('number'!=typeof t||t!==t)throw new TypeError('size must be a number');if(t>b||0>t)throw new TypeError('size must be a uint32');if(t+n>a||t>h)throw new RangeError('buffer too small')}function d(n,a,r,i){if(!m.isBuffer(n)&&!(n instanceof t.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if('function'==typeof a)i=a,a=0,r=n.length;else if('function'==typeof r)i=r,r=n.length-a;else if('function'!=typeof i)throw new TypeError('"cb" argument must be a function');return o(a,n.length),s(r,a,n.length),l(n,a,r,i)}function l(t,n,a,i){if(r.browser){var o=t.buffer,s=new Uint8Array(o,n,a);return g.getRandomValues(s),i?void r.nextTick(function(){i(null,t)}):t}if(i)return void f(a,function(a,r){return a?i(a):void(r.copy(t,n),i(null,t))});var d=f(a);return d.copy(t,n),t}function c(n,a,r){if('undefined'==typeof a&&(a=0),!m.isBuffer(n)&&!(n instanceof t.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');return o(a,n.length),void 0===r&&(r=n.length-a),s(r,a,n.length),l(n,a,r)}var u=a(3),f=a(55),m=u.Buffer,h=u.kMaxLength,g=t.crypto||t.msCrypto,b=4294967295;g&&g.getRandomValues||!r.browser?(n.randomFill=d,n.randomFillSync=c):(n.randomFill=i,n.randomFillSync=i)}).call(n,a(5),a(11))},function(t,n,a){'use strict';var r={};r.acl=a(210),r.icons=a(23),r.ns=a(14),r.widgets=a(26),r.style=a(71),r.utils=a(28),r.aclControl=t.exports={},r.aclControl.preventBrowserDropEvents=function(t){function n(t){t.stopPropagation(),t.preventDefault()}function a(t){0<t.dataTransfer.files.length&&!confirm('Are you sure you want to drop this file here? (Cancel opens it in a new tab)')&&(t.stopPropagation(),t.preventDefault(),console.log('@@@@ document-level DROP suppressed: '+t.dataTransfer.dropEffect))}if(console.log('preventBrowserDropEvents called.'),'undefined'!=typeof window){if(window.preventBrowserDropEventsDone)return;window.preventBrowserDropEventsDone=!0}t.addEventListener('drop',a,!1),t.addEventListener('dragenter',n,!1),t.addEventListener('dragover',n,!1)},r.aclControl.shortNameForFolder=function(t){var n=t.uri;'/'===n.slice(-1)&&(n=n.slice(0,-1));var a=n.lastIndexOf('/');return 0<=a&&(n=n.slice(a+1)),n||'/'},r.aclControl.ACLControlBox5=function(t,n,i,o,a){function s(a,i,o,s,d){var c=d.doingDefault?'default':'main';d=d||{};var u=r.acl.readACL(i,o,s,d.doingDefaults),f;a[c]=f=r.acl.ACLbyCombination(u);var m=function t(n){for(var a=['Read','Append','Write','Control'],r=[],o=0;4>o;o++)n&1<<o&&r.push('http://www.w3.org/ns/auth/acl#'+a[o]);return r.sort(),r=r.join('\n'),r},h={1:'Viewers',2:'Submitters',3:'Posters',5:'Editors',9:'Owners (write locked)',13:'Owners'},g={1:!0,2:!0,3:!0,5:!0,13:!0},b={1:'can read but not change information',2:'can add new information but not read any',3:'can add new information, and read but not change existing information',5:'can read and change information',9:'can read and control sharing, currently write-locked.',13:'can read, write, and control sharing.'},y={1:'green',2:'#cc0',3:'orange',5:'red',9:'blue',13:'purple'},w=function t(n){for(var a='',r=['Read','Append','Write','Control'],o=0;4>o;o++)n&1<<o&&(a+=r[o]);return a},v=function t(n){for(var r=0,o;16>r;r++)if(o=f[m(r)],o)for(var a=0;a<o.length;a++)for(;a<o.length&&o[a][1]===n;)o.splice(a,1)},x=function t(n){var a=r.ns,i=$rdf.sym(n),o=s.findTypeURIs(i);for(var d in o)console.log('    drop object type includes: '+d);if(n.startsWith('http')&&3===n.split('/').length)return{pred:'origin',obj:i};if(a.vcard('WebID').uri in o)return{pred:'agent',obj:i};if(a.vcard('Group').uri in o)return{pred:'agentGroup',obj:i};if(i.sameTerm(a.foaf('Agent'))||i.sameTerm(a.rdf('Resource'))||i.sameTerm(a.owl('Thing')))return{pred:'agentClass',obj:i};if(a.vcard('Individual').uri in o||a.foaf('Person').uri in o||a.foaf('Agent').uri in o){var l=s.any(i,a.foaf('preferredURI'));return l?{pred:'agent',obj:$rdf.sym(l)}:{pred:'agent',obj:i}}return a.solid('AppProvider').uri in o?{pred:'origin',obj:i}:a.solid('AppProviderClass').uri in o?{pred:'originClass',obj:i}:void console.log('    Triage fails for '+n)};a.saveBack=function(t){var n=$rdf.graph();a.isContainer?a.defaultsDiffer?(r.acl.makeACLGraphbyCombo(n,i,a.mainByCombo,o,!0),r.acl.makeACLGraphbyCombo(n,i,a.defByCombo,o,!1,!0)):r.acl.makeACLGraphbyCombo(n,i,a.mainByCombo,o,!0,!0):r.acl.makeACLGraphbyCombo(n,i,a.mainByCombo,o,!0);var d=n.updater||new $rdf.UpdateManager(n);d.put(o,n.statementsMatching(void 0,void 0,void 0,o),'text/turtle',function(a,r,i){var d=null;r?(s.fetcher.unload(o),s.add(n.statements),s.fetcher.requested[o.uri]='done',console.log('ACL modification: success!')):(d='ACL file save failed: '+i,console.log(d)),t(r,d)})};var _=function i(o,c){var u=a.appendChild(n.createElement('tr'));u.combo=c,u.setAttribute('style','color: '+(d.modify?y[E]||'black':'#888')+';');var f=u.appendChild(n.createElement('td'));f.textContent=h[E]||w[E],f.setAttribute('style','padding-bottom: 2em;');var m=u.appendChild(n.createElement('td')),g=m.appendChild(n.createElement('table'));g.style.width='100%';var _=u.appendChild(n.createElement('td'));_.textContent=b[E]||'Unusual combination',_.setAttribute('style','max-width: 30%;');var k=function t(i,s){g.NoneTR&&(g.removeChild(g.NoneTR),delete g.NoneTR);var u={};d.modify&&(u.deleteFunction=function t(){for(var n=o[c],r=0;r<n.length;r++)if(n[r][0]===i&&n[r][1]===s){n.splice(r,1);break}a.saveBack(function(t,n){t?g.removeChild(f):alert(n)})});var f=g.appendChild(r.widgets.personTR(n,l(i),$rdf.sym(s),u));f.predObj=[i.uri,s.uri]},T=function t(s){var d=o[s],l;if(d&&d.length){var i=g.children;d.sort();for(var c=0;c<i.length;c++)i[c].trashme=!0;for(var u=0,a;u<d.length;u++){for(a=!1,l=0;l<i.length;l++)if(i[l].predObj&&i[l].predObj[0]===d[u][0]&&i[l].predObj[1]===d[u][1]){a=!0,delete i[l].trashme;break}a||k(d[u][0],d[u][1])}for(l=i.length-1;0<=l;l--)i[l].trashme&&g.removeChild(i[l])}else{r.widgets.clearElement(g);var f=g.appendChild(n.createElement('tr'));f.textContent='None',f.setAttribute('style','padding: 1em;'),g.NoneTR=f}};T(c),u.refresh=function(){T(c)},d.modify&&(u.addEventListener('dragover',function(t){t.preventDefault(),t.dataTransfer.dropEffect='copy'}),u.addEventListener('dragenter',function(t){console.log('dragenter event dropEffect: '+t.dataTransfer.dropEffect),this.style.backgroundColor='#ccc',t.dataTransfer.dropEffect='link',console.log('dragenter event dropEffect 2: '+t.dataTransfer.dropEffect)}),u.addEventListener('dragleave',function(t){console.log('dragleave event dropEffect: '+t.dataTransfer.dropEffect),this.style.backgroundColor='white'}),u.addEventListener('drop',function(n){n.preventDefault&&n.preventDefault(),console.log('Drop event. dropEffect: '+n.dataTransfer.dropEffect),console.log('Drop event. types: '+(n.dataTransfer.types?n.dataTransfer.types.join(', '):'NOPE'));var r=null,i=this,d;if(n.dataTransfer.types){for(var l=0,u;l<n.dataTransfer.types.length;l++)u=n.dataTransfer.types[l],'text/uri-list'===u?(r=n.dataTransfer.getData(u).split('\n'),console.log('Dropped text/uri-list: '+r)):'text/plain'===u&&(d=n.dataTransfer.getData(u));null===r&&d&&'http'===d.slice(0,4)&&(r=d,console.log('Waring: Poor man\'s drop: using text for URI'))}else r=[n.dataTransfer.getData('Text')],console.log('@@ WARNING non-standrad drop event: '+r[0]);return console.log('Dropped URI list (2): '+r),r&&r.map(function(n){var r=function r(){c in o||(o[c]=[]),v(n),o[c].push([d.pred,d.obj.uri]),console.log('ACL: setting access to '+t+' by '+d.pred+': '+d.obj),a.saveBack(function(t,n){t?(i.style.backgroundColor='white',C()):alert(n)})},d=x(n);d?r():(console.log('   looking up dropped thing '+n),s.fetcher.nowOrWhenFetched(n,function(t,a){t?(d=x(n),d?r():console.log('Error: Drop fails to drop appropriate thing! '+n)):console.log('Error looking up dropped thing '+n+': '+a)}))}),!1}))},C=function t(){for(var n=a.children,r=0;r<n.length;r++)n[r].refresh&&n[r].refresh()},E,k;for(E=15;0<E;E--)k=m(E),(d.modify&&g[E]||f[k])&&_(f,k);return f}var d=o.updater||new $rdf.UpdateManager(o),l=r.ns.acl,c=t.doc(),u=n.createElement('table');u.setAttribute('style','margin: 1em; border: 0.1em #ccc ;');var f=u.appendChild(n.createElement('tr'));f.textContent='Sharing for '+i+' '+r.utils.label(t),f.setAttribute('style','min-width: 20em; padding: 1em; font-size: 120%; border-bottom: 0.1em solid red; margin-bottom: 2em;');var m=u.appendChild(n.createElement('tr')),h=m.appendChild(n.createElement('td')),g=h.appendChild(n.createElement('div'));g.setAttribute('style','padding: 2em;');var b=u.appendChild(n.createElement('tr')),y=b.appendChild(n.createElement('table')),w=u.appendChild(n.createElement('tr')),v=w.appendChild(n.createElement('td')),x=v.appendChild(r.widgets.button(n,r.icons.iconBase+'noun_98053.svg','Public'));r.widgets.makeDraggable(x,r.ns.foaf('Agent'));var _='border-radius: 0.3em; background-color: white; border: 0.1em solid #888;',k=function t(){y.innerHTML='',r.acl.getACLorDefault(c,function(u,f,m,h,b,v){var x=!f;if(!u)g.textContent+='Error reading '+(x?' default ':'')+'ACL. status '+m+': '+h;else if(y.isContainer='/'===m.uri.slice(-1),x){var k=o.each(void 0,l('defaultForNew'),b,v);if(!k.length)g.textContent+=' (No defaults given.)';else{g.innerHTML='',g.textContent='The sharing for this '+i+' is the default for folder ';var C=g.appendChild(n.createElement('a'));C.setAttribute('href',b.uri),C.textContent=r.aclControl.shortNameForFolder(b);var a=r.acl.adoptACLDefault(c,h,b,v);s(y,c,h,a,{modify:!1}),y.style.cssText='color: #777;';var E=w.appendChild(n.createElement('button'));E.textContent='Set specific sharing\nfor this '+i,E.style.cssText=_,E.addEventListener('click',function(n){d.put(h,a.statements,'text/turtle',function(n,r,s){r?(o.add(a.statements),g.textContent=' (Now editing specific access for this '+i+')',w.removeChild(E),t()):g.textContent+=' (Error writing back access control file: '+s+')'})})}}else{var T=function a(s){j=w.appendChild(n.createElement('button')),j.textContent='Stop specific sharing for this '+i+' -- just use default',s&&(j.textContent+=' for '+r.utils.label(s)),j.style.cssText=_,j.addEventListener('click',function(n){o.fetcher.delete(h.uri).then(function(){g.textContent=' The sharing for this '+i+' is now the default.',w.removeChild(j),y.style.cssText='color: #777;',t()}).catch(function(t){g.textContent+=' (Error deleting access control file: '+h+': '+t+')'})})},A=m.uri.split('#')[0],S=A.slice(0,-1).lastIndexOf('/'),I=A.indexOf('//'),N=0<=I&&S<I+2||0>S?null:A.slice(0,S+1),j,L;if(N?r.acl.getACLorDefault($rdf.sym(N),function(t,n,a,r,i,o){t&&(L=n?a:i),T(L)}):T(),y.addControlForDefaults=function(){y.notice.textContent='Access to things within this folder:',y.notice.style.cssText='font-size: 120%; color: black;';var t=r.widgets.clearElement(y.offer).appendChild(n.createElement('button'));t.innerHTML='<p>Set default for folder contents to<br />just track the sharing for the folder</p>',t.style.cssText=_,t.addEventListener('click',function(t){delete y.defaultsDiffer,delete y.defByCombo,y.saveBack(function(t,n){t?y.removeControlForDefaults():alert(n)})},!1),y.defaultsDiffer=!0,y.defByCombo=s(y,m,h,o,{modify:!0,doingDefaults:!0})},y.removeControlForDefaults=function(){g.textContent='This is also the default for things in this folder.',y.notice.textContent='Sharing for things within the folder currently tracks sharing for the folder.',y.notice.style.cssText='font-size: 80%; color: #888;';var t=r.widgets.clearElement(y.offer).appendChild(n.createElement('button'));for(t.innerHTML='<p>Set the sharing of folder contets <br />separately from the sharing for the folder</p>',t.style.cssText=_,t.addEventListener('click',function(t){y.addControlForDefaults(),g.textContent=''});y.divider.nextSibling;)y.removeChild(y.divider.nextSibling);g.textContent='This is now also the default for things in this folder.'},y.mainByCombo=s(y,m,h,o,{modify:!0}),y.divider=y.appendChild(n.createElement('tr')),y.notice=y.divider.appendChild(n.createElement('td')),y.notice.style.cssText='font-size: 80%; color: #888;',y.offer=y.divider.appendChild(n.createElement('td')),y.notice.setAttribute('colspan','2'),y.isContainer){var R=r.acl.readACL(m,h,o),M=r.acl.readACL(m,h,o,!0);y.defaultsDiffer=!r.acl.sameACL(R,M),console.log('Defaults differ ACL: '+y.defaultsDiffer),y.defaultsDiffer?y.addControlForDefaults():y.removeControlForDefaults()}}})};return k(),u}},function(t,n,a){'use strict';function r(t){return t=Object.assign({},l,t),i(c.PRIMARY,t).then(function(n){return n||i(c.SECONDARY,t)})}function i(t,n){return!0?o(t,n):s(t,n)}function o(t,n){var a;return t===c.PRIMARY?a=n.authEndpoint||window.location.origin+window.location.pathname:t===c.SECONDARY?a=n.fallbackAuthEndpoint:void 0,new Promise(function(t,n){var r=new XMLHttpRequest;r.withCredentials=!0,r.addEventListener('load',function(){t(r.getResponseHeader('user')||null)}),r.addEventListener('error',function(t){n(t)}),r.open('HEAD',a),r.send()})}function s(t,n){if(!(n.key&&n.cert))throw new Error('Must provide TLS key and cert when running in node');var a;t===c.PRIMARY?a=n.authEndpoint:t===c.SECONDARY?a=n.fallbackAuthEndpoint:void 0;var r,i,o;return!1,Promise.all([n.key,n.cert].map(function(t){return new Promise(function(n,a){r.readFile(t,function(t,r){return t?a(t):n(r)})})})).then(function(t){var n=d(t,2),r=n[0],s=n[1],l=o.parse(a),c={method:'HEAD',hostname:l.hostname,port:l.port,path:l.path,timeout:5e3,key:r,cert:s};return new Promise(function(t,n){var a=i.request(c,function(n){t(n.headers.user||null)});a.on('error',n),a.end()})})}var d=function(){function t(t,n){var a=[],r=!0,i=!1,o;try{for(var s=t[Symbol.iterator](),d;!(r=(d=s.next()).done)&&(a.push(d.value),!(n&&a.length===n));r=!0);}catch(t){i=!0,o=t}finally{try{!r&&s['return']&&s['return']()}finally{if(i)throw o}}return a}return function(n,a){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return t(n,a);throw new TypeError('Invalid attempt to destructure non-iterable instance')}}(),l=a(245),c={PRIMARY:0,SECONDARY:1},u=r;t.exports={currentUser:u,login:r}},function(t,n,a){'use strict';function r(t){this.config=t||i}var i=a(245);r.prototype.listen=function t(){var n=new Promise(function(t,n){var a=window.addEventListener?'addEventListener':'attachEvent',r=window[a],i='attachEvent'==a?'onmessage':'message';r(i,function(a){var r=a.data;if('User:'===r.slice(0,5)){var i=r.slice(5,r.length);return i&&0<i.length&&'http'===i.slice(0,4)?t(i):n(i)}},!0)});return n},r.prototype.signup=function t(n){n=n||this.config.signupEndpoint;var a=this.config.signupWindowWidth,r=this.config.signupWindowHeight,i=window.screen.width/2-(a/2+10),o=window.screen.height/2-(r/2+50),s='Solid signup',d=n+'?origin='+encodeURIComponent(window.location.origin),l='resizable,scrollbars,status,width='+a+',height='+r+',left='+i+',top='+o;window.open(d,s,l);var c=this;return new Promise(function(t){c.listen().then(function(n){return t(n)})})},t.exports=r},function(t,n,a){'use strict';function r(t,n){function a(t){return new Promise(function(n,a){var s=function n(s,d){var l={newBase:d,workspace:s};for(var c in t)l[c]=t[c];console.log('newThingUI: Minting new '+l.pane.name+' at '+l.newBase),t.pane.mintNew(l).then(function(n){if(!n||!n.newInstance)throw new Error('Cannot mint new - missing newInstance');if(n.folder)o.add(n.folder,i.ns.ldp('contains'),o.sym(n.newBase),n.folder.doc()),n.refreshTarget&&n.refreshTarget.refresh();else{var a=t.div.appendChild(r.createElement('p'));a.setAttribute('style','font-size: 120%;'),a.innerHTML='Your <a target=\'_blank\' href=\''+n.newInstance.uri+'\'><b>new '+t.noun+'</b></a> is ready to be set up. <br/><br/><a target=\'_blank\' href=\''+n.newInstance.uri+'\'>Go to your new '+t.noun+'.</a>'}f()}).catch(function(t){u(t),a(t)})},d=t.pane,l;if(t.appPathSegment='edu.mit.solid.pane.'+d.name,t.noun=d.mintClass?i.utils.label(d.mintClass):d.name,!t.folder)l=i.authn.selectWorkspace(r,t,s),t.div.appendChild(l);else{var c=function n(a){if(!a)f();else{var r=t.folder.uri;r.endsWith('/')||(r+='/'),r=r+encodeURIComponent(a)+'/',s(null,r)}};i.widgets.askName(r,i.store,t.div,i.ns.foaf('name'),null,t.noun).then(c)}})}var r=t.dom,s=t.div;if(t.me&&!t.me.uri)throw new Error('newThingUI:  Invalid userid: '+t.me);var d='padding: 0.7em; width: 2em; height: 2em;',l=s.appendChild(r.createElement('img')),c=!1;l.setAttribute('src',i.icons.iconBase+'noun_34653_green.svg'),l.setAttribute('style',d),l.setAttribute('title','Add another tool to the meeting');var u=function t(n){var a=s.appendChild(r.createElement('pre'));a.setAttribute('style','background-color: pink'),a.appendChild(r.createTextNode(n))},f=function t(n){c=!c,l.setAttribute('style',d+(c?'background-color: yellow;':'')),v(c?'':'display: none;')};l.addEventListener('click',f);var m=[];for(var h in n){var g=n[h];if(g.mintNew){var b=t.div.appendChild(r.createElement('img'));b.setAttribute('src',g.icon);var y=g.mintClass?i.utils.label(g.mintClass):g.name+' @@';b.setAttribute('title','Make new '+y),b.setAttribute('style',d+'display: none;'),m.push(b);var w=function n(r,i,o){var s=i,d=r,l=o;i.disabled||i.addEventListener('click',function(n){x(s);var r={event:n,folder:t.folder,iconEle:s,pane:d,noun:l,noIndexHTML:!0,div:t.div,me:t.me,dom:t.dom,refreshTarget:t.refreshTarget};a(r)})};w(g,b,y)}}var v=function t(n){for(var a=0,r;a<m.length;a++)r=d+n,m[a].disabled&&(r+='opacity: 0.3;'),m[a].setAttribute('style',r)},x=function t(n){v('display: none;'),n.setAttribute('style',d+'background-color: yellow;')}}var i={authn:a(96),icons:a(23),log:a(24),ns:a(14),store:a(20),style:a(71),utils:a(28),widgets:a(26)},o=i.store;t.exports={newThingUI:r}},function(t,n,a){'use strict';var r={icons:a(23),log:a(24),ns:a(14),pad:a(99),rdf:a(4),store:a(20),widgets:a(26)},o=a(28),s=r.store;t.exports.matrixForQuery=function(n,t,a,r,i,d,l){var c=n.createElement('table'),u=n.createElement('tr'),f=u.appendChild(n.createElement('td'));f.setAttribute('class','MatrixCorner'),c.appendChild(u),c.lastHeader=u;var m=[],h=[],g=function t(n,a,r,i){for(;n.firstChild;)n.removeChild(n.firstChild);n.setAttribute('style',''),n.style.textAlign='center',d.cellFunction?d.cellFunction(n,a,r,i):(n.textContent=o.label(i),n.setAttribute('style','padding: 0.3em')),delete n.old},b=function t(a){var r=a.toNT();if(h[r])return h[r];var l=n.createElement('tr'),u=l.appendChild(n.createElement('td'));u.setAttribute('style','padding: 0.3em;'),u.textContent=o.label(a),'NamedNode'===a.termType&&s.fetcher.nowOrWhenFetched(a.uri.split('#')[0],void 0,function(t,n,r){t&&(u.textContent=o.label(a))});for(var f=0;f<m.length;f++)g(l.appendChild(n.createElement('td')),$rdf.fromNT(m[f]),a,null);l.dataValueNT=r,h[r]=l;for(var i=c.lastHeader.nextSibling;i;i=i.nextSibling)if(r>i.dataValueNT&&d&&d.yDecreasing||r<i.dataValueNT&&!(d&&d.yDecreasing))return c.insertBefore(l,i);return c.appendChild(l)},w=function a(r){for(var s=r.toNT(),l=null,u=0;u<m.length;u++){if(m[u]===s)return u;if(s>m[u]&&d.xDecreasing||s<m[u]&&!d.xDecreasing){m=m.slice(0,u).concat([s]).concat(m.slice(u)),l=u;break}}null===l&&(l=m.length,m.push(s));for(var i=c.firstChild;i;i=i.nextSibling){var f=i.dataValueNT,h=n.createElement('td');if(h.style.textAlign='center',i===c.firstChild?h.textContent=o.label(r):g(h,r,$rdf.fromNT(f),null),l===m.length-1)i.appendChild(h);else{for(var b=i.firstChild,t=0;t<l+1;t++)b=b.nextSibling;i.insertBefore(h,b)}}return l},y=function t(){for(var n=1,a;n<c.children.length;n++){a=c.children[n];for(var r=1;r<a.children.length;r++)a.children[r].old=!0}},v=function t(){var n=[],a=[],r,o;if(d.set_y)for(var s=0;s<d.set_y.length;s++)a[d.set_y[s]]=!0;if(d.set_x)for(s=0;s<d.set_x.length;s++)n[w(d.set_x[s])+1]=!0;for(var l=1;l<c.children.length;l++){r=c.children[l];for(var i=1;i<r.children.length;i++)if(o=r.children[i],o.old){var u=$rdf.fromNT(r.dataValueNT),f=$rdf.fromNT(m[i-1]);g(o,f,u,null)}else a[r.dataValueNT]=!0,n[i]=!0}for(var b=0;b<c.children.length;b++)if(r=c.children[b],0<b&&!a[r.dataValueNT])delete h[r.dataValueNT],c.removeChild(r);else for(var y=r.children.length-1,v;0<y;y--)v=r.children[y],n[y]||r.removeChild(v);for(var x=[],_=0;_<m.length;_++)n[_+1]&&x.push(m[_]);m=x};c.refresh=function(){y(),s.query(t,x,void 0,v)};var x=function t(n){var o=n[a],s=n[r],d=n[i],l=b(s),c=w(o),u=l.children[c+1];g(u,o,s,d)};if(d.set_y)for(var _=0;_<d.set_y.length;_++)b(d.set_y[_]);if(d.set_x)for(_=0;_<d.set_x.length;_++)w(d.set_x[_]);return s.query(t,x,void 0,l),c}},function(t,n,a){'use strict';var r={authn:a(96),icons:a(23),log:a(24),ns:a(14),pad:a(99),rdf:a(4),store:a(20),style:a(71),widgets:a(26)},i=a(28);t.exports=function(t,n,a,o,s){function d(t){var n=r.store.any(t,r.ns.foaf('nick'));return n?''+n.value:''+i.label(t)}function l(n,a,i,o){var s=n.appendChild(x(d(a),a));a.uri&&r.store.fetcher.nowOrWhenFetched(a.doc(),void 0,function(t,n){s.textContent=d(a)}),n.appendChild(t.createElement('br')),n.appendChild(x(i,o))}function c(t,a){var r={},i,o;for(i=a.firstChild;i;i=i.nextSibling)i.AJAR_subject&&(r[i.AJAR_subject.uri]=!0);var s=n.each(t,f.wf('message')),d={};for(s.map(function(t){d[t.uri]=!0,r[t.uri]||T(t)}),i=a.firstChild;i;)o=i.nextSibling,i.AJAR_subject&&!d[i.AJAR_subject.uri]&&a.removeChild(i),i=o}function u(){S.fresh=!0}n=n||r.store,o=o.doc();var f=r.ns,m=$rdf.Namespace('http://www.w3.org/2005/01/wf/flow#'),h=$rdf.Namespace('http://purl.org/dc/terms/');s=s||{};var g=!!s.newestFirst,b='white-space: pre-wrap; width: 90%; font-size:100%; border: 0.07em solid #eee; padding: .2em 0.5em; margin: 0.1em 1em 0.1em 1em;',y=t.createElement('div'),w=r.store.updater,x=function n(i,o){var s=t.createElement('a');return o&&o.uri&&(s.setAttribute('href',o.uri),s.addEventListener('click',r.widgets.openHrefInOutlineMode,!0),s.setAttribute('style','color: #3B5998; text-decoration: none; ')),s.textContent=i,s},_=function n(a,r){var i=t.createElement('pre');return i.setAttribute('style',r||'color: grey'),y.appendChild(i),i.appendChild(t.createTextNode(a)),i},k={log:function t(n){_(n,'color: #111;')},warn:function t(n){_(n,'color: #880;')},error:function t(n){_(n,'color: #800;')}},C=function i(){var s=t.createElement('tr'),d=t.createElement('td'),c=t.createElement('td'),u=t.createElement('td');s.appendChild(d),s.appendChild(c),s.appendChild(u),s.AJAR_date='9999-01-01T00:00:00Z';var m=function i(){v.setAttribute('class','pendingedit'),v.disabled=!0;var d=[],l=new Date,c=''+l.getTime(),u=$rdf.term(l),m=n.sym(o.uri+'#Msg'+c);d.push(new $rdf.Statement(a,f.wf('message'),m,o)),d.push(new $rdf.Statement(m,f.sioc('content'),n.literal(v.value),o)),d.push(new $rdf.Statement(m,h('created'),u,o)),I&&d.push(new $rdf.Statement(m,f.foaf('maker'),I,o));var g=function a(i,o,d){if(!o)s.appendChild(r.widgets.errorMessageBlock(t,'Error writing message: '+d));else{var l={"?msg":m,"?content":n.literal(v.value),"?date":u,"?creator":I};A(l,!1),v.value='',v.setAttribute('class',''),v.disabled=!1}};w.update([],d,g)};s.appendChild(t.createElement('br'));var g=function n(){l(d,I,'',null),v=t.createElement('textarea'),c.innerHTML='',c.appendChild(v),v.rows=3,v.setAttribute('style',b+'background-color: #eef;'),v.addEventListener('keyup',function(t){13!==t.keyCode||t.altKey||m()},!1),u.innerHTML='',x=r.widgets.button(t,r.icons.iconBase+'noun_383448.svg','Send'),x.setAttribute('style',r.style.buttonStyle+'float: right;'),x.addEventListener('click',m,!1),u.appendChild(x)},y={div:c,dom:t},v,x;return r.authn.logIn(y).then(function(t){I=t.me,g()}),s},E=function t(r){var i=n.statementsMatching(r).concat(n.statementsMatching(void 0,void 0,r));w.update(i,[],function(t,n,r){n?c(a,S):k.error('Cant delete messages:'+r)})},T=function t(a){var r={"?msg":a,"?creator":n.any(a,f.foaf('maker')),"?date":n.any(a,h('created')),"?content":n.any(a,f.sioc('content'))};A(r,!0)},A=function n(a,i){var o=a['?creator'],s=a['?msg'],d=a['?date'],c=a['?content'],u=d.value,f=t.createElement('tr');f.AJAR_date=u,f.AJAR_subject=s;for(var m=!1,h=S.firstChild;;h=h.nextSibling){if(!h)break;if(u>h.AJAR_date&&g||u<h.AJAR_date&&!g){S.insertBefore(f,h),m=!0;break}}m||S.appendChild(f);var y=t.createElement('td');f.appendChild(y),l(y,o,r.widgets.shortDate(u),s);var w=t.createElement('td');f.appendChild(w);var v=t.createElement('p');v.setAttribute('style',b+(i?'background-color: #e8ffe8;':'background-color: #white;')),w.appendChild(v),v.textContent=c.value;var x=t.createElement('td');f.appendChild(x);var _=t.createElement('button');x.appendChild(_),_.textContent='-',f.setAttribute('class','hoverControl'),_.setAttribute('class','hoverControlHide'),_.setAttribute('style','color: red;'),_.addEventListener('click',function(n){x.removeChild(_);var a=t.createElement('button');a.textContent='cancel',x.appendChild(a).addEventListener('click',function(t){x.removeChild(r),x.removeChild(a),x.appendChild(_)},!1);var r=t.createElement('button');r.textContent='Delete message',x.appendChild(r).addEventListener('click',function(t){x.removeChild(r),x.removeChild(a),E(s)},!1)},!1)},S,I;S=t.createElement('table'),S.fresh=!1,y.appendChild(S),S.setAttribute('style','width: 100%;');var N=C();g?S.insertBefore(N,S.firstChild):S.appendChild(N);var j;if(s.query)j=s.query;else{j=new $rdf.Query('Messages');var L={},v=['msg','date','creator','content'];v.map(function(t){j.vars.push(L[t]=$rdf.variable(t))}),j.pat.add(a,m('message'),L.msg),j.pat.add(L.msg,f.dct('created'),L.date),j.pat.add(L.msg,f.foaf('maker'),L.creator),j.pat.add(L.msg,f.sioc('content'),L.content)}return n.query(j,A,void 0,u),y.refresh=function(){c(a,S)},y}},function(t,n,a){'use strict';var r=a(4),i=t.exports={},o={authn:a(96),icons:a(23),log:a(24),ns:a(14),pad:i,rdf:r,store:a(20),widgets:a(26)},s=a(28);o.pad.lightColorHash=function(t){var n=function t(n){return n.split('').reduce(function(t,n){return t=(t<<5)-t+n.charCodeAt(0),t&t},0)};return t&&t.uri?'#'+(12632256|16777215&n(t.uri)).toString(16):'#ffffff'},o.pad.renderPartipants=function(t,n,a,r,i,d){var l=o.store,c=o.ns;n.setAttribute('style','margin: 0.8em;');var u=function a(r){var i=l.any(r,c.wf('participant')),s=l.anyValue(r,c.ui('backgroundColor'))||'white',u=t.createElement('div');u.setAttribute('style','height: 1.5em; width: 1.5em; margin: 0.3em; border 0.01em solid #888; background-color: '+s);var f=o.widgets.personTR(t,null,i,d);n.appendChild(f);var m=t.createElement('td');return m.setAttribute('style','vertical-align: middle;'),m.appendChild(u),f.insertBefore(m,f.firstChild),f},f=function t(){var a=l.each(r,c.wf('participation')).map(function(t){return[l.anyValue(t,o.ns.cal('dtstart'))||'9999-12-31',t]});a.sort();var i=a.map(function(t){return t[1]});s.syncTableToArray(n,i,u)};return n.refresh=f,f(),n},o.pad.recordParticipation=function(t,n,a){var r=o.store,i=o.ns,s=o.authn.currentUser();if(s){var d=r.each(t,i.wf('participation')).filter(function(t){return r.holds(t,i.wf('participant'),s)});if(1<d.length)throw new Error('Multiple records of your participation');if(!d.length){var l=o.widgets.newThing(n),c=[o.rdf.st(t,i.wf('participation'),l,n),o.rdf.st(l,i.wf('participant'),s,n),o.rdf.st(l,o.ns.cal('dtstart'),new Date,n),o.rdf.st(l,i.ui('backgroundColor'),o.pad.lightColorHash(s),n)];r.updater.update([],c,function(t,n,r){if(!n)throw new Error('Error recording your partipation: '+r);a&&a.refresh&&a.refresh()})}}},o.pad.manageParticipation=function(t,n,a,r,i,s){var d=t.createElement('table');n.appendChild(d),o.pad.renderPartipants(t,d,a,r,i,s);try{o.pad.recordParticipation(r,a,d)}catch(a){n.appendChild(o.widgets.errorMessageBlock(t,'Error recording your partipation: '+a))}return d},o.pad.notepad=function(n,a,d,i,l){l=l||{};var c=l.exists,u=n.createElement('table'),f=o.store,m=o.ns;if(i&&!i.uri)throw new Error('UI.pad.notepad:  Invalid userid');var h=o.store.updater,g=r.Namespace('http://www.w3.org/ns/pim/pad#');u.setAttribute('style','padding: 1em; overflow: auto; resize: horizontal; min-width: 40em;');var b=null,y=null;if(l.statusArea){var w=l.statusArea.appendChild(n.createElement('table')),t=w.appendChild(n.createElement('tr'));b=t.appendChild(n.createElement('td')),y=t.appendChild(n.createElement('td')),b.setAttribute('style','width:50%'),y.setAttribute('style','width:50%')}var v=function t(a,r){console.log(a),l.statusArea&&(r?b:y).appendChild(o.widgets.errorMessageBlock(n,a,'pink'))},x=function t(n){l.statusArea&&(l.statusArea.innerHTML='')},_=function t(n,a,r){var i=n.subject;a=a||'';var s='font-size: 100%; font-family: monospace; width: 100%; border: none; white-space: pre-wrap;',d='font-family: sans-serif; font-weight: bold;  border: none;',l=['font-size: 110%;  padding-top: 0.5em; padding-bottom: 0.5em; width: 100%;','font-size: 120%; padding-top: 1em; padding-bottom: 1em; width: 100%;','font-size: 150%; padding-top: 1em; padding-bottom: 1em; width: 100%;'],c=f.any(i,m.dc('author'));if(!a&&c){var u=o.pad.lightColorHash(c);a='color: '+(r?'#888':'black')+'; background-color: '+u+';'}var h=f.any(i,g('indent'));h=h?h.value:0;var b=0<=h?s+'text-indent: '+3*h+'em;':d+l[-1-h];n.setAttribute('style',b+a)},k=function t(n){var i=n.subject;if(!i)throw new Error('No chunk for line to be deleted!');var o=f.any(void 0,g('next'),i),l=f.any(i,g('next'));if(o.sameTerm(d)&&l.sameTerm(d))return void console.log('You can\'t delete the only line.');var c=f.statementsMatching(i,void 0,void 0,a).concat(f.statementsMatching(void 0,void 0,i,a)),u=[r.st(o,g('next'),l,a)],m=i.uri.slice(-4);console.log('Deleting line '+m),h.update(c,u,function(t,r,o,d){if(r){var l=n.parentNode,u=l.previousSibling;l.parentNode.removeChild(l),console.log('    deleted line '+m+' ok '+n.value),u&&u.firstChild&&u.firstChild.focus()}else if(d&&409===d.status)_(n,'color: black;  background-color: #ffd;'),n.state=0,s.beep(0.5,512),setTimeout(function(){h.requestDownstreamAction(a,R)},1e3);else{console.log('    removePart FAILED '+i+': '+o),console.log('    removePart was deleteing :\''+c),_(n,'color: black;  background-color: #fdd;');var f=d?d.status:' [no response field] ';v('Error '+f+' saving changes: '+o.true)};})},C=function t(n,i,o){var s=f.statementsMatching(i,g('indent')),d=s.length?+s[0].object.value:0;if(!(-3>d+o)){var l=d+o,c=r.st(i,g('indent'),l,a);h.update(s,c,function(t,r,i){r?_(n):(console.log('Indent change FAILED \''+l+'\' for '+a+': '+i),_(n,'color: black;  background-color: #fdd;'),h.requestDownstreamAction(a,R))})}},E=function t(n,i){n.addEventListener('keydown',function(t){var r,o;switch(t.keyCode){case 13:var s=t.shiftKey;if(console.log('enter'),s?(o=f.any(void 0,g('next'),i),r='newlinesAfter'):(o=f.any(i,g('next')),r='newlinesBefore'),o[r]=o[r]||0,o[r]+=1,1<o[r])return void console.log('    queueing newline queue = '+o[r]);console.log('    go ahead line before '+o[r]),A(n,s);break;case 8:if(0===n.value.length)switch(console.log('Delete key line '+i.uri.slice(-4)+' state '+n.state),n.state){case 1:case 2:return void(n.state=4);case 3:case 4:return;case void 0:case 0:n.state=3,k(n),t.preventDefault();break;default:throw new Error('pad: Unexpected state '+n);}break;case 9:var d=t.shiftKey?-1:1;C(n,i,d),t.preventDefault();break;case 27:console.log('escape'),h.requestDownstreamAction(a,R),t.preventDefault();break;case 38:n.parentNode.previousSibling&&(n.parentNode.previousSibling.firstChild.focus(),t.preventDefault());break;case 40:n.parentNode.nextSibling&&(n.parentNode.nextSibling.firstChild.focus(),t.preventDefault());break;default:}});var o=function t(n){var i=n.subject;_(n,void 0,!0);var o=f.any(i,m.sioc('content')).value,d=[r.st(i,m.sioc('content'),o,a)],l=[r.st(i,m.sioc('content'),n.value,a)],c=n.value;if(n.lastSent&&o!==n.lastSent)throw new Error('Out of order, last sent expected \''+o+'\' but found \''+n.lastSent+'\'');n.lastSent=c,console.log(' Patch proposed to '+i.uri.slice(-4)+' \''+o+'\' -> \''+c+'\' '),h.update(d,l,function(r,i,d,l){i?(x(!0),_(n),console.log('    Patch ok \''+o+'\' -> \''+c+'\' '),4===n.state?(n.state=3,k(n)):3===n.state||(2===n.state?(n.state=1,t(n)):n.state=0)):(console.log('    patch FAILED '+l.status+' for \''+o+'\' -> \''+c+'\': '+d),409===l.status?(_(n,'color: black;  background-color: #fdd;'),n.state=0,s.beep(0.5,512),setTimeout(function(){h.requestDownstreamAction(a,R)},1e3)):(_(n,'color: black;  background-color: #fdd;'),n.state=0,v('    Error '+l.status+' sending data: '+d,!0),s.beep(1,128)))})};n.addEventListener('input',function t(a){switch(_(n,void 0,!0),console.log('Input event state '+n.state+' value \''+n.value+'\''),n.state){case 3:return;case 4:return;case 2:return;case 1:return void(n.state=2);case 0:case void 0:n.state=1,o(n);}})},T=function t(a,r,o){var s=f.any(r,m.sioc('content'));s=s?s.value:'';var d=n.createElement('tr');o?u.insertBefore(d,a):a&&a.nextSibling?u.insertBefore(d,a.nextSibling):u.appendChild(d);var l=d.appendChild(n.createElement('input'));return l.subject=r,l.setAttribute('type','text'),l.value=s,i?(_(l,''),E(l,r)):(_(l,'color: #222; background-color: #111;'),console.log('Note can\'t add listeners - not logged in')),l},A=function t(n,s){var l=o.store,c=0,u=null,f,b,y,w,v;n?('input'!==n.tagName.toLowerCase()&&console.log('return pressed when current document is: '+n.tagName),f=n.subject,c=l.any(f,g('indent')),c=c?+c.value:0,s?(b=l.any(void 0,g('next'),f),y=f,w=b,u='newlinesAfter'):(b=f,y=l.any(f,g('next')),w=y,u='newlinesBefore'),v=n.parentNode):(b=d,y=d,v=void 0);var x=o.widgets.newThing(a),k=x.uri.slice(-4),C=[r.st(b,g('next'),y,a)],E=[r.st(b,g('next'),x,a),r.st(x,g('next'),y,a),r.st(x,m.dc('author'),i,a),r.st(x,m.sioc('content'),'',a)];0<c&&E.push(r.st(x,g('indent'),c,a)),console.log('    Fresh chunk '+k+' proposed'),h.update(C,E,function(n,a,r,i){if(!a)console.log('    ERROR writing new line '+k+': '+r);else{var o=T(v,x,s);_(o),o.focus(),u&&(console.log('    Fresh chunk '+k+' updated, queue = '+w[u]),w[u]-=1,0<w[u]&&(console.log('    Implementing queued newlines = '+y.newLinesBefore),t(o,s)))}})},S=function t(){function n(t){v(t),r++}var a=[],r=0;if(!f.the(d,g('next')))return n('No initial next pointer'),!1;for(var i=d,o;;){if(o=f.the(i,g('next')),o||n('No next pointer from '+i),o.sameTerm(d))break;i=o;var s=o.uri.split('#')[1];if(a[o.uri])return n('Loop!'),!1;a[o.uri]=!0;var l=f.each(o,g('next')).length;1!==l&&n('Should be 1 not '+l+' next pointer for '+s),l=f.each(o,g('indent')).length,1<l&&n('Should be 0 or 1 not '+l+' indent for '+s),l=f.each(o,m.sioc('content')).length,1!==l&&n('Should be 1 not '+l+' contents for '+s),l=f.each(o,m.dc('author')).length,1!==l&&n('Should be 1 not '+l+' author for '+s);var c=f.statementsMatching(void 0,m.sioc('contents'));c.map(function(t){a[t.subject.uri]||n('Loose chunk! '+t.subject.uri)})}return!r},I=function t(){if(1!==f.each(d,g('next')).length){var n='Pad: Inconsistent data - NEXT pointers: '+f.each(d,g('next')).length;return console.log(n),void(l.statusAra&&(l.statusArea.textContent+=n))}for(var a=[],r=f.the(d,g('next')),o;!r.sameTerm(d);r=f.the(r,g('next')))for(var s=0,i;s<u.children.length;s++)i=u.children[s],i.firstChild.subject.sameTerm(r)&&(a[r.uri]=i.firstChild);for(var c=u.children.length-1;0<=c;c--)o=u.children[c],a[o.firstChild.subject.uri]||u.removeChild(o);o=u.firstChild;for(var h=f.the(d,g('next')),b;!h.sameTerm(d);h=f.the(h,g('next')))if(b=f.any(h,m.sioc('content')).value,o&&a[h.uri]){var y=o.firstChild;b!==y.value&&(y.value=b),_(y),y.state=0,delete y.lastSent,o=o.nextSibling}else T(o,h,!0);;},N=function t(n){if(n.refresh)return void n.refresh();for(var a=0;a<n.children.length;a++)t(n.children[a])},j=!1,L=function t(){console.log('    reloaded OK'),x(),S()?N(u):v('CONSITENCY CHECK FAILED')},R=function t(){if(j)return void console.log('   Already reloading - stop');j=!0;var n=1e3,r=function t(){console.log('try reload - timeout = '+n),h.reload(h.store,a,function(r,i,o){j=!1,r?L():0===o.status?(v('Network error refreshing the pad. Retrying in '+n/1e3),j=!0,n*=2,setTimeout(t,n)):v('Error '+o.status+'refreshing the pad:'+i+'. Stopped. '+a)})};r()};if(u.refresh=I,u.reloadAndSync=R,i||console.log('Warning: must be logged in for pad to be edited'),c)console.log('Existing pad.'),S()?(I(),f.holds(d,g('next'),d)&&A()):console.log(u.textContent='Inconsistent data. Abort');else{console.log('No pad exists - making new one.');var M=[r.st(d,m.rdf('type'),g('Notepad'),a),r.st(d,m.dc('author'),i,a),r.st(d,m.dc('created'),new Date,a),r.st(d,g('next'),d,a)];h.update([],M,function(t,n,a){n?(console.log('Initial pad created'),A()):v(a)})}return u}},function(t,n,a){'use strict';t.exports={value:[],get:function t(n){return this.value[n]},set:function t(n,a){if('string'!=typeof a)throw console.log('Non-string value of preference '+n+': '+a),new Error('Non-string value of preference '+n+': '+a);this.value[n]=a}}},function(t,n,a){'use strict';var r={icons:a(23),log:a(24),ns:a(14),store:a(20),widgets:a(26)},i=a(28),o=a(4);t.exports=function t(n,a){function d(){var t=n.createElement('table');t.setAttribute('class','toolbar');var a=n.createElement('tr');return ke=n.createElement('td'),a.appendChild(ke),Ce=n.createElement('td'),a.appendChild(Ce),t.appendChild(a),t}function l(t,n){for(var a=n.getColumns(),r=0,i;r<a.length;++r)i=le.variable('_col'+r),t.vars.push(i),a[r].setVariable(i)}function c(t,n,a){var i=a.type;i||(i=le.variable('_any')),t.pat.add(n,r.ns.rdf('type'),i)}function u(t,n,a){for(var r=a.getColumns(),o=0;o<r.length;++o){var i=r[o],s=le.formula();s.add(n,i.predicate,i.getVariable()),t.pat.optional.push(s)}}function f(t){var n=new o.Query,a=le.variable(ge.slice(1));return l(n,t),c(n,a,t),u(n,a,t),n}function m(t){g(Ce),Ce.appendChild(k(t));var n=f(t);h(n,t)}function h(t,n){ye&&(ye.running=!1);var a=ne(t,n);g(Ee),Ee.appendChild(a),ye=t}function g(t){for(;0<t.childNodes.length;)t.removeChild(t.childNodes[0])}function b(t){this.type=t,this.columns=null,this.allColumns=null,this.useCount=0,this.getAllColumns=function(){return this.allColumns},this.getColumns=function(){if(!this.columns){var t=this.getAllColumns();this.columns=t.slice(0,7)}return this.columns},this.getUnusedColumns=function(){for(var t=this.getAllColumns(),n=this.getColumns(),a=[],r=0;r<t.length;++r)-1===n.indexOf(t[r])&&a.push(t[r]);return a},this.addColumn=function(t){this.columns.push(t)},this.removeColumn=function(t){this.columns=this.columns.filter(function(n){return n!==t})},this.getLabel=function(){return i.label(this.type)},this.addUse=function(){this.useCount+=1}}function y(){this.useCount=0,this.checkedAnyValues=!1,this.possiblyLiteral=!0,this.possiblyNumber=!0,this.constraints=[],this.checkValue=function(t){var n=t.termType;if(this.possiblyLiteral&&'Literal'!==n&&'NamedNode'!==n)this.possiblyNumber=!1,this.possiblyLiteral=!1;else if(this.possiblyNumber)if('Literal'!==n)this.possiblyNumber=!1;else{var a=t.value;a.match(/^-?\d+(\.\d*)?$/)||(this.possiblyNumber=!1)}this.checkedAnyValues=!0},this.getVariable=function(){return this.variable},this.setVariable=function(t){this.variable=t},this.getKey=function(){return this.variable.toString()},this.addUse=function(){this.useCount+=1},this.getLabel=function(){return this.predicate?this.predicate.sameTerm(de.rdf('type'))&&this.superClass?i.label(this.superClass):i.label(this.predicate):this.variable?this.variable.toString():'unlabeled column?'},this.setPredicate=function(t,n,a){n?(this.inverse=t,this.constraints=this.constraints.concat(le.each(t,r.ns.rdfs('domain'))),t.sameTerm(de.rdfs('subClassOf'))&&'NamedNode'===a.termType&&(this.superClass=a,this.alternatives=le.each(void 0,de.rdfs('subClassOf'),a))):(this.predicate=t,this.constraints=this.constraints.concat(le.each(t,r.ns.rdfs('range'))))},this.getConstraints=function(){return this.constraints},this.filterFunction=function(){return!0},this.sortKey=function(){return this.getLabel().toLowerCase()},this.isImageColumn=function(){for(var t=0;t<this.constraints.length;t++)if(this.constraints[t].uri in he)return!0;return!1}}function w(t,n){var a=[];for(var r in t){var i=t[r];(!n||n(r,i))&&a.push(i)}return a}function v(t,a){var r=n.createElement('option');return r.setAttribute('value',a),r.appendChild(n.createTextNode(t)),r}function x(t,a){var r=n.createElement('div');r.appendChild(n.createTextNode('Select type: '));var i=n.createElement('select');for(var o in i.appendChild(v('All types','null')),a)i.appendChild(v(a[o].getLabel(),o));return i.addEventListener('click',function(){var n;n='null'===i.value?t:a[i.value],_(n)},!1),r.appendChild(i),r}function _(t){m(t)}function k(t){var a=n.createElement('div'),r=t.getUnusedColumns();if(r.sort(function(t,n){var a=t.sortKey(),r=n.sortKey();return(a>r)-(a<r)}),0<r.length){a.appendChild(n.createTextNode('Add column: '));var o=n.createElement('select');o.appendChild(v('','-1'));for(var s=0,i;s<r.length;++s)i=r[s],o.appendChild(v(i.getLabel(),''+s));a.appendChild(o),o.addEventListener('click',function(){var n=+o.value;0<=n&&(t.addColumn(r[n]),m(t))},!1)}return a}function C(t,n){var a;return n.uri in t?a=t[n.uri]:(a=new y,a.setPredicate(n),t[n.uri]=a),a}function E(t,n){var a;return n.uri in t?a=t[n.uri]:(a=new b(n),t[n.uri]=a),a}function T(){for(var t={},n=le.statementsMatching(void 0,r.ns.rdf('type'),ie,re),a={},o=0,i;o<n.length;++o)if(i=n[o].object,'NamedNode'===i.termType){var s=E(t,i);i.uri in a||(a[i.uri]=[]),a[i.uri].push(n[o].subject),s.addUse()}return[a,t]}function A(t,n){for(var a=le.statementsMatching(t,void 0,void 0,re),r={},i=0,o;i<a.length;++i)if(o=a[i].predicate,!(o.uri in ce)){var s=C(n,o);s.checkValue(a[i].object),r[o.uri]=s}return r}function S(t,n){for(var a={},r=0,i;r<n.length;++r)for(var o in i=A(n[r],a),i){var s=i[o];s.addUse()}var d=w(a);N(d),t.allColumns=d}function I(){var t=T(),n,a;for(var r in n=t[0],a=t[1],n){var i=n[r],o=a[r];S(o,i)}var s=new b(null);return[s,w(a)]}function N(t){function n(t,n){return(t.useCount<n.useCount)-(t.useCount>n.useCount)}t.sort(n)}function j(t,a){var r=n.createElement('a');return r.appendChild(n.createTextNode('[x]')),r.addEventListener('click',function(){t.removeColumn(a),m(t)},!1),r}function L(t,a){var r=n.createElement('tr'),o=n.createElement('th');r.appendChild(o);for(var s=0;s<t.length;++s){var i=n.createElement('th'),d=t[s];i.appendChild(n.createTextNode(d.getLabel())),a&&i.appendChild(j(a,d)),r.appendChild(i)}return r}function R(t,n,a,r){var o=n.getKey();if(t.sort(function(t,n){var i=null,s=null;o in t.values&&(i=t.values[o][0]),o in n.values&&(s=n.values[o][0]);var d=a(i,s);return r?-d:d}),t.length){for(var s=t[0]._htmlRow.parentNode,d=0;d<t.length;++d)s.removeChild(t[d]._htmlRow);for(var i=0;i<t.length;++i)s.appendChild(t[i]._htmlRow)}}function M(t,n){for(var a=!0,r=0;r<n.length;++r){var i=n[r],o=i.getKey(),s=null;if(o in t.values&&(s=t.values[o][0]),!i.filterFunction(s)){a=!1;break}}var d=t._htmlRow;d.style.display=a?'':'none'}function D(t,n){for(var a=0,r;a<t.length;++a)r=t[a],M(r,n)}function P(t,n,a){function r(t){return t?'Literal'===t.termType?t.value.toLowerCase():'NamedNode'===t.termType?i.label(t).toLowerCase():t.value.toLowerCase():''}function o(t,n){var a=r(t),i=r(n);return a<i?-1:a>i?1:0}R(t,n,o,a)}function O(t,a,r){var o=n.createElement('div'),s=n.createElement('input');s.setAttribute('type','text'),s.style.width='70%',o.appendChild(s);var d=n.createElement('span');d.appendChild(n.createTextNode('\u25BC')),d.addEventListener('click',function(){P(t,r,!1)},!1),o.appendChild(d);var l=n.createElement('span');l.appendChild(n.createTextNode('\u25B2')),l.addEventListener('click',function(){P(t,r,!0)},!1),o.appendChild(l);var c=null;return r.filterFunction=function(t){if(!c)return!0;if(!t)return!1;var n;return n='Literal'===t.termType?t.value:'NamedNode'===t.termType?i.label(t):'',0<=n.toLowerCase().indexOf(c)},s.addEventListener('keyup',function(){c=''===s.value?null:s.value.toLowerCase(),D(t,a)},!1),o}function B(t,a,r,o){for(var s=!0,d=n.createElement('div'),l=n.createElement('select'),c={},u=0,f;u<o.length;++u)f=o[u],c[f.uri]=!0;var m=G(r).initialSelection;m&&(c=m),s?l.setAttribute('multiple','true'):l.appendChild(v('(All)','-1'));for(var h=0;h<o.length;++h){var g=o[h],b=v(i.label(g),h);c[g.uri]&&(b.selected=!0),l.appendChild(b)}return d.appendChild(l),r.filterFunction=function(t){return!c||t&&c[t.uri]},l.addEventListener('click',function(){if(s){c={};for(var n=l.options,r=0;r<n.length;r++){var i=n[r],d=+i.value;n[r].selected&&(c[o[d].uri]=!0)}}else{var u=+l.value;0>u?c=null:(c={},c[o[u].uri]=!0)}D(t,a)},!0),d}function U(t,a,r){function i(){l=''===s.value?null:+s.value,c=''===d.value?null:+d.value,D(t,a)}var o=n.createElement('div'),s=n.createElement('input');s.setAttribute('type','text'),s.style.width='40px',o.appendChild(s);var d=n.createElement('input');d.setAttribute('type','text'),d.style.width='40px',o.appendChild(d);var l=null,c=null;return r.filterFunction=function(t){return t&&(t=+t),l&&(!t||t<l)?!1:c&&(!t||t>c)?!1:!0},s.addEventListener('keyup',i,!1),d.addEventListener('keyup',i,!1),o}function F(t,n,a){return a.checkedAnyValues&&a.possiblyNumber?U(t,n,a):a.possiblyLiteral?O(t,n,a):null}function q(t,n,a){if(a.superClass&&0<a.alternatives.length)return B(t,n,a,a.alternatives);for(var o=a.getConstraints(),s=0,i;s<o.length;s++){if(i=o[s],a.checkedAnyValues&&a.possiblyNumber||i.uri in ue)return U(t,n,a);if(i.uri===se)return O(t,n,a);var d=le.each(i,r.ns.owl('oneOf'));if(0<d.length)return B(t,n,a,d.elements)}return F(t,n,a)}function z(t,a){var r=n.createElement('tr');r.className='selectors',r.appendChild(n.createElement('td'));for(var o=0;o<a.length;++o){var i=n.createElement('td'),s=q(t,a,a[o]);s&&i.appendChild(s),r.appendChild(i)}return r}function H(t,a,o){o=o||{};var s=n.createElement('a'),d=o.linkFunction;return s.setAttribute('href',t),s.appendChild(n.createTextNode(a)),d?s.addEventListener('click',function(t){t.preventDefault(),t.stopPropagation();var n=i.getTarget(t),a=n.getAttribute('href');a||console.log('No href found \n'),d(a)},!0):s.addEventListener('click',r.widgets.openHrefInOutlineMode,!0),s}function W(t,n){var a=!1;return t.uri&&(a=t.uri.match(/^mailto:(.*)/)),a?H(t.uri,a[1],n):H(t.uri,i.label(t),n)}function V(t){var a=n.createElement('img');return a.setAttribute('src',t.uri),a.style.height='40px',a}function G(t){return a&&a.hints&&t.variable&&a.hints[t.variable.toNT()]?a.hints[t.variable.toNT()]:{}}function J(t,a){var i=G(a),o=i.cellFormat;if(o)switch(o){case'shortDate':return n.createTextNode(r.widgets.shortDate(t.value));default:}else{if('Literal'===t.termType){if(t.datatype){if(fe[t.datatype.uri])return n.createTextNode(r.widgets.shortDate(t.value));if(ue[t.datatype.uri]){var s=n.createElement('span');return s.textContent=t.value,s.setAttribute('style','text-align: right'),s}}return n.createTextNode(t.value)}if('NamedNode'===t.termType&&a.isImageColumn())return V(t);if('NamedNode'===t.termType||'BlankNode'===t.termType)return W(t,i);if('Collection'===t.termType){var d=n.createElement('span');return d.appendChild(n.createTextNode('[')),t.elements.map(function(t){d.appendChild(J(t,a)),d.appendChild(n.createTextNode(', '))}),d.removeChild(d.lastChild),d.appendChild(n.createTextNode(']')),d}return n.createTextNode('unknown termtype \''+t.termType+'\'!')}}function K(t,a,r,o){var s=n.createElement('td');a._subject&&'uri'in a._subject&&s.appendChild(H(a._subject.uri,'\u2192')),t.appendChild(s);for(var d=0;d<r.length;++d){var i=r[d],l=n.createElement('td'),c=i.getKey(),u;if(c in a.values){var f=a.values[c],m=!1;a.originalValues&&a.originalValues[c]&&f.length!==a.originalValues[c].length&&(m=!0);for(var h=0,g;h<f.length;++h)g=f[h],a.originalValues&&a.originalValues[c]&&a.originalValues[c].length>h&&(u=a.originalValues[c][h],g.toString()!==u.toString()&&(m=!0)),l.appendChild(J(g,i)),h!==f.length-1&&l.appendChild(n.createTextNode(',\n')),m&&(l.style.background='#efe')}t.appendChild(l)}return a._htmlRow=t,t}function X(t,n){var a=null;if('Literal'===t.termType)a='value';else if('NamedNode'===t.termType)a='uri';else return 0<=n.indexOf(t);var r;for(r=0;r<n.length;++r)if(n[r].termType===t.termType&&n[r][a]===t[a])return!0;return!1}function Y(t,n,a){var r=!1,i;for(i in a){var o=a[i];i in t.values||(t.values[i]=[]),X(o,t.values[i])||(t.values[i].push(o),r=!0)}r&&(g(t._htmlRow),K(t._htmlRow,t,n)),M(t,n)}function Z(t){if('uri'in t)return t.uri;if('_subject_id'in t)return t._subject_id;var n=''+be;return t._subject_id=n,++be,n}function Q(t,r,o,s){t.running=!0;var d=Date.now(),l=n.createElement('tr');s.appendChild(l),l.textContent='Loading ...';for(var c=0;c<r.length;c++)r[c].original=!0,r[c].originalValues||(r[c].originalValues=r[c].values),r[c].values={};var i=function a(i){if(t.running){l.textContent+='.';var d=null,c=null,u;if(ge in i&&(c=i[ge],u=Z(c),u in pe&&(d=pe[u])),!d){var f=n.createElement('tr');s.appendChild(f),d={_htmlRow:f,_subject:c,values:{}},r.push(d),c&&(pe[u]=d)}delete d.original,Y(d,o,i)}},u=function t(){l&&l.parentNode&&l.parentNode.removeChild&&(l.parentNode.removeChild(l),l=null);var n=Date.now()-d;console.log('Query done: '+r.length+' rows, '+n+'ms');for(var i=r.length-1;0<=i;i--)if(r[i].original){console.log('   deleting row '+r[i]._subject);var o=r[i]._htmlRow;o.parentNode.removeChild(o),delete pe[Z(r[i]._subject)],r.splice(i,1)}a.onDone&&a.onDone()};le.query(t,i,void 0,u)}function ee(t,n){r.log.debug('>> processing formula');for(var a=0,i;a<n.statements.length;++a){if(i=n.statements[a],'NamedNode'===i.predicate.termType&&'Variable'===i.object.termType){var o=i.object.toString();if(o in t){var s=t[o];s.setPredicate(i.predicate,!1,i.subject)}}if('NamedNode'===i.predicate.termType&&'Variable'===i.subject.termType){var d=i.subject.toString();if(d in t){var l=t[d];l.setPredicate(i.predicate,!0,i.object)}}}for(var c=0;c<n.optional.length;++c)r.log.debug('recurse to optional subformula '+c),ee(t,n.optional[c]);r.log.debug('<< finished processing formula')}function te(t){for(var n=[],a={},o=0;o<t.vars.length;++o){var i=new y,s=t.vars[o];r.log.debug('column '+o+' : '+s),i.setVariable(s),a[s]=i,n.push(i)}return ee(a,t.pat),n}function ne(t,a){var r;r=oe?te(t):a.getColumns();var i=[],o=n.createElement('table');return o.appendChild(L(r,a)),o.appendChild(z(i,r)),o.logicalRows=i,o.columns=r,o.query=t,Q(t,i,r,o),o}function ae(t){var n=-1,a=null;for(var r in t){var i=t[r];i.useCount>n&&(a=i,n=i.useCount)}return a}var re=a.sourceDocument,ie=a.tableClass,oe=a.query,se='http://www.w3.org/2000/01/rdf-schema#Literal',de=r.ns,le=r.store,pe={},ce={"http://www.w3.org/2002/07/owl#sameAs":!0,"http://www.w3.org/1999/02/22-rdf-syntax-ns#type":!0},ue={"http://www.w3.org/2001/XMLSchema#decimal":!0,"http://www.w3.org/2001/XMLSchema#float":!0,"http://www.w3.org/2001/XMLSchema#double":!0,"http://www.w3.org/2001/XMLSchema#integer":!0,"http://www.w3.org/2001/XMLSchema#nonNegativeInteger":!0,"http://www.w3.org/2001/XMLSchema#positiveInteger":!0,"http://www.w3.org/2001/XMLSchema#nonPositiveInteger":!0,"http://www.w3.org/2001/XMLSchema#negativeInteger":!0,"http://www.w3.org/2001/XMLSchema#long":!0,"http://www.w3.org/2001/XMLSchema#int":!0,"http://www.w3.org/2001/XMLSchema#short":!0,"http://www.w3.org/2001/XMLSchema#byte":!0,"http://www.w3.org/2001/XMLSchema#unsignedLong":!0,"http://www.w3.org/2001/XMLSchema#unsignedInt":!0,"http://www.w3.org/2001/XMLSchema#unsignedShort":!0,"http://www.w3.org/2001/XMLSchema#unsignedByte":!0},fe={"http://www.w3.org/2001/XMLSchema#dateTime":!0,"http://www.w3.org/2001/XMLSchema#date":!0},he={"http://xmlns.com/foaf/0.1/Image":!0,"http://purl.org/dc/terms/Image":!0},ge=a.keyVariable||'?_row',be=0,ye=null,we=null,ve=n.createElement('div'),xe,_e,ke,Ce;ve.className='tableViewPane',ve.appendChild(d());var Ee=n.createElement('div');if(ve.appendChild(Ee),ve.refresh=function(){Q(Te.query,Te.logicalRows,Te.columns,Te)},oe){var Te=ne(oe);Ee.appendChild(Te)}else{var Ae=I();xe=Ae[0],_e=Ae[1],ie||ke.appendChild(x(xe,_e)),we=ae(_e),we?m(we):m(xe)}return ve}},function(t,n,a){'use strict';var r={};t.exports=r;var i={icons:a(23),log:a(24),ns:a(14),store:a(20),tabs:r,widgets:a(26)},o=a(28);i.tabs.tabWidget=function(t){var n=i.store,a=t.subject,r=t.dom,s=r.createElement('div'),d=parseInt(t.orientation||'0'),l=t.backgroundColor||'#ddddcc',c=2&d,u=1&d,f=s.appendChild(r.createElement('table')),m=function t(n){for(var a=0,r=0;3>r;r++)a+=parseInt(n.slice(2*r+1,2*r+3),16);return 384<a},h=function t(n,a,r){for(var o='#',s='0123456789abcdef',d=0,i,c,u;3>d;d++){i=parseInt(n.slice(2*d+1,2*d+3),16),c=parseInt(a.slice(2*d+1,2*d+3),16),u=i*(1-r)+c*r;var f=parseInt((''+u).split('.')[0]),m=parseInt((''+f/16).split('.')[0]),h=parseInt((''+f%16).split('.')[0]);o+=s[m]+s[h]}return o},g,b,y,w,v,x,_;m(l)?(_=h(l,'#ffffff',0.3),g='#000000'):(_=h(l,'#000000',0.3),g='#ffffff');var k='resize: both; overflow: scroll; margin:0; border: 0.5em; border-style: solid; border-color: '+_+'; padding: 1em;  min-width: 30em; min-height: 450px; width:100%;';if(u){var C=f.appendChild(r.createElement('tr'));y=r.createElement('td'),y.setAttribute('style','margin: 0;');var E=r.createElement('td');E.setAttribute('style','margin: 0;'),c?(C.appendChild(y),C.appendChild(E)):(C.appendChild(E),C.appendChild(y)),v=E.appendChild(r.createElement('table')),x='tr'}else v=r.createElement('tr'),b=f.appendChild(r.createElement('tr')),c?(b=f.appendChild(r.createElement('tr')),w=f.appendChild(r.createElement('tr'))):(w=f.appendChild(r.createElement('tr')),b=f.appendChild(r.createElement('tr'))),v=w,y=b.appendChild(r.createElement('td')),x='td';var T=y.appendChild(r.createElement('table'));s.tabContainer=v,s.bodyContainer=T;var A=function r(){if(t.ordered){var i=n.the(a,t.predicate);return i.elements}return n.each(a,t.predicate)},S=['2em','2em','0','0'];S=S.concat(S).slice(d,d+4),S='border-radius: '+S.join(' ')+';';var I=['0.3em','0.3em','0','0.3em'];I=I.concat(I).slice(d,d+4),I='margin: '+I.join(' ')+';';var N=S+'padding: 0.7em; max-width: 20em;';N+='color: '+g+';';var j=N+'opacity: 50%; margin: 0.3em; background-color: '+l+';',L=N+I+' background-color: '+_+';',R='',M=R+'display: none;',D=function t(){for(var n=0;n<v.children.length;n++)v.children[n].firstChild.setAttribute('style',j)},P=function t(){for(var n=0;n<T.children.length;n++)T.children[n].setAttribute('style',M)},O=function n(a){var i=r.createElement(x);i.subject=a;var s=i.appendChild(r.createElement('div'));return s.setAttribute('style',j),s.addEventListener('click',function(n){n.metaKey||(D(),P()),s.setAttribute('style',L),i.bodyTR.setAttribute('style',R);var o=i.bodyTR.firstChild;o||(o=i.bodyTR.appendChild(r.createElement('div')),o.setAttribute('style',k)),t.renderTabSettings&&n.altKey?!0!==o.asSetttings&&(o.innerHTML='loading settings ...'+a,t.renderTabSettings(o,i.subject),o.asSetttings=!0):!1!==o.asSetttings&&(o.innerHTML='loading item ...'+a,t.renderMain(o,i.subject),o.asSetttings=!1)}),t.renderTab?t.renderTab(s,a):s.textContent=o.label(a),i},B=function t(){var n=A();u||y.setAttribute('colspan',n.length);var a=!1,o,s,i,d,l;for(d=0;d<v.children.length;d++)if(o=v.children[d],d>=n.length||!o.subject.sameTerm(n[d])){a=!0;break}if(a||n.length!==v.children.length){for(l=v.children.length-1;0<=l&&(o=v.children[l],i=l-v.children.length+n.length,!!o.subject.sameTerm(n[i]));l--);for(var c=n.slice(d,l-v.children.length+n.length+1);l>=d;)v.removeChild(v.children[d]),T.removeChild(T.children[d]),l-=1;for(s=0;s<c.length;s++){var f=O(c[s]),m=r.createElement('tr');f.bodyTR=m,r.createElement('tr'),d===v.children.length?(v.appendChild(f),T.appendChild(m)):(v.insertBefore(f,v.children[d+s]),T.insertBefore(m,T.children[d+s]))}}},U=function t(){var n=A();u||y.setAttribute('colspan',n.length);var a=[],r,o,i,s,d;for(o=0;o<v.children.length;o++)r=v.children[o],r.deleteMe=!0;for(i=0;i<n.length;i++){for(s=!1,o=0;o<v.children.length;o++)v.children[o].subject===n[i]&&(s=!0);s||a.push([i,n[i]])}for(i=0;i<a.length;i++)d=a[i],o=d[0],r=O(d[1]),o>=v.length?v.appendChild(r):v.insertBefore(r,v.children[o+1]);for(o=0;o<v.children.length;o++)r=v.children[o],r.deleteMe&&v.removeChild(r)},F=function n(){t.ordered?B():U()};return s.refresh=F,F(),!t.startEmpty&&v.children.length&&v.children[0].firstChild.click(),s}},function(t,n,a){'use strict';var r=function t(n){console.log(n.slice(0,-1))},o=t.exports={};o.list=[],o.paneForIcon=[],o.paneForPredicate=[],o.register=function(t,n){if(t.requireQueryButton=n,!t.name)return void r('***     No name for pane!\n');if(r('  registering pane: '+t.name+'\n'),!t.label)return void r('***     No label for pane!\n');if(o.list.push(t),t.name in o||(o[t.name]=t),t.icon&&(o.paneForIcon[t.icon]=t),t.predicates)for(var a in t.predicates)o.paneForPredicate[a]={pred:a,code:t.predicates[a]}},o.byName=function(t){for(var n=0;n<o.list.length;n++)if(o.list[n].name===t)return o.list[n]},o.OutlineManager=a(452),o.getOutliner=function(t){return t.outliner||(t.outliner=UI.panes.OutlineManager(t)),t.outliner},o.register(a(469)),o.register(a(470)),o.register(a(477)),o.register(a(478)),o.register(a(479)),o.register(a(480)),o.register(a(481)),o.register(a(482)),o.register(a(484)),o.register(a(485)),o.register(a(486)),o.register(a(487)),o.register(a(488)),o.register(a(489)),o.register(a(490)),o.register(a(491)),o.register(a(492)),o.register(a(493)),o.register(a(495)),o.register(a(496)),o.register(a(497)),o.register(a(499)),o.register(a(500)),o.register(a(501)),o.register(a(502)),o.register(a(503)),o.register(a(504)),o.register(a(505)),o.register(a(506)),o.register(a(507)),o.register(a(508)),o.register(a(509)),o.register(a(510)),o.register(a(511)),o.register(a(512))},function(t,n,a){'use strict';(function(n){var r=a(453),i=a(454),o=a(468),d=a(1);t.exports=function(t){function a(){function t(a){var r=a.statements.length,n,i,o;for(n=0;n<r;n++)i=a.statements[n],o=i.tr,'undefined'!=typeof o&&(o.AJAR_pattern=null,o.AJAR_variable=null);for(var s in a.optional)t(a.optional[s])}var a=tabulator.qs,r=new d.rdf.Query,o=Z.length,n,i,s,l;for(n=0;n<o;n++)i=Z[n],l=i.parentNode,s=l.AJAR_statement,d.log.debug('Statement '+s),0<=i.getAttribute('class').indexOf('pred')&&(d.log.info('   We have a predicate'),d.utils.makeQueryRow(r,l)),0<=i.getAttribute('class').indexOf('obj')&&(d.log.info('   We have an object'),d.utils.makeQueryRow(r,l,!0));return a.addQuery(r),t(r.pat),r}function s(t){for(var n=[],a=arguments.length-1;0<a;a--)n[a-1]=arguments[a];var r=new Date().getTime(),i=t.apply(t,n),o=new Date().getTime();return d.log.info('BENCHMARK: kb delta: '+(Q.statements.length-s.lastkbsize)+', time elapsed for '+t+' was '+(o-r)+'ms'),s.lastkbsize=Q.statements.length,i}function l(t,n,a){var r=d.utils.AJARImage(i.src.icon_remove_node,'remove',void 0,V);return r.addEventListener('click',N),r.node=a,r.setAttribute('about',n.toNT()),r.style.marginLeft='5px',r.style.marginRight='10px',t.appendChild(r),r}function c(n,t,a){var r=V.createElement('tr');r.setAttribute('class','hoverControl');var o=r.appendChild(V.createElement('td'));o.setAttribute('style','margin: 0.2em; border: none; padding: 0; vertical-align: top;'),o.setAttribute('notSelectable','false'),o.setAttribute('about',n.toNT()),o.setAttribute('colspan','2');var s=o.appendChild(d.utils.AJARImage(d.icons.originalIconBase+'tbl-collapse.png','collapse',void 0,V));s.addEventListener('click',T);var l=o.appendChild(V.createElement('strong'));l.appendChild(V.createTextNode(d.utils.label(n))),d.widgets.makeDraggable(l,n),r.firstPane=null;var c=0,f=[],m=[];t&&(r.firstPane=t);;for(var h=0;h<d.panes.list.length;h++){var i=d.panes.list[h],g=i.label(n,V);g&&(f.push(i),i==t&&(c=f.length-1),m.push(g),!r.firstPane&&i.shouldGetFocus&&i.shouldGetFocus(n)&&(r.firstPane=i,c=f.length-1,d.log.info('the '+h+'th pane steals the focus')))}if(f.length||f.push(d.panes.internalPane),r.firstPane=r.firstPane||f[0],1!=f.length)for(var h=0;h<f.length;h++){var i=f[h],b=d.utils.AJARImage(i.icon,m[h],m[h],V);b.style.maxWidth='24px',b.style.maxHeight='24px';var y=function t(r,i){r.addEventListener('click',function(s){for(var l=o;l.parentNode&&'TABLE'!=l.nodeName;l=l.parentNode);if('TABLE'!=l.nodeName)throw'outline: internal error: ';var t=function t(n){for(var a=l.firstChild;a;a=a.nextSibling)'undefined'!=typeof a.pane&&(n&&a.pane!==n||(a.paneButton&&a.paneButton.setAttribute('class','paneHidden'),u(a),a.pane.requireQueryButton&&l.parentNode.className&&1==m&&V.getElementById('queryButton')&&V.getElementById('queryButton').setAttribute('style','display:none;')))},c=function t(i){var o;if(d.log.info('outline: Rendering pane (2): '+i.name),d.no_catch_pane_errors)o=i.render(n,V,a);else try{o=i.render(n,V,a)}catch(t){o=V.createElement('div'),o.setAttribute('class','exceptionPane');var s=V.createElement('pre');o.appendChild(s),s.appendChild(V.createTextNode(d.utils.stackString(t)))}i.requireQueryButton&&V.getElementById('queryButton')&&V.getElementById('queryButton').removeAttribute('style');var c=l.firstChild.nextSibling;c?l.insertBefore(o,c):l.appendChild(o),o.pane=i,o.paneButton=r},f=r.getAttribute('class');'paneHidden'===f?(!s.shiftKey&&t(),c(i),r.setAttribute('class','paneShown')):(t(i),r.setAttribute('class','paneHidden'));for(var f='paneShown',m=0,h=l.firstChild;h;h=h.nextSibling)h.pane&&h.pane.requireQueryButton&&m++},!1)};y(b,i),b.setAttribute('class',h==c?'paneShown':'paneHidden'),h===c&&(r.paneButton=b),r.firstChild.childNodes[1].appendChild(b)}return r.firstChild.tabulatorSelect=function(){k(this,!0)},r.firstChild.tabulatorDeselect=function(){k(this,!1)},r}function u(t){var n=t.parentNode,a=n.parentNode,r=V.createElement('table');a.replaceChild(r,n),n.removeChild(t),a.replaceChild(n,r)}function f(t,n,a){var r=t.createElement('TR');r.AJAR_statement=n,r.AJAR_inverse=a,r.setAttribute('predTR','true');var i=Y.outline_predicateTD(n.predicate,r,a);return r.appendChild(i),r}function m(t,n,a,r){if(d.log.debug('Property list length = '+n.length),0===n.length)return'';var i;a?(i=function t(n){return n.subject},n=n.sort(d.utils.RDFComparePredicateSubject)):(i=function t(n){return n.object},n=n.sort(d.utils.RDFComparePredicateObject));var o=n.length,c;for(c=0;c<o;c++){var u=n[c];if(!r||r(u.predicate,a)){var s=0,l=0,m=0,h;for(h=0;h+c<o&&n[c+h].predicate.sameTerm(u.predicate);h++)0<h&&i(n[c+h]).sameTerm(i(n[c+h-1]))&&s++,i(n[c+h]).lang&&'undefined'!=typeof tabulator&&tabulator.lb&&tabulator.lb.LanguagePreference&&(l+=1,0<=i(n[c+h]).lang.indexOf(tabulator.lb.LanguagePreference)&&m++);var g=f(V,u,a);t.appendChild(g);var b=g.firstChild,y=se.defaults[u.predicate.uri];if(0<m&&l==s+1){for(h=c;h<=c+s;h++)if('undefined'!=typeof tabulator&&tabulator.lb&&tabulator.lb.LanguagePreference&&0<=i(n[h]).lang.indexOf(tabulator.lb.LanguagePreference)){g.appendChild(Y.outline_objectTD(i(n[h]),y,void 0,u));break}c+=s;continue}g.appendChild(Y.outline_objectTD(i(u),y,void 0,u)),g.showNobj=function(r){var o=h-s,f=2*r<o?r:o,m=[];if(1!=o){b.setAttribute('rowspan',f==o?o:r+1);var g;f<o&&1==f&&b.setAttribute('rowspan',2);var l=0;for(g=1;g<h;g++)if(!Q.canon(i(n[c+g])).sameTerm(Q.canon(i(n[c+g-1])))){l++,u=n[c+g],y=se.defaults[u.predicate.uri];var w=V.createElement('tr');w.style.colspan='1',w.appendChild(Y.outline_objectTD(i(n[c+g]),y,void 0,u)),w.AJAR_statement=u,w.AJAR_inverse=a,t.appendChild(w),l>=f&&(w.style.display='none',m.push(w))}else d.log.info('there are duplicates here: %s',n[c+g-1]);f==o&&b.setAttribute('rowspan',l+1)}if(f<o){var v=V.createElement('tr'),x=v.appendChild(V.createElement('td'));if(x.setAttribute('style','margin: 0.2em; border: none; padding: 0; vertical-align: top;'),x.setAttribute('notSelectable','false'),o>r){var _=V.createElement('a');x.appendChild(_);var k=function(t){return t(b,h,s,r)}(function(t,a,r,s){return function(n){_.innerHTML='','none'==n?(_.appendChild(d.utils.AJARImage(d.icons.originalIconBase+'tbl-more-trans.png','more','See all',V)),_.appendChild(V.createTextNode(o-s+' more...')),t.setAttribute('rowspan',s+1)):(_.appendChild(d.utils.AJARImage(d.icons.originalIconBase+'tbl-shrink.png','(less)',void 0,V)),t.setAttribute('rowspan',o+1));for(var a=0,r;a<m.length;a++)r=m[a],r.style.display=n}}),C='none',E=function t(n){return k(C),C='none'==C?'':'none',n&&n.stopPropagation(),!1};E(),_.addEventListener('click',E,!1)}t.appendChild(v)}},g.showAllobj=function(){g.showNobj(h-s)},g.showNobj(10),c+=h-1}}}function h(){this.pat=Q.formula(),this.vars=[]}function g(){ie.push(ie[0]);var t=V.getElementById('queryChoices'),n=V.createElement('option'),a=V.createElement('input'),r=ie.length-1;a.setAttribute('type','checkBox'),a.setAttribute('value',r),t.appendChild(a),t.appendChild(V.createTextNode('Saved query #'+r)),t.appendChild(V.createElement('br')),n.setAttribute('value',r),n.appendChild(V.createTextNode('Saved query #'+r)),V.getElementById('queryJump').appendChild(n)}function b(){function t(a){var r=a.statements.length,n,i,o;for(n=0;n<r;n++)i=a.statements[n],o=i.tr,'undefined'!=typeof o&&(delete o.AJAR_pattern,delete o.AJAR_variable);for(var s in a.optional)t(a.optional[s])}t(oe.pat),d.utils.clearVariableNames(),ie[0]=oe=new h}function y(t,n){d.log.debug('Button callbacks for '+n+' added');var a=function a(r){return function a(o){return(0<=o.indexOf('#')&&console.log('@@ makeIconCallback: Not expecting # in URI whose state changed: '+o),!!t)&&!!X.ancestor(t,'DIV')&&(o==n&&(t.src=r,t.title=i.tooltips[r]),!0)}};ee.addCallback('request',a(i.src.icon_requested)),ee.addCallback('done',a(i.src.icon_fetched)),ee.addCallback('fail',a(i.src.icon_failed))}function w(t){var n=t.getAttribute('class');return n&&0<=n.indexOf('selected')}function v(t){var n=Y.targetOf(t),a=n.parentNode;re.replaceIcon(a.parentNode,i.termWidgets.optOn,i.termWidgets.optOff,x),a.parentNode.parentNode.removeAttribute('optional')}function x(t){var n=Y.targetOf(t),a=n.parentNode;re.replaceIcon(a.parentNode,i.termWidgets.optOff,i.termWidgets.optOn,v),a.parentNode.parentNode.setAttribute('optional','true')}function _(t,a){for(var r=i.termWidgets.optOn,o=i.termWidgets.optOff,s=t;s.parentNode;s=s.parentNode)for(;!0;)if(s.getAttribute('predTR')){var n=s.getAttribute('parentOfSelected');n=n?parseInt(n):0,0==n&&0<a&&re.addIcon(s.childNodes[0],s.getAttribute('optional')?r:o,s.getAttribute('optional')?v:x),n+=a,s.setAttribute('parentOfSelected',n),0==n&&(s.removeAttribute('parentOfSelected'),re.removeIcon(s.childNodes[0],s.getAttribute('optional')?r:o));break}else if(s.previousSibling&&'TR'==s.previousSibling.nodeName)s=s.previousSibling;else break}function k(t,n){if('TD'!=t.nodeName)throw d.log.debug('down'+t.nodeName),'Expected TD in setSelected: '+t.nodeName+t.textContent;d.log.debug('pass');var a=t.getAttribute('class');if(a||(a=''),n){a+=' selected',(0<=a.indexOf('pred')||0<=a.indexOf('obj'))&&_(t,1),Z.push(t);var r=d.utils.getTerm(t);Y.showURI(r);var o=t.AJAR_statement;if('undefined'==typeof o&&(o=t.parentNode.AJAR_statement),o){var s=o.why,l=o.why,c=d.store.updater.editable(s.uri,Q);c||(l=t.parentNode.AJAR_inverse?o.object:o.subject),c&&0<=a.indexOf('pred')&&re.addIcon(t,i.termWidgets.addTri)}}else d.log.debug('cla=$'+a+'$'),'selected'==a&&(a=''),a=a.replace(' selected',''),(0<=a.indexOf('pred')||0<=a.indexOf('obj'))&&_(t,-1),0<=a.indexOf('pred')&&re.removeIcon(t,i.termWidgets.addTri),Z=Z.filter(function(n){return n==t}),d.log.info('Deselecting '+t.textContent);'undefined'!=typeof sourceWidget&&Y.showSource(),t.setAttribute('class',a)}function C(){var t=Z.length,n;for(n=t-1;0<=n;n--)k(Z[n],!1);Z=[]}function E(t){var n=Y.targetOf(t),a=n.parentNode,r=d.utils.getAbout(Q,n),i=t.altKey?d.panes.internalPane:void 0;t.shiftKey?D(a,r,i):t.altKey?R(a,r,{pane:d.panes.internalPane,immediate:!0}):R(a,r)}function T(t){var n=Y.targetOf(t),a=d.utils.getAbout(Q,n),r=t.altKey?d.panes.internalPane:void 0,i=n.parentNode;M(i,a,r)}function A(t){var n=Y.targetOf(t),a=n.getAttribute('uri');t.altKey?ee.fetch(d.rdf.uri.docpart(a),{force:!0}):ee.refresh(Q.sym(d.rdf.uri.docpart(a)))}function S(t){var n=Y.targetOf(t),a=n.getAttribute('uri');t.altKey?ee.fetch(d.rdf.uri.docpart(a),{force:!0}):ee.refresh(Q.sym(d.rdf.uri.docpart(a)))}function I(t){var n=Y.targetOf(t),a=n.getAttribute('uri');ee.fetch(d.rdf.uri.docpart(a))}function N(t){var n=Y.targetOf(t),a=n.node;1<a.childNodes.length&&(a=n.parentNode),u(a)}function L(t){if(Y.UserInput._tabulatorMode)return Y.UserInput.Click(t);var n=Y.targetOf(t),a=n.parentNode,r;for(r=d.utils.ancestor(n,'TD');r&&'false'!==r.getAttribute('notSelectable');r=d.utils.ancestor(r.parentNode,'TD'));if(r){var i=w(r),o=r.getAttribute('class');if(d.log.debug('Was node selected before: '+i),t.altKey)k(r,!w(r));else if(t.shiftKey)k(r,!0);else{if(C(),Y.UserInput.clearInputAndSave(t),k(r,!0),2==t.detail)return void t.stopPropagation();var s=r.parentNode.AJAR_statement;if(!s)return;var n=s.why,l=d.store.updater.editable(n.uri,Q);i&&l&&Y.UserInput.Click(t,Z[0])}d.log.debug('Was node selected after: '+w(r)+', count='+Z.length);var c=r.parentNode;if(c.AJAR_statement)var u=c.AJAR_statement.why;t.stopPropagation()}}function j(t){d.log.info('@TabulatorMousedown, dom.location is now '+V.location);var n=Y.targetOf(t);if(n){var a=n.tagName,r=n.parentNode,o=d.utils.getAbout(Q,n),s=null;'INPUT'==a||'TEXTAREA'==a||(Y.UserInput.clearMenu(),Y.UserInput.lastModified&&Y.UserInput.lastModified.parentNode.nextSibling&&Y.UserInput.backOut(),(!n.src||n.src.slice(n.src.indexOf('/icons/')+1)!=i.src.icon_show_choices&&n.src.slice(n.src.indexOf('/icons/')+1)!=i.src.icon_add_triple)&&Y.UserInput.clearInputAndSave(t),(!n.src||n.src.slice(n.src.indexOf('/icons/')+1)!=i.src.icon_show_choices)&&Y.UserInput.clearMenu(),t&&t.stopPropagation())}}function R(t,n,a){function o(){if(f=Q.canon(f),!t||!t.parentNode||!t.parentNode.parentNode)return!1;var n;if(d.log.info('@@ REPAINTING '),!c)n=ae(f,void 0,l,a);else{for(d.log.info(' ... p is  '+t),n=t.firstChild;n.nextSibling&&(d.log.info(' ... checking node '+n),'table'!=n.nodeName);n=n.nextSibling);n=ae(f,n,l,a)}c=!0,n.style.backgroundColor=d.utils.ancestor(t,'TABLE')&&'white'==d.utils.ancestor(t,'TABLE').style.backgroundColor?'#eee':'white';try{r.util.Event.off&&r.util.Event.off(t,'mousedown','dragMouseDown')}catch(t){console.log('YAHOO '+t)}d.utils.emptyNode(t).appendChild(n),Y.focusTd=t,d.log.debug('expand: Node for '+f+' expanded');for(var o=Q.each(f,d.ns.rdfs('seeAlso')),s=0;s<o.length;s++)25==s&&d.log.warn('expand: Warning: many ('+o.length+') seeAlso links for '+f),ee.lookUpThing(o[s],f)}function s(t){if(arguments[3])return!0;var n=Q.canon(f);d.log.info('@@ expand: relevant subject='+n+', uri='+t+', already='+c);var a=Q.sym(t),r=Q.sym(d.rdf.uri.docpart(t));if(0<=t.indexOf('#'))throw'Internal error: hash in '+t;var i=function a(){if(!n.uri)return!0;var o=Q.uris(n);if(!o)return!1;for(var s=0;s<o.length;s++)for(var i=d.rdf.uri.docpart(o[s]);i;i=Q.HTTPRedirects[i])if(t==i)return!0;return!!Q.anyStatementMatching(n,void 0,void 0,r)};return!i()||(d.log.success('@@ expand OK: relevant subject='+n+', uri='+t+', source='+c),o(),!1)}a=a||{};var l=a.pane,c=!!a.already,u=a.immediate;d.log.info('@outline_expand, dom is now '+V.location),ee.removeCallback('done','expand'),ee.removeCallback('fail','expand');var f=Q.canon(n),m=f.uri?Q.sym(d.rdf.uri.docpart(f.uri)):f;a.solo&&(V.title=d.utils.label(f)),d.log.debug('outline_expand: dereferencing '+f);var h=V.createElement('span');t.appendChild(h),ee.addCallback('done',s),ee.addCallback('fail',s);var g=[];if(f.uri&&'rdf'==f.uri.split(':')[0])return void o();for(var b=0;b<g.length;b++){var i;if(i=g[b](f))return o(),d.log.debug('outline 1815'),void(i[1]&&te.removeChild(te.lastChild))}!f.uri||u||d.widgets.isAudio(f)||d.widgets.isVideo(f)||Q.holds(f,d.ns.rdf('type'),$rdf.Util.mediaTypeClass('application/pdf'))?o():ee.nowOrWhenFetched(f.doc(),void 0,function(n,r){if(n)ee.lookUpThing(f),o(),a.solo&&(V.title=d.utils.label(f));else{var i=V.createElement('pre');i.textContent=r,i.setAttribute('style','background-color: #fee;'),i.textContent='Unable to fetch '+f.doc()+': '+r,t.appendChild(i)}});;}function M(t,n){var a=d.utils.ancestor(t,'TR');if(a=d.utils.ancestor(a.parentNode,'TR'),a)var r=a.AJAR_statement;var i;for(i=t.parentNode;'TD'!=i.tagName;i=i.parentNode)if('undefined'==typeof i)return void alert('Not enclosed in TD!');d.log.debug('Collapsing subject '+n);var o;if(r&&(d.log.debug('looking up pred '+r.predicate.uri+'in defaults'),o=se.defaults[r.predicate.uri]),d.log.debug('view= '+o),'outline'==i.parentNode.parentNode.id)var s=i.parentNode;Y.replaceTD(Y.outline_objectTD(n,o,s,r),i)}function D(t,n){if(tabulator.isExtension&&'symbol'==n.termType&&0>n.uri.indexOf('#'))return void K.selectedBrowser.loadURI(n.uri);for(var a=null,r=t.parentNode;r;r=r.parentNode)d.log.debug('level '+r.tagName),'TD'==r.tagName&&(a=r);d.utils.emptyNode(a).appendChild(ae(n)),V.title=d.utils.label(n),a.setAttribute('about',n.toNT())}function P(t,n){function a(t,n){}}function O(t){var n=Q.sym(t);this.GotoSubject(n,!0)}function B(t,n,a){se.properties[t]||(se.properties[t]=[]),se.properties[t].push(n),a&&(se.defaults[t]=n)}function U(t){var n;if('Literal'==t.termType){var a={integer:'text-align: right;',decimal:'text-align: \'.\';',double:'text-align: \'.\';'};n=V.createElement('span'),n.textContent=t.value;var r='';if(t.datatype&&t.datatype.uri){var o=d.ns.xsd('').uri;t.datatype.uri.slice(0,o.length)==o&&(r=a[t.datatype.uri.slice(o.length)])}n.setAttribute('style',r?r:'white-space: pre-wrap;')}else if('NamedNode'==t.termType||'BlankNode'==t.termType){if(n=V.createElement('span'),n.setAttribute('about',t.toNT()),Y.appendAccessIcons(Q,n,t),'NamedNode'!=t.termType)n.appendChild(V.createTextNode(d.utils.label(t)));else if('tel:'==t.uri.slice(0,4)){var s=t.uri.slice(4),l=V.createElement('a');n.appendChild(V.createTextNode(s)),l.setAttribute('href',t.uri),l.appendChild(d.utils.AJARImage(i.src.icon_telephone,'phone','phone '+s,V)),n.appendChild(l),l.firstChild.setAttribute('class','phoneIcon')}else n.appendChild(V.createTextNode(d.utils.label(t))),d.widgets.makeDraggable(n,t);}else if('Collection'==t.termType){n=V.createElement('table'),n.setAttribute('about',t.toNT());for(var c=0;c<t.elements.length;c++){var u=t.elements[c],f=n.appendChild(V.createElement('tr')),m=f.appendChild(V.createElement('td'));m.setAttribute('style','margin: 0.2em; border: none; padding: 0; vertical-align: top;'),m.setAttribute('notSelectable','false'),m.setAttribute('about',t.toNT()),m.innerHTML=c+1+')',f.appendChild(Y.outline_objectTD(u))}}else'Graph'==t.termType?(n=d.panes.dataContentPane.statementsAsTables(t.statements,V),n.setAttribute('class','nestedFormula')):(d.log.error('Object '+t+' has unknown term type: '+t.termType),n=V.createTextNode('[unknownTermType:'+t.termType+']'));return d.log.debug('contents: '+n.innerHTML),n}function F(t){var n=d.utils.AJARImage(t.uri,d.utils.label(t),d.utils.label(t),V);return n.setAttribute('class','outlineImage'),n}function q(t){var n=V.createElement('a'),a='NamedNode'==t.termType?t.uri:t.value;if(!a)return U(t);var r=a.indexOf('mailto:');return a=0<=r?a.slice(r+7):a,n.setAttribute('href','mailto:'+a),n.appendChild(V.createTextNode(a)),n}function z(t){var a=le(),n=t+a;return r.namespace(n),a}function H(t){var n=V.getElementById(t);n.style.display='none'==n.style.display?'block':'none'}function W(t){var n='cal',i=n+z(n),o=i+'Container',s=V.createElement('table'),l=V.createElement('a');l.innerHTML='<small>mm-dd: '+t.value+'[toggle]</small>',l.onclick=function(){H(o)},s.appendChild(l);var a=t.value.split('-'),c=a[0],u=a[1],d=2<a.length?a[2]:new Date().getFullYear();V.getElementById('divCal').appendChild(s);var f=s.appendChild(V.createElement('DIV'));return f.setAttribute('id',o),f.style.display='none',f.setAttribute('tag','calendar'),r[i]=new r.widget.Calendar('YAHOO.'+i,o,c+'/'+d),r[i].addRenderer(c+'/'+u,pe),r[i].render(),s}var V;if('undefined'!=typeof tabulator&&tabulator.isExtension){var G=Components.classes['@mozilla.org/appshell/window-mediator;1'].getService(Components.interfaces.nsIWindowMediator),J=G.getMostRecentWindow('navigator:browser'),K=J.getBrowser();V=t||J.document}else V=t;this.document=t,this.outlineIcons=i;var X=this,Y=this,Z=[];this.selection=Z,this.ancestor=d.utils.ancestor,this.sparql=d.rdf.UpdateManager,this.kb=d.store;var Q=d.store,ee=d.store.fetcher;V.outline=this,this.focusTd,this.UserInput=new o(this),this.clipboardAddress='tabulator:clipboard',this.UserInput.clipboardInit(this.clipboardAddress);var te=this.outlineElement;this.init=function(){var t=V.getElementById('outline');t.outline=this},this.viewAndSaveQuery=function(){var t=tabulator.qs;d.log.info('outline.doucment is now '+X.document.location);var n=a();if(tabulator.isExtension)tabulator.drawInBestView(n);else{var r;for(r=0;r<t.listeners.length;r++)t.listeners[r].getActiveView().view.drawQuery(n),t.listeners[r].updateQueryControls(t.listeners[r].getActiveView())}},s.lastkbsize=0,this.appendAccessIcons=function(t,n,a){if('NamedNode'==a.termType){var r=t.uris(a);r.sort();for(var o=null,s=0;s<r.length;s++)r[s]!=o&&(o=r[s],Y.appendAccessIcon(n,o))}},this.appendAccessIcon=function(t,n){if(!n)return'';var a=d.rdf.uri.docpart(n);if('http:'!=a.slice(0,5))return'';var r=ee.getState(a),o,s,l;'unrequested'===r?(o=i.src.icon_unrequested,s='fetch',l=I):'requested'===r?(o=i.src.icon_requested,s='fetching',l=A):'fetched'===r?(o=i.src.icon_fetched,l=S,s='loaded'):'failed'===r?(o=i.src.icon_failed,s='failed',l=A):'unpermitted'===r?(o=i.src.icon_failed,l=A,s='no perm'):'unfetchable'===r?(o=i.src.icon_failed,l=A,s='cannot fetch'):d.log.error('?? state = '+r);var c=d.utils.AJARImage(o,s,i.tooltips[o].replace(/[Tt]his resource/,a),V);return c.setAttribute('uri',n),c.addEventListener('click',l),y(c,a),t.appendChild(c),c},tabulator.options={},tabulator.options.references=[];var ne;this.openCheckBox=function(){ne=J.open(' ','NewWin','menubar=0,location=no,status=no,directories=no,toolbar=no,scrollbars=yes,height=200,width=200'),ne.tabulator=tabulator,tabulator.options.names=['BY-NC-ND','BY-NC-SA','BY-NC','BY-ND','BY-SA','BY'];for(var t='<font face=\'arial\' size=\'2\'><form name =\'checkboxes\'>',n=tabulator.options.checkedLicenses,a=0;a<n.length;a++)t+='<input type=\'checkbox\' name = \'n'+a+'\' onClick = \'tabulator.options.submit()\''+(n[a]?'CHECKED':'')+' />CC: '+tabulator.options.names[a]+'<br />';t+='<br /> <a onclick=\'tabulator.options.selectAll()\'>[Select All] </a>',t+='<a onclick=\'tabulator.options.deselectAll()\'> [Deselect All]</a>',t+='</form></font>',ne.document.write(t),ne.document.close();var r;for(r=0;6>r;r++)tabulator.options.references[r]=ne.document.checkboxes.elements[r]},tabulator.options.checkedLicenses=[],tabulator.options.selectAll=function(){var t;for(t=0;6>t;t++)ne.document.checkboxes.elements[t].checked=!0,tabulator.options.references[t].checked=!0,tabulator.options.checkedLicenses[t]=!0},tabulator.options.deselectAll=function(){var t;for(t=0;6>t;t++)ne.document.checkboxes.elements[t].checked=!1,tabulator.options.references[t].checked=!1,tabulator.options.checkedLicenses[t]=!1},tabulator.options.submit=function(){alert('tabulator.options.submit: checked='+tabulator.options.references[0].checked);for(var t=0;6>t;t++)tabulator.options.checkedLicenses[t]=!!tabulator.options.references[t].checked},this.outline_objectTD=function t(n,a,o,s){var c=V.createElement('td');c.setAttribute('style','margin: 0.2em; border: none; padding: 0; vertical-align: top;'),c.setAttribute('notSelectable','false');var u='obj';if(s){var f=Q.each(s.why,Q.sym('http://creativecommons.org/ns#license'));d.log.info('licenses:'+s.why+': '+f);for(var m=['http://creativecommons.org/licenses/by-nc-nd/3.0/','http://creativecommons.org/licenses/by-nc-sa/3.0/','http://creativecommons.org/licenses/by-nc/3.0/','http://creativecommons.org/licenses/by-nd/3.0/','http://creativecommons.org/licenses/by-sa/3.0/','http://creativecommons.org/licenses/by/3.0/'],h=0;h<f.length;h++)for(var g=0;g<tabulator.options.checkedLicenses.length;g++)if(tabulator.options.checkedLicenses[g]&&f[h].uri==m[g]){u+=' licOkay';break}}('NamedNode'==n.termType||'BlankNode'==n.termType||'Literal'==n.termType&&n.value.slice&&('ftp://'==n.value.slice(0,6)||'https://'==n.value.slice(0,8)||'http://'==n.value.slice(0,7)))&&(c.setAttribute('about',n.toNT()),c.appendChild(d.utils.AJARImage(d.icons.originalIconBase+'tbl-expand-trans.png','expand',void 0,V)).addEventListener('click',E)),c.setAttribute('class',u),Q.whether(n,d.ns.rdf('type'),d.ns.link('Request'))&&(c.className='undetermined'),a||(a=U),c.appendChild(a(n)),o&&l(c,n,o);try{new r.util.DDExternalProxy(c)}catch(t){d.log.error('YAHOO Drag and drop not supported:\n'+t)}if(c.tabulatorSelect=function(){k(this,!0)},c.tabulatorDeselect=function(){k(this,!1)},s){var b=new d.rdf.IndexedFormula;b.statements.push(s);var y=Q.each(b,Q.sym('http://dig.csail.mit.edu/TAMI/2007/amord/tms#justification'));if(y.length){var w=V.createElement('span');1<y.length&&(w.innerHTML=' &times; '+y.length),w.setAttribute('class','inquiry'),w.insertBefore(d.utils.AJARImage(i.src.icon_display_reasons,'explain',void 0,V),w.firstChild),c.appendChild(w)}}return c.addEventListener('click',L),c},this.outline_predicateTD=function t(n,a,o,s){var l=V.createElement('TD');switch(l.setAttribute('about',n.toNT()),l.setAttribute('class',s?'pred internal':'pred'),n.termType){case'BlankNode':l.className='undetermined';case'NamedNode':var c=d.utils.predicateLabelForXML(n,o);break;case'Collection':c=d.utils.predicateLabelForXML(n.elements[0],o);}c=c.slice(0,1).toUpperCase()+c.slice(1);var u=V.createElement('TD');for(var f in u.setAttribute('style','margin: 0.2em; border: none; padding: 0; vertical-align: top;'),u.setAttribute('notSelectable','true'),u.appendChild(V.createTextNode(c)),l.appendChild(u),u.style.width='100%',l.appendChild(re.construct(V)),i.termWidgets){if(!a||!a.AJAR_statement)break;i.termWidgets[f].filter&&i.termWidgets[f].filter(a.AJAR_statement,'pred',o)&&re.addIcon(l,i.termWidgets[f])}try{new r.util.DDExternalProxy(l)}catch(t){d.log.error('drag and drop not supported')}return l.tabulatorSelect=function(){k(this,!0)},l.tabulatorDeselect=function(){k(this,!1)},l.addEventListener('click',L),l};var ae=this.propertyTable=function t(n,a,r,i){if(d.log.debug('Property table for: '+n),n=Q.canon(n),!a){var a=V.createElement('table'),o=c(n,r,i);if(a.appendChild(o),o.firstPane){'undefined'==typeof tabulator&&alert('tabulator undefined');var s;try{d.log.info('outline: Rendering pane (1): '+o.firstPane.name),s=o.firstPane.render(n,V,i)}catch(t){s=V.createElement('div'),s.setAttribute('class','exceptionPane');var l=V.createElement('pre');s.appendChild(l),l.appendChild(V.createTextNode(d.utils.stackString(t)))}o.firstPane.requireQueryButton&&V.getElementById('queryButton')&&V.getElementById('queryButton').removeAttribute('style'),a.appendChild(s),s.pane=o.firstPane,s.paneButton=o.paneButton}return a}return d.log.info('Re-expand: '+a),a};this.propertyTR=f,this.appendPropertyTRs=m;var re={};n.termWidget=re,re.construct=function(t){t=t||document;var n=t.createElement('TD');return n.setAttribute('style','margin: 0.2em; border: none; padding: 0; vertical-align: top;'),n.setAttribute('class','iconTD'),n.setAttribute('notSelectable','true'),n.style.width='0px',n},re.addIcon=function(t,n,a){var r=t.childNodes[1];if(r){var i=r.style.width,o=d.utils.AJARImage(n.src,n.alt,n.tooltip,V);i=parseInt(i),i+=n.width,r.style.width=i+'px',r.appendChild(o),a&&o.addEventListener('click',a)}},re.removeIcon=function(t,n){var a=t.childNodes[1];if(a){var r=a.style.width;r=parseInt(r),r-=n.width,a.style.width=r+'px';for(var i=0;i<a.childNodes.length;i++){var o=a.childNodes[i],s=o.src;try{var l=V.location.href.split('?')[0]}catch(t){console.log(t);var l=''}var c=d.rdf.uri.join(n.src,l);s==c&&a.removeChild(o)}}},re.replaceIcon=function(t,n,a,r){re.removeIcon(t,n),re.addIcon(t,a,r)};var ie=[],oe=ie[0]=new h;this.statusBarClick=function(t){var n=d.utils.getTarget(t);n.label&&(J.content.location=n.label)},this.showURI=function t(n){if(n&&V.getElementById('UserURI'))V.getElementById('UserURI').value='NamedNode'==n.termType?n.uri:'';else if(n&&tabulator.isExtension){var a=K.ownerDocument.getElementById('tabulator-display');a.setAttribute('style','display:block'),a.label='NamedNode'==n.termType?n.uri:'',''==a.label?a.setAttribute('style','display:none'):a.addEventListener('click',this.statusBarClick,!1)}},this.showSource=function t(){if('undefined'!=typeof sourceWidget){for(var n in sourceWidget.sources)sourceWidget.sources[n].setAttribute('class','');for(var a=0;a<Z.length;a++){if(!Z[a].parentNode){console.log('showSource: EH? no parentNode? '+Z[a]+'\n');continue}var r=Z[a].parentNode.AJAR_statement;if(r){var i=r.why;i&&i.uri?sourceWidget.highlight(i,!0):tabulator.isExtension&&'BlankNode'==i.termType&&sourceWidget.highlight(Q.sym(tabulator.sourceURI),!0)}}}},this.getSelection=function t(){return Z},this.targetOf=function(t){var n;if(!t)var t=J.event;if(t.target)n=t.target;else if(t.srcElement)n=t.srcElement;else return d.log.error('can\'t get target for event '+t),!1;return 3==n.nodeType&&(n=n.parentNode),n},this.walk=function t(n,a){var r=a||Z[0],i;switch(n){case'down':try{i=r.parentNode.nextSibling.lastChild}catch(t){return void this.walk('up')}C(),k(i,!0);break;case'up':try{i=r.parentNode.previousSibling.lastChild}catch(t){return}C(),k(i,!0);break;case'right':if(C(),r.nextSibling||'strong'==r.lastChild.tagName)k(r.nextSibling,!0);else{var o=V.evaluate('table/div/tr/td[2]',r,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue;k(o,!0)}break;case'left':if(C(),r.previousSibling&&'undetermined'==r.previousSibling.className)return k(r.previousSibling,!0),!0;k(d.utils.ancestor(r.parentNode,'TD'),!0);break;case'moveTo':C(),k(a,!0);}'down'!=n&&'up'!=n||i.tabulatorSelect||this.walk(n)},this.OutlinerKeypressPanel=function t(n){function a(t){t&&V.getElementById('UserURI')&&(V.getElementById('UserURI').value='NamedNode'==t.termType?t.uri:'')}if((d.log.info('Key '+n.keyCode+' pressed'),'TEXTAREA'!=d.utils.getTarget(n).tagName)&&'UserURI'!=d.utils.getTarget(n).id&&!(1<Z.length)){if(0==Z.length)return void((13==n.keyCode||38==n.keyCode||40==n.keyCode||37==n.keyCode||39==n.keyCode)&&(this.walk('right',Y.focusTd),a(d.utils.getAbout(Q,Z[0]))));var r=Z[0];switch(ee.removeCallback('done','setSelectedAfterward'),ee.removeCallback('fail','setSelectedAfterward'),n.keyCode){case 13:if('HTML'==d.utils.getTarget(n).tagName){var i=d.utils.getAbout(Q,r),o=r.parentNode.AJAR_statement.why,s=d.store.updater.editable(o.uri,Q);i?X.GotoSubject(i,!0):s&&Y.UserInput.Enter(r)}else{this.UserInput.Keypress(n);var l=this.walk('down');n.stopPropagation()}return;case 38:this.walk('up'),n.stopPropagation(),n.preventDefault();break;case 40:this.walk('down'),n.stopPropagation(),n.preventDefault();}if('INPUT'!=d.utils.getTarget(n).tagName){switch(n.keyCode){case 46:case 8:var o=r.parentNode.AJAR_statement.why,s=d.store.updater.editable(o.uri,Q);s&&(n.preventDefault(),this.UserInput.Delete(r));break;case 37:if(this.walk('left'))return;var c=d.utils.ancestor(r.parentNode,'TD');M(r,d.utils.getAbout(Q,c));break;case 39:var u=d.utils.getAbout(Q,r);if(u){var f=function t(n){return!!arguments[3]||(m('right',r),a(d.utils.getAbout(Q,Z[0])),!0)},m=this.walk;if(r.nextSibling)return void this.walk('right');'TABLE'!=r.firstChild.tagName&&(ee.addCallback('done',f),ee.addCallback('fail',f),R(r,u,{pane:d.panes.defaultPane})),f()}break;case 38:case 40:break;default:switch(n.charCode){case 99:if(n.ctrlKey){Y.UserInput.copyToClipboard(Y.clipboardAddress,r);break}case 118:case 112:if(n.ctrlKey){Y.UserInput.pasteFromClipboard(Y.clipboardAddress,r);break}default:'HTML'==d.utils.getTarget(n).tagName;}}if(a(d.utils.getAbout(Q,Z[0])),Z[0]){var h=d.utils.findPos(Z[0])[1];h+Z[0].clientHeight>J.scrollY+J.innerHeight&&d.utils.getEyeFocus(Z[0],!0,!0,J),h<J.scrollY+54&&d.utils.getEyeFocus(Z[0],!0,void 0,J)}}}},this.OutlinerMouseclickPanel=function(t){switch(Y.UserInput._tabulatorMode){case 0:j(t);break;case 1:Y.UserInput.Click(t);break;default:}},this.replaceTD=function t(n,a){var r;w(a)&&(r=!0);for(var i=Z.length-1;-1<i;i--)for(var o=Z[i];o.parentNode;o=o.parentNode)o===a&&k(Z[i],!1);a.parentNode.replaceChild(n,a),r&&k(n,!0)},X.outline_refocus=D,this.GotoFormURI_enterKey=function(t){13==t.keyCode&&X.GotoFormURI(t)},this.GotoFormURI=function(t){O(V.getElementById('UserURI').value)},this.GotoURIinit=function(t){var n=Q.sym(t);this.GotoSubject(n)},this.GotoSubject=function(t,n,a,r,i,o){function s(){var n=V.createElement('TR');n.style.verticalAlign='top',o.appendChild(n);var a=Y.outline_objectTD(t,void 0,n);return n.appendChild(a),a}if(o||(o=V.getElementById('outline')),r&&d.utils.emptyNode(o),tabulator.isExtension)var l=function t(n){var a='@mozilla.org/network/simple-uri;1',r=Components.interfaces.nsIURI,i=Components.classes[a].createInstance(r);return i.spec=n,i};var c=s();if(r&&(V.title=d.utils.label(t)),n){R(c,t,{pane:a,solo:r});var u=c.parentNode;d.utils.getEyeFocus(u,!1,void 0,J)}if(r&&tabulator.isExtension){var f=Components.classes['@mozilla.org/browser/global-history;2'].getService(Components.interfaces.nsIGlobalHistory2);f.addURI(l(t.uri),!1,!0,i)}return t},this.GotoURIAndOpen=function(t){var n=O(t)};var se={properties:[],defaults:[],classes:[]},de=d.ns;B(de.foaf('depiction').uri,F,!0),B(de.foaf('img').uri,F,!0),B(de.foaf('thumbnail').uri,F,!0),B(de.foaf('logo').uri,F,!0),B(de.foaf('mbox').uri,q,!0);var Y=this,le=function(){var t=0;return function(){return t+=1,t}}(),pe=function t(n,a){r.util.Dom.addClass(a,'holiday')};return this.createTabURI=function(){V.getElementById('UserURI').value=V.URL+'?uri='+V.getElementById('UserURI').value},this.UserInput.setSelected=k,this.UserInput.deselectAll=C,this.UserInput.views=se,this.outline_expand=R,tabulator.isExtension&&(J.addEventListener('unload',function(){var t=K.ownerDocument.getElementById('tabulator-display');t.label='',t.setAttribute('style','display:none')},!0),K.mPanelContainer.addEventListener('select',function(){var t=K.ownerDocument.getElementById('tabulator-display');t.label='',t.setAttribute('style','display:none')},!0)),this}}).call(n,a(5))},function(t,n,a){'use strict';var r=t.exports={};r.util={},r.util.Event=function(){var t=[];return{on:function n(a,r,i,o,s){var d=function t(n){return i.call(o,n,o)};a.addEventListener(r,d,!1);var l=[a,r,s,d];t.push(l)},off:function n(a,r,i){var o=this._getCacheIndex(a,r,i);if(-1===o)return!1;var s=t[o];return a.removeEventListener(r,s[this.WFN],!1),delete t[o][this.WFN],delete t[o][this.FN],t.splice(o,1),!0},EL:0,TYPE:1,FNID:2,WFN:3,_getCacheIndex:function n(a,r,o){for(var s=0,i=t.length,d;s<i;++s)if(d=t[s],d&&d[this.FNID]==o&&d[this.EL]==a&&d[this.TYPE]==r)return s;return-1}}}(),r.util.DDExternalProxy=function t(n){this.initTarget(n)},r.util.DDExternalProxy.prototype={initTarget:function t(n){this.DDM=r.util.DDM,this.el=n},b4StartDrag:function t(n,a){i.onDragStart(n,a,this.el)},b4Drag:function t(n){},handleMouseDown:function t(n,a){var r=n.which||n.button;1<r||this.DDM.handleMouseDown(n,this)}},r.util.DDM=function t(){return{handleMouseDown:function t(n,a){this.dragCurrent=a;var r=a.el;this.startX=n.pageX,this.startY=n.pageY,this.deltaX=this.startX-r.offsetLeft,this.deltaY=this.startY-r.offsetTop,this.dragThreshMet=!1},handleMouseMove:function t(n){if(!this.dragCurrent)return!0;if(r.util.Event.isIE&&!n.button)return r.log('button failure','info','DragDropMgr'),this.stopEvent(n),this.handleMouseUp(n);if(!this.dragThreshMet){var a=_Mathabs(this.startX-n.pageX),i=_Mathabs(this.startY-n.pageY);(a>this.clickPixelThresh||i>this.clickPixelThresh)&&this.startDrag(this.startX,this.startY)}return this.dragThreshMet,n.preventDefault(),!0},handleMouseUp:function t(n){this.dragCurrent&&(r.util.Event.off(this.dragCurrent.el,'mousemove','dragMouseMove'),r.util.Event.off(this.dragCurrent.el,'mouseup','dragMouseUp'),r.util.Event.off(this.dragCurrent.el,'mouseup','dragMouseUp'),this.dragThreshMet&&(i.onDropInside(n.target),this.dragThreshMet=!1),this.dragCurrent=null)},startDrag:function t(n,a){this.dragCurrent&&this.dragCurrent.b4StartDrag(n,a),this.dragThreshMet=!0},clickPixelThresh:3}}();var i={onDrop:function t(n,a,r){var i=ancestor(ancestor(n.originalTarget,'TABLE').parentNode,'TABLE').outline.selection,o=a.flavour.contentType,s=transferUtils.retrieveURLFromData(a.data,o);if(s){if('application/x-moz-file'==o&&0==a.data.fileSize){var d=kb.sym('chrome://tabulator/content/internalKnowledge.n3#defaultNew');kb.copyTo(d,kb.sym(s))}var l=i[0],c=ancestor(ancestor(l,'TABLE').parentNode,'TABLE'),u=c.outline;u.UserInput.insertTermTo(l,kb.sym(s))}},onDragEnter:function t(n,a){try{var i=ancestor(ancestor(n.originalTarget,'TABLE').parentNode,'TABLE').outline.selection}catch(t){return}for(var o=n.originalTarget;o;o=o.parentNode)if(o.tabulatorSelect){if(i[0]){try{i[0].tabulatorDeselect()}catch(t){throw i[0]+'causes'+t}r.util.Event.off(o,'mouseup','dragMouseUp')}o.tabulatorSelect();break}},onDragExit:function t(n,a){},onDropInside:function t(n){var a=n.ownerDocument.getElementById('outline'),r=a.outline;r.UserInput.insertTermTo(n,getAbout(kb,this.dragTarget))},onDragStart:function t(n,a,r){this.dragTarget=r;var i=Components.interfaces.nsIDragService,o={action:i.DRAGDROP_ACTION_COPY+i.DRAGDROP_ACTION_MOVE+i.DRAGDROP_ACTION_LINK},s=r.ownerDocument.getBoxObjectFor(r),d=Components.classes['@mozilla.org/gfx/region;1'].createInstance(Components.interfaces.nsIScriptableRegion);d.init(),d.unionRect(s.screenX,s.screenY,s.width,s.height);var l={data:null},c=tabulator.Util.getTerm(r);switch(c.termType){case'NamedNode':l.data=this.URItoTransferDataSet(c.uri);break;case'BlankNode':l.data=this.URItoTransferDataSet(c.toNT());break;case'Literal':l.data=this.URItoTransferDataSet(c.value);}l=l.data;var u=Components.classes['@mozilla.org/supports-array;1'].createInstance(Components.interfaces.nsISupportsArray),f=nsTransferable.set(l.dataList[0]);u.AppendElement(f.QueryInterface(Components.interfaces.nsISupports)),this.mDragService.invokeDragSession(r,u,d,o.action)},getSupportedFlavours:function t(){var n=new FlavourSet;return n.appendFlavour('text/x-moz-url'),n.appendFlavour('text/unicode'),n.appendFlavour('application/x-moz-file','nsIFile'),n},URItoTransferDataSet:function t(n){var a=new TransferDataSet,r=new TransferData;return r.addDataForFlavour('text/x-moz-url',n),r.addDataForFlavour('text/unicode',n),a.push(r),a},_mDS:null,get_mDragService:function t(){if(!this._mDS){var n='@mozilla.org/widget/dragservice;1',a=Components.interfaces.nsIDragService;this._mDS=Components.classes[n].getService(a)}return this._mDS},DDM:r.util.DDM}},function(t,n,a){'use strict';var r=t.exports={},i=a(1);r.src=[],r.tooltips=[],r.src.icon_expand=i.icons.originalIconBase+'tbl-expand-trans.png',r.src.icon_more=i.icons.originalIconBase+'tbl-more-trans.png',r.src.icon_collapse=i.icons.originalIconBase+'tbl-collapse.png',r.src.icon_internals=i.icons.originalIconBase+'tango/22-emblem-system.png',r.src.icon_instances=i.icons.originalIconBase+'tango/22-folder-open.png',r.src.icon_foaf=i.icons.originalIconBase+'foaf/foafTiny.gif',r.src.icon_social=i.icons.originalIconBase+'social/social.gif',r.src.icon_mb=i.icons.originalIconBase+'microblog/microblog.png',r.src.icon_shrink=i.icons.originalIconBase+'tbl-shrink.png',r.src.icon_rows=i.icons.originalIconBase+'tbl-rows.png',r.src.icon_unrequested=i.icons.originalIconBase+'16dot-blue.gif',r.src.icon_fetched=i.icons.originalIconBase+'16dot-green.gif',r.src.icon_failed=i.icons.originalIconBase+'16dot-red.gif',r.src.icon_requested=i.icons.originalIconBase+'16dot-yellow.gif',r.src.icon_CVPane=i.icons.originalIconBase+'CV.png',r.src.icon_defaultPane=i.icons.originalIconBase+'about.png',r.src.icon_visit=i.icons.originalIconBase+'tango/22-text-x-generic.png',r.src.icon_dataContents=i.icons.originalIconBase+'rdf_flyer.24.gif',r.src.icon_n3Pane=i.icons.originalIconBase+'w3c/n3_smaller.png',r.src.icon_RDFXMLPane=i.icons.originalIconBase+'22-text-xml4.png',r.src.icon_imageContents=i.icons.originalIconBase+'tango/22-image-x-generic.png',r.src.icon_airPane=i.icons.originalIconBase+'1pt5a.gif',r.src.icon_LawPane=i.icons.originalIconBase+'law.jpg',r.src.icon_pushbackPane=i.icons.originalIconBase+'pb-logo.png',r.src.icon_photoPane=i.icons.originalIconBase+'photo_small.png',r.src.icon_tagPane=i.icons.originalIconBase+'tag_small.png',r.src.icon_TinyTag=i.icons.originalIconBase+'tag_tiny.png',r.src.icon_photoBegin=i.icons.originalIconBase+'photo_begin.png',r.src.icon_photoNext=i.icons.originalIconBase+'photo_next.png',r.src.icon_photoBack=i.icons.originalIconBase+'photo_back.png',r.src.icon_photoEnd=i.icons.originalIconBase+'photo_end.png',r.src.icon_photoImportPane=i.icons.originalIconBase+'flickr_small.png',r.src.icon_retract=i.icons.originalIconBase+'retract.gif',r.src.icon_refresh=i.icons.originalIconBase+'refresh.gif',r.src.icon_optoff=i.icons.originalIconBase+'optional_off.PNG',r.src.icon_opton=i.icons.originalIconBase+'optional_on.PNG',r.src.icon_map=i.icons.originalIconBase+'compassrose.png',r.src.icon_retracted=r.src.icon_unrequested,r.src.icon_retracted=r.src.icon_unrequested,r.src.icon_time=i.icons.originalIconBase+'icons/Wclocksmall.png',r.src.icon_telephone=i.icons.originalIconBase+'silk/telephone.png',r.src.icon_time=i.icons.originalIconBase+'Wclocksmall.png',r.src.icon_remove_node=i.icons.originalIconBase+'tbl-x-small.png',r.src.icon_add_triple=i.icons.originalIconBase+'tango/22-list-add.png',r.src.icon_add_new_triple=i.icons.originalIconBase+'tango/22-list-add-new.png',r.src.icon_show_choices=i.icons.originalIconBase+'userinput_show_choices_temp.png',r.src.icon_display_reasons=i.icons.originalIconBase+'tango/22-help-browser.png',r.tooltips[r.src.icon_display_reasons]='Display explanations',r.tooltips[r.src.icon_add_triple]='Add more',r.tooltips[r.src.icon_add_new_triple]='Add one',r.tooltips[r.src.icon_remove_node]='Remove',r.tooltips[r.src.icon_expand]='View details.',r.tooltips[r.src.icon_collapse]='Hide details.',r.tooltips[r.src.icon_shrink]='Shrink list.',r.tooltips[r.src.icon_internals]='Under the hood',r.tooltips[r.src.icon_instances]='List',r.tooltips[r.src.icon_foaf]='Friends',r.tooltips[r.src.icon_rows]='Make a table of data like this',r.tooltips[r.src.icon_unrequested]='Fetch this.',r.tooltips[r.src.icon_fetched]='Fetched successfully.',r.tooltips[r.src.icon_failed]='Failed to load. Click to retry.',r.tooltips[r.src.icon_requested]='This is being fetched. Please wait...',r.tooltips[r.src.icon_visit]='View document',r.tooltips[r.src.icon_retract]='Remove this source and all its data from tabulator.',r.tooltips[r.src.icon_refresh]='Refresh this source and reload its triples.',r.OutlinerIcon=function(t,n,a,r,i){return this.src=t,this.alt=a,this.width=n,this.tooltip=r,this.filter=i,this},r.termWidgets={},r.termWidgets.optOn=new r.OutlinerIcon(r.src.icon_opton,20,'opt on','Make this branch of your query mandatory.'),r.termWidgets.optOff=new r.OutlinerIcon(r.src.icon_optoff,20,'opt off','Make this branch of your query optional.'),r.termWidgets.addTri=new r.OutlinerIcon(r.src.icon_add_triple,18,'add tri','Add one')},function(t,n,a){'use strict';function r(t){return t&&t.__esModule?t:{default:t}}function i(t,n){return Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(n)}}))}function o(t,n){if(!(t instanceof n))throw new TypeError('Cannot call a class as a function')}function s(t,n,a){var r=E.default.any(t,n);return r?r.value:a}function d(t,n){var a=n.toDel,r=n.toIns;return new Promise(function(t,n){E.default.updater.update(a,r,function(a,r,i){return r?void t():n(new Error('PATCH failed for resource <'+a+'>: '+i))})})}function l(t){return{groupIndex:E.default.any(t,k.default.vcard('groupIndex')),groupContainer:E.default.sym(t.dir().uri+'Group/')}}Object.defineProperty(n,'__esModule',{value:!0}),n.GroupBuilder=n.Group=n.GroupPicker=n.PeoplePicker=void 0;var c=function(){function t(t,n){for(var a=0,r;a<n.length;a++)r=n[a],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}return function(n,a,r){return a&&t(n.prototype,a),r&&t(n,r),n}}(),u=i(['\n        To add someone to this group, drag and drop their WebID URL onto the box.\n      '],['\n        To add someone to this group, drag and drop their WebID URL onto the box.\n      ']),f=a(211),m=r(f),h=a(456),g=r(h),b=a(4),y=r(b),w=a(247),v=a(97),x=a(29),_=a(15),k=r(_),C=a(22),E=r(C),T=n.PeoplePicker=function(){function t(n,a,r,i){o(this,t),this.options=i||{},this.element=n,this.typeIndex=a,this.groupPickedCb=r,this.selectedgroup=this.options.selectedgroup,this.onSelectGroup=this.onSelectGroup.bind(this)}return c(t,[{key:'render',value:function t(){var n=this,a=document.createElement('div');if(a.style.maxWidth='350px',a.style.minHeight='200px',a.style.outline='1px solid black',a.style.display='flex',this.selectedgroup){a.style.flexDirection='column';var r=document.createElement('div');new S(r,this.selectedgroup).render();var i=document.createElement('button');i.textContent=(0,m.default)('Change group'),i.addEventListener('click',function(t){n.selectedgroup=null,n.render()}),a.appendChild(r),a.appendChild(i)}else this.findAddressBook(this.typeIndex).then(function(t){var r=t.book,i=document.createElement('button');i.textContent=(0,m.default)('Pick an existing group'),i.style.margin='auto',i.addEventListener('click',function(t){new A(a,r,n.onSelectGroup).render()});var o=document.createElement('button');o.textContent=(0,m.default)('Create a new group'),o.style.margin='auto',o.addEventListener('click',function(t){n.createNewGroup(r).then(function(t){var a=t.group;new I(n.element,r,a,n.onSelectGroup).render()}).catch(function(t){n.element.appendChild((0,v.errorMessageBlock)(document,(0,m.default)('Error creating a new group. ('+t+')')))})}),a.appendChild(i),a.appendChild(o),n.element.innerHTML='',n.element.appendChild(a)}).catch(function(t){n.element.appendChild((0,v.errorMessageBlock)(document,(0,m.default)('Could find your groups. ('+t+')')))});return this.element.innerHTML='',this.element.appendChild(a),this}},{key:'findAddressBook',value:function t(n){return new Promise(function(t,a){E.default.fetcher.nowOrWhenFetched(n,function(r,i){if(!r)return a(i);var o=E.default.any(null,k.default.solid('forClass'),k.default.vcard('AddressBook'));if(!o)return a(new Error('no address book registered in the solid type index '+n));var s=E.default.any(o,k.default.solid('instance'));return s?void E.default.fetcher.load(s).then(function(n){return t({book:s})}).catch(function(t){return a(new Error('Could not load address book '+t))}):a(new Error('incomplete address book registration'))})})}},{key:'createNewGroup',value:function t(n){var a=l(n),r=a.groupIndex,i=a.groupContainer,o=y.default.sym(''+i.uri+g.default.v4().slice(0,8)+'.ttl#this'),s=this.options.defaultNewGroupName||'Untitled Group',c=[o.doc(),r].map(function(t){var a=y.default.st(o,k.default.rdf('type'),k.default.vcard('Group'),t),i=y.default.st(o,k.default.vcard('fn'),s,o.doc(),t),l=y.default.st(n,k.default.vcard('includesGroup'),o,t),c=t.equals(r)?[a,i,l]:[a,i];return d(t.uri,{toIns:c}).then(function(){c.forEach(function(t){E.default.add(t)})})});return Promise.all(c).then(function(){return{group:o}}).catch(function(t){throw console.log('Could not create new group.  PATCH failed '+t),new Error('Couldn\'t create new group.  PATCH failed for ('+(t.xhr?t.xhr.responseURL:'')+')')})}},{key:'onSelectGroup',value:function t(n){this.selectedgroup=n,this.groupPickedCb(n),this.render()}}]),t}(),A=n.GroupPicker=function(){function t(n,a,r){o(this,t),this.element=n,this.book=a,this.onSelectGroup=r}return c(t,[{key:'render',value:function t(){var n=this;return this.loadGroups().then(function(t){var a=document.createElement('div');a.style.display='flex',a.style.flexDirection='column',t.forEach(function(t){var r=document.createElement('button');r.addEventListener('click',n.handleClickGroup(t)),new S(r,t).render(),a.appendChild(r)}),n.element.innerHTML='',n.element.appendChild(a)}).catch(function(t){n.element.appendChild((0,v.errorMessageBlock)(document,(0,m.default)('There was an error loading your groups. ('+t+')')))}),this}},{key:'loadGroups',value:function t(){var n=this;return new Promise(function(t,a){var r=l(n.book),i=r.groupIndex;E.default.fetcher.nowOrWhenFetched(i,function(r,i){if(!r)return a(i);var o=E.default.each(n.book,k.default.vcard('includesGroup'));return t(o)})})}},{key:'handleClickGroup',value:function t(n){var a=this;return function(t){a.onSelectGroup(n)}}}]),t}(),S=n.Group=function(){function t(n,a){o(this,t),this.element=n,this.group=a}return c(t,[{key:'render',value:function t(){var n=document.createElement('div');return n.textContent=(0,m.default)(s(this.group,k.default.vcard('fn'),'['+this.group.value+']')),this.element.innerHTML='',this.element.appendChild(n),this}}]),t}(),I=n.GroupBuilder=function(){function t(n,a,r,i,s){o(this,t),this.element=n,this.book=a,this.group=r,this.onGroupChanged=function(t,n,a){s&&s(t,n,a)},this.groupChangedCb=s,this.doneBuildingCb=i}return c(t,[{key:'refresh',value:function t(){}},{key:'render',value:function t(){var n=this,a=document.createElement('div');a.style.maxWidth='350px',a.style.minHeight='200px',a.style.outline='1px solid black',a.style.display='flex',a.style.flexDirection='column',(0,w.makeDropTarget)(a,function(t){t.map(function(t){n.add(t).catch(function(t){n.element.appendChild((0,v.errorMessageBlock)(document,(0,m.default)('Could not add the given WebId. ('+t+')')))})})});var r=document.createElement('input');r.type='text',r.value=s(this.group,k.default.vcard('fn'),'Untitled Group'),r.addEventListener('change',function(t){n.setGroupName(t.target.value).catch(function(t){n.element.appendChild((0,v.errorMessageBlock)(document,'Error changing group name. ('+t+')'))})});var i=document.createElement('label');if(i.textContent=(0,m.default)('Group Name:'),i.appendChild(r),a.appendChild(i),E.default.any(this.group,k.default.vcard('hasMember')))E.default.match(this.group,k.default.vcard('hasMember')).forEach(function(t){var r=t.object,i=document.createElement('div');new N(i,r,n.handleRemove(r)).render(),a.appendChild(i)});else{var o=document.createElement('p');o.textContent=(0,m.default)(u),a.appendChild(o)}var d=document.createElement('button');return d.textContent=(0,m.default)('Done'),d.addEventListener('click',function(t){n.doneBuildingCb(n.group)}),a.appendChild(d),this.element.innerHTML='',this.element.appendChild(a),this}},{key:'add',value:function t(n){var a=this;return new Promise(function(t,r){E.default.fetcher.nowOrWhenFetched(n,function(i,o){if(!i)return a.onGroupChanged(o),r(o);var s=y.default.namedNode(n),d=E.default.any(s,k.default.rdf('type'));return d&&d.equals(k.default.foaf('Person'))?t(s):r(new Error('Only people supported right now. (tried to add something of type '+d.value+')'))})}).then(function(t){var n=y.default.st(a.group,k.default.vcard('hasMember'),t);return E.default.holdsStatement(n)?t:d(a.group.doc().uri,{toIns:[n]}).then(function(){n.why=a.group.doc(),E.default.add(n),a.onGroupChanged(null,'added',t),a.render()})})}},{key:'handleRemove',value:function t(n){var a=this;return function(t){var r=y.default.st(a.group,k.default.vcard('hasMember'),n);return d(a.group.doc().uri,{toDel:[r]}).then(function(){return E.default.remove(r),a.onGroupChanged(null,'removed',n),a.render(),!0}).catch(function(t){var a=E.default.any(n,k.default.foaf('name')),r=a&&a.value?'Could not remove '+a.value+'. ('+t+')':'Could not remove '+n.value+'. ('+t+')';throw new Error(r)})}}},{key:'setGroupName',value:function t(n){var a=this,r=l(this.book),i=r.groupIndex,o=[this.group.doc(),i].map(function(t){var r=E.default.match(a.group,k.default.vcard('fn'),null,t),i=y.default.st(a.group,k.default.vcard('fn'),y.default.literal(n));return d(t.value,{toDel:r,toIns:[i]}).then(function(n){E.default.removeStatements(r),i.why=t,E.default.add(i)})});return Promise.all(o)}}]),t}(),N=function(){function t(n,a,r){o(this,t),this.webIdNode=a,this.element=n,this.handleRemove=r}return c(t,[{key:'render',value:function t(){var n=this,a=document.createElement('div');a.style.display='flex';var r=s(this.webIdNode,k.default.foaf('img'),x.iconBase+'noun_15059.svg'),i=document.createElement('img');i.src=(0,m.default)(r),i.width='50',i.height='50',i.style.margin='5px';var o=s(this.webIdNode,k.default.foaf('name'),'['+this.webIdNode+']'),d=document.createElement('span');d.innerHTML=(0,m.default)(o),d.style.flexGrow='1',d.style.margin='auto 0';var l=document.createElement('button');return l.textContent='Remove',l.addEventListener('click',function(t){return n.handleRemove().catch(function(t){n.element.appendChild((0,v.errorMessageBlock)(document,(0,m.default)(''+t)))})}),l.style.margin='5px',a.appendChild(i),a.appendChild(d),a.appendChild(l),this.element.innerHTML='',this.element.appendChild(a),this}}]),t}()},function(t,n,a){(function(r){var o;(function(s){'use strict';function d(){var t=s.crypto||s.msCrypto;if(!h&&t&&t.getRandomValues)try{var n=new Uint8Array(16);y=h=function a(){return t.getRandomValues(n),n},h()}catch(t){}if(!h){var a=Array(16);g=h=function(){for(var t=0,n;16>t;t++)0==(3&t)&&(n=4294967296*Math.random()),a[t]=255&n>>>((3&t)<<3);return a},'undefined'!=typeof console&&console.warn&&console.warn('[SECURITY] node-uuid: crypto not usable, falling back to insecure Math.random()')}}function l(){if(!0)try{var t=a(212).randomBytes;b=h=t&&function(){return t(16)},h()}catch(t){}}function c(t,n,a){var r=n&&a||0,i=0;for(n=n||[],t.toLowerCase().replace(/[0-9a-f]{2}/g,function(t){16>i&&(n[r+i++]=_[t])});16>i;)n[r+i++]=0;return n}function u(t,n){var a=n||0,r=x;return r[t[a++]]+r[t[a++]]+r[t[a++]]+r[t[a++]]+'-'+r[t[a++]]+r[t[a++]]+'-'+r[t[a++]]+r[t[a++]]+'-'+r[t[a++]]+r[t[a++]]+'-'+r[t[a++]]+r[t[a++]]+r[t[a++]]+r[t[a++]]+r[t[a++]]+r[t[a++]]}function f(t,a,r){var o=a&&r||0,i=a||[];t=t||{};var s=null==t.clockseq?E:t.clockseq,d=null==t.msecs?new Date().getTime():t.msecs,l=null==t.nsecs?A+1:t.nsecs,c=d-T+(l-A)/1e4;if(0>c&&null==t.clockseq&&(s=16383&s+1),(0>c||d>T)&&null==t.nsecs&&(l=0),1e4<=l)throw new Error('uuid.v1(): Can\'t create more than 10M uuids/sec');T=d,A=l,E=s,d+=1.22192928e13;var f=(1e4*(268435455&d)+l)%4294967296;i[o++]=255&f>>>24,i[o++]=255&f>>>16,i[o++]=255&f>>>8,i[o++]=255&f;var m=268435455&1e4*(d/4294967296);i[o++]=255&m>>>8,i[o++]=255&m,i[o++]=16|15&m>>>24,i[o++]=255&m>>>16,i[o++]=128|s>>>8,i[o++]=255&s;for(var h=t.node||C,g=0;6>g;g++)i[o+g]=h[g];return a?a:u(i)}function m(t,n,a){var r=n&&a||0;'string'==typeof t&&(n='binary'===t?new v(16):null,t=null),t=t||{};var i=t.random||(t.rng||h)();if(i[6]=64|15&i[6],i[8]=128|63&i[8],n)for(var o=0;16>o;o++)n[r+o]=i[o];return n||u(i)}var h,g,b,y,w;s?d():l();for(var v='function'==typeof r?r:Array,x=[],_={},k=0;256>k;k++)x[k]=(k+256).toString(16).substr(1),_[x[k]]=k;var i=h(),C=[1|i[0],i[1],i[2],i[3],i[4],i[5]],E=16383&(i[6]<<8|i[7]),T=0,A=0,S=m;S.v1=f,S.v4=m,S.parse=c,S.unparse=u,S.BufferClass=v,S._rng=h,S._mathRNG=g,S._nodeRNG=b,S._whatwgRNG=y,'undefined'!=typeof t&&t.exports?t.exports=S:!0?(o=function(){return S}.call(n,a,n,t),!(o!==void 0&&(t.exports=o))):(w=s.uuid,S.noConflict=function(){return s.uuid=w,S},s.uuid=S)})('undefined'==typeof window?null:window)}).call(n,a(2).Buffer)},function(t,n,a){'use strict';var r={acl:a(246),ns:a(15),widgets:a(30),aclControl:t.exports={}},i=a(31);r.aclControl.preventBrowserDropEvents=function(t){function n(t){t.stopPropagation(),t.preventDefault()}function a(t){0<t.dataTransfer.files.length&&!confirm('Are you sure you want to drop this file here? (Cancel opens it in a new tab)')&&(t.stopPropagation(),t.preventDefault(),console.log('@@@@ document-level DROP suppressed: '+t.dataTransfer.dropEffect))}if(console.log('preventBrowserDropEvents called.'),'undefined'!=typeof tabulator){if(tabulator.preventBrowserDropEventsDone)return;tabulator.preventBrowserDropEventsDone=!0}t.addEventListener('drop',a,!1),t.addEventListener('dragenter',n,!1),t.addEventListener('dragover',n,!1)},r.aclControl.shortNameForFolder=function(t){var n=t.uri;'/'===n.slice(-1)&&(n=n.slice(0,-1));var a=n.lastIndexOf('/');return 0<=a&&(n=n.slice(a+1)),n||'/'},r.aclControl.ACLControlBox5=function(t,n,o,s,a){var d=s.updater||new $rdf.UpdateManager(s),l=r.ns.acl,c=t.doc(),u=n.createElement('table');u.setAttribute('style','margin: 1em; border: 0.1em #ccc ;');var f=u.appendChild(n.createElement('tr'));f.textContent='Sharing for '+o+' '+i.label(t),f.setAttribute('style','min-width: 20em; padding: 1em; font-size: 120%; border-bottom: 0.1em solid red; margin-bottom: 2em;');var m=u.appendChild(n.createElement('tr')),h=m.appendChild(n.createElement('div'));h.setAttribute('style','padding: 2em;');var g=u.appendChild(n.createElement('tr')),b=g.appendChild(n.createElement('table')),y=u.appendChild(n.createElement('tr')),w='border-radius: 0.3em; background-color: white; border: 0.01em solid #888;',v=function a(o,i,s,d,c){var u=c.doingDefault?'default':'main';c=c||{};var f=r.acl.readACL(i,s,d,c.doingDefaults),m;o[u]=m=r.acl.ACLbyCombination(f);var h=function t(n){for(var a=['Read','Append','Write','Control'],r=[],o=0;4>o;o++)n&1<<o&&r.push('http://www.w3.org/ns/auth/acl#'+a[o]);return r.sort(),r=r.join('\n'),r},g={1:'Viewers',2:'Submitters',3:'Posters',5:'Editors',9:'Owners (write locked)',13:'Owners'},b={1:!0,2:!0,3:!0,5:!0,13:!0},y={1:'can read but not change information',2:'can add new information but not read any',3:'can add new information, and read but not change existing information',5:'can read and change information',9:'can read and control sharing, currently write-locked.',13:'can read, write, and control sharing.'},w={1:'green',2:'#cc0',3:'orange',5:'red',9:'blue',13:'purple'},v=function t(n){for(var a='',r=['Read','Append','Write','Control'],o=0;4>o;o++)n&1<<o&&(a+=r[o])},x=function t(n){for(var r=0,o;16>r;r++)if(o=m[h(r)],o)for(var a=0;a<o.length;a++)for(;a<o.length&&o[a][1]===n;)o.splice(a,1)},_=function t(n){var a=r.ns,i=$rdf.sym(n),o=d.findTypeURIs(i);for(var s in o)console.log('    drop object type includes: '+s);if(n.startsWith('http')&&3===n.split('/').length)return{pred:'origin',obj:i};if(a.vcard('WebID').uri in o)return{pred:'agent',obj:i};if(a.vcard('Group').uri in o)return{pred:'agentGroup',obj:i};if(i.sameTerm(a.foaf('Agent'))||i.sameTerm(a.rdf('Resource'))||i.sameTerm(a.owl('Thing')))return{pred:'agentClass',obj:i};if(a.vcard('Individual').uri in o||a.foaf('Person').uri in o||a.foaf('Agent').uri in o){var l=d.any(i,a.foaf('preferredURI'));return l?{pred:'agent',obj:$rdf.sym(l)}:{pred:'agent',obj:i}}return a.solid('AppProvider').uri in o?{pred:'origin',obj:i}:a.solid('AppProviderClass').uri in o?{pred:'originClass',obj:i}:void console.log('    Triage fails for '+n)};o.saveBack=function(t){var n=$rdf.graph();o.isContainer?o.defaultsDiffer?(r.acl.makeACLGraphbyCombo(n,i,o.mainByCombo,s,!0),r.acl.makeACLGraphbyCombo(n,i,o.defByCombo,s,!1,!0)):r.acl.makeACLGraphbyCombo(n,i,o.mainByCombo,s,!0,!0):r.acl.makeACLGraphbyCombo(n,i,o.mainByCombo,s,!0);var a=n.updater||new $rdf.UpdateManager(n);a.put(s,n.statementsMatching(void 0,void 0,void 0,s),'text/turtle',function(a,r,i){r?(d.fetcher.unload(s),d.add(n.statements),d.fetcher.requested[s.uri]='done',console.log('ACL modification: success!')):console.log('ACL file save failed: '+i),t(r)})};var C=function a(s,i){var u=o.appendChild(n.createElement('tr'));u.combo=i,u.setAttribute('style','color: '+(c.modify?w[T]||'black':'#888')+';');var f=u.appendChild(n.createElement('td'));f.textContent=g[T]||v[T],f.setAttribute('style','padding-bottom: 2em;');var m=u.appendChild(n.createElement('td')),h=m.appendChild(n.createElement('table'));h.style.width='100%';var b=u.appendChild(n.createElement('td'));b.textContent=y[T]||'Unusual combination',b.setAttribute('style','max-width: 30%;');var k=function t(a,d){h.NoneTR&&(h.removeChild(h.NoneTR),delete h.NoneTR);var u={};c.modify&&(u.deleteFunction=function t(){for(var n=s[i],r=0;r<n.length;r++)if(n[r][0]===a&&n[r][1]===d){n.splice(r,1);break}o.saveBack(function(t){t&&h.removeChild(f)})});var f=h.appendChild(r.widgets.personTR(n,l(a),$rdf.sym(d),u));f.predObj=[a.uri,d.uri]},C=function t(o){var d=s[o],l;if(d&&d.length){var i=h.children;d.sort();for(var c=0;c<i.length;c++)i[c].trashme=!0;for(var u=0,a;u<d.length;u++){for(a=!1,l=0;l<i.length;l++)if(i[l].predObj&&i[l].predObj[0]===d[u][0]&&i[l].predObj[1]===d[u][1]){a=!0,delete i[l].trashme;break}a||k(d[u][0],d[u][1])}for(l=i.length-1;0<=l;l--)i[l].trashme&&h.removeChild(i[l])}else{r.widgets.clearElement(h);var f=h.appendChild(n.createElement('tr'));f.textContent='None',f.setAttribute('style','padding: 1em;'),h.NoneTR=f}};C(i),u.refresh=function(){C(i)},c.modify&&(u.addEventListener('dragover',function(t){t.preventDefault(),t.dataTransfer.dropEffect='copy'}),u.addEventListener('dragenter',function(t){console.log('dragenter event dropEffect: '+t.dataTransfer.dropEffect),this.style.backgroundColor='#ccc',t.dataTransfer.dropEffect='link',console.log('dragenter event dropEffect 2: '+t.dataTransfer.dropEffect)}),u.addEventListener('dragleave',function(t){console.log('dragleave event dropEffect: '+t.dataTransfer.dropEffect),this.style.backgroundColor='white'}),u.addEventListener('drop',function(n){n.preventDefault&&n.preventDefault(),console.log('Drop event. dropEffect: '+n.dataTransfer.dropEffect),console.log('Drop event. types: '+(n.dataTransfer.types?n.dataTransfer.types.join(', '):'NOPE'));var a=null,r=this,l;if(n.dataTransfer.types){for(var c=0,u;c<n.dataTransfer.types.length;c++)u=n.dataTransfer.types[c],'text/uri-list'===u?(a=n.dataTransfer.getData(u).split('\n'),console.log('Dropped text/uri-list: '+a)):'text/plain'===u&&(l=n.dataTransfer.getData(u));null===a&&l&&'http'===l.slice(0,4)&&(a=l,console.log('Waring: Poor man\'s drop: using text for URI'))}else a=[n.dataTransfer.getData('Text')],console.log('@@ WARNING non-standrad drop event: '+a[0]);return console.log('Dropped URI list (2): '+a),a&&a.map(function(n){var a=function a(){i in s||(s[i]=[]),x(n),s[i].push([l.pred,l.obj.uri]),console.log('ACL: setting access to '+t+' by '+l.pred+': '+l.obj),o.saveBack(function(t){t&&(r.style.backgroundColor='white',E())})},l=_(n);return l?void a():(console.log('   looking up dropped thing '+n),void d.fetcher.nowOrWhenFetched(n,function(t,r){t?(l=_(n),l?a():console.log('Error: Drop fails to drop appropriate thing! '+n)):console.log('Error looking up dropped thing '+n+': '+r)}))}),!1}))},E=function t(){for(var n=o.children,a=0;a<n.length;a++)n[a].refresh&&n[a].refresh()},T,k;for(T=15;0<T;T--)k=h(T),(c.modify&&b[T]||m[k])&&C(m,k);return m};return r.acl.getACLorDefault(c,function(t,u,f,m,g,x){var _=!u;if(!t)h.textContent+='Error reading '+(_?' default ':'')+'ACL. status '+f+': '+m;else if(b.isContainer='/'===f.uri.slice(-1),_){var k=s.each(void 0,l('defaultForNew'),g,x);if(!k.length)h.textContent+=' (No defaults given.)';else{h.innerHTML='',h.textContent='The sharing for this '+o+' is the default for folder ';var C=h.appendChild(n.createElement('a'));C.setAttribute('href',g.uri),C.textContent=r.aclControl.shortNameForFolder(g);var a=r.acl.adoptACLDefault(c,m,g,x);v(b,c,m,a,{modify:!1}),b.style.cssText='color: #777;';var E=y.appendChild(n.createElement('button'));E.textContent='Set specific sharing\nfor this '+o,E.style.cssText=w,E.addEventListener('click',function(t){d.put(m,a.statements,'text/turtle',function(t,n,a){n?(h.textContent=' (Now editing specific access for this '+o+')',y.removeChild(E)):h.textContent+=' (Error writing back access control file: '+a+')'})})}}else{var T=function t(a){j=y.appendChild(n.createElement('button')),j.textContent='Stop specific sharing for this '+o+' -- just use default',a&&(j.textContent+=' for '+i.label(a)),j.style.cssText=w,j.addEventListener('click',function(t){s.fetcher.delete(m.uri).then(function(){h.textContent=' The sharing for this '+o+' is now the default.',y.removeChild(j),b.style.cssText='color: #777;'}).catch(function(t){h.textContent+=' (Error deleting access control file: '+m+': '+t+')'})})},A=f.uri.split('#')[0],S=A.slice(0,-1).lastIndexOf('/'),I=A.indexOf('//'),N=0<=I&&S<I+2||0>S?null:A.slice(0,S+1),j,L;if(N?r.acl.getACLorDefault($rdf.sym(N),function(t,n,a,r,i,o){t&&(L=n?a:i),T(L)}):T(),b.addControlForDefaults=function(){b.notice.textContent='Access to things within this folder:',b.notice.style.cssText='font-size: 120%; color: black;';var t=r.widgets.clearElement(b.offer).appendChild(n.createElement('button'));t.innerHTML='<p>Set default for folder contents to<br />just track the sharing for the folder</p>',t.style.cssText=w,t.addEventListener('click',function(t){delete b.defaultsDiffer,delete b.defByCombo,b.saveBack(function(t){t&&b.removeControlForDefaults()})},!1),b.defaultsDiffer=!0,b.defByCombo=v(b,f,m,s,{modify:!0,doingDefaults:!0})},b.removeControlForDefaults=function(){h.textContent='This is also the default for things in this folder.',b.notice.textContent='Sharing for things within the folder currently tracks sharing for the folder.',b.notice.style.cssText='font-size: 80%; color: #888;';var t=r.widgets.clearElement(b.offer).appendChild(n.createElement('button'));for(t.innerHTML='<p>Set the sharing of folder contets <br />separately from the sharing for the folder</p>',t.style.cssText=w,t.addEventListener('click',function(t){b.addControlForDefaults(),h.textContent=''});b.divider.nextSibling;)b.removeChild(b.divider.nextSibling);h.textContent='This is now also the default for things in this folder.'},b.isContainer){var R=r.acl.readACL(f,m,s),M=r.acl.readACL(f,m,s,!0);b.defaultsDiffer=!r.acl.sameACL(R,M),console.log('Defaults differ ACL: '+b.defaultsDiffer)}b.mainByCombo=v(b,f,m,s,{modify:!0}),b.divider=b.appendChild(n.createElement('tr')),b.notice=b.divider.appendChild(n.createElement('td')),b.notice.style.cssText='font-size: 80%; color: #888;',b.offer=b.divider.appendChild(n.createElement('td')),b.notice.setAttribute('colspan','2'),b.defaultsDiffer?b.addControlForDefaults():b.removeControlForDefaults()}}),u}},function(t,n,a){'use strict';function r(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(n[a]=t[a]);return n.default=t,n}function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,'__esModule',{value:!0}),n.logout=n.currentSession=n.popupLogin=n.login=n.fetch=void 0;var o=a(35),s=i(o),d=a(6),l=i(d),c=a(7),u=i(c),f=function(){var t=(0,u.default)(l.default.mark(function t(n,a){var r;return l.default.wrap(function t(i){for(;1;)switch(i.prev=i.next){case 0:if(0!==a.length){i.next=2;break}return i.abrupt('return',null);case 2:return i.prev=2,i.next=5,a[0]();case 5:if(r=i.sent,!r){i.next=8;break}return i.abrupt('return',(0,v.saveSession)(n)(r));case 8:i.next=13;break;case 10:i.prev=10,i.t0=i['catch'](2),console.error(i.t0);case 13:return i.abrupt('return',f(n,a.slice(1)));case 14:case'end':return i.stop();}},t,this,[[2,10]])}));return function n(a,r){return t.apply(this,arguments)}}(),m=n.login=function(){var t=(0,u.default)(l.default.mark(function t(n,a){var r,i;return l.default.wrap(function t(o){for(;1;)switch(o.prev=o.next){case 0:return a=(0,s.default)({},A(),a),o.next=3,C.login(n);case 3:if(r=o.sent,!r){o.next=6;break}return o.abrupt('return',(0,v.saveSession)(a.storage)(r));case 6:return o.next=8,T.login(n,a);case 8:return i=o.sent,o.abrupt('return',i);case 10:case'end':return o.stop();}},t,this)}));return function n(a,r){return t.apply(this,arguments)}}(),h=n.popupLogin=function(){var t=(0,u.default)(l.default.mark(function t(n){var a,r;return l.default.wrap(function t(i){for(;1;)switch(i.prev=i.next){case 0:if(n.popupUri){i.next=2;break}throw new Error('Must provide options.popupUri');case 2:return n.callbackUri||(n.callbackUri=n.popupUri),n=(0,s.default)({},A(),n),a=(0,w.openIdpSelector)(n),i.next=7,(0,w.startPopupServer)(n.storage,a,n);case 7:return r=i.sent,i.abrupt('return',r);case 9:case'end':return i.stop();}},t,this)}));return function n(a){return t.apply(this,arguments)}}(),g=n.currentSession=function(){var t=(0,u.default)(l.default.mark(function t(){var n=0<arguments.length&&arguments[0]!==void 0?arguments[0]:(0,x.defaultStorage)(),a;return l.default.wrap(function t(r){for(;1;)switch(r.prev=r.next){case 0:return r.next=2,(0,v.getSession)(n);case 2:if(a=r.sent,!a){r.next=5;break}return r.abrupt('return',a);case 5:return r.abrupt('return',f(n,[T.currentSession.bind(null,n)]));case 6:case'end':return r.stop();}},t,this)}));return function n(){return t.apply(this,arguments)}}(),b=n.logout=function(){var t=(0,u.default)(l.default.mark(function t(){var n=0<arguments.length&&arguments[0]!==void 0?arguments[0]:(0,x.defaultStorage)(),a;return l.default.wrap(function t(r){for(;1;)switch(r.prev=r.next){case 0:return r.next=2,(0,v.getSession)(n);case 2:if(a=r.sent,a){r.next=5;break}return r.abrupt('return');case 5:r.t0=a.authType,r.next='WebID-OIDC'===r.t0?8:'WebID-TLS'===r.t0?18:18;break;case 8:return r.prev=8,r.next=11,T.logout(n);case 11:r.next=17;break;case 13:r.prev=13,r.t1=r['catch'](8),console.warn('Error logging out:'),console.error(r.t1);case 17:return r.abrupt('break',19);case 18:return r.abrupt('break',19);case 19:return r.abrupt('return',(0,v.clearSession)(n));case 20:case'end':return r.stop();}},t,this,[[8,13]])}));return function n(){return t.apply(this,arguments)}}(),y=a(459),w=a(461),v=a(143),x=a(98),_=a(145),k=a(251),C=r(k),E=a(144),T=r(E),A=function t(){var n=(0,_.currentUrlNoParams)();return{callbackUri:n?n.split('#')[0]:null,popupUri:null,storage:(0,x.defaultStorage)()}},S=n.fetch=function t(n,a){return(0,y.authnFetch)((0,x.defaultStorage)())(n,a)}},function(t,n,a){'use strict';function r(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(n[a]=t[a]);return n.default=t,n}function i(t){return t&&t.__esModule?t:{default:t}}function o(t){var n=this;return function(){var a=(0,u.default)(l.default.mark(function a(r,i){var o,d,c,u;return l.default.wrap(function n(a){for(;1;)switch(a.prev=a.next){case 0:return i=i||{},a.next=3,(0,m.getSession)(t);case 3:return o=a.sent,a.next=6,s(t)(r);case 6:if(d=a.sent,!(o&&d)){a.next=9;break}return a.abrupt('return',b(o,r,i));case 9:return a.next=11,fetch(r,i);case 11:if(c=a.sent,401!==c.status){a.next=20;break}return a.next=15,(0,f.updateHostFromResponse)(t)(c);case 15:return a.next=17,s(t)(r);case 17:if(u=a.sent,!(o&&u)){a.next=20;break}return a.abrupt('return',b(o,r,i));case 20:return a.abrupt('return',c);case 21:case'end':return a.stop();}},a,n)}));return function(t,n){return a.apply(this,arguments)}}()}function s(t){var n=this;return function(){var a=(0,u.default)(l.default.mark(function a(r){var i,o;return l.default.wrap(function n(a){for(;1;)switch(a.prev=a.next){case 0:return a.next=2,(0,m.getSession)(t);case 2:if(i=a.sent,i){a.next=5;break}return a.abrupt('return',!1);case 5:return a.next=7,(0,f.getHost)(t)(r);case 7:return o=a.sent,a.abrupt('return',null!=o&&i.authType===o.authType);case 9:case'end':return a.stop();}},a,n)}));return function(t){return a.apply(this,arguments)}}()}Object.defineProperty(n,'__esModule',{value:!0});var d=a(6),l=i(d),c=a(7),u=i(c);n.authnFetch=o,a(39);var f=a(460),m=a(143),h=a(144),g=r(h),b=function(){var t=(0,u.default)(l.default.mark(function t(n,a,r){return l.default.wrap(function t(i){for(;1;)switch(i.prev=i.next){case 0:i.t0=n.authType,i.next='WebID-OIDC'===i.t0?3:'WebID-TLS'===i.t0?4:4;break;case 3:return i.abrupt('return',g.fetchWithCredentials(n)(a,r));case 4:return i.abrupt('return',fetch(a,r));case 5:case'end':return i.stop();}},t,void 0)}));return function n(a,r,i){return t.apply(this,arguments)}}()},function(t,n,a){'use strict';function r(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(n[a]=t[a]);return n.default=t,n}function i(t){return t&&t.__esModule?t:{default:t}}function o(t){var n=this;return function(){var a=(0,b.default)(h.default.mark(function a(r){var i,o,s,d;return h.default.wrap(function n(a){for(;1;)switch(a.prev=a.next){case 0:return i=C(r),a.next=3,(0,y.getSession)(t);case 3:if(o=a.sent,!(o&&C(o.idp)===i)){a.next=6;break}return a.abrupt('return',{url:i,authType:o.authType});case 6:return a.next=8,(0,w.getData)(t);case 8:if(s=a.sent,d=s.hosts,d){a.next=12;break}return a.abrupt('return',null);case 12:return a.abrupt('return',d[i]||null);case 13:case'end':return a.stop();}},a,n)}));return function(t){return a.apply(this,arguments)}}()}function s(t){var n=this;return function(){var a=(0,b.default)(h.default.mark(function a(r){var i=r.url,o=r.authType;return h.default.wrap(function n(a){for(;1;)switch(a.prev=a.next){case 0:return a.next=2,(0,w.updateStorage)(t,function(t){return(0,f.default)({},t,{hosts:(0,f.default)({},t.hosts,(0,c.default)({},i,{authType:o}))})});case 2:return a.abrupt('return',{url:i,authType:o});case 3:case'end':return a.stop();}},a,n)}));return function(t){return a.apply(this,arguments)}}()}function d(t){var n=this;return function(){var a=(0,b.default)(h.default.mark(function a(r){var i,o;return h.default.wrap(function n(a){for(;1;)switch(a.prev=a.next){case 0:if(i=void 0,i=x.requiresAuth(r)?'WebID-OIDC':k.requiresAuth(r)?'WebID-TLS':null,o=C(r.url),!i){a.next=6;break}return a.next=6,s(t)({url:o,authType:i});case 6:case'end':return a.stop();}},a,n)}));return function(t){return a.apply(this,arguments)}}()}Object.defineProperty(n,'__esModule',{value:!0}),n.hostNameFromRequestInfo=void 0;var l=a(86),c=i(l),u=a(35),f=i(u),m=a(6),h=i(m),g=a(7),b=i(g);n.getHost=o,n.saveHost=s,n.updateHostFromResponse=d;var y=a(143),w=a(98),v=a(144),x=r(v),_=a(251),k=r(_),C=n.hostNameFromRequestInfo=function t(n){var a=n instanceof URL?n:n instanceof Request?new URL(n.url):new URL(n);return a.host}},function(t,n,a){'use strict';function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,'__esModule',{value:!0}),n.openIdpSelector=n.startPopupServer=n.loginHandler=n.storageHandler=void 0;var i=a(47),o=r(i),s=a(208),d=r(s),l=a(250),c=a(145),u=function t(n,a,r){return(0,l.combineHandlers)(f(n),m(a,r))},f=n.storageHandler=function t(n){return function(t){var a=t.id,r=t.method,i=t.args;return'storage/getItem'===r?n.getItem.apply(n,(0,d.default)(i)).then(function(t){return{id:a,ret:t}}):'storage/setItem'===r?n.setItem.apply(n,(0,d.default)(i)).then(function(){return{id:a,ret:null}}):'storage/removeItem'===r?n.removeItem.apply(n,(0,d.default)(i)).then(function(){return{id:a,ret:null}}):null}},m=n.loginHandler=function t(n,a){return function(t){var r=t.id,i=t.method,s=t.args;return'getLoginOptions'===i?o.default.resolve({id:r,ret:{popupUri:n.popupUri,callbackUri:n.callbackUri}}):'foundSession'===i?(a(s[0]),o.default.resolve({id:r,ret:null})):null}},h=n.startPopupServer=function t(n,a,r){return new o.default(function(t,i){if(!(r.popupUri&&r.callbackUri))return i(new Error('Cannot serve a popup without both "options.popupUri" and "options.callbackUri"'));var o=(0,l.server)(a,(0,c.originOf)(r.popupUri))(u(n,r,function(n){o.stop(),t(n)}));o.start()})},g=n.openIdpSelector=function t(n){if(!(n.popupUri&&n.callbackUri))throw new Error('Cannot open IDP select UI.  Must provide both "options.popupUri" and "options.callbackUri".');var a=650,r=400,i=window.open(n.popupUri,'_blank','width='+a+',height='+r+',left='+(window.innerWidth-a)/2+',top='+(window.innerHeight-r)/2);return i}},function(t,n,a){'use strict';function r(t,n){var a=t.dom,r=t.div;if(t.me&&!t.me.uri)throw new Error('newThingUI:  Invalid userid '+me);var o='padding: 0.7em; width: 2em; height: 2em;',s=r.appendChild(a.createElement('img')),d=!1;s.setAttribute('src',l.icons.iconBase+'noun_34653_green.svg'),s.setAttribute('style',o),s.setAttribute('title','Add another tool to the meeting');var u=function t(n){var i=r.appendChild(a.createElement('pre'));i.setAttribute('style','background-color: pink'),i.appendChild(a.createTextNode(n))},f=function t(n){d=!d,s.setAttribute('style',o+(d?'background-color: yellow;':'')),_(d?'':'display: none;')},m=function t(){visibile=!1,s.setAttribute('style',o+(d?'background-color: yellow;':'')),_('display: none;')};s.addEventListener('click',f);var h=function t(n){return new Promise(function(t,r){var o=function t(i,o){var s={newBase:o,workspace:i};for(var h in n)s[h]=n[h];console.log('newThingUI: Minting new '+s.pane.name+' at '+s.newBase),n.pane.mintNew(s).then(function(t){if(!t||!t.newInstance)throw new Error('Cannot mint new - missing newInstance');if(t.folder)c.add(t.folder,l.ns.ldp('contains'),c.sym(t.newBase),t.folder.doc()),t.refreshTarget&&t.refreshTarget.refresh(),d.parentNode.removeChild(d);else{var r=n.div.appendChild(a.createElement('p'));r.setAttribute('style','font-size: 120%;'),r.innerHTML='Your <a target=\'_blank\' href=\''+t.newInstance.uri+'\'><b>new '+n.noun+'</b></a> is ready to be set up. <br/><br/><a target=\'_blank\' href=\''+t.newInstance.uri+'\'>Go to your new '+n.noun+'.</a>',m.removeChild(d)}f()}).catch(function(t){u(t),r(t)})},s=n.pane,d,m;if(n.appPathSegment='edu.mit.solid.pane.'+s.name,n.noun=s.mintClass?l.utils.label(s.mintClass):s.name,!n.folder)d=l.authn.selectWorkspace(a,n,o),n.div.appendChild(d),m=n.div;else{var h=function t(a,r){if(!a)f();else{var i=n.folder.uri;i.endsWith('/')||(i+='/'),i=i+encodeURIComponent(r)+'/',o(null,i)}};d=i(a,l.store,n.noun,h),n.div.appendChild(d),m=n.div}})},g=[];for(var b in n){var y=n[b];if(y.mintNew){var w=t.div.appendChild(a.createElement('img'));w.setAttribute('src',y.icon);var v=y.mintClass?l.utils.label(y.mintClass):y.name+' @@';w.setAttribute('title','Make new '+v),w.setAttribute('style',o+'display: none;'),g.push(w);var x=function n(a,r,i){var o=r,s=a,d=i;r.disabled||r.addEventListener('click',function(n){k(o);var a={event:n,folder:t.folder,iconEle:o,pane:s,noun:d,noIndexHTML:!0,div:t.div,me:t.me,dom:t.dom,refreshTarget:t.refreshTarget};h(a)})};x(y,w,v)}}var _=function t(n){for(var a=0,r;a<g.length;a++)r=o+n,g[a].disabled&&(r+='opacity: 0.3;'),g[a].setAttribute('style',r)},k=function t(n){_('display: none;'),n.setAttribute('style',o+'background-color: yellow;')}}function i(t,n,a,r){var i=t.createElement('div');i.innerHTML='<p>Name of new '+a+':</p>';var o=t.createElement('input');o.setAttribute('type','text'),o.setAttribute('size','30'),o.setAttribute('style',u),o.setAttribute('maxLength','2048'),o.select();var s=function t(){o.setAttribute('class','pendingedit'),o.disabled=!0,r(!0,o.value)};o.addEventListener('keyup',function(t){13===t.keyCode&&s()},!1),i.appendChild(o);var d=i.appendChild(t.createElement('br')),l=i.appendChild(t.createElement('button'));l.setAttribute('type','button'),l.style.cssText=u,l.innerHTML='Cancel',l.addEventListener('click',function(t){i.parentNode.removeChild(i),r(!1)},!1);var c=i.appendChild(t.createElement('button'));return c.setAttribute('type','button'),c.innerHTML='Continue',c.style.cssText=u,c.addEventListener('click',function(t){s()},!1),i}var o=a(4),s=a(30),d=a(249),l={authn:a(248),icons:a(29),log:a(25),ns:a(15),store:a(22),utils:a(31)},c=l.store,u='font-size: 100%; margin: 0.8em; padding:0.5em;';t.exports={newThingUI:r}},function(t,n,a){'use strict';var r={icons:a(29),log:a(25),ns:a(15),pad:a(1),rdf:a(4),store:a(22),widgets:a(30)},o=a(31),s=r.store;t.exports.matrixForQuery=function(n,t,a,r,i,d,l){var c=n.createElement('table'),u=n.createElement('tr'),f=u.appendChild(n.createElement('td'));f.setAttribute('class','MatrixCorner'),c.appendChild(u),c.lastHeader=u;var m=1,h=1,g=[],b=[],w=function t(n,a,r,i){for(;n.firstChild;)n.removeChild(n.firstChild);n.setAttribute('style',''),n.style.textAlign='center',d.cellFunction?d.cellFunction(n,a,r,i):(n.textContent=o.label(i),n.setAttribute('style','padding: 0.3em')),delete n.old},v=function t(a){var r=a.toNT();if(b[r])return b[r];var l=n.createElement('tr'),u=l.appendChild(n.createElement('td'));u.setAttribute('style','padding: 0.3em;'),u.textContent=o.label(a),(a.termType='NamedNode')&&s.fetcher.nowOrWhenFetched(a.uri.split('#')[0],void 0,function(t,n,r){u.textContent=o.label(a)});for(var f=0;f<g.length;f++)w(l.appendChild(n.createElement('td')),$rdf.fromNT(g[f]),a,null);l.dataValueNT=r,b[r]=l;for(var i=c.lastHeader.nextSibling;i;i=i.nextSibling)if(r>i.dataValueNT&&d&&d.yDecreasing||r<i.dataValueNT&&!(d&&d.yDecreasing))return c.insertBefore(l,i);return c.appendChild(l)},_=function a(r){for(var s=r.toNT(),l=null,u=0;u<g.length;u++){if(g[u]===s)return u;if(s>g[u]&&d.xDecreasing||s<g[u]&&!d.xDecreasing){g=g.slice(0,u).concat([s]).concat(g.slice(u)),l=u;break}}null===l&&(l=g.length,g.push(s));for(var i=c.firstChild;i;i=i.nextSibling){var f=i.dataValueNT,m=n.createElement('td');if(m.style.textAlign='center',i===c.firstChild?m.textContent=o.label(r):w(m,r,$rdf.fromNT(f),null),l===g.length-1)i.appendChild(m);else{for(var h=i.firstChild,t=0;t<l+1;t++)h=h.nextSibling;i.insertBefore(m,h)}}return l},y=function t(){for(var n=1,a;n<c.children.length;n++){a=c.children[n];for(var r=1;r<a.children.length;r++)a.children[r].old=!0}},x=function t(){var n=[],a=[],r,o;if(d.set_y)for(var s=0;s<d.set_y.length;s++)a[d.set_y[s]]=!0;if(d.set_x)for(s=0;s<d.set_x.length;s++)n[_(d.set_x[s])+1]=!0;for(var l=1;l<c.children.length;l++){r=c.children[l];for(var i=1;i<r.children.length;i++)if(o=r.children[i],o.old){var u=$rdf.fromNT(r.dataValueNT),f=$rdf.fromNT(g[i-1]);w(o,f,u,null)}else a[r.dataValueNT]=!0,n[i]=!0}for(var l=0;l<c.children.length;l++)if(r=c.children[l],0<l&&!a[r.dataValueNT])delete b[r.dataValueNT],c.removeChild(r);else for(var i=r.children.length-1,o;0<i;i--)o=r.children[i],n[i]||r.removeChild(o);for(var m=[],i=0;i<g.length;i++)n[i+1]&&m.push(g[i]);g=m};c.refresh=function(){y(),s.query(t,C,void 0,x)};var C=function t(n){var o=n[a],s=n[r],d=n[i],l=v(s),c=_(o),u=l.children[c+1];w(u,o,s,d)};if(d.set_y)for(var E=0;E<d.set_y.length;E++)v(d.set_y[E]);if(d.set_x)for(E=0;E<d.set_x.length;E++)_(d.set_x[E]);return s.query(t,C,void 0,l),c}},function(t,n,a){'use strict';var r={icons:a(29),log:a(25),ns:a(15),pad:a(1),rdf:a(4),store:a(22),widgets:a(30)},i=a(31),o=r.store,s='font-size: 100%; margin: 0.8em; padding:0.5em; background-color: white;';t.exports=function(t,n,a,o,s){n=n||r.kb;var d=r.ns,l=$rdf.Namespace('http://www.w3.org/2005/01/wf/flow#'),c=$rdf.Namespace('http://purl.org/dc/terms/');s=s||{};var u=!!s.newestFirst,f='white-space: pre-wrap; width: 90%; font-size:100%; background-color: white; border: 0.07em solid #eee; padding: .2em 0.5em; margin: 0.1em 1em 0.1em 1em',m=t.createElement('div'),h=tabulator.preferences.get('me'),g=h?n.sym(h):null,b;g||console.log('Message area: @@ Should be logged in at this point');var y=r.store.updater,w=function n(i,o){var s=t.createElement('a');return o.uri&&(s.setAttribute('href',o.uri),s.addEventListener('click',r.widgets.openHrefInOutlineMode,!0),s.setAttribute('style','color: #3B5998; text-decoration: none; ')),s.textContent=i,s},x=function n(a,r){var i=t.createElement('pre');return i.setAttribute('style',r||'color: grey'),m.appendChild(i),i.appendChild(t.createTextNode(a)),i},_={log:function t(n){x(n,'color: #111;')},warn:function t(n){x(n,'color: #880;')},error:function t(n){x(n,'color: #800;')}},k=function i(){var s=t.createElement('tr'),l=t.createElement('td'),u=t.createElement('td'),m=t.createElement('td');s.appendChild(l),s.appendChild(u),s.appendChild(m),s.AJAR_date='9999-01-01T00:00:00Z';var h=function i(){b.setAttribute('class','pendingedit'),b.disabled=!0;var l=[],u=new Date,f=''+u.getTime(),m=$rdf.term(u),h=n.sym(o.uri+'#Msg'+f);l.push(new $rdf.Statement(a,d.wf('message'),h,o)),l.push(new $rdf.Statement(h,d.sioc('content'),n.literal(b.value),o)),l.push(new $rdf.Statement(h,c('created'),m,o)),g&&l.push(new $rdf.Statement(h,d.foaf('maker'),g,o));var w=function a(i,o,d){if(!o)s.appendChild(r.widgets.errorMessageBlock(t,'Error writing message: '+d));else{var l={"?msg":h,"?content":n.literal(b.value),"?date":m,"?creator":g};S(l),b.value='',b.setAttribute('class',''),b.disabled=!1}};y.update([],l,w)};s.appendChild(t.createElement('br'));var b=t.createElement('textarea');u.appendChild(b),b.rows=3,b.setAttribute('style',f);var w=t.createElement('button');return w.textContent='send',w.setAttribute('style','float: right;'),w.addEventListener('click',h,!1),m.appendChild(w),s},C=function t(n){var a=r.store.any(n,r.ns.foaf('nick'));return a?''+a.value:''+i.label(n)},E=function t(a,r){var i={},o,s;for(o=r.firstChild;o;o=o.nextSibling)o.AJAR_subject&&(i[o.AJAR_subject.uri]=!0);var l=n.each(a,d.wf('message')),c={};for(l.map(function(t){c[t.uri]=!0,i[t.uri]||A(t)}),o=r.firstChild;o;)s=o.nextSibling,o.AJAR_subject&&!c[o.AJAR_subject.uri]&&r.removeChild(o),o=s},T=function t(r){var i=n.statementsMatching(r).concat(n.statementsMatching(void 0,void 0,r));y.update(i,[],function(t,n,r){n?E(a,b):_.error('Cant delete messages:'+r)})},A=function t(a){var r={"?msg":a,"?creator":n.any(a,d.foaf('maker')),"?date":n.any(a,c('created')),"?content":n.any(a,d.sioc('content'))};S(r)},S=function n(a){var i=a['?creator'],o=a['?msg'],s=a['?date'],d=a['?content'],l=s.value,c=t.createElement('tr');c.AJAR_date=l,c.AJAR_subject=o;for(var m=!1,h=b.firstChild;;h=h.nextSibling){if(!h)break;if(l>h.AJAR_date&&u||l<h.AJAR_date&&!u){b.insertBefore(c,h),m=!0;break}}m||b.appendChild(c);var g=t.createElement('td');c.appendChild(g);var y=g.appendChild(w(C(i),i));i.uri&&r.store.fetcher.nowOrWhenFetched(i.doc(),void 0,function(t,n){y.textContent=C(i)}),g.appendChild(t.createElement('br')),g.appendChild(w(r.widgets.shortDate(l),o));var v=t.createElement('td');c.appendChild(v);var x=t.createElement('p');x.setAttribute('style',f),v.appendChild(x),x.textContent=d.value;var _=t.createElement('td');c.appendChild(_);var k=t.createElement('button');_.appendChild(k),k.textContent='-',c.setAttribute('class','hoverControl'),k.setAttribute('class','hoverControlHide'),k.setAttribute('style','color: red;'),k.addEventListener('click',function(n){_.removeChild(k);var a=t.createElement('button');a.textContent='cancel',_.appendChild(a).addEventListener('click',function(t){_.removeChild(r),_.removeChild(a),_.appendChild(k)},!1);var r=t.createElement('button');r.textContent='Delete message',_.appendChild(r).addEventListener('click',function(t){_.removeChild(r),_.removeChild(a),T(o)},!1)},!1)};if(b=t.createElement('table'),m.appendChild(b),b.setAttribute('style','width: 100%;'),tabulator.preferences.get('me')){var I=k();u?b.insertBefore(I,b.firstChild):b.appendChild(I)}var N;if(s.query)N=s.query;else{N=new $rdf.Query('Messages');var j={},v=['msg','date','creator','content'];v.map(function(t){N.vars.push(j[t]=$rdf.variable(t))}),N.pat.add(a,l('message'),j.msg),N.pat.add(j.msg,d.dct('created'),j.date),N.pat.add(j.msg,d.foaf('maker'),j.creator),N.pat.add(j.msg,d.sioc('content'),j.content)}return n.query(N,S),m.refresh=function(){E(a,b)},m}},function(t,n,a){'use strict';var r=a(4),i=t.exports={},o={icons:a(29),log:a(25),ns:a(15),pad:i,rdf:r,store:a(22),widgets:a(30)},s=a(31);o.pad.lightColorHash=function(t){var n=function t(n){return n.split('').reduce(function(t,n){return t=(t<<5)-t+n.charCodeAt(0),t&t},0)};return t&&t.uri?'#'+(12632256|16777215&n(t.uri)).toString(16):'#ffffff'},o.pad.renderPartipants=function(t,n,a,r,i,d){var l=o.store,c=o.ns;n.setAttribute('style','margin: 0.8em;');var u=function a(r){var i=l.any(r,c.wf('participant')),s=l.anyValue(r,c.ui('backgroundColor'))||'white',u=t.createElement('div');u.setAttribute('style','height: 1.5em; width: 1.5em; margin: 0.3em; border 0.01em solid #888; background-color: '+s);var f=o.widgets.personTR(t,null,i,d);n.appendChild(f);var m=t.createElement('td');return m.setAttribute('style','vertical-align: middle;'),m.appendChild(u),f.insertBefore(m,f.firstChild),f},f=function t(){var a=l.each(r,c.wf('participation')).map(function(t){return[l.anyValue(t,o.ns.cal('dtstart'))||'9999-12-31',t]});a.sort();var i=a.map(function(t){return t[1]});s.syncTableToArray(n,i,u)};return n.refresh=f,f(),n},o.pad.recordParticipation=function(t,n,a){var r=o.store,i=o.ns,s=tabulator.preferences.get('me');if(s){var d=r.sym(s),l=r.each(t,i.wf('participation')).filter(function(t){return r.holds(t,i.wf('participant'),d)});if(1<l.length)throw'Multiple records of your participation';if(!l.length){var c=o.widgets.newThing(n),u=[o.rdf.st(t,i.wf('participation'),c,n),o.rdf.st(c,i.wf('participant'),d,n),o.rdf.st(c,o.ns.cal('dtstart'),new Date,n),o.rdf.st(c,i.ui('backgroundColor'),o.pad.lightColorHash(d),n)];r.updater.update([],u,function(t,n,r){if(!n)throw new Error('Error recording your partipation: '+r);a&&a.refresh&&a.refresh()})}}},o.pad.manageParticipation=function(t,n,a,r,i,s){var d=t.createElement('table');n.appendChild(d),o.pad.renderPartipants(t,d,a,r,i,s);try{o.pad.recordParticipation(r,a,d)}catch(a){n.appendChild(o.widgets.errorMessageBlock(t,'Error recording your partipation: '+a))}return d},o.pad.notepad=function(n,a,d,i,l){l=l||{};var c=l.exists,u=n.createElement('table'),f=o.store,m=o.ns;if(i&&!i.uri)throw new Error('UI.pad.notepad:  Invalid userid');var h=o.store.updater,g=r.Namespace('http://www.w3.org/ns/pim/pad#');u.setAttribute('style','padding: 1em; overflow: auto; resize: horizontal; min-width: 40em;');var b=null,y=null;if(l.statusArea){var w=l.statusArea.appendChild(n.createElement('table')),t=w.appendChild(n.createElement('tr'));b=t.appendChild(n.createElement('td')),y=t.appendChild(n.createElement('td')),b.setAttribute('style','width:50%'),y.setAttribute('style','width:50%')}var v=function t(a,r){console.log(a),l.statusArea&&(r?b:y).appendChild(o.widgets.errorMessageBlock(n,a,'pink'))},x=function t(n){l.statusArea&&(l.statusArea.innerHTML='')},_=function t(n,a,r){var i=n.subject;a=a||'';var s='font-size: 100%; font-family: monospace; width: 100%; border: none; white-space: pre-wrap;',d='font-family: sans-serif; font-weight: bold;  border: none;',l=['font-size: 110%;  padding-top: 0.5em; padding-bottom: 0.5em; width: 100%;','font-size: 120%; padding-top: 1em; padding-bottom: 1em; width: 100%;','font-size: 150%; padding-top: 1em; padding-bottom: 1em; width: 100%;'],c=f.any(i,m.dc('author'));if(!a&&c){var u=o.pad.lightColorHash(c);a='color: '+(r?'#888':'black')+'; background-color: '+u+';'}var h=f.any(i,g('indent'));h=h?h.value:0;var b=0<=h?s+'text-indent: '+3*h+'em;':d+l[-1-h];n.setAttribute('style',b+a)},k=function t(n){var i=n.subject;if(!i)throw'No chunk for line to be deleted!';var o=f.any(void 0,g('next'),i),l=f.any(i,g('next'));if(o.sameTerm(d)&&l.sameTerm(d))return void console.log('You can\'t delete the only line.');var c=f.statementsMatching(i,void 0,void 0,a).concat(f.statementsMatching(void 0,void 0,i,a)),u=[r.st(o,g('next'),l,a)],m=i.uri.slice(-4);console.log('Deleting line '+m),h.update(c,u,function(t,r,o,d){if(r){var l=n.parentNode,u=l.previousSibling;l.parentNode.removeChild(l),console.log('    deleted line '+m+' ok '+n.value),u&&u.firstChild&&u.firstChild.focus()}else if(d&&409===d.status)_(n,'color: black;  background-color: #ffd;'),n.state=0,s.beep(0.5,512),setTimeout(function(){h.requestDownstreamAction(a,M)},1e3);else{console.log('    removePart FAILED '+i+': '+o),console.log('    removePart was deleteing :\''+c),_(n,'color: black;  background-color: #fdd;');var f=d?d.status:' [no response field] ';v('Error '+f+' saving changes: '+o.true)};})},C=function t(n,i,o){var s=f.statementsMatching(i,g('indent')),d=s.length?+s[0].object.value:0;if(!(-3>d+o)){var l=d+o,c=r.st(i,g('indent'),l,a);h.update(s,c,function(t,r,i){r?_(n):(console.log('Indent change FAILED \''+l+'\' for '+a+': '+i),_(n,'color: black;  background-color: #fdd;'),h.requestDownstreamAction(a,M))})}},E=function t(n){var a=0;if(document.selection){n.focus();var r=document.selection.createRange();r.moveStart('character',-n.value.length),a=r.text.length}else(n.selectionStart||'0'==n.selectionStart)&&(a=n.selectionStart);return a},T=function t(n,i){n.addEventListener('keydown',function(t){var r,o;switch(t.keyCode){case 13:var s=t.shiftKey;if(console.log('enter'),s?(o=f.any(void 0,g('next'),i),r='newlinesAfter'):(o=f.any(i,g('next')),r='newlinesBefore'),o[r]=o[r]||0,o[r]+=1,1<o[r])return void console.log('    queueing newline queue = '+o[r]);console.log('    go ahead line before '+o[r]),S(n,s);break;case 8:if(0===n.value.length)switch(console.log('Delete key line '+i.uri.slice(-4)+' state '+n.state),n.state){case 1:case 2:return void(n.state=4);case 3:case 4:return;case void 0:case 0:n.state=3,k(n),t.preventDefault();break;default:throw'Unexpected state '+n.state;}break;case 9:var d=t.shiftKey?-1:1;C(n,i,d),t.preventDefault();break;case 27:console.log('escape'),h.requestDownstreamAction(a,M),t.preventDefault();break;case 38:n.parentNode.previousSibling&&(n.parentNode.previousSibling.firstChild.focus(),t.preventDefault());break;case 40:n.parentNode.nextSibling&&(n.parentNode.nextSibling.firstChild.focus(),t.preventDefault());break;default:}});var o=function t(n){var i=n.subject;_(n,void 0,!0);var o=f.any(i,m.sioc('content')).value,d=[r.st(i,m.sioc('content'),o,a)],l=[r.st(i,m.sioc('content'),n.value,a)],c=n.value;if(n.lastSent&&o!=n.lastSent)throw'Out of order, last sent expected \''+o+'\' but found \''+n.lastSent+'\'';n.lastSent=c,console.log(' Patch proposed to '+i.uri.slice(-4)+' \''+o+'\' -> \''+c+'\' '),h.update(d,l,function(r,i,d,l){i?(x(!0),_(n),console.log('    Patch ok \''+o+'\' -> \''+c+'\' '),4===n.state?(n.state=3,k(n)):3===n.state||(2===n.state?(n.state=1,t(n)):n.state=0)):(console.log('    patch FAILED '+l.status+' for \''+o+'\' -> \''+c+'\': '+d),409===l.status?(_(n,'color: black;  background-color: #fdd;'),n.state=0,s.beep(0.5,512),setTimeout(function(){h.requestDownstreamAction(a,M)},1e3)):(_(n,'color: black;  background-color: #fdd;'),n.state=0,v('    Error '+l.status+' sending data: '+d,!0),s.beep(1,128)))})};n.addEventListener('input',function t(a){switch(_(n,void 0,!0),console.log('Input event state '+n.state+' value \''+n.value+'\''),n.state){case 3:return;case 4:return;case 2:return;case 1:return void(n.state=2);case 0:case void 0:n.state=1,o(n);}})},A=function t(a,r,o){var s=f.any(r,m.sioc('content'));s=s?s.value:'';var d=n.createElement('tr');o?u.insertBefore(d,a):a&&a.nextSibling?u.insertBefore(d,a.nextSibling):u.appendChild(d);var l=d.appendChild(n.createElement('input'));return l.subject=r,l.setAttribute('type','text'),l.value=s,i?(_(l,''),T(l,r)):(_(l,'color: #222; background-color: #111;'),console.log('Note can\'t add listeners - not logged in')),l},S=function t(n,s){var l=o.store,c=0,u=null,f,b,y,w,v;n?('input'!==n.tagName.toLowerCase()&&console.log('return pressed when current document is: '+n.tagName),b=n.subject,c=l.any(b,g('indent')),c=c?+c.value:0,s?(y=l.any(void 0,g('next'),b),w=b,v=y,u='newlinesAfter'):(y=b,w=l.any(b,g('next')),v=w,u='newlinesBefore'),f=n.parentNode):(y=d,w=d,f=void 0);var x=o.widgets.newThing(a),k=x.uri.slice(-4),C=[r.st(y,g('next'),w,a)],E=[r.st(y,g('next'),x,a),r.st(x,g('next'),w,a),r.st(x,m.dc('author'),i,a),r.st(x,m.sioc('content'),'',a)];0<c&&E.push(r.st(x,g('indent'),c,a)),console.log('    Fresh chunk '+k+' proposed'),h.update(C,E,function(n,a,r,i){if(!a)console.log('    ERROR writing new line '+k+': '+r);else{var o=A(f,x,s);_(o),o.focus(),u&&(console.log('    Fresh chunk '+k+' updated, queue = '+v[u]),v[u]-=1,0<v[u]&&(console.log('    Implementing queued newlines = '+w.newLinesBefore),t(o,s)))}})},I=function t(){var n=[],a=0,r=function t(n){v(n),a++};if(!f.the(d,g('next')))return r('No initial next pointer'),!1;for(var i=d,o;;){if(o=f.the(i,g('next')),o||r('No next pointer from '+i),o.sameTerm(d))break;i=o;var s=o.uri.split('#')[1];if(n[o.uri])return r('Loop!'),!1;n[o.uri]=!0;var l=f.each(o,g('next')).length;1!==l&&r('Should be 1 not '+l+' next pointer for '+s),l=f.each(o,g('indent')).length,1<l&&r('Should be 0 or 1 not '+l+' indent for '+s),l=f.each(o,m.sioc('content')).length,1!==l&&r('Should be 1 not '+l+' contents for '+s),l=f.each(o,m.dc('author')).length,1!==l&&r('Should be 1 not '+l+' author for '+s);var c=f.statementsMatching(void 0,m.sioc('contents'));c.map(function(t){n[t.subject.uri]||r('Loose chunk! '+t.subject.uri)})}return!a},N=function t(){var n=f.the(d,g('next'));if(1!==f.each(d,g('next')).length){var a='Pad: Inconsistent data - NEXT pointers: '+f.each(d,g('next')).length;return console.log(a),void(l.statusAra&&(l.statusArea.textContent+=a))}for(var r=f.the(void 0,g('previous'),d),o=n,s=[],o=f.the(d,g('next')),c,h;!o.sameTerm(d);o=f.the(o,g('next')))for(var h=0,i;h<u.children.length;h++)i=u.children[h],i.firstChild.subject.sameTerm(o)&&(s[o.uri]=i.firstChild);for(var h=u.children.length-1;0<=h;h--)c=u.children[h],s[c.firstChild.subject.uri]||u.removeChild(c);c=u.firstChild;for(var o=f.the(d,g('next')),b;!o.sameTerm(d);o=f.the(o,g('next')))if(b=f.any(o,m.sioc('content')).value,c&&s[o.uri]){var y=c.firstChild;b!==y.value&&(y.value=b),_(y),y.state=0,delete y.lastSent,c=c.nextSibling}else A(c,o,!0);;},j=function t(n){if(n.refresh)return void n.refresh();for(var a=0;a<n.children.length;a++)t(n.children[a])},L=!1,R=function t(){console.log('    reloaded OK'),x(),I()?j(u):v('CONSITENCY CHECK FAILED')},M=function t(){if(L)return void console.log('   Already reloading - stop');L=!0;var n=1e3,r=function t(){console.log('try reload - timeout = '+n),h.reload(h.store,a,function(r,i,o){L=!1,r?R():0===o.status?(v('Network error refreshing the pad. Retrying in '+n/1e3),L=!0,n*=2,setTimeout(t,n)):v('Error '+o.status+'refreshing the pad:'+i+'. Stopped. '+a)})};r()};if(u.refresh=N,u.reloadAndSync=M,i||console.log('Warning: must be logged in for pad to be edited'),c)console.log('Existing pad.'),I()?(N(),f.holds(d,g('next'),d)&&S()):console.log(u.textContent='Inconsistent data. Abort');else{console.log('No pad exists - making new one.');var D=[r.st(d,m.rdf('type'),g('Notepad'),a),r.st(d,m.dc('author'),i,a),r.st(d,m.dc('created'),new Date,a),r.st(d,g('next'),d,a)];h.update([],D,function(t,n,a){n?(console.log('Initial pad created'),S()):v(a)})}return u}},function(t,n,a){'use strict';var r={icons:a(29),log:a(25),ns:a(15),store:a(22),widgets:a(30)},o=a(31),i=a(4);t.exports=function t(n,a){function d(t){t.parentNode.removeChild(t)}function l(t,a){var r=n.createElement('input');return r.setAttribute('type','submit'),r.setAttribute('value',t),r.addEventListener('click',a,!1),r}function c(){var t=n.createElement('div');t.setAttribute('class','sparqlDialog');var a=n.createElement('h3');a.appendChild(n.createTextNode('Edit SPARQL query'));var r=n.createElement('textarea');return r.value=queryToSPARQL(Te),t.appendChild(a),t.appendChild(r),t.appendChild(l('Query',function(){var n=SPARQLToQuery(r.value);v(n),d(t)})),t.appendChild(l('Close',function(){d(t)})),t}function u(){var t=c();Se.appendChild(t)}function f(){var t=n.createElement('img');return t.setAttribute('class','sparqlButton'),t.setAttribute('src',tabulator.iconPrefix+'icons/1pt5a.gif'),t.setAttribute('alt','Edit SPARQL query'),t.addEventListener('click',u,!1),t}function m(){var t=n.createElement('table');t.setAttribute('class','toolbar');var a=n.createElement('tr');return je=n.createElement('td'),a.appendChild(je),Le=n.createElement('td'),a.appendChild(Le),t.appendChild(a),t}function h(t,n){for(var a=n.getColumns(),r=0,i;r<a.length;++r)i=ye.variable('_col'+r),t.vars.push(i),a[r].setVariable(i)}function g(t,n,a){var i=a.type;i||(i=ye.variable('_any')),t.pat.add(n,r.ns.rdf('type'),i)}function b(t,n,a){for(var r=a.getColumns(),o=0;o<r.length;++o){var i=r[o],s=ye.formula();s.add(n,i.predicate,i.getVariable()),t.pat.optional.push(s)}}function y(t){var n=new i.Query,a=ye.variable(Ce.slice(1));return h(n,t),g(n,a,t),b(n,a,t),n}function w(t){x(Le),Le.appendChild(I(t));var n=y(t);v(n,t)}function v(t,n){Te&&(Te.running=!1);var a=de(t,n);x(Re),Re.appendChild(a),Te=t}function x(t){for(;0<t.childNodes.length;)t.removeChild(t.childNodes[0])}function _(t){this.type=t,this.columns=null,this.allColumns=null,this.useCount=0,this.getAllColumns=function(){return this.allColumns},this.getColumns=function(){if(!this.columns){var t=this.getAllColumns();this.columns=t.slice(0,7)}return this.columns},this.getUnusedColumns=function(){for(var t=this.getAllColumns(),n=this.getColumns(),a=[],r=0;r<t.length;++r)-1==n.indexOf(t[r])&&a.push(t[r]);return a},this.addColumn=function(t){this.columns.push(t)},this.removeColumn=function(t){this.columns=this.columns.filter(function(n){return n!==t})},this.getLabel=function(){return o.label(this.type)},this.addUse=function(){this.useCount+=1}}function k(){this.useCount=0,this.checkedAnyValues=!1,this.possiblyLiteral=!0,this.possiblyNumber=!0,this.constraints=[],this.checkValue=function(t){var n=t.termType;if(this.possiblyLiteral&&'Literal'!==n&&'NamedNode'!==n)this.possiblyNumber=!1,this.possiblyLiteral=!1;else if(this.possiblyNumber)if('Literal'!=n)this.possiblyNumber=!1;else{var a=t.value;a.match(/^\-?\d+(\.\d*)?$/)||(this.possiblyNumber=!1)}this.checkedAnyValues=!0},this.getVariable=function(){return this.variable},this.setVariable=function(t){this.variable=t},this.getKey=function(){return this.variable.toString()},this.addUse=function(){this.useCount+=1},this.getLabel=function(){return this.predicate?this.predicate.sameTerm(be.rdf('type'))&&this.superClass?o.label(this.superClass):o.label(this.predicate):this.variable?this.variable.toString():'unlabeled column?'},this.setPredicate=function(t,n,a){n?(this.inverse=t,this.constraints=this.constraints.concat(ye.each(t,r.ns.rdfs('domain'))),t.sameTerm(be.rdfs('subClassOf'))&&'NamedNode'===a.termType&&(this.superClass=a,this.alternatives=ye.each(void 0,be.rdfs('subClassOf'),a))):(this.predicate=t,this.constraints=this.constraints.concat(ye.each(t,r.ns.rdfs('range'))))},this.getConstraints=function(){return this.constraints},this.filterFunction=function(){return!0},this.sortKey=function(){return this.getLabel().toLowerCase()},this.isImageColumn=function(){for(var t=0;t<this.constraints.length;t++)if(this.constraints[t].uri in ke)return!0;return!1}}function C(t,n){var a=[];for(var r in t){var i=t[r];(!n||n(r,i))&&a.push(i)}return a}function E(t){return C(t)}function T(t,a){var r=n.createElement('option');return r.setAttribute('value',a),r.appendChild(n.createTextNode(t)),r}function A(t,a){var r=n.createElement('div');r.appendChild(n.createTextNode('Select type: '));var i=n.createElement('select');for(var o in i.appendChild(T('All types','null')),a)i.appendChild(T(a[o].getLabel(),o));return i.addEventListener('click',function(){var n;n='null'===i.value?t:a[i.value],S(n)},!1),r.appendChild(i),r}function S(t){w(t)}function I(t){var a=n.createElement('div'),r=t.getUnusedColumns();if(r.sort(function(t,n){var a=t.sortKey(),r=n.sortKey();return(a>r)-(a<r)}),0<r.length){a.appendChild(n.createTextNode('Add column: '));var o=n.createElement('select');o.appendChild(T('','-1'));for(var s=0,i;s<r.length;++s)i=r[s],o.appendChild(T(i.getLabel(),''+s));a.appendChild(o),o.addEventListener('click',function(){var n=new Number(o.value);0<=n&&(t.addColumn(r[n]),w(t))},!1)}return a}function N(t,n){var a;return n.uri in t?a=t[n.uri]:(a=new k,a.setPredicate(n),t[n.uri]=a),a}function j(t,n){var a;return n.uri in t?a=t[n.uri]:(a=new _(n),t[n.uri]=a),a}function L(){for(var t={},n=ye.statementsMatching(void 0,r.ns.rdf('type'),ue,ce),a={},o=0,i;o<n.length;++o)if(i=n[o].object,'NamedNode'===i.termType){var s=j(t,i);i.uri in a||(a[i.uri]=[]),a[i.uri].push(n[o].subject),s.addUse()}return[a,t]}function R(t,n){for(var a=ye.statementsMatching(t,void 0,void 0,ce),r={},i=0,o;i<a.length;++i)if(o=a[i].predicate,!(o.uri in ve)){var s=N(n,o);s.checkValue(a[i].object),r[o.uri]=s}return r}function M(t,n){for(var a={},r=0,i;r<n.length;++r)for(var o in i=R(n[r],a),i){var s=i[o];s.addUse()}var d=C(a);P(d),t.allColumns=d}function D(){var t=L(),n,a;for(var r in n=t[0],a=t[1],n){var i=n[r],o=a[r];M(o,i)}var s=new _(null);return[s,C(a)]}function P(t){function n(t,n){return(t.useCount<n.useCount)-(t.useCount>n.useCount)}t.sort(n)}function O(t,a){var r=n.createElement('a');return r.appendChild(n.createTextNode('[x]')),r.addEventListener('click',function(){t.removeColumn(a),w(t)},!1),r}function B(t,a){var r=n.createElement('tr'),o=n.createElement('th');r.appendChild(o);for(var s=0;s<t.length;++s){var i=n.createElement('th'),d=t[s];i.appendChild(n.createTextNode(d.getLabel())),a&&i.appendChild(O(a,d)),r.appendChild(i)}return r}function U(t,n,a,r){var o=n.getKey();if(t.sort(function(t,n){var i=null,s=null;o in t.values&&(i=t.values[o][0]),o in n.values&&(s=n.values[o][0]);var d=a(i,s);return r?-d:d}),t.length){for(var s=t[0]._htmlRow.parentNode,d=0;d<t.length;++d)s.removeChild(t[d]._htmlRow);for(var d=0;d<t.length;++d)s.appendChild(t[d]._htmlRow)}}function F(t,n){for(var a=!0,r=0;r<n.length;++r){var i=n[r],o=i.getKey(),s=null;if(o in t.values&&(s=t.values[o][0]),!i.filterFunction(s)){a=!1;break}}var d=t._htmlRow;d.style.display=a?'':'none'}function q(t,n){for(var a=0,r;a<t.length;++a)r=t[a],F(r,n)}function z(t,n,a){function r(t){return t?'Literal'===t.termType?t.value.toLowerCase():'NamedNode'===t.termType?o.label(t).toLowerCase():t.value.toLowerCase():''}function i(t,n){var a=r(t),i=r(n);return a<i?-1:a>i?1:0}U(t,n,i,a)}function H(t,a,r){var i=n.createElement('div'),s=n.createElement('input');s.setAttribute('type','text'),s.style.width='70%',i.appendChild(s);var d=n.createElement('span');d.appendChild(n.createTextNode('\u25BC')),d.addEventListener('click',function(){z(t,r,!1)},!1),i.appendChild(d);var l=n.createElement('span');l.appendChild(n.createTextNode('\u25B2')),l.addEventListener('click',function(){z(t,r,!0)},!1),i.appendChild(l);var c=null;return r.filterFunction=function(t){if(!c)return!0;if(!t)return!1;var n;return n='Literal'===t.termType?t.value:'NamedNode'===t.termType?o.label(t):'',0<=n.toLowerCase().indexOf(c)},s.addEventListener('keyup',function(){c=''===s.value?null:s.value.toLowerCase(),q(t,a)},!1),i}function W(t,a,r,s){for(var d=!0,l=n.createElement('div'),c=n.createElement('select'),u={},f=0,i;f<s.length;++f)i=s[f],u[i.uri]=!0;var m=Q(r).initialSelection;m&&(u=m),d?c.setAttribute('multiple','true'):c.appendChild(T('(All)','-1'));for(var f=0;f<s.length;++f){var i=s[f],h=T(o.label(i),f);u[i.uri]&&(h.selected=!0),c.appendChild(h)}return l.appendChild(c),r.filterFunction=function(t){return!u||t&&u[t.uri]},c.addEventListener('click',function(){if(d){u={};for(var n=c.options,r=0;r<n.length;r++){var i=n[r],o=new Number(i.value);n[r].selected&&(u[s[o].uri]=!0)}}else if(0>o)u=null;else{var o=new Number(c.value);u={},u[s[o].uri]=!0}q(t,a)},!0),l}function V(t,a,r){function i(){l=''===s.value?null:new Number(s.value),c=''===d.value?null:new Number(d.value),q(t,a)}var o=n.createElement('div'),s=n.createElement('input');s.setAttribute('type','text'),s.style.width='40px',o.appendChild(s);var d=n.createElement('input');d.setAttribute('type','text'),d.style.width='40px',o.appendChild(d);var l=null,c=null;return r.filterFunction=function(t){return t&&(t=new Number(t)),l&&(!t||t<l)?!1:c&&(!t||t>c)?!1:!0},s.addEventListener('keyup',i,!1),d.addEventListener('keyup',i,!1),o}function G(t,n,a){return a.checkedAnyValues&&a.possiblyNumber?V(t,n,a):a.possiblyLiteral?H(t,n,a):null}function J(t,n,a){if(a.superClass&&0<a.alternatives.length)return W(t,n,a,a.alternatives);for(var o=a.getConstraints(),s=0,i;s<o.length;s++){if(i=o[s],a.checkedAnyValues&&a.possiblyNumber||i.uri in xe)return V(t,n,a);if(i.uri===ge)return H(t,n,a);var d=ye.each(i,r.ns.owl('oneOf'));if(0<d.length)return W(t,n,a,d.elements)}return G(t,n,a)}function K(t,a){var r=n.createElement('tr');r.className='selectors',r.appendChild(n.createElement('td'));for(var o=0;o<a.length;++o){var i=n.createElement('td'),s=J(t,a,a[o]);s&&i.appendChild(s),r.appendChild(i)}return r}function X(t,a,i){i=i||{};var s=n.createElement('a'),d=i.linkFunction;return s.setAttribute('href',t),s.appendChild(n.createTextNode(a)),d?s.addEventListener('click',function(t){t.preventDefault(),t.stopPropagation();var n=o.getTarget(t),a=n.getAttribute('href');a||console.log('No href found \n'),d(a)},!0):s.addEventListener('click',r.widgets.openHrefInOutlineMode,!0),s}function Y(t,n){var a=!1;return t.uri&&(a=t.uri.match(/^mailto:(.*)/)),a?X(t.uri,a[1],n):X(t.uri,o.label(t),n)}function Z(t){var a=n.createElement('img');return a.setAttribute('src',t.uri),a.style.height='40px',a}function Q(t){return a&&a.hints&&t.variable&&a.hints[t.variable.toNT()]?a.hints[t.variable.toNT()]:{}}function ee(t,a){var i=Q(a),o=i.cellFormat,s;if(o)switch(o){case'shortDate':return n.createTextNode(r.widgets.shortDate(t.value));break;default:}else{if('Literal'===t.termType){if(t.datatype){if(_e[t.datatype.uri])return n.createTextNode(r.widgets.shortDate(t.value));if(xe[t.datatype.uri]){var s=n.createElement('span');return s.textContent=t.value,s.setAttribute('style','text-align: right'),s}}return n.createTextNode(t.value)}if('NamedNode'===t.termType&&a.isImageColumn())return Z(t);if('NamedNode'===t.termType||'BlankNode'===t.termType)return Y(t,i);if('Collection'===t.termType){var s=n.createElement('span');return s.appendChild(n.createTextNode('[')),t.elements.map(function(t){s.appendChild(ee(t,a)),s.appendChild(n.createTextNode(', '))}),s.removeChild(s.lastChild),s.appendChild(n.createTextNode(']')),s}return n.createTextNode('unknown termtype \''+t.termType+'\'!')}}function te(t,a,r,o){var s=n.createElement('td');a._subject&&'uri'in a._subject&&s.appendChild(X(a._subject.uri,'\u2192')),t.appendChild(s);for(var d=0;d<r.length;++d){var i=r[d],l=n.createElement('td'),c=i.getKey(),u;if(c in a.values){var f=a.values[c],m=!1;a.originalValues&&a.originalValues[c]&&f.length!==a.originalValues[c].length&&(m=!0);for(var h=0,g;h<f.length;++h)g=f[h],a.originalValues&&a.originalValues[c]&&a.originalValues[c].length>h&&(u=a.originalValues[c][h],g.toString()!==u.toString()&&(m=!0)),l.appendChild(ee(g,i)),h!==f.length-1&&l.appendChild(n.createTextNode(',\n')),m&&(l.style.background='#efe')}t.appendChild(l)}return a._htmlRow=t,t}function ne(t,n){var a=null;if('Literal'===t.termType)a='value';else if('NamedNode'===t.termType)a='uri';else return 0<=n.indexOf(t);var r;for(r=0;r<n.length;++r)if(n[r].termType===t.termType&&n[r][a]===t[a])return!0;return!1}function ae(t,n,a){var r=!1,i;for(i in a){var o=a[i];i in t.values||(t.values[i]=[]),ne(o,t.values[i])||(t.values[i].push(o),r=!0)}r&&(x(t._htmlRow),te(t._htmlRow,t,n)),F(t,n)}function re(t){if('uri'in t)return t.uri;if('_subject_id'in t)return t._subject_id;var n=''+Ee;return t._subject_id=n,++Ee,n}function ie(t,r,o,s){t.running=!0;var d=Date.now(),l=n.createElement('tr'),c;s.appendChild(l),l.textContent='Loading ...';for(var u=0;u<r.length;u++)r[u].original=!0,r[u].originalValues||(r[u].originalValues=r[u].values),r[u].values={};var i=function a(i){if(t.running){l.textContent+='.';var d=null,c=null,u;if(Ce in i&&(c=i[Ce],u=re(c),u in we&&(d=we[u])),!d){var f=n.createElement('tr');s.appendChild(f),d={_htmlRow:f,_subject:c,values:{}},r.push(d),c&&(we[u]=d)}delete d.original,ae(d,o,i)}},f=function t(){l&&l.parentNode&&l.parentNode.removeChild&&(l.parentNode.removeChild(l),l=null);var n=Date.now()-d;console.log('Query done: '+r.length+' rows, '+n+'ms');for(var o=r.length-1;0<=o;o--)if(r[o].original){console.log('   deleting row '+r[o]._subject);var i=r[o]._htmlRow;i.parentNode.removeChild(i),delete we[re(r[o]._subject)],r.splice(o,1)}a.onDone&&a.onDone()};ye.query(t,i,void 0,f)}function oe(t,n){r.log.debug('>> processing formula');for(var a=0,i;a<n.statements.length;++a){if(i=n.statements[a],'NamedNode'===i.predicate.termType&&'Variable'===i.object.termType){var o=i.object.toString();if(o in t){var s=t[o];s.setPredicate(i.predicate,!1,i.subject)}}if('NamedNode'===i.predicate.termType&&'Variable'===i.subject.termType){var o=i.subject.toString();if(o in t){var s=t[o];s.setPredicate(i.predicate,!0,i.object)}}}for(var a=0;a<n.optional.length;++a)r.log.debug('recurse to optional subformula '+a),oe(t,n.optional[a]);r.log.debug('<< finished processing formula')}function se(t){for(var n=[],a={},o=0;o<t.vars.length;++o){var i=new k,s=t.vars[o];r.log.debug('column '+o+' : '+s),i.setVariable(s),a[s]=i,n.push(i)}return oe(a,t.pat),n}function de(t,a){var r;r=fe?se(t):a.getColumns();var i=[],o=n.createElement('table');return o.appendChild(B(r,a)),o.appendChild(K(i,r)),o.logicalRows=i,o.columns=r,o.query=t,ie(t,i,r,o),o}function le(t){var n=-1,a=null;for(var r in t){var i=t[r];i.useCount>n&&(a=i,n=i.useCount)}return a}function pe(t,n){var a={};for(var r in t)for(var o=0;o<n.length;++o)if(r in n[o]){a[r]=t[r];break}return a}var ce=a.sourceDocument,ue=a.tableClass,fe=a.query,he='http://www.w3.org/1999/02/22-rdf-syntax-ns#type',ge='http://www.w3.org/2000/01/rdf-schema#Literal',be=r.ns,ye=r.store,we={},ve={"http://www.w3.org/2002/07/owl#sameAs":!0,"http://www.w3.org/1999/02/22-rdf-syntax-ns#type":!0},xe={"http://www.w3.org/2001/XMLSchema#decimal":!0,"http://www.w3.org/2001/XMLSchema#float":!0,"http://www.w3.org/2001/XMLSchema#double":!0,"http://www.w3.org/2001/XMLSchema#integer":!0,"http://www.w3.org/2001/XMLSchema#nonNegativeInteger":!0,"http://www.w3.org/2001/XMLSchema#positiveInteger":!0,"http://www.w3.org/2001/XMLSchema#nonPositiveInteger":!0,"http://www.w3.org/2001/XMLSchema#negativeInteger":!0,"http://www.w3.org/2001/XMLSchema#long":!0,"http://www.w3.org/2001/XMLSchema#int":!0,"http://www.w3.org/2001/XMLSchema#short":!0,"http://www.w3.org/2001/XMLSchema#byte":!0,"http://www.w3.org/2001/XMLSchema#unsignedLong":!0,"http://www.w3.org/2001/XMLSchema#unsignedInt":!0,"http://www.w3.org/2001/XMLSchema#unsignedShort":!0,"http://www.w3.org/2001/XMLSchema#unsignedByte":!0},_e={"http://www.w3.org/2001/XMLSchema#dateTime":!0,"http://www.w3.org/2001/XMLSchema#date":!0},ke={"http://xmlns.com/foaf/0.1/Image":!0,"http://purl.org/dc/terms/Image":!0},Ce=a.keyVariable||'?_row',Ee=0,Te=null,Ae=null,Se=n.createElement('div'),Ie,Ne,je,Le;Se.className='tableViewPane',Se.appendChild(m());var Re=n.createElement('div');if(Se.appendChild(Re),Se.refresh=function(){ie(Me.query,Me.logicalRows,Me.columns,Me)},fe){var Me=de(fe);Re.appendChild(Me)}else{var De=D();Ie=De[0],Ne=De[1],ue||je.appendChild(A(Ie,Ne)),Ae=le(Ne),Ae?w(Ae):w(Ie)}return Se}},function(t,n,a){'use strict';var r={};t.exports=r;var i={icons:a(29),log:a(25),ns:a(15),store:a(22),tabs:r,widgets:a(30)},o=a(31);i.tabs.tabWidget=function(t){var n=i.store,a=t.subject,r=t.dom,s=r.createElement('div'),d=parseInt(t.orientation||'0'),l=t.backgroundColor||'#ddddcc',c=2&d,u=1&d,f=s.appendChild(r.createElement('table')),m=function t(n){for(var a=0,r=0;3>r;r++)a+=parseInt(n.slice(2*r+1,2*r+3),16);return 384<a},h=function t(n,a,r){for(var o='#',s='0123456789abcdef',d=0,i,c,u;3>d;d++){i=parseInt(n.slice(2*d+1,2*d+3),16),c=parseInt(a.slice(2*d+1,2*d+3),16),u=i*(1-r)+c*r;var f=parseInt((''+u).split('.')[0]),m=parseInt((''+f/16).split('.')[0]),h=parseInt((''+f%16).split('.')[0]);o+=s[m]+s[h]}return o},g,b,y,w,v,x;m(l)?(x=h(l,'#ffffff',0.3),g='#000000'):(x=h(l,'#000000',0.3),g='#ffffff');var _='resize: both; overflow: scroll; margin:0; border: 0.5em; border-style: solid; border-color: '+x+'; padding: 1em;  min-width: 30em; min-height: 450px; width:100%;';if(u){var k=f.appendChild(r.createElement('tr')),C=r.createElement('td');C.setAttribute('style','margin: 0;');var E=r.createElement('td');E.setAttribute('style','margin: 0;'),c?(k.appendChild(C),k.appendChild(E)):(k.appendChild(E),k.appendChild(C)),b=E.appendChild(r.createElement('table')),y='tr',v=E}else{b=r.createElement('tr');var T=f.appendChild(r.createElement('tr'));if(c)var T=f.appendChild(r.createElement('tr')),A=f.appendChild(r.createElement('tr'));else var A=f.appendChild(r.createElement('tr')),T=f.appendChild(r.createElement('tr'));b=A;var C=T.appendChild(r.createElement('td'));y='td'}var S=C.appendChild(r.createElement('table'));s.tabContainer=b,s.bodyContainer=S;var I=function r(){if(t.ordered){var i=n.the(a,t.predicate);return i.elements}return n.each(a,t.predicate)},N=['2em','2em','0','0'];N=N.concat(N).slice(d,d+4),N='border-radius: '+N.join(' ')+';';var j=['0.3em','0.3em','0','0.3em'];j=j.concat(j).slice(d,d+4),j='margin: '+j.join(' ')+';';var L=N+'padding: 0.7em; max-width: 20em;';L+='color: '+g+';';var R=L+'opacity: 50%; margin: 0.3em; background-color: '+l+';',M=L+j+' background-color: '+x+';',D='',P=D+'display: none;',O=function t(){for(var n=0;n<b.children.length;n++)b.children[n].firstChild.setAttribute('style',R)},B=function t(){for(var n=0;n<S.children.length;n++)S.children[n].setAttribute('style',P)},U=function n(a){var i=r.createElement(y);i.subject=a;var s=i.appendChild(r.createElement('div'));return s.setAttribute('style',R),s.addEventListener('click',function(n){n.metaKey||(O(),B()),s.setAttribute('style',M),i.bodyTR.setAttribute('style',D);var o=i.bodyTR.firstChild;o||(o=i.bodyTR.appendChild(r.createElement('div')),o.setAttribute('style',_)),t.renderTabSettings&&n.altKey?!0!==o.asSetttings&&(o.innerHTML='loading settings ...'+a,t.renderTabSettings(o,i.subject),o.asSetttings=!0):!1!==o.asSetttings&&(o.innerHTML='loading item ...'+a,t.renderMain(o,i.subject),o.asSetttings=!1)}),t.renderTab?t.renderTab(s,a):s.textContent=o.label(a),i},F=function t(){var n=I();u||C.setAttribute('colspan',n.length);var a=!1,o,s,i,d,l;for(d=0;d<b.children.length;d++)if(o=b.children[d],d>=n.length||!o.subject.sameTerm(n[d])){a=!0;break}if(a||n.length!==b.children.length){for(l=b.children.length-1;0<=l&&(o=b.children[l],i=l-b.children.length+n.length,!!o.subject.sameTerm(n[i]));l--);for(var c=n.slice(d,l-b.children.length+n.length+1);l>=d;)b.removeChild(b.children[d]),S.removeChild(S.children[d]),l-=1;for(s=0;s<c.length;s++){var f=U(c[s]),m=r.createElement('tr');f.bodyTR=m,r.createElement('tr'),d===b.children.length?(b.appendChild(f),S.appendChild(m)):(b.insertBefore(f,b.children[d+s]),S.insertBefore(m,S.children[d+s]))}}},q=function t(){var n=I();u||C.setAttribute('colspan',n.length);var a=[],r,o,i,s,d;for(o=0;o<b.children.length;o++)r=b.children[o],r.deleteMe=!0;for(i=0;i<n.length;i++){for(s=!1,o=0;o<b.children.length;o++)b.children[o].subject===n[i]&&(s=!0);s||a.push([i,n[i]])}for(i=0;i<a.length;i++)d=a[i],o=d[0],r=U(d[1]),o>=b.length?b.appendChild(r):b.insertBefore(r,b.children[o+1]);for(o=0;o<b.children.length;o++)r=b.children[o],r.deleteMe&&b.removeChild(r)},z=function n(){t.ordered?F():q()};return s.refresh=z,z(),!t.startEmpty&&b.children.length&&b.children[0].firstChild.click(),s}},function(t,n,a){'use strict';var r='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&'function'==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?'symbol':typeof t},i,o;t.exports=function t(n){var a=this,d=UI.store,s=n.document;this.menuId='predicateMenu1';var l=function t(n){dump(n+'\n')},c=function t(){return this.replace(/^\s+|\s+$/g,'')},u=UI.ns.foaf,f=UI.ns.rdf,m=UI.ns.rdfs,h=UI.ns.owl,g=UI.ns.dc,b=UI.ns.rss,y=UI.ns.contact,w=UI.ns.mo,v=UI.rdf.Namespace('http://purl.org/ontology/bibo/'),x=UI.rdf.Namespace('http://purl.org/dc/terms/'),_=UI.rdf.Namespace('http://purl.org/dc/elements/1.1/'),k=!1;return i||(i=new UI.rdf.Formula,i.superFormula=d),o||(o=new UI.rdf.IndexedFormula),o.name='TempFormula',UI.store.updater||(UI.store.updater=new UI.rdf.UpdateManager(d)),{sparqler:UI.store.updater,lastModified:null,lastModifiedStat:null,statIsInverse:!1,addNewPredicateObject:function t(a){if('bottom-border-active'==UI.utils.getTarget(a).className){var r=n.UserInput,i=UI.utils.getTarget(a),o=s.createElement('tr');UI.utils.ancestor(i,'DIV').insertBefore(o,UI.utils.ancestor(i,'TR'));var l=s.createElement('tr'),c=r.generateRequest('(TBD)',l,!0);o.appendChild(l.firstChild);var u=r.generateRequest('(Enter text or drag an object onto this field)',l,!1);if(o.appendChild(l.firstChild),UI.utils.ancestor(i,'TR').previousSibling&&UI.utils.ancestor(i,'TR').previousSibling.AJAR_statement)preStat=UI.utils.ancestor(i,'TR').previousSibling.AJAR_statement,r.formUndetStat(o,preStat.subject,c,u,preStat.why,!1);else{var f=UI.utils.getAbout(d,UI.utils.ancestor(i.parentNode.parentNode,'TD')),m=d.sym(UI.rdf.Util.uri.docpart(f.uri));r.formUndetStat(o,f,c,u,m,!1)}n.walk('moveTo',o.firstChild),UI.log.info('addNewPredicateObject: selection = '+n.getSelection().map(function(t){return t.textContent}).join(', ')),this.startFillInText(n.getSelection()[0])}},addNewObject:function t(a){var r=UI.utils.getTarget(a).parentNode.parentNode,i=UI.utils.getAbout(d,r),o=r.parentNode.AJAR_inverse;this.lastModifiedStat=r.parentNode.AJAR_statement;var s=this.appendToPredicate(r),l=this.generateRequest(' (Error) ',s,!1),c=s.previousSibling.AJAR_statement;o?this.formUndetStat(s,l,c.predicate,c.object,c.why,!0):this.formUndetStat(s,c.subject,c.predicate,l,c.why,!1),n.walk('moveTo',s.lastChild),this.startFillInText(s.lastChild)},Delete:function t(n){this.deleteTriple(n,!1)},Enter:function t(n){this.literalModification(n)},Click:function t(n){var a=UI.utils.getTarget(n);'Literal'!=UI.utils.getTerm(a).termType||(this.literalModification(a),n.preventDefault(),n.stopPropagation())},pasteFromClipboard:function t(n,a){function r(t){var n=tabulator.clipboard[t].shift();if(null==n)return void UI.log.warn('no more element in clipboard!');switch(t){case'predicates':case'objects':for(var a=tabulator.clipboard.all,r=0;!0;r++)if(n.sameTerm(allArray[r])){allArray.splice(r,1);break}break;case'all':var i=n.sameTerm(theCollection('objects').elements[0]);return i?tabulator.clipboard.objecs.shift():tabulator.clipboard.predicates.shift(),[n,i];}return n}var i;switch(a.className){case'undetermined selected':if(i=a.nextSibling?r('predicates'):r('objects'),!i)return;break;case'pred selected':if(i=r('objects'),!i)return;break;case'selected':var o=r('all');return o?(i=o[0],void this.insertTermTo(a,i,o[1])):void 0;}this.insertTermTo(a,i)},startFillInText:function t(n){switch(this.whatSortOfEditCell(n)){case'DatatypeProperty-like':UI.utils.emptyNode(n),this.lastModified=this.createInputBoxIn(n,' (Please Input) '),this.lastModified.isNew=!1,this.lastModified.select();break;case'predicate':this.performAutoCompleteEdit(n,'PredicateAutoComplete');break;case'ObjectProperty-like':case'no-idea':this.performAutoCompleteEdit(n,'GeneralAutoComplete');}},literalModification:function t(n){if(UI.log.debug('entering literal Modification with '+n+n.textContent),-1!=n.className.indexOf(' pendingedit'))return UI.log.warn('The node you attempted to edit has a request still pending.\nPlease wait for the request to finish (the text will turn black)\nbefore editing this node again.'),!0;var a=n,r=this.getStatementAbout(a);if(r){try{var i=UI.utils.getTerm(a),o=UI.utils.ancestor(a,'TR')}catch(t){UI.log.warn('userinput.js: '+t+UI.utils.getAbout(d,n)),UI.log.error(a+' getStatement Error:'+t)}try{var l=o.lastChild}catch(t){UI.log.error(t+'@'+a)}if('Literal'==i.termType){if(l.removeChild(l.firstChild),i.value.match('\n')){var c=s.createElement('textarea');c.appendChild(s.createTextNode(i.value)),c.setAttribute('rows',(i.value.match(/\n/g).length+1).toString()),c.setAttribute('cols','100'),c.setAttribute('class','textinput'),l.appendChild(c),this.lastModified=c}else this.lastModified=this.createInputBoxIn(l,i.value);this.lastModified.isNew=!1,this.lastModified.select()}return!0}},performAutoCompleteEdit:function t(n,a){UI.utils.emptyNode(n),l('perform AutoCompleteEdit. THIS IS='+this),this.lastModified=this.createInputBoxIn(n,''),this.lastModified.select(),this.lastModified.addEventListener('keypress',this.getAutoCompleteHandler(a),!1),this.getAutoCompleteHandler(a)(1)},backOut:function t(){this.deleteTriple(this.lastModified.parentNode,!0),this.lastModified=null},clearMenu:function t(){var n=s.getElementById(this.menuID);n&&n.parentNode.removeChild(n)},clearInputAndSave:function t(a){if(this.lastModified){if(!this.lastModified.isNew)try{var r=this.getStatementAbout(this.lastModified).object}catch(t){return}var i=this.lastModifiedStat;if(this.lastModified.value!=this.lastModified.defaultValue){if(''==this.lastModified.value)return this.lastModified.value=this.lastModified.defaultValue,void this.clearInputAndSave();if(this.lastModified.isNew){i=new UI.rdf.Statement(i.subject,i.predicate,d.literal(this.lastModified.value),i.why);var o=UI.utils.ancestor(this.lastModified,'TR');try{UI.store.updater.update([],[i],function(t,a,r){a||(UI.log.error('Error occurs while inserting '+i+'\n\n'+r+'\n'),n.UserInput.deleteTriple(o.lastChild,!0))})}catch(t){return void UI.log.error('Error inserting fact '+i+':\n\t'+t+'\n')}i=d.add(i.subject,i.predicate,d.literal(this.lastModified.value),i.why)}else{if(this.statIsInverse)return UI.log.error('Invalid Input: a literal can\'t be a subject in RDF/XML'),void this.backOut();switch(r.termType){case'Literal':var s=this.lastModified.value,o=UI.utils.ancestor(this.lastModified,'TR'),l=this.lastModified.defaultValue,c=$rdf.st(i.subject,i.predicate,d.literal(this.lastModified.value),i.why);try{UI.store.updater.update([i],[c],function(t,n,a){n?r.value=s:(UI.log.warn('Error occurs while editing '+i+'\n\n'+a),o.lastChild.textContent=l),o.lastChild.className=o.lastChild.className.replace(/ pendingedit/g,'')})}catch(t){return void UI.log.warn('Error occurs while editing '+i+':\n\t'+t)}break;case'BlankNode':var u=d.literal(this.lastModified.value,''),m;if('Collection'==i.predicate.termType){var h=i.predicate.elements[0];if(d.any(void 0,h,u)){if(!a){var g=this.lastModified.parentNode;a={},a.pageX=UI.utils.findPos(g)[0],a.pageY=UI.utils.findPos(g)[1]+g.clientHeight}this.showMenu(a,'DidYouMeanDialog',void 0,{dialogTerm:d.any(void 0,h,u),bnodeTerm:i.subject})}else{var b=UI.utils.ancestor(UI.utils.ancestor(this.lastModified,'TR').parentNode,'TR').AJAR_statement,c=$rdf.st(i.subject,h,u,i.why),y=d.the(i.subject,f('type')),w=d.anyStatementMatching(i.subject,f('type'),y,i.why),o=UI.utils.ancestor(UI.utils.ancestor(this.lastModified,'TR'),'TD').parentNode;try{UI.store.updater.update([],[b,c,w],function(t,a,r){a||(dump('Error occurs while editing '+b+'\n\n'+r),n.UserInput.deleteTriple(o.lastChild,!0))})}catch(t){return void dump('Error occurs while editing '+b+':\n\t'+t)}d.remove(i),m=d.add(i.subject,h,u,i.why)}var v=UI.utils.ancestor(this.lastModified.parentNode.parentNode,'TD');n.outline_expand(v,i.subject,{pane:defaultPane,already:!0}),n.walk('right',n.focusTd)}else return void this.fillInRequest('object',this.lastModified.parentNode,d.literal(this.lastModified.value));}}}else{if(this.lastModified.isNew){var x=UI.utils.ancestor(this.lastModified,'TR'),_=this.generateRequest('(To be determined. Re-type of drag an object onto this field)'),k=x.previousSibling.AJAR_statement;return this.formUndetStat(x,k.subject,k.predicate,_,k.why,!1),void(this.lastModified=null)}if('Collection'==i.predicate.termType){d.removeMany(i.subject);var C=UI.utils.ancestor(UI.utils.ancestor(this.lastModified,'TR').parentNode,'TR'),k=C.AJAR_statement,_=this.generateRequest('(To be determined. Re-type of drag an object onto this field)');return this.formUndetStat(C,k.subject,k.predicate,_,k.why,!1),n.replaceTD(n.outline_objectTD(_,E),C.lastChild),void(this.lastModified=null)}if('BlankNode'==i.object.termType&&!this.statIsInverse||'BlankNode'==i.subject.termType&&this.statIsInverse)return void this.backOut()}var x=UI.utils.ancestor(this.lastModified,'TR'),E=this.views.defaults[i.predicate.uri];this.statIsInverse?n.replaceTD(n.outline_objectTD(i.subject,E),x.lastChild):n.replaceTD(n.outline_objectTD(d.literal(this.lastModified.value),E),x.lastChild),this.lastModified.value!=this.lastModified.defaultValue&&(x.lastChild.className+=' pendingedit'),this.lastModified=null}},deleteTriple:function t(a,r){function i(){var t;for(t=s;1==t.childNodes.length;t=t.previousSibling);if(t==s){var n=t.nextSibling;if(n.nextSibling&&1==n.childNodes.length){var a=t.firstChild;a.setAttribute('rowspan',parseInt(a.getAttribute('rowspan'))-1),n.insertBefore(t.firstChild,n.firstChild)}s.parentNode.removeChild(s)}else if(!0){var a=t.firstChild;a.setAttribute('rowspan',parseInt(a.getAttribute('rowspan'))-1),s.parentNode.removeChild(s)}}if(UI.log.debug('deleteTriple entered'),!r&&-1!=a.className.indexOf(' pendingedit'))return dump('The node you attempted to edit has a request still pending.\nPlease wait for the request to finish (the text will turn black)\nbefore editing this node again.'),void n.walk('up');var o=this.getStatementAbout(a),s,l;if(!r&&!d.whether(o.object,f('type'),UI.ns.link('Request'))&&!d.whether(o.predicate,f('type'),UI.ns.link('Request'))&&!d.whether(o.subject,f('type'),UI.ns.link('Request'))){UI.log.debug('about to send SPARQLUpdate');try{UI.store.updater.update([o],[],function(t,n,r){n?i():(dump('Error occurs while deleting '+o+'\n\n'+r),a.className=a.className.replace(/ pendingedit/g,''))}),a.className+=' pendingedit'}catch(t){return UI.log.error(t),void UI.log.warn('Error deleting statement '+o+':\n\t'+t)}UI.log.debug('SPARQLUpdate sent')}else;UI.log.debug('about to remove '+o),UI.log.debug('removed'),n.walk('up'),s=a.parentNode,l=s.nextSibling,r&&i()},clipboardInit:function t(){tabulator.clipboard={},tabulator.clipboard.objects=[],tabulator.clipboard.predicates=[],tabulator.clipboard.all=[]},copyToClipboard:function t(n,a){var r=UI.utils.getTerm(a);switch(a.className){case'selected':case'obj selected':var i=tabulator.clipboard.objects;tabulator.clipboard.objects.unshift(r);break;case'pred selected':case'pred internal selected':tabulator.clipboard.predicates.unshift(r);}tabulator.clipboard.all.unshift(r)},insertTermTo:function t(a,r,o){switch(a.className){case'undetermined selected':var l=this.views.defaults[a.parentNode.AJAR_statement.predicate.uri];this.fillInRequest(a.nextSibling?'predicate':'object',a,r);break;case'pred selected':var c=this.appendToPredicate(a),u=a.parentNode.AJAR_statement,l=this.views.defaults[u.predicate.uri];c.appendChild(n.outline_objectTD(r,l));var f=a.parentNode.AJAR_inverse;f?c.AJAR_statemnet=d.add(r,u.predicate,u.object,u.why):c.AJAR_statement=d.add(u.subject,u.predicate,r,u.why);try{UI.store.updater.update([],[c.AJAR_statement],function(t,n,a){n||UI.log.error('userinput.js (pred selected): Fail trying to insert statement '+c.AJAR_statement+': '+UI.utils.stackString(e))})}catch(t){return void UI.log.error('Exception trying to insert statement '+c.AJAR_statement+': '+UI.utils.stackString(t))}c.AJAR_inverse=f,i.statements.push(c.AJAR_statement);break;case'selected':var m=UI.utils.ancestor(a,'TABLE').lastChild,h=m.insertBefore(s.createElement('tr'),m.lastChild);if(!1)var u=h.previousSibling.previousSibling.AJAR_statement;else var u=h.previousSibling.AJAR_statement;var o;if('undefined'==typeof o&&(o=!0),o)this.formUndetStat(h,u.subject,this.generateRequest('(TBD)',h,!0),r,u.why,!1),h.appendChild(n.outline_objectTD(r)),n.walk('moveTo',h.firstChild),this.startFillInText(h.firstChild);else{var g=this.generateRequest('(To be determined. Re-type of drag an object onto this field)',h);this.formUndetStat(h,u.subject,r,g,u.why,!1),h.insertBefore(n.outline_predicateTD(r,h,!1,!1),h.firstChild),n.walk('moveTo',h.lastChild),this.startFillInText(h.lastChild)}}},Refill:function t(n,a){UI.log.info('Refill'+a.textContent);var r=a.nextSibling;if(r){if('undetermined'==a.nextSibling.className){var i=UI.utils.getAbout(d,UI.utils.ancestor(a,'TABLE').parentNode),o=d.any(i,f('type')),s=[],l='.\n';s[0]='SELECT ?pred WHERE{\n?pred '+f('type')+f('Property')+'.\n?pred '+UI.ns.rdfs('domain')+o+'.}',s[1]='SELECT ?pred ?class\nWHERE{\n?pred '+f('type')+f('Property')+'.\n'+o+UI.ns.rdfs('subClassOf')+' ?class.\n?pred '+UI.ns.rdfs('domain')+' ?class.\n}',s[2]='SELECT ?pred WHERE{\n'+i+f('type')+d.variable('subjectClass')+l+d.variable('pred')+UI.ns.rdfs('domain')+d.variable('subjectClass')+l+'}';var c=s.map(SPARQLToQuery)}else var i=UI.utils.getAbout(d,UI.utils.ancestor(a,'TABLE').parentNode),o=d.any(i,f('type')),u=a.parentNode.AJAR_statement.object,m='Literal'==u.termType?UI.ns.rdfs('Literal'):d.any(u,f('type')),s='SELECT ?pred WHERE{'+i+f('type')+'?subjectClass.\n'+u+f('type')+'?objectClass.\n?pred '+UI.ns.rdfs('domain')+'?subjectClass.\n?pred '+UI.ns.rdfs('range')+'?objectClass.\n}',c=SPARQLToQuery(s);this.showMenu(n,'GeneralPredicateChoice',c,{isPredicate:r,selectedTd:a})}else{var h=a.parentNode.AJAR_statement.predicate;if((d.whether(h,f('type'),UI.ns.owl('DatatypeProperty'))||'Collection'==h.termType||d.whether(h,UI.ns.rdfs('range'),UI.ns.rdfs('Literal')))&&(a.className='',UI.utils.emptyNode(a),this.lastModified=this.createInputBoxIn(a,' (Please Input) '),this.lastModified.isNew=!1,this.lastModified.select()),a.parentNode.AJAR_statement.predicate.sameTerm(f('type'))){var s='SELECT ?class WHERE{?class '+f('type')+UI.ns.rdfs('Class')+'.}',g=SPARQLToQuery(s);this.showMenu(n,'TypeChoice',g,{isPredicate:r,selectedTd:a})}}},getAutoCompleteHandler:function t(a){l('\n\n***** In getAutoCompleteHandler ****** mode = '+a),'PredicateAutoComplete'==a?a='predicate':'JournalTAC'!=a&&(a='all');var i;return i='JournalTAC'==a?s.getElementById('inpid_journal_title'):this.lastModified||n.getSelection()[0].firstChild,l('InputBox='+i),l('InputBox.value='+i.value),function(t){function o(t){t&&(f.lastHighlight&&(f.lastHighlight.className=''),f.lastHighlight=t,f.lastHighlight.className='activeItem',n.showURI(UI.utils.getAbout(d,f.lastHighlight)))}l('ENTER EVENT='+t),l('1. outside (if eneterEvent)');var c={},u=i.parentNode;a||(a=u.nextSibling?'predicate':'all'),c.pageX=UI.utils.findPos(u)[0],c.pageY=UI.utils.findPos(u)[1]+u.clientHeight,l('epX='+c.pageX+', epY='+c.pageY+', mode='+a);var f=s.getElementById(n.UserInput.menuID);if(t){l('2. in (if enterEvent).  with type = '+('undefined'==typeof t?'undefined':r(t)));var m=i.value;if('object'==('undefined'==typeof t?'undefined':r(t)))switch(l('3. in typeof enterEvent is object, will switch to keys, arrows, etc. keycode = '+t.keyCode),t.stopPropagation(),f&&!f.lastHighlight&&o(f.firstChild.firstChild),t.keyCode){case 13:case 9:if(l('handler: Enter or Tab'),!f)return void n.UserInput.clearInputAndSave();if(!f.lastHighlight)return'JournalTAC'==a?(n.UserInput.clearMenu(),l('no lastH'),'no lastH'):void 0;if('INPUT'==f.lastHighlight.tagName)switch(f.lastHighlight.value){case'New...':l('subcase New'),n.UserInput.createNew();break;case'GiveURI':l('subcase GiveURI'),n.UserInput.inputURI();}else{if('JournalTAC'==a){if(l('movedArrow? '+k),k&&f.lastHighlight){var h=f.lastHighlight.firstChild.firstChild.innerHTML,g=f.lastHighlight.firstChild.nextSibling.innerHTML;return g=g.slice(4,-4),['gotdptitle',h,g]}return'asGivenTxt'}var b=UI.utils.getAbout(d,f.lastHighlight),y='predicate'==a?'predicate':'object';n.UserInput.clearMenu(),n.UserInput.fillInRequest(y,i.parentNode,b)}return void l('outside');case 38:return l('handler: Arrow UP'),k=!0,''!=m||'TR'!=f.lastHighlight.tagName||f.lastHighlight.previousSibling?o(f.lastHighlight.previousSibling):o(f.firstChild.firstChild),'I\'m a little Arrow Up';case 40:return l('handler: Arrow Down'),k=!0,'INPUT'==f.lastHighlight.tagName?o(f.childNodes[1].firstChild):o(f.lastHighlight.nextSibling),'I\'m a little Down Arrow';case 37:case 39:return l('handler: Arrow left, right'),void('INPUT'==f.lastHighlight.tagName&&(37==t.keyCode?o(f.lastHighlight.previousSibling):o(f.lastHighlight.nextSibling)));case 8:l('handler: Backspace'),m=m.slice(0,-1);break;case 27:return(l('handler: Esc'),!f)?void n.UserInput.backOut():void n.UserInput.clearMenu();break;default:l('handler: Default'),k=!1,l('oldtext='+m),m+=_StringfromCharCode(t.charCode),l('charcodent='+t.charCode),l('strcharcod='+_StringfromCharCode(t.charCode)),dump('DEFAULT txtstr='+m+'\n');}'all'==a?(l('generalAC after switch, newText='+m+'mode is all'),n.UserInput.clearMenu(),n.UserInput.showMenu(c,'GeneralAutoComplete',void 0,{inputText:m,selectedTd:u}),0==m.length&&n.UserInput.WildCardButtons()):'predicate'==a?(l('predicateAC after switch, newText='+m+'mode is predicate'),n.UserInput.clearMenu(),n.UserInput.showMenu(c,'PredicateAutoComplete',void 0,{inputText:m,isPredicate:!0,selectedTd:u})):'JournalTAC'==a&&(l('JouralTAC after switch, newText='+m),n.UserInput.clearMenu(),n.UserInput.showMenu(c,'JournalTitleAutoComplete',void 0,{inputText:m},'orderisuseless'));var f=s.getElementById(n.UserInput.menuID);return f?(l('at end of handler\n^^^^^^^^^^^^^^^^^\n\n'),o(f.firstChild.firstChild),n.showURI(UI.utils.getAbout(d,f.lastHighlight)),'nothing to return'):void l('No menu element.  Do not show menu.')}}},WildCardButtons:function t(){function a(t){var a=s.getElementById(n.UserInput.menuID);a.lastHighlight&&(a.lastHighlight.className=''),a.lastHighlight=UI.utils.ancestor(UI.utils.getTarget(t),'INPUT'),a.lastHighlight&&(a.lastHighlight.className='activeItem')}var r=s.getElementById(n.UserInput.menuID),i=r.insertBefore(s.createElement('div'),r.firstChild),o=i.appendChild(s.createElement('input')),d=i.appendChild(s.createElement('input'));o.type='button',o.value='New...',d.type='button',d.value='Know its URI',i.addEventListener('mouseover',a,!1),o.addEventListener('click',this.createNew,!1),d.addEventListener('click',this.inputURI,!1)},Keypress:function t(a){if(13==a.keyCode)if('TEXTAREA'!=n.targetOf(a).tagName)this.clearInputAndSave();else{var r=parseInt(this.lastModified.getAttribute('rows'));this.lastModified.setAttribute('rows',(r+1).toString()),a.stopPropagation()}},Mousedown:function n(a){l('MOUSING DOWN'),window.addEventListener('keypress',function(n){n.ctrlKey&&(115==n.charCode||113==n.charCode)&&t.switchMode()},!1),window.addEventListener('mousedown',t.Mousedown,!1),document.getElementById('outline').oncontextmenu=function(){return!1},2==a.button&&(t.switchMode(),a&&(a.preventDefault(),a.stopPropagation()))},Mouseover:function t(n){if(this.className='bottom-border-active',1==this._tabulatorMode)switch(UI.utils.getTarget(n).tagName){case'TD':var a=UI.utils.getTarget(n);'pred'==a.className&&(a.style.cursor='copy');break;case'DIV':var r=UI.utils.getTarget(n);'bottom-border'==UI.utils.getTarget(n).className&&(r.style.borderColor='rgb(100%,65%,0%)',r.style.cursor='copy');break;default:}},Mouseout:function t(n){if(this.className='bottom-border',1==this._tabulatorMode){var a=UI.utils.getTarget(n);'bottom-border'==UI.utils.getTarget(n).className&&(a.style.borderColor='transparent',a.style.cursor='auto')}},whatSortOfEditCell:function t(n){if(n.nextSibling)return'predicate';var a=this.getStatementAbout(n).predicate;return d.whether(a,UI.ns.rdf('type'),UI.ns.owl('DatatypeProperty'))||d.whether(a,UI.ns.rdfs('range'),UI.ns.rdfs('Literal'))||'Collection'==a.termType?'DatatypeProperty-like':d.whether(a,f('type'),UI.ns.owl('ObjectProperty'))?'ObjectProperty-like':'no-idea'},getStatementAbout:function t(n){var a=UI.utils.ancestor(n,'TR');if(!a)throw'No ancestor TR for the TD we clicked on:'+n;try{var r=a.AJAR_statement}catch(t){throw'No AJAR_statement!'+n+n.textContent+' has ancestor '+a;throw'TR not a statement TR';return}return this.lastModifiedStat=a.AJAR_statement,this.statIsInverse=a.AJAR_inverse,r},createInputBoxIn:function t(a,r){UI.log.info('myDocument in createInputBoxIn is now '+s.location),UI.log.info('outline.document is now '+n.document.location);var i=s.createElement('input');if(i.setAttribute('value',r),i.setAttribute('class','textinput'),'undetermined selected'!=a.className){var o=function t(a){(38==a.keyCode||40==a.keyCode)&&(n.OutlinerKeypressPanel(a),n.UserInput.clearInputAndSave())};i.setAttribute('size','100'),i.addEventListener('keypress',o,!1)}return a.appendChild(i),i},createNew:function t(a){n.UserInput.clearMenu();var r=n.getSelection()[0],i=r.parentNode.AJAR_statement.why,o=d.nextSymbol(i);n.UserInput.fillInRequest('object',r,o),n.outline_expand(n.getSelection()[0],o)},inputURI:function t(a){function r(t){switch(t.stopPropagation(),t.keyCode){case 13:case 9:if(this.value!=s){var n=this.value;i.fillInRequest('object',o,d.sym(n))}}}var i=n.UserInput;i.clearMenu();var o=n.getSelection()[0];UI.utils.emptyNode(o);var s=' (Type a URI) ';i.lastModified=i.createInputBoxIn(o,s),i.lastModified.select(),i.lastModified.addEventListener('keypress',r,!1)},appendToPredicate:function t(n){var a=!1,r;try{for(r=n.parentNode.nextSibling;1==r.childNodes.length&&r.AJAR_statement;r=r.nextSibling);}catch(t){a=!0}var i=s.createElement('tr');if(i.style.colspan='1',i.style.display='block',i.style.display='',n.hasAttribute('rowspan')&&n.setAttribute('rowspan',parseInt(n.getAttribute('rowspan'))+1),n.hasAttribute('rowspan')||n.setAttribute('rowspan','2'),!a)r.parentNode.insertBefore(i,r);else{var o=n.parentNode.parentNode;'defaultPane'==o.className?o.insertBefore(i,o.lastChild):o.appendChild(i)}return i},bnode2symbol:function t(n,a){d.copyTo(n,a,['two-direction','delete'])},generateRequest:function t(a,r,i,s){var d;s||(d=r?r:UI.utils.ancestor(this.lastModified,'TR'),UI.utils.emptyNode(d));var l=o,c=l.bnode();if(l.add(c,UI.ns.rdf('type'),UI.ns.link('Request')),10>a.length?l.add(c,UI.ns.link('message'),l.literal(a)):l.add(c,UI.ns.link('message'),l.literal(a)),l.add(c,UI.ns.link('to'),l.literal('The User')),l.add(c,UI.ns.link('from'),l.literal('The User')),!s){var u;u=i?d.appendChild(n.outline_predicateTD(c,d,!1,!1)):d.appendChild(n.outline_objectTD(c)),u.className='undetermined',u.textContent=a}return c},showMenu:function t(a,r,o,c,u){function m(t){y.lastHighlight&&(y.lastHighlight.className=''),y.lastHighlight=UI.utils.ancestor(UI.utils.getTarget(t),'TR'),y.lastHighlight&&(y.lastHighlight.className='activeItem')}function h(t){C.firstChild&&'no-suggest'==C.firstChild.className&&C.removeChild(C.firstChild);var n=UI.utils.predicateLabelForXML(t,!1);if(t.uri){var a='??';for(var r in I)if(UI.log.debug(I[r]),UI.rdf.Util.string_startswith(t.uri,I[r])){a=r;break}var i=C.appendChild(s.createElement('tr'));i.setAttribute('about',t);var o=i.appendChild(s.createElement('th'));o.appendChild(s.createElement('div')).appendChild(s.createTextNode(n)),i.appendChild(s.createElement('td')).appendChild(s.createTextNode(a.toUpperCase()))}}function g(t){return function(n){var a=n[t.vars[0]];h(a)}}UI.log.info('myDocument is now '+s.location),UI.log.info('outline.doucment is now '+n.document.location);var b=this,y=s.createElement('div');if(l('\n**** In showMenu, menuType = '+r+'\n'),c)for(var w in c)dump('\t extra '+w+': '+c[w]+'\n');dump('CREATED MENU\n'),y.id=this.menuID,y.className='outlineMenu',y.style.top=a.pageY+'px',y.style.left=a.pageX+'px';var x=function t(n){for(var a=0,r=0,i=0,o=0,s=0,d=0;n&&!isNaN(n.offsetLeft)&&!isNaN(n.offsetTop);)s=n.offsetLeft,d=n.offsetTop,s!=i&&(a+=n.offsetLeft-n.scrollLeft),d!=o&&(r+=n.offsetTop-n.scrollTop),i=s,o=d,n=n.parentNode;return{top:r+54,left:a-38}};if('JournalTitleAutoComplete'==r){var k=x(s.getElementById('inpid_journal_title'));k.left-=s.getElementById('inpid_journal_title').scrollTop,y.style.top=k.top+'px',y.style.left=k.left+'px'}dump('menu at top='+y.style.top+' left='+y.style.left+'\n'),s.body.appendChild(y);var C=y.appendChild(s.createElement('table'));y.lastHighlight=null;;switch(C.addEventListener('mouseover',m,!1),r){case'DidYouMeanDialog':var E=function t(a){l('DID YOU MEAN SELECT ITEM!!!!!');var r=UI.utils.ancestor(UI.utils.getTarget(a),'TR');2==r.childNodes.length&&r.nextSibling?(d.add(j,i,P),n.UserInput.clearMenu()):2==r.childNodes.length&&n.UserInput.clearMenu()};break;case'LimitedPredicateChoice':var T=c.clickedTd,E=function t(a){l('LIMITED P SELECT ITEM!!!!');for(var r=UI.utils.getAbout(d,UI.utils.getTarget(a)),o=T.parentNode.AJAR_statement.predicate.elements,s=0;s<o.length;s++)o[s].sameTerm(r)&&o.unshift(o.splice(s,1)[0]);n.UserInput.clearMenu();var i=T.parentNode,c=n.outline_predicateTD(i.AJAR_statement.predicate,i);i.insertBefore(c,T),i.removeChild(T),b.lastModified.select()};break;case'PredicateAutoComplete':case'GeneralAutoComplete':case'GeneralPredicateChoice':case'JournalTitleAutoComplete':case'TypeChoice':var A=c.isPredicate,S=c.selectedTd,E=function t(a){l('WOOHOO');var r=UI.utils.getAbout(d,UI.utils.getTarget(a));l('GENERAL SELECT ITEM!!!!!!='+r),l('target='+UI.utils.getTarget(a)),A?(l('1'),n.UserInput.fillInRequest('predicate',S,r)&&(l('2'),n.UserInput.clearMenu())):(l('3'),n.UserInput.fillInRequest('object',S,r)&&(l('4'),n.UserInput.clearMenu()))};break;default:throw'userinput: unexpected mode';}C.addEventListener('click',E,!1);var I={};switch(d.each(void 0,UI.ns.rdf('type'),UI.ns.owl('Ontology')).map(function(t){var n=UI.utils.label(t);if(n){var a=n.value.match(/\((.+?)\)/);a?I[a[1]]=t.uri:I[n.value]=t.uri}}),r){case'DidYouMeanDialog':var N=c.dialogTerm,j=c.bnodeTerm;y.style.width='auto';var L=C.appendChild(s.createElement('tr')),R=L.appendChild(s.createElement('th'));R.appendChild(s.createTextNode('Did you mean...'));var M=d.statementsMatching(N),D;for(D=0;D<M.length&&!d.whether(M[D].predicate,f('type'),UI.ns.owl('InverseFunctionalProperty'));D++);var i=M[D].predicate,P=d.any(N,M[D].predicate),O=UI.utils.label(N)+' who has '+UI.utils.label(i)+' '+P+'?',B=C.appendChild(s.createElement('tr')),U=B.appendChild(s.createElement('th'));U.appendChild(s.createTextNode(O)),R.setAttribute('colspan','2'),U.setAttribute('colspan','2');var F=C.appendChild(s.createElement('tr'));F.appendChild(s.createElement('th')).appendChild(s.createTextNode('Yes')),F.appendChild(s.createElement('td')).appendChild(s.createTextNode('BOOLEAN'));var q=C.appendChild(s.createElement('tr'));q.appendChild(s.createElement('th')).appendChild(s.createTextNode('No')),q.appendChild(s.createElement('td')).appendChild(s.createTextNode('BOOLEAN'));break;case'PredicateAutoComplete':var z=c.inputText,H=tabulator.lb.searchAdv(z,void 0,'predicate'),W=H[0];if(0==W.length)return dump('cm length 0\n'),void this.clearMenu();for(var D=0;D<W.length&&10>D;D++)h(W[D][1]);break;case'GeneralAutoComplete':var z=c.inputText;try{var H=tabulator.lb.search(z)}catch(t){dump('stop to see what happens '+c.selectedTd.textContent+'\n'+t+'\n')}var W=H[0],V=H[1];if(0==W.length)return dump('cm length 0\n'),void this.clearMenu();for(var D=0;D<W.length&&10>D;D++){var G=W[D][1].toNT(),J=C.appendChild(s.createElement('tr'));J.setAttribute('about',G);var K=J.appendChild(s.createElement('th'));K.appendChild(s.createElement('div')).appendChild(s.createTextNode(W[D][0]));var X=W[D][1],Y=V[D],Z=Y?UI.utils.label(Y):'';J.appendChild(s.createElement('td')).appendChild(s.createTextNode(Z))}break;case'JournalTitleAutoComplete':var z=c.inputText;dump('testing searching text= '+z+' =====\n'),dump('\n===start JournalTitleAutoComplete\n');for(var Q=d.each(void 0,f('type'),v('Journal')),ee=[],D=0;D<Q.length;D++){var te=Q[D],ne=d.each(te,_('title'),void 0),ae=ne+'',re=z.toLowerCase(),ie=ae.toLowerCase();if(-1!=ie.search(re)){l('FOUND A Journal Title Match!!!!!!'),ee.push(ne);var J=C.appendChild(s.createElement('tr'));J.setAttribute('about','journalTitle');var K=J.appendChild(s.createElement('th'));K.appendChild(s.createElement('div')).appendChild(s.createTextNode(ne)),J.appendChild(s.createElement('td')).appendChild(s.createTextNode(te))}}dump('matched: '+ee+'\n'),dump('\\\\done showMenu\'s JTAutocomplete\n');break;case'LimitedPredicateChoice':var oe=tabulator.util.getAbout(d,c.clickedTd);oe.termType='Collection';for(var se=d.each(oe,UI.ns.link('element')),D=0;D<se.length;D++)h(se[D]);break;default:var J=C.appendChild(s.createElement('tr'));J.className='no-suggest';var K=J.appendChild(s.createElement('th'));K.appendChild(s.createElement('div')).appendChild(s.createTextNode('No suggested choices. Try to type instead.')),J.appendChild(s.createElement('td')).appendChild(s.createTextNode('OK'));var b=this,de=function t(n){b.clearMenu(),n.stopPropagation};;J.addEventListener('click',de,'false');var le=function t(){};switch(o.constructor.name){case'Array':for(var D=0;D<o.length;D++)d.query(o[D],g(o[D]),le);break;case'undefined':throw'addPredicateChoice: query is not defined';break;default:d.query(o,g(o),le);}}},fillInRequest:function t(a,r,l){var c=r.parentNode,u,f;u=c.AJAR_statement,f=c.AJAR_inverse;var m='object'==a?u.object:u.predicate,h=!1,g,b;if(d.any(m,UI.ns.link('onfillin'))&&(b=new Function('subject',d.any(m,UI.ns.link('onfillin')).value)),'predicate'==a){var y=n.outline_predicateTD(l,c,!1,!1);if('undetermined'!=r.nextSibling.className){var w=new UI.rdf.Statement(u.subject,l,u.object,u.why);try{UI.store.updater.update([],[w],function(t,n,a){n?(g=d.anyStatementMatching(u.subject,l,u.object,u.why),c.AJAR_statement=g,y.className=y.className.replace(/ pendingedit/g,'')):UI.log.warn('Failure occurs (#2) while inserting '+c.AJAR_statement+'\n\n'+a)})}catch(t){return UI.log.error(t),void UI.log.warn('Error when insert (#2) of statement '+w+':\n\t'+t)}y.className+=' pendingedit',this.lastModified=null}else this.formUndetStat(c,u.subject,l,u.object,u.why,!1),n.walk('right'),h=!0;n.replaceTD(y,r),o.remove(u)}else if('object'==a){var y=n.outline_objectTD(l);if(n.replaceTD(y,r),!r.previousSibling||'undetermined'!=r.previousSibling.className){var w;w=f?new UI.rdf.Statement(l,u.predicate,u.object,u.why):new UI.rdf.Statement(u.subject,u.predicate,l,u.why);try{UI.store.updater.update([],[w],function(t,n,a){UI.log.info('@@ usinput.js (object) callback ok='+n+' for statement:'+w+'\n '),n?(y.className=y.className.replace(/ pendingedit/g,''),newStats=f?d.statementsMatching(l,u.predicate,u.object,u.why):d.statementsMatching(u.subject,u.predicate,l,u.why),!newStats.length&&UI.log.error('userinput.js 1711: Can\'t find statememt!'),c.AJAR_statement=newStats[0]):UI.log.warn('userinput.js (object): Fail trying to insert statement '+w)})}catch(t){return UI.log.error('userinput.js (object): exception trying to insert statement '+w+': '+UI.utils.stackString(t)),void UI.log.warn('Error trying to insert statement '+w+':\n'+t)}this.lastModified=null,y.className+=' pendingedit'}else n.walk('left'),h=!0;o.remove(u)}return i.statements.push(g),b&&b(u.subject),!h||void this.startFillInText(n.getSelection()[0])},formUndetStat:function t(n,a,r,i,s,d){return n.AJAR_inverse=d,n.AJAR_statement=o.add(a,r,i,s),n.AJAR_statement},switchModeByRadio:function t(){var n=s.getElementsByName('mode');0==this._tabulatorMode&&!0==n[1].checked&&this.switchMode(),1==this._tabulatorMode&&!0==n[0].checked&&this.switchMode()},_tabulatorMode:0}}},function(t,n,a){'use strict';var r=a(1),i=!1;t.exports={icon:r.icons.iconBase+'noun_97839.svg',name:'issue',label:function n(a){var i=r.store,o=i.findTypeURIs(a);return o['http://www.w3.org/2005/01/wf/flow#Task']||i.holds(a,r.ns.wf('tracker'))?'issue':o['http://www.w3.org/2005/01/wf/flow#Tracker']?'tracker':null},render:function n(a,o){var d=r.store,l=r.ns,c=$rdf.Namespace('http://www.w3.org/2005/01/wf/flow#'),s=$rdf.Namespace('http://purl.org/dc/elements/1.1/'),u=$rdf.Namespace('http://purl.org/dc/terms/'),f=o.createElement('div'),m=r.panes.getOutliner(o);f.setAttribute('class','issuePane');var g=function t(n,a){return a||'http://www.w3.org/2000/01/rdf-schema#comment'!==n.uri?!1:!0},y=function n(r,o,s){if(i){if(!_(D,'trackLastModified'))return;var d=o.statementsMatching(a,u('modified')),d=d.concat(o.statementsMatching(a,c('modifiedBy'))),l=[$rdf.st(a,u('modified'),new Date,s)];t&&l.push($rdf.st(a,c('modifiedBy'),t,s)),S.update(d,l,function(t,n,a){})}},w=function t(n,a){var r=o.createElement('pre');return r.setAttribute('style',a?a:'color: grey'),f.appendChild(r),r.appendChild(o.createTextNode(n)),r},v=function t(n,a){n||console.log('Sorry, failed to save your change:\n'+a,'background-color: pink;')},x=function t(n){console.warn(n),f.appendChild(r.widgets.errorMessageBlock(o,n))},_=function t(n,a){var r=d.any(n,l.ui(a));return!!(r&&r.value)},k=this,C=function t(n){var r=n.parentNode,i=k.render(a,o);r.replaceChild(i,n)},E=function t(){var n=new Date;return''+n.getTime()},T=function t(n,a,o,d){var i=n.createElement('div'),h=a.any(o,c('stateStore')),g=function t(){w.setAttribute('class','pendingedit'),w.disabled=!0;var n=[],r=function t(n){var a=new $rdf.Literal(new Date()),r=''+new Date().getTime(),i=a.value.slice(0,4),o=a.value.slice(5,7),s=a.value.slice(8,10);return n.replace('{N}',r).replace('{YYYY}',i).replace('{MM}',o).replace('{DD}',s)},g=a.anyValue(o,c('issueURITemplate')),b,y;g?(g=$rdf.uri.join(g,h.uri),b=a.sym(r(g))):b=a.sym(h.uri+'#Iss'+E()),y=b.doc();var v=a.literal(w.value);n.push(new $rdf.Statement(b,c('tracker'),o,h)),n.push(new $rdf.Statement(b,s('title'),v,h)),n.push(new $rdf.Statement(b,u('created'),new Date(),h));var x=a.each(o,c('initialState'));0===x.length&&console.log('This tracker has no initialState');for(var _=0;_<x.length;_++)n.push(new $rdf.Statement(b,l.rdf('type'),x[_],h));d&&n.push(new $rdf.Statement(d,c('dependent'),b,h)),g&&(n.push(new $rdf.Statement(b,c('tracker'),o,y)),n.push(new $rdf.Statement(b,l.rdfs('seeAlso'),h,y)));var k=function t(n,a,r){a?(i.parentNode.removeChild(i),C(f),m.GotoSubject(b,!0,void 0,!0,void 0)):console.log('Error: can\'t save new issue:'+r)};S.update([],n,k)};r.store.fetcher.removeCallback('done','expand'),r.store.fetcher.removeCallback('fail','expand');var b=a.any(o,c('issueClass')),y=r.utils.label(b);i.innerHTML='<h2>Add new '+(d?'sub ':'')+y+'</h2><p>Title of new '+y+':</p>';var w=n.createElement('input');return w.setAttribute('type','text'),w.setAttribute('style','margin: 0.5em; font-size: 100%; padding: 0.3em;'),w.setAttribute('size','100'),w.setAttribute('maxLength','2048'),w.select(),w.addEventListener('keyup',function(t){13===t.keyCode&&g()},!1),i.appendChild(w),i},A=function t(n){var a=r.authn.newAppInstance(o,{noun:'tracker'},function(t,a){var o='issuetracker.w3.org';if(a||(a=d.any(t,s('uriPrefix')).value,'/'!==a.slice(-1)&&($rdf.log.error(o+': No / at end of uriPrefix '+a),a+='/'),a+=o+'/'+E()+'/',!!confirm('Make new tracker at '+a+'?'))){for(var s=r.ns.space,d=r.store,l=d.any(D,c('stateStore')),f=d.sym(a+'store.ttl'),u=n.doc(),m=u.uri.slice(0,u.uri.lastIndexOf('/')+1),h=function t(n){if(void 0!==n.elements)return n.elements.map(t);if(void 0===n.uri)return n;var r=n.uri;return r===l.uri?f:(r.slice(0,m.length)===m&&(r=a+r.slice(m.length),$rdf.log.debug(' Map '+n.uri+' to '+r)),d.sym(r))},g=h(u),b=h(n),y=d.statementsMatching(void 0,void 0,void 0,u),w=0,i;w<y.length;w++)i=y[w],d.add(h(i.subject),h(i.predicate),h(i.object),g);d.add(b,r.ns.space('inspiration'),n,l),d.add(b,r.ns.space('inspiration'),n,g),S.put(g,d.statementsMatching(void 0,void 0,void 0,g),'text/turtle',function(t,n,a){n?S.put(f,[],'text/turtle',function(t,n,a){n?console.info('Ok The tracker created OK at: '+b.uri+'\nMake a note of it, bookmark it. '):console.log('FAILED to set up new store at: '+f.uri+' : '+a)}):console.log('FAILED to save new tracker at: '+g.uri+' : '+a)})}});return a.setAttribute('style','margin: 0.5em 1em;'),a},S=d.updater,I=d.statementsMatching(a),N=d.statementsMatching(void 0,void 0,a),j=d.findTypeURIs(a),t=r.authn.currentUser(),L=function t(n,a){r.store.fetcher.unload(n),r.store.fetcher.nowOrWhenFetched(n.uri,void 0,function(t,n){t?a():console.log('Cant refresh data:'+n)})},R=function t(n){if(n.refresh)return void n.refresh();for(var a=0;a<n.children.length;a++)t(n.children[a])},M=function t(n,s){var l=r.ns,u={},f=function t(n){u[n.uri]=!0};f(l.rdf('type')),f(l.dc('title'));var h=function t(){var a=d.findTypeURIs(n),r='padding: 0.5em 1.5em 1em 1.5em; ',i=null;for(var o in a)if(i=d.any(d.sym(o),d.sym('http://www.w3.org/ns/ui#backgroundColor')),i)break;i=i?i.value:'#eee',r+='background-color: '+i+'; ',s.setAttribute('style',r)};h();var g=d.any(D,c('stateStore')),k=d.sym(n.uri.split('#')[0]);r.authn.checkUser();var C=d.any(D,c('issueClass'));if(!C)throw new Error('This tracker '+D+' has no issueClass');var A=r.widgets.makeSelectForCategory(o,d,n,C,g,function(t,n){t?(y(k,d,k),R(s)):console.log('Failed to change state:\n'+n)});s.appendChild(A);for(var I=d.each(D,c('issueCategory')),N=0;N<I.length;N++)s.appendChild(r.widgets.makeSelectForCategory(o,d,n,I[N],g,function(t,n){t?(y(k,d,k),R(s)):console.log('Failed to change category:\n'+n)}));var i=o.createElement('a');i.setAttribute('href',D.uri),i.setAttribute('style','float:right'),s.appendChild(i).textContent=r.utils.label(D),i.addEventListener('click',r.widgets.openHrefInOutlineMode,!0),f(l.wf('tracker')),s.appendChild(r.widgets.makeDescription(o,d,n,c('description'),k,function(t,n){t?y(k,d,k):console.log('Failed to description:\n'+n)})),f(c('description'));var a=d.statementsMatching(n,l.wf('assignee'));if(1<a.length){w('Weird, was assigned to more than one person. Fixing ..');var j=a.slice(1);S.update(j,[],function(t,n,a){n?w('Now fixed.'):x('Fixed failed: '+a)})}var L=a.length?a[0].object:null,M=d.statementsMatching(void 0,l.wf('assignee')),P=M.map(function(t){return t.object}),O=d.any(void 0,l.doap('bug-database'),D);if(O&&(P=P.concat(d.each(O,l.doap('developer')))),P.length){P.map(function(t){d.fetcher.lookUpThing(t)});var B={mint:'** Add new person **',nullLabel:'(unassigned)',mintStatementsFun:function t(n){var a=[$rdf.st(n,l.rdf('type'),l.foaf('Person'))];return O&&a.push($rdf.st(O,l.doap('developer'),n)),a}};s.appendChild(r.widgets.makeSelectForOptions(o,d,n,l.wf('assignee'),P,B,k,function(t,n){t?y(k,d,k):console.log('Failed to description:\n'+n)}))}if(f(l.wf('assignee')),_(D,'allowSubIssues')&&(m.appendPropertyTRs(s,G,!1,function(t,n){return!n&&t.sameTerm(c('dependent'))}),m.appendPropertyTRs(s,J,!0,function(t,n){return n&&t.sameTerm(c('dependent'))}),f(c('dependent'))),s.appendChild(o.createElement('br')),_(D,'allowSubIssues')){var U=o.createElement('button');U.setAttribute('type','button'),s.appendChild(U);var b=r.utils.label(C);U.innerHTML='New sub '+b,U.setAttribute('style','float: right; margin: 0.5em 1em;'),U.addEventListener('click',function(t){s.appendChild(T(o,d,D,n))},!1)}var F=d.any(D,l.wf('extrasEntryForm'));if(F){r.widgets.appendForm(o,s,{},n,F,g,v);var q=d.each(F,l.ui('part'));q.map(function(t){var n=d.any(t,l.ui('property'));n&&f(n)})}var z=s.appendChild(o.createElement('tr'));z.setAttribute('style','height: 1em');var H=d.anyValue(D,c('issueURITemplate')),W;if(H)W=n.doc();else{W=d.any(D,l.wf('messageStore')),W||(W=d.any(D,c('stateStore')));var V=d.sym(W.uri+'#Chat'+E())}d.fetcher.nowOrWhenFetched(W,function(t,a,i){if(!t){var l=o.createElement('p');l.textContent=a,s.insertBefore(l,z)}else{var c=r.messageArea(o,d,n,W);s.insertBefore(c,z)}}),f(l.wf('message'));var i=r.widgets.attachmentList(o,n,s,{promptIcon:r.icons.iconBase+'noun_25830.svg',predicate:l.wf('attachment')});f(l.wf('attachment'));var G=d.statementsMatching(n),J=d.statementsMatching(void 0,void 0,n);m.appendPropertyTRs(s,G,!1,function(t,n){return!(t.uri in u)}),m.appendPropertyTRs(s,J,!0,function(t,n){return!(t.uri in u)});var K=o.createElement('button');K.textContent='refresh',K.addEventListener('click',function(t){r.store.fetcher.unload(W),r.store.fetcher.nowOrWhenFetched(W.uri,void 0,function(t,n){t?R(s):console.log('Cant refresh messages'+n)})},!1),K.setAttribute('style','margin: 0.5em 1em;'),s.appendChild(K)};if(j['http://www.w3.org/2005/01/wf/flow#Task']||d.holds(a,r.ns.wf('tracker'))){var D=d.any(a,c('tracker'));if(!D)throw'This issue '+a+'has no tracker';var P=D.uri.split('#')[0];r.store.fetcher.load([D.doc(),l.wf('').doc()]).then(function(t){var n=d.any(D,c('stateStore'));r.store.fetcher.nowOrWhenFetched(n,a,function t(r,i){return r?void(M(a,f),S.addDownstreamChangeListener(n,function(){R(f)})):console.log('Failed to load state '+n+' '+i)})}).catch(function(t){return console.log('Failed to load config '+P+' '+t)}),r.store.fetcher.nowOrWhenFetched(P,a,function t(n,a){if(!n)return console.log('Failed to load config '+P+' '+a)})}else if(j['http://www.w3.org/2005/01/wf/flow#Tracker']){var D=a,O=d.any(a,c('issueClass')),B;if(!O)throw new Error('This tracker has no issueClass');var U=d.any(a,c('stateStore'));if(!U)throw new Error('This tracker has no stateStore');r.authn.checkUser();var F=o.createElement('h2');F.setAttribute('style','font-size: 150%'),f.appendChild(F);var h=r.utils.label(O);F.appendChild(o.createTextNode(h+' list'));var q=o.createElement('button'),b=o.createElement('div');q.setAttribute('type','button'),q.setAttribute('style','padding: 0.3em; font-size: 100%; margin: 0.5em;'),b.appendChild(q),f.appendChild(b);var z=o.createElement('img');z.setAttribute('src',r.icons.iconBase+'noun_19460_green.svg'),z.setAttribute('style','width: 1em; height: 1em; margin: 0.2em;'),q.appendChild(z);var H=o.createElement('span');H.innerHTML='New '+h,q.appendChild(H),q.addEventListener('click',function(t){q.setAttribute('disabled','true'),b.appendChild(T(o,d,a))},!1),r.store.fetcher.load([U,l.wf('').doc()]).then(function(t){for(var n=new $rdf.Query(r.utils.label(a)),s=d.each(D,c('issueCategory')),u=['issue','state','created'],m=0;m<s.length;m++)u.push('_cat_'+m);var i={};u.map(function(t){n.vars.push(i[t]=$rdf.variable(t))}),n.pat.add(i.issue,c('tracker'),D),n.pat.add(i.issue,l.dct('created'),i.created),n.pat.add(i.issue,l.rdf('type'),i.state),n.pat.add(i.state,l.rdfs('subClassOf'),O);for(var m=0;m<s.length;m++)n.pat.add(i.issue,l.rdf('type'),i['_cat_'+m]),n.pat.add(i['_cat_'+m],l.rdfs('subClassOf'),s[m]);n.pat.optional=[];var h=d.any(D,c('propertyList'));if(h)for(var g=h.elements,b=0;b<g.length;b++){var y=g[b],w='_prop_'+b;0<=y.uri.indexOf('#')&&(w=y.uri.split('#')[1]);var v=new $rdf.IndexedFormula;n.pat.optional.push(v),n.vars.push(i[w]=$rdf.variable(w)),v.add(i.issue,y,i[w])}var x={},_=d.each(void 0,l.rdfs('subClassOf'),O);_.map(function(t){(d.holds(t,l.rdfs('subClassOf'),c('Open'))||t.sameTerm(c('Open')))&&(x[t.uri]=!0)});var k=function t(n){B.innerHTML='';var a=B.appendChild(o.createElement('button'));a.textContent='X',a.addEventListener('click',function(t){B.innerHTML=''}),M(d.sym(n),B)},C=r.table(o,{query:n,keyVariable:'?issue',hints:{"?issue":{linkFunction:k},"?created":{cellFormat:'shortDate'},"?state":{initialSelection:x}}}),E,T;if(f.appendChild(C),E=f.appendChild(o.createElement('div')),E.setAttribute('style',' position: absolute; top: 100px; right: 20px; margin: 1em white;'),B=E.appendChild(o.createElement('div')),C.refresh){var I=o.createElement('button');I.textContent='refresh',I.addEventListener('click',function(t){r.store.fetcher.unload(U),r.store.fetcher.nowOrWhenFetched(U.uri,void 0,function(t,n){t?C.refresh():console.log('Cant refresh data:'+n)})},!1),f.appendChild(I)}else console.log('No refresh function?!');f.appendChild(A(a)),S.addDownstreamChangeListener(U,C.refresh)}).catch(function(t){return console.log('Cannot load state store: '+t)})}else console.log('Error: Issue pane: No evidence that '+a+' is either a bug or a tracker.');var W;return r.authn.checkUser().then(function(n){return n?(console.log('Web ID set already: '+n),void(t=n)):void(W=r.authn.loginStatusBox(o,function(n){n?(t=d.sym(n),console.log('Web ID set from login button: '+n),f.removeChild(W)):t=null}),W.setAttribute('style','margin: 0.5em 1em;'),f.appendChild(W))}),f}}},function(t,n,a){'use strict';var r=a(1),i=a(252),o=a(474),s=o.toolsPane;t.exports={icon:r.icons.iconBase+'noun_99101.svg',name:'contact',label:function n(a){var i=r.store,o=r.ns,s=i.findTypeURIs(a);return s[o.vcard('Individual').uri]?'Contact':s[o.vcard('Organization').uri]?'contact':s[o.vcard('Group').uri]?'Group':s[o.vcard('AddressBook').uri]?'Address book':null},mintClass:r.ns.vcard('AddressBook'),mintNew:function t(n){return new Promise(function(t,a){var i=n.dom,o=n.me,s=n.div,d=r.store,l=r.ns,c=n.newBase||n.newInstance.dir().uri,u=n.instanceClass||l.vcard('AddressBook');if(u.sameTerm(l.vcard('Group'))){var f=n.newInstance||d.sym(n.newBase+'index.ttl#this'),m=f.doc();return d.add(f,l.rdf('type'),l.vcard('Group'),m),d.add(f,l.vcard('fn'),n.instanceName||'untitled group',m),void d.fetcher.putBack(m,{contentType:'text/turtle'}).then(function(a){t(n)}).catch(function(t){a(new Error('Error creating document for new group '+t))})}var h='address book',g=function t(n){s.appendChild(r.widgets.errorMessageBlock(i,n,'pink'))},b='@prefix vcard: <http://www.w3.org/2006/vcard/ns#>.\n  @prefix ab: <http://www.w3.org/ns/pim/ab#>.\n  @prefix dc: <http://purl.org/dc/elements/1.1/>.\n  @prefix xsd: <http://www.w3.org/2001/XMLSchema#>.\n\n  <#this> a vcard:AddressBook;\n      dc:title "New address Book";\n      vcard:nameEmailIndex <people.ttl>;\n      vcard:groupIndex <groups.ttl>.\n';b+='<#this> <http://www.w3.org/ns/auth/acl#owner> <'+o.uri+'>.\n\n';var y=[{to:'index.ttl',content:b,contentType:'text/turtle'},{to:'groups.ttl',content:'',contentType:'text/turtle'},{to:'people.ttl',content:'',contentType:'text/turtle'},{to:'',existing:!0,aclOptions:{defaultForNew:!0}}],w=c+'index.html',v=r.authn.offlineTestID();v&&(y.push({to:'local.html',from:'local.html',contentType:'text/html'}),w=c+'local.html');var x=function a(r,o){console.log('Files created. App ready at '+r);var d=s.appendChild(i.createElement('p'));d.setAttribute('style','font-size: 140%;'),d.innerHTML='Your <a href=\''+r+'\'><b>new '+o+'</b></a> is ready. <br/><br/><a href=\''+r+'\'>Go to new '+o+'</a>',t(n)},_=function t(){if(0===y.length)x(w,h);else{var n=y.shift();console.log('Creating new file '+n.to+' in new instance ');var i=$rdf.uri.join(n.to,c),s=n.aclOptions||{},l=function d(l,c){return c?void r.authn.setACLUserPublic(i,o,s).then(function(){return t()}).catch(function(t){var r='Error setting access permissions for '+n.to+' : '+t.message;return g(r),a(new Error(r))}):(g('Error writing new file '+n.to),a(new Error('Error writing new file '+n.to)))};'content'in n?d.fetcher.webOperation('PUT',i,{data:n.content,saveMetadata:!0,contentType:n.contentType}).then(function(){return l(i,!0)}):'existing'in n?l(i,!0):a(new Error('copy not expected buiding new app'))}};_()})},render:function n(o,d,l){l=l||{};var c=r.store,f=r.ns,u=d.createElement('div'),m=o.doc();r.aclControl.preventBrowserDropEvents(d);var h='font-size: 100%; margin: 0.8em; padding:0.5em;';u.setAttribute('class','contactPane');var g=function t(n){console.log(n),u.appendChild(r.widgets.errorMessageBlock(d,n,'pink'))},b=function t(n,a){n||g('Error: '+a)},y=this,w=function n(a){return r.authn.newAppInstance(d,{noun:'address book',appPathSegment:'contactorator.timbl.com'},function(n,r){y.clone(a,r,{me:t,div:u,dom:d})})},v=r.store.updater;r.aclControl.preventBrowserDropEvents(d);var x=c.findTypeURIs(o),t=r.authn.currentUser(),_={target:o,me:t,noun:'address book',div:u,dom:d},k=function t(n){if(n.refresh)return void n.refresh();for(var a=0;a<n.children.length;a++)t(n.children[a])},C=function t(n,a,r){c.fetcher.load(n).then(function(t){E(n,a,r)}).catch(function(t){g(t)})},E=function n(a,i,o){var m=r.utils.label(f.vcard('AddressBook')),y=a[0],x=c.any(y,f.vcard('groupIndex')),_={},k=o.foreignGroup||y,C=c.any(k,f.dc('title'))||c.any(k,f.vcard('fn'));l.solo&&C&&'undefined'!=typeof document&&(document.title=C.value),C=C?C.value:m;var E=function t(n){if(n)return n;var a;for(var r in _){a=c.sym(r);var i=c.any(void 0,f.vcard('includesGroup'),a);if(i)return i}throw new Error('findBookFromGroups: Cant find address book which this group is part of')},T=function t(n,a,i,o){n=E(n);var s=c.any(n,f.vcard('nameEmailIndex')),d=r.utils.genUuid(),l=c.sym(n.dir().uri+'Person/'+d+'/index.ttl#this'),u=l.doc(),m=[[$rdf.st(l,f.vcard('inAddressBook'),n,s),$rdf.st(l,f.vcard('fn'),a,s)]];for(var h in i){var b=c.sym(h),g=b.doc();m.push([$rdf.st(b,f.vcard('hasMember'),l,g),$rdf.st(l,f.vcard('fn'),a,g)])}var y=function t(n,a,i){a?0<m.length?(console.log('Patching '+m[0]+'\n'),v.update([],m.shift(),t)):(console.log('Done patching. Now reading back in.\n'),r.store.fetcher.nowOrWhenFetched(u,void 0,function(t,n){t?(console.log('Read back in OK.\n'),o(!0,l)):(console.log('Read back in FAILED: '+n+'\n'),o(!1,n))})):(console.log('Error: can\'t update '+n+' for new contact:'+i+'\n'),o(!1,'Error: can\'t update '+n+' for new contact:'+i))};r.store.fetcher.nowOrWhenFetched(s,void 0,function(t,n){t?(console.log(' People index must be loaded\n'),v.put(u,[$rdf.st(l,f.vcard('fn'),a,u),$rdf.st(l,f.rdf('type'),f.vcard('Individual'),u)],'text/turtle',y)):(console.log('Error loading people index!'+s.uri+': '+n),o(!1,'Error loading people index!'+s.uri+': '+n+'\n'))})},A=function t(n,a,i){var o=c.any(n,f.vcard('groupIndex')),s=n.uri.split('#')[0],d=a.replace(' ','_'),l=c.sym(s.slice(0,s.lastIndexOf('/')+1)+'Group/'+d+'.ttl'),u=c.sym(l.uri+'#this');console.log(' New group will be: '+u+'\n'),r.store.fetcher.nowOrWhenFetched(o,function(t,r){if(t){console.log(' Group index must be loaded\n');var s=[$rdf.st(n,f.vcard('includesGroup'),u,o),$rdf.st(u,f.rdf('type'),f.vcard('Group'),o),$rdf.st(u,f.vcard('fn'),a,o)];v.update([],s,function(r,s,d){if(t){var c=[$rdf.st(n,f.vcard('includesGroup'),u,o),$rdf.st(u,f.rdf('type'),f.vcard('Group'),l),$rdf.st(u,f.vcard('fn'),a,l)];v.put(l,c,'text/turtle',function(t,n,a){i(n,n?u:'Can\'t save new group file '+l+a)})}else i(t,'Could not update group index '+d)})}else console.log('Error loading people index!'+o.uri+': '+r),i(!1,'Error loading people index!'+o.uri+': '+r+'\n')})},S=function t(n,a,i,o){var s=n.createElement('div');r.store.fetcher.removeCallback('done','expand'),r.store.fetcher.removeCallback('fail','expand'),s.innerHTML='<p>Name of new '+i+':</p>';var d=n.createElement('input');d.setAttribute('type','text'),d.setAttribute('size','100'),d.setAttribute('maxLength','2048'),d.select();var l=function t(){d.setAttribute('class','pendingedit'),d.disabled=!0,o(!0,d.value)};d.addEventListener('keyup',function(t){13===t.keyCode&&l()},!1),s.appendChild(d),s.appendChild(n.createElement('br'));var c=s.appendChild(n.createElement('button'));c.setAttribute('type','button'),c.style.cssText=h,c.innerHTML='Cancel',c.addEventListener('click',function(t){s.parentNode.removeChild(s),o(!1)},!1);var u=s.appendChild(n.createElement('button'));return u.setAttribute('type','button'),u.innerHTML='Continue',u.style.cssText=h,u.addEventListener('click',function(t){l()},!1),s},I=function t(n){var a=c.any(n,f.vcard('fn'))||c.any(n,f.foaf('name'))||c.any(n,f.vcard('organization-name'));return a?a.value:'???'},N=function t(n){var a=ae.value.trim().toLowerCase();if(0===a.length)return!0;for(var r=a.split(' '),i=0,o;i<r.length;i++)if(o=r[i],0>n.toLowerCase().indexOf(o))return!1;return!0},L=function t(){for(var n=0,a;n<Q.children.length;n++)a=Q.children[n],a.setAttribute('style',N(I(a.subject))?'':'display: none;')},j=function t(n,a,r){for(var i=a.children.length,o=[],s=0;s<a.children.length;s++){var d=a.children[s],l=d.subject,u=function t(a,s){s.setAttribute('style','background-color: #ffe;'),c.fetcher.nowOrWhenFetched(a.doc(),void 0,function(t,d){if(!t){var l='Can\'t load group file: '+a+': '+d;return o.push(l),b(t,l)}s.setAttribute('style','background-color: #cce;'),n[a.uri]=!0,F(),U(),i-=1,!i&&r&&r(0===o.length,o)})};u(l,d)}},R=function t(){se=[],o.foreignGroup&&se.push(['',c.any(o.foreignGroup,f.vcard('fn')),o.foreignGroup]),y&&(a.map(function(t){var n=t?c.each(t,f.vcard('includesGroup')):[],a=n.map(function(n){return[t,c.any(n,f.vcard('fn')),n]});se=se.concat(a)}),se.sort())},M=function t(n,a,i){var o=r.panes.byName(i),s=o.render(a,n);return s.setAttribute('style','border: 0.1em solid #444; border-radius: 0.5em'),s},D=function t(n,a){var r=I(n),i=I(a);if(r&&i){if(r=r.toLowerCase(),i=i.toLowerCase(),r>i)return 1;if(r<i)return-1}return n.uri>a.uri?1:n.uri<a.uri?-1:0},P=function t(n){function a(){0<o.length?v.update(o.shift(),[],function(t,r,i){return r?void a():void g('Eror deleting all trace of: '+n+': '+i)}):(console.log('Deleting resoure '+n.doc()),c.fetcher.delete(n.doc()).then(function(){console.log('Delete thing '+n+': complete.')}).catch(function(t){g('Error deleting thing '+n+': '+t)}))}var r=c.statementsMatching(n).concat(c.statementsMatching(void 0,void 0,n)),i={};r.map(function(t){i[t.why.uri]=t});var o=[];for(var s in i)o.push(r.filter(function(t){return t.why.uri===s})),console.log('Deleting '+o[o.length-1].length+' from '+s);a()},O=function t(n,a){n.load(a).then(function(){promises=n.each(a,f.ldp('contains')).map(function(a){return n.holds(a,f.rdf('type'),f.ldp('BasicContainer'))?t(a):deleteFile(a)}),Promise.all(promises).then(function(t){deleteFile(a).then(function(t){})})})},B=function t(n,a){for(var r=c.allAliases(n),o=y.dir().uri,s=0;s<r.length;s++)if(r[s].uri.slice(0,o.length)===o)return r[s];throw new Error('No local URI for '+n)},U=function t(){var n=[],i=0;for(var o in _)if(_[o]){var s=c.each(c.sym(o),f.vcard('hasMember'));n=n.concat(s),i+=1}n.sort(D);for(var a=0;a<n.length-1;)n[a].uri===n[a+1].uri?n.splice(a,1):a++;Q.innerHTML='',J.textContent=5<n.length?''+n.length+' contacts':'contact';for(var l=0;l<n.length;l++){var u=Q.appendChild(d.createElement('tr')),m=u.appendChild(d.createElement('td')),h=u.appendChild(d.createElement('td'));m.setAttribute('style',ie);var g=n[l],w=I(g);m.textContent=w,u.subject=g,r.widgets.makeDraggable(u,g);var v=function n(a,i){r.widgets.deleteButtonWithCheck(d,h,'contact',function(){P(i),t(),re.innerHTML=''}),u.addEventListener('click',function(t){t.preventDefault(),re.innerHTML='loading...';var n=y?B(i):i;r.store.fetcher.nowOrWhenFetched(n.doc(),void 0,function(t,a){return re.innerHTML='',t?void(re.appendChild(M(d,n,'contact')),re.appendChild(d.createElement('br')),re.appendChild(r.widgets.linkIcon(d,n))):b(t,'Can\'t load card: '+n+': '+a)})})};v(u,g)}L()},F=function t(){for(var n=0,a;n<Y.children.length;n++)a=Y.children[n],a.subject&&a.setAttribute('style',_[a.subject.uri]?'background-color: #cce;':'')},q=function t(){var n;R();var a;for(a=0;a<Y.children.length;a++){var i=Y.children[a];i.trashMe=!0}for(var o=0;o<se.length;o++){var s=se[o][1],l=se[o][2];for(n=!1,a=0;a<Y.children.length;a++){var u=Y.children[a];if(u.subject&&u.subject.sameTerm(l)){u.trashMe=!1,n=!0;break}}if(!n){var m=Y.appendChild(d.createElement('tr'));m.subject=l,r.widgets.makeDraggable(m,l),m.setAttribute('style',ie),m.textContent=s;var h=function n(a,i,o){var s=function t(n){n.forEach(function(t){console.log('Dropped on group: '+t);var n=c.sym(t),a=[n.doc(),i.doc()];c.fetcher.load(a).then(function(t){var a=c.findTypeURIs(n);for(var r in a)console.log('    drop object type includes: '+r);if(f.vcard('Individual').uri in a||f.vcard('Organization').uri in a){var s=c.any(n,f.vcard('fn'));if(!s)return alert('No vcard name known for '+n);var d=c.holds(i,f.vcard('hasMember'),n,i.doc());if(d)return alert('ALREADY added '+s+' to group '+o);var l='Add '+s+' to group '+o+'?';if(confirm(l)){var u=[$rdf.st(i,f.vcard('hasMember'),n,i.doc()),$rdf.st(n,f.vcard('fn'),s,i.doc())];c.updater.update([],u,function(t,n,a){return n?void console.log('Added '+s+' to group '+o):g('Error adding member to group '+i+': '+a)})}}}).catch(function(t){g('Error looking up dropped thing '+n+' and group: '+t)})})};r.widgets.makeDropTarget(a,s),r.widgets.deleteButtonWithCheck(d,a,'group '+o,function(){P(i),t()}),a.addEventListener('click',function(t){t.preventDefault();var n=c.sym(i.uri.split('#')[0]);t.metaKey||(_={}),_[i.uri]=!_[i.uri],F(),Q.innerHTML='',c.fetcher.nowOrWhenFetched(n.uri,void 0,function(a,o){if(!a)return b(a,'Can\'t load group file: '+n+': '+o);if(U(),!t.metaKey){re.innerHTML='';var s=!1,l=r.aclControl.ACLControlBox5(i,d,'group',c,function(t,n){t||(re.innerHTML='Failed: '+n)}),u=re.appendChild(d.createElement('button'));u.style.cssText='padding: 1em; margin: 1em';var f=u.appendChild(d.createElement('img'));f.style.cssText='width: 1.5em; height: 1.5em',f.setAttribute('src',r.icons.iconBase+'noun_123691.svg'),u.addEventListener('click',function(){s=!s,s?re.appendChild(l):re.removeChild(l)})}})},!0)};h(m,l,s)}}for(a=0;a<Y.children.length;a++){var y=Y.children[a];y.trashMe&&Y.removeChild(y)}F()},z=d.createElement('table');z.setAttribute('style','border-collapse: collapse; margin-right: 0;'),u.appendChild(z);var H=z.appendChild(d.createElement('tr')),W=z.appendChild(d.createElement('tr')),V=z.appendChild(d.createElement('tr')),G=H.appendChild(d.createElement('td')),J=H.appendChild(d.createElement('td')),K=H.appendChild(d.createElement('td')),X=W.appendChild(d.createElement('td')),Y=X.appendChild(d.createElement('table')),Z=W.appendChild(d.createElement('td')),Q=Z.appendChild(d.createElement('table')),ee=V.appendChild(d.createElement('td')),te=V.appendChild(d.createElement('td')),ne=V.appendChild(d.createElement('td'));K.appendChild(d.createElement('div'));var ae=K.appendChild(d.createElement('input'));ae.setAttribute('type','text'),ae.setAttribute('style','border: 0.1em solid #444; border-radius: 0.5em; width: 100%;'),ae.addEventListener('input',function(t){L()});var re=W.appendChild(d.createElement('td'));re.setAttribute('style','margin: 0;');var ie='padding: 0.1em;';G.textContent='groups',G.setAttribute('style','min-width: 10em; padding-bottom 0.2em;');var oe=function t(n){var a=n?'':'display: none;';G.setAttribute('style','min-width: 10em; padding-bottom 0.2em;'+a);var r='padding: 0.1em;';X.setAttribute('style',r+a),ee.setAttribute('style',r+a)};oe(!0);var se;if(o.foreignGroup&&(_[o.foreignGroup.uri]=!0),y){var de=G.appendChild(d.createElement('button'));de.textContent='All';var le='margin-left: 1em; font-size: 100%;';de.setAttribute('style',le),de.addEventListener('click',function(t){de.state=de.state?0:1,Q.innerHTML='',de.state?(de.setAttribute('style',le+'background-color: #ff8;'),j(_,Y,function(t,n){return t?void(de.setAttribute('style',le+'background-color: black; color: white'),F()):g(n)})):(de.setAttribute('style',le+'background-color: #cfc;'),_={},F())}),r.store.fetcher.nowOrWhenFetched(x.uri,y,function(t,n){return t?void(q(),U()):console.log('Cannot load group index: '+n)})}else q(),U(),console.log('No book, only one group -> hide list of groups'),oe(!1);J.textContent='name',J.setAttribute('style','min-width: 18em;'),Z.setAttribute('style','overflow:scroll;');var pe=d.createElement('button'),ce=d.createElement('div');if(pe.setAttribute('type','button'),t||pe.setAttribute('disabled','true'),r.authn.checkUser().then(function(n){n&&(t=n,pe.removeAttribute('disabled'))}),ce.appendChild(pe),pe.innerHTML='New Contact',te.appendChild(ce),pe.addEventListener('click',function(t){re.innerHTML='';var n=E(y);c.fetcher.load(n).then(function(t){if(!t.ok)throw new Error('Book won\'t load:'+n);var a=c.any(n,f.vcard('nameEmailIndex'));if(!a)throw new Error('Wot no nameEmailIndex?');return c.fetcher.load(a)}).then(function(t){console.log('Name index loaded async'+t.url)}),re.appendChild(S(d,c,'Contact',function(t,n){t&&T(y,n,_,function(t,n){t?(re.innerHTML='',U(),re.appendChild(M(d,n,'contact'))):console.log('Error: can\'t save new contact:'+n)})}))},!1),y){var ue=ee.appendChild(d.createElement('button'));ue.setAttribute('type','button'),ue.innerHTML='New Group',ue.addEventListener('click',function(t){re.innerHTML='';var n=c.any(y,f.vcard('groupIndex'));r.store.fetcher.nowOrWhenFetched(n,void 0,function(t,n){t?console.log(' Group index has been loaded\n'):console.log('Error: Group index has NOT been loaded'+n+'\n')}),re.appendChild(S(d,c,'Group',function(t,n){t&&A(y,n,function(t,n){t?(_={},_[n.uri]=!0,q(),re.innerHTML='',re.appendChild(r.aclControl.ACLControlBox5(n,d,'group',c,function(t,n){t||(re.innerHTML='Group sharing setup failed: '+n)}))):(console.log('Error: can\'t save new group:'+n),re.innerHTML='Failed to save group'+n)})}))},!1);var fe=ne.appendChild(d.createElement('button'));fe.setAttribute('type','button'),fe.innerHTML='Tools',fe.addEventListener('click',function(n){re.innerHTML='',re.appendChild(s(j,_,Y,y,d,t))})}ne.appendChild(w(y)),u.appendChild(d.createElement('hr'))},T=function t(o){var s=o,n=function t(n){c.fetcher.nowOrWhenFetched(n.doc(),function(t,a){if(!t)console.log('Error looking up dropped thing '+n+': '+a);else{var r=c.findTypeURIs(n);for(var i in r)console.log('    drop object type includes: '+i);console.log('Default: assume web page  '+n),c.add(s,f.wf('attachment'),n,s.doc())}})},l=function t(a,r,d){var l=i.extension(r);r!==i.lookup(a)&&(a+='_.'+l,console.log('MIME TYPE MISMATCH -- adding extension: '+a));var u,m,h;r.startsWith('image')?(u='image_',m=f.vcard('hasPhoto'),h=!0):(u='attachment_',m=f.wf('attachment'),h=!1);var b,n;for(b=0;;b++){if(n=c.sym(s.dir().uri+a),!c.holds(o,f.vcard('hasPhoto'),n))break;a=u+b+'.'+l}c.add(o,m,n,o.doc()),console.log('Putting '+d.length+' bytes of '+r+' to '+n),c.fetcher.webOperation('PUT',n,{data:d,contentType:r}).then(function(t){return t.ok?(console.log(' Upload: put OK: '+n),c.fetcher.putBack(o.doc())):void g('Error uploading '+n+':'+t.status)}).then(function(){h&&_.setAttribute('src',n.uri)}).catch(function(t){console.log(' Upload: FAIL '+n+', Error: '+t)})},h=function t(a){a.map(function(t){var a=$rdf.sym(t);return(console.log('Dropped on mugshot thing '+a),t.startsWith('http')&&0>t.indexOf('#'))?void c.fetcher.webOperation('GET',a.uri).then(function(t){var n=t.headers.get('Content-Type'),r=a.uri.split('/').slice(-1)[0];r=r.split('?')[0],t.arrayBuffer().then(function(i){return t.ok?void l(r,n,i):void g('Error downloading '+a+':'+t.status)})}):void(console.log('Not a web document URI, cannot copy as picture: '+a),n(a))})},y=function t(n){for(var a=0,r;a<n.length;a++){r=n[a],console.log(' meeting: Filename: '+r.name+', type: '+(r.type||'n/a')+' size: '+r.size+' bytes, last modified: '+(r.lastModifiedDate?r.lastModifiedDate.toLocaleDateString():'n/a'));var i=new FileReader;i.onload=function(t){return function(n){var a=n.target.result;console.log(' File read byteLength : '+a.byteLength);var r=encodeURIComponent(t.name),i=t.type;l(r,i,a)}}(r),i.readAsArrayBuffer(r)}},w=c.sym('https://linkeddata.github.io/solid-app-set/contact/individualForm.ttl#form1'),v=w.doc(),_;if(!c.holds(void 0,void 0,void 0,v)){var x=a(475);$rdf.parse(x,c,v.uri,'text/turtle')}var k=r.ns.vcard('Type').doc();c.holds(void 0,void 0,void 0,k)||$rdf.parse(a(476),c,k.uri,'text/turtle');var C=[o.doc()];r.store.fetcher.load(C).catch(function(t){console.log('Error: Failed to load form or ontology: '+t)}).then(function(t){var n=function t(){var n=c.findTypeURIs(o),a='padding: 0.5em 1.5em 1em 1.5em; ',r=null;for(var i in n)if(r=c.any(c.sym(i),c.sym('http://www.w3.org/ns/ui#backgroundColor')),r)break;r=r?r.value:'#fff',a+='background-color: '+r+'; ',u.setAttribute('style',a)};n(),r.authn.checkUser(),_=u.appendChild(d.createElement('img')),_.setAttribute('style','max-height: 10em; border-radius: 1em; margin: 0.7em;'),r.widgets.setImage(_,o),r.widgets.makeDropTarget(_,h,y),r.widgets.appendForm(d,u,{},o,w,m,b),u.appendChild(d.createElement('tr')).setAttribute('style','height: 1em');var a=function t(n,a,i){var o=s.appendChild(n.createElement('tr'));o.setAttribute('style','margin-top: 0.1em solid #ccc;');var d=o.appendChild(n.createElement('td')),l=o.appendChild(n.createElement('td'));d.textContent=i.uri.split('/')[2],c.fetcher.load(i).then(function(t){d.textContent=i.uri.split('/')[2]+' ('+c.statementsMatching(void 0,void 0,void 0,i.doc()).length+')'}).catch(function(t){l.appendChild(r.widgets.errorMessageBlock(n,t,'pink'))}),l.appendChild(r.widgets.linkIcon(n,i))},s=u.appendChild(d.createElement('table')),l=c.allAliases(o);if(1<l.length)for(var g=0,i;g<l.length;g++)i=l[g],i.sameTerm(o)||a(d,s,i);r.widgets.attachmentList(d,o,u,{predicate:r.ns.vcard('url')}),u.appendChild(d.createElement('hr'));var v=c.each(o,f.vcard('url'));v.forEach(function(t){var n=c.any(t,f.rdf('type')),a=c.any(t,f.vcard('value'));if(a){var i=s.appendChild(d.createElement('tr'));i.setAttribute('style','margin-top: 0.1em solid #ccc;');var o=i.appendChild(d.createElement('td'));o.textContent=r.utils.label(n);var l=i.appendChild(d.createElement('td')),u=l.appendChild(d.createElement('a'));u.setAttribute('href',a.uri);var m=u.appendChild(d.createElement('span'));m.textContent=a.uri}});var x=r.widgets.deleteButtonWithCheck(d,u,'contact',function(){confirm('Delete this contact?')&&(deleteThing(o),console.log('Deleteing a contect... @@ fix me'),refreshNames(),cardMain.innerHTML='')});x.style='height: 2em;'})};return x[f.vcard('Individual').uri]||x[f.vcard('Organization').uri]||x[f.foaf('Person').uri]?T(o):x[f.vcard('Group').uri]?r.authn.findAppInstances(_,f.vcard('AddressBook')).then(function(t){var n=t.instances,a={foreignGroup:o};0<n.length?C(n,t,a):C([],t,a)}).catch(function(t){r.widgets.complain(_,t)}):x[f.vcard('AddressBook').uri]?C([o],_,{}):console.log('Error: Contact pane: No evidence that '+o+' is anything to do with contacts.'),t=r.authn.currentUser(),t||console.log('(You do not have your Web Id set. Sign in or sign up to make changes.)'),'webapp'===tabulator.mode&&'undefined'!=typeof document&&document.location&&'http://localhost'===(''+document.location).slice(0,16)&&(t=c.any(o,r.ns.acl('owner')),console.log('Assuming user is '+t)),u}}},function(t,n,a){t.exports=a(472)},function(t,n){t.exports={"application/1d-interleaved-parityfec":{source:'iana'},"application/3gpdash-qoe-report+xml":{source:'iana'},"application/3gpp-ims+xml":{source:'iana'},"application/a2l":{source:'iana'},"application/activemessage":{source:'iana'},"application/alto-costmap+json":{source:'iana',compressible:!0},"application/alto-costmapfilter+json":{source:'iana',compressible:!0},"application/alto-directory+json":{source:'iana',compressible:!0},"application/alto-endpointcost+json":{source:'iana',compressible:!0},"application/alto-endpointcostparams+json":{source:'iana',compressible:!0},"application/alto-endpointprop+json":{source:'iana',compressible:!0},"application/alto-endpointpropparams+json":{source:'iana',compressible:!0},"application/alto-error+json":{source:'iana',compressible:!0},"application/alto-networkmap+json":{source:'iana',compressible:!0},"application/alto-networkmapfilter+json":{source:'iana',compressible:!0},"application/aml":{source:'iana'},"application/andrew-inset":{source:'iana',extensions:['ez']},"application/applefile":{source:'iana'},"application/applixware":{source:'apache',extensions:['aw']},"application/atf":{source:'iana'},"application/atfx":{source:'iana'},"application/atom+xml":{source:'iana',compressible:!0,extensions:['atom']},"application/atomcat+xml":{source:'iana',extensions:['atomcat']},"application/atomdeleted+xml":{source:'iana'},"application/atomicmail":{source:'iana'},"application/atomsvc+xml":{source:'iana',extensions:['atomsvc']},"application/atxml":{source:'iana'},"application/auth-policy+xml":{source:'iana'},"application/bacnet-xdd+zip":{source:'iana'},"application/batch-smtp":{source:'iana'},"application/bdoc":{compressible:!1,extensions:['bdoc']},"application/beep+xml":{source:'iana'},"application/calendar+json":{source:'iana',compressible:!0},"application/calendar+xml":{source:'iana'},"application/call-completion":{source:'iana'},"application/cals-1840":{source:'iana'},"application/cbor":{source:'iana'},"application/cccex":{source:'iana'},"application/ccmp+xml":{source:'iana'},"application/ccxml+xml":{source:'iana',extensions:['ccxml']},"application/cdfx+xml":{source:'iana'},"application/cdmi-capability":{source:'iana',extensions:['cdmia']},"application/cdmi-container":{source:'iana',extensions:['cdmic']},"application/cdmi-domain":{source:'iana',extensions:['cdmid']},"application/cdmi-object":{source:'iana',extensions:['cdmio']},"application/cdmi-queue":{source:'iana',extensions:['cdmiq']},"application/cdni":{source:'iana'},"application/cea":{source:'iana'},"application/cea-2018+xml":{source:'iana'},"application/cellml+xml":{source:'iana'},"application/cfw":{source:'iana'},"application/clue_info+xml":{source:'iana'},"application/cms":{source:'iana'},"application/cnrp+xml":{source:'iana'},"application/coap-group+json":{source:'iana',compressible:!0},"application/coap-payload":{source:'iana'},"application/commonground":{source:'iana'},"application/conference-info+xml":{source:'iana'},"application/cose":{source:'iana'},"application/cose-key":{source:'iana'},"application/cose-key-set":{source:'iana'},"application/cpl+xml":{source:'iana'},"application/csrattrs":{source:'iana'},"application/csta+xml":{source:'iana'},"application/cstadata+xml":{source:'iana'},"application/csvm+json":{source:'iana',compressible:!0},"application/cu-seeme":{source:'apache',extensions:['cu']},"application/cybercash":{source:'iana'},"application/dart":{compressible:!0},"application/dash+xml":{source:'iana',extensions:['mpd']},"application/dashdelta":{source:'iana'},"application/davmount+xml":{source:'iana',extensions:['davmount']},"application/dca-rft":{source:'iana'},"application/dcd":{source:'iana'},"application/dec-dx":{source:'iana'},"application/dialog-info+xml":{source:'iana'},"application/dicom":{source:'iana'},"application/dicom+json":{source:'iana',compressible:!0},"application/dicom+xml":{source:'iana'},"application/dii":{source:'iana'},"application/dit":{source:'iana'},"application/dns":{source:'iana'},"application/docbook+xml":{source:'apache',extensions:['dbk']},"application/dskpp+xml":{source:'iana'},"application/dssc+der":{source:'iana',extensions:['dssc']},"application/dssc+xml":{source:'iana',extensions:['xdssc']},"application/dvcs":{source:'iana'},"application/ecmascript":{source:'iana',compressible:!0,extensions:['ecma']},"application/edi-consent":{source:'iana'},"application/edi-x12":{source:'iana',compressible:!1},"application/edifact":{source:'iana',compressible:!1},"application/efi":{source:'iana'},"application/emergencycalldata.comment+xml":{source:'iana'},"application/emergencycalldata.control+xml":{source:'iana'},"application/emergencycalldata.deviceinfo+xml":{source:'iana'},"application/emergencycalldata.ecall.msd":{source:'iana'},"application/emergencycalldata.providerinfo+xml":{source:'iana'},"application/emergencycalldata.serviceinfo+xml":{source:'iana'},"application/emergencycalldata.subscriberinfo+xml":{source:'iana'},"application/emergencycalldata.veds+xml":{source:'iana'},"application/emma+xml":{source:'iana',extensions:['emma']},"application/emotionml+xml":{source:'iana'},"application/encaprtp":{source:'iana'},"application/epp+xml":{source:'iana'},"application/epub+zip":{source:'iana',extensions:['epub']},"application/eshop":{source:'iana'},"application/exi":{source:'iana',extensions:['exi']},"application/fastinfoset":{source:'iana'},"application/fastsoap":{source:'iana'},"application/fdt+xml":{source:'iana'},"application/fhir+xml":{source:'iana'},"application/fido.trusted-apps+json":{compressible:!0},"application/fits":{source:'iana'},"application/font-sfnt":{source:'iana'},"application/font-tdpfr":{source:'iana',extensions:['pfr']},"application/font-woff":{source:'iana',compressible:!1,extensions:['woff']},"application/framework-attributes+xml":{source:'iana'},"application/geo+json":{source:'iana',compressible:!0,extensions:['geojson']},"application/geo+json-seq":{source:'iana'},"application/geoxacml+xml":{source:'iana'},"application/gml+xml":{source:'iana',extensions:['gml']},"application/gpx+xml":{source:'apache',extensions:['gpx']},"application/gxf":{source:'apache',extensions:['gxf']},"application/gzip":{source:'iana',compressible:!1,extensions:['gz']},"application/h224":{source:'iana'},"application/held+xml":{source:'iana'},"application/hjson":{extensions:['hjson']},"application/http":{source:'iana'},"application/hyperstudio":{source:'iana',extensions:['stk']},"application/ibe-key-request+xml":{source:'iana'},"application/ibe-pkg-reply+xml":{source:'iana'},"application/ibe-pp-data":{source:'iana'},"application/iges":{source:'iana'},"application/im-iscomposing+xml":{source:'iana'},"application/index":{source:'iana'},"application/index.cmd":{source:'iana'},"application/index.obj":{source:'iana'},"application/index.response":{source:'iana'},"application/index.vnd":{source:'iana'},"application/inkml+xml":{source:'iana',extensions:['ink','inkml']},"application/iotp":{source:'iana'},"application/ipfix":{source:'iana',extensions:['ipfix']},"application/ipp":{source:'iana'},"application/isup":{source:'iana'},"application/its+xml":{source:'iana'},"application/java-archive":{source:'apache',compressible:!1,extensions:['jar','war','ear']},"application/java-serialized-object":{source:'apache',compressible:!1,extensions:['ser']},"application/java-vm":{source:'apache',compressible:!1,extensions:['class']},"application/javascript":{source:'iana',charset:'UTF-8',compressible:!0,extensions:['js','mjs']},"application/jf2feed+json":{source:'iana',compressible:!0},"application/jose":{source:'iana'},"application/jose+json":{source:'iana',compressible:!0},"application/jrd+json":{source:'iana',compressible:!0},"application/json":{source:'iana',charset:'UTF-8',compressible:!0,extensions:['json','map']},"application/json-patch+json":{source:'iana',compressible:!0},"application/json-seq":{source:'iana'},"application/json5":{extensions:['json5']},"application/jsonml+json":{source:'apache',compressible:!0,extensions:['jsonml']},"application/jwk+json":{source:'iana',compressible:!0},"application/jwk-set+json":{source:'iana',compressible:!0},"application/jwt":{source:'iana'},"application/kpml-request+xml":{source:'iana'},"application/kpml-response+xml":{source:'iana'},"application/ld+json":{source:'iana',compressible:!0,extensions:['jsonld']},"application/lgr+xml":{source:'iana'},"application/link-format":{source:'iana'},"application/load-control+xml":{source:'iana'},"application/lost+xml":{source:'iana',extensions:['lostxml']},"application/lostsync+xml":{source:'iana'},"application/lxf":{source:'iana'},"application/mac-binhex40":{source:'iana',extensions:['hqx']},"application/mac-compactpro":{source:'apache',extensions:['cpt']},"application/macwriteii":{source:'iana'},"application/mads+xml":{source:'iana',extensions:['mads']},"application/manifest+json":{charset:'UTF-8',compressible:!0,extensions:['webmanifest']},"application/marc":{source:'iana',extensions:['mrc']},"application/marcxml+xml":{source:'iana',extensions:['mrcx']},"application/mathematica":{source:'iana',extensions:['ma','nb','mb']},"application/mathml+xml":{source:'iana',extensions:['mathml']},"application/mathml-content+xml":{source:'iana'},"application/mathml-presentation+xml":{source:'iana'},"application/mbms-associated-procedure-description+xml":{source:'iana'},"application/mbms-deregister+xml":{source:'iana'},"application/mbms-envelope+xml":{source:'iana'},"application/mbms-msk+xml":{source:'iana'},"application/mbms-msk-response+xml":{source:'iana'},"application/mbms-protection-description+xml":{source:'iana'},"application/mbms-reception-report+xml":{source:'iana'},"application/mbms-register+xml":{source:'iana'},"application/mbms-register-response+xml":{source:'iana'},"application/mbms-schedule+xml":{source:'iana'},"application/mbms-user-service-description+xml":{source:'iana'},"application/mbox":{source:'iana',extensions:['mbox']},"application/media-policy-dataset+xml":{source:'iana'},"application/media_control+xml":{source:'iana'},"application/mediaservercontrol+xml":{source:'iana',extensions:['mscml']},"application/merge-patch+json":{source:'iana',compressible:!0},"application/metalink+xml":{source:'apache',extensions:['metalink']},"application/metalink4+xml":{source:'iana',extensions:['meta4']},"application/mets+xml":{source:'iana',extensions:['mets']},"application/mf4":{source:'iana'},"application/mikey":{source:'iana'},"application/mmt-usd+xml":{source:'iana'},"application/mods+xml":{source:'iana',extensions:['mods']},"application/moss-keys":{source:'iana'},"application/moss-signature":{source:'iana'},"application/mosskey-data":{source:'iana'},"application/mosskey-request":{source:'iana'},"application/mp21":{source:'iana',extensions:['m21','mp21']},"application/mp4":{source:'iana',extensions:['mp4s','m4p']},"application/mpeg4-generic":{source:'iana'},"application/mpeg4-iod":{source:'iana'},"application/mpeg4-iod-xmt":{source:'iana'},"application/mrb-consumer+xml":{source:'iana'},"application/mrb-publish+xml":{source:'iana'},"application/msc-ivr+xml":{source:'iana'},"application/msc-mixer+xml":{source:'iana'},"application/msword":{source:'iana',compressible:!1,extensions:['doc','dot']},"application/mud+json":{source:'iana',compressible:!0},"application/mxf":{source:'iana',extensions:['mxf']},"application/n-quads":{source:'iana'},"application/n-triples":{source:'iana'},"application/nasdata":{source:'iana'},"application/news-checkgroups":{source:'iana'},"application/news-groupinfo":{source:'iana'},"application/news-transmission":{source:'iana'},"application/nlsml+xml":{source:'iana'},"application/node":{source:'iana'},"application/nss":{source:'iana'},"application/ocsp-request":{source:'iana'},"application/ocsp-response":{source:'iana'},"application/octet-stream":{source:'iana',compressible:!1,extensions:['bin','dms','lrf','mar','so','dist','distz','pkg','bpk','dump','elc','deploy','exe','dll','deb','dmg','iso','img','msi','msp','msm','buffer']},"application/oda":{source:'iana',extensions:['oda']},"application/odx":{source:'iana'},"application/oebps-package+xml":{source:'iana',extensions:['opf']},"application/ogg":{source:'iana',compressible:!1,extensions:['ogx']},"application/omdoc+xml":{source:'apache',extensions:['omdoc']},"application/onenote":{source:'apache',extensions:['onetoc','onetoc2','onetmp','onepkg']},"application/oxps":{source:'iana',extensions:['oxps']},"application/p2p-overlay+xml":{source:'iana'},"application/parityfec":{source:'iana'},"application/passport":{source:'iana'},"application/patch-ops-error+xml":{source:'iana',extensions:['xer']},"application/pdf":{source:'iana',compressible:!1,extensions:['pdf']},"application/pdx":{source:'iana'},"application/pgp-encrypted":{source:'iana',compressible:!1,extensions:['pgp']},"application/pgp-keys":{source:'iana'},"application/pgp-signature":{source:'iana',extensions:['asc','sig']},"application/pics-rules":{source:'apache',extensions:['prf']},"application/pidf+xml":{source:'iana'},"application/pidf-diff+xml":{source:'iana'},"application/pkcs10":{source:'iana',extensions:['p10']},"application/pkcs12":{source:'iana'},"application/pkcs7-mime":{source:'iana',extensions:['p7m','p7c']},"application/pkcs7-signature":{source:'iana',extensions:['p7s']},"application/pkcs8":{source:'iana',extensions:['p8']},"application/pkcs8-encrypted":{source:'iana'},"application/pkix-attr-cert":{source:'iana',extensions:['ac']},"application/pkix-cert":{source:'iana',extensions:['cer']},"application/pkix-crl":{source:'iana',extensions:['crl']},"application/pkix-pkipath":{source:'iana',extensions:['pkipath']},"application/pkixcmp":{source:'iana',extensions:['pki']},"application/pls+xml":{source:'iana',extensions:['pls']},"application/poc-settings+xml":{source:'iana'},"application/postscript":{source:'iana',compressible:!0,extensions:['ai','eps','ps']},"application/ppsp-tracker+json":{source:'iana',compressible:!0},"application/problem+json":{source:'iana',compressible:!0},"application/problem+xml":{source:'iana'},"application/provenance+xml":{source:'iana'},"application/prs.alvestrand.titrax-sheet":{source:'iana'},"application/prs.cww":{source:'iana',extensions:['cww']},"application/prs.hpub+zip":{source:'iana'},"application/prs.nprend":{source:'iana'},"application/prs.plucker":{source:'iana'},"application/prs.rdf-xml-crypt":{source:'iana'},"application/prs.xsf+xml":{source:'iana'},"application/pskc+xml":{source:'iana',extensions:['pskcxml']},"application/qsig":{source:'iana'},"application/raml+yaml":{compressible:!0,extensions:['raml']},"application/raptorfec":{source:'iana'},"application/rdap+json":{source:'iana',compressible:!0},"application/rdf+xml":{source:'iana',compressible:!0,extensions:['rdf']},"application/reginfo+xml":{source:'iana',extensions:['rif']},"application/relax-ng-compact-syntax":{source:'iana',extensions:['rnc']},"application/remote-printing":{source:'iana'},"application/reputon+json":{source:'iana',compressible:!0},"application/resource-lists+xml":{source:'iana',extensions:['rl']},"application/resource-lists-diff+xml":{source:'iana',extensions:['rld']},"application/rfc+xml":{source:'iana'},"application/riscos":{source:'iana'},"application/rlmi+xml":{source:'iana'},"application/rls-services+xml":{source:'iana',extensions:['rs']},"application/route-apd+xml":{source:'iana'},"application/route-s-tsid+xml":{source:'iana'},"application/route-usd+xml":{source:'iana'},"application/rpki-ghostbusters":{source:'iana',extensions:['gbr']},"application/rpki-manifest":{source:'iana',extensions:['mft']},"application/rpki-publication":{source:'iana'},"application/rpki-roa":{source:'iana',extensions:['roa']},"application/rpki-updown":{source:'iana'},"application/rsd+xml":{source:'apache',extensions:['rsd']},"application/rss+xml":{source:'apache',compressible:!0,extensions:['rss']},"application/rtf":{source:'iana',compressible:!0,extensions:['rtf']},"application/rtploopback":{source:'iana'},"application/rtx":{source:'iana'},"application/samlassertion+xml":{source:'iana'},"application/samlmetadata+xml":{source:'iana'},"application/sbml+xml":{source:'iana',extensions:['sbml']},"application/scaip+xml":{source:'iana'},"application/scim+json":{source:'iana',compressible:!0},"application/scvp-cv-request":{source:'iana',extensions:['scq']},"application/scvp-cv-response":{source:'iana',extensions:['scs']},"application/scvp-vp-request":{source:'iana',extensions:['spq']},"application/scvp-vp-response":{source:'iana',extensions:['spp']},"application/sdp":{source:'iana',extensions:['sdp']},"application/sep+xml":{source:'iana'},"application/sep-exi":{source:'iana'},"application/session-info":{source:'iana'},"application/set-payment":{source:'iana'},"application/set-payment-initiation":{source:'iana',extensions:['setpay']},"application/set-registration":{source:'iana'},"application/set-registration-initiation":{source:'iana',extensions:['setreg']},"application/sgml":{source:'iana'},"application/sgml-open-catalog":{source:'iana'},"application/shf+xml":{source:'iana',extensions:['shf']},"application/sieve":{source:'iana'},"application/simple-filter+xml":{source:'iana'},"application/simple-message-summary":{source:'iana'},"application/simplesymbolcontainer":{source:'iana'},"application/slate":{source:'iana'},"application/smil":{source:'iana'},"application/smil+xml":{source:'iana',extensions:['smi','smil']},"application/smpte336m":{source:'iana'},"application/soap+fastinfoset":{source:'iana'},"application/soap+xml":{source:'iana',compressible:!0},"application/sparql-query":{source:'iana',extensions:['rq']},"application/sparql-results+xml":{source:'iana',extensions:['srx']},"application/spirits-event+xml":{source:'iana'},"application/sql":{source:'iana'},"application/srgs":{source:'iana',extensions:['gram']},"application/srgs+xml":{source:'iana',extensions:['grxml']},"application/sru+xml":{source:'iana',extensions:['sru']},"application/ssdl+xml":{source:'apache',extensions:['ssdl']},"application/ssml+xml":{source:'iana',extensions:['ssml']},"application/tamp-apex-update":{source:'iana'},"application/tamp-apex-update-confirm":{source:'iana'},"application/tamp-community-update":{source:'iana'},"application/tamp-community-update-confirm":{source:'iana'},"application/tamp-error":{source:'iana'},"application/tamp-sequence-adjust":{source:'iana'},"application/tamp-sequence-adjust-confirm":{source:'iana'},"application/tamp-status-query":{source:'iana'},"application/tamp-status-response":{source:'iana'},"application/tamp-update":{source:'iana'},"application/tamp-update-confirm":{source:'iana'},"application/tar":{compressible:!0},"application/tei+xml":{source:'iana',extensions:['tei','teicorpus']},"application/thraud+xml":{source:'iana',extensions:['tfi']},"application/timestamp-query":{source:'iana'},"application/timestamp-reply":{source:'iana'},"application/timestamped-data":{source:'iana',extensions:['tsd']},"application/tnauthlist":{source:'iana'},"application/trig":{source:'iana'},"application/ttml+xml":{source:'iana'},"application/tve-trigger":{source:'iana'},"application/ulpfec":{source:'iana'},"application/urc-grpsheet+xml":{source:'iana'},"application/urc-ressheet+xml":{source:'iana'},"application/urc-targetdesc+xml":{source:'iana'},"application/urc-uisocketdesc+xml":{source:'iana'},"application/vcard+json":{source:'iana',compressible:!0},"application/vcard+xml":{source:'iana'},"application/vemmi":{source:'iana'},"application/vividence.scriptfile":{source:'apache'},"application/vnd.1000minds.decision-model+xml":{source:'iana'},"application/vnd.3gpp-prose+xml":{source:'iana'},"application/vnd.3gpp-prose-pc3ch+xml":{source:'iana'},"application/vnd.3gpp-v2x-local-service-information":{source:'iana'},"application/vnd.3gpp.access-transfer-events+xml":{source:'iana'},"application/vnd.3gpp.bsf+xml":{source:'iana'},"application/vnd.3gpp.gmop+xml":{source:'iana'},"application/vnd.3gpp.mcptt-affiliation-command+xml":{source:'iana'},"application/vnd.3gpp.mcptt-floor-request+xml":{source:'iana'},"application/vnd.3gpp.mcptt-info+xml":{source:'iana'},"application/vnd.3gpp.mcptt-location-info+xml":{source:'iana'},"application/vnd.3gpp.mcptt-mbms-usage-info+xml":{source:'iana'},"application/vnd.3gpp.mcptt-signed+xml":{source:'iana'},"application/vnd.3gpp.mid-call+xml":{source:'iana'},"application/vnd.3gpp.pic-bw-large":{source:'iana',extensions:['plb']},"application/vnd.3gpp.pic-bw-small":{source:'iana',extensions:['psb']},"application/vnd.3gpp.pic-bw-var":{source:'iana',extensions:['pvb']},"application/vnd.3gpp.sms":{source:'iana'},"application/vnd.3gpp.sms+xml":{source:'iana'},"application/vnd.3gpp.srvcc-ext+xml":{source:'iana'},"application/vnd.3gpp.srvcc-info+xml":{source:'iana'},"application/vnd.3gpp.state-and-event-info+xml":{source:'iana'},"application/vnd.3gpp.ussd+xml":{source:'iana'},"application/vnd.3gpp2.bcmcsinfo+xml":{source:'iana'},"application/vnd.3gpp2.sms":{source:'iana'},"application/vnd.3gpp2.tcap":{source:'iana',extensions:['tcap']},"application/vnd.3lightssoftware.imagescal":{source:'iana'},"application/vnd.3m.post-it-notes":{source:'iana',extensions:['pwn']},"application/vnd.accpac.simply.aso":{source:'iana',extensions:['aso']},"application/vnd.accpac.simply.imp":{source:'iana',extensions:['imp']},"application/vnd.acucobol":{source:'iana',extensions:['acu']},"application/vnd.acucorp":{source:'iana',extensions:['atc','acutc']},"application/vnd.adobe.air-application-installer-package+zip":{source:'apache',extensions:['air']},"application/vnd.adobe.flash.movie":{source:'iana'},"application/vnd.adobe.formscentral.fcdt":{source:'iana',extensions:['fcdt']},"application/vnd.adobe.fxp":{source:'iana',extensions:['fxp','fxpl']},"application/vnd.adobe.partial-upload":{source:'iana'},"application/vnd.adobe.xdp+xml":{source:'iana',extensions:['xdp']},"application/vnd.adobe.xfdf":{source:'iana',extensions:['xfdf']},"application/vnd.aether.imp":{source:'iana'},"application/vnd.ah-barcode":{source:'iana'},"application/vnd.ahead.space":{source:'iana',extensions:['ahead']},"application/vnd.airzip.filesecure.azf":{source:'iana',extensions:['azf']},"application/vnd.airzip.filesecure.azs":{source:'iana',extensions:['azs']},"application/vnd.amadeus+json":{source:'iana',compressible:!0},"application/vnd.amazon.ebook":{source:'apache',extensions:['azw']},"application/vnd.amazon.mobi8-ebook":{source:'iana'},"application/vnd.americandynamics.acc":{source:'iana',extensions:['acc']},"application/vnd.amiga.ami":{source:'iana',extensions:['ami']},"application/vnd.amundsen.maze+xml":{source:'iana'},"application/vnd.android.package-archive":{source:'apache',compressible:!1,extensions:['apk']},"application/vnd.anki":{source:'iana'},"application/vnd.anser-web-certificate-issue-initiation":{source:'iana',extensions:['cii']},"application/vnd.anser-web-funds-transfer-initiation":{source:'apache',extensions:['fti']},"application/vnd.antix.game-component":{source:'iana',extensions:['atx']},"application/vnd.apache.thrift.binary":{source:'iana'},"application/vnd.apache.thrift.compact":{source:'iana'},"application/vnd.apache.thrift.json":{source:'iana'},"application/vnd.api+json":{source:'iana',compressible:!0},"application/vnd.apothekende.reservation+json":{source:'iana',compressible:!0},"application/vnd.apple.installer+xml":{source:'iana',extensions:['mpkg']},"application/vnd.apple.mpegurl":{source:'iana',extensions:['m3u8']},"application/vnd.apple.pkpass":{compressible:!1,extensions:['pkpass']},"application/vnd.arastra.swi":{source:'iana'},"application/vnd.aristanetworks.swi":{source:'iana',extensions:['swi']},"application/vnd.artsquare":{source:'iana'},"application/vnd.astraea-software.iota":{source:'iana',extensions:['iota']},"application/vnd.audiograph":{source:'iana',extensions:['aep']},"application/vnd.autopackage":{source:'iana'},"application/vnd.avalon+json":{source:'iana',compressible:!0},"application/vnd.avistar+xml":{source:'iana'},"application/vnd.balsamiq.bmml+xml":{source:'iana'},"application/vnd.balsamiq.bmpr":{source:'iana'},"application/vnd.bbf.usp.msg":{source:'iana'},"application/vnd.bbf.usp.msg+json":{source:'iana',compressible:!0},"application/vnd.bekitzur-stech+json":{source:'iana',compressible:!0},"application/vnd.bint.med-content":{source:'iana'},"application/vnd.biopax.rdf+xml":{source:'iana'},"application/vnd.blink-idb-value-wrapper":{source:'iana'},"application/vnd.blueice.multipass":{source:'iana',extensions:['mpm']},"application/vnd.bluetooth.ep.oob":{source:'iana'},"application/vnd.bluetooth.le.oob":{source:'iana'},"application/vnd.bmi":{source:'iana',extensions:['bmi']},"application/vnd.businessobjects":{source:'iana',extensions:['rep']},"application/vnd.cab-jscript":{source:'iana'},"application/vnd.canon-cpdl":{source:'iana'},"application/vnd.canon-lips":{source:'iana'},"application/vnd.capasystems-pg+json":{source:'iana',compressible:!0},"application/vnd.cendio.thinlinc.clientconf":{source:'iana'},"application/vnd.century-systems.tcp_stream":{source:'iana'},"application/vnd.chemdraw+xml":{source:'iana',extensions:['cdxml']},"application/vnd.chess-pgn":{source:'iana'},"application/vnd.chipnuts.karaoke-mmd":{source:'iana',extensions:['mmd']},"application/vnd.cinderella":{source:'iana',extensions:['cdy']},"application/vnd.cirpack.isdn-ext":{source:'iana'},"application/vnd.citationstyles.style+xml":{source:'iana'},"application/vnd.claymore":{source:'iana',extensions:['cla']},"application/vnd.cloanto.rp9":{source:'iana',extensions:['rp9']},"application/vnd.clonk.c4group":{source:'iana',extensions:['c4g','c4d','c4f','c4p','c4u']},"application/vnd.cluetrust.cartomobile-config":{source:'iana',extensions:['c11amc']},"application/vnd.cluetrust.cartomobile-config-pkg":{source:'iana',extensions:['c11amz']},"application/vnd.coffeescript":{source:'iana'},"application/vnd.collabio.xodocuments.document":{source:'iana'},"application/vnd.collabio.xodocuments.document-template":{source:'iana'},"application/vnd.collabio.xodocuments.presentation":{source:'iana'},"application/vnd.collabio.xodocuments.presentation-template":{source:'iana'},"application/vnd.collabio.xodocuments.spreadsheet":{source:'iana'},"application/vnd.collabio.xodocuments.spreadsheet-template":{source:'iana'},"application/vnd.collection+json":{source:'iana',compressible:!0},"application/vnd.collection.doc+json":{source:'iana',compressible:!0},"application/vnd.collection.next+json":{source:'iana',compressible:!0},"application/vnd.comicbook+zip":{source:'iana'},"application/vnd.comicbook-rar":{source:'iana'},"application/vnd.commerce-battelle":{source:'iana'},"application/vnd.commonspace":{source:'iana',extensions:['csp']},"application/vnd.contact.cmsg":{source:'iana',extensions:['cdbcmsg']},"application/vnd.coreos.ignition+json":{source:'iana',compressible:!0},"application/vnd.cosmocaller":{source:'iana',extensions:['cmc']},"application/vnd.crick.clicker":{source:'iana',extensions:['clkx']},"application/vnd.crick.clicker.keyboard":{source:'iana',extensions:['clkk']},"application/vnd.crick.clicker.palette":{source:'iana',extensions:['clkp']},"application/vnd.crick.clicker.template":{source:'iana',extensions:['clkt']},"application/vnd.crick.clicker.wordbank":{source:'iana',extensions:['clkw']},"application/vnd.criticaltools.wbs+xml":{source:'iana',extensions:['wbs']},"application/vnd.ctc-posml":{source:'iana',extensions:['pml']},"application/vnd.ctct.ws+xml":{source:'iana'},"application/vnd.cups-pdf":{source:'iana'},"application/vnd.cups-postscript":{source:'iana'},"application/vnd.cups-ppd":{source:'iana',extensions:['ppd']},"application/vnd.cups-raster":{source:'iana'},"application/vnd.cups-raw":{source:'iana'},"application/vnd.curl":{source:'iana'},"application/vnd.curl.car":{source:'apache',extensions:['car']},"application/vnd.curl.pcurl":{source:'apache',extensions:['pcurl']},"application/vnd.cyan.dean.root+xml":{source:'iana'},"application/vnd.cybank":{source:'iana'},"application/vnd.d2l.coursepackage1p0+zip":{source:'iana'},"application/vnd.dart":{source:'iana',compressible:!0,extensions:['dart']},"application/vnd.data-vision.rdz":{source:'iana',extensions:['rdz']},"application/vnd.datapackage+json":{source:'iana',compressible:!0},"application/vnd.dataresource+json":{source:'iana',compressible:!0},"application/vnd.debian.binary-package":{source:'iana'},"application/vnd.dece.data":{source:'iana',extensions:['uvf','uvvf','uvd','uvvd']},"application/vnd.dece.ttml+xml":{source:'iana',extensions:['uvt','uvvt']},"application/vnd.dece.unspecified":{source:'iana',extensions:['uvx','uvvx']},"application/vnd.dece.zip":{source:'iana',extensions:['uvz','uvvz']},"application/vnd.denovo.fcselayout-link":{source:'iana',extensions:['fe_launch']},"application/vnd.desmume-movie":{source:'iana'},"application/vnd.desmume.movie":{source:'apache'},"application/vnd.dir-bi.plate-dl-nosuffix":{source:'iana'},"application/vnd.dm.delegation+xml":{source:'iana'},"application/vnd.dna":{source:'iana',extensions:['dna']},"application/vnd.document+json":{source:'iana',compressible:!0},"application/vnd.dolby.mlp":{source:'apache',extensions:['mlp']},"application/vnd.dolby.mobile.1":{source:'iana'},"application/vnd.dolby.mobile.2":{source:'iana'},"application/vnd.doremir.scorecloud-binary-document":{source:'iana'},"application/vnd.dpgraph":{source:'iana',extensions:['dpg']},"application/vnd.dreamfactory":{source:'iana',extensions:['dfac']},"application/vnd.drive+json":{source:'iana',compressible:!0},"application/vnd.ds-keypoint":{source:'apache',extensions:['kpxx']},"application/vnd.dtg.local":{source:'iana'},"application/vnd.dtg.local.flash":{source:'iana'},"application/vnd.dtg.local.html":{source:'iana'},"application/vnd.dvb.ait":{source:'iana',extensions:['ait']},"application/vnd.dvb.dvbj":{source:'iana'},"application/vnd.dvb.esgcontainer":{source:'iana'},"application/vnd.dvb.ipdcdftnotifaccess":{source:'iana'},"application/vnd.dvb.ipdcesgaccess":{source:'iana'},"application/vnd.dvb.ipdcesgaccess2":{source:'iana'},"application/vnd.dvb.ipdcesgpdd":{source:'iana'},"application/vnd.dvb.ipdcroaming":{source:'iana'},"application/vnd.dvb.iptv.alfec-base":{source:'iana'},"application/vnd.dvb.iptv.alfec-enhancement":{source:'iana'},"application/vnd.dvb.notif-aggregate-root+xml":{source:'iana'},"application/vnd.dvb.notif-container+xml":{source:'iana'},"application/vnd.dvb.notif-generic+xml":{source:'iana'},"application/vnd.dvb.notif-ia-msglist+xml":{source:'iana'},"application/vnd.dvb.notif-ia-registration-request+xml":{source:'iana'},"application/vnd.dvb.notif-ia-registration-response+xml":{source:'iana'},"application/vnd.dvb.notif-init+xml":{source:'iana'},"application/vnd.dvb.pfr":{source:'iana'},"application/vnd.dvb.service":{source:'iana',extensions:['svc']},"application/vnd.dxr":{source:'iana'},"application/vnd.dynageo":{source:'iana',extensions:['geo']},"application/vnd.dzr":{source:'iana'},"application/vnd.easykaraoke.cdgdownload":{source:'iana'},"application/vnd.ecdis-update":{source:'iana'},"application/vnd.ecip.rlp":{source:'iana'},"application/vnd.ecowin.chart":{source:'iana',extensions:['mag']},"application/vnd.ecowin.filerequest":{source:'iana'},"application/vnd.ecowin.fileupdate":{source:'iana'},"application/vnd.ecowin.series":{source:'iana'},"application/vnd.ecowin.seriesrequest":{source:'iana'},"application/vnd.ecowin.seriesupdate":{source:'iana'},"application/vnd.efi.img":{source:'iana'},"application/vnd.efi.iso":{source:'iana'},"application/vnd.emclient.accessrequest+xml":{source:'iana'},"application/vnd.enliven":{source:'iana',extensions:['nml']},"application/vnd.enphase.envoy":{source:'iana'},"application/vnd.eprints.data+xml":{source:'iana'},"application/vnd.epson.esf":{source:'iana',extensions:['esf']},"application/vnd.epson.msf":{source:'iana',extensions:['msf']},"application/vnd.epson.quickanime":{source:'iana',extensions:['qam']},"application/vnd.epson.salt":{source:'iana',extensions:['slt']},"application/vnd.epson.ssf":{source:'iana',extensions:['ssf']},"application/vnd.ericsson.quickcall":{source:'iana'},"application/vnd.espass-espass+zip":{source:'iana'},"application/vnd.eszigno3+xml":{source:'iana',extensions:['es3','et3']},"application/vnd.etsi.aoc+xml":{source:'iana'},"application/vnd.etsi.asic-e+zip":{source:'iana'},"application/vnd.etsi.asic-s+zip":{source:'iana'},"application/vnd.etsi.cug+xml":{source:'iana'},"application/vnd.etsi.iptvcommand+xml":{source:'iana'},"application/vnd.etsi.iptvdiscovery+xml":{source:'iana'},"application/vnd.etsi.iptvprofile+xml":{source:'iana'},"application/vnd.etsi.iptvsad-bc+xml":{source:'iana'},"application/vnd.etsi.iptvsad-cod+xml":{source:'iana'},"application/vnd.etsi.iptvsad-npvr+xml":{source:'iana'},"application/vnd.etsi.iptvservice+xml":{source:'iana'},"application/vnd.etsi.iptvsync+xml":{source:'iana'},"application/vnd.etsi.iptvueprofile+xml":{source:'iana'},"application/vnd.etsi.mcid+xml":{source:'iana'},"application/vnd.etsi.mheg5":{source:'iana'},"application/vnd.etsi.overload-control-policy-dataset+xml":{source:'iana'},"application/vnd.etsi.pstn+xml":{source:'iana'},"application/vnd.etsi.sci+xml":{source:'iana'},"application/vnd.etsi.simservs+xml":{source:'iana'},"application/vnd.etsi.timestamp-token":{source:'iana'},"application/vnd.etsi.tsl+xml":{source:'iana'},"application/vnd.etsi.tsl.der":{source:'iana'},"application/vnd.eudora.data":{source:'iana'},"application/vnd.evolv.ecig.profile":{source:'iana'},"application/vnd.evolv.ecig.settings":{source:'iana'},"application/vnd.evolv.ecig.theme":{source:'iana'},"application/vnd.ezpix-album":{source:'iana',extensions:['ez2']},"application/vnd.ezpix-package":{source:'iana',extensions:['ez3']},"application/vnd.f-secure.mobile":{source:'iana'},"application/vnd.fastcopy-disk-image":{source:'iana'},"application/vnd.fdf":{source:'iana',extensions:['fdf']},"application/vnd.fdsn.mseed":{source:'iana',extensions:['mseed']},"application/vnd.fdsn.seed":{source:'iana',extensions:['seed','dataless']},"application/vnd.ffsns":{source:'iana'},"application/vnd.filmit.zfc":{source:'iana'},"application/vnd.fints":{source:'iana'},"application/vnd.firemonkeys.cloudcell":{source:'iana'},"application/vnd.flographit":{source:'iana',extensions:['gph']},"application/vnd.fluxtime.clip":{source:'iana',extensions:['ftc']},"application/vnd.font-fontforge-sfd":{source:'iana'},"application/vnd.framemaker":{source:'iana',extensions:['fm','frame','maker','book']},"application/vnd.frogans.fnc":{source:'iana',extensions:['fnc']},"application/vnd.frogans.ltf":{source:'iana',extensions:['ltf']},"application/vnd.fsc.weblaunch":{source:'iana',extensions:['fsc']},"application/vnd.fujitsu.oasys":{source:'iana',extensions:['oas']},"application/vnd.fujitsu.oasys2":{source:'iana',extensions:['oa2']},"application/vnd.fujitsu.oasys3":{source:'iana',extensions:['oa3']},"application/vnd.fujitsu.oasysgp":{source:'iana',extensions:['fg5']},"application/vnd.fujitsu.oasysprs":{source:'iana',extensions:['bh2']},"application/vnd.fujixerox.art-ex":{source:'iana'},"application/vnd.fujixerox.art4":{source:'iana'},"application/vnd.fujixerox.ddd":{source:'iana',extensions:['ddd']},"application/vnd.fujixerox.docuworks":{source:'iana',extensions:['xdw']},"application/vnd.fujixerox.docuworks.binder":{source:'iana',extensions:['xbd']},"application/vnd.fujixerox.docuworks.container":{source:'iana'},"application/vnd.fujixerox.hbpl":{source:'iana'},"application/vnd.fut-misnet":{source:'iana'},"application/vnd.fuzzysheet":{source:'iana',extensions:['fzs']},"application/vnd.genomatix.tuxedo":{source:'iana',extensions:['txd']},"application/vnd.geo+json":{source:'iana',compressible:!0},"application/vnd.geocube+xml":{source:'iana'},"application/vnd.geogebra.file":{source:'iana',extensions:['ggb']},"application/vnd.geogebra.tool":{source:'iana',extensions:['ggt']},"application/vnd.geometry-explorer":{source:'iana',extensions:['gex','gre']},"application/vnd.geonext":{source:'iana',extensions:['gxt']},"application/vnd.geoplan":{source:'iana',extensions:['g2w']},"application/vnd.geospace":{source:'iana',extensions:['g3w']},"application/vnd.gerber":{source:'iana'},"application/vnd.globalplatform.card-content-mgt":{source:'iana'},"application/vnd.globalplatform.card-content-mgt-response":{source:'iana'},"application/vnd.gmx":{source:'iana',extensions:['gmx']},"application/vnd.google-apps.document":{compressible:!1,extensions:['gdoc']},"application/vnd.google-apps.presentation":{compressible:!1,extensions:['gslides']},"application/vnd.google-apps.spreadsheet":{compressible:!1,extensions:['gsheet']},"application/vnd.google-earth.kml+xml":{source:'iana',compressible:!0,extensions:['kml']},"application/vnd.google-earth.kmz":{source:'iana',compressible:!1,extensions:['kmz']},"application/vnd.gov.sk.e-form+xml":{source:'iana'},"application/vnd.gov.sk.e-form+zip":{source:'iana'},"application/vnd.gov.sk.xmldatacontainer+xml":{source:'iana'},"application/vnd.grafeq":{source:'iana',extensions:['gqf','gqs']},"application/vnd.gridmp":{source:'iana'},"application/vnd.groove-account":{source:'iana',extensions:['gac']},"application/vnd.groove-help":{source:'iana',extensions:['ghf']},"application/vnd.groove-identity-message":{source:'iana',extensions:['gim']},"application/vnd.groove-injector":{source:'iana',extensions:['grv']},"application/vnd.groove-tool-message":{source:'iana',extensions:['gtm']},"application/vnd.groove-tool-template":{source:'iana',extensions:['tpl']},"application/vnd.groove-vcard":{source:'iana',extensions:['vcg']},"application/vnd.hal+json":{source:'iana',compressible:!0},"application/vnd.hal+xml":{source:'iana',extensions:['hal']},"application/vnd.handheld-entertainment+xml":{source:'iana',extensions:['zmm']},"application/vnd.hbci":{source:'iana',extensions:['hbci']},"application/vnd.hc+json":{source:'iana',compressible:!0},"application/vnd.hcl-bireports":{source:'iana'},"application/vnd.hdt":{source:'iana'},"application/vnd.heroku+json":{source:'iana',compressible:!0},"application/vnd.hhe.lesson-player":{source:'iana',extensions:['les']},"application/vnd.hp-hpgl":{source:'iana',extensions:['hpgl']},"application/vnd.hp-hpid":{source:'iana',extensions:['hpid']},"application/vnd.hp-hps":{source:'iana',extensions:['hps']},"application/vnd.hp-jlyt":{source:'iana',extensions:['jlt']},"application/vnd.hp-pcl":{source:'iana',extensions:['pcl']},"application/vnd.hp-pclxl":{source:'iana',extensions:['pclxl']},"application/vnd.httphone":{source:'iana'},"application/vnd.hydrostatix.sof-data":{source:'iana',extensions:['sfd-hdstx']},"application/vnd.hyper-item+json":{source:'iana',compressible:!0},"application/vnd.hyperdrive+json":{source:'iana',compressible:!0},"application/vnd.hzn-3d-crossword":{source:'iana'},"application/vnd.ibm.afplinedata":{source:'iana'},"application/vnd.ibm.electronic-media":{source:'iana'},"application/vnd.ibm.minipay":{source:'iana',extensions:['mpy']},"application/vnd.ibm.modcap":{source:'iana',extensions:['afp','listafp','list3820']},"application/vnd.ibm.rights-management":{source:'iana',extensions:['irm']},"application/vnd.ibm.secure-container":{source:'iana',extensions:['sc']},"application/vnd.iccprofile":{source:'iana',extensions:['icc','icm']},"application/vnd.ieee.1905":{source:'iana'},"application/vnd.igloader":{source:'iana',extensions:['igl']},"application/vnd.imagemeter.folder+zip":{source:'iana'},"application/vnd.imagemeter.image+zip":{source:'iana'},"application/vnd.immervision-ivp":{source:'iana',extensions:['ivp']},"application/vnd.immervision-ivu":{source:'iana',extensions:['ivu']},"application/vnd.ims.imsccv1p1":{source:'iana'},"application/vnd.ims.imsccv1p2":{source:'iana'},"application/vnd.ims.imsccv1p3":{source:'iana'},"application/vnd.ims.lis.v2.result+json":{source:'iana',compressible:!0},"application/vnd.ims.lti.v2.toolconsumerprofile+json":{source:'iana',compressible:!0},"application/vnd.ims.lti.v2.toolproxy+json":{source:'iana',compressible:!0},"application/vnd.ims.lti.v2.toolproxy.id+json":{source:'iana',compressible:!0},"application/vnd.ims.lti.v2.toolsettings+json":{source:'iana',compressible:!0},"application/vnd.ims.lti.v2.toolsettings.simple+json":{source:'iana',compressible:!0},"application/vnd.informedcontrol.rms+xml":{source:'iana'},"application/vnd.informix-visionary":{source:'iana'},"application/vnd.infotech.project":{source:'iana'},"application/vnd.infotech.project+xml":{source:'iana'},"application/vnd.innopath.wamp.notification":{source:'iana'},"application/vnd.insors.igm":{source:'iana',extensions:['igm']},"application/vnd.intercon.formnet":{source:'iana',extensions:['xpw','xpx']},"application/vnd.intergeo":{source:'iana',extensions:['i2g']},"application/vnd.intertrust.digibox":{source:'iana'},"application/vnd.intertrust.nncp":{source:'iana'},"application/vnd.intu.qbo":{source:'iana',extensions:['qbo']},"application/vnd.intu.qfx":{source:'iana',extensions:['qfx']},"application/vnd.iptc.g2.catalogitem+xml":{source:'iana'},"application/vnd.iptc.g2.conceptitem+xml":{source:'iana'},"application/vnd.iptc.g2.knowledgeitem+xml":{source:'iana'},"application/vnd.iptc.g2.newsitem+xml":{source:'iana'},"application/vnd.iptc.g2.newsmessage+xml":{source:'iana'},"application/vnd.iptc.g2.packageitem+xml":{source:'iana'},"application/vnd.iptc.g2.planningitem+xml":{source:'iana'},"application/vnd.ipunplugged.rcprofile":{source:'iana',extensions:['rcprofile']},"application/vnd.irepository.package+xml":{source:'iana',extensions:['irp']},"application/vnd.is-xpr":{source:'iana',extensions:['xpr']},"application/vnd.isac.fcs":{source:'iana',extensions:['fcs']},"application/vnd.jam":{source:'iana',extensions:['jam']},"application/vnd.japannet-directory-service":{source:'iana'},"application/vnd.japannet-jpnstore-wakeup":{source:'iana'},"application/vnd.japannet-payment-wakeup":{source:'iana'},"application/vnd.japannet-registration":{source:'iana'},"application/vnd.japannet-registration-wakeup":{source:'iana'},"application/vnd.japannet-setstore-wakeup":{source:'iana'},"application/vnd.japannet-verification":{source:'iana'},"application/vnd.japannet-verification-wakeup":{source:'iana'},"application/vnd.jcp.javame.midlet-rms":{source:'iana',extensions:['rms']},"application/vnd.jisp":{source:'iana',extensions:['jisp']},"application/vnd.joost.joda-archive":{source:'iana',extensions:['joda']},"application/vnd.jsk.isdn-ngn":{source:'iana'},"application/vnd.kahootz":{source:'iana',extensions:['ktz','ktr']},"application/vnd.kde.karbon":{source:'iana',extensions:['karbon']},"application/vnd.kde.kchart":{source:'iana',extensions:['chrt']},"application/vnd.kde.kformula":{source:'iana',extensions:['kfo']},"application/vnd.kde.kivio":{source:'iana',extensions:['flw']},"application/vnd.kde.kontour":{source:'iana',extensions:['kon']},"application/vnd.kde.kpresenter":{source:'iana',extensions:['kpr','kpt']},"application/vnd.kde.kspread":{source:'iana',extensions:['ksp']},"application/vnd.kde.kword":{source:'iana',extensions:['kwd','kwt']},"application/vnd.kenameaapp":{source:'iana',extensions:['htke']},"application/vnd.kidspiration":{source:'iana',extensions:['kia']},"application/vnd.kinar":{source:'iana',extensions:['kne','knp']},"application/vnd.koan":{source:'iana',extensions:['skp','skd','skt','skm']},"application/vnd.kodak-descriptor":{source:'iana',extensions:['sse']},"application/vnd.las.las+json":{source:'iana',compressible:!0},"application/vnd.las.las+xml":{source:'iana',extensions:['lasxml']},"application/vnd.liberty-request+xml":{source:'iana'},"application/vnd.llamagraphics.life-balance.desktop":{source:'iana',extensions:['lbd']},"application/vnd.llamagraphics.life-balance.exchange+xml":{source:'iana',extensions:['lbe']},"application/vnd.lotus-1-2-3":{source:'iana',extensions:['123']},"application/vnd.lotus-approach":{source:'iana',extensions:['apr']},"application/vnd.lotus-freelance":{source:'iana',extensions:['pre']},"application/vnd.lotus-notes":{source:'iana',extensions:['nsf']},"application/vnd.lotus-organizer":{source:'iana',extensions:['org']},"application/vnd.lotus-screencam":{source:'iana',extensions:['scm']},"application/vnd.lotus-wordpro":{source:'iana',extensions:['lwp']},"application/vnd.macports.portpkg":{source:'iana',extensions:['portpkg']},"application/vnd.mapbox-vector-tile":{source:'iana'},"application/vnd.marlin.drm.actiontoken+xml":{source:'iana'},"application/vnd.marlin.drm.conftoken+xml":{source:'iana'},"application/vnd.marlin.drm.license+xml":{source:'iana'},"application/vnd.marlin.drm.mdcf":{source:'iana'},"application/vnd.mason+json":{source:'iana',compressible:!0},"application/vnd.maxmind.maxmind-db":{source:'iana'},"application/vnd.mcd":{source:'iana',extensions:['mcd']},"application/vnd.medcalcdata":{source:'iana',extensions:['mc1']},"application/vnd.mediastation.cdkey":{source:'iana',extensions:['cdkey']},"application/vnd.meridian-slingshot":{source:'iana'},"application/vnd.mfer":{source:'iana',extensions:['mwf']},"application/vnd.mfmp":{source:'iana',extensions:['mfm']},"application/vnd.micro+json":{source:'iana',compressible:!0},"application/vnd.micrografx.flo":{source:'iana',extensions:['flo']},"application/vnd.micrografx.igx":{source:'iana',extensions:['igx']},"application/vnd.microsoft.portable-executable":{source:'iana'},"application/vnd.microsoft.windows.thumbnail-cache":{source:'iana'},"application/vnd.miele+json":{source:'iana',compressible:!0},"application/vnd.mif":{source:'iana',extensions:['mif']},"application/vnd.minisoft-hp3000-save":{source:'iana'},"application/vnd.mitsubishi.misty-guard.trustweb":{source:'iana'},"application/vnd.mobius.daf":{source:'iana',extensions:['daf']},"application/vnd.mobius.dis":{source:'iana',extensions:['dis']},"application/vnd.mobius.mbk":{source:'iana',extensions:['mbk']},"application/vnd.mobius.mqy":{source:'iana',extensions:['mqy']},"application/vnd.mobius.msl":{source:'iana',extensions:['msl']},"application/vnd.mobius.plc":{source:'iana',extensions:['plc']},"application/vnd.mobius.txf":{source:'iana',extensions:['txf']},"application/vnd.mophun.application":{source:'iana',extensions:['mpn']},"application/vnd.mophun.certificate":{source:'iana',extensions:['mpc']},"application/vnd.motorola.flexsuite":{source:'iana'},"application/vnd.motorola.flexsuite.adsi":{source:'iana'},"application/vnd.motorola.flexsuite.fis":{source:'iana'},"application/vnd.motorola.flexsuite.gotap":{source:'iana'},"application/vnd.motorola.flexsuite.kmr":{source:'iana'},"application/vnd.motorola.flexsuite.ttc":{source:'iana'},"application/vnd.motorola.flexsuite.wem":{source:'iana'},"application/vnd.motorola.iprm":{source:'iana'},"application/vnd.mozilla.xul+xml":{source:'iana',compressible:!0,extensions:['xul']},"application/vnd.ms-3mfdocument":{source:'iana'},"application/vnd.ms-artgalry":{source:'iana',extensions:['cil']},"application/vnd.ms-asf":{source:'iana'},"application/vnd.ms-cab-compressed":{source:'iana',extensions:['cab']},"application/vnd.ms-color.iccprofile":{source:'apache'},"application/vnd.ms-excel":{source:'iana',compressible:!1,extensions:['xls','xlm','xla','xlc','xlt','xlw']},"application/vnd.ms-excel.addin.macroenabled.12":{source:'iana',extensions:['xlam']},"application/vnd.ms-excel.sheet.binary.macroenabled.12":{source:'iana',extensions:['xlsb']},"application/vnd.ms-excel.sheet.macroenabled.12":{source:'iana',extensions:['xlsm']},"application/vnd.ms-excel.template.macroenabled.12":{source:'iana',extensions:['xltm']},"application/vnd.ms-fontobject":{source:'iana',compressible:!0,extensions:['eot']},"application/vnd.ms-htmlhelp":{source:'iana',extensions:['chm']},"application/vnd.ms-ims":{source:'iana',extensions:['ims']},"application/vnd.ms-lrm":{source:'iana',extensions:['lrm']},"application/vnd.ms-office.activex+xml":{source:'iana'},"application/vnd.ms-officetheme":{source:'iana',extensions:['thmx']},"application/vnd.ms-opentype":{source:'apache',compressible:!0},"application/vnd.ms-outlook":{compressible:!1,extensions:['msg']},"application/vnd.ms-package.obfuscated-opentype":{source:'apache'},"application/vnd.ms-pki.seccat":{source:'apache',extensions:['cat']},"application/vnd.ms-pki.stl":{source:'apache',extensions:['stl']},"application/vnd.ms-playready.initiator+xml":{source:'iana'},"application/vnd.ms-powerpoint":{source:'iana',compressible:!1,extensions:['ppt','pps','pot']},"application/vnd.ms-powerpoint.addin.macroenabled.12":{source:'iana',extensions:['ppam']},"application/vnd.ms-powerpoint.presentation.macroenabled.12":{source:'iana',extensions:['pptm']},"application/vnd.ms-powerpoint.slide.macroenabled.12":{source:'iana',extensions:['sldm']},"application/vnd.ms-powerpoint.slideshow.macroenabled.12":{source:'iana',extensions:['ppsm']},"application/vnd.ms-powerpoint.template.macroenabled.12":{source:'iana',extensions:['potm']},"application/vnd.ms-printdevicecapabilities+xml":{source:'iana'},"application/vnd.ms-printing.printticket+xml":{source:'apache'},"application/vnd.ms-printschematicket+xml":{source:'iana'},"application/vnd.ms-project":{source:'iana',extensions:['mpp','mpt']},"application/vnd.ms-tnef":{source:'iana'},"application/vnd.ms-windows.devicepairing":{source:'iana'},"application/vnd.ms-windows.nwprinting.oob":{source:'iana'},"application/vnd.ms-windows.printerpairing":{source:'iana'},"application/vnd.ms-windows.wsd.oob":{source:'iana'},"application/vnd.ms-wmdrm.lic-chlg-req":{source:'iana'},"application/vnd.ms-wmdrm.lic-resp":{source:'iana'},"application/vnd.ms-wmdrm.meter-chlg-req":{source:'iana'},"application/vnd.ms-wmdrm.meter-resp":{source:'iana'},"application/vnd.ms-word.document.macroenabled.12":{source:'iana',extensions:['docm']},"application/vnd.ms-word.template.macroenabled.12":{source:'iana',extensions:['dotm']},"application/vnd.ms-works":{source:'iana',extensions:['wps','wks','wcm','wdb']},"application/vnd.ms-wpl":{source:'iana',extensions:['wpl']},"application/vnd.ms-xpsdocument":{source:'iana',compressible:!1,extensions:['xps']},"application/vnd.msa-disk-image":{source:'iana'},"application/vnd.mseq":{source:'iana',extensions:['mseq']},"application/vnd.msign":{source:'iana'},"application/vnd.multiad.creator":{source:'iana'},"application/vnd.multiad.creator.cif":{source:'iana'},"application/vnd.music-niff":{source:'iana'},"application/vnd.musician":{source:'iana',extensions:['mus']},"application/vnd.muvee.style":{source:'iana',extensions:['msty']},"application/vnd.mynfc":{source:'iana',extensions:['taglet']},"application/vnd.ncd.control":{source:'iana'},"application/vnd.ncd.reference":{source:'iana'},"application/vnd.nearst.inv+json":{source:'iana',compressible:!0},"application/vnd.nervana":{source:'iana'},"application/vnd.netfpx":{source:'iana'},"application/vnd.neurolanguage.nlu":{source:'iana',extensions:['nlu']},"application/vnd.nintendo.nitro.rom":{source:'iana'},"application/vnd.nintendo.snes.rom":{source:'iana'},"application/vnd.nitf":{source:'iana',extensions:['ntf','nitf']},"application/vnd.noblenet-directory":{source:'iana',extensions:['nnd']},"application/vnd.noblenet-sealer":{source:'iana',extensions:['nns']},"application/vnd.noblenet-web":{source:'iana',extensions:['nnw']},"application/vnd.nokia.catalogs":{source:'iana'},"application/vnd.nokia.conml+wbxml":{source:'iana'},"application/vnd.nokia.conml+xml":{source:'iana'},"application/vnd.nokia.iptv.config+xml":{source:'iana'},"application/vnd.nokia.isds-radio-presets":{source:'iana'},"application/vnd.nokia.landmark+wbxml":{source:'iana'},"application/vnd.nokia.landmark+xml":{source:'iana'},"application/vnd.nokia.landmarkcollection+xml":{source:'iana'},"application/vnd.nokia.n-gage.ac+xml":{source:'iana'},"application/vnd.nokia.n-gage.data":{source:'iana',extensions:['ngdat']},"application/vnd.nokia.n-gage.symbian.install":{source:'iana',extensions:['n-gage']},"application/vnd.nokia.ncd":{source:'iana'},"application/vnd.nokia.pcd+wbxml":{source:'iana'},"application/vnd.nokia.pcd+xml":{source:'iana'},"application/vnd.nokia.radio-preset":{source:'iana',extensions:['rpst']},"application/vnd.nokia.radio-presets":{source:'iana',extensions:['rpss']},"application/vnd.novadigm.edm":{source:'iana',extensions:['edm']},"application/vnd.novadigm.edx":{source:'iana',extensions:['edx']},"application/vnd.novadigm.ext":{source:'iana',extensions:['ext']},"application/vnd.ntt-local.content-share":{source:'iana'},"application/vnd.ntt-local.file-transfer":{source:'iana'},"application/vnd.ntt-local.ogw_remote-access":{source:'iana'},"application/vnd.ntt-local.sip-ta_remote":{source:'iana'},"application/vnd.ntt-local.sip-ta_tcp_stream":{source:'iana'},"application/vnd.oasis.opendocument.chart":{source:'iana',extensions:['odc']},"application/vnd.oasis.opendocument.chart-template":{source:'iana',extensions:['otc']},"application/vnd.oasis.opendocument.database":{source:'iana',extensions:['odb']},"application/vnd.oasis.opendocument.formula":{source:'iana',extensions:['odf']},"application/vnd.oasis.opendocument.formula-template":{source:'iana',extensions:['odft']},"application/vnd.oasis.opendocument.graphics":{source:'iana',compressible:!1,extensions:['odg']},"application/vnd.oasis.opendocument.graphics-template":{source:'iana',extensions:['otg']},"application/vnd.oasis.opendocument.image":{source:'iana',extensions:['odi']},"application/vnd.oasis.opendocument.image-template":{source:'iana',extensions:['oti']},"application/vnd.oasis.opendocument.presentation":{source:'iana',compressible:!1,extensions:['odp']},"application/vnd.oasis.opendocument.presentation-template":{source:'iana',extensions:['otp']},"application/vnd.oasis.opendocument.spreadsheet":{source:'iana',compressible:!1,extensions:['ods']},"application/vnd.oasis.opendocument.spreadsheet-template":{source:'iana',extensions:['ots']},"application/vnd.oasis.opendocument.text":{source:'iana',compressible:!1,extensions:['odt']},"application/vnd.oasis.opendocument.text-master":{source:'iana',extensions:['odm']},"application/vnd.oasis.opendocument.text-template":{source:'iana',extensions:['ott']},"application/vnd.oasis.opendocument.text-web":{source:'iana',extensions:['oth']},"application/vnd.obn":{source:'iana'},"application/vnd.ocf+cbor":{source:'iana'},"application/vnd.oftn.l10n+json":{source:'iana',compressible:!0},"application/vnd.oipf.contentaccessdownload+xml":{source:'iana'},"application/vnd.oipf.contentaccessstreaming+xml":{source:'iana'},"application/vnd.oipf.cspg-hexbinary":{source:'iana'},"application/vnd.oipf.dae.svg+xml":{source:'iana'},"application/vnd.oipf.dae.xhtml+xml":{source:'iana'},"application/vnd.oipf.mippvcontrolmessage+xml":{source:'iana'},"application/vnd.oipf.pae.gem":{source:'iana'},"application/vnd.oipf.spdiscovery+xml":{source:'iana'},"application/vnd.oipf.spdlist+xml":{source:'iana'},"application/vnd.oipf.ueprofile+xml":{source:'iana'},"application/vnd.oipf.userprofile+xml":{source:'iana'},"application/vnd.olpc-sugar":{source:'iana',extensions:['xo']},"application/vnd.oma-scws-config":{source:'iana'},"application/vnd.oma-scws-http-request":{source:'iana'},"application/vnd.oma-scws-http-response":{source:'iana'},"application/vnd.oma.bcast.associated-procedure-parameter+xml":{source:'iana'},"application/vnd.oma.bcast.drm-trigger+xml":{source:'iana'},"application/vnd.oma.bcast.imd+xml":{source:'iana'},"application/vnd.oma.bcast.ltkm":{source:'iana'},"application/vnd.oma.bcast.notification+xml":{source:'iana'},"application/vnd.oma.bcast.provisioningtrigger":{source:'iana'},"application/vnd.oma.bcast.sgboot":{source:'iana'},"application/vnd.oma.bcast.sgdd+xml":{source:'iana'},"application/vnd.oma.bcast.sgdu":{source:'iana'},"application/vnd.oma.bcast.simple-symbol-container":{source:'iana'},"application/vnd.oma.bcast.smartcard-trigger+xml":{source:'iana'},"application/vnd.oma.bcast.sprov+xml":{source:'iana'},"application/vnd.oma.bcast.stkm":{source:'iana'},"application/vnd.oma.cab-address-book+xml":{source:'iana'},"application/vnd.oma.cab-feature-handler+xml":{source:'iana'},"application/vnd.oma.cab-pcc+xml":{source:'iana'},"application/vnd.oma.cab-subs-invite+xml":{source:'iana'},"application/vnd.oma.cab-user-prefs+xml":{source:'iana'},"application/vnd.oma.dcd":{source:'iana'},"application/vnd.oma.dcdc":{source:'iana'},"application/vnd.oma.dd2+xml":{source:'iana',extensions:['dd2']},"application/vnd.oma.drm.risd+xml":{source:'iana'},"application/vnd.oma.group-usage-list+xml":{source:'iana'},"application/vnd.oma.lwm2m+json":{source:'iana',compressible:!0},"application/vnd.oma.lwm2m+tlv":{source:'iana'},"application/vnd.oma.pal+xml":{source:'iana'},"application/vnd.oma.poc.detailed-progress-report+xml":{source:'iana'},"application/vnd.oma.poc.final-report+xml":{source:'iana'},"application/vnd.oma.poc.groups+xml":{source:'iana'},"application/vnd.oma.poc.invocation-descriptor+xml":{source:'iana'},"application/vnd.oma.poc.optimized-progress-report+xml":{source:'iana'},"application/vnd.oma.push":{source:'iana'},"application/vnd.oma.scidm.messages+xml":{source:'iana'},"application/vnd.oma.xcap-directory+xml":{source:'iana'},"application/vnd.omads-email+xml":{source:'iana'},"application/vnd.omads-file+xml":{source:'iana'},"application/vnd.omads-folder+xml":{source:'iana'},"application/vnd.omaloc-supl-init":{source:'iana'},"application/vnd.onepager":{source:'iana'},"application/vnd.onepagertamp":{source:'iana'},"application/vnd.onepagertamx":{source:'iana'},"application/vnd.onepagertat":{source:'iana'},"application/vnd.onepagertatp":{source:'iana'},"application/vnd.onepagertatx":{source:'iana'},"application/vnd.openblox.game+xml":{source:'iana'},"application/vnd.openblox.game-binary":{source:'iana'},"application/vnd.openeye.oeb":{source:'iana'},"application/vnd.openofficeorg.extension":{source:'apache',extensions:['oxt']},"application/vnd.openstreetmap.data+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.custom-properties+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.customxmlproperties+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.drawing+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.drawingml.chart+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.drawingml.diagramcolors+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.drawingml.diagramdata+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.drawingml.diagramlayout+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.drawingml.diagramstyle+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.extended-properties+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.presentationml.commentauthors+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.presentationml.comments+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.presentationml.handoutmaster+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.presentationml.notesmaster+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.presentationml.notesslide+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.presentationml.presentation":{source:'iana',compressible:!1,extensions:['pptx']},"application/vnd.openxmlformats-officedocument.presentationml.presentation.main+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.presentationml.presprops+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.presentationml.slide":{source:'iana',extensions:['sldx']},"application/vnd.openxmlformats-officedocument.presentationml.slide+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.presentationml.slidelayout+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.presentationml.slidemaster+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.presentationml.slideshow":{source:'iana',extensions:['ppsx']},"application/vnd.openxmlformats-officedocument.presentationml.slideshow.main+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.presentationml.slideupdateinfo+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.presentationml.tablestyles+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.presentationml.tags+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.presentationml.template":{source:'iana',extensions:['potx']},"application/vnd.openxmlformats-officedocument.presentationml.template.main+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.presentationml.viewprops+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.spreadsheetml.calcchain+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.spreadsheetml.externallink+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcachedefinition+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcacherecords+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivottable+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.spreadsheetml.querytable+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionheaders+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionlog+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedstrings+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{source:'iana',compressible:!1,extensions:['xlsx']},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetmetadata+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.spreadsheetml.tablesinglecells+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.spreadsheetml.template":{source:'iana',extensions:['xltx']},"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.spreadsheetml.usernames+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.spreadsheetml.volatiledependencies+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.theme+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.themeoverride+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.vmldrawing":{source:'iana'},"application/vnd.openxmlformats-officedocument.wordprocessingml.comments+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{source:'iana',compressible:!1,extensions:['docx']},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.glossary+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.wordprocessingml.endnotes+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.wordprocessingml.fonttable+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.wordprocessingml.footer+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.wordprocessingml.footnotes+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.wordprocessingml.numbering+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.wordprocessingml.settings+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.wordprocessingml.styles+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.wordprocessingml.template":{source:'iana',extensions:['dotx']},"application/vnd.openxmlformats-officedocument.wordprocessingml.template.main+xml":{source:'iana'},"application/vnd.openxmlformats-officedocument.wordprocessingml.websettings+xml":{source:'iana'},"application/vnd.openxmlformats-package.core-properties+xml":{source:'iana'},"application/vnd.openxmlformats-package.digital-signature-xmlsignature+xml":{source:'iana'},"application/vnd.openxmlformats-package.relationships+xml":{source:'iana'},"application/vnd.oracle.resource+json":{source:'iana',compressible:!0},"application/vnd.orange.indata":{source:'iana'},"application/vnd.osa.netdeploy":{source:'iana'},"application/vnd.osgeo.mapguide.package":{source:'iana',extensions:['mgp']},"application/vnd.osgi.bundle":{source:'iana'},"application/vnd.osgi.dp":{source:'iana',extensions:['dp']},"application/vnd.osgi.subsystem":{source:'iana',extensions:['esa']},"application/vnd.otps.ct-kip+xml":{source:'iana'},"application/vnd.oxli.countgraph":{source:'iana'},"application/vnd.pagerduty+json":{source:'iana',compressible:!0},"application/vnd.palm":{source:'iana',extensions:['pdb','pqa','oprc']},"application/vnd.panoply":{source:'iana'},"application/vnd.paos+xml":{source:'iana'},"application/vnd.paos.xml":{source:'apache'},"application/vnd.patentdive":{source:'iana'},"application/vnd.pawaafile":{source:'iana',extensions:['paw']},"application/vnd.pcos":{source:'iana'},"application/vnd.pg.format":{source:'iana',extensions:['str']},"application/vnd.pg.osasli":{source:'iana',extensions:['ei6']},"application/vnd.piaccess.application-licence":{source:'iana'},"application/vnd.picsel":{source:'iana',extensions:['efif']},"application/vnd.pmi.widget":{source:'iana',extensions:['wg']},"application/vnd.poc.group-advertisement+xml":{source:'iana'},"application/vnd.pocketlearn":{source:'iana',extensions:['plf']},"application/vnd.powerbuilder6":{source:'iana',extensions:['pbd']},"application/vnd.powerbuilder6-s":{source:'iana'},"application/vnd.powerbuilder7":{source:'iana'},"application/vnd.powerbuilder7-s":{source:'iana'},"application/vnd.powerbuilder75":{source:'iana'},"application/vnd.powerbuilder75-s":{source:'iana'},"application/vnd.preminet":{source:'iana'},"application/vnd.previewsystems.box":{source:'iana',extensions:['box']},"application/vnd.proteus.magazine":{source:'iana',extensions:['mgz']},"application/vnd.publishare-delta-tree":{source:'iana',extensions:['qps']},"application/vnd.pvi.ptid1":{source:'iana',extensions:['ptid']},"application/vnd.pwg-multiplexed":{source:'iana'},"application/vnd.pwg-xhtml-print+xml":{source:'iana'},"application/vnd.qualcomm.brew-app-res":{source:'iana'},"application/vnd.quarantainenet":{source:'iana'},"application/vnd.quark.quarkxpress":{source:'iana',extensions:['qxd','qxt','qwd','qwt','qxl','qxb']},"application/vnd.quobject-quoxdocument":{source:'iana'},"application/vnd.radisys.moml+xml":{source:'iana'},"application/vnd.radisys.msml+xml":{source:'iana'},"application/vnd.radisys.msml-audit+xml":{source:'iana'},"application/vnd.radisys.msml-audit-conf+xml":{source:'iana'},"application/vnd.radisys.msml-audit-conn+xml":{source:'iana'},"application/vnd.radisys.msml-audit-dialog+xml":{source:'iana'},"application/vnd.radisys.msml-audit-stream+xml":{source:'iana'},"application/vnd.radisys.msml-conf+xml":{source:'iana'},"application/vnd.radisys.msml-dialog+xml":{source:'iana'},"application/vnd.radisys.msml-dialog-base+xml":{source:'iana'},"application/vnd.radisys.msml-dialog-fax-detect+xml":{source:'iana'},"application/vnd.radisys.msml-dialog-fax-sendrecv+xml":{source:'iana'},"application/vnd.radisys.msml-dialog-group+xml":{source:'iana'},"application/vnd.radisys.msml-dialog-speech+xml":{source:'iana'},"application/vnd.radisys.msml-dialog-transform+xml":{source:'iana'},"application/vnd.rainstor.data":{source:'iana'},"application/vnd.rapid":{source:'iana'},"application/vnd.rar":{source:'iana'},"application/vnd.realvnc.bed":{source:'iana',extensions:['bed']},"application/vnd.recordare.musicxml":{source:'iana',extensions:['mxl']},"application/vnd.recordare.musicxml+xml":{source:'iana',extensions:['musicxml']},"application/vnd.renlearn.rlprint":{source:'iana'},"application/vnd.restful+json":{source:'iana',compressible:!0},"application/vnd.rig.cryptonote":{source:'iana',extensions:['cryptonote']},"application/vnd.rim.cod":{source:'apache',extensions:['cod']},"application/vnd.rn-realmedia":{source:'apache',extensions:['rm']},"application/vnd.rn-realmedia-vbr":{source:'apache',extensions:['rmvb']},"application/vnd.route66.link66+xml":{source:'iana',extensions:['link66']},"application/vnd.rs-274x":{source:'iana'},"application/vnd.ruckus.download":{source:'iana'},"application/vnd.s3sms":{source:'iana'},"application/vnd.sailingtracker.track":{source:'iana',extensions:['st']},"application/vnd.sbm.cid":{source:'iana'},"application/vnd.sbm.mid2":{source:'iana'},"application/vnd.scribus":{source:'iana'},"application/vnd.sealed.3df":{source:'iana'},"application/vnd.sealed.csf":{source:'iana'},"application/vnd.sealed.doc":{source:'iana'},"application/vnd.sealed.eml":{source:'iana'},"application/vnd.sealed.mht":{source:'iana'},"application/vnd.sealed.net":{source:'iana'},"application/vnd.sealed.ppt":{source:'iana'},"application/vnd.sealed.tiff":{source:'iana'},"application/vnd.sealed.xls":{source:'iana'},"application/vnd.sealedmedia.softseal.html":{source:'iana'},"application/vnd.sealedmedia.softseal.pdf":{source:'iana'},"application/vnd.seemail":{source:'iana',extensions:['see']},"application/vnd.sema":{source:'iana',extensions:['sema']},"application/vnd.semd":{source:'iana',extensions:['semd']},"application/vnd.semf":{source:'iana',extensions:['semf']},"application/vnd.shana.informed.formdata":{source:'iana',extensions:['ifm']},"application/vnd.shana.informed.formtemplate":{source:'iana',extensions:['itp']},"application/vnd.shana.informed.interchange":{source:'iana',extensions:['iif']},"application/vnd.shana.informed.package":{source:'iana',extensions:['ipk']},"application/vnd.sigrok.session":{source:'iana'},"application/vnd.simtech-mindmapper":{source:'iana',extensions:['twd','twds']},"application/vnd.siren+json":{source:'iana',compressible:!0},"application/vnd.smaf":{source:'iana',extensions:['mmf']},"application/vnd.smart.notebook":{source:'iana'},"application/vnd.smart.teacher":{source:'iana',extensions:['teacher']},"application/vnd.software602.filler.form+xml":{source:'iana'},"application/vnd.software602.filler.form-xml-zip":{source:'iana'},"application/vnd.solent.sdkm+xml":{source:'iana',extensions:['sdkm','sdkd']},"application/vnd.spotfire.dxp":{source:'iana',extensions:['dxp']},"application/vnd.spotfire.sfs":{source:'iana',extensions:['sfs']},"application/vnd.sqlite3":{source:'iana'},"application/vnd.sss-cod":{source:'iana'},"application/vnd.sss-dtf":{source:'iana'},"application/vnd.sss-ntf":{source:'iana'},"application/vnd.stardivision.calc":{source:'apache',extensions:['sdc']},"application/vnd.stardivision.draw":{source:'apache',extensions:['sda']},"application/vnd.stardivision.impress":{source:'apache',extensions:['sdd']},"application/vnd.stardivision.math":{source:'apache',extensions:['smf']},"application/vnd.stardivision.writer":{source:'apache',extensions:['sdw','vor']},"application/vnd.stardivision.writer-global":{source:'apache',extensions:['sgl']},"application/vnd.stepmania.package":{source:'iana',extensions:['smzip']},"application/vnd.stepmania.stepchart":{source:'iana',extensions:['sm']},"application/vnd.street-stream":{source:'iana'},"application/vnd.sun.wadl+xml":{source:'iana',compressible:!0,extensions:['wadl']},"application/vnd.sun.xml.calc":{source:'apache',extensions:['sxc']},"application/vnd.sun.xml.calc.template":{source:'apache',extensions:['stc']},"application/vnd.sun.xml.draw":{source:'apache',extensions:['sxd']},"application/vnd.sun.xml.draw.template":{source:'apache',extensions:['std']},"application/vnd.sun.xml.impress":{source:'apache',extensions:['sxi']},"application/vnd.sun.xml.impress.template":{source:'apache',extensions:['sti']},"application/vnd.sun.xml.math":{source:'apache',extensions:['sxm']},"application/vnd.sun.xml.writer":{source:'apache',extensions:['sxw']},"application/vnd.sun.xml.writer.global":{source:'apache',extensions:['sxg']},"application/vnd.sun.xml.writer.template":{source:'apache',extensions:['stw']},"application/vnd.sus-calendar":{source:'iana',extensions:['sus','susp']},"application/vnd.svd":{source:'iana',extensions:['svd']},"application/vnd.swiftview-ics":{source:'iana'},"application/vnd.symbian.install":{source:'apache',extensions:['sis','sisx']},"application/vnd.syncml+xml":{source:'iana',extensions:['xsm']},"application/vnd.syncml.dm+wbxml":{source:'iana',extensions:['bdm']},"application/vnd.syncml.dm+xml":{source:'iana',extensions:['xdm']},"application/vnd.syncml.dm.notification":{source:'iana'},"application/vnd.syncml.dmddf+wbxml":{source:'iana'},"application/vnd.syncml.dmddf+xml":{source:'iana'},"application/vnd.syncml.dmtnds+wbxml":{source:'iana'},"application/vnd.syncml.dmtnds+xml":{source:'iana'},"application/vnd.syncml.ds.notification":{source:'iana'},"application/vnd.tableschema+json":{source:'iana',compressible:!0},"application/vnd.tao.intent-module-archive":{source:'iana',extensions:['tao']},"application/vnd.tcpdump.pcap":{source:'iana',extensions:['pcap','cap','dmp']},"application/vnd.tmd.mediaflex.api+xml":{source:'iana'},"application/vnd.tml":{source:'iana'},"application/vnd.tmobile-livetv":{source:'iana',extensions:['tmo']},"application/vnd.tri.onesource":{source:'iana'},"application/vnd.trid.tpt":{source:'iana',extensions:['tpt']},"application/vnd.triscape.mxs":{source:'iana',extensions:['mxs']},"application/vnd.trueapp":{source:'iana',extensions:['tra']},"application/vnd.truedoc":{source:'iana'},"application/vnd.ubisoft.webplayer":{source:'iana'},"application/vnd.ufdl":{source:'iana',extensions:['ufd','ufdl']},"application/vnd.uiq.theme":{source:'iana',extensions:['utz']},"application/vnd.umajin":{source:'iana',extensions:['umj']},"application/vnd.unity":{source:'iana',extensions:['unityweb']},"application/vnd.uoml+xml":{source:'iana',extensions:['uoml']},"application/vnd.uplanet.alert":{source:'iana'},"application/vnd.uplanet.alert-wbxml":{source:'iana'},"application/vnd.uplanet.bearer-choice":{source:'iana'},"application/vnd.uplanet.bearer-choice-wbxml":{source:'iana'},"application/vnd.uplanet.cacheop":{source:'iana'},"application/vnd.uplanet.cacheop-wbxml":{source:'iana'},"application/vnd.uplanet.channel":{source:'iana'},"application/vnd.uplanet.channel-wbxml":{source:'iana'},"application/vnd.uplanet.list":{source:'iana'},"application/vnd.uplanet.list-wbxml":{source:'iana'},"application/vnd.uplanet.listcmd":{source:'iana'},"application/vnd.uplanet.listcmd-wbxml":{source:'iana'},"application/vnd.uplanet.signal":{source:'iana'},"application/vnd.uri-map":{source:'iana'},"application/vnd.valve.source.material":{source:'iana'},"application/vnd.vcx":{source:'iana',extensions:['vcx']},"application/vnd.vd-study":{source:'iana'},"application/vnd.vectorworks":{source:'iana'},"application/vnd.vel+json":{source:'iana',compressible:!0},"application/vnd.verimatrix.vcas":{source:'iana'},"application/vnd.vidsoft.vidconference":{source:'iana'},"application/vnd.visio":{source:'iana',extensions:['vsd','vst','vss','vsw']},"application/vnd.visionary":{source:'iana',extensions:['vis']},"application/vnd.vividence.scriptfile":{source:'iana'},"application/vnd.vsf":{source:'iana',extensions:['vsf']},"application/vnd.wap.sic":{source:'iana'},"application/vnd.wap.slc":{source:'iana'},"application/vnd.wap.wbxml":{source:'iana',extensions:['wbxml']},"application/vnd.wap.wmlc":{source:'iana',extensions:['wmlc']},"application/vnd.wap.wmlscriptc":{source:'iana',extensions:['wmlsc']},"application/vnd.webturbo":{source:'iana',extensions:['wtb']},"application/vnd.wfa.p2p":{source:'iana'},"application/vnd.wfa.wsc":{source:'iana'},"application/vnd.windows.devicepairing":{source:'iana'},"application/vnd.wmc":{source:'iana'},"application/vnd.wmf.bootstrap":{source:'iana'},"application/vnd.wolfram.mathematica":{source:'iana'},"application/vnd.wolfram.mathematica.package":{source:'iana'},"application/vnd.wolfram.player":{source:'iana',extensions:['nbp']},"application/vnd.wordperfect":{source:'iana',extensions:['wpd']},"application/vnd.wqd":{source:'iana',extensions:['wqd']},"application/vnd.wrq-hp3000-labelled":{source:'iana'},"application/vnd.wt.stf":{source:'iana',extensions:['stf']},"application/vnd.wv.csp+wbxml":{source:'iana'},"application/vnd.wv.csp+xml":{source:'iana'},"application/vnd.wv.ssp+xml":{source:'iana'},"application/vnd.xacml+json":{source:'iana',compressible:!0},"application/vnd.xara":{source:'iana',extensions:['xar']},"application/vnd.xfdl":{source:'iana',extensions:['xfdl']},"application/vnd.xfdl.webform":{source:'iana'},"application/vnd.xmi+xml":{source:'iana'},"application/vnd.xmpie.cpkg":{source:'iana'},"application/vnd.xmpie.dpkg":{source:'iana'},"application/vnd.xmpie.plan":{source:'iana'},"application/vnd.xmpie.ppkg":{source:'iana'},"application/vnd.xmpie.xlim":{source:'iana'},"application/vnd.yamaha.hv-dic":{source:'iana',extensions:['hvd']},"application/vnd.yamaha.hv-script":{source:'iana',extensions:['hvs']},"application/vnd.yamaha.hv-voice":{source:'iana',extensions:['hvp']},"application/vnd.yamaha.openscoreformat":{source:'iana',extensions:['osf']},"application/vnd.yamaha.openscoreformat.osfpvg+xml":{source:'iana',extensions:['osfpvg']},"application/vnd.yamaha.remote-setup":{source:'iana'},"application/vnd.yamaha.smaf-audio":{source:'iana',extensions:['saf']},"application/vnd.yamaha.smaf-phrase":{source:'iana',extensions:['spf']},"application/vnd.yamaha.through-ngn":{source:'iana'},"application/vnd.yamaha.tunnel-udpencap":{source:'iana'},"application/vnd.yaoweme":{source:'iana'},"application/vnd.yellowriver-custom-menu":{source:'iana',extensions:['cmp']},"application/vnd.youtube.yt":{source:'iana'},"application/vnd.zul":{source:'iana',extensions:['zir','zirz']},"application/vnd.zzazz.deck+xml":{source:'iana',extensions:['zaz']},"application/voicexml+xml":{source:'iana',extensions:['vxml']},"application/voucher-cms+json":{source:'iana',compressible:!0},"application/vq-rtcpxr":{source:'iana'},"application/wasm":{compressible:!0,extensions:['wasm']},"application/watcherinfo+xml":{source:'iana'},"application/webpush-options+json":{source:'iana',compressible:!0},"application/whoispp-query":{source:'iana'},"application/whoispp-response":{source:'iana'},"application/widget":{source:'iana',extensions:['wgt']},"application/winhlp":{source:'apache',extensions:['hlp']},"application/wita":{source:'iana'},"application/wordperfect5.1":{source:'iana'},"application/wsdl+xml":{source:'iana',extensions:['wsdl']},"application/wspolicy+xml":{source:'iana',extensions:['wspolicy']},"application/x-7z-compressed":{source:'apache',compressible:!1,extensions:['7z']},"application/x-abiword":{source:'apache',extensions:['abw']},"application/x-ace-compressed":{source:'apache',extensions:['ace']},"application/x-amf":{source:'apache'},"application/x-apple-diskimage":{source:'apache',extensions:['dmg']},"application/x-arj":{compressible:!1,extensions:['arj']},"application/x-authorware-bin":{source:'apache',extensions:['aab','x32','u32','vox']},"application/x-authorware-map":{source:'apache',extensions:['aam']},"application/x-authorware-seg":{source:'apache',extensions:['aas']},"application/x-bcpio":{source:'apache',extensions:['bcpio']},"application/x-bdoc":{compressible:!1,extensions:['bdoc']},"application/x-bittorrent":{source:'apache',extensions:['torrent']},"application/x-blorb":{source:'apache',extensions:['blb','blorb']},"application/x-bzip":{source:'apache',compressible:!1,extensions:['bz']},"application/x-bzip2":{source:'apache',compressible:!1,extensions:['bz2','boz']},"application/x-cbr":{source:'apache',extensions:['cbr','cba','cbt','cbz','cb7']},"application/x-cdlink":{source:'apache',extensions:['vcd']},"application/x-cfs-compressed":{source:'apache',extensions:['cfs']},"application/x-chat":{source:'apache',extensions:['chat']},"application/x-chess-pgn":{source:'apache',extensions:['pgn']},"application/x-chrome-extension":{extensions:['crx']},"application/x-cocoa":{source:'nginx',extensions:['cco']},"application/x-compress":{source:'apache'},"application/x-conference":{source:'apache',extensions:['nsc']},"application/x-cpio":{source:'apache',extensions:['cpio']},"application/x-csh":{source:'apache',extensions:['csh']},"application/x-deb":{compressible:!1},"application/x-debian-package":{source:'apache',extensions:['deb','udeb']},"application/x-dgc-compressed":{source:'apache',extensions:['dgc']},"application/x-director":{source:'apache',extensions:['dir','dcr','dxr','cst','cct','cxt','w3d','fgd','swa']},"application/x-doom":{source:'apache',extensions:['wad']},"application/x-dtbncx+xml":{source:'apache',extensions:['ncx']},"application/x-dtbook+xml":{source:'apache',extensions:['dtb']},"application/x-dtbresource+xml":{source:'apache',extensions:['res']},"application/x-dvi":{source:'apache',compressible:!1,extensions:['dvi']},"application/x-envoy":{source:'apache',extensions:['evy']},"application/x-eva":{source:'apache',extensions:['eva']},"application/x-font-bdf":{source:'apache',extensions:['bdf']},"application/x-font-dos":{source:'apache'},"application/x-font-framemaker":{source:'apache'},"application/x-font-ghostscript":{source:'apache',extensions:['gsf']},"application/x-font-libgrx":{source:'apache'},"application/x-font-linux-psf":{source:'apache',extensions:['psf']},"application/x-font-pcf":{source:'apache',extensions:['pcf']},"application/x-font-snf":{source:'apache',extensions:['snf']},"application/x-font-speedo":{source:'apache'},"application/x-font-sunos-news":{source:'apache'},"application/x-font-type1":{source:'apache',extensions:['pfa','pfb','pfm','afm']},"application/x-font-vfont":{source:'apache'},"application/x-freearc":{source:'apache',extensions:['arc']},"application/x-futuresplash":{source:'apache',extensions:['spl']},"application/x-gca-compressed":{source:'apache',extensions:['gca']},"application/x-glulx":{source:'apache',extensions:['ulx']},"application/x-gnumeric":{source:'apache',extensions:['gnumeric']},"application/x-gramps-xml":{source:'apache',extensions:['gramps']},"application/x-gtar":{source:'apache',extensions:['gtar']},"application/x-gzip":{source:'apache'},"application/x-hdf":{source:'apache',extensions:['hdf']},"application/x-httpd-php":{compressible:!0,extensions:['php']},"application/x-install-instructions":{source:'apache',extensions:['install']},"application/x-iso9660-image":{source:'apache',extensions:['iso']},"application/x-java-archive-diff":{source:'nginx',extensions:['jardiff']},"application/x-java-jnlp-file":{source:'apache',compressible:!1,extensions:['jnlp']},"application/x-javascript":{compressible:!0},"application/x-latex":{source:'apache',compressible:!1,extensions:['latex']},"application/x-lua-bytecode":{extensions:['luac']},"application/x-lzh-compressed":{source:'apache',extensions:['lzh','lha']},"application/x-makeself":{source:'nginx',extensions:['run']},"application/x-mie":{source:'apache',extensions:['mie']},"application/x-mobipocket-ebook":{source:'apache',extensions:['prc','mobi']},"application/x-mpegurl":{compressible:!1},"application/x-ms-application":{source:'apache',extensions:['application']},"application/x-ms-shortcut":{source:'apache',extensions:['lnk']},"application/x-ms-wmd":{source:'apache',extensions:['wmd']},"application/x-ms-wmz":{source:'apache',extensions:['wmz']},"application/x-ms-xbap":{source:'apache',extensions:['xbap']},"application/x-msaccess":{source:'apache',extensions:['mdb']},"application/x-msbinder":{source:'apache',extensions:['obd']},"application/x-mscardfile":{source:'apache',extensions:['crd']},"application/x-msclip":{source:'apache',extensions:['clp']},"application/x-msdos-program":{extensions:['exe']},"application/x-msdownload":{source:'apache',extensions:['exe','dll','com','bat','msi']},"application/x-msmediaview":{source:'apache',extensions:['mvb','m13','m14']},"application/x-msmetafile":{source:'apache',extensions:['wmf','wmz','emf','emz']},"application/x-msmoney":{source:'apache',extensions:['mny']},"application/x-mspublisher":{source:'apache',extensions:['pub']},"application/x-msschedule":{source:'apache',extensions:['scd']},"application/x-msterminal":{source:'apache',extensions:['trm']},"application/x-mswrite":{source:'apache',extensions:['wri']},"application/x-netcdf":{source:'apache',extensions:['nc','cdf']},"application/x-ns-proxy-autoconfig":{compressible:!0,extensions:['pac']},"application/x-nzb":{source:'apache',extensions:['nzb']},"application/x-perl":{source:'nginx',extensions:['pl','pm']},"application/x-pilot":{source:'nginx',extensions:['prc','pdb']},"application/x-pkcs12":{source:'apache',compressible:!1,extensions:['p12','pfx']},"application/x-pkcs7-certificates":{source:'apache',extensions:['p7b','spc']},"application/x-pkcs7-certreqresp":{source:'apache',extensions:['p7r']},"application/x-rar-compressed":{source:'apache',compressible:!1,extensions:['rar']},"application/x-redhat-package-manager":{source:'nginx',extensions:['rpm']},"application/x-research-info-systems":{source:'apache',extensions:['ris']},"application/x-sea":{source:'nginx',extensions:['sea']},"application/x-sh":{source:'apache',compressible:!0,extensions:['sh']},"application/x-shar":{source:'apache',extensions:['shar']},"application/x-shockwave-flash":{source:'apache',compressible:!1,extensions:['swf']},"application/x-silverlight-app":{source:'apache',extensions:['xap']},"application/x-sql":{source:'apache',extensions:['sql']},"application/x-stuffit":{source:'apache',compressible:!1,extensions:['sit']},"application/x-stuffitx":{source:'apache',extensions:['sitx']},"application/x-subrip":{source:'apache',extensions:['srt']},"application/x-sv4cpio":{source:'apache',extensions:['sv4cpio']},"application/x-sv4crc":{source:'apache',extensions:['sv4crc']},"application/x-t3vm-image":{source:'apache',extensions:['t3']},"application/x-tads":{source:'apache',extensions:['gam']},"application/x-tar":{source:'apache',compressible:!0,extensions:['tar']},"application/x-tcl":{source:'apache',extensions:['tcl','tk']},"application/x-tex":{source:'apache',extensions:['tex']},"application/x-tex-tfm":{source:'apache',extensions:['tfm']},"application/x-texinfo":{source:'apache',extensions:['texinfo','texi']},"application/x-tgif":{source:'apache',extensions:['obj']},"application/x-ustar":{source:'apache',extensions:['ustar']},"application/x-virtualbox-hdd":{compressible:!0,extensions:['hdd']},"application/x-virtualbox-ova":{compressible:!0,extensions:['ova']},"application/x-virtualbox-ovf":{compressible:!0,extensions:['ovf']},"application/x-virtualbox-vbox":{compressible:!0,extensions:['vbox']},"application/x-virtualbox-vbox-extpack":{compressible:!1,extensions:['vbox-extpack']},"application/x-virtualbox-vdi":{compressible:!0,extensions:['vdi']},"application/x-virtualbox-vhd":{compressible:!0,extensions:['vhd']},"application/x-virtualbox-vmdk":{compressible:!0,extensions:['vmdk']},"application/x-wais-source":{source:'apache',extensions:['src']},"application/x-web-app-manifest+json":{compressible:!0,extensions:['webapp']},"application/x-www-form-urlencoded":{source:'iana',compressible:!0},"application/x-x509-ca-cert":{source:'apache',extensions:['der','crt','pem']},"application/x-xfig":{source:'apache',extensions:['fig']},"application/x-xliff+xml":{source:'apache',extensions:['xlf']},"application/x-xpinstall":{source:'apache',compressible:!1,extensions:['xpi']},"application/x-xz":{source:'apache',extensions:['xz']},"application/x-zmachine":{source:'apache',extensions:['z1','z2','z3','z4','z5','z6','z7','z8']},"application/x400-bp":{source:'iana'},"application/xacml+xml":{source:'iana'},"application/xaml+xml":{source:'apache',extensions:['xaml']},"application/xcap-att+xml":{source:'iana'},"application/xcap-caps+xml":{source:'iana'},"application/xcap-diff+xml":{source:'iana',extensions:['xdf']},"application/xcap-el+xml":{source:'iana'},"application/xcap-error+xml":{source:'iana'},"application/xcap-ns+xml":{source:'iana'},"application/xcon-conference-info+xml":{source:'iana'},"application/xcon-conference-info-diff+xml":{source:'iana'},"application/xenc+xml":{source:'iana',extensions:['xenc']},"application/xhtml+xml":{source:'iana',compressible:!0,extensions:['xhtml','xht']},"application/xhtml-voice+xml":{source:'apache'},"application/xml":{source:'iana',compressible:!0,extensions:['xml','xsl','xsd','rng']},"application/xml-dtd":{source:'iana',compressible:!0,extensions:['dtd']},"application/xml-external-parsed-entity":{source:'iana'},"application/xml-patch+xml":{source:'iana'},"application/xmpp+xml":{source:'iana'},"application/xop+xml":{source:'iana',compressible:!0,extensions:['xop']},"application/xproc+xml":{source:'apache',extensions:['xpl']},"application/xslt+xml":{source:'iana',extensions:['xslt']},"application/xspf+xml":{source:'apache',extensions:['xspf']},"application/xv+xml":{source:'iana',extensions:['mxml','xhvml','xvml','xvm']},"application/yang":{source:'iana',extensions:['yang']},"application/yang-data+json":{source:'iana',compressible:!0},"application/yang-data+xml":{source:'iana'},"application/yang-patch+json":{source:'iana',compressible:!0},"application/yang-patch+xml":{source:'iana'},"application/yin+xml":{source:'iana',extensions:['yin']},"application/zip":{source:'iana',compressible:!1,extensions:['zip']},"application/zlib":{source:'iana'},"audio/1d-interleaved-parityfec":{source:'iana'},"audio/32kadpcm":{source:'iana'},"audio/3gpp":{source:'iana',compressible:!1,extensions:['3gpp']},"audio/3gpp2":{source:'iana'},"audio/ac3":{source:'iana'},"audio/adpcm":{source:'apache',extensions:['adp']},"audio/amr":{source:'iana'},"audio/amr-wb":{source:'iana'},"audio/amr-wb+":{source:'iana'},"audio/aptx":{source:'iana'},"audio/asc":{source:'iana'},"audio/atrac-advanced-lossless":{source:'iana'},"audio/atrac-x":{source:'iana'},"audio/atrac3":{source:'iana'},"audio/basic":{source:'iana',compressible:!1,extensions:['au','snd']},"audio/bv16":{source:'iana'},"audio/bv32":{source:'iana'},"audio/clearmode":{source:'iana'},"audio/cn":{source:'iana'},"audio/dat12":{source:'iana'},"audio/dls":{source:'iana'},"audio/dsr-es201108":{source:'iana'},"audio/dsr-es202050":{source:'iana'},"audio/dsr-es202211":{source:'iana'},"audio/dsr-es202212":{source:'iana'},"audio/dv":{source:'iana'},"audio/dvi4":{source:'iana'},"audio/eac3":{source:'iana'},"audio/encaprtp":{source:'iana'},"audio/evrc":{source:'iana'},"audio/evrc-qcp":{source:'iana'},"audio/evrc0":{source:'iana'},"audio/evrc1":{source:'iana'},"audio/evrcb":{source:'iana'},"audio/evrcb0":{source:'iana'},"audio/evrcb1":{source:'iana'},"audio/evrcnw":{source:'iana'},"audio/evrcnw0":{source:'iana'},"audio/evrcnw1":{source:'iana'},"audio/evrcwb":{source:'iana'},"audio/evrcwb0":{source:'iana'},"audio/evrcwb1":{source:'iana'},"audio/evs":{source:'iana'},"audio/fwdred":{source:'iana'},"audio/g711-0":{source:'iana'},"audio/g719":{source:'iana'},"audio/g722":{source:'iana'},"audio/g7221":{source:'iana'},"audio/g723":{source:'iana'},"audio/g726-16":{source:'iana'},"audio/g726-24":{source:'iana'},"audio/g726-32":{source:'iana'},"audio/g726-40":{source:'iana'},"audio/g728":{source:'iana'},"audio/g729":{source:'iana'},"audio/g7291":{source:'iana'},"audio/g729d":{source:'iana'},"audio/g729e":{source:'iana'},"audio/gsm":{source:'iana'},"audio/gsm-efr":{source:'iana'},"audio/gsm-hr-08":{source:'iana'},"audio/ilbc":{source:'iana'},"audio/ip-mr_v2.5":{source:'iana'},"audio/isac":{source:'apache'},"audio/l16":{source:'iana'},"audio/l20":{source:'iana'},"audio/l24":{source:'iana',compressible:!1},"audio/l8":{source:'iana'},"audio/lpc":{source:'iana'},"audio/melp":{source:'iana'},"audio/melp1200":{source:'iana'},"audio/melp2400":{source:'iana'},"audio/melp600":{source:'iana'},"audio/midi":{source:'apache',extensions:['mid','midi','kar','rmi']},"audio/mobile-xmf":{source:'iana'},"audio/mp3":{compressible:!1,extensions:['mp3']},"audio/mp4":{source:'iana',compressible:!1,extensions:['m4a','mp4a']},"audio/mp4a-latm":{source:'iana'},"audio/mpa":{source:'iana'},"audio/mpa-robust":{source:'iana'},"audio/mpeg":{source:'iana',compressible:!1,extensions:['mpga','mp2','mp2a','mp3','m2a','m3a']},"audio/mpeg4-generic":{source:'iana'},"audio/musepack":{source:'apache'},"audio/ogg":{source:'iana',compressible:!1,extensions:['oga','ogg','spx']},"audio/opus":{source:'iana'},"audio/parityfec":{source:'iana'},"audio/pcma":{source:'iana'},"audio/pcma-wb":{source:'iana'},"audio/pcmu":{source:'iana'},"audio/pcmu-wb":{source:'iana'},"audio/prs.sid":{source:'iana'},"audio/qcelp":{source:'iana'},"audio/raptorfec":{source:'iana'},"audio/red":{source:'iana'},"audio/rtp-enc-aescm128":{source:'iana'},"audio/rtp-midi":{source:'iana'},"audio/rtploopback":{source:'iana'},"audio/rtx":{source:'iana'},"audio/s3m":{source:'apache',extensions:['s3m']},"audio/silk":{source:'apache',extensions:['sil']},"audio/smv":{source:'iana'},"audio/smv-qcp":{source:'iana'},"audio/smv0":{source:'iana'},"audio/sp-midi":{source:'iana'},"audio/speex":{source:'iana'},"audio/t140c":{source:'iana'},"audio/t38":{source:'iana'},"audio/telephone-event":{source:'iana'},"audio/tone":{source:'iana'},"audio/uemclip":{source:'iana'},"audio/ulpfec":{source:'iana'},"audio/vdvi":{source:'iana'},"audio/vmr-wb":{source:'iana'},"audio/vnd.3gpp.iufp":{source:'iana'},"audio/vnd.4sb":{source:'iana'},"audio/vnd.audiokoz":{source:'iana'},"audio/vnd.celp":{source:'iana'},"audio/vnd.cisco.nse":{source:'iana'},"audio/vnd.cmles.radio-events":{source:'iana'},"audio/vnd.cns.anp1":{source:'iana'},"audio/vnd.cns.inf1":{source:'iana'},"audio/vnd.dece.audio":{source:'iana',extensions:['uva','uvva']},"audio/vnd.digital-winds":{source:'iana',extensions:['eol']},"audio/vnd.dlna.adts":{source:'iana'},"audio/vnd.dolby.heaac.1":{source:'iana'},"audio/vnd.dolby.heaac.2":{source:'iana'},"audio/vnd.dolby.mlp":{source:'iana'},"audio/vnd.dolby.mps":{source:'iana'},"audio/vnd.dolby.pl2":{source:'iana'},"audio/vnd.dolby.pl2x":{source:'iana'},"audio/vnd.dolby.pl2z":{source:'iana'},"audio/vnd.dolby.pulse.1":{source:'iana'},"audio/vnd.dra":{source:'iana',extensions:['dra']},"audio/vnd.dts":{source:'iana',extensions:['dts']},"audio/vnd.dts.hd":{source:'iana',extensions:['dtshd']},"audio/vnd.dvb.file":{source:'iana'},"audio/vnd.everad.plj":{source:'iana'},"audio/vnd.hns.audio":{source:'iana'},"audio/vnd.lucent.voice":{source:'iana',extensions:['lvp']},"audio/vnd.ms-playready.media.pya":{source:'iana',extensions:['pya']},"audio/vnd.nokia.mobile-xmf":{source:'iana'},"audio/vnd.nortel.vbk":{source:'iana'},"audio/vnd.nuera.ecelp4800":{source:'iana',extensions:['ecelp4800']},"audio/vnd.nuera.ecelp7470":{source:'iana',extensions:['ecelp7470']},"audio/vnd.nuera.ecelp9600":{source:'iana',extensions:['ecelp9600']},"audio/vnd.octel.sbc":{source:'iana'},"audio/vnd.presonus.multitrack":{source:'iana'},"audio/vnd.qcelp":{source:'iana'},"audio/vnd.rhetorex.32kadpcm":{source:'iana'},"audio/vnd.rip":{source:'iana',extensions:['rip']},"audio/vnd.rn-realaudio":{compressible:!1},"audio/vnd.sealedmedia.softseal.mpeg":{source:'iana'},"audio/vnd.vmx.cvsd":{source:'iana'},"audio/vnd.wave":{compressible:!1},"audio/vorbis":{source:'iana',compressible:!1},"audio/vorbis-config":{source:'iana'},"audio/wav":{compressible:!1,extensions:['wav']},"audio/wave":{compressible:!1,extensions:['wav']},"audio/webm":{source:'apache',compressible:!1,extensions:['weba']},"audio/x-aac":{source:'apache',compressible:!1,extensions:['aac']},"audio/x-aiff":{source:'apache',extensions:['aif','aiff','aifc']},"audio/x-caf":{source:'apache',compressible:!1,extensions:['caf']},"audio/x-flac":{source:'apache',extensions:['flac']},"audio/x-m4a":{source:'nginx',extensions:['m4a']},"audio/x-matroska":{source:'apache',extensions:['mka']},"audio/x-mpegurl":{source:'apache',extensions:['m3u']},"audio/x-ms-wax":{source:'apache',extensions:['wax']},"audio/x-ms-wma":{source:'apache',extensions:['wma']},"audio/x-pn-realaudio":{source:'apache',extensions:['ram','ra']},"audio/x-pn-realaudio-plugin":{source:'apache',extensions:['rmp']},"audio/x-realaudio":{source:'nginx',extensions:['ra']},"audio/x-tta":{source:'apache'},"audio/x-wav":{source:'apache',extensions:['wav']},"audio/xm":{source:'apache',extensions:['xm']},"chemical/x-cdx":{source:'apache',extensions:['cdx']},"chemical/x-cif":{source:'apache',extensions:['cif']},"chemical/x-cmdf":{source:'apache',extensions:['cmdf']},"chemical/x-cml":{source:'apache',extensions:['cml']},"chemical/x-csml":{source:'apache',extensions:['csml']},"chemical/x-pdb":{source:'apache'},"chemical/x-xyz":{source:'apache',extensions:['xyz']},"font/collection":{source:'iana',extensions:['ttc']},"font/otf":{source:'iana',compressible:!0,extensions:['otf']},"font/sfnt":{source:'iana'},"font/ttf":{source:'iana',extensions:['ttf']},"font/woff":{source:'iana',extensions:['woff']},"font/woff2":{source:'iana',extensions:['woff2']},"image/aces":{source:'iana'},"image/apng":{compressible:!1,extensions:['apng']},"image/bmp":{source:'iana',compressible:!0,extensions:['bmp']},"image/cgm":{source:'iana',extensions:['cgm']},"image/dicom-rle":{source:'iana'},"image/emf":{source:'iana'},"image/fits":{source:'iana'},"image/g3fax":{source:'iana',extensions:['g3']},"image/gif":{source:'iana',compressible:!1,extensions:['gif']},"image/ief":{source:'iana',extensions:['ief']},"image/jls":{source:'iana'},"image/jp2":{source:'iana',compressible:!1,extensions:['jp2','jpg2']},"image/jpeg":{source:'iana',compressible:!1,extensions:['jpeg','jpg','jpe']},"image/jpm":{source:'iana',compressible:!1,extensions:['jpm']},"image/jpx":{source:'iana',compressible:!1,extensions:['jpx','jpf']},"image/ktx":{source:'iana',extensions:['ktx']},"image/naplps":{source:'iana'},"image/pjpeg":{compressible:!1},"image/png":{source:'iana',compressible:!1,extensions:['png']},"image/prs.btif":{source:'iana',extensions:['btif']},"image/prs.pti":{source:'iana'},"image/pwg-raster":{source:'iana'},"image/sgi":{source:'apache',extensions:['sgi']},"image/svg+xml":{source:'iana',compressible:!0,extensions:['svg','svgz']},"image/t38":{source:'iana'},"image/tiff":{source:'iana',compressible:!1,extensions:['tiff','tif']},"image/tiff-fx":{source:'iana'},"image/vnd.adobe.photoshop":{source:'iana',compressible:!0,extensions:['psd']},"image/vnd.airzip.accelerator.azv":{source:'iana'},"image/vnd.cns.inf2":{source:'iana'},"image/vnd.dece.graphic":{source:'iana',extensions:['uvi','uvvi','uvg','uvvg']},"image/vnd.djvu":{source:'iana',extensions:['djvu','djv']},"image/vnd.dvb.subtitle":{source:'iana',extensions:['sub']},"image/vnd.dwg":{source:'iana',extensions:['dwg']},"image/vnd.dxf":{source:'iana',extensions:['dxf']},"image/vnd.fastbidsheet":{source:'iana',extensions:['fbs']},"image/vnd.fpx":{source:'iana',extensions:['fpx']},"image/vnd.fst":{source:'iana',extensions:['fst']},"image/vnd.fujixerox.edmics-mmr":{source:'iana',extensions:['mmr']},"image/vnd.fujixerox.edmics-rlc":{source:'iana',extensions:['rlc']},"image/vnd.globalgraphics.pgb":{source:'iana'},"image/vnd.microsoft.icon":{source:'iana'},"image/vnd.mix":{source:'iana'},"image/vnd.mozilla.apng":{source:'iana'},"image/vnd.ms-modi":{source:'iana',extensions:['mdi']},"image/vnd.ms-photo":{source:'apache',extensions:['wdp']},"image/vnd.net-fpx":{source:'iana',extensions:['npx']},"image/vnd.radiance":{source:'iana'},"image/vnd.sealed.png":{source:'iana'},"image/vnd.sealedmedia.softseal.gif":{source:'iana'},"image/vnd.sealedmedia.softseal.jpg":{source:'iana'},"image/vnd.svf":{source:'iana'},"image/vnd.tencent.tap":{source:'iana'},"image/vnd.valve.source.texture":{source:'iana'},"image/vnd.wap.wbmp":{source:'iana',extensions:['wbmp']},"image/vnd.xiff":{source:'iana',extensions:['xif']},"image/vnd.zbrush.pcx":{source:'iana'},"image/webp":{source:'apache',extensions:['webp']},"image/wmf":{source:'iana'},"image/x-3ds":{source:'apache',extensions:['3ds']},"image/x-cmu-raster":{source:'apache',extensions:['ras']},"image/x-cmx":{source:'apache',extensions:['cmx']},"image/x-freehand":{source:'apache',extensions:['fh','fhc','fh4','fh5','fh7']},"image/x-icon":{source:'apache',compressible:!0,extensions:['ico']},"image/x-jng":{source:'nginx',extensions:['jng']},"image/x-mrsid-image":{source:'apache',extensions:['sid']},"image/x-ms-bmp":{source:'nginx',compressible:!0,extensions:['bmp']},"image/x-pcx":{source:'apache',extensions:['pcx']},"image/x-pict":{source:'apache',extensions:['pic','pct']},"image/x-portable-anymap":{source:'apache',extensions:['pnm']},"image/x-portable-bitmap":{source:'apache',extensions:['pbm']},"image/x-portable-graymap":{source:'apache',extensions:['pgm']},"image/x-portable-pixmap":{source:'apache',extensions:['ppm']},"image/x-rgb":{source:'apache',extensions:['rgb']},"image/x-tga":{source:'apache',extensions:['tga']},"image/x-xbitmap":{source:'apache',extensions:['xbm']},"image/x-xcf":{compressible:!1},"image/x-xpixmap":{source:'apache',extensions:['xpm']},"image/x-xwindowdump":{source:'apache',extensions:['xwd']},"message/cpim":{source:'iana'},"message/delivery-status":{source:'iana'},"message/disposition-notification":{source:'iana',extensions:['disposition-notification']},"message/external-body":{source:'iana'},"message/feedback-report":{source:'iana'},"message/global":{source:'iana',extensions:['u8msg']},"message/global-delivery-status":{source:'iana',extensions:['u8dsn']},"message/global-disposition-notification":{source:'iana',extensions:['u8mdn']},"message/global-headers":{source:'iana',extensions:['u8hdr']},"message/http":{source:'iana',compressible:!1},"message/imdn+xml":{source:'iana',compressible:!0},"message/news":{source:'iana'},"message/partial":{source:'iana',compressible:!1},"message/rfc822":{source:'iana',compressible:!0,extensions:['eml','mime']},"message/s-http":{source:'iana'},"message/sip":{source:'iana'},"message/sipfrag":{source:'iana'},"message/tracking-status":{source:'iana'},"message/vnd.si.simp":{source:'iana'},"message/vnd.wfa.wsc":{source:'iana',extensions:['wsc']},"model/3mf":{source:'iana'},"model/gltf+json":{source:'iana',compressible:!0,extensions:['gltf']},"model/gltf-binary":{source:'iana',compressible:!0,extensions:['glb']},"model/iges":{source:'iana',compressible:!1,extensions:['igs','iges']},"model/mesh":{source:'iana',compressible:!1,extensions:['msh','mesh','silo']},"model/vnd.collada+xml":{source:'iana',extensions:['dae']},"model/vnd.dwf":{source:'iana',extensions:['dwf']},"model/vnd.flatland.3dml":{source:'iana'},"model/vnd.gdl":{source:'iana',extensions:['gdl']},"model/vnd.gs-gdl":{source:'apache'},"model/vnd.gs.gdl":{source:'iana'},"model/vnd.gtw":{source:'iana',extensions:['gtw']},"model/vnd.moml+xml":{source:'iana'},"model/vnd.mts":{source:'iana',extensions:['mts']},"model/vnd.opengex":{source:'iana'},"model/vnd.parasolid.transmit.binary":{source:'iana'},"model/vnd.parasolid.transmit.text":{source:'iana'},"model/vnd.rosette.annotated-data-model":{source:'iana'},"model/vnd.valve.source.compiled-map":{source:'iana'},"model/vnd.vtu":{source:'iana',extensions:['vtu']},"model/vrml":{source:'iana',compressible:!1,extensions:['wrl','vrml']},"model/x3d+binary":{source:'apache',compressible:!1,extensions:['x3db','x3dbz']},"model/x3d+fastinfoset":{source:'iana'},"model/x3d+vrml":{source:'apache',compressible:!1,extensions:['x3dv','x3dvz']},"model/x3d+xml":{source:'iana',compressible:!0,extensions:['x3d','x3dz']},"model/x3d-vrml":{source:'iana'},"multipart/alternative":{source:'iana',compressible:!1},"multipart/appledouble":{source:'iana'},"multipart/byteranges":{source:'iana'},"multipart/digest":{source:'iana'},"multipart/encrypted":{source:'iana',compressible:!1},"multipart/form-data":{source:'iana',compressible:!1},"multipart/header-set":{source:'iana'},"multipart/mixed":{source:'iana',compressible:!1},"multipart/multilingual":{source:'iana'},"multipart/parallel":{source:'iana'},"multipart/related":{source:'iana',compressible:!1},"multipart/report":{source:'iana'},"multipart/signed":{source:'iana',compressible:!1},"multipart/vnd.bint.med-plus":{source:'iana'},"multipart/voice-message":{source:'iana'},"multipart/x-mixed-replace":{source:'iana'},"text/1d-interleaved-parityfec":{source:'iana'},"text/cache-manifest":{source:'iana',compressible:!0,extensions:['appcache','manifest']},"text/calendar":{source:'iana',extensions:['ics','ifb']},"text/calender":{compressible:!0},"text/cmd":{compressible:!0},"text/coffeescript":{extensions:['coffee','litcoffee']},"text/css":{source:'iana',charset:'UTF-8',compressible:!0,extensions:['css']},"text/csv":{source:'iana',compressible:!0,extensions:['csv']},"text/csv-schema":{source:'iana'},"text/directory":{source:'iana'},"text/dns":{source:'iana'},"text/ecmascript":{source:'iana'},"text/encaprtp":{source:'iana'},"text/enriched":{source:'iana'},"text/fwdred":{source:'iana'},"text/grammar-ref-list":{source:'iana'},"text/html":{source:'iana',compressible:!0,extensions:['html','htm','shtml']},"text/jade":{extensions:['jade']},"text/javascript":{source:'iana',compressible:!0},"text/jcr-cnd":{source:'iana'},"text/jsx":{compressible:!0,extensions:['jsx']},"text/less":{extensions:['less']},"text/markdown":{source:'iana',compressible:!0,extensions:['markdown','md']},"text/mathml":{source:'nginx',extensions:['mml']},"text/mizar":{source:'iana'},"text/n3":{source:'iana',compressible:!0,extensions:['n3']},"text/parameters":{source:'iana'},"text/parityfec":{source:'iana'},"text/plain":{source:'iana',compressible:!0,extensions:['txt','text','conf','def','list','log','in','ini']},"text/provenance-notation":{source:'iana'},"text/prs.fallenstein.rst":{source:'iana'},"text/prs.lines.tag":{source:'iana',extensions:['dsc']},"text/prs.prop.logic":{source:'iana'},"text/raptorfec":{source:'iana'},"text/red":{source:'iana'},"text/rfc822-headers":{source:'iana'},"text/richtext":{source:'iana',compressible:!0,extensions:['rtx']},"text/rtf":{source:'iana',compressible:!0,extensions:['rtf']},"text/rtp-enc-aescm128":{source:'iana'},"text/rtploopback":{source:'iana'},"text/rtx":{source:'iana'},"text/sgml":{source:'iana',extensions:['sgml','sgm']},"text/shex":{extensions:['shex']},"text/slim":{extensions:['slim','slm']},"text/strings":{source:'iana'},"text/stylus":{extensions:['stylus','styl']},"text/t140":{source:'iana'},"text/tab-separated-values":{source:'iana',compressible:!0,extensions:['tsv']},"text/troff":{source:'iana',extensions:['t','tr','roff','man','me','ms']},"text/turtle":{source:'iana',extensions:['ttl']},"text/ulpfec":{source:'iana'},"text/uri-list":{source:'iana',compressible:!0,extensions:['uri','uris','urls']},"text/vcard":{source:'iana',compressible:!0,extensions:['vcard']},"text/vnd.a":{source:'iana'},"text/vnd.abc":{source:'iana'},"text/vnd.ascii-art":{source:'iana'},"text/vnd.curl":{source:'iana',extensions:['curl']},"text/vnd.curl.dcurl":{source:'apache',extensions:['dcurl']},"text/vnd.curl.mcurl":{source:'apache',extensions:['mcurl']},"text/vnd.curl.scurl":{source:'apache',extensions:['scurl']},"text/vnd.debian.copyright":{source:'iana'},"text/vnd.dmclientscript":{source:'iana'},"text/vnd.dvb.subtitle":{source:'iana',extensions:['sub']},"text/vnd.esmertec.theme-descriptor":{source:'iana'},"text/vnd.fly":{source:'iana',extensions:['fly']},"text/vnd.fmi.flexstor":{source:'iana',extensions:['flx']},"text/vnd.graphviz":{source:'iana',extensions:['gv']},"text/vnd.in3d.3dml":{source:'iana',extensions:['3dml']},"text/vnd.in3d.spot":{source:'iana',extensions:['spot']},"text/vnd.iptc.newsml":{source:'iana'},"text/vnd.iptc.nitf":{source:'iana'},"text/vnd.latex-z":{source:'iana'},"text/vnd.motorola.reflex":{source:'iana'},"text/vnd.ms-mediapackage":{source:'iana'},"text/vnd.net2phone.commcenter.command":{source:'iana'},"text/vnd.radisys.msml-basic-layout":{source:'iana'},"text/vnd.si.uricatalogue":{source:'iana'},"text/vnd.sun.j2me.app-descriptor":{source:'iana',extensions:['jad']},"text/vnd.trolltech.linguist":{source:'iana'},"text/vnd.wap.si":{source:'iana'},"text/vnd.wap.sl":{source:'iana'},"text/vnd.wap.wml":{source:'iana',extensions:['wml']},"text/vnd.wap.wmlscript":{source:'iana',extensions:['wmls']},"text/vtt":{charset:'UTF-8',compressible:!0,extensions:['vtt']},"text/x-asm":{source:'apache',extensions:['s','asm']},"text/x-c":{source:'apache',extensions:['c','cc','cxx','cpp','h','hh','dic']},"text/x-component":{source:'nginx',extensions:['htc']},"text/x-fortran":{source:'apache',extensions:['f','for','f77','f90']},"text/x-gwt-rpc":{compressible:!0},"text/x-handlebars-template":{extensions:['hbs']},"text/x-java-source":{source:'apache',extensions:['java']},"text/x-jquery-tmpl":{compressible:!0},"text/x-lua":{extensions:['lua']},"text/x-markdown":{compressible:!0,extensions:['mkd']},"text/x-nfo":{source:'apache',extensions:['nfo']},"text/x-opml":{source:'apache',extensions:['opml']},"text/x-org":{compressible:!0,extensions:['org']},"text/x-pascal":{source:'apache',extensions:['p','pas']},"text/x-processing":{compressible:!0,extensions:['pde']},"text/x-sass":{extensions:['sass']},"text/x-scss":{extensions:['scss']},"text/x-setext":{source:'apache',extensions:['etx']},"text/x-sfv":{source:'apache',extensions:['sfv']},"text/x-suse-ymp":{compressible:!0,extensions:['ymp']},"text/x-uuencode":{source:'apache',extensions:['uu']},"text/x-vcalendar":{source:'apache',extensions:['vcs']},"text/x-vcard":{source:'apache',extensions:['vcf']},"text/xml":{source:'iana',compressible:!0,extensions:['xml']},"text/xml-external-parsed-entity":{source:'iana'},"text/yaml":{extensions:['yaml','yml']},"video/1d-interleaved-parityfec":{source:'iana'},"video/3gpp":{source:'iana',extensions:['3gp','3gpp']},"video/3gpp-tt":{source:'iana'},"video/3gpp2":{source:'iana',extensions:['3g2']},"video/bmpeg":{source:'iana'},"video/bt656":{source:'iana'},"video/celb":{source:'iana'},"video/dv":{source:'iana'},"video/encaprtp":{source:'iana'},"video/h261":{source:'iana',extensions:['h261']},"video/h263":{source:'iana',extensions:['h263']},"video/h263-1998":{source:'iana'},"video/h263-2000":{source:'iana'},"video/h264":{source:'iana',extensions:['h264']},"video/h264-rcdo":{source:'iana'},"video/h264-svc":{source:'iana'},"video/h265":{source:'iana'},"video/iso.segment":{source:'iana'},"video/jpeg":{source:'iana',extensions:['jpgv']},"video/jpeg2000":{source:'iana'},"video/jpm":{source:'apache',extensions:['jpm','jpgm']},"video/mj2":{source:'iana',extensions:['mj2','mjp2']},"video/mp1s":{source:'iana'},"video/mp2p":{source:'iana'},"video/mp2t":{source:'iana',extensions:['ts']},"video/mp4":{source:'iana',compressible:!1,extensions:['mp4','mp4v','mpg4']},"video/mp4v-es":{source:'iana'},"video/mpeg":{source:'iana',compressible:!1,extensions:['mpeg','mpg','mpe','m1v','m2v']},"video/mpeg4-generic":{source:'iana'},"video/mpv":{source:'iana'},"video/nv":{source:'iana'},"video/ogg":{source:'iana',compressible:!1,extensions:['ogv']},"video/parityfec":{source:'iana'},"video/pointer":{source:'iana'},"video/quicktime":{source:'iana',compressible:!1,extensions:['qt','mov']},"video/raptorfec":{source:'iana'},"video/raw":{source:'iana'},"video/rtp-enc-aescm128":{source:'iana'},"video/rtploopback":{source:'iana'},"video/rtx":{source:'iana'},"video/smpte291":{source:'iana'},"video/smpte292m":{source:'iana'},"video/ulpfec":{source:'iana'},"video/vc1":{source:'iana'},"video/vnd.cctv":{source:'iana'},"video/vnd.dece.hd":{source:'iana',extensions:['uvh','uvvh']},"video/vnd.dece.mobile":{source:'iana',extensions:['uvm','uvvm']},"video/vnd.dece.mp4":{source:'iana'},"video/vnd.dece.pd":{source:'iana',extensions:['uvp','uvvp']},"video/vnd.dece.sd":{source:'iana',extensions:['uvs','uvvs']},"video/vnd.dece.video":{source:'iana',extensions:['uvv','uvvv']},"video/vnd.directv.mpeg":{source:'iana'},"video/vnd.directv.mpeg-tts":{source:'iana'},"video/vnd.dlna.mpeg-tts":{source:'iana'},"video/vnd.dvb.file":{source:'iana',extensions:['dvb']},"video/vnd.fvt":{source:'iana',extensions:['fvt']},"video/vnd.hns.video":{source:'iana'},"video/vnd.iptvforum.1dparityfec-1010":{source:'iana'},"video/vnd.iptvforum.1dparityfec-2005":{source:'iana'},"video/vnd.iptvforum.2dparityfec-1010":{source:'iana'},"video/vnd.iptvforum.2dparityfec-2005":{source:'iana'},"video/vnd.iptvforum.ttsavc":{source:'iana'},"video/vnd.iptvforum.ttsmpeg2":{source:'iana'},"video/vnd.motorola.video":{source:'iana'},"video/vnd.motorola.videop":{source:'iana'},"video/vnd.mpegurl":{source:'iana',extensions:['mxu','m4u']},"video/vnd.ms-playready.media.pyv":{source:'iana',extensions:['pyv']},"video/vnd.nokia.interleaved-multimedia":{source:'iana'},"video/vnd.nokia.mp4vr":{source:'iana'},"video/vnd.nokia.videovoip":{source:'iana'},"video/vnd.objectvideo":{source:'iana'},"video/vnd.radgamettools.bink":{source:'iana'},"video/vnd.radgamettools.smacker":{source:'iana'},"video/vnd.sealed.mpeg1":{source:'iana'},"video/vnd.sealed.mpeg4":{source:'iana'},"video/vnd.sealed.swf":{source:'iana'},"video/vnd.sealedmedia.softseal.mov":{source:'iana'},"video/vnd.uvvu.mp4":{source:'iana',extensions:['uvu','uvvu']},"video/vnd.vivo":{source:'iana',extensions:['viv']},"video/vp8":{source:'iana'},"video/webm":{source:'apache',compressible:!1,extensions:['webm']},"video/x-f4v":{source:'apache',extensions:['f4v']},"video/x-fli":{source:'apache',extensions:['fli']},"video/x-flv":{source:'apache',compressible:!1,extensions:['flv']},"video/x-m4v":{source:'apache',extensions:['m4v']},"video/x-matroska":{source:'apache',compressible:!1,extensions:['mkv','mk3d','mks']},"video/x-mng":{source:'apache',extensions:['mng']},"video/x-ms-asf":{source:'apache',extensions:['asf','asx']},"video/x-ms-vob":{source:'apache',extensions:['vob']},"video/x-ms-wm":{source:'apache',extensions:['wm']},"video/x-ms-wmv":{source:'apache',compressible:!1,extensions:['wmv']},"video/x-ms-wmx":{source:'apache',extensions:['wmx']},"video/x-ms-wvx":{source:'apache',extensions:['wvx']},"video/x-msvideo":{source:'apache',extensions:['avi']},"video/x-sgi-movie":{source:'apache',extensions:['movie']},"video/x-smv":{source:'apache',extensions:['smv']},"x-conference/x-cooltalk":{source:'apache',extensions:['ice']},"x-shader/x-fragment":{compressible:!0},"x-shader/x-vertex":{compressible:!0}}},function(t,n,a){(function(t){function a(t,n){for(var a=0,r=t.length-1,i;0<=r;r--)i=t[r],'.'===i?t.splice(r,1):'..'===i?(t.splice(r,1),a++):a&&(t.splice(r,1),a--);if(n)for(;a--;a)t.unshift('..');return t}function r(t,n){if(t.filter)return t.filter(n);for(var a=[],r=0;r<t.length;r++)n(t[r],r,t)&&a.push(t[r]);return a}var i=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(t){return i.exec(t).slice(1)};n.resolve=function(){for(var n='',o=!1,s=arguments.length-1,i;-1<=s&&!o;s--){if(i=0<=s?arguments[s]:t.cwd(),'string'!=typeof i)throw new TypeError('Arguments to path.resolve must be strings');else if(!i)continue;n=i+'/'+n,o='/'===i.charAt(0)}return n=a(r(n.split('/'),function(t){return!!t}),!o).join('/'),(o?'/':'')+n||'.'},n.normalize=function(t){var i=n.isAbsolute(t),o='/'===s(t,-1);return t=a(r(t.split('/'),function(t){return!!t}),!i).join('/'),t||i||(t='.'),t&&o&&(t+='/'),(i?'/':'')+t},n.isAbsolute=function(t){return'/'===t.charAt(0)},n.join=function(){var t=Array.prototype.slice.call(arguments,0);return n.normalize(r(t,function(t,n){if('string'!=typeof t)throw new TypeError('Arguments to path.join must be strings');return t}).join('/'))},n.relative=function(t,a){function r(t){for(var n=0;n<t.length&&''===t[n];n++);for(var a=t.length-1;0<=a&&''===t[a];a--);return n>a?[]:t.slice(n,a-n+1)}t=n.resolve(t).substr(1),a=n.resolve(a).substr(1);for(var o=r(t.split('/')),s=r(a.split('/')),d=_Mathmin(o.length,s.length),l=d,c=0;c<d;c++)if(o[c]!==s[c]){l=c;break}for(var i=[],c=l;c<o.length;c++)i.push('..');return i=i.concat(s.slice(l)),i.join('/')},n.sep='/',n.delimiter=':',n.dirname=function(t){var n=o(t),a=n[0],r=n[1];return a||r?(r&&(r=r.substr(0,r.length-1)),a+r):'.'},n.basename=function(t,n){var a=o(t)[2];return n&&a.substr(-1*n.length)===n&&(a=a.substr(0,a.length-n.length)),a},n.extname=function(t){return o(t)[3]};var s='b'==='ab'.substr(-1)?function(t,n,a){return t.substr(n,a)}:function(t,n,a){return 0>n&&(n=t.length+n),t.substr(n,a)}}).call(n,a(11))},function(t,n,a){'use strict';function r(t,n,a,r,i,s){function d(t){console.log(t),C.textContent+=t+'\n'}function l(){var t=u.each(void 0,m('inAddressBook'),r).length;d(''+t+' cards loaded. ');var a=u.each(r,m('includesGroup'));d(''+a.length+' total groups. ');var i=[],o;for(o in n)i.push(o);d(''+i.length+' selected groups. ')}var u=o.store,f=o.ns,m=f.vcard,c='font-size: 100%; margin: 0.8em; padding:0.5em;',h=i.createElement('div'),g=h.appendChild(i.createElement('table'));g.setAttribute('style','font-size:120%; margin: 1em; border: 0.1em #ccc ;');var b=g.appendChild(i.createElement('tr'));b.textContent=o.utils.label(r)+' - tools',b.setAttribute('style','min-width: 20em; padding: 1em; font-size: 150%; border-bottom: 0.1em solid red; margin-bottom: 2em;');var y=g.appendChild(i.createElement('tr')),w=y.appendChild(i.createElement('div'));w.setAttribute('style','padding: 2em;');var v=g.appendChild(i.createElement('tr')),x=v.appendChild(i.createElement('table')),_=g.appendChild(i.createElement('tr')),k={target:r,me:s,noun:'address book',div:h,dom:i,statusRegion:w};x.appendChild(o.aclControl.ACLControlBox5(r.dir(),i,'book',u,function(t,n){t||(x.innerHTML='ACL control box Failed: '+n)})),o.authn.registrationControl(k,r,f.vcard('AddressBook')).then(function(t){console.log('Registration control finished.')}).catch(function(t){o.widgets.complain(k,t)});var C=v.appendChild(i.createElement('pre')),E=h.appendChild(i.createElement('button'));E.textContent='Load main index',E.style.cssText=c,E.addEventListener('click',function(t){E.setAttribute('style','background-color: #ffc;');var n=u.any(r,f.vcard('nameEmailIndex'));o.store.fetcher.nowOrWhenFetched(n,void 0,function(t,n){t?(E.setAttribute('style','background-color: #cfc;'),d(' People index has been loaded\n')):(E.setAttribute('style','background-color: #fcc;'),d('Error: People index has NOT been loaded'+n+'\n'))})});var T=h.appendChild(i.createElement('button'));T.textContent='Statistics',T.style.cssText=c,T.addEventListener('click',l);var A=v.appendChild(i.createElement('button'));A.textContent='Check inidividual card access of selected groups',A.style.cssText=c,A.addEventListener('click',function(t){var r=[],s;for(s in n)r.push(s);for(var l=0;l<r.length;l++){var s=u.sym(r[l]),i=u.each(s,f.vcard('hasMember'));d(o.utils.label(s)+': '+i.length+' members');for(var a=0;a<i.length;a++){var c=function t(n){o.widgets.fixIndividualCardACL(n,d,function(t,a){t?d('Sucess for '+o.utils.label(n)):d('Failure for '+o.utils.label(n)+': '+a)})},m=i[a];d(o.utils.label(m)),c(m)}}});var S=v.appendChild(i.createElement('button'));S.textContent='Find duplicate cards',S.style.cssText=c,S.addEventListener('click',function(t){var a={};a.book=r,a.nameEmailIndex=u.any(r,f.vcard('nameEmailIndex')),d('Loading name index...'),o.store.fetcher.nowOrWhenFetched(a.nameEmailIndex,void 0,function(t,n){function i(t){return new Promise(function(n,r){function i(){var i=u.connectedStatements(t,a.nameEmailIndex);d('Bits of the name index file:'+i),d('Patching main index file...'),u.updater.update(i,[],function(t,a,i){a?(d('Success'),n(null)):(d('Error patching index file! '+i),r('Error patching index file! '+i))})}function o(){var a=s.shift();a||(d('All deleted'),i(),n()),d('Deleting ... '+a),u.fetcher.delete(a).then(function(){d('Deleted ok: '+a),o()}).catch(function(n){var o='*** ERROR deleteing '+a+': '+n;d(o),confirm('Patch out index file for card '+t.dir()+' EVEN THOUGH card DELETE errors?')?i():r(o)})}var s=[t.doc()],l=u.each(t,f.vcard('hasPhoto'));return l.length&&(s=s.concat(l)),s.push(t.dir()),d('Files to delete: '+s),confirm('DELETE card '+t.dir()+' for "'+u.any(t,m('fn'))+'", with '+u.each(t).length+'statements?')?void o():n('Cancelled by user')})}function o(t){return new Promise(function(n,r){var i=u.anyValue(t,f.vcard('fn')),o=a.definitive[i];u.fetcher.load([t,o]).then(function(r){function i(t){return u.statementsMatching(null,null,null,t.doc()).filter(function(t){return!s[t.predicate.uri]})}var s={};s[f.vcard('hasUID').uri]=!0,s[f.dc('created').uri]=!0,s[f.dc('modified').uri]=!0;var l=i(t),c=i(o);if(l.length!==c.length)return d('CARDS to NOT match lengths '),a.nameOnlyDuplicates.push(t),n(!1);if(!l.length)return d('@@@@@@  Zero length '),a.nameOnlyDuplicates.push(t),n(!1);var m=new $rdf.Serializer(u).setBase(t.doc().uri).statementsToN3(l),h=new $rdf.Serializer(u).setBase(o.doc().uri).statementsToN3(c);if(m!==h)return d('Texts differ'),a.nameOnlyDuplicates.push(t),n(!1);for(var g=u.each(null,f.vcard('hasMember'),t),b=u.each(null,f.vcard('hasMember'),o),y=0,w;y<g.length;y++){w=!1;for(var v=0;v<b.length;v++)b[v].sameTerm(g[y])&&(w=!0);if(!w)return d('This one groups: '+g),d('Other one groups: '+b),d('Cant delete this one because it has a group, '+g[y]+', which the other does not.'),a.nameOnlyDuplicates.push(t),n(!1)}console.log('Group check done -- exact duplicate: '+t),a.exactDuplicates.push(t),n(!0)}).catch(function(r){d('Cant load a card! '+[t,o]+': '+r),a.nameOnlyDuplicates.push(t),n(!1)})})}function s(t){return new Promise(function(n,r){u.fetcher.load(t).then(function(r){function i(t){return u.statementsMatching(null,null,null,t.doc()).filter(function(t){return!o[t.predicate.uri]})}d(' Nameless check '+t);var o={};o[f.vcard('hasUID').uri]=!0,o[f.dc('created').uri]=!0,o[f.dc('modified').uri]=!0;var s=i(t);if(!s.length)return d('  Zero length '+t),a.nameLessZeroData.push(t),n(!1);var l=new $rdf.Serializer(u).setBase(t.doc().uri).statementsToN3(s),c=a.nameLessIndex[l];if(c){d('  Matches with '+c);for(var m=u.each(null,f.vcard('hasMember'),t),h=u.each(null,f.vcard('hasMember'),c),g=0,b;g<m.length;g++){b=!1;for(var y=0;y<h.length;y++)h[y].sameTerm(m[g])&&(b=!0);if(!b)return d('This one groups: '+m),d('Other one groups: '+h),d('Cant skip this one because it has a group, '+m[g]+', which the other does not.'),a.nameOnlyDuplicatesGroupDiff.push(t),n(!1)}console.log('Group check done -- exact duplicate: '+t)}else d('First nameless like: '+t.doc()),d('___________________________________________'),d(l),d('___________________________________________'),a.nameLessIndex[l]=t,a.namelessUniques.push(t);n(!0)}).catch(function(r){d('Cant load a nameless card!: '+r),a.nameOnlyErrors.push(t),n(!1)})})}function l(){return new Promise(function(t,n){var r=v.shift();return r?void o(r).then(function(t){var n=t?a.exactDupLog:a.nameDupLog,i=t?'ExactDuplicate':'NameOnlyDuplicate';u.updater.update([],$rdf.st(r,f.rdf('type'),f.vcard(i),n),function(t,n,a){n?l():d('Stop: log write failure '+a)})}):t(!0)})}function c(){return a.namelessToCheck=a.namelessToCheck||a.nameless.slice(),d('Nameless check left: '+a.namelessToCheck.length),new Promise(function(t,n){var r=a.namelessToCheck.shift();if(!r){if(d('namelessUniques: '+a.namelessUniques.length),d('namelessUniques: '+a.namelessUniques),confirm('Add all '+a.namelessUniques.length+' nameless cards to the rescued set?')){a.uniques=a.uniques.concat(a.namelessUniques);for(var i=0;i<a.namelessUniques.length;i++)a.uniqueSet[a.namelessUniques[i].uri]=!0}return t(!0)}s(r).then(function(t){d('    Namelessc check returns '+t),c()})})}function h(){return new Promise(function(t,n){var r=0;d('Groups loaded');for(var o=0;o<a.uniques.length;o++)a.uniquesSet[a.uniques[o].uri]=!0;a.groupMembers=u.statementsMatching(null,f.vcard('hasMember')).map(function(t){return t.object}),d('  Naive group members '+a.groupMembers.length),a.groupMemberSet=[];for(var i=0;i<a.groupMembers.length;i++)a.groupMemberSet[a.groupMembers[i].uri]=a.groupMembers[i];for(var s in a.groupMembers2=[],a.groupMemberSet)a.groupMembers2.push(a.groupMemberSet[s]);if(d('  Compact group members '+a.groupMembers2.length),!1){for(var l=0,c;l<a.groupMembers.length;l++)c=a.groupMembers[l],a.uniquesSet[c.uri]?r+=1:(d('  Not in uniques: '+c),a.groupProblems.push(c),a.duplicateSet[c.uri]?d('    ** IN duplicates alas:'+c):d('   **** WTF?'));d('Problem cards: '+a.groupProblems.length)}t(!0)})}function g(){return new Promise(function(t,r){a.cards=u.each(void 0,m('inAddressBook'),a.book),d(''+a.cards.length+' total cards');var o,s,l;for(o=0;o<a.cards.length;o++){if(s=a.cards[o],l=u.anyValue(s,f.vcard('fn')),!l){a.nameless.push(s);continue}if(a.definitive[l]===s);else if(a.definitive[l]){var c=a.duplicates.length;100>c||1e3>c&&0==c%10||0==c%100,a.duplicates.push(s)}else a.definitive[l]=s}a.duplicateSet=[];for(var n=0;n<a.duplicates.length;n++)a.duplicateSet[a.duplicates[n].uri]=a.duplicates[n];for(a.namelessSet=[],n=0;n<a.nameless.length;n++)a.namelessSet[a.nameless[n].uri]=a.nameless[n];for(a.uniques=[],a.uniqueSet=[],n=0;n<a.cards.length;n++){var i=a.cards[n].uri;a.duplicateSet[i]||a.namelessSet[i]||(a.uniques.push(a.cards[n]),a.uniqueSet[i]=a.cards[n])}d('Uniques: '+a.uniques.length),d(''+a.nameless.length+' nameless cards.'),d(''+a.duplicates.length+' name-duplicate cards, leaving '+(a.cards.length-a.duplicates.length)),t(!0)})}function b(){var t;return Promise.resolve().then(function(){t=u.sym(a.book.dir().uri+'clean-people.ttl');for(var n=[],r=0;r<a.uniques.length;r++)n=n.concat(u.connectedStatements(a.uniques[r],a.nameEmailIndex));var i=new $rdf.Serializer(u).setBase(a.nameEmailIndex.uri);d('Serializing index of uniques...');var o=i.statementsToN3(n);return u.fetcher.webOperation('PUT',t,{data:o,contentType:'text/turtle'})}).then(function(){return d('Done uniques log '+t),!0}).catch(function(t){d('Error saving uniques: '+t)})}function y(t){var n;return Promise.resolve().then(function(){var r=t.uri.replace('/Group/','/NewGroup/');n=u.sym(r);for(var o=[],s=0;s<a.uniques.length;s++)o=o.concat(u.connectedStatements(a.uniques[s],t.doc()));var i=new $rdf.Serializer(u).setBase(t.uri);d('   Regenerating group of uniques...'+n);var l=i.statementsToN3(o);return u.fetcher.webOperation('PUT',n,{data:l})}).then(function(){return d('     Done uniques group '+n),!0}).catch(function(t){d('Error saving : '+t)})}function w(){return d('Saving ALL GROUPS'),Promise.all(a.groupObjects.map(y))}d('Loaded name index.'),a.cards=[],a.duplicates=[],a.definitive=[],a.nameless=[],a.exactDuplicates=[],a.nameOnlyDuplicates=[],a.uniquesSet=[],a.groupProblems=[],a.nameDupLog=u.sym(r.dir().uri+'dedup-nameDupLog.ttl'),a.exactDupLog=u.sym(r.dir().uri+'dedup-exactDupLog.ttl'),a.nameOnlyErrors=[],a.nameLessZeroData=[],a.nameLessIndex=[],a.namelessUniques=[],a.nameOnlyDuplicatesGroupDiff=[];var v=a.duplicates.slice(),x=function t(){var n=[];if(a.book){var r=[a.book];r.map(function(t){var a=t?u.each(t,f.vcard('includesGroup')):[],r=a.map(function(n){return[t,u.any(n,f.vcard('fn')),n]});n=n.concat(r)}),n.sort()}return n},_=x();a.groupObjects=_.map(function(t){return t[2]}),d('Loading '+a.groupObjects.length+' groups... '),u.fetcher.load(a.groupObjects).then(g).then(h).then(c).then(function(t,n){confirm('Write new clean versions?')?t(!0):n()}).then(b).then(w).then(function(t,n){d('Done!')})})});var I=v.appendChild(i.createElement('button'));return I.style.cssText=c,I.textContent='Find inidividuals with no group',I.addEventListener('click',function(i){d('Loading groups...'),t(n,a,function(t,n){if(!t)return void d('Failed: '+n);var a=u.any(r,f.vcard('nameEmailIndex'));o.store.fetcher.nowOrWhenFetched(a,void 0,function(t,n){d('Loaded groups and name index.');var s={},l=[],h=u.each(r,m('includesGroup'));d(''+h.length+' total groups. ');for(var b=0;b<h.length;b++){var i=h[b],g=u.each(i,f.vcard('hasMember'));d(o.utils.label(i)+': '+g.length+' members');for(var a=0;a<g.length;a++)u.allAliases(g[a]).forEach(function(t){s[t.uri]=i})}var y=u.each(void 0,m('inAddressBook'),r);d(''+y.length+' total cards');for(var w=0;w<y.length;w++)s[y[w].uri]||(l.push(y[w]),d('   groupless '+o.utils.label(y[w])));d(''+l.length+' groupless cards.')})})}),h}var o=a(1);t.exports={},t.exports.toolsPane=r},function(t,n,a){'use strict';t.exports='\n@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>.\n@prefix ui: <http://www.w3.org/ns/ui#>.\n@prefix : <#>.\n\n<http://www.w3.org/2006/vcard/ns#Individual>\n    ui:creationForm <#form1> .\n\n\n<#form1>\n    <http://purl.org/dc/elements/1.1/title> "Contact Details" ;\n    a ui:Form ;\n    ui:part\n        <#fullNameField>,   <#roleField>,   <#fullNameFieldC>, <#addressesComment>, <#addresses>,\n        <#emailComment>, <#eMails>,\n        <#telephoneComment>, <#telephones>, <#noteComment>, <#noteField> ;\n    ui:parts (\n                <#fullNameField>  <#roleField> <#fullNameFieldC>\n                 <#addressesComment> <#addresses>\n                <#emailComment> <#eMails>\n                <#telephoneComment> <#telephones> <#noteComment> <#noteField> ) .\n\n    <#fullNameField>\n        a <http://www.w3.org/ns/ui#SingleLineTextField> ;\n        ui:label "Name";\n        <http://www.w3.org/ns/ui#maxLength> "128" ;\n        <http://www.w3.org/ns/ui#property> <http://www.w3.org/2006/vcard/ns#fn> ;\n        <http://www.w3.org/ns/ui#size> "40" .\n\n    <#roleField>\n        a <http://www.w3.org/ns/ui#SingleLineTextField> ;\n        <http://www.w3.org/ns/ui#maxLength> "128" ;\n        <http://www.w3.org/ns/ui#property> <http://www.w3.org/2006/vcard/ns#role> ;\n        <http://www.w3.org/ns/ui#size> "40" .\n\n      <#fullNameFieldC>\n          a <http://www.w3.org/ns/ui#SingleLineTextField> ;\n          <http://www.w3.org/ns/ui#maxLength> "128" ;\n          <http://www.w3.org/ns/ui#property> <http://www.w3.org/2006/vcard/ns#organization-name> ;\n          <http://www.w3.org/ns/ui#size> "40" .\n\n\n<#addressesComment>\n    a <http://www.w3.org/ns/ui#Comment> ;\n    <http://www.w3.org/ns/ui#contents> "Address" .\n\n\n<#addresses>\n    <http://purl.org/dc/elements/1.1/title> "Address details" ;\n    a <http://www.w3.org/ns/ui#Multiple> ;\n    <http://www.w3.org/ns/ui#part> <#oneAddress> ;\n    <http://www.w3.org/ns/ui#property> <http://www.w3.org/2006/vcard/ns#hasAddress> .\n\n<#oneAddress>\n    a <http://www.w3.org/ns/ui#Group> ;\n    <http://www.w3.org/ns/ui#parts> ( <#id1409437207443> <#id1409437292400> <#id1409437421996> <#id1409437467649> <#id1409437569420> <#id1409437646712> ).\n\n<#id1409437207443>\n    a <http://www.w3.org/ns/ui#SingleLineTextField> ;\n    <http://www.w3.org/ns/ui#maxLength> "128" ;\n    <http://www.w3.org/ns/ui#property> <http://www.w3.org/2006/vcard/ns#street-address> ;\n    <http://www.w3.org/ns/ui#size> "40" .\n\n<#id1409437292400>\n    a <http://www.w3.org/ns/ui#SingleLineTextField> ;\n    <http://www.w3.org/ns/ui#maxLength> "128" ;\n    <http://www.w3.org/ns/ui#property> <http://www.w3.org/2006/vcard/ns#locality> ;\n    <http://www.w3.org/ns/ui#size> "40" .\n\n<#id1409437421996>\n    a <http://www.w3.org/ns/ui#SingleLineTextField> ;\n    <http://www.w3.org/ns/ui#maxLength> "25" ;\n    <http://www.w3.org/ns/ui#property> <http://www.w3.org/2006/vcard/ns#postal-code> ;\n    <http://www.w3.org/ns/ui#size> "25" .\n\n<#id1409437467649>\n    a <http://www.w3.org/ns/ui#SingleLineTextField> ;\n    <http://www.w3.org/ns/ui#maxLength> "128" ;\n    <http://www.w3.org/ns/ui#property> <http://www.w3.org/2006/vcard/ns#region> ;\n    <http://www.w3.org/ns/ui#size> "40" .\n\n<#id1409437569420>\n    a <http://www.w3.org/ns/ui#SingleLineTextField> ;\n    <http://www.w3.org/ns/ui#maxLength> "128" ;\n    <http://www.w3.org/ns/ui#property> <http://www.w3.org/2006/vcard/ns#country-name> ;\n    <http://www.w3.org/ns/ui#size> "40" .\n\n<#id1409437646712>\n    a <http://www.w3.org/ns/ui#Classifier> ;\n    <http://www.w3.org/ns/ui#from> rdf:Class ;\n    <http://www.w3.org/ns/ui#property> <http://purl.org/dc/terms/type> .\n\n\n##############################\n\n<#emailComment>\n    a <http://www.w3.org/ns/ui#Comment> ;\n    <http://www.w3.org/ns/ui#contents> "Email" .\n\n\n<#eMails>\n    a <http://www.w3.org/ns/ui#Multiple> ;\n    <http://www.w3.org/ns/ui#part> <#oneEMail> ;\n    <http://www.w3.org/ns/ui#property> <http://www.w3.org/2006/vcard/ns#hasEmail> .\n\n<#oneEMail>\n    a <http://www.w3.org/ns/ui#Group> ;\n    <http://www.w3.org/ns/ui#part> <#emailValue>, <#emailType> .\n\n<#emailValue>\n    a <http://www.w3.org/ns/ui#EmailField> ; ui:label "email";\n    <http://www.w3.org/ns/ui#property> <http://www.w3.org/2006/vcard/ns#value> ;\n    <http://www.w3.org/ns/ui#size> "50" .\n\n<#emailType>\n    a <http://www.w3.org/ns/ui#Classifier> ;\n    <http://www.w3.org/ns/ui#canMintNew> "0" ;\n    <http://www.w3.org/ns/ui#category> <http://www.w3.org/2006/vcard/ns#Type> ;\n    <http://www.w3.org/ns/ui#from> <http://www.w3.org/2006/vcard/ns#Type> ;\n    <http://www.w3.org/ns/ui#property> <http://purl.org/dc/terms/type> .\n\n##############################\n\n<#telephoneComment>\n    a <http://www.w3.org/ns/ui#Comment> ;\n    <http://www.w3.org/ns/ui#contents> "Phones" .\n\n\n<#telephones>\n    a <http://www.w3.org/ns/ui#Multiple> ;\n    <http://www.w3.org/ns/ui#part> <#onetelephone> ;\n    <http://www.w3.org/ns/ui#property> <http://www.w3.org/2006/vcard/ns#hasTelephone> .\n\n<#onetelephone>\n    a <http://www.w3.org/ns/ui#Group> ;\n    <http://www.w3.org/ns/ui#part> <#telephoneValue>, <#telephoneType> .\n\n<#telephoneValue>\n    a <http://www.w3.org/ns/ui#PhoneField> ;\n    <http://www.w3.org/ns/ui#property> <http://www.w3.org/2006/vcard/ns#value> ;\n    <http://www.w3.org/ns/ui#size> "50" .\n\n<#telephoneType>\n    a <http://www.w3.org/ns/ui#Classifier> ;\n    <http://www.w3.org/ns/ui#canMintNew> "0" ;\n    <http://www.w3.org/ns/ui#category> <http://www.w3.org/2006/vcard/ns#Type> ;\n    <http://www.w3.org/ns/ui#from> <http://www.w3.org/2006/vcard/ns#Type> ;\n    <http://www.w3.org/ns/ui#property> <http://purl.org/dc/terms/type> .\n\n##############################\n\n<#noteComment>\n    a <http://www.w3.org/ns/ui#Comment> ;\n    <http://www.w3.org/ns/ui#contents> "General Notes" .\n\n<#noteField>\n    a <http://www.w3.org/ns/ui#MultiLineTextField> ;\n    <http://www.w3.org/ns/ui#property> <http://www.w3.org/2006/vcard/ns#note> .\n'},function(t,n,a){'use strict';t.exports='\n@prefix : <http://www.w3.org/2006/vcard/ns#> .\n@prefix owl: <http://www.w3.org/2002/07/owl#> .\n@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .\n@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .\n@prefix xml: <http://www.w3.org/XML/1998/namespace> .\n@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .\n\n:Acquaintance a owl:Class ;\n    rdfs:label "Acquaintance"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :RelatedType .\n\n:Agent a owl:Class ;\n    rdfs:label "Agent"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :RelatedType .\n\n:BBS a owl:Class ;\n    rdfs:label "BBS"@en ;\n    rdfs:comment "This class is deprecated"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :TelephoneType ;\n    owl:deprecated true .\n\n:Car a owl:Class ;\n    rdfs:label "Car"@en ;\n    rdfs:comment "This class is deprecated"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :TelephoneType ;\n    owl:deprecated true .\n\n:Cell a owl:Class ;\n    rdfs:label "Cell"@en ;\n    rdfs:comment "Also called mobile telephone"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :TelephoneType .\n\n:Child a owl:Class ;\n    rdfs:label "Child"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :RelatedType .\n\n:Colleague a owl:Class ;\n    rdfs:label "Colleague"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :RelatedType .\n\n:Contact a owl:Class ;\n    rdfs:label "Contact"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :RelatedType .\n\n:Coresident a owl:Class ;\n    rdfs:label "Coresident"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :RelatedType .\n\n:Coworker a owl:Class ;\n    rdfs:label "Coworker"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :RelatedType .\n\n:Crush a owl:Class ;\n    rdfs:label "Crush"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :RelatedType .\n\n:Date a owl:Class ;\n    rdfs:label "Date"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :RelatedType .\n\n:Dom a owl:Class ;\n    rdfs:label "Dom"@en ;\n    rdfs:comment "This class is deprecated"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :Type ;\n    owl:deprecated true .\n\n:Emergency a owl:Class ;\n    rdfs:label "Emergency"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :RelatedType .\n\n:Fax a owl:Class ;\n    rdfs:label "Fax"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :TelephoneType .\n\n:Female a owl:Class ;\n    rdfs:label "Female"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :Gender .\n\n:Friend a owl:Class ;\n    rdfs:label "Friend"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :RelatedType .\n\n:Home a owl:Class ;\n    rdfs:label "Home"@en ;\n    rdfs:comment "This implies that the property is related to an individual\'s personal life"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :Type .\n\n:ISDN a owl:Class ;\n    rdfs:label "ISDN"@en ;\n    rdfs:comment "This class is deprecated"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :Type ;\n    owl:deprecated true .\n\n:Internet a owl:Class ;\n    rdfs:label "Internet"@en ;\n    rdfs:comment "This class is deprecated"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :Type ;\n    owl:deprecated true .\n\n:Intl a owl:Class ;\n    rdfs:label "Intl"@en ;\n    rdfs:comment "This class is deprecated"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :Type ;\n    owl:deprecated true .\n\n:Kin a owl:Class ;\n    rdfs:label "Kin"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :RelatedType .\n\n:Label a owl:Class ;\n    rdfs:label "Label"@en ;\n    rdfs:comment "This class is deprecated"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :Type ;\n    owl:deprecated true .\n\n:Male a owl:Class ;\n    rdfs:label "Male"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :Gender .\n\n:Me a owl:Class ;\n    rdfs:label "Me"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :RelatedType .\n\n:Met a owl:Class ;\n    rdfs:label "Met"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :RelatedType .\n\n:Modem a owl:Class ;\n    rdfs:label "Modem"@en ;\n    rdfs:comment "This class is deprecated"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :TelephoneType ;\n    owl:deprecated true .\n\n:Msg a owl:Class ;\n    rdfs:label "Msg"@en ;\n    rdfs:comment "This class is deprecated"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :TelephoneType ;\n    owl:deprecated true .\n\n:Muse a owl:Class ;\n    rdfs:label "Muse"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :RelatedType .\n\n:Neighbor a owl:Class ;\n    rdfs:label "Neighbor"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :RelatedType .\n\n:None a owl:Class ;\n    rdfs:label "None"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :Gender .\n\n:Other a owl:Class ;\n    rdfs:label "Other"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :Gender .\n\n:PCS a owl:Class ;\n    rdfs:label "PCS"@en ;\n    rdfs:comment "This class is deprecated"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :TelephoneType ;\n    owl:deprecated true .\n\n:Pager a owl:Class ;\n    rdfs:label "Pager"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :TelephoneType .\n\n:Parcel a owl:Class ;\n    rdfs:label "Parcel"@en ;\n    rdfs:comment "This class is deprecated"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :Type ;\n    owl:deprecated true .\n\n:Parent a owl:Class ;\n    rdfs:label "Parent"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :RelatedType .\n\n:Postal a owl:Class ;\n    rdfs:label "Postal"@en ;\n    rdfs:comment "This class is deprecated"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :Type ;\n    owl:deprecated true .\n\n:Pref a owl:Class ;\n    rdfs:label "Pref"@en ;\n    rdfs:comment "This class is deprecated"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :Type ;\n    owl:deprecated true .\n\n:Sibling a owl:Class ;\n    rdfs:label "Sibling"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :RelatedType .\n\n:Spouse a owl:Class ;\n    rdfs:label "Spouse"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :RelatedType .\n\n:Sweetheart a owl:Class ;\n    rdfs:label "Sweetheart"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :RelatedType .\n\n:Tel a owl:Class ;\n    rdfs:label "Tel"@en ;\n    rdfs:comment "This class is deprecated. Use the hasTelephone object property."@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    owl:deprecated true .\n\n:Text a owl:Class ;\n    rdfs:label "Text"@en ;\n    rdfs:comment "Also called sms telephone"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :TelephoneType .\n\n:TextPhone a owl:Class ;\n    rdfs:label "Text phone"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :TelephoneType .\n\n:Unknown a owl:Class ;\n    rdfs:label "Unknown"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :Gender .\n\n:Video a owl:Class ;\n    rdfs:label "Video"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :TelephoneType .\n\n:Voice a owl:Class ;\n    rdfs:label "Voice"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :TelephoneType .\n\n:Work a owl:Class ;\n    rdfs:label "Work"@en ;\n    rdfs:comment "This implies that the property is related to an individual\'s work place"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :Type .\n\n:X400 a owl:Class ;\n    rdfs:label "X400"@en ;\n    rdfs:comment "This class is deprecated"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :Type ;\n    owl:deprecated true .\n\n:adr a owl:ObjectProperty ;\n    rdfs:label "address"@en ;\n    rdfs:comment "This object property has been mapped"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    owl:equivalentProperty :hasAddress .\n\n:agent a owl:ObjectProperty ;\n    rdfs:label "agent"@en ;\n    rdfs:comment "This object property has been deprecated"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    owl:deprecated true .\n\n:anniversary a owl:DatatypeProperty ;\n    rdfs:label "anniversary"@en ;\n    rdfs:comment "The date of marriage, or equivalent, of the object"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:range [ a rdfs:Datatype ;\n            owl:unionOf ( xsd:dateTime xsd:gYear ) ] .\n\n:bday a owl:DatatypeProperty ;\n    rdfs:label "birth date"@en ;\n    rdfs:comment "To specify the birth date of the object"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:range [ a rdfs:Datatype ;\n            owl:unionOf ( xsd:dateTime xsd:dateTimeStamp xsd:gYear ) ] .\n\n:category a owl:DatatypeProperty ;\n    rdfs:label "category"@en ;\n    rdfs:comment "The category information about the object, also known as tags"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:range xsd:string .\n\n:class a owl:DatatypeProperty ;\n    rdfs:label "class"@en ;\n    rdfs:comment "This data property has been deprecated"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    owl:deprecated true .\n\n:email a owl:ObjectProperty ;\n    rdfs:label "email"@en ;\n    rdfs:comment "This object property has been mapped"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    owl:equivalentProperty :hasEmail .\n\n:extended-address a owl:DatatypeProperty ;\n    rdfs:label "extended address"@en ;\n    rdfs:comment "This data property has been deprecated"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    owl:deprecated true .\n\n:geo a owl:ObjectProperty ;\n    rdfs:label "geo"@en ;\n    rdfs:comment "This object property has been mapped"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    owl:equivalentProperty :hasGeo .\n\n:hasAdditionalName a owl:ObjectProperty ;\n    rdfs:label "has additional name"@en ;\n    rdfs:comment "Used to support property parameters for the additional name data property"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> .\n\n:hasCalendarBusy a owl:ObjectProperty ;\n    rdfs:label "has calendar busy"@en ;\n    rdfs:comment "To specify the busy time associated with the object. (Was called FBURL in RFC6350)"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> .\n\n:hasCalendarLink a owl:ObjectProperty ;\n    rdfs:label "has calendar link"@en ;\n    rdfs:comment "To specify the calendar associated with the object. (Was called CALURI in RFC6350)"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> .\n\n:hasCalendarRequest a owl:ObjectProperty ;\n    rdfs:label "has calendar request"@en ;\n    rdfs:comment "To specify the calendar user address to which a scheduling request be sent for the object. (Was called CALADRURI in RFC6350)"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> .\n\n:hasCategory a owl:ObjectProperty ;\n    rdfs:label "has category"@en ;\n    rdfs:comment "Used to support property parameters for the category data property"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> .\n\n:hasCountryName a owl:ObjectProperty ;\n    rdfs:label "has country name"@en ;\n    rdfs:comment "Used to support property parameters for the country name data property"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> .\n\n:hasFN a owl:ObjectProperty ;\n    rdfs:label "has formatted name"@en ;\n    rdfs:comment "Used to support property parameters for the formatted name data property"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> .\n\n:hasFamilyName a owl:ObjectProperty ;\n    rdfs:label "has family name"@en ;\n    rdfs:comment "Used to support property parameters for the family name data property"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> .\n\n:hasGender a owl:ObjectProperty ;\n    rdfs:label "has gender"@en ;\n    rdfs:comment "To specify  the sex or gender identity of the object. URIs are recommended to enable interoperable sex and gender codes to be used."@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> .\n\n:hasGivenName a owl:ObjectProperty ;\n    rdfs:label "has given name"@en ;\n    rdfs:comment "Used to support property parameters for the given name data property"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> .\n\n:hasHonorificPrefix a owl:ObjectProperty ;\n    rdfs:label "has honorific prefix"@en ;\n    rdfs:comment "Used to support property parameters for the honorific prefix data property"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> .\n\n:hasHonorificSuffix a owl:ObjectProperty ;\n    rdfs:label "has honorific suffix"@en ;\n    rdfs:comment "Used to support property parameters for the honorific suffix data property"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> .\n\n:hasInstantMessage a owl:ObjectProperty ;\n    rdfs:label "has messaging"@en ;\n    rdfs:comment "To specify the instant messaging and presence protocol communications with the object. (Was called IMPP in RFC6350)"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> .\n\n:hasLanguage a owl:ObjectProperty ;\n    rdfs:label "has language"@en ;\n    rdfs:comment "Used to support property parameters for the language data property"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> .\n\n:hasLocality a owl:ObjectProperty ;\n    rdfs:label "has locality"@en ;\n    rdfs:comment "Used to support property parameters for the locality data property"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> .\n\n:hasNickname a owl:ObjectProperty ;\n    rdfs:label "has nickname"@en ;\n    rdfs:comment "Used to support property parameters for the nickname data property"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:seeAlso :nickname .\n\n:hasNote a owl:ObjectProperty ;\n    rdfs:label "has note"@en ;\n    rdfs:comment "Used to support property parameters for the note data property"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> .\n\n:hasOrganizationName a owl:ObjectProperty ;\n    rdfs:label "has organization name"@en ;\n    rdfs:comment "Used to support property parameters for the organization name data property"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> .\n\n:hasOrganizationUnit a owl:ObjectProperty ;\n    rdfs:label "has organization unit name"@en ;\n    rdfs:comment "Used to support property parameters for the organization unit name data property"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> .\n\n:hasPostalCode a owl:ObjectProperty ;\n    rdfs:label "has postal code"@en ;\n    rdfs:comment "Used to support property parameters for the postal code data property"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> .\n\n:hasRegion a owl:ObjectProperty ;\n    rdfs:label "has region"@en ;\n    rdfs:comment "Used to support property parameters for the region data property"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> .\n\n:hasRelated a owl:ObjectProperty ;\n    rdfs:label "has related"@en ;\n    rdfs:comment "To specify a relationship between another entity and the entity represented by this object"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> .\n\n:hasRole a owl:ObjectProperty ;\n    rdfs:label "has role"@en ;\n    rdfs:comment "Used to support property parameters for the role data property"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> .\n\n:hasSource a owl:ObjectProperty ;\n    rdfs:label "has source"@en ;\n    rdfs:comment "To identify the source of directory information of the object"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> .\n\n:hasStreetAddress a owl:ObjectProperty ;\n    rdfs:label "has street address"@en ;\n    rdfs:comment "Used to support property parameters for the street address data property"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> .\n\n:hasTitle a owl:ObjectProperty ;\n    rdfs:label "has title"@en ;\n    rdfs:comment "Used to support property parameters for the title data property"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> .\n\n:hasUID a owl:ObjectProperty ;\n    rdfs:label "has uid"@en ;\n    rdfs:comment "To specify a value that represents a globally unique identifier corresponding to the object"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> .\n\n:hasValue a owl:ObjectProperty ;\n    rdfs:label "has value"@en ;\n    rdfs:comment "Used to indicate the resource value of an object property that requires property parameters"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> .\n\n:label a owl:DatatypeProperty ;\n    rdfs:label "label"@en ;\n    rdfs:comment "This data property has been deprecated"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    owl:deprecated true .\n\n:language a owl:DatatypeProperty ;\n    rdfs:label "language"@en ;\n    rdfs:comment "To specify the language that may be used for contacting the object. May also be used as a property parameter."@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> .\n\n:latitude a owl:DatatypeProperty ;\n    rdfs:label "latitude"@en ;\n    rdfs:comment "This data property has been deprecated. See hasGeo"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    owl:deprecated true .\n\n:longitude a owl:DatatypeProperty ;\n    rdfs:label "longitude"@en ;\n    rdfs:comment "This data property has been deprecated. See hasGeo"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    owl:deprecated true .\n\n:mailer a owl:DatatypeProperty ;\n    rdfs:label "mailer"@en ;\n    rdfs:comment "This data property has been deprecated"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    owl:deprecated true .\n\n:note a owl:DatatypeProperty ;\n    rdfs:label "note"@en ;\n    rdfs:comment "A note associated with the object"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:range xsd:string .\n\n:org a owl:ObjectProperty ;\n    rdfs:label "organization"@en ;\n    rdfs:comment "This object property has been mapped. Use the organization-name data property."@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    owl:equivalentProperty :organization-name .\n\n:organization-unit a owl:DatatypeProperty ;\n    rdfs:label "organizational unit name"@en ;\n    rdfs:comment "To specify the organizational unit name associated with the object"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:range xsd:string ;\n    rdfs:subPropertyOf :organization-name .\n\n:post-office-box a owl:DatatypeProperty ;\n    rdfs:label "post office box"@en ;\n    rdfs:comment "This data property has been deprecated"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    owl:deprecated true .\n\n:prodid a owl:DatatypeProperty ;\n    rdfs:label "product id"@en ;\n    rdfs:comment "To specify the identifier for the product that created the object"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:range xsd:string .\n\n:rev a owl:DatatypeProperty ;\n    rdfs:label "revision"@en ;\n    rdfs:comment "To specify revision information about the object"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:range xsd:dateTime .\n\n:role a owl:DatatypeProperty ;\n    rdfs:label "role"@en ;\n    rdfs:comment "To specify the function or part played in a particular situation by the object"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:range xsd:string .\n\n:sort-string a owl:DatatypeProperty ;\n    rdfs:label "sort as"@en ;\n    rdfs:comment "To specify the string to be used for national-language-specific sorting. Used as a property parameter only."@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:range xsd:string .\n\n:title a owl:DatatypeProperty ;\n    rdfs:label "title"@en ;\n    rdfs:comment "To specify the position or job of the object"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:range xsd:string .\n\n:tz a owl:DatatypeProperty ;\n    rdfs:label "time zone"@en ;\n    rdfs:comment "To indicate time zone information that is specific to the object. May also be used as a property parameter."@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:range xsd:string .\n\n:value a owl:DatatypeProperty ;\n    rdfs:label "value"@en ;\n    rdfs:comment "Used to indicate the literal value of a data property that requires property parameters"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> .\n\n:Address a owl:Class ;\n    rdfs:label "Address"@en ;\n    rdfs:comment "To specify the components of the delivery address for the  object"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    owl:equivalentClass [ a owl:Class ;\n            owl:unionOf ( [ a owl:Class ;\n                        owl:intersectionOf ( [ a owl:Restriction ;\n                                    owl:onProperty :country-name ;\n                                    owl:someValuesFrom xsd:string ] [ a owl:Restriction ;\n                                    owl:maxCardinality "1"^^xsd:nonNegativeInteger ;\n                                    owl:onProperty :country-name ] ) ] [ a owl:Class ;\n                        owl:intersectionOf ( [ a owl:Restriction ;\n                                    owl:onProperty :locality ;\n                                    owl:someValuesFrom xsd:string ] [ a owl:Restriction ;\n                                    owl:maxCardinality "1"^^xsd:nonNegativeInteger ;\n                                    owl:onProperty :locality ] ) ] [ a owl:Class ;\n                        owl:intersectionOf ( [ a owl:Restriction ;\n                                    owl:onProperty :postal-code ;\n                                    owl:someValuesFrom xsd:string ] [ a owl:Restriction ;\n                                    owl:maxCardinality "1"^^xsd:nonNegativeInteger ;\n                                    owl:onProperty :postal-code ] ) ] [ a owl:Class ;\n                        owl:intersectionOf ( [ a owl:Restriction ;\n                                    owl:onProperty :region ;\n                                    owl:someValuesFrom xsd:string ] [ a owl:Restriction ;\n                                    owl:maxCardinality "1"^^xsd:nonNegativeInteger ;\n                                    owl:onProperty :region ] ) ] [ a owl:Class ;\n                        owl:intersectionOf ( [ a owl:Restriction ;\n                                    owl:onProperty :street-address ;\n                                    owl:someValuesFrom xsd:string ] [ a owl:Restriction ;\n                                    owl:maxCardinality "1"^^xsd:nonNegativeInteger ;\n                                    owl:onProperty :street-address ] ) ] ) ] .\n\n:Email a owl:Class ;\n    rdfs:label "Email"@en ;\n    rdfs:comment "To specify the electronic mail address for communication with the object the vCard represents. Use the hasEmail object property."@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    owl:deprecated true .\n\n:Group a owl:Class ;\n    rdfs:label "Group"@en ;\n    rdfs:comment "Object representing a group of persons or entities.  A group object will usually contain hasMember properties to specify the members of the group."@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :Kind ;\n    owl:disjointWith :Individual,\n        :Location,\n        :Organization ;\n    owl:equivalentClass [ a owl:Class ;\n            owl:intersectionOf ( [ a owl:Restriction ;\n                        owl:onProperty :hasMember ;\n                        owl:someValuesFrom :Kind ] [ a owl:Restriction ;\n                        owl:minQualifiedCardinality "1"^^xsd:nonNegativeInteger ;\n                        owl:onClass :Kind ;\n                        owl:onProperty :hasMember ] ) ] .\n\n:Individual a owl:Class ;\n    rdfs:label "Individual"@en ;\n    rdfs:comment "An object representing a single person or entity"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :Kind ;\n    owl:disjointWith :Location,\n        :Organization .\n\n:Name a owl:Class ;\n    rdfs:label "Name"@en ;\n    rdfs:comment "To specify the components of the name of the object"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    owl:equivalentClass [ a owl:Class ;\n            owl:unionOf ( [ a owl:Class ;\n                        owl:intersectionOf ( [ a owl:Restriction ;\n                                    owl:onProperty :additional-name ;\n                                    owl:someValuesFrom xsd:string ] [ a owl:Restriction ;\n                                    owl:minCardinality "0"^^xsd:nonNegativeInteger ;\n                                    owl:onProperty :additional-name ] ) ] [ a owl:Class ;\n                        owl:intersectionOf ( [ a owl:Restriction ;\n                                    owl:onProperty :family-name ;\n                                    owl:someValuesFrom xsd:string ] [ a owl:Restriction ;\n                                    owl:maxCardinality "1"^^xsd:nonNegativeInteger ;\n                                    owl:onProperty :family-name ] ) ] [ a owl:Class ;\n                        owl:intersectionOf ( [ a owl:Restriction ;\n                                    owl:onProperty :given-name ;\n                                    owl:someValuesFrom xsd:string ] [ a owl:Restriction ;\n                                    owl:maxCardinality "1"^^xsd:nonNegativeInteger ;\n                                    owl:onProperty :given-name ] ) ] [ a owl:Class ;\n                        owl:intersectionOf ( [ a owl:Restriction ;\n                                    owl:onProperty :honorific-prefix ;\n                                    owl:someValuesFrom xsd:string ] [ a owl:Restriction ;\n                                    owl:minCardinality "0"^^xsd:nonNegativeInteger ;\n                                    owl:onProperty :honorific-prefix ] ) ] [ a owl:Class ;\n                        owl:intersectionOf ( [ a owl:Restriction ;\n                                    owl:onProperty :honorific-suffix ;\n                                    owl:someValuesFrom xsd:string ] [ a owl:Restriction ;\n                                    owl:minCardinality "0"^^xsd:nonNegativeInteger ;\n                                    owl:onProperty :honorific-suffix ] ) ] ) ] .\n\n:VCard a owl:Class ;\n    rdfs:label "VCard"@en ;\n    rdfs:comment "The vCard class is  equivalent to the new Kind class, which is the parent for the four explicit types of vCards (Individual, Organization, Location, Group)"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    owl:equivalentClass :Kind .\n\n:fn a owl:DatatypeProperty ;\n    rdfs:label "formatted name"@en ;\n    rdfs:comment "The formatted text corresponding to the name of the object"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:range xsd:string .\n\n:hasAddress a owl:ObjectProperty ;\n    rdfs:label "has address"@en ;\n    rdfs:comment "To specify the components of the delivery address for the object"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:range :Address .\n\n:hasEmail a owl:ObjectProperty ;\n    rdfs:label "has email"@en ;\n    rdfs:comment "To specify the electronic mail address for communication with the object"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:range :Email .\n\n:hasGeo a owl:ObjectProperty ;\n    rdfs:label "has geo"@en ;\n    rdfs:comment "To specify information related to the global positioning of the object. May also be used as a property parameter."@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> .\n\n:hasKey a owl:ObjectProperty ;\n    rdfs:label "has key"@en ;\n    rdfs:comment "To specify a public key or authentication certificate associated with the object"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    owl:equivalentProperty :key .\n\n:hasLogo a owl:ObjectProperty ;\n    rdfs:label "has logo"@en ;\n    rdfs:comment "To specify a graphic image of a logo associated with the object "@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    owl:equivalentProperty :logo .\n\n:hasName a owl:ObjectProperty ;\n    rdfs:label "has name"@en ;\n    rdfs:comment "To specify the components of the name of the object"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:range :Name ;\n    owl:equivalentProperty :n .\n\n:hasPhoto a owl:ObjectProperty ;\n    rdfs:label "has photo"@en ;\n    rdfs:comment "To specify an image or photograph information that annotates some aspect of the object"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    owl:equivalentProperty :photo .\n\n:hasSound a owl:ObjectProperty ;\n    rdfs:label "has sound"@en ;\n    rdfs:comment "To specify a digital sound content information that annotates some aspect of the object"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    owl:equivalentProperty :sound .\n\n:hasTelephone a owl:ObjectProperty ;\n    rdfs:label "has telephone"@en ;\n    rdfs:comment "To specify the telephone number for telephony communication with the object"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    owl:equivalentProperty :tel .\n\n:hasURL a owl:ObjectProperty ;\n    rdfs:label "has url"@en ;\n    rdfs:comment "To specify a uniform resource locator associated with the object"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    owl:equivalentProperty :url .\n\n:key a owl:ObjectProperty ;\n    rdfs:label "key"@en ;\n    rdfs:comment "This object property has been mapped"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    owl:equivalentProperty :hasKey .\n\n:logo a owl:ObjectProperty ;\n    rdfs:label "logo"@en ;\n    rdfs:comment "This object property has been mapped"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    owl:equivalentProperty :hasLogo .\n\n:n a owl:ObjectProperty ;\n    rdfs:label "name"@en ;\n    rdfs:comment "This object property has been mapped"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    owl:equivalentProperty :hasName .\n\n:nickname a owl:DatatypeProperty ;\n    rdfs:label "nickname"@en ;\n    rdfs:comment "The nick name associated with the object"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:range xsd:string .\n\n:photo a owl:ObjectProperty ;\n    rdfs:label "photo"@en ;\n    rdfs:comment "This object property has been mapped"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    owl:equivalentProperty :hasPhoto .\n\n:sound a owl:ObjectProperty ;\n    rdfs:label "sound"@en ;\n    rdfs:comment "This object property has been mapped"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    owl:equivalentProperty :hasSound .\n\n:tel a owl:ObjectProperty ;\n    rdfs:label "telephone"@en ;\n    rdfs:comment "This object property has been mapped"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    owl:equivalentProperty :hasTelephone .\n\n:url a owl:ObjectProperty ;\n    rdfs:label "url"@en ;\n    rdfs:comment "This object property has been mapped"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    owl:equivalentProperty :hasURL .\n\n:Location a owl:Class ;\n    rdfs:label "Location"@en ;\n    rdfs:comment "An object representing a named geographical place"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :Kind ;\n    owl:disjointWith :Organization .\n\n:additional-name a owl:DatatypeProperty ;\n    rdfs:label "additional name"@en ;\n    rdfs:comment "The additional name associated with the object"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:range xsd:string .\n\n:country-name a owl:DatatypeProperty ;\n    rdfs:label "country name"@en ;\n    rdfs:comment "The country name associated with the address of the object"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:range xsd:string .\n\n:family-name a owl:DatatypeProperty ;\n    rdfs:label "family name"@en ;\n    rdfs:comment "The family name associated with the object"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:range xsd:string .\n\n:given-name a owl:DatatypeProperty ;\n    rdfs:label "given name"@en ;\n    rdfs:comment "The given name associated with the object"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:range xsd:string .\n\n:hasMember a owl:ObjectProperty ;\n    rdfs:label "has member"@en ;\n    rdfs:comment "To include a member in the group this object represents. (This property can only be used by Group individuals)"@en ;\n    rdfs:domain :Group ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:range :Kind .\n\n:honorific-prefix a owl:DatatypeProperty ;\n    rdfs:label "honorific prefix"@en ;\n    rdfs:comment "The honorific prefix of the name associated with the object"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:range xsd:string .\n\n:honorific-suffix a owl:DatatypeProperty ;\n    rdfs:label "honorific suffix"@en ;\n    rdfs:comment "The honorific suffix of the name associated with the object"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:range xsd:string .\n\n:locality a owl:DatatypeProperty ;\n    rdfs:label "locality"@en ;\n    rdfs:comment "The locality (e.g. city or town) associated with the address of the object"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:range xsd:string .\n\n:organization-name a owl:DatatypeProperty ;\n    rdfs:label "organization name"@en ;\n    rdfs:comment "To specify the organizational name associated with the object"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:range xsd:string .\n\n:postal-code a owl:DatatypeProperty ;\n    rdfs:label "postal code"@en ;\n    rdfs:comment "The postal code associated with the address of the object"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:range xsd:string .\n\n:region a owl:DatatypeProperty ;\n    rdfs:label "region"@en ;\n    rdfs:comment "The region (e.g. state or province) associated with the address of the object"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:range xsd:string .\n\n:street-address a owl:DatatypeProperty ;\n    rdfs:label "street address"@en ;\n    rdfs:comment "The street address associated with the address of the object"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:range xsd:string .\n\n:Organization a owl:Class ;\n    rdfs:label "Organization"@en ;\n    rdfs:comment """An object representing an organization.  An organization is a single entity, and might represent a business or government, a department or division within a business or government, a club, an association, or the like.\n"""@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    rdfs:subClassOf :Kind .\n\n:Gender a owl:Class ;\n    rdfs:label "Gender"@en ;\n    rdfs:comment "Used for gender codes. The URI of the gender code must be used as the value for Gender."@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> .\n\n:Kind a owl:Class ;\n    rdfs:label "Kind"@en ;\n    rdfs:comment "The parent class for all objects"@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> ;\n    owl:equivalentClass [ a owl:Restriction ;\n            owl:minQualifiedCardinality "1"^^xsd:nonNegativeInteger ;\n            owl:onDataRange xsd:string ;\n            owl:onProperty :fn ],\n        :VCard .\n\n:Type a owl:Class ;\n    rdfs:label "Type"@en ;\n    rdfs:comment "Used for type codes. The URI of the type code must be used as the value for Type."@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> .\n\n:TelephoneType a owl:Class ;\n    rdfs:label "Phone"@en ;\n    rdfs:comment "Used for telephone type codes. The URI of the telephone type code must be used as the value for the Telephone Type."@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> .\n\n:RelatedType a owl:Class ;\n    rdfs:label "Relation Type"@en ;\n    rdfs:comment "Used for relation type codes. The URI of the relation type code must be used as the value for the Relation Type."@en ;\n    rdfs:isDefinedBy <http://www.w3.org/2006/vcard/ns> .\n\n<http://www.w3.org/2006/vcard/ns> a owl:Ontology ;\n    rdfs:label "Ontology for vCard"@en ;\n    rdfs:comment "Ontology for vCard based on RFC6350"@en ;\n    owl:versionInfo "Final"@en .\n\n\n'},function(t,n,a){'use strict';var r=a(1),i=r.ns;t.exports={icon:r.icons.iconBase+'noun_79217.svg',name:'pad',label:function n(a){var i=r.store,o=i.findTypeURIs(a);return o['http://www.w3.org/ns/pim/pad#Notepad']?'pad':null},mintClass:i.pad('Notepad'),mintNew:function t(n){var a=r.store,i=r.ns,o=a.updater;if(n.me&&!n.me.uri)throw new Error('notepad mintNew:  Invalid userid');var s=n.newInstance=n.newInstance||a.sym(n.newBase+'index.ttl#this'),d=s.doc();a.add(s,i.rdf('type'),i.pad('Notepad'),d),a.add(s,i.dc('title'),'Shared Notes',d),a.add(s,i.dc('created'),new Date,d),n.me&&a.add(s,i.dc('author'),n.me,d);var l=a.sym(s.uri+'_line0');return a.add(s,i.pad('next'),l,d),a.add(l,i.pad('next'),s,d),a.add(l,i.dc('author'),n.me,d),a.add(l,i.sioc('content'),'',d),new Promise(function(t,r){o.put(d,a.statementsMatching(void 0,void 0,void 0,d),'text/turtle',function(a,i,o){i?t(n):r(new Error('FAILED to save new tool at: '+a+' : '+o));;})})},render:function t(n,a,i){var o=function t(n,i){n||E.appendChild(r.widgets.errorMessageBlock(a,i,'pink'))},s=function t(n){for(;n.firstChild;)n.removeChild(n.firstChild);return n},d=function t(n,i,o){var s=$rdf.graph(),d=$rdf.Namespace('http://www.w3.org/ns/auth/acl#'),l=s.sym(i+'#a1'),a=s.sym(i),c=s.sym(n);return s.add(l,r.ns.rdf('type'),d('Authorization'),a),s.add(l,d('accessTo'),c,a),s.add(l,d('agent'),A,a),s.add(l,d('mode'),d('Read'),a),s.add(l,d('mode'),d('Write'),a),s.add(l,d('mode'),d('Control'),a),l=s.sym(i+'#a2'),s.add(l,r.ns.rdf('type'),d('Authorization'),a),s.add(l,d('accessTo'),c,a),s.add(l,d('agentClass'),x.foaf('Agent'),a),s.add(l,d('mode'),d('Read'),a),o&&s.add(l,d('mode'),d('Write'),a),$rdf.serialize(a,s,i,'text/turtle')},l=function t(n,a,r){var i=y.any(y.sym(n),y.sym('http://www.iana.org/assignments/link-relations/acl'));if(i){var o=d(n,i.uri,a);return w.webOperation('PUT',i.uri,{data:o,contentType:'text/turtle'}).then(function(t){return r(!0)}).catch(function(t){r(!1,t.message)})}return w.load(n).catch(function(t){r(!1,'Getting headers for ACL: '+t)}).then(function(){var t=y.any(y.sym(n),y.sym('http://www.iana.org/assignments/link-relations/acl'));if(!t)throw new Error('No Link rel=ACL header for '+n);var r=d(n,t.uri,a);return w.webOperation('PUT',t.uri,{data:r,contentType:'text/turtle'})}).then(function(t){return r(!0)}).catch(function(t){r(!1,t.message)})},c=function t(){var r=E.appendChild(a.createElement('button'));return r.textContent='Start another pad',r.addEventListener('click',function(){return u(n,H,'pad')}),r},u=function t(n,i,o){var d=s(i),l={noun:'notepad'},c=d.appendChild(r.authn.newAppInstance(a,l,f)),u=d.appendChild(a.createElement('hr')),h=d.appendChild(a.createElement('p'));h.textContent='Where would you like to store the data for the '+o+'?  Give the URL of the directory where you would like the data stored.';var g=d.appendChild(a.createElement('input'));g.setAttribute('type','text'),g.size=80,g.label='base URL',g.autocomplete='on',d.appendChild(a.createElement('br'));var b=d.appendChild(a.createElement('button'));b.textContent='Start new '+o+' at this URI',b.addEventListener('click',function(t){var a=g.value;'/'!==a.slice(-1)&&(a+='/'),m(n,a)})},f=function t(n){var a=y.any(n,x.space('uriPrefix'));a=a?a.value:n.uri.split('#')[0],'/'!==a.slice(-1)&&($rdf.log.error(b+': No / at end of uriPrefix '+a),a+='/');var r=new Date;a+=b+'/id'+r.getTime()+'/',m(k,a)},m=function t(n,i){var s=$rdf.sym(n.uri.split('#')[0]),d=r.ns.space,c=r.store,u=c.sym(i+'pad.ttl'),m=c.sym(i+'index.html');toBeCopied=[{local:'index.html',contentType:'text/html'}],newInstance=c.sym(u.uri+'#thisPad'),agenda=[];var h,f,g;for(h=0;h<toBeCopied.length;h++){var b=toBeCopied[h],y=function t(n){agenda.push(function(){var t=i+n.local;console.log('Copying '+base+n.local+' to '+t);var a=function n(){l(t,!1,function(n,a){n?agenda.shift()():(o(n,'FAILED to set ACL '+t+' : '+a),console.log('FAILED to set ACL '+t+' : '+a))})};c.fetcher.webCopy(base+n.local,i+n.local,n.contentType).then(function(){return r.authn.checkUser()}).then(function(t){A=t,a()}).catch(function(t){console.log('FAILED to copy '+base+n.local+' : '+t.message),o(!1,'FAILED to copy '+base+n.local+' : '+t.message)})})};y(b)}agenda.push(function t(){c.add(newInstance,x.rdf('type'),_('Notepad'),u),c.add(newInstance,x.dc('created'),new Date,u),A&&c.add(newInstance,x.dc('author'),A,u),c.add(newInstance,_('next'),newInstance,u),c.add(newInstance,r.ns.space('inspiration'),n,C),c.add(newInstance,r.ns.space('inspiration'),n,u),v.put(u,c.statementsMatching(void 0,void 0,void 0,u),'text/turtle',function(t,n,a){n?agenda.shift()():(o(n,'FAILED to save new notepad at: '+there.uri+' : '+a),console.log('FAILED to save new notepad at: '+there.uri+' : '+a))})}),agenda.push(function(){l(u.uri,!0,function(t,n){o(t,'Failed to set Read-Write ACL on pad data file: '+n),t&&agenda.shift()()})}),agenda.push(function(){var t=E.appendChild(a.createElement('p'));t.setAttribute('style','font-size: 140%;'),t.innerHTML='Your <a href=\''+m.uri+'\'><b>new notepad</b></a> is ready. <br/><br/><a href=\''+m.uri+'\'>Go to new pad</a>'}),agenda.shift()()},h=function t(o){console.log('showResults()'),A=r.authn.currentUser(),r.authn.checkUser().then(function(t){A=t});var s=y.any(n,x.dc('title'))||y.any(n,x.vcard('fn'));i.solo&&'undefined'!=typeof window&&s&&(window.document.title=s.value),K.exists=o,S=r.pad.notepad(a,C,n,A,K),D.appendChild(S);var d=y.any(n,x.meeting('parentMeeting'))||n;r.pad.manageParticipation(a,B,C,d,A,K);var l=r.store.updater.setRefreshHandler(C,S.reloadAndSync)},g=function t(){w.nowOrWhenFetched(C.uri,void 0,function(t,a,r){t?(s(D),y.holds(n,x.rdf('type'),x.wf('TemplateInstance'))&&u(n,D,'pad'),h(!0),U.appendChild(c())):404===r.status?(console.log('Initializing results file '+C),v.put(C,[],'text/turtle',function(t,n,a){n?(s(D),h(!1)):(o(n,'FAILED to create results file at: '+C.uri+' : '+a),console.log('FAILED to craete results file at: '+C.uri+' : '+a))})):o(t,'FAILED to read results file: '+a)})},b='app-pad.timbl.com',y=r.store,w=r.store.fetcher,v=r.store.updater,x=r.ns,_=$rdf.Namespace('http://www.w3.org/ns/pim/pad#'),k=n,C=n.doc(),E=a.createElement('div'),T=E.appendChild(a.createElement('table')),A,S;T.setAttribute('style','background-color: white; min-width: 94%; margin-right:3% margin-left: 3%; min-height: 13em;');var I=T.appendChild(a.createElement('tr')),N=I.appendChild(a.createElement('td')),j=I.appendChild(a.createElement('td')),L=I.appendChild(a.createElement('td')),R=null,M=T.appendChild(a.createElement('tr')),D=M.appendChild(a.createElement('td'));D.setAttribute('colspan','3');var P=T.appendChild(a.createElement('tr')),O=P.appendChild(a.createElement('td')),B=P.appendChild(a.createElement('td')),U=P.appendChild(a.createElement('td')),F=T.appendChild(a.createElement('tr')),q=F.appendChild(a.createElement('div')),z=T.appendChild(a.createElement('tr')),H=z.appendChild(a.createElement('div')),W=T.appendChild(a.createElement('tr'));W.setAttribute('class','naviMenu');var V=W.appendChild(a.createElement('td')),G=W.appendChild(a.createElement('td')),J=W.appendChild(a.createElement('td')),K={statusArea:q,timingArea:O};return g(),E}}},function(t,n,a){'use strict';(function(t,n){t.exports={icon:(t.__dirname||n)+'/icon_argument.png',name:'argument',label:function n(a){var r=UI.store,i=r.findTypeURIs(a);return i[UI.ns.arg('Position').uri]?'Argument':null},render:function t(n,a){var r=UI.panes.getOutliner(dom),i=UI.rdf,o=UI.store,s=UI.ns.arg;n=o.canon(n);var d=o.findTypeURIs(n),l=a.createElement('div');l.setAttribute('class','argumentPane');var c=o.any(n,UI.ns.rdfs('comment'));if(c){var u=a.createElement('p');u.setAttribute('style','margin-left: 2em; font-style: italic;'),l.appendChild(u),u.textContent=c.value}var f=o.statementsMatching(n,s('support'));r.appendPropertyTRs(l,f,!1);var f=o.statementsMatching(n,s('opposition'));return r.appendPropertyTRs(l,f,!1),l}}}).call(n,a(9)(t),'/')},function(t,n,a){'use strict';var r=a(1),i=r.ns;t.exports={icon:r.icons.iconBase+'noun_106746.svg',name:'transaction',label:function n(a){var i=r.store,o=i.findTypeURIs(a);return o['http://www.w3.org/2000/10/swap/pim/qif#Transaction']?'$$':i.any(a,r.ns.qu('amount'))?'$$$':o['http://www.w3.org/ns/pim/trip#Trip']?'Trip $':null},render:function n(o,s){var d=r.store,a=d.fetcher,l=$rdf.Namespace('http://www.w3.org/2000/10/swap/pim/qif#'),c=$rdf.Namespace('http://www.w3.org/ns/pim/trip#'),u=s.createElement('div');u.setAttribute('class','transactionPane');var f=function t(n,a){a===void 0&&(a='color: grey');var r=s.createElement('pre');r.setAttribute('style',a),u.appendChild(r),r.appendChild(s.createTextNode(n))},m=function t(n){return f(n,'color: #100; background-color: #fee')},h=d.statementsMatching(o),g=d.statementsMatching(void 0,void 0,o),b=d.findTypeURIs(o),t={},y=function n(a){t[a.uri]=!0},w=function t(n){var a='padding: 0.5em 1.5em 1em 1.5em; ';if(n){var i=d.any(n,r.ns.ui('backgroundColor'));i&&(a+='background-color: '+i.value+'; ')}u.setAttribute('style',a)},v=function t(a){if(a===void 0)return'';var n=''+a;return 0<=n.indexOf('.')?n.split('.')[0]+'.'+(n.split('.')[1]+'00').slice(0,2):n+'.00'},x=function t(n,a){var r=s.createElement('td');return 0===0+n&&a||(r.textContent=v(n)),r.setAttribute('style','width: 6em; text-align: right; '),r},_=function t(n){var a=s.createElement('th');return a.textContent=n,a.setAttribute('style','text-align: right; '),a},k=function t(n,a){var o=r.store.any(n,i.qu('date')),s=r.store.any(a,i.qu('date'));if(o!==void 0&&s!==void 0){if(o.value<s.value)return-1;if(o.value>s.value)return 1}return n.uri<a.uri?-1:n.uri>a.uri?1:0},C=function t(n,a,i){var o=r.panes.byName(i),s=o.render(a,n);return s.setAttribute('style','border: 0.1em solid green;'),s},E=function t(n,a,r,i,o){var s=a.parentNode.children;if(o)for(var d=s.length-1;0<=d;d--)s[d].expanded&&(s[d].parentNode.removeChild(s[d].expanded),s[d].expanded=!1);var l=n.createElement('tr'),c=l.appendChild(n.createElement('td'));c.setAttribute('style','width: 98%; padding: 1em; border: 0.1em solid grey;');var u=a.children.length;a.nextSibling?a.parentNode.insertBefore(l,a.nextSibling):a.parentNode.appendChild(l),a.expanded=l,c.setAttribute('colspan',''+u),c.appendChild(C(n,r,i))},T=function t(n,a,r,i,o){a.expanded?(a.parentNode.removeChild(a.expanded),a.expanded=!1):E(n,a,r,i,o)},A=function t(n,a,o){var s=n.createElement('table');s.setAttribute('style','padding-left: 0.5em; padding-right: 0.5em; font-size: 9pt; width: 85%;');var l=function t(n,a){var o=n.createElement('tr'),s=function t(n,a){var i='\'padding-left: 0.5em; padding-right: 0.5em; padding-top: 0.1em;';if(a){var o=d.any(a,r.ns.ui('backgroundColor'));o&&(i+='background-color: '+o.value+'; ')}n.setAttribute('style',i)},l=d.any(a,i.qu('toAccount'));s(o,l);var c=o.appendChild(n.createElement('td')),u=d.any(a,i.qu('date'));c.textContent=u?u.value.slice(0,10):'???',c.setAttribute('style','width: 7em;');var f=o.appendChild(n.createElement('td'));f.setAttribute('style','width: 36em;');var m=d.any(a,i.qu('payee'));f.textContent=m?m.value:'???';var h=f.appendChild(n.createElement('a'));h.textContent=' \u279C',h.setAttribute('href',a.uri);var g=o.appendChild(n.createElement('td')),b=d.any(a,i.qu('in_USD'));return g.textContent=b?v(b.value):'???',g.setAttribute('style','width: 6em; text-align: right; '),o.addEventListener('click',function(t){T(n,o,a,'transaction',!t.shiftKey)},!1),o},c=o?a.filter(o):a.slice();c.sort(k);for(var u=0;u<c.length;u++)s.appendChild(l(n,c[u]));return s};if(b['http://www.w3.org/2000/10/swap/pim/qif#Transaction']||d.any(o,i.qu('toAccount'))){y(i.rdf('type'));var S=d.any(o,r.ns.qu('toAccount'));w(S),S||m('(Error: There is no bank account known for this transaction <'+o.uri+'>,\n -- every transaction needs one.)');var I=null,N=d.any(o,r.ns.qu('accordingTo'));N===void 0?m('(Error: There is no back link to the original data source foir this transaction <'+o.uri+'>,\nso I can\'t tell how to annotate it.)'):(I=N===void 0?null:d.any(N,r.ns.qu('annotationStore')),I===void 0&&m('(There is no annotation document for this statement\n<'+N.uri+'>,\nso you cannot classify this transaction.)'));var j=s.createElement('div');j.setAttribute('style','float:right'),u.appendChild(j);var L=function t(n,i){y(n);var l=d.any(o,n);if(l){var c=s.createElement('a');c.setAttribute('href',l.uri),c.setAttribute('style','float:right'),j.appendChild(c).textContent=i||r.utils.label(l),j.appendChild(s.createElement('br'))}};L(r.ns.qu('toAccount')),L(r.ns.qu('accordingTo'),'Statement'),L(c('trip'));var R=s.createElement('table');u.appendChild(R);var M=['date','payee','amount','in_USD','currency'].map(l),D=M.map(function(t){y(t);var n=d.any(o,t),a=n?r.utils.labelForXML(n):'';return'<tr><td style="text-align: right; padding-right: 0.6em">'+r.utils.labelForXML(t)+'</td><td style="font-weight: bold;">'+a+'</td></tr>'}).join('\n');R.innerHTML=D;var P=function t(n,a){n||m('Sorry, failed to save your change:\n'+a)};I&&d.fetcher.nowOrWhenFetched(I.uri,o,function(n,l){n||m('Cannot load store '+I+' '+l);var f=d.any(I,i.qu('calendarYear')),b=function t(){u.insertBefore(r.widgets.makeSelectForNestedCategory(s,d,o,r.ns.qu('Classified'),I,P),R.nextSibling)};d.any(void 0,i.rdfs('subClassOf'),i.qu.Classified)?b():f?a.load(f).then(function(t){a.load(d.each(f,i.rdfs('seeAlso'))).then(function(){b()}).catch(function(t){console.log('Error loading background data: '+t)})}).catch(function(t){console.log('Error loading calendarYear: '+t)}):console.log('Can\'t get categories, because no calendarYear'),u.appendChild(r.widgets.makeDescription(s,d,o,r.ns.rdfs('comment'),I,P));var w=d.statementsMatching(void 0,c('trip'),void 0,I).map(function(t){return t.object}),v=d.each(void 0,r.ns.rdf('type'),c('Trip'));w=w.concat(v).sort();var x=function t(n,a,r,i){var o=a.map(function(t){var a=n.any(t,r);return a=a?a.value:'9999-12-31',[a,t]});return o.sort(),i&&o.reverse(),o.map(function(t){return t[1]})};w=x(d,w,r.ns.cal('dtstart'),!0),1<w.length&&u.appendChild(r.widgets.makeSelectForOptions(s,d,o,c('trip'),w,{multiple:!1,nullLabel:'-- what trip? --',mint:'New Trip *',mintClass:c('Trip'),mintStatementsFun:function t(n){var a=[$rdf.st(n,r.ns.rdf('type'),c('Trip'),n.doc())];return a}},I,P)),u.appendChild(s.createElement('br'));var _=r.panes.getOutliner(s);y(i.rdfs('comment')),r.widgets.attachmentList(s,o,u),y(i.wf('attachment')),u.appendChild(s.createElement('tr')).setAttribute('style','height: 1em'),_.appendPropertyTRs(u,h,!1,function(n,a){return!(n.uri in t)}),_.appendPropertyTRs(u,g,!0,function(n,a){return!(n.uri in t)})})}else if(b['http://www.w3.org/ns/pim/trip#Trip']){var O=function t(){var n={},a={},l={},f=d.each(void 0,c('trip'),o),h=f.map(function(n){return n.doc()});d.fetcher.load(h).then(function(){f.map(function(o){var t=d.the(o,i.qu('date')),s=t?(''+t.value).slice(0,4):'????',c=d.the(o,i.rdf('type'));if(c||(c=r.ns.qu('ErrorNoType')),c&&c.uri){var u=c.uri;a[s]||(a[s]=0),l[s]||(l[s]={}),n[u]||(n[u]=0),l[s][u]||(l[s][u]=0);var f=d.any(o,r.ns.qu('in_USD'));if(f||m('@@ No amount in USD: '+f+' for '+o),f){var h=parseFloat(f.value);n[u]+=h,l[s][u]+=h,a[s]+=h}}});var t=[],c=0,h=[],g;for(var b in l)l.hasOwnProperty(b)&&h.push(b);h.sort();var y=h.length,w=u.appendChild(s.createElement('table')),k;if(w.setAttribute('style','font-size: 120%; margin-left:auto; margin-right:1em; margin-top: 1em; border: 0.05em solid gray; padding: 1em;'),1<y){var C=w.appendChild(s.createElement('tr'));for(C.appendChild(_('')),g=0;g<y;g++)C.appendChild(_(h[g]));C.appendChild(_('total'))}for(var E in n)n.hasOwnProperty(E)&&(t.push(E),c+=n[E]);t.sort();for(var T=0,S,I,N,j;T<t.length;T++){if(j=d.sym(t[T]),S=w.appendChild(s.createElement('tr')),I=S.appendChild(s.createElement('td')),I.textContent=r.utils.label(j),1<y)for(g=0;g<y;g++)N=l[h[g]][t[T]],k=S.appendChild(x(N,!0));S.appendChild(x(n[t[T]],!0))}if(1<t.length){if(S=w.appendChild(s.createElement('tr')),S.appendChild(_('total')),1<y)for(g=0;g<y;g++)N=a[h[g]],k=S.appendChild(x(N?v(N):''));k=S.appendChild(x(c)),k.setAttribute('style','font-weight: bold; text-align: right;')}var L=A(s,f);L.setAttribute('style','margin-left:auto; margin-right:1em; margin-top: 1em; border: padding: 1em;'),u.appendChild(L),r.widgets.attachmentList(s,o,u)}).catch(function(t){m('Error loading transactions: '+t)})};O()}return u}}},function(t,n,a){'use strict';var r=a(1);t.exports={icon:r.icons.iconBase+'noun_142708.svg',name:'period',label:function n(a){var i=r.store,o=i.findTypeURIs(a);return o['http://www.w3.org/2000/10/swap/pim/qif#Period']?'period':null},render:function n(a,o){var s=r.store,d=r.ns,l=o.createElement('div');l.setAttribute('class','periodPane');var i=function t(n,a){a||(a='color: grey;');var r=o.createElement('pre');r.setAttribute('style',a),l.appendChild(r),r.appendChild(o.createTextNode(n))},c=function t(n){return i('\u2713 '+n,'color: #010; background-color: #efe')},u=function t(n){return i(n,'color: #100; background-color: #fee')},f=function t(){var n=s.any(a,d.cal('dtstart'));n===void 0&&u('(Error: There is no start date known for this period <'+a.uri+'>,\n -- every period needs one.)');;var i=s.any(a,d.cal('dtend'));i===void 0&&u('(Error: There is no end date known for this period <'+a.uri+'>,\n -- every period needs one.)');;var f={},m=function t(n){f[n.uri]=!0};m(d.rdf('type'));var h=function t(a){return!!(a&&a>=n&&a<i)},g=function t(a){var n=''+a;return 0<=n.indexOf('.')?n.split('.')[0]+'.'+(n.split('.')[1]+'00').slice(0,2):n+'.00'},b=function t(n){return h(s.any(n,d.qu('date')))},w=function t(n,a){var i=r.store.any(n,d.qu('date')),o=r.store.any(a,d.qu('date'));if(i!==void 0&&o!==void 0){if(i.value<o.value)return-1;if(i.value>o.value)return 1}return n.uri<a.uri?-1:n.uri>a.uri?1:0},v=l.appendChild(o.createElement('h2'));v.textContent='Period '+n.value.slice(0,10)+' - '+i.value.slice(0,10);var x=function t(n,a,i){var o=r.panes.byName(i),s=o.render(a,n);return s.setAttribute('style','border: 0.1em solid green;'),s},_=function t(n,a,r,i,o){var s=a.parentNode.children;if(o)for(var d=s.length-1;0<=d;d--)s[d].expanded&&(s[d].parentNode.removeChild(s[d].expanded),s[d].expanded=!1);var l=n.createElement('tr'),c=l.appendChild(n.createElement('td'));c.setAttribute('style','width: 98%; padding: 1em; border: 0.1em solid grey;');var u=a.children.length;a.nextSibling?a.parentNode.insertBefore(l,a.nextSibling):a.parentNode.appendChild(l),a.expanded=l,c.setAttribute('colspan',''+u),c.appendChild(x(n,r,i))},k=function t(n,a,r,i,o){a.expanded?(a.parentNode.removeChild(a.expanded),a.expanded=!1):_(n,a,r,i,o)},C=function t(n,a){var o=n.createElement('table');o.setAttribute('style','margin-left: 100; font-size: 9pt; width: 85%;');var l=function t(n,a){var i=n.createElement('tr'),o=function t(n,a){var i='margin-left: 8em; padding-left: 5em;';if(a){var o=s.any(a,r.ns.ui('backgroundColor'));o&&(i+='background-color: '+o.value+'; ')}n.setAttribute('style',i)},l=s.any(a,d.qu('toAccount'));o(i,l);var c=i.appendChild(n.createElement('td')),u=s.any(a,d.qu('date'));c.textContent=u?u.value.slice(0,10):'???',c.setAttribute('style','width: 7em;');var f=i.appendChild(n.createElement('td'));f.setAttribute('style','width: 36em;');var m=s.any(a,d.qu('payee'));f.textContent=m?m.value:'???';var h=f.appendChild(n.createElement('a'));h.textContent=' \u279C',h.setAttribute('href',a.uri);var b=i.appendChild(n.createElement('td')),y=s.any(a,d.qu('in_USD'));return b.textContent=y?g(y.value):'???',b.setAttribute('style','width: 6em; text-align: right; '),i.addEventListener('click',function(t){k(n,i,a,'transaction',!t.shiftKey)},!1),i},c=a.filter(b);c.sort(w);for(var u=0;u<c.length;u++)o.appendChild(l(n,c[u]));return o},E={"http://www.w3.org/2000/10/swap/pim/qif#Transaction":!0,"http://www.w3.org/2000/10/swap/pim/qif#Unclassified":!0,"http://www.w3.org/2000/10/swap/pim/qif#UnclassifiedOutgoing":!0,"http://www.w3.org/2000/10/swap/pim/qif#UnclassifiedIncome":!0},T=s.findMemberURIs(d.qu('Transaction')),A=[],S=[],I,N;for(var L in T)if(T.hasOwnProperty(L)){N=s.sym(L);for(var y=s.each(N,d.rdf('type')),R=!1,M=0,j;M<y.length;M++)j=y[M],void 0===E[j.uri]&&(R=!0);;R||(I=s.any(N,d.qu('in_USD')),I===void 0&&(I=s.any(N,d.qu('amount'))),I&&0<=(''+I.value).indexOf('-')?S.push(s.sym(L)):A.push(s.sym(L)))}var D,P;A.length?(D=C(o,A),P=D.children.length,l.appendChild(o.createElement('h3')).textContent='Unclassified Income'+(4>P?'':' ('+P+')'),l.appendChild(D)):c('No unclassified income'),S.length?(D=C(o,S),P=D.children.length,l.appendChild(o.createElement('h3')).textContent='Unclassified Outgoings'+(4>P?'':' ('+P+')'),l.appendChild(D)):c('No unclassified outgoings ');var O=function t(n){var a=s.findSubClassesNT(d.qu('Transaction'));for(var r in a){if(a.hasOwnProperty(r)&&r.slice(1,-1).split('#')[1]===n)return s.sym(r.slice(1,-1));;};return null},B=function t(n,a){var c=O(n),f=[],m=0,h;if(!c)return u('Error: No category correspnding to '+n),null;for(var g=s.each(void 0,d.rdf('type'),c),b=0;b<g.length;b++)s.any(g[b],a)||f.push(g[b]);return f.length&&(h=C(o,f),m=h.children.length,l.appendChild(o.createElement('h3')).textContent=r.utils.label(c)+' with no '+r.utils.label(a)+(4>m?'':' ('+m+')'),l.appendChild(h)),m};0===B('Reimbursables',d.trip('trip'))&&c('Reimbursables all have trips'),0===B('Other_Inc_Speaking',d.trip('trip'))&&c('Speaking income all has trips')},m=s.findTypeURIs(a);if(m['http://www.w3.org/2000/10/swap/pim/qif#Period']){var t=s.each(a,d.rdfs('seeAlso'));console.log('Loading before render: '+t.length),s.fetcher.load(t).then(function(t){f()})}return l}}},function(t,n,a){'use strict';var r=a(1),i=r.ns,o=r.store;t.exports={icon:r.icons.iconBase+'noun_346319.svg',name:'chat',label:function t(a){var s=r.store.each(a,i.wf('message')).length;return 0<s?'Chat ('+s+')':o.holds(a,i.rdf('type'),i.meeting('Chat'))?'Meeting chat':o.holds(void 0,i.rdf('type'),i.foaf('ChatChannel'),a)?'IRC log':null},mintClass:i.meeting('Chat'),mintNew:function t(n){var a=o.updater;if(n.me&&!n.me.uri)throw new Error('chat mintNew:  Invalid userid');var r=n.newInstance=n.newInstance||o.sym(n.newBase+'index.ttl#this'),s=r.doc();return o.add(r,i.rdf('type'),i.meeting('Chat'),s),o.add(r,i.dc('title'),'Chat',s),o.add(r,i.dc('created'),new Date,s),n.me&&o.add(r,i.dc('author'),n.me,s),new Promise(function(t,r){a.put(s,o.statementsMatching(void 0,void 0,void 0,s),'text/turtle',function(a,i,o){i?t(n):r(new Error('FAILED to save new tool at: '+a+' : '+o));;})})},render:function t(n,a){var s=function t(n,r){var i=a.createElement('pre');i.setAttribute('style','background-color: '+r||'#eed;'),d.appendChild(i),i.appendChild(a.createTextNode(n))},d=a.createElement('div');d.setAttribute('class','chatPane');var l={},c;if(o.holds(n,i.rdf('type'),i.meeting('Chat')))c=n.doc();else if(o.any(n,r.ns.wf('message')))c=r.store.any(n,r.ns.wf('message')).doc();else if(o.holds(void 0,i.rdf('type'),i.foaf('ChatChannel'),n)||o.holds(n,i.rdf('type'),i.foaf('ChatChannel'))){var u=function t(){var n=new $rdf.Query('IRC log entries'),a=[],r=['chan','msg','date','list','pred','creator','content'];return r.map(function(t){n.vars.push(a[t]=$rdf.variable(t))}),n.pat.add(a.chan,i.foaf('chatEventList'),a.list),n.pat.add(a.list,a.pred,a.msg),n.pat.add(a.msg,i.dc('date'),a.date),n.pat.add(a.msg,i.dc('creator'),a.creator),n.pat.add(a.msg,i.dc('description'),a.content),n};c=n,l.query=u()}else s('Unknown chat type');var f={dom:a,div:d};return d.appendChild(r.messageArea(a,o,n,c,l)),o.updater.addDownstreamChangeListener(c,function(){r.widgets.refreshTree(d)}),d}}},function(t,n,a){'use strict';var r=a(1),i=a(252),o=a(483);t.exports={icon:r.icons.iconBase+'noun_66617.svg',name:'meeting',label:function t(n){var a=r.store,i=r.ns;return a.holds(n,i.rdf('type'),i.meeting('Meeting'))?'Meeting':null},mintClass:r.ns.meeting('Meeting'),mintNew:function t(n){return new Promise(function(t,a){var i=r.store,o=r.ns;n.newInstance=n.newInstance||i.sym(n.newBase+'index.ttl#this');var s=n.newInstance,d=s.doc(),l=r.authn.currentUser();l&&i.add(s,o.dc('author'),l,d),i.add(s,o.rdf('type'),o.meeting('Meeting'),d),i.add(s,o.dc('created'),new Date,d),i.add(s,o.ui('backgroundColor'),new $rdf.Literal('#ddddcc',void 0,o.xsd('color')),d);var c=new $rdf.Collection;i.add(s,o.meeting('toolList'),c,d),c.elements.push(s),i.updater.put(d,i.statementsMatching(void 0,void 0,void 0,d),'text/turtle',function(r,i,o){i?t(n):a(new Error('Error writing meeting configuration: '+o))})})},render:function t(n,a){var d=r.store,l=r.ns,s=d.updater,c=this,u=function t(n,r){console.log(n);var i=a.createElement('pre');i.setAttribute('style','background-color: '+r||'#eed;'),b.appendChild(i),i.appendChild(a.createTextNode(n))},f=function t(n,a){n||u(a)},m=n,h=n.doc(),g=n.dir().uri,b=a.createElement('div'),y=b.appendChild(a.createElement('table')),w=y.appendChild(a.createElement('tr'));w.appendChild(a.createElement('div'));var v=y.appendChild(a.createElement('tr')),x=y.appendChild(a.createElement('td')),_=x.appendChild(a.createElement('table')),k=_.appendChild(a.createElement('tr'));w.setAttribute('style','height: 2em;');var C=null,E=function t(){s.put(h,d.statementsMatching(void 0,void 0,void 0,h),'text/turtle',function(t,n,a){n?(fe.refresh(),oe()):(a='FAILED to save new thing at: '+h+' : '+a,u(a))})},T=function t(n,a,r){var i=a.doc();r&&d.add(m,r,a,i),d.add(a,l.meeting('parentMeeting'),m,i),s.put(i,d.statementsMatching(void 0,void 0,void 0,i),'text/turtle',function(t,n,r){n?E():u('FAILED to save new tool at: '+a+' : '+r)})},A=function t(n,a,i,o){a&&d.add(m,a,n,h);var s=r.widgets.newThing(h);i&&d.add(s,l.rdfs('label'),i,h),o&&d.add(s,l.meeting('icon'),d.sym(o),h),d.add(s,l.rdf('type'),l.meeting('Tool'),h),d.add(s,l.meeting('target'),n,h);var c=d.the(m,l.meeting('toolList'));return c.elements.push(s),s},S=function t(a){return new Promise(function(t,i){var o=function t(n){var a=A(n,r.ns.wf('attachment'),r.utils.label(n),null);d.add(a,r.ns.meeting('view'),'iframe',h)},s=function t(a){var i=l.wf('attachment');d.add(n,i,a,n.doc());var o={icon:'noun_160581.svg',limit:1,shareTab:!0},s={newInstance:d.sym(n.doc().uri+'#LinkListTool'),pane:r.panes.link,predicate:l.meeting('attachmentTool'),tabTitle:'Links',noIndexHTML:!0};return B(o,s)},c=function t(n){var a=d.any(n,l.foaf('preferredURI')),i=a?d.sym(a):n,o=d.any(m,l.meeting('attendeeGroup')),s=function t(n,a){var i=[$rdf.st(a,r.ns.vcard('hasMember'),n,a.doc())],o=d.any(n,l.vcard('fn'))||d.any(n,l.foaf('name'));o&&i.push($rdf.st(n,r.ns.vcard('fn'),o,a.doc())),d.fetcher.nowOrWhenFetched(a.doc(),void 0,function(t,r){return t?void d.updater.update([],i,function(t,a,r){f(a,r),a&&console.log('Addded to particpants OK: '+n)}):void u('Can\'t read group to add person'+a)})};return o?void s(i,o):void D().then(function(t){var n=t.newInstance;s(i,n),d.fetcher.putBack(h,{contentType:'text/turtle'}).then(function(t){console.log('Particiants Group created: '+n)})}).catch(function(t){u(t)})};console.log('Dropped on thing '+a);var g=a.uri;return g.startsWith('http:')&&0>g.indexOf('#')?(s(a),t(a)):void d.fetcher.nowOrWhenFetched(a,function(n,i){var s=function n(a){console.log('make web page attachement tab '+a);var i=A(a,r.ns.wf('attachment'),r.utils.label(a),null);return d.add(i,r.ns.meeting('view'),'iframe',h),t(a)};if(!n)return console.log('Error looking up dropped thing, will just add it anyway. '+a+': '+i),s(a);var u=a,f=d.findTypeURIs(u);for(var m in f)console.log('    drop object type includes: '+m);if(l.vcard('Individual').uri in f||l.foaf('Person').uri in f||l.foaf('Agent').uri in f)return c(a),t(a);if(g.startsWith('https:')&&0>g.indexOf('#')){var b=d.fetcher.getHeader(a,'x-frame-options'),y=!0;if(b)for(var w=0;w<b.length;w++)console.log('x-frame-options: '+b[w]),0>b[w].indexOf('sameorigin')&&(y=!1),0>b[w].indexOf('deny')&&(y=!1);if(y)return o(a),t(a)}return console.log('Default: assume web page attachement '+a),s(a)})})},I=function t(n){Promise.all(n.map(function(t){var n=$rdf.sym(t);return S(n)})).then(function(t){E()})},N=function t(n){for(var a=0,o;n[a];a++){o=n[a],console.log(' meeting: Filename: '+o.name+', type: '+(o.type||'n/a')+' size: '+o.size+' bytes, last modified: '+(o.lastModifiedDate?o.lastModifiedDate.toLocaleDateString():'n/a'));var s=new FileReader;s.onload=function(t){return function(n){var a=n.target.result;console.log(' File read byteLength : '+a.byteLength);var o=t.type.startsWith('image/')?'Pictures':'Files',s=m.dir().uri+o+'/'+encodeURIComponent(t.name),d=i.extension(t.type);t.type!==i.lookup(t.name)&&(s+='_.'+d,console.log('MIME TYPE MISMATCH -- adding extension: '+s)),r.store.fetcher.webOperation('PUT',s,{data:a,contentType:t.type}).then(function(){console.log(' Upload: put OK: '+s),t.type.startsWith('image/')?R(o):M(o)}).catch(function(t){console.log(' Upload: FAIL '+s+', Error: '+t)})}}(o),s.readAsArrayBuffer(o)}},j=function t(n){var a=g+'Group/',i=r.store,o=i.any(m,l.meeting('particpants'));o||(o=$rdf.sym(a+'index.ttl#this')),console.log('Participant group: '+o);var s=A(o,l.meeting('particpants'),'Particpants',r.icons.iconBase+'noun_339237.svg');i.add(s,r.ns.meeting('view'),'peoplePicker',h),E()},L=function t(n){var a={useExisting:m,pane:r.panes.schedule,view:'schedule',tabTitle:'Schedule poll',noIndexHTML:!0};return B(n,a)},R=function t(n){var a={icon:'noun_598334.svg',limit:1,shareTab:!0},i={newInstance:d.sym(m.dir().uri+n+'/'),pane:r.panes.folder,predicate:l.meeting('pictures'),tabTitle:n,noIndexHTML:!0};return B(a,i)},M=function t(n){var a={icon:'noun_681601.svg',limit:1,shareTab:!0},i={newInstance:d.sym(m.dir().uri+'Files/'),pane:r.panes.folder,predicate:l.meeting('materialsFolder'),tabTitle:'Materials',noIndexHTML:!0};return B(a,i)},D=function t(){var a={icon:'noun_339237.svg',limit:1,shareTab:!0},i={newInstance:d.sym(m.dir().uri+'Attendees/index.ttl#this'),pane:r.panes.contact,predicate:l.meeting('attendeeGroup'),tabTitle:'Attendees',instanceClass:l.vcard('Group'),instanceName:r.utils.label(n)+' attendees',noIndexHTML:!0};return B(a,i)},P=function t(n){var a={newBase:g+'SharedNotes/',predicate:r.ns.meeting('sharedNotes'),tabTitle:'Shared Notes',pane:r.panes.pad};return B(n,a)},O=function t(n){r.widgets.askName(a,d,Y,l.foaf('name'),r.ns.meeting('Meeting')).then(function(t){if(!t)return oe();var a=encodeURIComponent(t),i={newBase:g+a+'/',predicate:r.ns.meeting('subMeeting'),tabTitle:t,pane:r.panes.meeting};return B(n,i)}).catch(function(t){u('Error making new sub-meeting: '+t)})},B=function t(n,a){return new Promise(function(t,i){var o=r.store;if(!a.useExisting){var s=o.any(m,a.predicate);if(s){if(u('Already have '+s+' as '+r.utils.label(a.predicate)),n.limit&&1===n.limit)return u('Cant have two'),t(null);if(n.shareTab)return t({me:C,newInstance:s,instanceClass:a.instanceClass})}}C||a.me||i(new Error('Username not defined for new tool')),a.me=a.me||C,a.newInstance=a.useExisting||a.newInstance||o.sym(a.newBase+'index.ttl#this'),a.pane.mintNew(a).then(function(n){var a=A(n.newInstance,n.predicate,n.tabTitle,n.pane.icon);n.view&&o.add(a,r.ns.meeting('view'),n.view,h),E(),o.fetcher.putBack(h,{contentType:'text/turtle'}).then(function(a){t(n)}).catch(function(t){i(t)})}).catch(function(t){u(t),i(t)})})},U=function t(n){},F=function t(n){var a=g+'Actions/',i=r.store;if(i.holds(m,l.meeting('actions')))return void console.log('Ignored - already have actions');var o=i.sym(a+'config.ttl'),s=i.sym(a+'config.ttl#this'),d=i.sym(a+'state.ttl');i.add(s,l.dc('title'),(i.anyValue(m,l.cal('summary'))||'Meeting ')+' actions',o),i.add(s,l.wf('issueClass'),l.wf('Task'),o),i.add(s,l.wf('initialState'),l.wf('Open'),o),i.add(s,l.wf('stateStore'),d,o),i.add(s,l.wf('assigneeClass'),l.foaf('Person'),o),i.add(s,l.rdf('type'),l.wf('Tracker'),o),i.add(s,l.rdf('type'),l.wf('Tracker'),o);var c=A(s,l.meeting('actions'),'Actions',r.icons.iconBase+'noun_17020.svg');T(c,s,l.meeting('actions'))},q=function t(n){var a=g+'Chat/',i=r.store;if(i.holds(m,l.meeting('chat')))return void console.log('Ignored - already have chat');var o=i.sym(a+'chat.ttl');i.add(o,l.rdf('type'),l.meeting('Chat'),o);var s=A(o,l.meeting('chat'),'Chat',r.icons.iconBase+'noun_346319.svg');T(s,o,l.meeting('chat'))},z=function t(n){var a=r.store,i=$rdf.sym('https://appear.in/'+r.utils.genUuid());if(a.holds(m,l.meeting('videoCallPage')))return void console.log('Ignored - already have a videoCallPage');a.add(i,l.rdf('type'),l.meeting('VideoCallPage'),h);var o=A(i,l.meeting('videoCallPage'),'Video call',r.icons.iconBase+'noun_260227.svg');a.add(o,l.meeting('view'),'iframe',h),E()},H=function t(n){r.widgets.askName(a,d,Y,l.log('uri'),r.ns.rdf('Resource')).then(function(t){if(!t)return oe();var n=r.store,a=r.ns,i=n.sym(t),o=A(i,a.wf('attachment'),r.utils.label(i),null);n.add(o,a.meeting('view'),'iframe',h),E()}).catch(function(t){u('Error making new sub-meeting: '+t)})},W=function t(n){var a=r.store,i=r.ns,o=m.dir();if(n.limit&&1===n.limit&&a.holds(m,i.wf('sharingControl')))return void u('Ignored - already have '+r.utils.label(ue.predicate));var s=A(o,i.wf('sharingControl'),'Sharing',r.icons.iconBase+'noun_123691.svg');a.add(s,i.meeting('view'),'sharing',h),E()},V=function t(){var n={noun:'meeting'},i=function t(n,i){c.mintNew({newBase:i}).then(function(t){var n=t.newInstance;Y.removeChild(o);var r=Y.appendChild(a.createElement('p'));r.setAttribute('style','font-size: 140%;'),r.innerHTML='Your <a target=\'_blank\' href=\''+n.uri+'\'><b>new meeting</b></a> is ready to be set up. <br/><br/><a target=\'_blank\' href=\''+n.uri+'\'>Go to your new meeting.</a>'}).catch(function(t){Y.removeChild(o),Y.appendChild(r.widgets.errorMessageBlock(a,t))})},o=r.widgets.selectWorkspace(a,n,i);Y.appendChild(o)},G=[{icon:'noun_339237.svg',maker:j,hint:'Make a group of people',limit:1},{icon:'noun_346777.svg',maker:L,hint:'Make a poll to schedule the meeting'},{icon:'noun_48218.svg',maker:U,limit:1,hint:'Add an agenda list',disabled:!0},{icon:'noun_79217.svg',maker:P,hint:'Add a shared notepad'},{icon:'noun_346319.svg',maker:q,limit:1,hint:'Add a chat channel for the meeting'},{icon:'noun_17020.svg',maker:F,limit:1,hint:'Add a list of action items'},{icon:'noun_260227.svg',maker:z,limit:1,hint:'Add a video call for the meeting'},{icon:'noun_25830.svg',maker:H,hint:'Attach meeting materials',disabled:!1},{icon:'noun_123691.svg',maker:W,limit:1,hint:'Control Sharing',disabled:!1},{icon:'noun_66617.svg',maker:O,hint:'Make a sub meeting',disabled:!1}],J=$rdf.sym('https://linkeddata.github.io/solid-app-set/meeting/meetingDetailsForm.ttl#settings');$rdf.parse(o,d,J.doc().uri,'text/turtle');var K='padding: 1em; width: 3em; height: 3em;',X=k.appendChild(a.createElement('td')),Y=k.appendChild(a.createElement('td')),Z=X.appendChild(a.createElement('img')),Q=!1;Z.setAttribute('src',r.icons.iconBase+'noun_19460_green.svg'),Z.setAttribute('style',K+'opacity: 50%;'),Z.setAttribute('title','Add another tool to the meeting');var ee=function t(n){Q=!Q,Z.setAttribute('style',K+(Q?'background-color: yellow;':'')),ie(Q?'':'display: none;')},te;r.authn.checkUser().then(function(t){return t?(C=t,Z.addEventListener('click',ee),void Z.setAttribute('style',K)):void(te=r.authn.loginStatusBox(a,function(t){t?(C=d.sym(t),Y.removeChild(te),Z.addEventListener('click',ee),Z.setAttribute('style',K)):(console.log('(Logged out)'),C=null)}),te.setAttribute('style','margin: 0.5em 1em;'),Y.appendChild(te))});for(var ne=[],ae=0,re;ae<G.length;ae++)re=function t(){var n=G[ae],i=X.appendChild(a.createElement('img'));i.setAttribute('src',r.icons.iconBase+n.icon),i.setAttribute('style',K+'display: none;'),ne.push(i),i.tool=n;var o=n.maker;n.disabled||i.addEventListener('click',function(t){se(i),o(n)})},re();var ie=function t(n){for(var a=0,r;a<ne.length;a++)r=K+n,G[a].disabled&&(r+='opacity: 0.3;'),ne[a].setAttribute('style',r)},oe=function t(){ie('display: none;'),Z.setAttribute('style',K)},se=function t(n){ie('display: none;'),n.setAttribute('style',K+'background-color: yellow;')},de=function t(n,i){if(d.holds(i,l.rdf('type'),l.meeting('Tool'))){var o=d.any(i,l.meeting('target')),c=d.any(i,l.rdfs('label'));c=c?c.value:r.utils.label(o);var u=n.appendChild(a.createElement('div'));u.textContent=c,u.setAttribute('style','margin-left: 0.7em');var s=d.any(i,l.meeting('icon'));if(s){var f=n.appendChild(a.createElement('table')),m=f.appendChild(a.createElement('tr')),h=m.appendChild(a.createElement('td')),g=m.appendChild(a.createElement('td')),b=h.appendChild(a.createElement('img'));b.setAttribute('src',s.uri),b.setAttribute('style','width: 1.5em; height: 1.5em;'),b.setAttribute('title',c),g.appendChild(u)}else n.appendChild(u)}else n.textContent=r.utils.label(i)},le=function t(n){var r=a.createElement('div'),i=r.appendChild(a.createElement('p'));return i.setAttribute('style','margin: 0em; padding:3em; color: #888;'),i.textContent='Tip: '+n,r},pe=function t(n,o){if(n.innerHTML='',n.style+='border-color: #eed;',n.appendChild(a.createElement('h3')).textContent='Adjust this tab',d.holds(o,l.rdf('type'),l.meeting('Tool'))){var i=$rdf.sym('https://linkeddata.github.io/solid-app-set/meeting/meetingDetailsForm.ttl#settings');r.widgets.appendForm(document,n,{},o,i,m.doc(),f);var s=r.widgets.deleteButtonWithCheck(a,n,'tab',function(){for(var t=d.the(m,l.meeting('toolList')),n=0;n<t.elements.length;n++)if(t.elements[n].sameTerm(o)){t.elements.splice(n,1);break}var a=d.any(o,l.meeting('target')),r=d.statementsMatching(o).concat(d.statementsMatching(void 0,void 0,o)).concat(d.statementsMatching(m,void 0,a));d.remove(r),E()});s.setAttribute('style','width: 1.5em; height: 1.5em;')}else n.appendChild(a.createElement('h4')).textContent='(No adjustments available)'},ce=function t(n,i){var o=null,s=null,c;n.innerHTML='';var f=function t(a,r){a||(n.textContent=''+r)},g=function t(r){var i=n.appendChild(a.createElement('iframe'));i.setAttribute('src',r.uri),i.setAttribute('style','border: none; margin: 0; padding: 0; height: 100%; width: 100%;')},b=function t(){var i={div:n,dom:a};n.appendChild(a.createElement('h4')).textContent='Meeting Participants';var o=function t(n){var a=[$rdf.st(m,l.meeting('particpantGroup'),n,m.doc())];d.updater.update([],a,function(t,a,r){a?s=n:u('Cant save participants group: '+r)})};s=d.any(m,l.meeting('particpantGroup')),r.authn.loadTypeIndexes(i).then(function(t){var n={defaultNewGroupName:'Meeting Participants',selectedGroup:s},a=new r.widgets.PeoplePicker(t.div,t.index.private[0],o,n);a.render()})},y=function t(){n.appendChild(a.createElement('h3')).textContent='Details of meeting';var i=$rdf.sym('https://linkeddata.github.io/solid-app-set/meeting/meetingDetailsForm.ttl#main');r.widgets.appendForm(document,n,{},m,i,m.doc(),f),n.appendChild(le('Drag URL-bar icons of web pages into the tab bar on the left to add new meeting materials.')),C=r.authn.currentUser(),C&&d.add(m,l.dc('author'),C,h);var o={noun:'meeting',me:C,statusArea:n,div:n,dom:a};r.authn.registrationControl(o,m,l.meeting('Meeting')).then(function(t){console.log('Registration control finsished.')});var s={};r.pad.manageParticipation(a,n,h,m,C,s);var c='height: 2em; width: 2em; margin:0.5em;',u=n.appendChild(a.createElement('div')),g=u.appendChild(a.createElement('img'));g.setAttribute('src',r.icons.iconBase+'noun_145978.svg'),g.setAttribute('title','Make a fresh new meeting'),g.addEventListener('click',V),g.setAttribute('style',c);var b=u.appendChild(a.createElement('a'));b.setAttribute('href','https://github.com/linkeddata/solid-app-set'),b.setAttribute('target','_blank');var y=b.appendChild(a.createElement('img'));y.setAttribute('src',r.icons.iconBase+'noun_368567.svg'),y.setAttribute('title','Fork me on github'),y.setAttribute('style',c+'opacity: 50%;')};if(d.holds(i,l.rdf('type'),l.meeting('Tool'))){var w=d.any(i,l.meeting('target'));if(w.sameTerm(m)&&!d.any(i,l.meeting('view')))y();else{var v=d.any(i,l.meeting('view'));v=v?v.value:null,'details'===v?y():'peoplePicker'===v?b():'iframe'===v?g(w):(o=v?r.panes.byName(v):null,c=n.appendChild(a.createElement('table')),r.outline.GotoSubject(w,!0,o,!1,void 0,c))}}else if(i.sameTerm(m))y();else if(i.sameTerm(i.doc())&&!d.holds(i,r.ns.rdf('type'),r.ns.meeting('Chat'))&&!d.holds(i,r.ns.rdf('type'),r.ns.meeting('PaneView')));else c=n.appendChild(a.createElement('table')),r.outline.GotoSubject(i,!0,void 0,!1,void 0,c)},ue={dom:a};ue.predicate=l.meeting('toolList'),ue.subject=n,ue.ordered=!0,ue.orientation=1,ue.renderMain=ce,ue.renderTab=de,ue.renderTabSettings=pe,ue.backgroundColor=d.anyValue(n,l.ui('backgroundColor'))||'#ddddcc';var fe=v.appendChild(r.tabs.tabWidget(ue));return r.aclControl.preventBrowserDropEvents(a),r.widgets.makeDropTarget(fe.tabContainer,I,N),r.widgets.makeDropTarget(X,I,N),b}}},function(t,n,a){'use strict';t.exports='@prefix : <http://www.w3.org/ns/ui#> .\n@prefix f: <#> .\n@prefix dc: <http://purl.org/dc/elements/1.1/>.\n@prefix cal: <http://www.w3.org/2002/12/cal/ical#>.\n@prefix meeting: <http://www.w3.org/ns/pim/meeting#>.\n@prefix ns: <http://www.w3.org/2006/vcard/ns#> .\n@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .\n@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.\n@prefix te: <http://purl.org/dc/terms/> .\n@prefix dc: <http://purl.org/dc/elements/1.1/>.\n@prefix xsd: <http://www.w3.org/2001/XMLSchema#>.\n@prefix ui: <http://www.w3.org/ns/ui#>.\n\n  f:main    a :Form;\n      cal:summary "Meeting Details";\n      :part f:titleField, f:locationField, f:startField,\n                    f:endField, f:eventComment, f:colorField .\n\n  f:titleField     a :SingleLineTextField;\n       :maxLength 256;\n       :property cal:summary;\n       :label "Name of meeting";\n       :size 80 .\n\n   f:locationField     a :SingleLineTextField;\n        :maxLength 128;\n        :property cal:location;\n        :size 40 .\n\n    f:startField     a :DateField;\n        :label "Start";\n         :property cal:dtstart .\n\n   f:endField     a :DateField;\n       :label "End";\n          :property cal:dtend .\n\n    f:colorField     a :ColorField;\n        :label "Tab color";\n  #      :default "#ddddcc"^^xsd:color;\n           :property ui:backgroundColor .\n\n      f:eventComment\n           a    ui:MultiLineTextField;\n       #    ui:maxLength\n       #       "1048";\n       #    ui:size\n       #       "40".\n           ui:property\n              cal:comment.\n\n###################################################\n\nf:settings a :Form;\n    dc:title "Tab settings";\n    :part f:labelField, f:targetField, f:viewField.\n\n    f:labelField     a :SingleLineTextField;\n         :maxLength 128;\n         :property rdfs:label;\n         :label "Label on tab";\n         :size 40 .\n\n   f:targetField     a :NamedNodeURIField;\n     :maxLength 1024;  # Longer?\n     :property meeting:target;\n     :label "URL of resource";\n     :size 80 .\n\n   f:colorField2     a :ColorField;\n       :label "Tab color";\n #      :default "#ddddcc"^^xsd:color;\n          :property ui:backgroundColor .\n\n   f:viewField     a :SingleLineTextField;\n        :maxLength 128;\n        :property meeting:view;\n        :label "View mode (experts only)";\n        :size 40 .\n\n#\n'},function(t,n,a){'use strict';var r=a(1),i=r.ns,o=r.store;t.exports={icon:r.icons.iconBase+'noun_688606.svg',name:'tabbed',label:function t(n){var a=r.store,i=r.ns,o=a.findTypeURIs(n);return i.meeting('Cluster').uri in o?'Tabbed':null},render:function t(n,a){var s=a.createElement('div');return o.fetcher.load(n).then(function(t){var d=function t(n,i){n.appendChild(r.widgets.personTR(a,u,i,{}))},l=function t(n,i){var o=null;n.innerHTML='';var s=n.appendChild(a.createElement('table'));r.outline.GotoSubject(i,!0,o,!1,void 0,s)},c=o.anyValue(n,i.meeting('orientation'))||0,u=o.the(n,i.meeting('predicate')),f={dom:a,subject:n};f.predicate=o.any(n,i.meeting('predicate'))||i.meeting('toolList'),f.ordered=!0,f.orientation=o.anyValue(n,i.meeting('orientation'))||0,f.renderMain=l,f.renderTab=d,f.backgroundColor=o.anyValue(n,i.ui('backgroundColor'))||'#ddddcc';var m=s.appendChild(r.tabs.tabWidget(f))}),s}}},function(t,n,a){'use strict';var r=a(1),i=r.rdf,o=r.ns,s=[o.sched('No'),o.sched('Maybe'),o.sched('Yes')];t.exports={icon:r.icons.iconBase+'noun_346777.svg',name:'schedule',label:function n(a){var i=r.store,o=i.findTypeURIs(a);return o['http://www.w3.org/ns/pim/schedule#SchedulableEvent']?'Scheduling poll':null},mintClass:o.sched('SchedulableEvent'),mintNew:function t(n){return new Promise(function(t,a){var o=r.ns,s=r.store,d=n.newBase,l=n.useExisting||i.sym(n.newBase+'index.ttl#this'),c=function t(n,r){n||(console.log('Error in Schedule Pane: Error constructing new scheduler: '+r),a(new Error(r)))},u=function t(n,s,d){var l=i.graph(),c=i.Namespace('http://www.w3.org/ns/auth/acl#'),u=l.sym(s+'#a1'),a=l.sym(s),f=l.sym(n);return l.add(u,r.ns.rdf('type'),c('Authorization'),a),l.add(u,c('accessTo'),f,a),l.add(u,c('agent'),b,a),l.add(u,c('mode'),c('Read'),a),l.add(u,c('mode'),c('Write'),a),l.add(u,c('mode'),c('Control'),a),u=l.sym(s+'#a2'),l.add(u,r.ns.rdf('type'),c('Authorization'),a),l.add(u,c('accessTo'),f,a),l.add(u,c('agentClass'),o.foaf('Agent'),a),l.add(u,c('mode'),c('Read'),a),d&&l.add(u,c('mode'),c('Write'),a),i.serialize(a,l,s,'text/turtle')},m=function t(n,a,r){var i=s.any(s.sym(n),s.sym('http://www.iana.org/assignments/link-relations/acl'));if(i){var o=u(n,i.uri,a);return h.webOperation('PUT',i.uri,{data:o,contentType:'text/turtle'}).then(function(t){return r(!0)}).catch(function(t){r(!1,t.message)})}return h.load(n).catch(function(t){r(!1,'Getting headers for ACL: '+t)}).then(function(){var t=s.any(s.sym(n),s.sym('http://www.iana.org/assignments/link-relations/acl'));if(!t)throw new Error('No Link rel=ACL header for '+n);var r=u(n,t.uri,a);return h.webOperation('PUT',t.uri,{data:r,contentType:'text/turtle'})}).then(function(t){return r(!0)}).catch(function(t){r(!1,t.message)})},h=s.fetcher,g=s.updater,b=r.authn.currentUser();if(!b)return console.log('MUST BE LOGGED IN'),void alert('NOT LOGGED IN');var y=l.dir().uri,w,v;if(!n.useExisting)w=s.sym(d+'details.ttl'),v=s.sym(w.uri+'#event');else if(v=n.useExisting,d=l.dir().uri,w=v.doc(),n.newBase)throw new Error('mint new scheduler: Illegal - have both new base and existing event');for(var x=s.sym(d+'results.ttl'),_=n.noIndexHTML?{}:[{local:'index.html',contentType:'text/html'}],k=[],C=0;C<_.length;C++){var f=_[C],E=function t(n){k.push(function(){var t=d+n.local;console.log('Copying '+y+n.local+' to '+t);var a=function n(){m(t,!1,function(n,a){n?k.shift()():(c(n,'FAILED to set ACL '+t+' : '+a),console.log('FAILED to set ACL '+t+' : '+a))})};s.fetcher.webCopy(y+n.local,d+n.local,n.contentType).then(function(){return r.authn.checkUser()}).then(function(t){b=t,a()}).catch(function(t){console.log('FAILED to copy '+y+n.local+' : '+t.message),c(!1,'FAILED to copy '+y+n.local+' : '+t.message)})})};E(f)}k.push(function t(){s.add(v,o.rdf('type'),o.sched('SchedulableEvent'),w),b&&s.add(v,o.dc('author'),b,w),s.add(v,o.dc('created'),new Date,w),s.add(v,o.sched('resultsDocument'),w),g.put(w,s.statementsMatching(void 0,void 0,void 0,w),'text/turtle',function(t,n,a){n?k.shift()():(c(n,'FAILED to save new scheduler at: '+w+' : '+a),console.log('FAILED to save new scheduler at: '+w+' : '+a))})}),k.push(function(){s.fetcher.webOperation('PUT',x.uri,{data:'',contentType:'text/turtle'}).then(function(){k.shift()()}).catch(function(t){c(!1,'Failed to initialize empty results file: '+t.message)})}),k.push(function(){m(x.uri,!0,function(t,n){c(t,'Failed to set Read-Write ACL on results file: '+n),t&&k.shift()()})}),k.push(function(){m(w.uri,!1,function(t,n){c(t,'Failed to set read ACL on configuration file: '+n),t&&k.shift()()})}),k.push(function(){console.log('Finished minting new scheduler'),t(n)}),k.shift()()})},render:function t(n,a){var o=r.store,s=r.ns,d=n,l='app-when-can-we.w3.org',c=r.store.fetcher,u=o.updater,f=!1,m=i.Namespace('http://www.w3.org/2002/12/cal/ical#'),h=n,g=n.doc(),b=g.dir(),y=b.uri,w=i.sym(y+'results.ttl'),v='https://linkeddata.github.io/solid-app-set/schedule/formsForSchedule.ttl',x=o.sym(v+'#form1'),_=o.sym(v+'#form2'),k=o.sym(v+'#form3'),C='background-color: #eef; padding: 0.5em;  border: .5em solid white;',E=function t(n,i){n||q.appendChild(r.widgets.errorMessageBlock(a,i,'pink'))},T=function t(n){for(;n.firstChild;)n.removeChild(n.firstChild);return n},A=function t(n,a){var i=o.any(a,r.ns.ui('backgroundColor'));i&&n.setAttribute('style','padding: 0.3em; text-align: center; background-color: '+i+';')},S;r.authn.checkUser().then(function(t){S=t,W&&W.refresh(),t&&f&&(f=!1,D())}),console.log('me: '+S);var I=function t(){var n=r.authn.newAppInstance(a,{noun:'scheduler'},N);return n.firstChild.setAttribute('style',C),n},N=function t(n){var a=o.any(n,s.space('uriPrefix'));a=a?a.value:n.uri.split('#')[0],'/'!==a.slice(-1)&&(i.log.error(l+': No / at end of uriPrefix '+a),a+='/');var r=new Date;a+=l+'/id'+r.getTime()+'/',j(h,a)},j=function t(n,r){var i={thisInstance:n,newBase:r};this.mintNew(i).then(function(t){var n=q.appendChild(a.createElement('p'));n.setAttribute('style','font-size: 140%;'),n.innerHTML='Your <a href=\''+t.newInstance.uri+'\'><b>new scheduler</b></a> is ready to be set up. <br/><br/><a href=\''+t.newInstance.uri+'\'>Say when you what days work for you.</a>'}).catch(function(t){E(!1,'Error createing new scheduler at '+i.newInstance+': '+t)})},L=function t(){console.log('getforms()'),c.nowOrWhenFetched(v,void 0,function(t,n){return console.log('getforms() ok? '+t),t?void R():E(t,n)})},R=function t(){console.log('getDetails()'),c.nowOrWhenFetched(g.uri,void 0,function(t,n){return console.log('getDetails() ok? '+t),t?void D():E(t,n)})},M=function t(){var n=window.addEventListener?'addEventListener':'attachEvent',a=window[n],r='attachEvent'==n?'onmessage':'message';a(r,function(t){if('User:'===t.data.slice(0,5)){var n=t.data.slice(5,t.data.length);'http'===n.slice(0,4)&&setUser(n)}},!1)},D=function t(){console.log('showAppropriateDisplay()'),r.authn.checkUser().then(function(t){if(!t)return P();if(!r.store.updater.editable(g.uri,o)||o.holds(n,s.rdf('type'),s.wf('TemplateInstance')))return void O(q);var a=o.any(n,s.sched('ready'));a?U():B()})},P=function t(){var n=T(G),a=window&&window.location?window.location.origin:'';n.innerHTML='<p style="font-size: 120%; background-color: #ffe; padding: 2em; margin: 1em; border-radius: 1em;">You need to be logged in.<br />To be able to use this app you need to log in with webid account at a storage provider.</p> <iframe class="text-center" src="https://solid.github.io/solid-idps/?origin='+a+'" style="margin-left: 1em; margin-right: 1em; width: 95%; height: 40em;"  sandbox="allow-same-origin allow-scripts allow-forms" frameborder="0"></iframe>',M(),f=!0},O=function t(){var n=T(G);n.appendChild(r.authn.newAppInstance(a,{noun:'poll'},N)),n.appendChild(a.createElement('hr'));var i=n.appendChild(a.createElement('p'));i.textContent='Where would you like to store the data for the poll?  Give the URL of the directory where you would like the data stored.';var o=n.appendChild(a.createElement('input'));o.setAttribute('type','text'),o.size=80,o.label='base URL',o.autocomplete='on',n.appendChild(a.createElement('br'));var s=n.appendChild(a.createElement('button'));s.setAttribute('style',C),s.textContent='Start new poll at this URI',s.addEventListener('click',function(t){var n=o.value;'/'!==n.slice(-1)&&(n+='/'),j(h,n)})},B=function t(){var d=G,l=!0,c=0,u=!1;if(l){var m=[x,_,k],h=[];c=0;for(var b=0,f;b<m.length;b++)f=a.createElement('div'),r.widgets.appendForm(document,f,{},n,m[b],g,E),h.push(f);var v=function t(){T(G).appendChild(h[c]),0==c?A.setAttribute('disabled',''):A.removeAttribute('disabled'),c==h.length-1?(S.setAttribute('disabled',''),!u&&(X.appendChild(L),X.appendChild(j),u=!0)):S.removeAttribute('disabled')},A=T(K).appendChild(a.createElement('button'));A.setAttribute('style',C),A.textContent='<- go back',A.addEventListener('click',function(t){0<c&&(c-=1,v())},!1);var S=T(Y).appendChild(a.createElement('button'));S.setAttribute('style',C),S.textContent='continue ->',S.addEventListener('click',function(t){c<h.length-1&&(c+=1,v())},!1),v()}else{var I=d.appendChild(a.createElement('table'));r.widgets.appendForm(document,I,{},n,x,g,E),r.widgets.appendForm(document,I,{},n,_,g,E),r.widgets.appendForm(document,I,{},n,k,g,E),X.appendChild(j)}var N=[i.st(n,s.sched('availabilityOptions'),s.sched('YesNoMaybe'),g),i.st(n,s.sched('ready'),new Date,g),i.st(n,s.sched('results'),w,g)],j=a.createElement('button');j.setAttribute('style',C),j.textContent='Go to poll',j.addEventListener('click',function(t){o.any(n,s.sched('ready'))?(U(),Y.appendChild(L)):(Y.appendChild(L),r.store.updater.update([],N,function(t,n,a){n?U():E(n,a)}))},!1);var L=a.createElement('button');L.setAttribute('style',C);var R=L.appendChild(a.createElement('img'));R.setAttribute('src',r.icons.iconBase+'noun_480183.svg'),L.textContent='email invitations',L.addEventListener('click',function(t){var a=''+(o.any(n,s.dc('title'))||''),r='mailto:'+o.each(n,s.sched('invitee')).map(function(t){var n=o.any(t,s.foaf('mbox'));return n?''+n:''}).join(',')+'?subject='+encodeURIComponent(a+'-- When can we meet?')+'&body='+encodeURIComponent(a+'\n\nWhen can you?\n\nSee '+y+'index.html\n');console.log('Mail: '+r),window.location.href=r},!1)},U=function t(){c.nowOrWhenFetched(w.uri,function(t,n,a){t?(T(G),F()):404===a.status?(console.log('Initializing details file '+w),u.put(w,[],'text/turtle',function(t,n,a){n?(T(G),F()):(E(n,'FAILED to create results file at: '+w.uri+' : '+a),console.log('FAILED to craete results file at: '+w.uri+' : '+a))})):E(t,'FAILED to read results file: '+n)})},F=function t(){var l=o.any(d,s.dc('title')),c=o.any(d,s.rdfs('comment')),u=o.any(d,m('location')),f=G;l&&(f.appendChild(a.createElement('h3')).textContent=l),u&&(f.appendChild(a.createElement('address')).textContent=u.value),c&&(f.appendChild(a.createElement('p')).textContent=c.value);var h=o.any(d,s.dc('author'));if(h){var g=o.any(h,s.foaf('name'));g&&(f.appendChild(a.createElement('p')).textContent=g)}var b=new i.Query('Responses'),y={},v=['time','author','value','resp','cell'];v.map(function(t){b.vars.push(y[t]=i.variable(t))}),b.pat.add(d,s.sched('response'),y.resp),b.pat.add(y.resp,s.dc('author'),y.author),b.pat.add(y.resp,s.sched('cell'),y.cell),b.pat.add(y.cell,s.sched('availabilty'),y.value),b.pat.add(y.cell,m('dtstart'),y.time);var x={};x.set_x=o.each(n,s.sched('option')),x.set_x=x.set_x.map(function(t){return o.any(t,m('dtstart'))}),x.set_y=o.each(n,s.sched('response')),x.set_y=x.set_y.map(function(t){return o.any(t,s.dc('author'))});var _=o.each(d,s.sched('option')).map(function(t){return o.any(t,m('dtstart'))}),k=function t(){var i=f.appendChild(r.matrix.matrixForQuery(a,b,y.time,y.author,y.value,x,function(){}));i.setAttribute('class','matrix');var o=a.createElement('button');o.setAttribute('style',C),o.textContent='refresh',o.addEventListener('click',function(t){o.disabled=!0,r.store.fetcher.nowOrWhenFetched(n.doc(),void 0,function(t,n){t?(i.refresh(),o.disabled=!1):console.log('Cant refresh matrix'+n)})},!1),T(X),X.appendChild(o)},S=[SCHED('No'),SCHED('Maybe'),SCHED('Yes')],N=r.authn.currentUser(),L=[];if(N){var R=w;x.set_y=x.set_y.filter(function(t){return!t.sameTerm(N)}),x.set_y.push(N),x.cellFunction=function(t,n,i,d){if(null!==d&&o.fetcher.nowOrWhenFetched(d.uri.split('#')[0],void 0,function(n,a){n&&A(t,d)}),i.sameTerm(N)){var l=function n(){A(t,d)},c={},u=s.sched('availabilty'),f=L[n.toNT()],m=r.widgets.makeSelectForOptions(a,o,f,u,S,c,w,l);t.appendChild(m)}else null!==d&&(t.textContent=r.utils.label(d))};var M=o.each(d,s.sched('response')),D=null;M.map(function(t){o.holds(t,s.dc('author'),N)&&(D=t)});var P=[],O=r.widgets.newThing(R).uri;if(null===D)D=i.sym(O+'_response'),P.push(i.st(d,s.sched('response'),D,R)),P.push(i.st(D,s.dc('author'),N,R));else{var U=o.each(D,s.sched('cell'));U.map(function(t){var n=o.any(t,m('dtstart'));L[n.toNT()]=t})}for(var F=0;F<_.length;F++)if(!L[_[F].toNT()]){var j=i.sym(O+'_'+F);P.push(i.st(D,s.sched('cell'),j,R)),P.push(i.st(j,m('dtstart'),_[F],R)),L[_[F].toNT()]=j}P.length?r.store.updater.update([],P,function(t,n,a){n?k():E(n,a)}):k()}else;var q=o.any(n,s.dc('author'));if(!q||q.sameTerm(N)){var z=a.createElement('button');z.setAttribute('style',C),z.textContent='(Modify the poll)',z.addEventListener('click',function(t){T(f),B()},!1),T(K),K.appendChild(z)}T(Y),Y.appendChild(I())},q=a.createElement('div'),z=q.appendChild(a.createElement('table'));z.setAttribute('style','background-color: white; min-width: 40em; min-height: 13em;');var H=z.appendChild(a.createElement('tr'));H.appendChild(a.createElement('td')),H.appendChild(a.createElement('td')),H.appendChild(a.createElement('td'));var W=null,V=z.appendChild(a.createElement('tr')),G=V.appendChild(a.createElement('td'));G.setAttribute('colspan','3');var J=z.appendChild(a.createElement('tr'));J.setAttribute('class','naviMenu'),J.setAttribute('style',' text-align: middle; vertical-align: middle; padding-top: 4em; ');var K=J.appendChild(a.createElement('td')),X=J.appendChild(a.createElement('td')),Y=J.appendChild(a.createElement('td'));return L(),q}}},function(t,n,a){'use strict';var r=a(1),i=r.ns,o=r.store,s=i.wf('attachment');t.exports={icon:r.icons.iconBase+'noun_160581.svg',name:'link',label:function t(n){var a=o.any(n,i.meeting('target'))||n,d=o.each(a,s).length;return 0<d?r.utils.label(s)+' '+d:null},mintNew:function t(n){return new Promise(function(t,a){t(n)})},render:function t(n,a){var d=o.any(n,i.meeting('target'))||n;createNewRow=function t(n){var i={};return r.widgets.personTR(a,s,n,i)};var l=a.createElement('div'),c=l.appendChild(a.createElement('table')),u=function t(){var n=o.each(d,s);r.utils.syncTableToArray(c,n,createNewRow)};return l.refresh=u,u(),l}}},function(t,n,a){'use strict';var r=a(1);t.exports={icon:r.icons.iconBase+'noun_62007.svg',name:'travel expenses',label:function n(a){var i=$rdf.Namespace('http://www.w3.org/2000/10/swap/pim/qif#'),o=r.store,s=o.findTypeURIs(a);return r.ns.qu('Transaction')in o.findSuperClassesNT(a)?'by Trip':s['http://www.w3.org/ns/pim/trip#Trip']?'Trip $':null},render:function n(a,o){var s=r.store,d=r.ns,l=$rdf.Namespace('http://www.w3.org/2002/12/cal/ical#'),c=$rdf.Namespace('http://www.w3.org/2005/01/wf/flow#'),u=$rdf.Namespace('http://purl.org/dc/elements/1.1/'),f=$rdf.Namespace('http://purl.org/dc/terms/'),m=$rdf.Namespace('http://www.w3.org/2000/10/swap/pim/qif#'),h=$rdf.Namespace('http://www.w3.org/ns/pim/trip#'),g=o.createElement('div');g.setAttribute('class','transactionPane'),g.innerHTML='<h2>Trip transactions</h2>';var b=function t(n,a){return a||'http://www.w3.org/2000/01/rdf-schema#comment'!=n.uri?!1:!0},y=function t(n,a){a==void 0&&(a='color: grey');var r=o.createElement('pre');r.setAttribute('style',a),g.appendChild(r),r.appendChild(o.createTextNode(n))},w=this,v=function t(n){var r=n.parentNode,i=w.render(a,o);r.replaceChild(i,n)},_=s.statementsMatching(a),k=s.statementsMatching(void 0,void 0,a),C=s.findTypeURIs(a),t=r.authn.currentUser(),E=function t(n,a){var i=new $rdf.Query(r.utils.label(n)),l=['date','transaction','comment','type','in_USD'],c={};l.map(function(t){i.vars.push(c[t]=$rdf.variable(t))}),i.pat.add(c.transaction,h('trip'),n);var u=s.formula();u.add(c.transaction,d.rdf('type'),c.type),i.pat.optional.push(u),i.pat.add(c.transaction,r.ns.qu('date'),c.date);var u=s.formula();u.add(c.transaction,d.rdfs('comment'),c.comment),i.pat.optional.push(u),i.pat.add(c.transaction,r.ns.qu('in_USD'),c.in_USD);var f=function t(){var a={},i=s.each(void 0,h('trip'),n);i.map(function(n){var t=s.the(n,d.rdf('type'));if(t||(t=r.ns.qu('ErrorNoType')),t&&t.uri){var i=t.uri;a[i]||(a[i]=0);var o=s.any(n,r.ns.qu('in_USD'));o||y('    @@ No amount in USD: '+o+' for '+n),o&&(a[i]+=parseFloat(o.value))}});var o='',l=0,c=0;for(var u in a)o+=r.utils.label(s.sym(u))+': '+a[u]+'; ',l++,c+=a[u];y('Totals of '+i.length+' transactions: '+o,''),1<l&&y('Overall net: '+c,'text-treatment: bold;')},m=r.table(o,{query:i,onDone:f});a.appendChild(m)};if(r.ns.qu('Transaction')in s.findSuperClassesNT(a)){ts=s.each(void 0,d.rdf('type'),a);for(var T=[],A=[],S=0;S<ts.length;S++){var i=ts[S],I=s.any(i,h('trip'));if(!I)T.push(i);else{i in A||(A[I]={total:0,transactions:[]});var N=s.any(i,r.ns.qu('in_USD'));N&&(A[I].total+=N);var L=s.any(i,r.ns.qu('date'));A[I.toNT()].transactions.push([L,i])}}var R=[],M;for(var x in A){var D=s.fromNT(x);R.push([s.any(D,l('dtstart')),D])}R.sort();for(var P=0,j;P<R.length;P++)j=R[P][1],E(j,g)}else C['http://www.w3.org/ns/pim/trip#Trip']&&E(a,g);return g}}},function(t,n,a){'use strict';var r=a(1),i=r.rdf.Namespace('http://dig.csail.mit.edu/TAMI/2007/amord/air#'),o=r.rdf.Namespace('http://dig.csail.mit.edu/TAMI/2007/amord/tms#'),s=i('compliant-with'),d=i('non-compliant-with'),c=o('antecedent-expr'),l=o('justification'),u=o('sub-expr'),f=o('description'),m=o('rule-name'),h=o('premise'),g=i('instanceOf'),b=[],y=t.exports={};y.name='air',y.icon=r.icons.originalIconBase+'1pt5a.gif',y.label=function(t){b=[];for(var n=r.store.statementsMatching(void 0,l,void 0,t),a=null,i=0;i<n.length;i++)if('Graph'==n[i].subject.termType&&n[i].object!=h.toString()){var o=n[i].subject.statements;if(1!=o.length)throw new Error('There should be only ONE statement indicating some event is (non-)compliant with some policy!');if(o[0].predicate.toString()==s.toString()){var c=r.utils.label(o[0].subject)+' is compliant with '+r.utils.label(o[0].object),u=[];u.push(o[0].object),u.push(s.toString()),u.push(c),b.push(u)}if(o[0].predicate.toString()==d.toString()){var f=r.utils.label(o[0].subject)+' is non compliant with '+r.utils.label(o[0].object),m=[];m.push(o[0].object),m.push(d.toString()),m.push(f),b.push(m)}a='Justify'}return a},y.render=function(t,n){var a=r.panes.dataContentPane.statementsAsTables,o=n.createElement('div'),w=r.widgets.extractLogURI(n.location.toString()),v;o.setAttribute('class','dataContentPane'),o.setAttribute('id','dataContentPane');var x=n.createElement('select'),_=n.createElement('div');_.setAttribute('id','outcome'),y.render.showSelected=function(){if(null!=n.getElementById('outcome')&&(n.getElementById('outcome').innerHTML=''),y.render.showSelected.hide=function(){null!=n.getElementById('outcome')&&(n.getElementById('outcome').innerHTML='');var t=n.getElementById('dataContentPane'),a=n.getElementById('justification'),r=n.getElementById('hide'),i=n.getElementById('more'),s=n.getElementById('outcome'),o=n.getElementById('whyButton');null!=t&&null!=i&&t.removeChild(i),null!=t&&null!=a&&null!=r&&(t.removeChild(a),t.removeChild(r)),null!=t&&null!=s&&t.removeChild(s),null!=t&&null!=o&&t.removeChild(o)},y.render.showSelected.hide(),0!=this.selectedIndex){selected=b[this.selectedIndex-1];for(var v=r.store.statementsMatching(void 0,l,void 0,t),x=0;x<v.length;x++)if('Graph'==v[x].subject.termType&&v[x].object!=h.toString()&&v[x].subject.statements[0].object.toString()==selected[0].toString()){var k=v[x].subject.statements[0],C;selected[1].toString()==d.toString()?(_.setAttribute('class','nonCompliantPane'),_.setAttribute('style','border-top: solid 1px red; border-left: solid 1px red; border-bottom: solid 1px red; border-right: solid 1px red; padding: 0.5em; background-color: #fbf0f7; margin-top: 0.5em; margin-bottom: 0.5em; border-radius: 1em;')):selected[1].toString()==s.toString()?(_.setAttribute('class','compliantPane'),_.setAttribute('style','border-top: solid 1px green; border-left: solid 1px green; border-bottom: solid 1px green;border-right: solid 1px green;padding: 0.5em; background-color: #def8e0;margin-top: 0.5em; margin-bottom: 0.5em;border-radius: 1em;')):alert('something went terribly wrong');var E=n.createElement('table'),T=n.createElement('tr'),A=n.createElement('td'),S=n.createElement('a');S.setAttribute('href',k.subject.uri),S.appendChild(n.createTextNode(r.utils.label(k.subject))),A.appendChild(S),T.appendChild(A);var I=n.createElement('td');I.appendChild(n.createTextNode(' is ')),T.appendChild(I);var N=n.createElement('td'),j=n.createElement('a');j.setAttribute('href',k.predicate.uri),j.appendChild(n.createTextNode(r.utils.label(k.predicate))),N.appendChild(j),T.appendChild(N);var L=n.createElement('td'),R=n.createElement('a');R.setAttribute('href',k.object.uri),R.appendChild(n.createTextNode(r.utils.label(k.object))),L.appendChild(R),T.appendChild(L),E.appendChild(T),_.appendChild(E),o.appendChild(_),y.render.showSelected.addInitialButtons=function(){if(null==n.getElementById('whyButton')){var t=n.createElement('input');t.setAttribute('type','button'),t.setAttribute('id','whyButton'),t.setAttribute('value','Why?'),o.appendChild(t),t.addEventListener('click',y.render.showSelected.because,!1)}o.appendChild(n.createTextNode('   '))},y.render.showSelected.because=function(){var s=i('closed-world-assumption'),b=r.store.statementsMatching(void 0,s,void 0,t),x=!1,_=n.getElementById('whyButton'),E=n.getElementById('dataContentPane');null!=E&&null!=_&&E.removeChild(_),y.render.showSelected.because.displayDesc=function(t){for(var a=0;a<t.elements.length;a++)if(dump(t.elements[a]),dump('\n'),'NamedNode'==t.elements[a].termType){var i=n.createElement('a');i.setAttribute('href',t.elements[a].uri),i.appendChild(n.createTextNode(r.utils.label(t.elements[a]))),S.appendChild(i)}else'Literal'==t.elements[a].termType?void 0!=t.elements[a].value&&S.appendChild(n.createTextNode(t.elements[a].value)):'Graph'==t.elements[a].termType&&S.appendChild(n.createTextNode(t.elements[a]))},y.render.showSelected.because.moreInfo=function(o){var s=r.store.statementsMatching(o,l,h,t);if(void 0!=s[0])I.appendChild(n.createElement('br')),I.appendChild(n.createElement('br')),I.appendChild(n.createTextNode('No more information available from the reasoner!')),I.appendChild(n.createElement('br')),I.appendChild(n.createElement('br'));else{for(var d=r.store.statementsMatching(void 0,void 0,o,t),b=r.store.statementsMatching(void 0,void 0,d[0].object),w=0;w<b.length;w++)if(b[w].predicate==g.toString())for(var i=r.store.statementsMatching(b[w].subject,void 0,void 0,t),v=0;v<i.length;v++)i[v].predicate==f.toString()&&'Collection'==i[v].object.termType&&(S.appendChild(n.createElement('br')),y.render.showSelected.because.displayDesc(i[v].object),S.appendChild(n.createElement('br')),S.appendChild(n.createElement('br')));correctCurrentRule='';for(var w=0;w<d.length;w++)if('BlankNode'==d[w].subject.termType){correctCurrentRule=d[w].subject;break}var x=r.store.statementsMatching(correctCurrentRule,l,void 0,t),_=r.store.statementsMatching(x[0].object,m,void 0,t);C=_[0].object;for(var k=r.store.statementsMatching(x[0].object,c,void 0,t),E=r.store.statementsMatching(k[0].object,u,void 0,t),T=!1,A=!1,w=0;w<E.length;w++)'Graph'==E[w].object.termType?(I.appendChild(a(E[w].object.statements,n)),T=!0):'BlankNode'==E[w].object.termType&&(A=!0);A&&(I.appendChild(n.createElement('br')),I.appendChild(n.createTextNode('  No premises applicable.')),I.appendChild(n.createElement('br')),I.appendChild(n.createElement('br')))}},y.render.showSelected.because.justify=function(){n.getElementById('premises').innerHTML='',y.render.showSelected.because.moreInfo(C),A.appendChild(I),o.appendChild(A)};var d=n.createElement('input');d.setAttribute('type','button'),d.setAttribute('id','more'),d.setAttribute('value','More Information'),d.addEventListener('click',y.render.showSelected.because.justify,!1),o.appendChild(d),o.appendChild(n.createTextNode('   ')),o.appendChild(n.createTextNode('   '));var T=n.createElement('input');T.setAttribute('type','button'),T.setAttribute('id','hide'),T.setAttribute('value','Start Over'),o.appendChild(T),T.addEventListener('click',y.render.showSelected.hide,!1);var A=n.createElement('div');A.setAttribute('class','justification'),A.setAttribute('id','justification'),A.appendChild(n.createElement('br'));var S=n.createElement('div');S.setAttribute('class','description'),S.setAttribute('id','description');var I=n.createElement('div');I.setAttribute('class','premises'),I.setAttribute('id','premises');for(var N=r.store.statementsMatching(void 0,f,void 0,t),L=0,j;L<N.length;L++)'Graph'==N[L].subject.termType&&'Collection'==N[L].object.termType&&N[L].subject.statements[0].object.toString()==selected[0].toString()&&(S.appendChild(n.createElement('br')),y.render.showSelected.because.displayDesc(N[L].object),S.appendChild(n.createElement('br')),S.appendChild(n.createElement('br'))),A.appendChild(S);if(A.appendChild(n.createElement('br')),A.appendChild(n.createElement('br')),A.appendChild(n.createElement('b').appendChild(n.createTextNode('Premises:'))),A.appendChild(n.createElement('br')),A.appendChild(n.createElement('br')),x){I.appendChild(n.createElement('br')),I.appendChild(n.createElement('br')),I.appendChild(n.createTextNode('Nothing interesting found in the '));var R=n.createElement('a');R.setAttribute('href',unescape(w)),R.appendChild(n.createTextNode('log file')),I.appendChild(R),I.appendChild(n.createElement('br')),I.appendChild(n.createElement('br'))}for(var L=0;L<v.length;L++)if('Graph'==v[L].subject.termType&&'BlankNode'==v[L].object.termType){var M=r.store.statementsMatching(v[L].object,m,void 0,t);if(C=M[0].object,!x)for(var D=r.store.statementsMatching(v[L].object,c,void 0,t),P=0,k;P<D.length;P++){k=r.store.statementsMatching(D[P].object,void 0,void 0,t);for(var O=0;O<k.length;O++)'BlankNode'==k[O].subject.termType&&'Graph'==k[O].object.termType&&(j=k,I.appendChild(n.createElement('br')),I.appendChild(a(k[O].object.statements,n)),I.appendChild(n.createElement('br')))}}A.appendChild(I),o.appendChild(A)},y.render.showSelected.addInitialButtons()}}};var k=n.createElement('option'),C=n.createTextNode(' ');k.appendChild(C),x.appendChild(k);for(var E=0;E<b.length;E++){var T=n.createElement('option'),A=n.createTextNode(b[E][2]);T.appendChild(A),x.appendChild(T)}return o.appendChild(x),x.addEventListener('change',y.render.showSelected,!1),o.appendChild(n.createElement('br')),o.appendChild(n.createElement('br')),o},y.renderReasonsForStatement=function t(n,a){var i=myDocument.createElement('div');i.setAttribute('class','description');var o=r.store.statementsMatching(n,l);if(1<o.length)for(var s=0,d;s<o.length;s++)d=a.appendChild(document.createElement('h3')),d.textContent='Reason '+(s+1+''),+':',y.render.because.displayDesc(o[s].object,i),a.appendChild(i),i=i.cloneNode(!1);else y.render.because.displayDesc(o[0].object,i),a.appendChild(i)},y.renderExplanationForStatement=function t(n){var a=myDocument.createElement('div'),o=r.store.statementsMatching(n,l),s=myDocument.createElement('div'),d='compliantPane',b,w,v,x,_;if(_=o[0].subject.statements[0],void 0!=_){s.setAttribute('class',d),s.setAttribute('id','outcome');var k=myDocument.createElement('table'),C=myDocument.createElement('tr'),E=myDocument.createElement('td');E.appendChild(myDocument.createTextNode('The reason ')),C.appendChild(E);var T=myDocument.createElement('td'),A=myDocument.createElement('a');A.setAttribute('href',_.subject.uri),A.appendChild(myDocument.createTextNode(r.utils.label(_.subject))),T.appendChild(A),C.appendChild(T);var S=myDocument.createElement('td'),I=myDocument.createElement('a');I.setAttribute('href',_.predicate.uri),I.appendChild(myDocument.createTextNode(r.utils.label(_.predicate))),S.appendChild(I),C.appendChild(S);var N=myDocument.createElement('td'),j=null;if('Literal'==_.object.termType)j=myDocument.createTextNode(_.object.value);else{var j=myDocument.createElement('a');j.setAttribute('href',_.object.uri),j.appendChild(myDocument.createTextNode(r.utils.label(_.object)))}N.appendChild(j),C.appendChild(N);var L=myDocument.createElement('td');L.appendChild(myDocument.createTextNode(' is because: ')),C.appendChild(L),k.appendChild(C),s.appendChild(k),a.appendChild(s);var R=myDocument.createElement('input');R.setAttribute('type','button'),R.setAttribute('id','hide'),R.setAttribute('value','Start Over')}return y.render.addInitialButtons=function(){var t=myDocument.createElement('input');t.setAttribute('type','button'),t.setAttribute('id','whyButton'),t.setAttribute('value','Why?'),a.appendChild(t),t.addEventListener('click',y.render.because,!1),a.appendChild(myDocument.createTextNode('   '))},y.render.hide=function(){var t=myDocument.getElementById('dataContentPane'),n=myDocument.getElementById('justification'),a=myDocument.getElementById('hide'),r=myDocument.getElementById('more');null!=t&&null!=r&&t.removeChild(r),null!=t&&null!=n&&null!=a&&(t.removeChild(n),t.removeChild(a)),y.render.addInitialButtons()},y.render.because=function(){var t=i('closed-world-assumption'),o=r.store.statementsMatching(void 0,t,void 0,b),s=!1;0<o.length&&(s=!0);var v=myDocument.getElementById('whyButton'),x=myDocument.getElementById('dataContentPane');null!=x&&null!=v&&x.removeChild(v),y.render.because.displayDesc=function(t,n){function a(t,s){for(var c=0;c<t.statements.length;c++){var i=t.statements[c],u=[i.subject,i.predicate,i.object],f=null;if(s){if(f=myDocument.createElement('p'),'NamedNode'==i.subject.termType){var m=Util.uri.docpart(i.subject.uri);0>n.waitingFor.indexOf(m)&&'undefined'==typeof sf.requested[m]&&n.waitingFor.push(m)}if('NamedNode'==i.object.termType){var m=Util.uri.docpart(i.object.uri);0>n.waitingFor.indexOf(m)&&'undefined'==typeof sf.requested[m]&&n.waitingFor.push(m)}}else f=a.current_p;for(var h=0,b;3>h;h++)switch(b=u[h],b.termType){case'Graph':f.appendChild(myDocument.createTextNode('{ ')),a.current_p=f,a(b,!1),f.appendChild(myDocument.createTextNode(' }'));break;case'NamedNode':var w=myDocument.createElement('a');w.setAttribute('href',b.uri),w.appendChild(myDocument.createTextNode(r.utils.label(b))),f.appendChild(w),f.appendChild(myDocument.createTextNode(' '));break;case'Literal':f.appendChild(myDocument.createTextNode(b.value));}if(f.appendChild(myDocument.createTextNode('. ')),s){var v=function t(n,a,i){return function t(s){if(i.waitingFor.remove(s),r.store.any(a.AJAR_formula,l)){if(i.informationFound=!0,'#text'==a.lastChild.nodeName){var c=a.appendChild(myDocument.createElement('img'));c.src=r.icons.originalIconBase+'tango/22-help-browser.png';var u=function t(){y.renderReasonsForStatement(a.AJAR_formula,d)};c.addEventListener('click',u,!1)}return g&&o&&o(),!1}for(var f=0;2>f;f++)for(var m=[n.subject,n.object][f],h=r.store.uris(m),b=0,w;b<h.length;b++)w=Util.uri.docpart(h[b]),'undefined'==typeof sf.requested[w]&&0>i.waitingFor.indexOf(w)&&(i.waitingFor.push(w),sf.lookUpThing(r.store.sym(w)));return 0==i.waitingFor.length?(g&&o&&o(),!1):(g&&o&&o(),!0)}};n.appendChild(f);var x=new r.rdf.IndexedFormula;x.statements.push(i),f.AJAR_formula=x;var _=v(i,f,n);_(),sf.addCallback('done',_),sf.addCallback('fail',_)}}}function o(t){if(n.waitingFor.remove(t),n.informationFound)return g.removeChild(g.firstChild),g.textContent='More information found!',!1;if(0==n.waitingFor.length){var a=!1;return a?(g.removeChild(g.firstChild),g.textContent='More information found!'):(g.removeChild(g.firstChild),g.textContent='No more information.'),!1}return!0}var s=r.store.the(t,c),f=r.store.each(s,u),m=null;m='Graph'==f[0].termType?f[0]:f[1],n.waitingFor=[],n.informationFound=!1,a(m,!0);var g=myDocument.createElement('p');g.setAttribute('class','ap_premise_loading');var h=g.appendChild(myDocument.createElement('img'));h.src=r.icons.originalIconBase+'loading.png',g.appendChild(myDocument.createTextNode('Looking for more information...')),n.appendChild(g),o();for(var b=0;b<n.waitingFor.length;b++)sf.lookUpThing(r.store.sym(n.waitingFor[b]))},y.render.because.moreInfo=function(t){var n=r.store.statementsMatching(t,l,h,b);if(void 0!=n[0])divPremises.appendChild(myDocument.createElement('br')),divPremises.appendChild(myDocument.createElement('br')),divPremises.appendChild(myDocument.createTextNode('No more information available from the reasoner!')),divPremises.appendChild(myDocument.createElement('br')),divPremises.appendChild(myDocument.createElement('br'));else{for(var a=r.store.statementsMatching(void 0,void 0,t),o=r.store.statementsMatching(void 0,void 0,a[0].object),s=0;s<o.length;s++)if(o[s].predicate==g.toString())for(var i=r.store.statementsMatching(o[s].subject,void 0,void 0,b),d=0;d<i.length;d++)i[d].predicate==f.toString()&&'Collection'==i[d].object.termType&&(_.appendChild(myDocument.createElement('br')),y.render.because.displayDesc(i[d].object),_.appendChild(myDocument.createElement('br')),_.appendChild(myDocument.createElement('br')));var v=r.store.statementsMatching(a[0].subject,l,void 0),x=r.store.statementsMatching(v[0].object,m,void 0);w=x[0].object;for(var k=r.store.statementsMatching(v[0].object,c,void 0),C=r.store.statementsMatching(k[0].object,u,void 0),s=0;s<C.length;s++)'Graph'==C[s].object.termType&&divPremises.appendChild(statementsAsTables(C[s].object.statements,myDocument))}},y.render.because.justify=function(){myDocument.getElementById('premises').innerHTML='',y.render.because.moreInfo(w),d.appendChild(divPremises),a.appendChild(d)};var d=myDocument.createElement('div');d.setAttribute('class','justification'),d.setAttribute('id','justification');var _=myDocument.createElement('div');_.setAttribute('class','description');var k;y.renderReasonsForStatement(n,d),a.appendChild(d)},y.render.because(),a}},function(t,n,a){'use strict';var r=a(1);t.exports={icon:r.icons.originalIconBase+'tango/22-image-x-generic.png',name:'image',label:function t(n){var a=r.store,i=r.ns;if(!a.anyStatementMatching(n,r.ns.rdf('type'),a.sym('http://purl.org/dc/terms/Image')))return null;var o=function t(n,a,r){var i=n.fetcher.getHeader(a,'content-type');if(i)for(var o=0;o<i.length;o++)for(var s=0;s<r.length;s++)if(0<=i[o].indexOf(r[s]))return!0;return!1},s=['application/pdf'];return o(a,n,s)?null:'view'},render:function t(n,a){var r=a.createElement('div');r.setAttribute('class','imageView');var i=a.createElement('IMG');i.setAttribute('src',n.uri),i.setAttribute('style','max-width: 100%; max-height: 100%;');var o=a.createElement('TR');return o.appendChild(i),r.appendChild(o),r}}},function(t,n,a){'use strict';var r=a(1);t.exports={icon:r.icons.iconBase+'noun_1619.svg',name:'playlistSlot',label:function t(n){var a=r.store;return a.anyStatementMatching(n,r.ns.rdf('type'),a.sym('http://purl.org/ontology/pbo/core#PlaylistSlot'))?'playlist slot':null},render:function t(n,o){function a(t,n){if(!t)return{html5:!0};var a=t.match(/\/\/(?:www\.)?youtu(?:\.be|be\.com)\/(?:watch\?v=|embed\/)?([a-z0-9\-_%]+)/i),r=t.match(/\/\/(?:www\.)?vimeo.com\/([0-9a-z\-_]+)/i),i=t.match(/\/\/(?:www\.)?dai.ly\/([0-9a-z\-_]+)/i),o=t.match(/\/\/(?:www\.)?(?:vk\.com|vkontakte\.ru)\/(?:video_ext\.php\?)(.*)/i);return a?{youtube:a}:r?{vimeo:r}:i?{dailymotion:i}:o?{vk:o}:void 0}var s=function t(n,i){if(!i)return n;var s=o.createElement('a');return s.setAttribute('href',i),s.appendChild(n),s.addEventListener('click',r.widgets.openHrefInOutlineMode,!0),s},d=function t(n){return o.createTextNode(n)},l=r.store,c=l.any(n,$rdf.sym('http://purl.org/ontology/pbo/core#playlist_item')),u=l.any(n,$rdf.sym('http://purl.org/ontology/olo/core#index')),f=c.uri,m=a(f),h=o.createElement('div'),g;if(m&&m.youtube?(f=f.replace('watch?v=','embed/'),h.setAttribute('class','imageView'),g=o.createElement('IFRAME'),g.setAttribute('src',f),g.setAttribute('width',560),g.setAttribute('height',315),g.setAttribute('frameborder',0),g.setAttribute('style','max-width: 850px; max-height: 100%;'),g.setAttribute('allowfullscreen','true')):(h.setAttribute('class','imageView'),g=o.createElement('IMG'),g.setAttribute('src',c.value),g.setAttribute('width',560),g.setAttribute('height',315),g.setAttribute('style','max-width: 560; max-height: 315;')),u){for(var b=l.statementsMatching(null,$rdf.sym('http://purl.org/ontology/olo/core#index')),y=[],w=0;w<b.length;w++)b[w]&&y.push(parseInt(b[w].object.value));u=parseInt(u.value);var i=o.createElement('div'),v=y[(y.indexOf(u)-1+y.length)%y.length],x=y[(y.indexOf(u)+1+y.length)%y.length],_=s(d('<<'),n.uri.split('#')[0]+'#'+v);i.appendChild(_);var k=o.createElement('span');k.innerHTML=' Playlist slot : '+u+' ',i.appendChild(k);var C=s(d('>>'),n.uri.split('#')[0]+'#'+x);i.appendChild(C)}var E=o.createElement('TR');return E.appendChild(g),i&&E.appendChild(i),h.appendChild(E),h}}},function(t,n,a){'use strict';var r=a(1);t.exports={icon:r.icons.iconBase+'noun_1619.svg',name:'video',label:function n(a){var i=r.store,o=r.ns,s=i.findTypeURIs(a),d=$rdf.Util.mediaTypeClass('video/*').uri.split('*')[0];for(var l in s)if(l.startsWith(d))return'Play video';return null},render:function t(n,a){var i=r.store,o=r.ns,s=a.createElement('div'),d=s.appendChild(a.createElement('video'));return d.setAttribute('controls','yes'),d.setAttribute('src',n.uri),d.setAttribute('width','100%'),s}}},function(t,n,a){'use strict';var r=a(1),o=r.ns,s=r.store;t.exports={icon:r.icons.iconBase+'noun_534313.svg',name:'audio',label:function n(a){var i=r.store,o=r.ns,s=i.findTypeURIs(a),d=$rdf.Util.mediaTypeClass('audio/*').uri.split('*')[0];for(var l in s)if(l.startsWith(d))return'Play audio';return null},render:function t(n,a){var r={autoplay:!1,chain:!0,chainAlbums:!0,loop:!1},i=n,d=function t(n){var a=n.lastIndexOf('.');if(0>a)return n;var r=n.lastIndexOf('/');return a<r?n:n.slice(0,a)},l=function t(n){var a=s.any(void 0,o.ldp('contains'),n);if(!a)return!1;var r=s.each(a,o.ldp('contains'));if(2>r.length)return!1;for(var i=n.uri,l=0,c;l<r.length;l++){if(c=r[l].uri,i.length>c.length&&i.startsWith(d(c)))return!0;if(i.endsWith('.m4a')&&c.endsWith('.mp3')&&d(i)===d(c))return!0}return!1},c=function t(n){var r=n.uri.split('/').slice(-3),a=function t(n){try{return decodeURIComponent(n)}catch(t){return n}};y.textContent=a(r[0]),w.textContent=a(r[1]),v.textContent=a(d(r[2]))},u=function t(n,a){return new Promise(function(d,i){if(a=a||0,!r.chain)return d(null);var l=s.any(void 0,o.ldp('contains'),n)||n.dir();return l?void s.fetcher.load(l).then(function(c){var u=s.each(l,o.ldp('contains')),f;u.sort();for(var m=0;m<u.length;m++)if(n.uri===u[m].uri)if(f=(m+1)%u.length,0===f){if(!r.chainAlbums)return r.loop?d(u[f]):d(null);if(1===a||!r.chainAlbums)return d(null);t(l,a+1).then(function(t){t&&s.fetcher.load(t).then(function(n){var a=s.each(t,o.ldp('contains'));return 0===a.length?d(null):(a.sort(),console.log('New Album: '+t),d(a[0]))})})}else return d(u[f])}):d(null)})},f=function t(n){var a=s.sym(n.target.getAttribute('src'));if(r.chain){var i=function t(a){var r=a;u(r).then(function(a){return a?l(a)?void(console.log('Ignoring redundant '+a),t(a)):(console.log('Moving on to '+a),c(a),x.appendChild(m(a,!0)),void x.removeChild(n.target)):void console.log('No successor to '+r)})};i(a)}},m=function t(n,r){var i=a.createElement('audio');return i.setAttribute('controls','yes'),i.setAttribute('src',n.uri),r&&i.setAttribute('autoplay','autoplay'),i.addEventListener('ended',f,!1),i},h=a.createElement('div'),g=h.appendChild(a.createElement('table')),b='padding: 0.3em; color:white; background-color: black;',y=g.appendChild(a.createElement('tr'));y.style.cssText=b;var w=g.appendChild(a.createElement('tr'));w.style.cssText=b;var v=g.appendChild(a.createElement('tr'));v.style.cssText=b;var x=g.appendChild(a.createElement('tr'));return c(n),x.appendChild(m(n,r.autoplay)),!s.holds(void 0,o.ldp('contains'),n)&&n.dir()&&s.fetcher.load(n.dir()),h}}},function(t,n,a){'use strict';var r=a(1),i='https://dokie.li/new',o=a(494);t.exports={icon:r.icons.iconBase+'dokieli-logo.png',name:'Dokieli',mintClass:r.ns.solid('DokieliDocument'),label:function n(a,i){if(tabulator.isExtension&&i.location==a.uri)return null;var o=r.store,s=r.ns,d=['text/html','application/xhtml+xml'],l=function t(n,a,r){var i=n.fetcher.getHeader(a,'content-type');if(i)for(var o=0;o<i.length;o++)for(var s=0;s<r.length;s++)if(0<=i[o].indexOf(r[s]))return!0;return!1},c=function n(r,i,o){for(var s=r.findTypeURIs(a),t=0;t<o.length;t++)if($rdf.Util.mediaTypeClass(o[t]).uri in s)return!0;return!1};if(!a.uri)return null;var u=o.findTypeURIs(a);return u[s.link('WebPage').uri]?'view':l(o,a,d)||c(o,a,d)?'Dok':null},mintNew:function t(n){var a=r.store,i=a.updater,s=n.newInstance||a.sym(n.newBase);console.log('New dok called with '+s);var d=s.uri;return d.endsWith('/')&&(d+='index.html'),d.endsWith('.html')||(d+='.html'),n.newInstance=s=a.sym(d),console.log('New dok will make: '+s),new Promise(function(t,r){a.fetcher.webOperation('PUT',s.uri,{data:o,contentType:'text/html'}).then(function(){console.log('new Dokieli document created at '+n.newInstance),t(n)}).catch(function(t){console.log('Error creating dokelili dok at '+n.newInstance+': '+t)})})},render:function t(n,a){var i=a.createElement('div'),o=r.store;i.setAttribute('class','docView');var s=a.createElement('IFRAME');s.setAttribute('src',n.uri),s.setAttribute('class','doc');var d=o.fetcher.getHeader(n.doc(),'content-type'),l=d?d[0]:null;l?console.log('humanReadablePane: c-t:'+l):console.log('humanReadablePane: unknown content-type?'),s.setAttribute('style','resize = both; height: 120em; width:80em;');var c=a.createElement('TR');return c.appendChild(s),i.appendChild(c),i}}},function(t,n,a){'use strict';t.exports='\n<!DOCTYPE html>\n<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">\n    <head>\n        <meta charset="utf-8" />\n        <title></title>\n        <meta content="width=device-width, initial-scale=1" name="viewport" />\n        <link href="https://dokie.li/media/css/basic.css" media="all" rel="stylesheet" title="Basic" />\n        <link href="https://dokie.li/media/css/do.css" media="all" rel="stylesheet" />\n        <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" media="all" rel="stylesheet" />\n        <script src="https://dokie.li/scripts/simplerdf.js"></script>\n        <script src="https://dokie.li/scripts/medium-editor.min.js"></script>\n        <script src="https://dokie.li/scripts/medium-editor-tables.min.js"></script>\n        <script src="https://dokie.li/scripts/do.js"></script>\n    </head>\n\n    <body about="" prefix="rdf: http://www.w3.org/1999/02/22-rdf-syntax-ns# rdfs: http://www.w3.org/2000/01/rdf-schema# owl: http://www.w3.org/2002/07/owl# xsd: http://www.w3.org/2001/XMLSchema# dcterms: http://purl.org/dc/terms/ dctypes: http://purl.org/dc/dcmitype/ foaf: http://xmlns.com/foaf/0.1/ pimspace: http://www.w3.org/ns/pim/space# cc: https://creativecommons.org/ns# skos: http://www.w3.org/2004/02/skos/core# prov: http://www.w3.org/ns/prov# qb: http://purl.org/linked-data/cube# schema: http://schema.org/ void: http://rdfs.org/ns/void# rsa: http://www.w3.org/ns/auth/rsa# cert: http://www.w3.org/ns/auth/cert# wgs: http://www.w3.org/2003/01/geo/wgs84_pos# bibo: http://purl.org/ontology/bibo/ sioc: http://rdfs.org/sioc/ns# doap: http://usefulinc.com/ns/doap# dbr: http://dbpedia.org/resource/ dbp: http://dbpedia.org/property/ sio: http://semanticscience.org/resource/ opmw: http://www.opmw.org/ontology/ deo: http://purl.org/spar/deo/ doco: http://purl.org/spar/doco/ cito: http://purl.org/spar/cito/ fabio: http://purl.org/spar/fabio/ oa: http://www.w3.org/ns/oa# as: https://www.w3.org/ns/activitystreams# ldp: http://www.w3.org/ns/ldp# solid: http://www.w3.org/ns/solid/terms# acl: http://www.w3.org/ns/auth/acl# dio: https://w3id.org/dio#" typeof="schema:CreativeWork sioc:Post prov:Entity">\n        <main>\n            <article about="" typeof="schema:Article">\n\n            </article>\n        </main>\n    </body>\n</html>\n'},function(t,n,a){'use strict';var r=a(1),i=r.ns;t.exports={icon:r.icons.originalIconBase+'tango/22-folder-open.png',name:'folder',mintNew:function t(n){var a=r.store,i=n.newInstance||a.sym(n.newBase),o=i.uri;o.endsWith('/')&&(o=o.slice(0,-1)),n.newInstance=a.sym(o+'/');var s=i.dir().uri,d=o.lastIndexOf('/'),l=o.slice(d+1);return a.fetcher.webOperation('PUT',i.uri+'.dummy').then(function(){return console.log('New folder created: '+i.uri),a.fetcher.delete(i.uri+'.dummy')}).then(function(){return console.log('Dummy file deleted : '+i.uri+'.dummy'),console.log('New container created: '+i.uri),n})},label:function t(a){var o=r.store,s=o.each(a,i.ldp('contains')).length;return 0<s?'Contents ('+s+')':o.holds(a,i.rdf('type'),i.ldp('Container'))?'Container (0)':null},render:function t(n,a){var o=r.panes.getOutliner(a),s=r.store,d=function t(n,r){var i=a.createElement('pre');console.log(n),i.setAttribute('style','background-color: '+r||'#eed;'),l.appendChild(i),i.appendChild(a.createTextNode(n))},l=a.createElement('div'),c;l.setAttribute('class','instancePane'),l.setAttribute('style','  border-top: solid 1px #777; border-bottom: solid 1px #777; margin-top: 0.5em; margin-bottom: 0.5em ');var u=function t(n){var a=n.uri.slice(n.dir().uri.length);return!(a.startsWith('.')||a.endsWith('.acl')||a.endsWith('~'))},f=n.uri.endsWith('/')?n.uri:n.uri+'/',m=s.sym(f+'index.ttl#this');if(s.holds(n,i.ldp('contains'),m.doc())){console.log('View of folder with be view of indexThing. Loading '+m);var h=l.appendChild(a.createElement('div'));return h.style.cssText='border-top: 0.2em solid #ccc;',s.fetcher.load(m.doc()).then(function(){c=h.appendChild(a.createElement('table')),r.outline.GotoSubject(m,!0,void 0,!1,void 0,c)}),l}if(!0){c=l.appendChild(a.createElement('table'));var g=function t(){var d=s.each(n,i.ldp('contains')).filter(u);d=d.map(function(t){return[r.utils.label(t).toLowerCase(),t]}),d.sort(),d=d.map(function(t){return t[1]}),r.utils.syncTableToArray(c,d,function(t){var r=s.statementsMatching(n,i.ldp('contains'),t)[0],d=o.VIEWAS_boring_default,l=o.propertyTR(a,r,!1);return l.firstChild.textContent='',l.firstChild.style.cssText+='min-width: 3em;',l.appendChild(o.outline_objectTD(t,d,void 0,r)),l})};c.refresh=g,g()}var b=l.appendChild(a.createElement('div')),y=r.authn.currentUser(),w={folder:n,div:b,dom:a,statusArea:b,me:y};w.refreshTarget=c;var v=r.create.newThingUI(w,r.panes),x=function t(a){for(var o=0,l;a[o];o++){l=a[o],console.log(' folder: dropped filename: '+l.name+', type: '+(l.type||'n/a')+' size: '+l.size+' bytes, last modified: '+(l.lastModifiedDate?l.lastModifiedDate.toLocaleDateString():'n/a'));var u=new FileReader;u.onload=function(t){return function(a){var o=a.target.result;if(console.log(' File read byteLength : '+o.byteLength),!n.uri.endsWith('/'))return void console.log('FAIL: - folder name should end in /');var l=s.sym(n.uri+encodeURIComponent(t.name));return s.holds(n,i.ldp('contains'),l)?(d('Sorry, '+n.uri+' already has something called '+t.name),void console.log('Drag-drop upload aborted: folder already contains '+l)):void r.store.fetcher.webOperation('PUT',l,{data:o,contentType:t.type}).then(function(){console.log(' Upload: put OK: '+l),s.add(n,i.ldp('contains'),l,n.doc()),c.refresh()}).catch(function(t){d(' Upload: FAILED '+l+', Error: '+t)})}}(l),u.readAsArrayBuffer(l)}};r.aclControl.preventBrowserDropEvents(a);var _=!1,k;if(_){var C=b.firstChild.style.cssText;arget=b.insertBefore(a.createElement('img'),b.firstChild),k.style.cssText=C,k.setAttribute('src',r.icons.iconBase+'noun_748003.svg'),k.setAttribute('style','width: 2em; height: 2em')}else k=b.firstChild;return r.widgets.makeDropTarget(k,null,x),l}}},function(t,n,a){'use strict';var r=a(1),o=r.ns;t.exports={icon:r.icons.originalIconBase+'tango/22-folder-open.png',name:'classInstance',label:function t(a){var i=r.store,s=i.each(void 0,o.rdf('type'),a).length;return 0<s?'List ('+s+')':null},render:function t(n,a){var s=r.panes.getOutliner(a),d=r.store,l=function t(n,r){var i=a.createElement('pre');i.setAttribute('style','background-color: '+r||'#eed;'),c.appendChild(i),i.appendChild(a.createTextNode(n))},c=a.createElement('div');c.setAttribute('class','instancePane'),c.setAttribute('style','  border-top: solid 1px #777; border-bottom: solid 1px #777; margin-top: 0.5em; margin-bottom: 0.5em ');var u=d.statementsMatching(void 0,o.rdf('type'),n);if(0<u.length){var f={},m=[];for(var h in u.map(function(t){f[t.subject.toNT()]=t}),d.findMembersNT(n))f[h]||m.push($rdf.st(d.fromNT(h),o.rdf('type'),n));if(m.length&&l('There are '+u.length+' explicit and '+m.length+' implicit members of '+r.utils.label(n)),n.sameTerm(o.rdf('Property')));else if(n.sameTerm(o.rdfs('Class'))){var g=d.statementsMatching(void 0,o.rdf('type'),void 0),b={};g.map(function(t){b[t.object]=t});var y=[];for(var w in b)y.push($rdf.st($rdf.sym(w),o.rdf('type'),o.rdfs('Class')));l('Total of '+g.length+' type statments and '+y.length+' unique types.')}if(10<u.length){var i=a.createElement('TR');i.appendChild(a.createTextNode(''+u.length)),c.appendChild(i)}s.appendPropertyTRs(c,u,!0,function(t){return!0}),m.length&&(l('Implcit:'),s.appendPropertyTRs(c,m,!0,function(t){return!0}))}return c}}},function(t,n,a){'use strict';var r=a(1),i=a(498);t.exports={icon:r.icons.iconBase+'noun_138712.svg',name:'slideshow',label:function n(a){var i=r.store,o=r.ns,s=i.findTypeURIs(a);if(s[o.ldp('Container').uri]||s[o.ldp('BasicContainer').uri]){var t=i.each(a,o.ldp('contains')),d=0;return t.map(function(t){r.widgets.isImage(t)&&d++}),0<d?'Slideshow':null}return null},render:function n(a,o){var s='https://leemark.github.io/better-simple-slideshow/css/simple-slideshow-styles.css';r.widgets.addStyleSheet(o,s);var d=r.store,l=r.ns,c=o.createElement('div');c.setAttribute('class','bss-slides');var u=d.findTypeURIs(a),t;(u[l.ldp('BasicContainer').uri]||u[l.ldp('Container').uri])&&(t=l.ldp('contains'));var f=d.each(a,t);f.sort();for(var m=0;m<f.length;m++)if(r.widgets.isImage(f[m])){var h=c.appendChild(o.createElement('figure')),g=h.appendChild(o.createElement('img'));g.setAttribute('src',f[m].uri),g.setAttribute('width','100%'),h.appendChild(o.createElement('figcaption'))}var b={dom:o};return setTimeout(function(){i('.bss-slides',b)},1e3),c}}},function(t,n){var a=function(t,n){if('undefined'==typeof a)var a=n.dom;var r=a.querySelectorAll(t),i={},o={init:function(t,n){this.counter=0,this.el=t,this.$items=t.querySelectorAll('figure'),this.numItems=this.$items.length,n=n||{},n.auto=n.auto||!1,this.opts={auto:'undefined'!=typeof n.auto&&n.auto,speed:'undefined'==typeof n.auto.speed?1500:n.auto.speed,pauseOnHover:'undefined'!=typeof n.auto.pauseOnHover&&n.auto.pauseOnHover,fullScreen:'undefined'!=typeof n.fullScreen&&n.fullScreen,swipe:'undefined'!=typeof n.swipe&&n.swipe},this.$items[0].classList.add('bss-show'),this.injectControls(t),this.addEventListeners(t),this.opts.auto&&this.autoCycle(this.el,this.opts.speed,this.opts.pauseOnHover),this.opts.fullScreen&&this.addFullScreen(this.el),this.opts.swipe&&this.addSwipe(this.el)},showCurrent:function(t){this.counter=0<t?this.counter+1===this.numItems?0:this.counter+1:0>this.counter-1?this.numItems-1:this.counter-1,[].forEach.call(this.$items,function(t){t.classList.remove('bss-show')}),this.$items[this.counter].classList.add('bss-show')},injectControls:function(t){var n=a.createElement('span'),r=a.createElement('span'),i=a.createDocumentFragment();n.classList.add('bss-prev'),r.classList.add('bss-next'),n.innerHTML='&laquo;',r.innerHTML='&raquo;',i.appendChild(n),i.appendChild(r),t.appendChild(i)},addEventListeners:function(t){var n=this;t.querySelector('.bss-next').addEventListener('click',function(){n.showCurrent(1)},!1),t.querySelector('.bss-prev').addEventListener('click',function(){n.showCurrent(-1)},!1),t.onkeydown=function(t){t=t||window.event,37===t.keyCode?n.showCurrent(-1):39===t.keyCode&&n.showCurrent(1)}},autoCycle:function(t,n,a){var r=this,i=window.setInterval(function(){r.showCurrent(1)},n);a&&(t.addEventListener('mouseover',function(){i=clearInterval(i)},!1),t.addEventListener('mouseout',function(){i=window.setInterval(function(){r.showCurrent(1)},n)},!1))},addFullScreen:function(t){var n=this,r=a.createElement('span');r.classList.add('bss-fullscreen'),t.appendChild(r),t.querySelector('.bss-fullscreen').addEventListener('click',function(){n.toggleFullScreen(t)},!1)},addSwipe:function(t){var n=this,a=new Hammer(t);a.on('swiperight',function(t){n.showCurrent(-1)}),a.on('swipeleft',function(t){n.showCurrent(1)})},toggleFullScreen:function(t){a.fullscreenElement||a.mozFullScreenElement||a.webkitFullscreenElement||a.msFullscreenElement?a.exitFullscreen?a.exitFullscreen():a.msExitFullscreen?a.msExitFullscreen():a.mozCancelFullScreen?a.mozCancelFullScreen():a.webkitExitFullscreen&&a.webkitExitFullscreen():a.documentElement.requestFullscreen?t.requestFullscreen():a.documentElement.msRequestFullscreen?t.msRequestFullscreen():a.documentElement.mozRequestFullScreen?t.mozRequestFullScreen():a.documentElement.webkitRequestFullscreen&&t.webkitRequestFullscreen(t.ALLOW_KEYBOARD_INPUT)}};[].forEach.call(r,function(t){i=Object.create(o),i.init(t,n)})};'undefined'!=typeof t&&t.exports&&(t.exports=a)},function(t,n,a){'use strict';var o=a(1);t.exports={icon:o.icons.originalIconBase+'foaf/foafTiny.gif',name:'social',label:function t(n){return o.store.whether(n,o.ns.rdf('type'),o.ns.foaf('Person'))?'Friends':null},render:function n(c,s){var u=function t(n,a){for(var r=[],o=0;o<n.length;o++)for(var i=0;i<a.length;i++)if(a[i].sameTerm(n[o])){r.push(a[i]);break}return r},m=function t(a){var n=' ';return n+=a||'no',1===a?n+' person':n+' people'},h=function t(n){console.log(n);var a=s.createElement('p');a.textContent=n,P.appendChild(a)},g=function t(n,r){if(!r)return n;var i=s.createElement('a');return i.setAttribute('href',r),i.appendChild(n),i},b=function t(n){return s.createTextNode(n)},y=function t(n,a,r){var i=s.createElement('form'),d=s.createElement('input');i.appendChild(d);var l=s.createTextNode(n);l.className='question',i.appendChild(l),d.setAttribute('type','checkbox');var c=function t(n){if(l.className='pendingedit',this.checked)try{v.UserInput.sparqler.insert_statement(a,function(t,n,r){return l.className='question',n?void x.add(a.subject,a.predicate,a.object,a.why):(o.log.alert(null,'Message','Error occurs while inserting '+a+'\n\n'+r),void(d.checked=!1))})}catch(t){o.log.error('Data write fails:'+t),o.log.alert('Data write fails:'+t),d.checked=!1,l.className='question'}else try{v.UserInput.sparqler.delete_statement(a,function(t,n,r){l.className='question',n?x.removeMany(a.subject,a.predicate,a.object,a.why):(o.log.alert('Error occurs while deleting '+a+'\n\n'+r),this.checked=!0)})}catch(t){return o.log.alert('Delete fails:'+t),void(this.checked=!0)}};return d.checked=r,d.addEventListener('click',c,!1),i},w=function t(n,a){return o.widgets.personTR(s,o.ns.foaf('knows'),n,{})},v=o.panes.getOutliner(s),x=o.store,_=s.createElement('div');_.setAttribute('class','socialPane');var C=o.ns.foaf,E='background-color: #eee; width: 25%; border: 0; padding: 0.5em; margin: 0;',T='background-color: #fff; color: #000; width: 46%; margin: 0; border-left: 1px solid #ccc; border-right: 1px solid #ccc; border-bottom: 1px solid #ccc; padding: 0;',A=' width: 100% ; border: none; margin: 0; padding: 0;',S=_.appendChild(s.createElement('table')),I=S.appendChild(s.createElement('tr')),N=I.appendChild(s.createElement('td')),L=I.appendChild(s.createElement('td')),R=I.appendChild(s.createElement('td')),M=N;M.style.cssText=E;var D=L.appendChild(s.createElement('table'));D.style.cssText=T;var P=R;P.style.cssText=E;var O=x.any(c,C('img'))||x.any(c,C('depiction'));if(O){var B=s.createElement('IMG');B.setAttribute('src',O.uri),B.style.cssText=A,M.appendChild(B)}var U=x.anyValue(c,C('name'))||'???',F=s.createElement('H3');F.appendChild(s.createTextNode(U));var q=o.authn.currentUser(),z=q?q.uri:null,H=o.authn.loginStatusBox(s,function(t){q=x.sym(t),o.widgets.refreshTree(_)});P.appendChild(H);var W=q&&x.sameThings(q,c),V=C('knows'),G=x.anyValue(c,C('givenname'))||x.anyValue(c,C('firstName'))||x.anyValue(c,C('nick'))||x.anyValue(c,C('name'))||x.anyValue(c,vcard('fn')),J=x.each(c,V),K=null,X=!1;if(q){for(var Y=x.each(void 0,C('primaryTopic'),q),Z='',Q=0;Q<Y.length;Q++)if(x.whether(Y[Q],o.ns.rdf('type'),C('PersonalProfileDocument')))if(X=v.UserInput.sparqler.editable(Y[Q].uri,x),!X)Z+='Your profile <'+o.utils.escapeForXML(Y[Q].uri)+'> is not remotely editable.';else{K=Y[Q];break}if(K?(h('Editing your profile '+K+'.'),X=v.UserInput.sparqler.editable(K.uri,x)):h(Z+'\nI couldn\'t find your editable personal profile document.'),W);else{F=s.createElement('h3'),F.appendChild(s.createTextNode('You and '+G)),M.appendChild(F);var i=x.canon(q),ee=x.whether(c,V,i),te=!1,ne=x.statementsMatching(i,V,c);ne.length&&(te=!0,!K&&(K=ne[0].why));var I=s.createElement('tr');M.appendChild(I);var ae=function t(){I.appendChild(g(b('You'),z)),I.appendChild(b(' and ')),I.appendChild(g(b(G),c.uri))};if(ee?te?(ae(),I.appendChild(b(' say you know each other.'))):(I.appendChild(g(b(G),c.uri)),I.appendChild(b(' knows ')),I.appendChild(g(b('you'),z)),I.appendChild(b(' (unconfirmed).')),I.appendChild(b(' confirm you know ')),I.appendChild(g(b(G),c.uri)),I.appendChild(b('.'))):te?(I.appendChild(g(b('You'),z)),I.appendChild(b(' know ')),I.appendChild(g(b(G),c.uri)),I.appendChild(b(' (unconfirmed)'))):(ae(),I.appendChild(b(' have not said you know each other.'))),X){var re=y('You know '+G,new o.rdf.Statement(q,V,c,K),te);M.appendChild(re)}if(J){var f=x.each(q,C('knows'));if(f.length){var ie=u(J,f),oe=s.createElement('tr');if(M.appendChild(oe),oe.appendChild(s.createTextNode('You'+(G?' and '+G:'')+' know'+m(ie.length)+' found in common')),ie)for(var se=0;se<ie.length;se++)oe.appendChild(s.createTextNode(',  '+o.utils.label(ie[se])))}var de=s.createElement('tr');M.appendChild(de)}}}if(!0)var le=o.widgets.attachmentList(s,c,D,{doc:K,modify:!!X,predicate:C('knows'),noun:'friend'});else{te=x.each(c,C('knows')),ee=x.each(void 0,C('knows'),c);for(var pe=[],ce=[],ue=[],fe=0;fe<te.length;fe++){for(var he=te[fe],ge=!1,be=0;be<ee.length;be++)if(ee[be].sameTerm(he)){ge=!0;break}ge?pe.push(he):ce.push(he)}for(var j=0;j<ee.length;j++){for(var ye=ee[j],we=!1,ve=0;ve<te.length;ve++)if(te[ve].sameTerm(ye)){we=!0;break}we||ue.push(ye)}for(var xe=[['Acquaintances',te],['Mentioned as acquaintances by: ',ue]],_e=0;_e<xe.length;_e++){var ke=xe[_e],Ce=ke[1];if(0!==Ce.length){var Ee=s.createElement('h3');Ee.textContent=ke[0];var Te=s.createElement('tr');Te.appendChild(Ee),D.appendChild(Te);for(var Ae=[],Se=0;Se<Ce.length;Se++)Ae.push([o.utils.label(Ce[Se]),Ce[Se]]);Ae.sort();for(var Ie=null,Ne=0,je;Ne<Ae.length;Ne++)je=Ae[Ne][1],je.sameTerm(Ie)||(Ie=je,'...'!==o.utils.label(je)&&D.appendChild(w(je)))}}}F=s.createElement('h3'),F.appendChild(s.createTextNode('Basic Information')),M.appendChild(F);for(var Le=[o.ns.foaf('homepage'),o.ns.foaf('weblog'),o.ns.foaf('workplaceHomepage'),o.ns.foaf('schoolHomepage')],Re=0;Re<Le.length;Re++){var Me=Le[Re],De=x.statementsMatching(c,Me);if(0===De.length);else{for(var Pe=[],Oe=0,Be;Oe<De.length;Oe++)Be=De[Oe],Be.object.uri&&Pe.push(Be.object.uri);Pe.sort();for(var Ue='',Fe=0,k,qe;Fe<Pe.length;Fe++)if(qe=Pe[Fe],qe!==Ue){Ue=qe;var ze='';if(k=o.utils.label(Me),1<Pe.length){var He=qe.indexOf('//');if(0<He){var l=qe.indexOf('/',He+2),r=qe.lastIndexOf('.',l);0<r&&(l=r),ze=qe.slice(He+2,l)}}ze&&(k=ze+' '+k);var We=s.createTextNode(k),t=s.createElement('a');t.appendChild(We),t.setAttribute('href',qe);var a=s.createElement('div');a.style.cssText='width: 80%; background-color: #fff; border: solid 0.05em #ccc;  margin-top: 0.1em; margin-bottom: 0.1em; padding: 0.1em; text-align: center;',a.appendChild(t),M.appendChild(a)}}}for(var d=[o.ns.foaf('openid'),o.ns.foaf('nick')],Ve=0;Ve<d.length;Ve++){var Ge=d[Ve],Je=x.statementsMatching(c,Ge);0===Je.length||v.appendPropertyTRs(M,Je,!1,function(t){return!0})}return _}}},function(t,n,a){'use strict';var r=a(1);t.exports={icon:r.icons.originalIconBase+'tango/22-text-x-generic.png',name:'humanReadable',label:function n(a,i){if(tabulator.isExtension&&i.location==a.uri)return null;var o=r.store,s=r.ns,d=['text/plain','text/html','application/xhtml+xml','image/png','image/jpeg','application/pdf','video/mp4'],l=function t(n,a,r){var i=n.fetcher.getHeader(a,'content-type');if(i)for(var o=0;o<i.length;o++)for(var s=0;s<r.length;s++)if(0<=i[o].indexOf(r[s]))return!0;return!1},c=function n(r,i,o){for(var s=r.findTypeURIs(a),t=0;t<o.length;t++)if($rdf.Util.mediaTypeClass(o[t]).uri in s)return!0;return!1};if(!a.uri)return null;var u=o.findTypeURIs(a);return u[s.link('WebPage').uri]?'view':l(o,a,d)||c(o,a,d)?'View':null},render:function t(n,a){var i=a.createElement('div'),o=r.store;i.setAttribute('class','docView');var s=a.createElement('IFRAME');s.setAttribute('src',n.uri),s.setAttribute('class','doc');var d=o.fetcher.getHeader(n.doc(),'content-type'),l=d?d[0]:null;l?console.log('humanReadablePane: c-t:'+l):console.log('humanReadablePane: unknown content-type?'),s.setAttribute('style','resize = both; height: 120em; width:80em;');var c=a.createElement('TR');return c.appendChild(s),i.appendChild(c),i}}},function(t,n,a){'use strict';var r=a(1);t.exports={icon:r.icons.originalIconBase+'rdf_flyer.24.gif',name:'dataContents',label:function t(a){if('http://www.w3.org/2007/ont/link#ProtocolEvent'in r.store.findTypeURIs(a))return null;var i=r.store.statementsMatching(void 0,void 0,void 0,a).length;return 0==i?null:'Data ('+i+')'},statementsAsTables:function t(n,a,o){function s(t){var n=a.createElement('table'),o=null,s=h[u.toStr(t)];if(!s)return n.appendChild(a.createTextNode('...')),n;s.sort();for(var l=0,c=0,i;c<s.length;c++){var f=s[c],m=a.createElement('tr');if(f.predicate.uri!=o){o&&1<l&&i.setAttribute('rowspan',''+l),i=a.createElement('td'),i.setAttribute('class','pred');var g=a.createElement('a');g.setAttribute('href',f.predicate.uri),g.addEventListener('click',r.widgets.openHrefInOutlineMode,!0),g.appendChild(a.createTextNode(r.utils.predicateLabelForXML(f.predicate))),i.appendChild(g),m.appendChild(i),o=f.predicate.uri,l=0}l++;var b=a.createElement('td');b.appendChild(d(f.object)),m.appendChild(b),n.appendChild(m)}return o&&1<l&&i.setAttribute('rowspan',''+l),n}function d(t){var n;switch(t.termType){case'NamedNode':var o=a.createElement('a');return o.setAttribute('href',t.uri),o.addEventListener('click',r.widgets.openHrefInOutlineMode,!0),o.appendChild(a.createTextNode(r.utils.label(t))),o;case'Literal':if(!t.datatype||!t.datatype.uri)return n=a.createElement('div'),n.setAttribute('style','white-space: pre-wrap;'),n.textContent=t.value,n;if('http://www.w3.org/1999/02/22-rdf-syntax-ns#XMLLiteral'==t.datatype.uri)return n=a.createElement('div'),n.setAttribute('class','embeddedXHTML'),n.innerHTML=t.value,n;;return a.createTextNode(t.value);case'BlankNode':if(t.toNT()in w){v[t.toNT()]=!0;var o=a.createElement('a');return o.setAttribute('href','#'+t.toNT().slice(2)),o.setAttribute('class','bnodeRef'),o.textContent='*'+t.toNT().slice(3),o}w[t.toNT()]=!0;var l=s(t);return w[t.toNT()]=l,l.style.backgroundColor=r.utils.ancestor(l,'TABLE')&&'white'==r.utils.ancestor(l,'TABLE').style.backgroundColor?'#eee':'white',l;case'Collection':var n=a.createElement('table');n.setAttribute('class','collectionAsTables');for(var c=0,i;c<t.elements.length;c++)i=a.createElement('tr'),n.appendChild(i),i.appendChild(d(t.elements[c]));return n;case'Graph':var n=r.panes.dataContents.statementsAsTables(t.statements,a);return n.setAttribute('class','nestedFormula'),n;case'Variable':var n=a.createTextNode('?'+t.uri);return n;}throw'Unhandled node type: '+t.termType}var l=r.panes.getOutliner(a),c=a.createElement('table'),u=r.rdf.Serializer(r.store),f=u.rootSubjects(n),m=f.roots,h=f.subjects,g=f.loopBreakers;for(var b in g)dump('\tdataContentPane: loopbreaker:'+b+'\n');var y=l,w={},v={};o&&(m=o.concat(m.filter(function(t){for(var n=0;n<o.length;n++)if(t.sameTerm(o[n]))return!1;return!0})));for(var x=0,i;x<m.length;x++){i=a.createElement('tr'),c.appendChild(i);var _=a.createElement('td');i.appendChild(_);var k=a.createElement('td');i.appendChild(k);var C=m[x];'BlankNode'==C.termType?_.appendChild(a.createTextNode(r.utils.label(C))):_.appendChild(d(C)),k.appendChild(s(C))}for(var E in v){var T=w[E],i=a.createElement('tr'),A=a.createElement('a');A.setAttribute('id',E.slice(2)),A.setAttribute('class','bnodeDef'),A.textContent=E.slice(3)+')',T.insertBefore(A,T.firstChild)}return c},render:function t(n,a){var o=r.panes.getOutliner(a),s=r.store,d=a.createElement('div');d.setAttribute('class','dataContentPane');var l=s.statementsMatching(void 0,void 0,void 0,n);if(1){var c=[];s.holds(n,void 0,void 0,n)&&c.push(n);var u=s.any(n,r.ns.foaf('primaryTopic'),void 0,n);u&&c.push(u),d.appendChild(r.panes.dataContents.statementsAsTables(l,a,c))}else{var f=r.rdf.Serializer(r.store),m=f.rootSubjects(l),h=m.roots,g={};g.render=function(t){var r=a.createElement('div');r.setAttribute('class','withinDocumentPane');var i=s.statementsMatching(t,void 0,void 0,n);return appendPropertyTRs(r,i,!1,function(t,n){return!0}),r};for(var b=0;b<h.length;b++){var i=a.createElement('TR'),y=h[b];i.style.verticalAlign='top';var w=o.outline_objectTD(y,void 0,i);i.appendChild(w),d.appendChild(i),outline_expand(w,y,{pane:g})}}return d}}},function(t,n,a){'use strict';var r=a(1);t.exports={icon:r.icons.originalIconBase+'w3c/n3_smaller.png',name:'n3',label:function t(a){if('http://www.w3.org/2007/ont/link#ProtocolEvent'in r.store.findTypeURIs(a))return null;var i=r.store.statementsMatching(void 0,void 0,void 0,a).length;return 0===i?null:'Data ('+i+') as N3'},render:function t(n,a){var i=r.store,o=a.createElement('div');o.setAttribute('class','n3Pane');var s=i.statementsMatching(void 0,void 0,void 0,n),d=r.rdf.Serializer(i);d.suggestNamespaces(i.namespaces),d.setBase(n.uri);var l=d.statementsToN3(s),c=a.createElement('PRE');return c.appendChild(a.createTextNode(l)),o.appendChild(c),o}}},function(t,n,a){'use strict';var r=a(1);t.exports={icon:r.icons.originalIconBase+'22-text-xml4.png',name:'RDFXML',label:function t(a){if('http://www.w3.org/2007/ont/link#ProtocolEvent'in r.store.findTypeURIs(a))return null;var i=r.store.statementsMatching(void 0,void 0,void 0,a).length;return 0==i?null:'As RDF/XML ('+i+')'},render:function t(n,a){var i=r.store,o=a.createElement('div');o.setAttribute('class','RDFXMLPane');var s=i.statementsMatching(void 0,void 0,void 0,n),d=r.rdf.Serializer(i);d.suggestNamespaces(i.namespaces),d.setBase(n.uri);var l=d.statementsToXML(s),c=a.createElement('PRE');return c.appendChild(a.createTextNode(l)),o.appendChild(c),o}}},function(t,n,a){'use strict';var r=a(1);t.exports={icon:r.icons.iconBase+'noun_122196.svg',name:'form',label:function t(a){var i=r.widgets.formsFor(a).length;return r.log.debug('Form pane: forms for '+a+': '+i),i?''+i+' forms':null},render:function n(a,o){var l=r.store,c=r.ns,s=$rdf.Namespace('http://www.w3.org/2005/01/wf/flow#'),u=$rdf.Namespace('http://purl.org/dc/elements/1.1/'),f=$rdf.Namespace('http://purl.org/dc/terms/'),m=function t(n,a){var r=o.createElement('p');return r.setAttribute('style',a?a:'color: grey; background-color: white'),v.appendChild(r).textContent=n,r},h=function t(n,a){m(n,'style',a?a:'color: grey; background-color: #fdd;')},g=function t(n,a){n||h('Sorry, failed to save your change:\n'+a)},b=this,y=function t(n){var r=n.parentNode,i=b.render(a,o);r.replaceChild(i,n)},w=l.findTypeURIs(a),t=r.authn.currentUser(),v=o.createElement('div');if(v.setAttribute('class','formPane'),!t)m('You are not logged in. If you log in and have workspaces then you would be able to select workspace in which to put this new information');else{var x=l.each(t,c.ui('workspace'));(x.length=0)&&m('You don\'t seem to have any workspaces defined.  A workspace is a place on the web (http://..) or in the file system (file:///) to store application data.\n')}var _=function t(n,a){l.fetcher.nowOrWhenFetched(n.uri,a,function(t,s){if(!t)return h('Cannot load store '+n.uri+': '+s);for(var d=r.widgets.formsFor(a),l=0;l<d.length;l++){var i=d[l],c=o.createElement('h4');if(v.appendChild(c),i.uri){var u=$rdf.Util.uri.document(i);if(u.uri!==i.uri){var f=v.appendChild(r.widgets.editFormButton(o,v,i,u,g));f.setAttribute('style','float: right;')}}var m=o.createElement('a');m.setAttribute('href',i.uri),c.appendChild(m),m.textContent=r.utils.label(i,!0),r.widgets.appendForm(o,v,{},a,i,n,g)}})},k=null,C=$rdf.Util.uri.docpart(a.uri);if(k=a.uri!==C&&l.updater.editable(C,l)?l.sym($rdf.Util.uri.docpart(a.uri)):l.any(l.sym(C),c.link('annotationStore')),!k){var E={},T=[];for(var A in l.statementsMatching(a).map(function(t){E[t.why.uri]=1}),l.statementsMatching(void 0,void 0,a).map(function(t){E[t.why.uri]=2}),E)T.push(E[A],A);T.sort();for(var d=0,i;d<T.length;d++)if(i=T[d][1],i&&l.updater.editable(i)){k=l.sym(i);break}}var S=function t(n,a,r){if(0===r.length)return[a];for(var o=n.each(subj,r[0]),s=[],d=0;d<o.length;d++)s=s.concat(t(n,o[d],r.slice(1)));return s},I='2014';if(k)_(k,a);else{h('No suitable store is known, to edit <'+a.uri+'>.');var N=r.authn.selectWorkspace(o,function(t){m('Workspace selected OK: '+t);for(var n=l.each(void 0,c.space('workspace'),t),r=0;r<n.length;d++){var i=n[r],o=l.any(t,c.space('store')),s=l.any(t,c.ical('dtstart')).value(),u=l.any(t,c.ical('dtend')).value();if(o&&s&&u&&s<=I&&u>I){_(o,a);break}else h('Note no suitable annotation store in activity: '+i)}});v.appendChild(N)}return v}}},function(t,n,a){'use strict';var r=a(1);t.exports={icon:r.icons.iconBase+'noun_25830.svg',name:'attachments',label:function n(a){var i=r.store,o=i.findTypeURIs(a),t=$rdf.Namespace('http://www.w3.org/2000/10/swap/pim/qif#'),s=$rdf.Namespace('http://www.w3.org/2005/01/wf/flow#');return o['http://www.w3.org/ns/pim/trip#Trip']||'http://www.w3.org/ns/pim/trip#Trip'==a.uri||o['http://www.w3.org/2005/01/wf/flow#Task']||o['http://www.w3.org/2000/10/swap/pim/qif#Transaction']||t('Transaction')in i.findSuperClassesNT(a)||i.holds(a,s('attachment'))?'attachments':null},render:function t(n,a){var d=r.store,i=r.ns,o=$rdf.Namespace('http://www.w3.org/2005/01/wf/flow#'),s=$rdf.Namespace('http://www.w3.org/2002/12/cal/ical#'),l=$rdf.Namespace('http://purl.org/dc/elements/1.1/'),c=$rdf.Namespace('http://purl.org/dc/terms/'),u=$rdf.Namespace('http://www.w3.org/ns/pim/trip#'),f=$rdf.Namespace('http://www.w3.org/2000/10/swap/pim/qif#'),m=function t(a,r,i){var s=r.statementsMatching(n,c('modified')),s=s.concat(r.statementsMatching(n,o('modifiedBy'))),d=[$rdf.st(n,c('modified'),new Date,i)];me&&d.push($rdf.st(n,o('modifiedBy'),me,i)),sparqlService.update(s,d,function(t,n,a){})},h=function t(n){var r=a.createElement('pre');r.setAttribute('style','background-color: pink'),y.appendChild(r),r.appendChild(a.createTextNode(n))},g=this,b=function t(r){var i=r.parentNode,o=g.render(n,a);i.replaceChild(o,r)},w=function t(n,a){if(n.updater.editable(a.doc(),n))return a.doc();var r=n.any(a.doc(),f('annotationStore'));return r},y=a.createElement('div'),v=r.utils.escapeForXML;y.setAttribute('class','attachPane'),y.innerHTML='<h1>'+v(r.utils.label(n,!0))+' attachments</h1>';var _=o('attachment'),x=f('SupportingDocument'),C={},E=0,T=null,A=null,S=null,I=null,N=f('SupportingDocument'),j=function t(a){var i=d.sym({"http://www.w3.org/2005/01/wf/flow#Task":'http://purl.org/dc/elements/1.1/created',"http://www.w3.org/ns/pim/trip#Trip":'http://www.w3.org/2002/12/cal/ical#dtstart',"http://www.w3.org/2000/10/swap/pim/qif#Transaction":'http://www.w3.org/2000/10/swap/pim/qif#date',"http://www.w3.org/2000/10/swap/pim/qif#SupportingDocument":'http://purl.org/dc/elements/1.1/date'}[n.uri]);return i||(i=d.any(n,r.ns.ui('sortBy'))),i},L=function t(n){var a=j(n.uri);if(a)return a;var r=d.findSuperClassesNT(n);for(var i in r)if(a=j(d.fromNT(i).uri),a)return a},R=function t(n){var a=L(n),r=d.findMemberURIs(n),o=[],s=[],l,c,u;for(l in r)r.hasOwnProperty(l)&&(c=d.sym(l),a?(u=d.any(c,a),u=u?u.value:'8888-12-31'):(h('No sortby '+a+' for '+c),u='9999-12-31'),o.push([u,c]));o.sort(),o.reverse();for(var f=0;f<o.length;f++)s.push(o[f][1]);return s},M,D;'http://www.w3.org/ns/pim/trip#Trip'==n.uri||f('Transaction')in d.findSuperClassesNT(n)?(D=!0,M=R(n)):(T=n,E=1,M=[n],D=!1);var P=R(x);P||h('objects:'+P.length);var O=function t(){A=null,K.innerHTML=''},B=function t(n){var i=0==n?P:1==n?null===T?P.filter(function(t){return!!d.holds(void 0,_,t)}):P.filter(function(t){return!!d.holds(T,_,t)}):P.filter(function(t){return 0==d.each(void 0,_,t).length});r.widgets.selectorPanelRefresh(J,a,d,N,_,!0,i,C,H,F),1==i.length?(A=i[0],H(A,null,!0)):O()},U=function t(n,a,r,i){if(d.holds(n,_,a)!=r){var o=r?'attach':'detach',s=function t(r,s,d){s?i():h('Error: Unable to '+o+' '+a.uri+' to '+n.uri+':\n'+d)},l=w(d,n);if(!l)h('There is no annotation store for: '+n.uri);else{var c=[$rdf.st(n,_,a,l)];r?d.updater.update([],c,s):d.updater.update(c,[],s)}}},F=function t(n,a,r,i){var l,s;if(r){if(!T)return void h('No subject for the link has been selected');l=T,s=n}else{if(!A)return void h('No object for the link has been selected');l=n,s=A}U(l,s,!d.holds(l,_,s),i)},q=function t(n,a,r){r?T=n:(T=null,1==E&&O()),0!=E&&B(E)};if(D){var z=r.widgets.selectorPanel(a,d,n,_,!1,M,C,q,F);z.setAttribute('style','background-color: white;  width: 25em; height: 100%; padding: 0 em; overflow:scroll; float:left'),y.appendChild(z)}var H=function t(n,i,o){if(!o)return O(),void(K.innerHTML='');A=n;try{var s=function t(n,a){var r=n.fetcher.getHeader(a,'content-type');if(r)for(var i=['text/html','image/png','application/pdf'],o=0;o<r.length;o++)for(var s=0;s<i.length;s++)if(0<=r[o].indexOf(i[s]))return!0;return!1};K.innerHTML='Loading ....',n.uri&&d.fetcher.load(n.uri).then(function(){var t=r.panes.getOutliner(a),i=t.propertyTable(n);K.innerHTML='',K.appendChild(i)}).catch(function(t){K.textContent='Error loading '+n.uri+': '+t})}catch(t){K.innerHTML='<span style="background-color: pink;">Error:'+t+'</span>'}};y.setAttribute('style','background-color: white; width:40cm; height:20cm;');var W=function t(n,a,r,o){var s=n.createElement('table'),d=r;s.setAttribute('style','float: left; width: 30em; padding: 0.5em; height: 1.5em; background-color: #ddd; color: #444; font-weight: bold');var l=n.createElement('tr'),c='border-radius: 0.6em; text-align: center;',u=c+'background-color: #ccc; color: black;';s.appendChild(l);var f=function t(){for(h=0;h<a.length;h++)m[h].setAttribute('style',h==d?u:c)},m=[],h,i;for(h=0;h<a.length;h++){i=m[h]=n.createElement('td'),i.textContent=a[h],l.appendChild(m[h]);var g=function t(n,a){n.addEventListener('click',function(t){d=a,f(),o(a)})};g(i,h)}return f(),s},V=function t(n){n!==E&&(E=n,O(),B(n))},G=a.createElement('div');G.setAttribute('style',' width: 30em; height: 100%;  padding: 0em; float:left;'),y.appendChild(G),G.appendChild(W(a,['all','attached','not attached'],E,V));var J=r.widgets.selectorPanel(a,d,N,_,!0,P,C,H,F);J.setAttribute('style','background-color: #ffe;  width: 30em; height: 100%; padding: 0em; overflow:scroll;'),G.appendChild(J);var K=a.createElement('div');if(K.setAttribute('style','padding: 0em; margin: 0;  height: 100%; overflow:scroll;'),y.appendChild(K),B(E),0<M.length&&D){for(var X={},Y=0,k;Y<M.length;Y++)k=w(d,M[Y]),k&&(X[k.uri]=M[Y]);for(var Z in X){var k=d.sym(Z),Q=a.createElement('div');if(Q.setAttribute('style','clear: left; width: 20em; margin-top:2em; background-color:#ccc; border-radius: 1em; padding: 1em; font-weight: bold;'),Q.textContent='+ New '+r.utils.label(n),!0){Q.textContent+=' in '+r.utils.label(k);var ee=a.createElement('span');ee.setAttribute('style','font-weight: normal; font-size: 80%; color: #777;'),ee.textContent=Z,Q.appendChild(a.createElement('br')),Q.appendChild(ee)}Q.addEventListener('click',function(t){var i=r.widgets.promptForNew(a,d,n,_,n,null,k,function(t,n){!t});try{y.insertBefore(i,Q.nextSibling)}catch(t){y.appendChild(i)}var o=i.AJAR_subject},!1),y.appendChild(Q)}}return y}}},function(t,n,a){'use strict';var r=a(1);t.exports={icon:r.icons.originalIconBase+'table.png',name:'tableOfClass',label:function t(a){if(!r.store.any(void 0,r.ns.rdf('type'),a))return null;var i=r.store.statementsMatching(void 0,r.ns.rdf('type'),a).length;return 0==i?null:15<i?null:r.utils.label(a)+' table'},render:function t(n,a){var i=a.createElement('div');return i.setAttribute('class','tablePane'),i.appendChild(r.table(a,{tableClass:n})),i}}},function(t,n,a){'use strict';var r=a(1);t.exports={icon:r.icons.originalIconBase+'about.png',name:'default',label:function t(n){return'about '},render:function t(n,a){var i=function t(n,a){return'undefined'==typeof r.panes.internal.predicates[n.uri]&&(a&&'http://www.w3.org/1999/02/22-rdf-syntax-ns#type'==n.uri?!1:!0)},o=r.panes.getOutliner(a),s=r.store,d=o;r.log.info('@defaultPane.render, dom is now '+a.location),n=s.canon(n);var l=a.createElement('div');l.setAttribute('class','defaultPane');var c=s.statementsMatching(n);if(o.appendPropertyTRs(l,c,!1,i),c=s.statementsMatching(void 0,void 0,n),o.appendPropertyTRs(l,c,!0,i),'Literal'==n.termType&&'http://'==n.value.slice(0,7)&&o.appendPropertyTRs(l,[$rdf.st(s.sym(n.value),r.ns.link('uri'),n)],!0,i),'NamedNode'==n.termType&&s.updater.editable(r.rdf.Util.uri.docpart(n.uri),s)||'BlankNode'==n.termType&&s.anyStatementMatching(n)&&s.anyStatementMatching(n).why&&s.anyStatementMatching(n).why.uri&&s.updater.editable(s.anyStatementMatching(n).why.uri)/*! && HCIoptions["bottom insert highlights"].enabled*/){var u=a.createElement('tr'),f=a.createElement('td');f.setAttribute('colspan','2'),f.setAttribute('notSelectable','true');var m=a.createElement('img');m.src=r.icons.originalIconBase+'tango/22-list-add-new.png',m.addEventListener('click',function t(n){return o.UserInput.addNewPredicateObject(n),n.stopPropagation(),void n.preventDefault()}),m.className='bottom-border-active',l.appendChild(u).appendChild(f).appendChild(m)}return l},sync:function t(n,a,i){r.log.info('Re-expand: '+i);var o={},d=i,l,c;for(l=d.firstChild;l;l=l.nextSibling)l.childNodes[1]&&'TABLE'==l.childNodes[1].firstChild.nodeName&&(c=l.AJAR_statement,o[c.predicate.toString()]||(o[c.predicate.toString()]={}),o[c.predicate.toString()][c.object.toString()]=l.childNodes[1].childNodes[1]);var s=propertyTable(n,void 0,pane);for(l=s.firstChild;l;l=l.nextSibling)if(c=l.AJAR_statement,c&&o[c.predicate.toString()]){var u=o[c.predicate.toString()][c.object.toString()];u&&l.childNodes[1].replaceChild(u,l.childNodes[1].firstChild)}}}},function(t,n,a){'use strict';(function(t,n){var r=a(1);t.exports={icon:(t.__dirname||n)+'22-builder.png',name:'ui',label:function n(a){var i=r.ns,o=r.store,s=o.findTypeURIs(a);return s[i.rdfs('Class').uri]?'creation forms':s[i.ui('Form').uri]?'edit form':null},render:function n(a,o){var s=r.store,d=r.ns,l=o.createElement('div');l.setAttribute('class','formPane');var c=r.utils.label(a),u=function t(n,a){var r=o.createElement('p');return r.setAttribute('style',a||'color: grey; background-color: white'),l.appendChild(r).textContent=n,r},f=function t(n,a){u(n,'style',a||'color: grey; background-color: #fdd')},m=function t(n,a){n||f('Sorry, failed to save your change:\n'+a)},i=this,h=function t(n){var r=n.parentNode,s=i.render(a,o);r.replaceChild(s,n)},g=s.statementsMatching(a),b=s.statementsMatching(void 0,void 0,a),y=s.findTypeURIs(a),t=null;if(a.uri){var w=$rdf.Util.uri.docpart(a.uri);a.uri!==w&&r.store.updater.editable(w)&&(t=s.sym($rdf.Util.uri.docpart(a.uri)))}t||(t=s.any(s.sym(w),d.link('annotationStore'))),t||(t=r.widgets.defaultAnnotationStore(a)),t||(t=s.sym('http://tabulator.org/wiki/ontologyAnnotation/common'));var v;y[d.rdfs('Class').uri];var x=u('(Loading data from: '+t+')');return s.fetcher.nowOrWhenFetched(t.uri,a,function(n,i){if(!n)return void f('Cannot load store '+t+' :'+i);if(l.removeChild(x),y[d.rdfs('Class').uri]){var h=function n(h,g){var b=s.statementsMatching(a,h);if(b.length){for(var y=0;y<b.length;y++){r.outline.appendPropertyTRs(l,[b[y]]);var i=b[y].object,w=o.createElement('td');l.lastChild.appendChild(w),g&&w.appendChild(r.widgets.newButton(o,s,null,null,a,i,t,function(t,n){t||f('Sorry, failed to save your change:\n'+n)}));var v=s.statementsMatching(i,d.rdf('type'));v.length||(v=s.statementsMatching(i)),v.length?r.widgets.editFormButton(o,l,i,v[0].why,m):f('No data about form')}l.appendChild(o.createElement('hr'))}else u('There are currently no known forms to make a '+c+'.')};v=d.ui('creationForm'),l.appendChild(o.createElement('h2')).textContent=r.utils.label(v),u('Creation forms allow you to add information about a new thing,                                    in this case a new '+c+'.'),h(v,!0),l.appendChild(o.createElement('hr')),u('You can make a new creation form:'),l.appendChild(r.widgets.newButton(o,s,a,v,d.ui('Form'),null,t,m)),l.appendChild(o.createElement('hr')),v=d.ui('annotationForm'),l.appendChild(o.createElement('h2')).textContent=r.utils.label(v),u('Annotaion forms allow you to add extra information about a ,                                '+c+' we already know about.'),h(v,!1),l.appendChild(o.createElement('hr')),u('You can make a new annotation form:'),l.appendChild(r.widgets.newButton(o,s,a,v,d.ui('Form'),null,t,m)),u('(Storing new forms in: '+t+')')}else y[d.ui('Form').uri]?r.widgets.appendForm(o,l,s,a,d.ui('FormForm'),t,m):f('ui/pane internal error -- Eh?')}),l}}}).call(n,a(9)(t),'/')},function(t,n,a){'use strict';var i=a(1);t.exports={icon:i.icons.originalIconBase+'microblog/microblog.png',name:'microblogPane',label:function t(n){var a=i.rdf.Namespace('http://rdfs.org/sioc/types#');return i.store.whether(n,i.ns.rdf('type'),i.ns.foaf('Person'))?'Microblog':null},render:function t(n,a){var o=i.rdf.Namespace('http://rdfs.org/sioc/ns#'),d=i.rdf.Namespace('http://rdfs.org/sioc/types#'),r=i.rdf.Namespace('http://purl.org/rss/1.0/'),l=i.rdf.Namespace('http://xmlns.com/foaf/0.1/'),s=i.rdf.Namespace('http://purl.org/dc/terms/'),u=i.ns.rdf,g=i.store,c=140,m=i.store.fetcher,f=g.updater;Date.prototype.getISOdate=function(){var t=function t(a){return 10>a?'0'+a:a},n=this.getUTCFullYear()+'-'+t(this.getUTCMonth())+'-'+t(this.getUTCDate())+'T'+t(this.getUTCHours())+':'+t(this.getUTCMinutes())+':'+t(this.getUTCSeconds())+'Z';return n},Date.prototype.parseISOdate=function(t){var n=t.split('T'),a=n[0].split('-'),r=n[1].replace('Z','').split(':');return this.setUTCDate(1),this.setUTCFullYear(a[0]),this.setUTCMonth(a[1]),this.setUTCDate(a[2]),this.setUTCHours(r[0]),this.setUTCMinutes(r[1]),this.setUTCSeconds(r[2]),this};var h=function t(n){this.userlist={},this.uris={};var a=g.each(g.sym(n),o('follows'));for(var r in a)this.add(g.any(a[r],o('id')),a[r].uri)};h.prototype.add=function(t,n){this.userlist[t]?!(n in this.uris)&&(this.userlist[t].push(n),this.uris[n]=''):this.userlist[t]=[n]},h.prototype.selectUser=function(t){return this.userlist[t]?[1==this.userlist[t].length,this.userlist[t]]:[!1,[]]};var b=function t(n){if(this.favorites={},this.favoritesURI='',!!n)for(var a in this.user=n.split('#')[0],created=g.each(g.sym(n),o('creator_of')),created)if(g.whether(created[a],u('type'),d('FavouriteThings'))){this.favoritesURI=created[a];var r=g.each(created[a],o('container_of'));for(var i in r)this.favorites[r[i]]='';break}};b.prototype.favorited=function(t){return g.sym(t)in this.favorites},b.prototype.add=function(t,n){var r=new i.rdf.Statement(this.favoritesURI,o('container_of'),g.sym(t),g.sym(this.user));f.insert_statement(r,function(t,a,i){a&&g.add(r.subject,r.predicate,r.object,r.why),n(t,a,i)})},b.prototype.remove=function(t,n){var r=new i.rdf.Statement(this.favoritesURI,o('container_of'),g.sym(t),g.sym(this.user));f.delete_statement(r,function(t,a,i){a&&g.add(r.subject,r.predicate,r.object,r.why),n(t,a,i)})};var y=function t(n){this.kb=n;var a=i.authn.currentUser();if(a){var r=tabulator.preferences.get('acct');r&&(r=n.sym(r)),a&&r&&n.add(a,l('holdsAccount'),r,a.uri.split('#')[0])}};y.prototype.getUser=function(t){var n={name:g.any(t,o('name'))?g.any(t,o('name')):'',avatar:g.any(t,o('avatar'))?g.any(t,o('avatar')):'',id:g.any(t,o('id')),sym:t};return n},y.prototype.getPost=function(t){Post={};var n=new Date;n=n.parseISOdate(g.any(t,s('created'))+'');var r=n.getHours(),i=12<r?' PM':' AM';r=12<r?r-12:r;var a=n.getMinutes();a=10>a?'0'+a:a;var d=['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'],l=['Sun','Mon','Tue','Wed','Thu','Fri','Sat'],c=l[n.getDay()]+' '+n.getDate()+' '+d[n.getMonth()]+' '+n.getFullYear();return n=r+':'+a+i+' on '+c,Post.date=n,Post.mentions='',Post.message=g.any(t,o('content'))+'',Post.creator=g.any(t,o('has_creator')),Post.uri='',Post},y.prototype.gen_random_uri=function(t){var n=t+'#n'+_Mathfloor(1e10*Math.random());return g.sym(n)},y.prototype.statusUpdate=function(t,n,a,l){var c=this.getMyURI();myUser=g.sym(c.split('#')[0]);var m=this.gen_random_uri(myUser.uri),h=g.each(g.sym(c),o('creator_of')),b;for(var y in h)if(g.whether(h[y],u('type'),d('Microblog'))&&!g.whether(h[y],o('topic'),g.sym(this.getMyURI()))){b=h[y];break}var w=[new i.rdf.Statement(m,u('type'),d('MicroblogPost'),myUser),new i.rdf.Statement(m,o('has_creator'),g.sym(c),myUser),new i.rdf.Statement(m,o('content'),t,myUser),new i.rdf.Statement(m,s('created'),new Date().getISOdate()+'',myUser),new i.rdf.Statement(b,o('container_of'),m,myUser)];for(var v in a&&w.push(new i.rdf.Statement(m,o('reply_of'),g.sym(a),myUser)),l.recipients){w.push(new i.rdf.Statement(m,o('topic'),g.sym(l.recipients[v]),myUser)),w.push(new i.rdf.Statement(g.any(),o('container_of'),m,myUser));var r=g.each(g.sym(l.recipients[v]),o('creator_of'));for(var x in r)if(g.whether(r[x],o('topic'),g.sym(l.recipients[v]))){var _=new i.rdf.Statement(r[x],o('container_of'),m,g.sym(l.recipients[v].split('#')[0]));f.insert_statement(_)}}f.insert_statement(w,function(t,a,r){n(t,a,r,w)})},y.prototype.getMyURI=function(){var t=i.authn.currentUser();dump(t);var n=g.any(g.sym(t),l('holdsAccount'));return dump('\n\n'+n),!!n&&n.uri},y.prototype.generateNewMB=function(t,a,r,s){var c=s+'/'+t,m=function n(){tabulator.preferences.set('acct',c+'#'+t)},h=function n(r,a,i,o){if(a)for(var s in notify('Microblog generated at '+c+'#'+t+'please add <b>'+c+'</b> to your foaf.'),mbCancelNewMB(),m(),o)g.add(o[s].subject,o[s].predicate,o[s].object,o[s].why)},b=[new i.rdf.Statement(g.sym(c+'#'+t),u('type'),o('User'),g.sym(c)),new i.rdf.Statement(g.sym(c+'#'+t),o('creator_of'),g.sym(c+'#mb'),g.sym(c)),new i.rdf.Statement(g.sym(c+'#'+t),o('creator_of'),g.sym(c+'#mbn'),g.sym(c)),new i.rdf.Statement(g.sym(c+'#'+t),o('creator_of'),g.sym(c+'#fav'),g.sym(c)),new i.rdf.Statement(g.sym(c+'#'+t),o('name'),a,g.sym(c)),new i.rdf.Statement(g.sym(c+'#'+t),o('id'),t,g.sym(c)),new i.rdf.Statement(g.sym(c+'#'+t),u('label'),t,g.sym(c)),new i.rdf.Statement(n,l('holdsAccount'),g.sym(c+'#'+t),g.sym(c)),new i.rdf.Statement(g.sym(c+'#mb'),u('type'),d('Microblog'),g.sym(c)),new i.rdf.Statement(g.sym(c+'#mb'),o('has_creator'),g.sym(c+'#'+t),g.sym(c)),new i.rdf.Statement(g.sym(c+'#mbn'),u('type'),d('Microblog'),g.sym(c)),new i.rdf.Statement(g.sym(c+'#mbn'),o('topic'),g.sym(c+'#'+t),g.sym(c)),new i.rdf.Statement(g.sym(c+'#mbn'),o('has_creator'),g.sym(c+'#'+t),g.sym(c)),new i.rdf.Statement(g.sym(c+'#fav'),u('type'),d('FavouriteThings'),g.sym(c)),new i.rdf.Statement(g.sym(c+'#fav'),o('has_creator'),g.sym(c+'#'+t),g.sym(c))];r&&b.push(new i.rdf.Statement(g.sym(c+'#'+t),o('avatar'),g.sym(r),g.sym(c))),f.insert_statement(b,h)};var w=new y(g),b=new b(w.getMyURI()),h=new h(w.getMyURI()),v=function t(n,r,s){var c=function t(n){this.tablist={},this.doc=n,this.tabView=n.createElement('ul'),this.tabView.className='tabslist'};c.prototype.create=function(t,n,a,i){var o=this.doc.createElement('li');o.innerHTML=n,i&&(o.className='active'),o.id=t,change=this.change,tablist=this.tablist,o.addEventListener('click',function(t){change(t.target.id,tablist,r)},!1),this.tablist[t]={view:a.id,tab:o},this.tabView.appendChild(o)},c.prototype.getTabView=function(){return this.tabView},c.prototype.change=function(t,n,a){for(var r in n)if(r==t)n[t].tab.className='active',a.getElementById(n[t].view).className+=' active';else{var i=a.getElementById(n[r].view);i.className=i.className.replace(/\w*active\w*/,''),n[r].tab.className=n[t].tab.className.replace(/\w*active\w*/,'')}},this.microblogPane=s;var f=g.each(n,l('holdsAccount'));for(var m in f)if(g.whether(f[m],u('type'),o('User'))&&g.whether(g.any(f[m],o('creator_of')),u('type'),d('Microblog'))){var a=f[m];break}this.Ifollow=g.whether(g.sym(w.getMyURI()),o('follows'),a);var h=g.any(n,u('type'));if(h.uri===d('Microblog').uri||h.uri===d('MicroblogPost').uri)this.thisIsMe=g.any(n,o('has_creator')).uri===w.getMyURI();else if(h.uri===o('User').uri)this.thisIsMe=n.uri===w.getMyURI();else if(h.uri===l('Person').uri){var b=i.authn.currentUser(),y=b&&b.uri;this.thisIsMe=n.uri===y}else this.thisIsMe=!1;this.Tab=new c(r)};v.prototype.notify=function(t){var n=a.createElement('li');n.className='notify',n.innerHTML=t,a.getElementById('notify-container').appendChild(n),setTimeout(function(){a.getElementById('notify-container').removeChild(n)},4e3)},v.prototype.header=function(t,n){postNotificationContainer=this.postNotificationContainer;var a=this;lsFollowUser=function t(){var n=g.sym(w.getMyURI()),r=a.Ifollow,s=a.creator.name,d=function t(n,r,i){if(!0===r){a.Ifollow?g.removeMany(l.subject,l.predicate,l.object,l.why):!g.whether(l.subject,l.predicate,l.object,l.why)&&g.add(l.subject,l.predicate,l.object,l.why),dump('\n'+a.Ifollow),a.Ifollow=!a.Ifollow,P.disabled=!1,dump(a.Ifollow),followButtonLabel=a.Ifollow?'Unfollow ':'Follow ';var o=a.Ifollow?'now follow ':'no longer follow ';P.value=followButtonLabel+s,a.notify('You '+o+s+'.')}},l=new i.rdf.Statement(n,o('follows'),a.creator.sym,n);P.disabled=!0,P.value='Updating...',a.Ifollow?f.delete_statement(l,d):f.insert_statement(l,d)};var s=function t(a){var r=n.createElement('li');r.className='notify',r.innerHTML=a,n.getElementById('notify-container').appendChild(r),setTimeout(function(){n.getElementById('notify-container').removeChild(r)},4e3)},r=function t(n){k.removeChild(k.childNodes[k.childNodes.length-1]),I.disabled=!1},m=function a(i){I.disabled=!0;var o=n.createElement('div'),s=n.createElement('input');g.whether(t,l('name'))?s.value=g.any(t,l('name')):(s.value=g.any(t,l('givenname'))?g.any(t,l('givenname'))+' ':'',s.value+=g.any(t,l('family_name'))?g.any(t,l('givenname')):'',s.value=g.any(t,l('givenname'))+' '+g.any(t,l('family_name')));var d=n.createElement('input');d.value=g.any(t,l('nick'))?g.any(t,l('nick')):'';var c=n.createElement('input');c.value=g.whether(t,l('img'))?g.any(t,l('img')).uri:g.any(t,l('depiction'))?g.any(t,l('depiction')).uri:'';var u=n.createElement('input'),f;u.value=f?f:'http://dig.csail.mit.edu/2007/wiki/sandbox',o.innerHTML='                        <form class ="createNewMB" id="createNewMB">                            <p id="xcmbname"><span class="">Name: </span></p>                            <p id="xcmbid">Id: </p>                            <p id="xcmbavatar">Avatar: </p>                             <p id="xcmbwritable">Host my microblog at: </p>                            <input type="button" id="mbCancel" value="Cancel" />                            <input type="submit" id="mbCreate" value="Create!" />                        </form>                        ',k.appendChild(o),n.getElementById('xcmbname').appendChild(s),n.getElementById('xcmbid').appendChild(d),n.getElementById('xcmbavatar').appendChild(c),n.getElementById('xcmbwritable').appendChild(u),n.getElementById('mbCancel').addEventListener('click',r,!1),n.getElementById('createNewMB').addEventListener('submit',function(){w.generateNewMB(d.value,s.value,c.value,u.value)},!1),s.focus()},b=function t(){var i=new Date,d={recipients:[]};if(w.getMyURI()){myUser=g.sym(w.getMyURI());var l=function t(r,i,o,l){if(!0===i){for(var d in l)g.add(l[d].subject,l[d].predicate,l[d].object,l[d].why);A.disabled=!1,E.value='',y(),s('Microblog Updated.'),a.thisIsMe&&n.getElementById('postNotificationList').insertBefore(a.generatePost(l[0].subject),n.getElementById('postNotificationList').childNodes[0])}else s('There was a problem submitting your post.')},c=E.value.split(' '),u=function t(){A.disabled=!0,A.value='Updating...',w.statusUpdate(E.value,l,C.value,d)};for(var f in c)if(c[f].match(/\@\w+/)){var m=c[f].replace(/\W/g,''),b=h.selectUser(m);if(!0===b[0])d.recipients.push(b[1][0]);else{if(1<b[1].length){var v=n.createElement('select'),x=n.createElement('input');x.type='button',x.value='Continue',x.addEventListener('click',function(){d.recipients.push(b[1][v.value]),u(),v.parentNode.removeChild(x),v.parentNode.removeChild(v)},!1);var _=function t(a,r){var i=g.any(g.sym(a),o('name')),s=n.createElement('option');return s.value=r,s.innerHTML=i,s};for(var T in b[1])v.appendChild(_(b[1][T],T));return k.appendChild(v),void k.appendChild(x)}if((g.any(g.sym(w.getMyURI()),o('id'))+'').toLowerCase()==m.toLowerCase())d.recipients.push(w.getMyURI());else return void s('You do not follow '+m+'. Try following '+m+' before mentioning them.')}}u()}else s('Please set your microblog first.')},y=function t(){T.innerHTML=c-E.value.length,T.style.color=0>c-E.value.length?'#c33':'',0===E.value.length&&(C.value='',A.value='Send')},v=n.createElement('ul');v.className='replyView',v.addEventListener('click',function(){v.className='replyView'},!1),this.xviewReply=v;var x=n.createElement('div');x.className='header-container';var _=n.createElement('ul');_.id='notify-container',_.className='notify-container',this.xnotify=_;var k=n.createElement('form');if(k.className='update-container',k.innerHTML='<h3>What are you up to?</h3>',w.getMyURI()){var C=n.createElement('input');C.id='xinReplyToContainer',C.type='hidden';var E=n.createElement('textarea');E.id='xupdateStatus';var T=n.createElement('span');T.appendChild(n.createTextNode(c)),E.cols=30,E.addEventListener('keyup',y,!1),E.addEventListener('focus',y,!1);var A=n.createElement('input');A.id='xupdateSubmit',A.type='submit',A.value='Send',k.appendChild(C),k.appendChild(T),k.appendChild(E),k.appendChild(A),k.addEventListener('submit',b,!1)}else{var S=n.createTextNode('                    Hi, it looks like you don\'t have a microblog,                    would you like to create one? '),I=n.createElement('input');I.type='button',I.value='Create a new Microblog',I.addEventListener('click',m,!1),k.appendChild(S),k.appendChild(I)}x.appendChild(k);var N=n.createElement('div');N.className='subheader-container',this.creator;var j=g.each(t,l('holdsAccount'));for(var L in j)if(g.whether(j[L],u('type'),o('User'))&&g.whether(g.any(j[L],o('creator_of')),u('type'),d('Microblog'))){var R=j[L];break}if(R){if(this.creator=w.getUser(R),''!==this.creator.avatar){var M=n.createElement('img');M.src=this.creator.avatar.uri,N.appendChild(M)}var D=n.createElement('h1');if(D.className='fn',D.appendChild(n.createTextNode(this.creator.name+' ('+this.creator.id+')')),N.appendChild(D),!this.thisIsMe&&w.getMyURI()){var P=n.createElement('input');P.setAttribute('type','button'),followButtonLabel=this.Ifollow?'Unfollow ':'Follow ',P.value=followButtonLabel+this.creator.name,P.addEventListener('click',lsFollowUser,!1),N.appendChild(P)}var O=this.Tab.getTabView();x.appendChild(N),x.appendChild(O)}return x},v.prototype.generatePost=function(n,r){var i=this,s=function t(r){for(var o in xviewReply=i.xviewReply,xviewReply.childNodes)xviewReply.removeChild(xviewReply.childNodes[0]);var n=a.createElement('li');n.className='closeContainer';var s=a.createElement('span');for(var d in s.innerHTML='&#215;',s.className='closeButton',n.appendChild(s),xviewReply.appendChild(n),r)xviewReply.appendChild(i.generatePost(g.sym(r[d]),this.thisIsMe,'view'));xviewReply.className='replyView-active',i.microblogPane.appendChild(xviewReply)},d=a.createElement('li');d.className='post',d.setAttribute('id',(n.uri+'').split('#')[1]);var c=w.getPost(n),u=g.any(g.any(n,o('has_creator')),o('id')),h=g.any(void 0,l('holdsAccount'),g.any(n,o('has_creator'))),y=a.createElement('a');y.href=h.uri,y.className='userLink';var v=a.createTextNode(w.getUser(c.creator).id);y.appendChild(v);var x=a.createElement('img');x.src=w.getUser(c.creator).avatar.uri,x.className='postAvatar';var _=a.createElement('blockquote'),k=c.message,C=a.createElement('a');C.className='postLink',C.addEventListener('click',function(){s([n.uri])},!1),C.id='post_'+(n.uri+'').split('#')[1],C.setAttribute('content',n.uri),C.setAttribute('property','permalink'),postLink=a.createTextNode(c.date?c.date:'post date unknown'),C.appendChild(postLink);var E=g.each(n,o('topic'));for(var T in tags={},E)m.lookUpThing(E[T]),id=g.any(E[T],o('id')),tags['@'+id]=E[T];var A=k.match(/(\@|\#|\!)\w+/g),S=function t(){return p=A.pop(),tags[p]?g.any(void 0,l('holdsAccount'),tags[p]).uri:p};for(var I in tags){var t=I.replace(/\@/,''),N=RegExp('(@|!|#)('+t+')');k=k.replace(N,'$1<a href="'+S()+'">$2</a>')}_.innerHTML=k;var j=g.each(n,o('reply_of')),L=a.createElement('span');for(var R in j){var M;M=(j[R]+'').replace(/\<|\>/g,'');var D=function t(){var r=a.createElement('a');return r.innerHTML=', <b>in reply to</b>',r.addEventListener('click',function(){return s([n.uri,M]),!1},!1),r};L.appendChild(D())}var P=function t(){var r=w.getUser(c.creator).id,i=a.getElementById('xupdateStatus'),o=a.getElementById('xinReplyToContainer'),s=a.getElementById('xupdateSubmit');i.value='@'+r+' ',i.focus(),o.value=n.uri,s.value='Reply'},O=function t(n){var r=function t(){a.getElementById('notify-container').removeChild(d),n.target.disabled=!1},s=function t(){u(),a.getElementById('notify-container').removeChild(d)};n.target.disabled=!0;var d=a.createElement('li');d.className='notify conf',d.innerHTML+='<p>Are you sure you want to delete this post?</p>',d.addEventListener('keyup',function(t){27==t.keyCode&&r()},!1);var l=a.createElement('input');l.type='button',l.className='confirm',l.value='Delete',l.addEventListener('click',s,!1);var c=a.createElement('input');c.type='button',c.className='confirm',c.value='Cancel',c.addEventListener('click',r,!1),d.appendChild(c),d.appendChild(l),a.getElementById('notify-container').appendChild(d),c.focus();var u=function t(){var r=function t(r,a){if(a){i.notify('Post deleted.');var o=n.target.parentNode;o.parentNode.removeChild(o),g.removeMany(deleteMe)}else i.notify('Oops, there was a problem, please try again'),n.target.disabled=!0},s=function t(s,d){if(d){var l=g.statementsMatching(void 0,o('container_of'),g.sym(a.getElementById('post_'+n.target.parentNode.id).getAttribute('content')));f.batch_delete_statement(l,r)}else i.notify('Oops, there was a problem, please try again'),n.target.disabled=!1};n.target.disabled=!0,deleteMe=g.statementsMatching(g.sym(a.getElementById('post_'+n.target.parentNode.id).getAttribute('content'))),f.batch_delete_statement(deleteMe,s)}};if(w.getMyURI()){var B=g.any(n,o('has_creator'));if(w.getMyURI()!=B.uri){var U=a.createElement('input');U.type='button',U.value='reply',U.className='reply',U.addEventListener('click',P,!1)}else{var F=a.createElement('input');F.type='button',F.value='Delete',F.className='reply',F.addEventListener('click',O,!1)}}var q=function t(n){var r=n.target.parentNode.id,i=a.getElementById('post_'+r).getAttribute('content');z.className+=' ing';var o=function t(n,a,r,i){a&&(z.className='ed'==z.className.split(' ')[1]?'favorit':'favorit ed')};b.favorited(i)?b.remove(i,o):b.add(i,o)},z=a.createElement('a');return z.innerHTML='&#9733;',z.addEventListener('click',q,!1),z.className=b.favorited(n.uri)?'favorit ed':'favorit',d.appendChild(x),d.appendChild(_),w.getMyURI()&&(d.appendChild(z),w.getMyURI()==B.uri?d.appendChild(F):d.appendChild(U)),d.appendChild(y),d.appendChild(C),''!==j&&d.appendChild(L),d},v.prototype.generatePostList=function(t){var n=a.createElement('ul'),r={},i=[];for(var o in t){var l=g.any(t[o],s('created'));l&&(i.push(l),r[l]=this.generatePost(t[o],this.thisIsMe))}for(var c in i.sort().reverse(),i)n.appendChild(r[i[c]]);return n},v.prototype.followsView=function(){var t=function t(n){var r=g.any(n,o('id')),i=a.createElement('li');i.className='follow',r=r?r:n.uri;var s=g.any(void 0,l('holdsAccount'),n);return s=s?s.uri:n.uri,i.innerHTML='<a href="'+s+'">'+r+'</a>',i},n=a.createElement('div');if(n.id='xfollows',n.className='followlist-container view-container',this.creator&&g.whether(this.creator.sym,o('follows'))){var r=g.each(this.creator.sym,o('follows')),i=a.createElement('ul');for(var s in r)i.appendChild(t(r[s]));n.appendChild(i)}return this.Tab.create('tab-follows','Follows',n,!1),n},v.prototype.streamView=function(t,n){var a=n.createElement('div');a.id='postContainer',a.className='post-container view-container active';var r=[];if(g.whether(t,l('name'))&&g.whether(t,l('holdsAccount'))){m.lookUpThing(g.any(t,l('holdsAccount')));var i=g.each(g.any(t,l('holdsAccount')),o('follows'));for(var s in i){m.lookUpThing(i[s]);var d=g.each(i[s],o('creator_of'));for(var c in d)if(m.lookUpThing(d[c]),g.whether(d[c],o('topic'),i[s]))continue;else r=r.concat(g.each(d[c],o('container_of')))}}if(0<r.length){var u=this.generatePostList(r);u.id='postList',u.className='postList',a.appendChild(u)}return this.Tab.create('tab-stream','By Follows',a,!0),a},v.prototype.notificationsView=function(t,n){var a=n.createElement('div');a.id='postNotificationContainer',a.className='notification-container view-container';var r=n.createElement('div');r.id='postMentionContainer',r.className='mention-container view-container';var i=[],s=[],c=g.any(t,l('holdsAccount')),f=g.any(c,o('id')),h=g.each(c,o('creator_of'));for(var b in h)m.lookUpThing(h[b]),g.whether(h[b],o('topic'),c)?s=s.concat(g.each(h[b],o('container_of'))):g.whether(h[b],u('type'),d('Microblog'))&&(i=i.concat(g.each(h[b],o('container_of'))));var y=this.generatePostList(i);y.id='postNotificationList',y.className='postList',a.appendChild(y);var w=this.generatePostList(s);w.id='postMentionList',w.className='postList',r.appendChild(w),this.postMentionContainer=r,this.postNotificationContainer=a,this.Tab.create('tab-by-user','By '+f,a,!1),this.Tab.create('tab-at-user','@'+f,r,!1)},v.prototype.build=function(){var t=this.microblogPane;this.headerContainer=this.header(n,a),this.postContainer=this.streamView(n,a),this.notificationsView(n,a),this.xfollows=this.followsView(),t.className='ppane',t.appendChild(this.xviewReply),t.appendChild(this.xnotify),t.appendChild(this.headerContainer),void 0!=this.xfollows&&t.appendChild(this.xfollows),t.appendChild(this.postContainer),t.appendChild(this.postNotificationContainer),t.appendChild(this.postMentionContainer)};var x=a.createElement('div'),_=new v(n,a,x);return _.build(),x}}},function(t,n,a){'use strict';var r=a(1);t.exports={icon:r.icons.iconBase+'noun_123691.svg',name:'sharing',label:function n(a){var i=r.store,o=r.ns,s=i.findTypeURIs(a);return s[o.ldp('Resource').uri]?'Sharing':s[o.ldp('Container').uri]?'Sharing':s[o.ldp('BasicContainer').uri]?'Sharing':null},render:function n(a,i){var o=r.store,s=r.ns,d=i.createElement('div');d.setAttribute('class','sharingPane');var l=o.findTypeURIs(a),t='file';(l[s.ldp('BasicContainer').uri]||l[s.ldp('Container').uri])&&(t='folder');var c=i.createElement('div'),u=c.appendChild(i.createElement('table'));u.setAttribute('style','font-size:120%; margin: 1em; border: 0.1em #ccc ;');var f=u.appendChild(i.createElement('tr')),m=f.appendChild(i.createElement('div'));m.setAttribute('style','padding: 2em;');var h=u.appendChild(i.createElement('tr')),g=h.appendChild(i.createElement('table')),b={target:a,me:null,noun:t,div:c,dom:i,statusRegion:m},y=r.authn.currentUser();return b.me=y,r.aclControl.preventBrowserDropEvents(i),g.appendChild(r.aclControl.ACLControlBox5(a,i,t,o,function(t,n){t||(g.innerHTML='ACL control box Failed: '+n)})),d.appendChild(c),d}}},function(t,n,a){'use strict';var r=a(1);t.exports={icon:r.icons.originalIconBase+'tango/22-emblem-system.png',name:'internal',label:function t(n){return'under the hood'},render:function t(n,a){function i(t,n){return!!d['http://www.w3.org/2007/ont/link#ProtocolEvent']||'undefined'!=typeof r.panes.internal.predicates[t.uri]}var o=r.rdf,s=r.store;n=s.canon(n);var d=s.findTypeURIs(n),l=a.createElement('div');l.setAttribute('class','internalPane'),l.setAttribute('style','background-color: #ddddff; padding: 0.5em; border-radius: 1em;');var c=s.statementsMatching(n),u=null;if(n.uri&&(c.push(o.st(n,s.sym('http://www.w3.org/2007/ont/link#uri'),n.uri,r.store.fetcher.appNode)),0<=n.uri.indexOf('#')?(u=n.uri.split('#')[0],c.push(o.st(n,s.sym('http://www.w3.org/2007/ont/link#documentURI'),n.uri.split('#')[0],r.store.fetcher.appNode)),c.push(o.st(n,s.sym('http://www.w3.org/2007/ont/link#document'),s.sym(n.uri.split('#')[0]),r.store.fetcher.appNode))):u=n.uri),u){var f=r.store.updater.editable(u);f&&c.push(o.st(n,s.sym('http://www.w3.org/ns/rww#editable'),s.literal(f),r.store.fetcher.appNode))}var m=r.panes.getOutliner(a);return m.appendPropertyTRs(l,c,!1,i),c=s.statementsMatching(void 0,void 0,n),m.appendPropertyTRs(l,c,!0,i),l},predicates:{"http://www.w3.org/2007/ont/link#request":1,"http://www.w3.org/2007/ont/link#requestedBy":1,"http://www.w3.org/2007/ont/link#source":1,"http://www.w3.org/2007/ont/link#session":2,"http://www.w3.org/2007/ont/link#uri":1,"http://www.w3.org/2007/ont/link#documentURI":1,"http://www.w3.org/2007/ont/link#document":1,"http://www.w3.org/2007/ont/link#all":1,"http://www.w3.org/2007/ont/link#Document":1,"http://www.w3.org/ns/rww#editable":1,"http://www.w3.org/2000/01/rdf-schema#seeAlso":1,"http://www.w3.org/2002/07/owl#":1},classes:{"http://www.w3.org/2007/ont/link#ProtocolEvent":1}}},function(t,n,a){'use strict';var r=a(1);t.exports={icon:r.icons.iconBase+'noun_547570.svg',name:'home',label:function t(n){return'home'},render:function t(n,a){var i=function t(n){var r=a.createElement('pre');r.setAttribute('style','background-color: pink'),s.appendChild(r),r.appendChild(a.createTextNode(n))},o=function t(){var n={div:s,dom:a,statusArea:s,me:d},i=s.appendChild(a.createElement('div')),o={div:i,dom:a,statusArea:s,me:d};i.appendChild(a.createElement('h4')).textContent='Make a new tool';var l=r.create.newThingUI(o,r.panes);s.appendChild(a.createElement('h4')).textContent='Private:',r.authn.registrationList(n,{private:!0}).then(function(t){s.appendChild(a.createElement('h4')).textContent='Public:',r.authn.registrationList(t,{public:!0}).then(function(t){})})},s=a.createElement('div'),d=r.authn.currentUser();return o(),s}}}])});
//# sourceMappingURL=mashlib.min.js.map